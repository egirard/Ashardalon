(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();const ms="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(ms);const $r=1,Ur=2,Gr=4,gs=8,ws=16,ys=2,se=Symbol(),xs="http://www.w3.org/1999/xhtml",Mn=!1;var Vr=Array.isArray,bs=Array.prototype.indexOf,Un=Array.from,Es=Object.defineProperty,At=Object.getOwnPropertyDescriptor,Ts=Object.getOwnPropertyDescriptors,Ss=Object.prototype,ks=Array.prototype,Kr=Object.getPrototypeOf,xr=Object.isExtensible;function Is(e){for(var t=0;t<e.length;t++)e[t]()}function Wr(){var e,t,n=new Promise((r,i)=>{e=r,t=i});return{promise:n,resolve:e,reject:t}}const ie=2,Gn=4,Vn=8,Ps=1<<24,Je=16,et=32,mt=64,dn=128,Oe=512,ae=1024,me=2048,tt=4096,ye=8192,it=16384,Kn=32768,Tt=65536,br=1<<17,Yr=1<<18,Ct=1<<19,Ms=1<<20,vt=32768,Cn=1<<21,Wn=1<<22,st=1<<23,Zt=Symbol("$state"),Cs=Symbol(""),xt=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Os(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function zs(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Ds(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function As(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Rs(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Ns(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Hs(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Fs(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Ls(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}function Bs(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Xr(e){return e===this.v}function js(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Qr(e){return!js(e,this.v)}let qs=!1,Ie=null;function St(e){Ie=e}function ct(e,t=!1,n){Ie={p:Ie,i:!1,c:null,e:null,s:e,x:null,l:null}}function ut(e){var t=Ie,n=t.e;if(n!==null){t.e=null;for(var r of n)fi(r)}return t.i=!0,Ie=t.p,{}}function Zr(){return!0}let bt=[];function $s(){var e=bt;bt=[],Is(e)}function qt(e){if(bt.length===0){var t=bt;queueMicrotask(()=>{t===bt&&$s()})}bt.push(e)}function Jr(e){var t=q;if(t===null)return R.f|=st,e;if((t.f&Kn)===0){if((t.f&dn)===0)throw e;t.b.error(e)}else kt(e,t)}function kt(e,t){for(;t!==null;){if((t.f&dn)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e}const Kt=new Set;let W=null,ke=null,Ae=[],Yn=null,On=!1;class Fe{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#r=0;#n=0;#l=null;#s=[];#i=[];skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(t){Ae=[],this.apply();var n={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const r of t)this.#a(r,n);this.is_fork||this.#u(),this.is_deferred()?(this.#o(n.effects),this.#o(n.render_effects),this.#o(n.block_effects)):(W=null,Er(n.render_effects),Er(n.effects),this.#l?.resolve()),ke=null}#a(t,n){t.f^=ae;for(var r=t.first;r!==null;){var i=r.f,s=(i&(et|mt))!==0,a=s&&(i&ae)!==0,l=a||(i&ye)!==0||this.skipped_effects.has(r);if((r.f&dn)!==0&&r.b?.is_pending()&&(n={parent:n,effect:r,effects:[],render_effects:[],block_effects:[]}),!l&&r.fn!==null){s?r.f^=ae:(i&Gn)!==0?n.effects.push(r):Ut(r)&&((r.f&Je)!==0&&n.block_effects.push(r),Ft(r));var o=r.first;if(o!==null){r=o;continue}}var u=r.parent;for(r=r.next;r===null&&u!==null;)u===n.effect&&(this.#o(n.effects),this.#o(n.render_effects),this.#o(n.block_effects),n=n.parent),r=u.next,u=u.parent}}#o(t){for(const n of t)((n.f&me)!==0?this.#s:this.#i).push(n),this.#c(n.deps),oe(n,ae)}#c(t){if(t!==null)for(const n of t)(n.f&ie)===0||(n.f&vt)===0||(n.f^=vt,this.#c(n.deps))}capture(t,n){this.previous.has(t)||this.previous.set(t,n),(t.f&st)===0&&(this.current.set(t,t.v),ke?.set(t,t.v))}activate(){W=this,this.apply()}deactivate(){W===this&&(W=null,ke=null)}flush(){if(this.activate(),Ae.length>0){if(Us(),W!==null&&W!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#t)t(this);this.#t.clear()}#u(){if(this.#n===0){for(const t of this.#e)t();this.#e.clear()}this.#r===0&&this.#f()}#f(){if(Kt.size>1){this.previous.clear();var t=ke,n=!0,r={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const s of Kt){if(s===this){n=!1;continue}const a=[];for(const[o,u]of this.current){if(s.current.has(o))if(n&&u!==s.current.get(o))s.current.set(o,u);else continue;a.push(o)}if(a.length===0)continue;const l=[...s.current.keys()].filter(o=>!this.current.has(o));if(l.length>0){var i=Ae;Ae=[];const o=new Set,u=new Map;for(const f of a)ei(f,l,o,u);if(Ae.length>0){W=s,s.apply();for(const f of Ae)s.#a(f,r);s.deactivate()}Ae=i}}W=null,ke=t}this.committed=!0,Kt.delete(this)}increment(t){this.#r+=1,t&&(this.#n+=1)}decrement(t){this.#r-=1,t&&(this.#n-=1),this.revive()}revive(){for(const t of this.#s)oe(t,me),_t(t);for(const t of this.#i)oe(t,tt),_t(t);this.#s=[],this.#i=[],this.flush()}oncommit(t){this.#e.add(t)}ondiscard(t){this.#t.add(t)}settled(){return(this.#l??=Wr()).promise}static ensure(){if(W===null){const t=W=new Fe;Kt.add(W),Fe.enqueue(()=>{W===t&&t.flush()})}return W}static enqueue(t){qt(t)}apply(){}}function Us(){var e=ot;On=!0;var t=null;try{var n=0;for(rn(!0);Ae.length>0;){var r=Fe.ensure();if(n++>1e3){var i,s;Gs()}r.process(Ae),at.clear()}}finally{On=!1,rn(e),Yn=null}}function Gs(){try{Rs()}catch(e){kt(e,Yn)}}let Ke=null;function Er(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if((r.f&(it|ye))===0&&Ut(r)&&(Ke=new Set,Ft(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?_i(r):r.fn=null),Ke?.size>0)){at.clear();for(const i of Ke){if((i.f&(it|ye))!==0)continue;const s=[i];let a=i.parent;for(;a!==null;)Ke.has(a)&&(Ke.delete(a),s.push(a)),a=a.parent;for(let l=s.length-1;l>=0;l--){const o=s[l];(o.f&(it|ye))===0&&Ft(o)}}Ke.clear()}}Ke=null}}function ei(e,t,n,r){if(!n.has(e)&&(n.add(e),e.reactions!==null))for(const i of e.reactions){const s=i.f;(s&ie)!==0?ei(i,t,n,r):(s&(Wn|Je))!==0&&(s&me)===0&&ti(i,t,r)&&(oe(i,me),_t(i))}}function ti(e,t,n){const r=n.get(e);if(r!==void 0)return r;if(e.deps!==null)for(const i of e.deps){if(t.includes(i))return!0;if((i.f&ie)!==0&&ti(i,t,n))return n.set(i,!0),!0}return n.set(e,!1),!1}function _t(e){for(var t=Yn=e;t.parent!==null;){t=t.parent;var n=t.f;if(On&&t===q&&(n&Je)!==0&&(n&Yr)===0)return;if((n&(mt|et))!==0){if((n&ae)===0)return;t.f^=ae}}Ae.push(t)}function Vs(e){let t=0,n=pt(0),r;return()=>{Nt()&&(c(n),di(()=>(t===0&&(r=ki(()=>e(()=>Rt(n)))),t+=1,()=>{qt(()=>{t-=1,t===0&&(r?.(),r=void 0,Rt(n))})})))}}var Ks=Tt|Ct|dn;function Ws(e,t,n){new Ys(e,t,n)}class Ys{parent;#e=!1;#t;#r=null;#n;#l;#s;#i=null;#a=null;#o=null;#c=null;#u=null;#f=0;#d=0;#v=!1;#h=null;#w=Vs(()=>(this.#h=pt(this.#f),()=>{this.#h=null}));constructor(t,n,r){this.#t=t,this.#n=n,this.#l=r,this.parent=q.b,this.#e=!!this.#n.pending,this.#s=Jn(()=>{q.b=this;{var i=this.#m();try{this.#i=Te(()=>r(i))}catch(s){this.error(s)}this.#d>0?this.#p():this.#e=!1}return()=>{this.#u?.remove()}},Ks)}#y(){try{this.#i=Te(()=>this.#l(this.#t))}catch(t){this.error(t)}this.#e=!1}#x(){const t=this.#n.pending;t&&(this.#a=Te(()=>t(this.#t)),Fe.enqueue(()=>{var n=this.#m();this.#i=this.#_(()=>(Fe.ensure(),Te(()=>this.#l(n)))),this.#d>0?this.#p():(Et(this.#a,()=>{this.#a=null}),this.#e=!1)}))}#m(){var t=this.#t;return this.#e&&(this.#u=lt(),this.#t.before(this.#u),t=this.#u),t}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#_(t){var n=q,r=R,i=Ie;Be(this.#s),_e(this.#s),St(this.#s.ctx);try{return t()}catch(s){return Jr(s),null}finally{Be(n),_e(r),St(i)}}#p(){const t=this.#n.pending;this.#i!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#u),gi(this.#i,this.#c)),this.#a===null&&(this.#a=Te(()=>t(this.#t)))}#g(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#g(t);return}this.#d+=t,this.#d===0&&(this.#e=!1,this.#a&&Et(this.#a,()=>{this.#a=null}),this.#c&&(this.#t.before(this.#c),this.#c=null))}update_pending_count(t){this.#g(t),this.#f+=t,this.#h&&It(this.#h,this.#f)}get_effect_pending(){return this.#w(),c(this.#h)}error(t){var n=this.#n.onerror;let r=this.#n.failed;if(this.#v||!n&&!r)throw t;this.#i&&(pe(this.#i),this.#i=null),this.#a&&(pe(this.#a),this.#a=null),this.#o&&(pe(this.#o),this.#o=null);var i=!1,s=!1;const a=()=>{if(i){Bs();return}i=!0,s&&Ls(),Fe.ensure(),this.#f=0,this.#o!==null&&Et(this.#o,()=>{this.#o=null}),this.#e=this.has_pending_snippet(),this.#i=this.#_(()=>(this.#v=!1,Te(()=>this.#l(this.#t)))),this.#d>0?this.#p():this.#e=!1};var l=R;try{_e(null),s=!0,n?.(t,a),s=!1}catch(o){kt(o,this.#s&&this.#s.parent)}finally{_e(l)}r&&qt(()=>{this.#o=this.#_(()=>{Fe.ensure(),this.#v=!0;try{return Te(()=>{r(this.#t,()=>t,()=>a)})}catch(o){return kt(o,this.#s.parent),null}finally{this.#v=!1}})})}}function Xs(e,t,n){for(var r=[],i=t.length,s=0;s<i;s++)er(t[s].e,r,!0);pi(r,()=>{var a=r.length===0&&n!==null;if(a){var l=n,o=l.parentNode;oa(o),o.append(l),e.items.clear(),Me(e,t[0].prev,t[i-1].next)}for(var u=0;u<i;u++){var f=t[u];a||(e.items.delete(f.k),Me(e,f.prev,f.next)),pe(f.e,!a)}e.first===t[0]&&(e.first=t[0].prev)})}function Ye(e,t,n,r,i,s=null){var a=e,l=new Map,o=null,u=(t&Gr)!==0,f=(t&$r)!==0,v=(t&Ur)!==0;if(u){var d=e;a=d.appendChild(lt())}var h=null,b=na(()=>{var E=n();return Vr(E)?E:E==null?[]:Un(E)}),N,p=!0;function k(){Qs(I,N,a,t,r),h!==null&&(N.length===0?(h.fragment?(a.before(h.fragment),h.fragment=null):tr(h.effect),$.first=h.effect):Et(h.effect,()=>{h=null}))}var $=Jn(()=>{N=c(b);for(var E=N.length,P=new Set,U=W,B=null,C=ci(),T=0;T<E;T+=1){var y=N[T],x=r(y,T),G=p?null:l.get(x);G?(f&&It(G.v,y),v?It(G.i,T):G.i=T,C&&U.skipped_effects.delete(G.e)):(G=Zs(p?a:null,B,y,x,T,i,t,n),p&&(G.o=!0,B===null?o=G:B.next=G,B=G),l.set(x,G)),P.add(x)}if(E===0&&s&&!h)if(p)h={fragment:null,effect:Te(()=>s(a))};else{var V=document.createDocumentFragment(),xe=lt();V.append(xe),h={fragment:V,effect:Te(()=>s(xe))}}if(!p)if(C){for(const[ee,Pe]of l)P.has(ee)||U.skipped_effects.add(Pe.e);U.oncommit(k),U.ondiscard(()=>{})}else k();c(b)}),I={effect:$,items:l,first:o};p=!1}function Qs(e,t,n,r,i){var s=(r&gs)!==0,a=t.length,l=e.items,o=e.first,u,f=null,v,d=[],h=[],b,N,p,k;if(s)for(k=0;k<a;k+=1)b=t[k],N=i(b,k),p=l.get(N),p.o&&(p.a?.measure(),(v??=new Set).add(p));for(k=0;k<a;k+=1){if(b=t[k],N=i(b,k),p=l.get(N),e.first??=p,!p.o){p.o=!0;var $=f?f.next:o;Me(e,f,p),Me(e,p,$),Sn(p,$,n),f=p,d=[],h=[],o=f.next;continue}if((p.e.f&ye)!==0&&(tr(p.e),s&&(p.a?.unfix(),(v??=new Set).delete(p))),p!==o){if(u!==void 0&&u.has(p)){if(d.length<h.length){var I=h[0],E;f=I.prev;var P=d[0],U=d[d.length-1];for(E=0;E<d.length;E+=1)Sn(d[E],I,n);for(E=0;E<h.length;E+=1)u.delete(h[E]);Me(e,P.prev,U.next),Me(e,f,P),Me(e,U,I),o=I,f=U,k-=1,d=[],h=[]}else u.delete(p),Sn(p,o,n),Me(e,p.prev,p.next),Me(e,p,f===null?e.first:f.next),Me(e,f,p),f=p;continue}for(d=[],h=[];o!==null&&o.k!==N;)(o.e.f&ye)===0&&(u??=new Set).add(o),h.push(o),o=o.next;if(o===null)continue;p=o}d.push(p),f=p,o=p.next}let B=l.size>a;if(o!==null||u!==void 0){for(var C=u===void 0?[]:Un(u);o!==null;)(o.e.f&ye)===0&&C.push(o),o=o.next;var T=C.length;if(B=l.size-T>a,T>0){var y=(r&Gr)!==0&&a===0?n:null;if(s){for(k=0;k<T;k+=1)C[k].a?.measure();for(k=0;k<T;k+=1)C[k].a?.fix()}Xs(e,C,y)}}if(B)for(const x of l.values())x.o||(Me(e,f,x),f=x);e.effect.last=f&&f.e,s&&qt(()=>{if(v!==void 0)for(p of v)p.a?.apply()})}function Zs(e,t,n,r,i,s,a,l){var o=(a&$r)!==0,u=(a&ws)===0,f=o?u?ia(n,!1,!1):pt(n):n,v=(a&Ur)===0?i:pt(i),d={i:v,v:f,k:r,a:null,e:null,o:!1,prev:t,next:null};try{if(e===null){var h=document.createDocumentFragment();h.append(e=lt())}return d.e=Te(()=>s(e,f,v,l)),t!==null&&(t.next=d),d}finally{}}function Sn(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,i=t?t.e.nodes_start:n,s=e.e.nodes_start;s!==null&&s!==r;){var a=$t(s);i.before(s),s=a}}function Me(e,t,n){t===null?(e.first=n,e.effect.first=n&&n.e):(t.e.next&&(t.e.next.prev=null),t.next=n,t.e.next=n&&n.e),n!==null&&(n.e.prev&&(n.e.prev.next=null),n.prev=t,n.e.prev=t&&t.e)}function Js(e,t,n,r){const i=Xn;if(n.length===0&&e.length===0){r(t.map(i));return}var s=W,a=q,l=ea();function o(){Promise.all(n.map(u=>ta(u))).then(u=>{l();try{r([...t.map(i),...u])}catch(f){(a.f&it)===0&&kt(f,a)}s?.deactivate(),tn()}).catch(u=>{kt(u,a)})}e.length>0?Promise.all(e).then(()=>{l();try{return o()}finally{s?.deactivate(),tn()}}):o()}function ea(){var e=q,t=R,n=Ie,r=W;return function(s=!0){Be(e),_e(t),St(n),s&&r?.activate()}}function tn(){Be(null),_e(null),St(null)}function Xn(e){var t=ie|me,n=R!==null&&(R.f&ie)!==0?R:null;return q!==null&&(q.f|=Ct),{ctx:Ie,deps:null,effects:null,equals:Xr,f:t,fn:e,reactions:null,rv:0,v:se,wv:0,parent:n??q,ac:null}}function ta(e,t){let n=q;n===null&&Os();var r=n.b,i=void 0,s=pt(se),a=!R,l=new Map;return ha(()=>{var o=Wr();i=o.promise;try{Promise.resolve(e()).then(o.resolve,o.reject).then(()=>{u===W&&u.committed&&u.deactivate(),tn()})}catch(d){o.reject(d),tn()}var u=W;if(a){var f=!r.is_pending();r.update_pending_count(1),u.increment(f),l.get(u)?.reject(xt),l.delete(u),l.set(u,o)}const v=(d,h=void 0)=>{if(u.activate(),h)h!==xt&&(s.f|=st,It(s,h));else{(s.f&st)!==0&&(s.f^=st),It(s,d);for(const[b,N]of l){if(l.delete(b),b===u)break;N.reject(xt)}}a&&(r.update_pending_count(-1),u.decrement(f))};o.promise.then(v,d=>v(null,d||"unknown"))}),ua(()=>{for(const o of l.values())o.reject(xt)}),new Promise(o=>{function u(f){function v(){f===i?o(s):u(i)}f.then(v,v)}u(i)})}function K(e){const t=Xn(e);return wi(t),t}function na(e){const t=Xn(e);return t.equals=Qr,t}function ni(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)pe(t[n])}}function ra(e){for(var t=e.parent;t!==null;){if((t.f&ie)===0)return(t.f&it)===0?t:null;t=t.parent}return null}function Qn(e){var t,n=q;Be(ra(e));try{e.f&=~vt,ni(e),t=Ei(e)}finally{Be(n)}return t}function ri(e){var t=Qn(e);if(e.equals(t)||(W?.is_fork||(e.v=t),e.wv=xi()),!Ot)if(ke!==null)(Nt()||W?.is_fork)&&ke.set(e,t);else{var n=(e.f&Oe)===0?tt:ae;oe(e,n)}}let zn=new Set;const at=new Map;let ii=!1;function pt(e,t){var n={f:0,v:e,reactions:null,equals:Xr,rv:0,wv:0};return n}function Q(e,t){const n=pt(e);return wi(n),n}function ia(e,t=!1,n=!0){const r=pt(e);return t||(r.equals=Qr),r}function A(e,t,n=!1){R!==null&&(!Le||(R.f&br)!==0)&&Zr()&&(R.f&(ie|Je|Wn|br))!==0&&!Xe?.includes(e)&&Fs();let r=n?ve(t):t;return It(e,r)}function It(e,t){if(!e.equals(t)){var n=e.v;Ot?at.set(e,t):at.set(e,n),e.v=t;var r=Fe.ensure();r.capture(e,n),(e.f&ie)!==0&&((e.f&me)!==0&&Qn(e),oe(e,(e.f&Oe)!==0?ae:tt)),e.wv=xi(),si(e,me),q!==null&&(q.f&ae)!==0&&(q.f&(et|mt))===0&&(Ee===null?pa([e]):Ee.push(e)),!r.is_fork&&zn.size>0&&!ii&&sa()}return t}function sa(){ii=!1;var e=ot;rn(!0);const t=Array.from(zn);try{for(const n of t)(n.f&ae)!==0&&oe(n,tt),Ut(n)&&Ft(n)}finally{rn(e)}zn.clear()}function Rt(e){A(e,e.v+1)}function si(e,t){var n=e.reactions;if(n!==null)for(var r=n.length,i=0;i<r;i++){var s=n[i],a=s.f,l=(a&me)===0;if(l&&oe(s,t),(a&ie)!==0){var o=s;ke?.delete(o),(a&vt)===0&&(a&Oe&&(s.f|=vt),si(o,tt))}else l&&((a&Je)!==0&&Ke!==null&&Ke.add(s),_t(s))}}function ve(e){if(typeof e!="object"||e===null||Zt in e)return e;const t=Kr(e);if(t!==Ss&&t!==ks)return e;var n=new Map,r=Vr(e),i=Q(0),s=ht,a=l=>{if(ht===s)return l();var o=R,u=ht;_e(null),kr(s);var f=l();return _e(o),kr(u),f};return r&&n.set("length",Q(e.length)),new Proxy(e,{defineProperty(l,o,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&Ns();var f=n.get(o);return f===void 0?f=a(()=>{var v=Q(u.value);return n.set(o,v),v}):A(f,u.value,!0),!0},deleteProperty(l,o){var u=n.get(o);if(u===void 0){if(o in l){const f=a(()=>Q(se));n.set(o,f),Rt(i)}}else A(u,se),Rt(i);return!0},get(l,o,u){if(o===Zt)return e;var f=n.get(o),v=o in l;if(f===void 0&&(!v||At(l,o)?.writable)&&(f=a(()=>{var h=ve(v?l[o]:se),b=Q(h);return b}),n.set(o,f)),f!==void 0){var d=c(f);return d===se?void 0:d}return Reflect.get(l,o,u)},getOwnPropertyDescriptor(l,o){var u=Reflect.getOwnPropertyDescriptor(l,o);if(u&&"value"in u){var f=n.get(o);f&&(u.value=c(f))}else if(u===void 0){var v=n.get(o),d=v?.v;if(v!==void 0&&d!==se)return{enumerable:!0,configurable:!0,value:d,writable:!0}}return u},has(l,o){if(o===Zt)return!0;var u=n.get(o),f=u!==void 0&&u.v!==se||Reflect.has(l,o);if(u!==void 0||q!==null&&(!f||At(l,o)?.writable)){u===void 0&&(u=a(()=>{var d=f?ve(l[o]):se,h=Q(d);return h}),n.set(o,u));var v=c(u);if(v===se)return!1}return f},set(l,o,u,f){var v=n.get(o),d=o in l;if(r&&o==="length")for(var h=u;h<v.v;h+=1){var b=n.get(h+"");b!==void 0?A(b,se):h in l&&(b=a(()=>Q(se)),n.set(h+"",b))}if(v===void 0)(!d||At(l,o)?.writable)&&(v=a(()=>Q(void 0)),A(v,ve(u)),n.set(o,v));else{d=v.v!==se;var N=a(()=>ve(u));A(v,N)}var p=Reflect.getOwnPropertyDescriptor(l,o);if(p?.set&&p.set.call(f,u),!d){if(r&&typeof o=="string"){var k=n.get("length"),$=Number(o);Number.isInteger($)&&$>=k.v&&A(k,$+1)}Rt(i)}return!0},ownKeys(l){c(i);var o=Reflect.ownKeys(l).filter(v=>{var d=n.get(v);return d===void 0||d.v!==se});for(var[u,f]of n)f.v!==se&&!(u in l)&&o.push(u);return o},setPrototypeOf(){Hs()}})}var Tr,ai,oi,li;function aa(){if(Tr===void 0){Tr=window,ai=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;oi=At(t,"firstChild").get,li=At(t,"nextSibling").get,xr(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),xr(n)&&(n.__t=void 0)}}function lt(e=""){return document.createTextNode(e)}function Zn(e){return oi.call(e)}function $t(e){return li.call(e)}function _(e,t){return Zn(e)}function Re(e,t=!1){{var n=Zn(e);return n instanceof Comment&&n.data===""?$t(n):n}}function S(e,t=1,n=!1){let r=e;for(;t--;)r=$t(r);return r}function oa(e){e.textContent=""}function ci(){return!1}function ui(e){var t=R,n=q;_e(null),Be(null);try{return e()}finally{_e(t),Be(n)}}function la(e){q===null&&(R===null&&As(),Ds()),Ot&&zs()}function ca(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function nt(e,t,n){var r=q;r!==null&&(r.f&ye)!==0&&(e|=ye);var i={ctx:Ie,deps:null,nodes_start:null,nodes_end:null,f:e|me|Oe,first:null,fn:t,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{Ft(i),i.f|=Kn}catch(l){throw pe(i),l}else t!==null&&_t(i);var s=i;if(n&&s.deps===null&&s.teardown===null&&s.nodes_start===null&&s.first===s.last&&(s.f&Ct)===0&&(s=s.first,(e&Je)!==0&&(e&Tt)!==0&&s!==null&&(s.f|=Tt)),s!==null&&(s.parent=r,r!==null&&ca(s,r),R!==null&&(R.f&ie)!==0&&(e&mt)===0)){var a=R;(a.effects??=[]).push(s)}return i}function Nt(){return R!==null&&!Le}function ua(e){const t=nt(Vn,null,!1);return oe(t,ae),t.teardown=e,t}function nn(e){la();var t=q.f,n=!R&&(t&et)!==0&&(t&Kn)===0;if(n){var r=Ie;(r.e??=[]).push(e)}else return fi(e)}function fi(e){return nt(Gn|Ms,e,!1)}function fa(e){Fe.ensure();const t=nt(mt|Ct,e,!0);return(n={})=>new Promise(r=>{n.outro?Et(t,()=>{pe(t),r(void 0)}):(pe(t),r(void 0))})}function da(e){return nt(Gn,e,!1)}function ha(e){return nt(Wn|Ct,e,!0)}function di(e,t=0){return nt(Vn|t,e,!0)}function te(e,t=[],n=[],r=[]){Js(r,t,n,i=>{nt(Vn,()=>e(...i.map(c)),!0)})}function Jn(e,t=0){var n=nt(Je|t,e,!0);return n}function Te(e){return nt(et|Ct,e,!0)}function hi(e){var t=e.teardown;if(t!==null){const n=Ot,r=R;Sr(!0),_e(null);try{t.call(null)}finally{Sr(n),_e(r)}}}function vi(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const i=n.ac;i!==null&&ui(()=>{i.abort(xt)});var r=n.next;(n.f&mt)!==0?n.parent=null:pe(n,t),n=r}}function va(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&et)===0&&pe(t),t=n}}function pe(e,t=!0){var n=!1;(t||(e.f&Yr)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(_a(e.nodes_start,e.nodes_end),n=!0),vi(e,t&&!n),sn(e,0),oe(e,it);var r=e.transitions;if(r!==null)for(const s of r)s.stop();hi(e);var i=e.parent;i!==null&&i.first!==null&&_i(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function _a(e,t){for(;e!==null;){var n=e===t?null:$t(e);e.remove(),e=n}}function _i(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function Et(e,t,n=!0){var r=[];er(e,r,!0),pi(r,()=>{n&&pe(e),t&&t()})}function pi(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var i of e)i.out(r)}else t()}function er(e,t,n){if((e.f&ye)===0){if(e.f^=ye,e.transitions!==null)for(const a of e.transitions)(a.is_global||n)&&t.push(a);for(var r=e.first;r!==null;){var i=r.next,s=(r.f&Tt)!==0||(r.f&et)!==0&&(e.f&Je)!==0;er(r,t,s?n:!1),r=i}}}function tr(e){mi(e,!0)}function mi(e,t){if((e.f&ye)!==0){e.f^=ye,(e.f&ae)===0&&(oe(e,me),_t(e));for(var n=e.first;n!==null;){var r=n.next,i=(n.f&Tt)!==0||(n.f&et)!==0;mi(n,i?t:!1),n=r}if(e.transitions!==null)for(const s of e.transitions)(s.is_global||t)&&s.in()}}function gi(e,t){for(var n=e.nodes_start,r=e.nodes_end;n!==null;){var i=n===r?null:$t(n);t.append(n),n=i}}let ot=!1;function rn(e){ot=e}let Ot=!1;function Sr(e){Ot=e}let R=null,Le=!1;function _e(e){R=e}let q=null;function Be(e){q=e}let Xe=null;function wi(e){R!==null&&(Xe===null?Xe=[e]:Xe.push(e))}let fe=null,ge=0,Ee=null;function pa(e){Ee=e}let yi=1,Ht=0,ht=Ht;function kr(e){ht=e}function xi(){return++yi}function Ut(e){var t=e.f;if((t&me)!==0)return!0;if(t&ie&&(e.f&=~vt),(t&tt)!==0){var n=e.deps;if(n!==null)for(var r=n.length,i=0;i<r;i++){var s=n[i];if(Ut(s)&&ri(s),s.wv>e.wv)return!0}(t&Oe)!==0&&ke===null&&oe(e,ae)}return!1}function bi(e,t,n=!0){var r=e.reactions;if(r!==null&&!Xe?.includes(e))for(var i=0;i<r.length;i++){var s=r[i];(s.f&ie)!==0?bi(s,t,!1):t===s&&(n?oe(s,me):(s.f&ae)!==0&&oe(s,tt),_t(s))}}function Ei(e){var t=fe,n=ge,r=Ee,i=R,s=Xe,a=Ie,l=Le,o=ht,u=e.f;fe=null,ge=0,Ee=null,R=(u&(et|mt))===0?e:null,Xe=null,St(e.ctx),Le=!1,ht=++Ht,e.ac!==null&&(ui(()=>{e.ac.abort(xt)}),e.ac=null);try{e.f|=Cn;var f=e.fn,v=f(),d=e.deps;if(fe!==null){var h;if(sn(e,ge),d!==null&&ge>0)for(d.length=ge+fe.length,h=0;h<fe.length;h++)d[ge+h]=fe[h];else e.deps=d=fe;if(ot&&Nt()&&(e.f&Oe)!==0)for(h=ge;h<d.length;h++)(d[h].reactions??=[]).push(e)}else d!==null&&ge<d.length&&(sn(e,ge),d.length=ge);if(Zr()&&Ee!==null&&!Le&&d!==null&&(e.f&(ie|tt|me))===0)for(h=0;h<Ee.length;h++)bi(Ee[h],e);return i!==null&&i!==e&&(Ht++,Ee!==null&&(r===null?r=Ee:r.push(...Ee))),(e.f&st)!==0&&(e.f^=st),v}catch(b){return Jr(b)}finally{e.f^=Cn,fe=t,ge=n,Ee=r,R=i,Xe=s,St(a),Le=l,ht=o}}function ma(e,t){let n=t.reactions;if(n!==null){var r=bs.call(n,e);if(r!==-1){var i=n.length-1;i===0?n=t.reactions=null:(n[r]=n[i],n.pop())}}n===null&&(t.f&ie)!==0&&(fe===null||!fe.includes(t))&&(oe(t,tt),(t.f&Oe)!==0&&(t.f^=Oe,t.f&=~vt),ni(t),sn(t,0))}function sn(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)ma(e,n[r])}function Ft(e){var t=e.f;if((t&it)===0){oe(e,ae);var n=q,r=ot;q=e,ot=!0;try{(t&(Je|Ps))!==0?va(e):vi(e),hi(e);var i=Ei(e);e.teardown=typeof i=="function"?i:null,e.wv=yi;var s;Mn&&qs&&(e.f&me)!==0&&e.deps}finally{ot=r,q=n}}}function c(e){var t=e.f,n=(t&ie)!==0;if(R!==null&&!Le){var r=q!==null&&(q.f&it)!==0;if(!r&&!Xe?.includes(e)){var i=R.deps;if((R.f&Cn)!==0)e.rv<Ht&&(e.rv=Ht,fe===null&&i!==null&&i[ge]===e?ge++:fe===null?fe=[e]:fe.includes(e)||fe.push(e));else{(R.deps??=[]).push(e);var s=e.reactions;s===null?e.reactions=[R]:s.includes(R)||s.push(R)}}}if(Ot){if(at.has(e))return at.get(e);if(n){var a=e,l=a.v;return((a.f&ae)===0&&a.reactions!==null||Si(a))&&(l=Qn(a)),at.set(a,l),l}}else n&&(!ke?.has(e)||W?.is_fork&&!Nt())&&(a=e,Ut(a)&&ri(a),ot&&Nt()&&(a.f&Oe)===0&&Ti(a));if(ke?.has(e))return ke.get(e);if((e.f&st)!==0)throw e.v;return e.v}function Ti(e){if(e.deps!==null){e.f^=Oe;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&ie)!==0&&(t.f&Oe)===0&&Ti(t)}}function Si(e){if(e.v===se)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(at.has(t)||(t.f&ie)!==0&&Si(t))return!0;return!1}function ki(e){var t=Le;try{return Le=!0,e()}finally{Le=t}}const ga=-7169;function oe(e,t){e.f=e.f&ga|t}const Ii=new Set,Dn=new Set;function hn(e){for(var t=0;t<e.length;t++)Ii.add(e[t]);for(var n of Dn)n(e)}let Ir=null;function Wt(e){var t=this,n=t.ownerDocument,r=e.type,i=e.composedPath?.()||[],s=i[0]||e.target;Ir=e;var a=0,l=Ir===e&&e.__root;if(l){var o=i.indexOf(l);if(o!==-1&&(t===document||t===window)){e.__root=t;return}var u=i.indexOf(t);if(u===-1)return;o<=u&&(a=o)}if(s=i[a]||e.target,s!==t){Es(e,"currentTarget",{configurable:!0,get(){return s||n}});var f=R,v=q;_e(null),Be(null);try{for(var d,h=[];s!==null;){var b=s.assignedSlot||s.parentNode||s.host||null;try{var N=s["__"+r];N!=null&&(!s.disabled||e.target===s)&&N.call(s,e)}catch(p){d?h.push(p):d=p}if(e.cancelBubble||b===t||b===null)break;s=b}if(d){for(let p of h)queueMicrotask(()=>{throw p});throw d}}finally{e.__root=t,delete e.currentTarget,_e(f),Be(v)}}}function wa(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Pi(e,t){var n=q;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function J(e,t){var n=(t&ys)!==0,r,i=!e.startsWith("<!>");return()=>{r===void 0&&(r=wa(i?e:"<!>"+e),r=Zn(r));var s=n||ai?document.importNode(r,!0):r.cloneNode(!0);return Pi(s,s),s}}function Ne(){var e=document.createDocumentFragment(),t=document.createComment(""),n=lt();return e.append(t,n),Pi(t,n),e}function F(e,t){e!==null&&e.before(t)}const ya=["touchstart","touchmove"];function xa(e){return ya.includes(e)}function L(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function ba(e,t){return Ea(e,t)}const wt=new Map;function Ea(e,{target:t,anchor:n,props:r={},events:i,context:s,intro:a=!0}){aa();var l=new Set,o=v=>{for(var d=0;d<v.length;d++){var h=v[d];if(!l.has(h)){l.add(h);var b=xa(h);t.addEventListener(h,Wt,{passive:b});var N=wt.get(h);N===void 0?(document.addEventListener(h,Wt,{passive:b}),wt.set(h,1)):wt.set(h,N+1)}}};o(Un(Ii)),Dn.add(o);var u=void 0,f=fa(()=>{var v=n??t.appendChild(lt());return Ws(v,{pending:()=>{}},d=>{if(s){ct({});var h=Ie;h.c=s}i&&(r.$$events=i),u=e(d,r)||{},s&&ut()}),()=>{for(var d of l){t.removeEventListener(d,Wt);var h=wt.get(d);--h===0?(document.removeEventListener(d,Wt),wt.delete(d)):wt.set(d,h)}Dn.delete(o),v!==n&&v.parentNode?.removeChild(v)}});return Ta.set(u,f),u}let Ta=new WeakMap;class Sa{anchor;#e=new Map;#t=new Map;#r=new Map;#n=new Set;#l=!0;constructor(t,n=!0){this.anchor=t,this.#l=n}#s=()=>{var t=W;if(this.#e.has(t)){var n=this.#e.get(t),r=this.#t.get(n);if(r)tr(r),this.#n.delete(n);else{var i=this.#r.get(n);i&&(this.#t.set(n,i.effect),this.#r.delete(n),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),r=i.effect)}for(const[s,a]of this.#e){if(this.#e.delete(s),s===t)break;const l=this.#r.get(a);l&&(pe(l.effect),this.#r.delete(a))}for(const[s,a]of this.#t){if(s===n||this.#n.has(s))continue;const l=()=>{if(Array.from(this.#e.values()).includes(s)){var u=document.createDocumentFragment();gi(a,u),u.append(lt()),this.#r.set(s,{effect:a,fragment:u})}else pe(a);this.#n.delete(s),this.#t.delete(s)};this.#l||!r?(this.#n.add(s),Et(a,l,!1)):l()}}};#i=t=>{this.#e.delete(t);const n=Array.from(this.#e.values());for(const[r,i]of this.#r)n.includes(r)||(pe(i.effect),this.#r.delete(r))};ensure(t,n){var r=W,i=ci();if(n&&!this.#t.has(t)&&!this.#r.has(t))if(i){var s=document.createDocumentFragment(),a=lt();s.append(a),this.#r.set(t,{effect:Te(()=>n(a)),fragment:s})}else this.#t.set(t,Te(()=>n(this.anchor)));if(this.#e.set(r,t),i){for(const[l,o]of this.#t)l===t?r.skipped_effects.delete(o):r.skipped_effects.add(o);for(const[l,o]of this.#r)l===t?r.skipped_effects.delete(o.effect):r.skipped_effects.add(o.effect);r.oncommit(this.#s),r.ondiscard(this.#i)}else this.#s()}}function ne(e,t,n=!1){var r=new Sa(e),i=n?Tt:0;function s(a,l){r.ensure(a,l)}Jn(()=>{var a=!1;t((l,o=!0)=>{a=!0,s(o,l)}),a||s(!1,null)},i)}const Pr=[...` 	
\r\fÂ \v\uFEFF`];function ka(e,t,n){var r=e==null?"":""+e;if(n){for(var i in n)if(n[i])r=r?r+" "+i:i;else if(r.length)for(var s=i.length,a=0;(a=r.indexOf(i,a))>=0;){var l=a+s;(a===0||Pr.includes(r[a-1]))&&(l===r.length||Pr.includes(r[l]))?r=(a===0?"":r.substring(0,a))+r.substring(l+1):a=l}}return r===""?null:r}function Ia(e,t){return e==null?null:String(e)}function He(e,t,n,r,i,s){var a=e.__className;if(a!==n||a===void 0){var l=ka(n,r,s);l==null?e.removeAttribute("class"):e.className=l,e.__className=n}else if(s&&i!==s)for(var o in s){var u=!!s[o];(i==null||u!==!!i[o])&&e.classList.toggle(o,u)}return s}function dt(e,t,n,r){var i=e.__style;if(i!==t){var s=Ia(t);s==null?e.removeAttribute("style"):e.style.cssText=s,e.__style=t}return r}const Pa=Symbol("is custom element"),Ma=Symbol("is html");function z(e,t,n,r){var i=Ca(e);i[t]!==(i[t]=n)&&(t==="loading"&&(e[Cs]=n),n==null?e.removeAttribute(t):typeof n!="string"&&Oa(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function Ca(e){return e.__attributes??={[Pa]:e.nodeName.includes("-"),[Ma]:e.namespaceURI===xs}}var Mr=new Map;function Oa(e){var t=e.getAttribute("is")||e.nodeName,n=Mr.get(t);if(n)return n;Mr.set(t,n=[]);for(var r,i=e,s=Element.prototype;s!==i;){r=Ts(i);for(var a in r)r[a].set&&n.push(a);i=Kr(i)}return n}function Cr(e,t){return e===t||e?.[Zt]===t}function za(e={},t,n,r){return da(()=>{var i,s;return di(()=>{i=s,s=[],ki(()=>{e!==n(...s)&&(t(e,...s),i&&Cr(n(...i),e)&&t(null,...i))})}),()=>{qt(()=>{s&&Cr(n(...s),e)&&t(null,...s)})}}),e}function re(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Da=typeof Symbol=="function"&&Symbol.observable||"@@observable",Or=Da,kn=()=>Math.random().toString(36).substring(7).split("").join("."),Aa={INIT:`@@redux/INIT${kn()}`,REPLACE:`@@redux/REPLACE${kn()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${kn()}`},an=Aa;function nr(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Mi(e,t,n){if(typeof e!="function")throw new Error(re(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(re(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(re(1));return n(Mi)(e,t)}let r=e,i=t,s=new Map,a=s,l=0,o=!1;function u(){a===s&&(a=new Map,s.forEach((p,k)=>{a.set(k,p)}))}function f(){if(o)throw new Error(re(3));return i}function v(p){if(typeof p!="function")throw new Error(re(4));if(o)throw new Error(re(5));let k=!0;u();const $=l++;return a.set($,p),function(){if(k){if(o)throw new Error(re(6));k=!1,u(),a.delete($),s=null}}}function d(p){if(!nr(p))throw new Error(re(7));if(typeof p.type>"u")throw new Error(re(8));if(typeof p.type!="string")throw new Error(re(17));if(o)throw new Error(re(9));try{o=!0,i=r(i,p)}finally{o=!1}return(s=a).forEach($=>{$()}),p}function h(p){if(typeof p!="function")throw new Error(re(10));r=p,d({type:an.REPLACE})}function b(){const p=v;return{subscribe(k){if(typeof k!="object"||k===null)throw new Error(re(11));function $(){const E=k;E.next&&E.next(f())}return $(),{unsubscribe:p($)}},[Or](){return this}}}return d({type:an.INIT}),{dispatch:d,subscribe:v,getState:f,replaceReducer:h,[Or]:b}}function Ra(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:an.INIT})>"u")throw new Error(re(12));if(typeof n(void 0,{type:an.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(re(13))})}function Na(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const a=t[s];typeof e[a]=="function"&&(n[a]=e[a])}const r=Object.keys(n);let i;try{Ra(n)}catch(s){i=s}return function(a={},l){if(i)throw i;let o=!1;const u={};for(let f=0;f<r.length;f++){const v=r[f],d=n[v],h=a[v],b=d(h,l);if(typeof b>"u")throw l&&l.type,new Error(re(14));u[v]=b,o=o||b!==h}return o=o||r.length!==Object.keys(a).length,o?u:a}}function on(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function Ha(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(re(15))};const a={getState:i.getState,dispatch:(o,...u)=>s(o,...u)},l=e.map(o=>o(a));return s=on(...l)(i.dispatch),{...i,dispatch:s}}}function Fa(e){return nr(e)&&"type"in e&&typeof e.type=="string"}var Ci=Symbol.for("immer-nothing"),zr=Symbol.for("immer-draftable"),de=Symbol.for("immer-state");function Ce(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var we=Object,Pt=we.getPrototypeOf,ln="constructor",vn="prototype",An="configurable",cn="enumerable",Jt="writable",Lt="value",Ze=e=>!!e&&!!e[de];function je(e){return e?Oi(e)||_n(e)||!!e[zr]||!!e[ln]?.[zr]||pn(e)||mn(e):!1}var La=we[vn][ln].toString(),Dr=new WeakMap;function Oi(e){if(!e||!rr(e))return!1;const t=Pt(e);if(t===null||t===we[vn])return!0;const n=we.hasOwnProperty.call(t,ln)&&t[ln];if(n===Object)return!0;if(!yt(n))return!1;let r=Dr.get(n);return r===void 0&&(r=Function.toString.call(n),Dr.set(n,r)),r===La}function Gt(e,t,n=!0){Vt(e)===0?(n?Reflect.ownKeys(e):we.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((r,i)=>t(i,r,e))}function Vt(e){const t=e[de];return t?t.type_:_n(e)?1:pn(e)?2:mn(e)?3:0}var Ar=(e,t,n=Vt(e))=>n===2?e.has(t):we[vn].hasOwnProperty.call(e,t),Rn=(e,t,n=Vt(e))=>n===2?e.get(t):e[t],un=(e,t,n,r=Vt(e))=>{r===2?e.set(t,n):r===3?e.add(n):e[t]=n};function Ba(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var _n=Array.isArray,pn=e=>e instanceof Map,mn=e=>e instanceof Set,rr=e=>typeof e=="object",yt=e=>typeof e=="function",In=e=>typeof e=="boolean",We=e=>e.copy_||e.base_,ir=e=>e.modified_?e.copy_:e.base_;function Nn(e,t){if(pn(e))return new Map(e);if(mn(e))return new Set(e);if(_n(e))return Array[vn].slice.call(e);const n=Oi(e);if(t===!0||t==="class_only"&&!n){const r=we.getOwnPropertyDescriptors(e);delete r[de];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const a=i[s],l=r[a];l[Jt]===!1&&(l[Jt]=!0,l[An]=!0),(l.get||l.set)&&(r[a]={[An]:!0,[Jt]:!0,[cn]:l[cn],[Lt]:e[a]})}return we.create(Pt(e),r)}else{const r=Pt(e);if(r!==null&&n)return{...e};const i=we.create(r);return we.assign(i,e)}}function sr(e,t=!1){return gn(e)||Ze(e)||(Vt(e)>1&&we.defineProperties(e,{set:Yt,add:Yt,clear:Yt,delete:Yt}),we.freeze(e),t&&Gt(e,(n,r)=>{sr(r,!0)},!1)),e}function ja(){Ce(2)}var Yt={[Lt]:ja};function gn(e){return e===null||!rr(e)?!0:we.isFrozen(e)}var fn="MapSet",Hn="Patches",zi={};function Mt(e){const t=zi[e];return t||Ce(0,e),t}var qa=e=>!!zi[e],Bt,Di=()=>Bt,$a=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:qa(fn)?Mt(fn):void 0});function Rr(e,t){t&&(e.patchPlugin_=Mt(Hn),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Fn(e){Ln(e),e.drafts_.forEach(Ua),e.drafts_=null}function Ln(e){e===Bt&&(Bt=e.parent_)}var Nr=e=>Bt=$a(Bt,e);function Ua(e){const t=e[de];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Hr(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];if(e!==void 0&&e!==n){n[de].modified_&&(Fn(t),Ce(4)),je(e)&&(e=Fr(t,e));const{patchPlugin_:i}=t;i&&i.generateReplacementPatches_(n[de].base_,e,t)}else e=Fr(t,n);return Ga(t,e,!0),Fn(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Ci?e:void 0}function Fr(e,t){if(gn(t))return t;const n=t[de];if(!n)return ar(t,e.handledSet_,e);if(!wn(n,e))return t;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(e);Ni(n,e)}return n.copy_}function Ga(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&sr(t,n)}function Ai(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var wn=(e,t)=>e.scope_===t,Va=[];function Ri(e,t,n,r){const i=We(e),s=e.type_;if(r!==void 0&&Rn(i,r,s)===t){un(i,r,n,s);return}if(!e.draftLocations_){const l=e.draftLocations_=new Map;Gt(i,(o,u)=>{if(Ze(u)){const f=l.get(u)||[];f.push(o),l.set(u,f)}})}const a=e.draftLocations_.get(t)??Va;for(const l of a)un(i,l,n,s)}function Ka(e,t,n){e.callbacks_.push(function(i){const s=t;if(!s||!wn(s,i))return;i.mapSetPlugin_?.fixSetContents(s);const a=ir(s);Ri(e,s.draft_??s,a,n),Ni(s,i)})}function Ni(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||(e.assigned_?.size??0)>0)){const{patchPlugin_:r}=t;if(r){const i=r.getPath(e);i&&r.generatePatches_(e,i,t)}Ai(e)}}function Wa(e,t,n){const{scope_:r}=e;if(Ze(n)){const i=n[de];wn(i,r)&&i.callbacks_.push(function(){en(e);const a=ir(i);Ri(e,n,a,t)})}else je(n)&&e.callbacks_.push(function(){const s=We(e);Rn(s,t,e.type_)===n&&r.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&ar(Rn(e.copy_,t,e.type_),r.handledSet_,r)})}function ar(e,t,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||Ze(e)||t.has(e)||!je(e)||gn(e)||(t.add(e),Gt(e,(r,i)=>{if(Ze(i)){const s=i[de];if(wn(s,n)){const a=ir(s);un(e,r,a,e.type_),Ai(s)}}else je(i)&&ar(i,t,n)})),e}function Ya(e,t){const n=_n(e),r={type_:n?1:0,scope_:t?t.scope_:Di(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=r,s=or;n&&(i=[r],s=jt);const{revoke:a,proxy:l}=Proxy.revocable(i,s);return r.draft_=l,r.revoke_=a,[l,r]}var or={get(e,t){if(t===de)return e;const n=We(e);if(!Ar(n,t,e.type_))return Xa(e,n,t);const r=n[t];if(e.finalized_||!je(r))return r;if(r===Pn(e.base_,t)){en(e);const i=e.type_===1?+t:t,s=jn(e.scope_,r,e,i);return e.copy_[i]=s}return r},has(e,t){return t in We(e)},ownKeys(e){return Reflect.ownKeys(We(e))},set(e,t,n){const r=Hi(We(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=Pn(We(e),t),s=i?.[de];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_.set(t,!1),!0;if(Ba(n,i)&&(n!==void 0||Ar(e.base_,t,e.type_)))return!0;en(e),Bn(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_.set(t,!0),Wa(e,t,n)),!0},deleteProperty(e,t){return en(e),Pn(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),Bn(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=We(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{[Jt]:!0,[An]:e.type_!==1||t!=="length",[cn]:r[cn],[Lt]:n[t]}},defineProperty(){Ce(11)},getPrototypeOf(e){return Pt(e.base_)},setPrototypeOf(){Ce(12)}},jt={};Gt(or,(e,t)=>{jt[e]=function(){const n=arguments;return n[0]=n[0][0],t.apply(this,n)}});jt.deleteProperty=function(e,t){return jt.set.call(this,e,t,void 0)};jt.set=function(e,t,n){return or.set.call(this,e[0],t,n,e[0])};function Pn(e,t){const n=e[de];return(n?We(n):e)[t]}function Xa(e,t,n){const r=Hi(t,n);return r?Lt in r?r[Lt]:r.get?.call(e.draft_):void 0}function Hi(e,t){if(!(t in e))return;let n=Pt(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Pt(n)}}function Bn(e){e.modified_||(e.modified_=!0,e.parent_&&Bn(e.parent_))}function en(e){e.copy_||(e.assigned_=new Map,e.copy_=Nn(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Qa=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(t,n,r)=>{if(yt(t)&&!yt(n)){const s=n;n=t;const a=this;return function(o=s,...u){return a.produce(o,f=>n.call(this,f,...u))}}yt(n)||Ce(6),r!==void 0&&!yt(r)&&Ce(7);let i;if(je(t)){const s=Nr(this),a=jn(s,t,void 0);let l=!0;try{i=n(a),l=!1}finally{l?Fn(s):Ln(s)}return Rr(s,r),Hr(i,s)}else if(!t||!rr(t)){if(i=n(t),i===void 0&&(i=t),i===Ci&&(i=void 0),this.autoFreeze_&&sr(i,!0),r){const s=[],a=[];Mt(Hn).generateReplacementPatches_(t,i,{patches_:s,inversePatches_:a}),r(s,a)}return i}else Ce(1,t)},this.produceWithPatches=(t,n)=>{if(yt(t))return(a,...l)=>this.produceWithPatches(a,o=>t(o,...l));let r,i;return[this.produce(t,n,(a,l)=>{r=a,i=l}),r,i]},In(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),In(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),In(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){je(e)||Ce(8),Ze(e)&&(e=Za(e));const t=Nr(this),n=jn(t,e,void 0);return n[de].isManual_=!0,Ln(t),n}finishDraft(e,t){const n=e&&e[de];(!n||!n.isManual_)&&Ce(9);const{scope_:r}=n;return Rr(r,t),Hr(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=Mt(Hn).applyPatches_;return Ze(e)?r(e,t):this.produce(e,i=>r(i,t))}};function jn(e,t,n,r){const[i,s]=pn(t)?Mt(fn).proxyMap_(t,n):mn(t)?Mt(fn).proxySet_(t,n):Ya(t,n);return(n?.scope_??Di()).drafts_.push(i),s.callbacks_=n?.callbacks_??[],s.key_=r,n&&r!==void 0?Ka(n,s,r):s.callbacks_.push(function(o){o.mapSetPlugin_?.fixSetContents(s);const{patchPlugin_:u}=o;s.modified_&&u&&u.generatePatches_(s,[],o)}),i}function Za(e){return Ze(e)||Ce(10,e),Fi(e)}function Fi(e){if(!je(e)||gn(e))return e;const t=e[de];let n,r=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Nn(e,t.scope_.immer_.useStrictShallowCopy_),r=t.scope_.immer_.shouldUseStrictIteration()}else n=Nn(e,!0);return Gt(n,(i,s)=>{un(n,i,Fi(s))},r),t&&(t.finalized_=!1),n}var Ja=new Qa,Li=Ja.produce;function Bi(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var eo=Bi(),to=Bi,no=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?on:on.apply(null,arguments)};function Lr(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(Qe(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>Fa(r)&&r.type===e,n}var ji=class zt extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,zt.prototype)}static get[Symbol.species](){return zt}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new zt(...t[0].concat(this)):new zt(...t.concat(this))}};function Br(e){return je(e)?Li(e,()=>{}):e}function Xt(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function ro(e){return typeof e=="boolean"}var io=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let a=new ji;return n&&(ro(n)?a.push(eo):a.push(to(n.extraArgument))),a},so="RTK_autoBatch",jr=e=>t=>{setTimeout(t,e)},ao=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,a=!1;const l=new Set,o=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:jr(10):e.type==="callback"?e.queueNotification:jr(e.timeout),u=()=>{a=!1,s&&(s=!1,l.forEach(f=>f()))};return Object.assign({},r,{subscribe(f){const v=()=>i&&f(),d=r.subscribe(v);return l.add(f),()=>{d(),l.delete(f)}},dispatch(f){try{return i=!f?.meta?.[so],s=!i,s&&(a||(a=!0,o(u))),r.dispatch(f)}finally{i=!0}}})},oo=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new ji(e);return r&&i.push(ao(typeof r=="object"?r:void 0)),i};function lo(e){const t=io(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:a=void 0}=e||{};let l;if(typeof n=="function")l=n;else if(nr(n))l=Na(n);else throw new Error(Qe(1));let o;typeof r=="function"?o=r(t):o=t();let u=on;i&&(u=no({trace:!1,...typeof i=="object"&&i}));const f=Ha(...o),v=oo(f);let d=typeof a=="function"?a(v):v();const h=u(...d);return Mi(l,s,h)}function qi(e){const t={},n=[];let r;const i={addCase(s,a){const l=typeof s=="string"?s:s.type;if(!l)throw new Error(Qe(28));if(l in t)throw new Error(Qe(29));return t[l]=a,i},addAsyncThunk(s,a){return a.pending&&(t[s.pending.type]=a.pending),a.rejected&&(t[s.rejected.type]=a.rejected),a.fulfilled&&(t[s.fulfilled.type]=a.fulfilled),a.settled&&n.push({matcher:s.settled,reducer:a.settled}),i},addMatcher(s,a){return n.push({matcher:s,reducer:a}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function co(e){return typeof e=="function"}function uo(e,t){let[n,r,i]=qi(t),s;if(co(e))s=()=>Br(e());else{const l=Br(e);s=()=>l}function a(l=s(),o){let u=[n[o.type],...r.filter(({matcher:f})=>f(o)).map(({reducer:f})=>f)];return u.filter(f=>!!f).length===0&&(u=[i]),u.reduce((f,v)=>{if(v)if(Ze(f)){const h=v(f,o);return h===void 0?f:h}else{if(je(f))return Li(f,d=>v(d,o));{const d=v(f,o);if(d===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return d}}return f},l)}return a.getInitialState=s,a}var fo=Symbol.for("rtk-slice-createasyncthunk");function ho(e,t){return`${e}/${t}`}function vo({creators:e}={}){const t=e?.asyncThunk?.[fo];return function(r){const{name:i,reducerPath:s=i}=r;if(!i)throw new Error(Qe(11));const a=(typeof r.reducers=="function"?r.reducers(po()):r.reducers)||{},l=Object.keys(a),o={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(I,E){const P=typeof I=="string"?I:I.type;if(!P)throw new Error(Qe(12));if(P in o.sliceCaseReducersByType)throw new Error(Qe(13));return o.sliceCaseReducersByType[P]=E,u},addMatcher(I,E){return o.sliceMatchers.push({matcher:I,reducer:E}),u},exposeAction(I,E){return o.actionCreators[I]=E,u},exposeCaseReducer(I,E){return o.sliceCaseReducersByName[I]=E,u}};l.forEach(I=>{const E=a[I],P={reducerName:I,type:ho(i,I),createNotation:typeof r.reducers=="function"};go(E)?yo(P,E,u,t):mo(P,E,u)});function f(){const[I={},E=[],P=void 0]=typeof r.extraReducers=="function"?qi(r.extraReducers):[r.extraReducers],U={...I,...o.sliceCaseReducersByType};return uo(r.initialState,B=>{for(let C in U)B.addCase(C,U[C]);for(let C of o.sliceMatchers)B.addMatcher(C.matcher,C.reducer);for(let C of E)B.addMatcher(C.matcher,C.reducer);P&&B.addDefaultCase(P)})}const v=I=>I,d=new Map,h=new WeakMap;let b;function N(I,E){return b||(b=f()),b(I,E)}function p(){return b||(b=f()),b.getInitialState()}function k(I,E=!1){function P(B){let C=B[I];return typeof C>"u"&&E&&(C=Xt(h,P,p)),C}function U(B=v){const C=Xt(d,E,()=>new WeakMap);return Xt(C,B,()=>{const T={};for(const[y,x]of Object.entries(r.selectors??{}))T[y]=_o(x,B,()=>Xt(h,B,p),E);return T})}return{reducerPath:I,getSelectors:U,get selectors(){return U(P)},selectSlice:P}}const $={name:i,reducer:N,actions:o.actionCreators,caseReducers:o.sliceCaseReducersByName,getInitialState:p,...k(s),injectInto(I,{reducerPath:E,...P}={}){const U=E??s;return I.inject({reducerPath:U,reducer:N},P),{...$,...k(U,!0)}}};return $}}function _o(e,t,n,r){function i(s,...a){let l=t(s);return typeof l>"u"&&r&&(l=n()),e(l,...a)}return i.unwrapped=e,i}var $i=vo();function po(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function mo({type:e,reducerName:t,createNotation:n},r,i){let s,a;if("reducer"in r){if(n&&!wo(r))throw new Error(Qe(17));s=r.reducer,a=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,a?Lr(e,a):Lr(e))}function go(e){return e._reducerDefinitionType==="asyncThunk"}function wo(e){return e._reducerDefinitionType==="reducerWithPrepare"}function yo({type:e,reducerName:t},n,r,i){if(!i)throw new Error(Qe(18));const{payloadCreator:s,fulfilled:a,pending:l,rejected:o,settled:u,options:f}=n,v=i(e,s,f);r.exposeAction(t,v),a&&r.addCase(v.fulfilled,a),l&&r.addCase(v.pending,l),o&&r.addCase(v.rejected,o),u&&r.addMatcher(v.settled,u),r.exposeCaseReducer(t,{fulfilled:a||Qt,pending:l||Qt,rejected:o||Qt,settled:u||Qt})}function Qt(){}function Qe(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}const lr=[{id:"kobold",name:"Kobold Dragonshield",ac:14,hp:1,maxHp:1,xp:1,imagePath:"assets/Monster_KoboldDragonshield.png"},{id:"snake",name:"Snake",ac:12,hp:1,maxHp:1,xp:1,imagePath:"assets/Monster_Snake.png"},{id:"cultist",name:"Cultist",ac:13,hp:2,maxHp:2,xp:1,imagePath:"assets/Monster_Cultist.png"}],xo=["kobold","kobold","kobold","snake","snake","snake","cultist","cultist","cultist"],bo=[{id:"quinn",name:"Quinn",heroClass:"Cleric",imagePath:"assets/Hero_Cleric_Quinn.png",speed:5},{id:"vistra",name:"Vistra",heroClass:"Fighter",imagePath:"assets/Hero_Fighter_Vistra.png",speed:5},{id:"keyleth",name:"Keyleth",heroClass:"Paladin",imagePath:"assets/Hero_Paladin_Keyleth.png",speed:6},{id:"tarak",name:"Tarak",heroClass:"Rogue",imagePath:"assets/Hero_Rogue_Tarak.png",speed:6},{id:"haskan",name:"Haskan",heroClass:"Wizard",imagePath:"assets/Hero_Wizard_Haskan.png",speed:6}],Eo=[{x:1,y:2},{x:2,y:2},{x:3,y:2},{x:3,y:3},{x:3,y:4},{x:1,y:5},{x:2,y:5},{x:3,y:5}],Ui=[{tileType:"tile-2exit-a",imagePath:"assets/Tile_Black_x2_01.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-2exit-b",imagePath:"assets/Tile_Black_x2_02.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-2exit-c",imagePath:"assets/Tile_Black_x2_03.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-3exit-a",imagePath:"assets/Tile_Black_x3_01.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-3exit-b",imagePath:"assets/Tile_Black_x3_02.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-3exit-c",imagePath:"assets/Tile_Black_x3_03.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-4exit-a",imagePath:"assets/Tile_Black_x4_01.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-4exit-b",imagePath:"assets/Tile_Black_x4_02.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}}],To=["tile-2exit-a","tile-2exit-b","tile-2exit-c","tile-3exit-a","tile-3exit-b","tile-3exit-c","tile-4exit-a","tile-4exit-b"],So={id:"start-tile",tileType:"start",position:{col:0,row:0},rotation:0,edges:{north:"unexplored",south:"unexplored",east:"unexplored",west:"unexplored"}},ko={availableHeroes:bo,selectedHeroes:[],heroEdgeMap:{}},Gi=$i({name:"heroes",initialState:ko,reducers:{toggleHeroSelection:(e,t)=>{const n=t.payload,r=e.selectedHeroes.findIndex(i=>i.id===n);if(r>=0)e.selectedHeroes.splice(r,1),delete e.heroEdgeMap[n];else if(e.selectedHeroes.length<5){const i=e.availableHeroes.find(s=>s.id===n);i&&e.selectedHeroes.push(i)}},selectHeroFromEdge:(e,t)=>{const{heroId:n,edge:r}=t.payload,i=e.selectedHeroes.findIndex(s=>s.id===n);if(i>=0)e.heroEdgeMap[n]===r&&(e.selectedHeroes.splice(i,1),delete e.heroEdgeMap[n]);else if(e.selectedHeroes.length<5){const s=e.availableHeroes.find(a=>a.id===n);s&&(e.selectedHeroes.push(s),e.heroEdgeMap[n]=r)}},clearSelection:e=>{e.selectedHeroes=[],e.heroEdgeMap={}}}}),{toggleHeroSelection:jl,selectHeroFromEdge:Io,clearSelection:ql}=Gi.actions,Po=Gi.reducer,Dt={minX:1,maxX:3,minY:0,maxY:7,staircase:[{x:1,y:3},{x:2,y:3},{x:1,y:4},{x:2,y:4}]};function Mo(e){return e.x>=Dt.minX&&e.x<=Dt.maxX&&e.y>=Dt.minY&&e.y<=Dt.maxY}function Co(e){return Dt.staircase.some(t=>t.x===e.x&&t.y===e.y)}function Oo(e){return Mo(e)&&!Co(e)}function zo(e,t,n){return t.some(r=>r.position.x===e.x&&r.position.y===e.y&&r.heroId!==n)}function Do(e){const t=[],n=[{dx:0,dy:-1},{dx:0,dy:1},{dx:-1,dy:0},{dx:1,dy:0},{dx:-1,dy:-1},{dx:1,dy:-1},{dx:-1,dy:1},{dx:1,dy:1}];for(const r of n){const i={x:e.x+r.dx,y:e.y+r.dy};Oo(i)&&t.push(i)}return t}function Ao(e,t,n,r){const i=[],s=new Set,a=[{pos:e,distance:0}];for(s.add(`${e.x},${e.y}`);a.length>0;){const l=a.shift();if(!l)break;if(l.distance>0&&!zo(l.pos,n,r)&&i.push(l.pos),l.distance<t){const o=Do(l.pos);for(const u of o){const f=`${u.x},${u.y}`;s.has(f)||(s.add(f),a.push({pos:u,distance:l.distance+1}))}}}return i}function Ro(e,t){return t.some(n=>n.x===e.x&&n.y===e.y)}const No={north:[{x:1,y:0},{x:2,y:0},{x:3,y:0}],south:[{x:1,y:7},{x:2,y:7},{x:3,y:7}],east:[{x:3,y:0},{x:3,y:1},{x:3,y:2},{x:3,y:5},{x:3,y:6},{x:3,y:7}],west:[{x:1,y:0},{x:1,y:1},{x:1,y:2},{x:1,y:5},{x:1,y:6},{x:1,y:7}]};function Ho(e,t){return No[t].some(r=>r.x===e.x&&r.y===e.y)}function Vi(e){return{north:"south",south:"north",east:"west",west:"east"}[e]}function Fo(e,t){const n=t.tiles.find(r=>r.id==="start-tile");if(!n)return null;for(const r of t.unexploredEdges)if(r.tileId===n.id&&Ho(e.position,r.direction))return r;return null}function Lo(e,t){const{col:n,row:r}=e.position;switch(t){case"north":return{col:n,row:r-1};case"south":return{col:n,row:r+1};case"east":return{col:n+1,row:r};case"west":return{col:n-1,row:r}}}function Bo(e){return 0}function jo(e){return Ui.find(t=>t.tileType===e)}function qo(e,t,n){const r=n.tiles.find(f=>f.id===e.tileId);if(!r)return null;const i=Lo(r,e.direction),s=Bo(e.direction);if(!jo(t))return null;const l=`tile-${n.tiles.length}`,u={north:"unexplored",south:"unexplored",east:"unexplored",west:"unexplored",[Vi(e.direction)]:"open"};return{id:l,tileType:t,position:i,rotation:s,edges:u}}function qn(){return{tiles:[{...So}],unexploredEdges:[{tileId:"start-tile",direction:"north"},{tileId:"start-tile",direction:"south"},{tileId:"start-tile",direction:"east"},{tileId:"start-tile",direction:"west"}],tileDeck:[]}}function $o(e,t=Math.random){const n=[...e];for(let r=n.length-1;r>0;r--){const i=Math.floor(t()*(r+1));[n[r],n[i]]=[n[i],n[r]]}return n}function Uo(e,t=Math.random){return $o(e,t)}function Go(e){if(e.length===0)return{drawnTile:null,remainingDeck:[]};const[t,...n]=e;return{drawnTile:t,remainingDeck:n}}function Vo(e,t,n){const r=e.unexploredEdges.filter(o=>!(o.tileId===t.tileId&&o.direction===t.direction)),i=Vi(t.direction),a=["north","south","east","west"].filter(o=>o!==i&&n.edges[o]==="unexplored").map(o=>({tileId:n.id,direction:o}));return{tiles:[...e.tiles.map(o=>o.id===t.tileId?{...o,edges:{...o.edges,[t.direction]:"open"}}:o),n],unexploredEdges:[...r,...a],tileDeck:e.tileDeck}}function Ki(e,t=Math.random){const n=[...e];for(let r=n.length-1;r>0;r--){const i=Math.floor(t()*(r+1));[n[r],n[i]]=[n[i],n[r]]}return n}function Ko(e=Math.random){return{drawPile:Ki([...xo],e),discardPile:[]}}function Wo(e,t=Math.random){if(e.drawPile.length===0){if(e.discardPile.length===0)return{monster:null,deck:e};const i=Ki(e.discardPile,t);return{monster:i[0],deck:{drawPile:i.slice(1),discardPile:[]}}}const[n,...r]=e.drawPile;return{monster:n,deck:{drawPile:r,discardPile:e.discardPile}}}function Yo(e){return lr.find(t=>t.id===e)}function Xo(e,t,n,r,i){const s=Yo(e);return s?{monsterId:e,instanceId:`${e}-${i}`,position:t,currentHp:s.hp,controllerId:n,tileId:r}:null}const Qo=4,qr=Math.floor(Qo/2);function Zo(){return{x:qr,y:qr}}const $n={currentHeroIndex:0,currentPhase:"hero-phase",turnNumber:1},Jo={currentScreen:"character-select",heroTokens:[],turnState:{...$n},validMoveSquares:[],showingMovement:!1,dungeon:qn(),monsterDeck:{drawPile:[],discardPile:[]},monsters:[],monsterInstanceCounter:0,recentlySpawnedMonsterId:null};function el(e){let t=e;return()=>(t=t*1103515245+12345&2147483647,t/2147483647)}function tl(e,t=Math.random){const n=[...e];for(let r=n.length-1;r>0;r--){const i=Math.floor(t()*(r+1));[n[r],n[i]]=[n[i],n[r]]}return n}const Wi=$i({name:"game",initialState:Jo,reducers:{startGame:(e,t)=>{const{heroIds:n,positions:r,seed:i}=t.payload;if(n.length===0||n.length>5)return;const s=i??Date.now();e.randomSeed=s;let a;const l=el(s);r?a=r:a=tl(Eo,l).slice(0,5),e.heroTokens=n.map((u,f)=>({heroId:u,position:a[f]})),e.turnState={...$n},e.validMoveSquares=[],e.showingMovement=!1;const o=qn();o.tileDeck=Uo([...To],l),e.dungeon=o,e.monsterDeck=Ko(l),e.monsters=[],e.monsterInstanceCounter=0,e.recentlySpawnedMonsterId=null,e.currentScreen="game-board"},setHeroPosition:(e,t)=>{const n=e.heroTokens.find(r=>r.heroId===t.payload.heroId);n&&(n.position=t.payload.position)},showMovement:(e,t)=>{const{heroId:n,speed:r}=t.payload,i=e.heroTokens.find(s=>s.heroId===n);i&&(e.validMoveSquares=Ao(i.position,r,e.heroTokens,n),e.showingMovement=!0)},hideMovement:e=>{e.validMoveSquares=[],e.showingMovement=!1},moveHero:(e,t)=>{const{heroId:n,position:r}=t.payload;if(!Ro(r,e.validMoveSquares))return;const i=e.heroTokens.find(s=>s.heroId===n);i&&(i.position=r,e.validMoveSquares=[],e.showingMovement=!1)},resetGame:e=>{e.currentScreen="character-select",e.heroTokens=[],e.turnState={...$n},e.randomSeed=void 0,e.validMoveSquares=[],e.showingMovement=!1,e.dungeon=qn(),e.monsterDeck={drawPile:[],discardPile:[]},e.monsters=[],e.monsterInstanceCounter=0,e.recentlySpawnedMonsterId=null},endHeroPhase:e=>{if(e.turnState.currentPhase!=="hero-phase")return;e.recentlySpawnedMonsterId=null;const t=e.heroTokens[e.turnState.currentHeroIndex];if(!t)return;const n=Fo(t,e.dungeon);if(n&&e.dungeon.tileDeck.length>0){const{drawnTile:r,remainingDeck:i}=Go(e.dungeon.tileDeck);if(r){const s=qo(n,r,e.dungeon);if(s){e.dungeon=Vo(e.dungeon,n,s),e.dungeon.tileDeck=i;const{monster:a,deck:l}=Wo(e.monsterDeck);if(a){const o=Zo(),u=Xo(a,o,t.heroId,s.id,e.monsterInstanceCounter);u&&(e.monsters.push(u),e.monsterInstanceCounter+=1,e.recentlySpawnedMonsterId=u.instanceId),e.monsterDeck=l}}}}e.turnState.currentPhase="exploration-phase"},endExplorationPhase:e=>{e.turnState.currentPhase==="exploration-phase"&&(e.turnState.currentPhase="villain-phase")},endVillainPhase:e=>{e.turnState.currentPhase==="villain-phase"&&(e.turnState.currentHeroIndex=(e.turnState.currentHeroIndex+1)%e.heroTokens.length,e.turnState.currentHeroIndex===0&&(e.turnState.turnNumber+=1),e.turnState.currentPhase="hero-phase")},dismissMonsterCard:e=>{e.recentlySpawnedMonsterId=null}}}),{startGame:nl,setHeroPosition:$l,showMovement:rl,hideMovement:il,moveHero:sl,resetGame:al,endHeroPhase:ol,endExplorationPhase:ll,endVillainPhase:cl,dismissMonsterCard:ul}=Wi.actions,fl=Wi.reducer,Z=lo({reducer:{heroes:Po,game:fl}});typeof window<"u"&&(window.__REDUX_STORE__=Z);function Se(e){const t="/Ashardalon/pr-51/",n=e.startsWith("/")?e.slice(1):e;return(t.endsWith("/")?t:t+"/")+n}var dl=J('<button><img class="hero-image svelte-1rwnzlz"/> <div class="hero-info svelte-1rwnzlz"><span class="hero-name svelte-1rwnzlz" data-testid="hero-name"> </span> <span class="hero-class svelte-1rwnzlz"> </span></div></button>'),hl=J('<button><img class="hero-image svelte-1rwnzlz"/> <div class="hero-info svelte-1rwnzlz"><span class="hero-name svelte-1rwnzlz" data-testid="hero-name"> </span> <span class="hero-class svelte-1rwnzlz"> </span></div></button>'),vl=J('<button><img class="hero-image svelte-1rwnzlz"/> <div class="hero-info svelte-1rwnzlz"><span class="hero-name svelte-1rwnzlz" data-testid="hero-name"> </span> <span class="hero-class svelte-1rwnzlz"> </span></div></button>'),_l=J('<button><img class="hero-image svelte-1rwnzlz"/> <div class="hero-info svelte-1rwnzlz"><span class="hero-name svelte-1rwnzlz" data-testid="hero-name"> </span> <span class="hero-class svelte-1rwnzlz"> </span></div></button>'),pl=J('<div class="character-select svelte-1rwnzlz" data-testid="character-select"><div class="edge-zone edge-top svelte-1rwnzlz" data-testid="edge-top"><div class="hero-row svelte-1rwnzlz" data-testid="hero-grid"></div></div> <div class="middle-section svelte-1rwnzlz"><div class="edge-zone edge-left svelte-1rwnzlz" data-testid="edge-left"><div class="hero-column svelte-1rwnzlz"></div></div> <div class="center-zone svelte-1rwnzlz" data-testid="center-zone"><h1 class="svelte-1rwnzlz">Select Your Heroes</h1> <p class="instructions svelte-1rwnzlz">Choose 1-5 heroes for your adventure</p> <p class="instructions svelte-1rwnzlz">Tap a hero from your edge of the table</p> <div class="selection-info svelte-1rwnzlz"><span data-testid="selected-count"> </span></div> <button class="start-button svelte-1rwnzlz" data-testid="start-game-button">Start Adventure</button></div> <div class="edge-zone edge-right svelte-1rwnzlz" data-testid="edge-right"><div class="hero-column svelte-1rwnzlz"></div></div></div> <div class="edge-zone edge-bottom svelte-1rwnzlz" data-testid="edge-bottom"><div class="hero-row svelte-1rwnzlz"></div></div></div>');function ml(e,t){ct(t,!0);let n=Q(ve([])),r=Q(ve([])),i=Q(ve({}));nn(()=>{const T=Z.subscribe(()=>{const x=Z.getState();A(n,x.heroes.selectedHeroes,!0),A(r,x.heroes.availableHeroes,!0),A(i,x.heroes.heroEdgeMap,!0)}),y=Z.getState();return A(n,y.heroes.selectedHeroes,!0),A(r,y.heroes.availableHeroes,!0),A(i,y.heroes.heroEdgeMap,!0),T});function s(T,y){return c(i)[T]===y}function a(T,y){const x=c(i)[T];return x!==void 0&&x!==y}function l(T,y){Z.dispatch(Io({heroId:T,edge:y}))}function o(){c(n).length>0&&Z.dispatch(nl({heroIds:c(n).map(T=>T.id)}))}function u(){return c(n).length>=1&&c(n).length<=5}var f=pl(),v=_(f),d=_(v);Ye(d,21,()=>c(r),T=>T.id,(T,y)=>{var x=dl();let G;x.__click=()=>l(c(y).id,"top");var V=_(x),xe=S(V,2),ee=_(xe),Pe=_(ee),ze=S(ee,2),he=_(ze);te((le,be,qe)=>{G=He(x,1,"hero-card svelte-1rwnzlz",null,G,le),z(x,"data-testid",`hero-${c(y).id??""}-top`),x.disabled=be,z(V,"src",qe),z(V,"alt",c(y).name),L(Pe,c(y).name),L(he,c(y).heroClass)},[()=>({selected:s(c(y).id,"top"),unavailable:a(c(y).id,"top")}),()=>a(c(y).id,"top"),()=>Se(c(y).imagePath)]),F(T,x)});var h=S(v,2),b=_(h),N=_(b);Ye(N,21,()=>c(r),T=>T.id,(T,y)=>{var x=hl();let G;x.__click=()=>l(c(y).id,"left");var V=_(x),xe=S(V,2),ee=_(xe),Pe=_(ee),ze=S(ee,2),he=_(ze);te((le,be,qe)=>{G=He(x,1,"hero-card svelte-1rwnzlz",null,G,le),z(x,"data-testid",`hero-${c(y).id??""}-left`),x.disabled=be,z(V,"src",qe),z(V,"alt",c(y).name),L(Pe,c(y).name),L(he,c(y).heroClass)},[()=>({selected:s(c(y).id,"left"),unavailable:a(c(y).id,"left")}),()=>a(c(y).id,"left"),()=>Se(c(y).imagePath)]),F(T,x)});var p=S(b,2),k=S(_(p),6),$=_(k),I=_($),E=S(k,2);E.__click=o;var P=S(p,2),U=_(P);Ye(U,21,()=>c(r),T=>T.id,(T,y)=>{var x=vl();let G;x.__click=()=>l(c(y).id,"right");var V=_(x),xe=S(V,2),ee=_(xe),Pe=_(ee),ze=S(ee,2),he=_(ze);te((le,be,qe)=>{G=He(x,1,"hero-card svelte-1rwnzlz",null,G,le),z(x,"data-testid",`hero-${c(y).id??""}-right`),x.disabled=be,z(V,"src",qe),z(V,"alt",c(y).name),L(Pe,c(y).name),L(he,c(y).heroClass)},[()=>({selected:s(c(y).id,"right"),unavailable:a(c(y).id,"right")}),()=>a(c(y).id,"right"),()=>Se(c(y).imagePath)]),F(T,x)});var B=S(h,2),C=_(B);Ye(C,21,()=>c(r),T=>T.id,(T,y)=>{var x=_l();let G;x.__click=()=>l(c(y).id,"bottom");var V=_(x),xe=S(V,2),ee=_(xe),Pe=_(ee),ze=S(ee,2),he=_(ze);te((le,be,qe)=>{G=He(x,1,"hero-card svelte-1rwnzlz",null,G,le),z(x,"data-testid",`hero-${c(y).id??""}`),x.disabled=be,z(V,"src",qe),z(V,"alt",c(y).name),L(Pe,c(y).name),L(he,c(y).heroClass)},[()=>({selected:s(c(y).id,"bottom"),unavailable:a(c(y).id,"bottom")}),()=>a(c(y).id,"bottom"),()=>Se(c(y).imagePath)]),F(T,x)}),te(T=>{L(I,`${c(n).length??""} heroes selected`),E.disabled=T},[()=>!u()]),F(e,f),ut()}hn(["click"]);var gl=J('<button class="move-square svelte-ehd1hj" data-testid="move-square"><span class="sr-only svelte-ehd1hj"> </span></button>'),wl=J('<div class="movement-overlay svelte-ehd1hj" data-testid="movement-overlay"></div>');function yl(e,t){ct(t,!0);function n(s){const a=t.tileOffsetX+s.x*t.cellSize,l=t.tileOffsetY+s.y*t.cellSize;return`left: ${a}px; top: ${l}px; width: ${t.cellSize}px; height: ${t.cellSize}px;`}function r(s,a){s.stopPropagation(),t.onSquareClick(a)}var i=wl();Ye(i,21,()=>t.validMoveSquares,s=>`${s.x},${s.y}`,(s,a)=>{var l=gl();l.__click=f=>r(f,c(a));var o=_(l),u=_(o);te(f=>{z(l,"data-position-x",c(a).x),z(l,"data-position-y",c(a).y),dt(l,f),L(u,`Move to (${c(a).x??""}, ${c(a).y??""})`)},[()=>n(c(a))]),F(s,l)}),F(e,i),ut()}hn(["click"]);var xl=J('<div class="tile-deck-counter svelte-9649r" data-testid="tile-deck-counter"><span class="deck-icon svelte-9649r">ð¦</span> <span class="deck-count svelte-9649r" data-testid="tile-deck-count"> </span> <span class="deck-label svelte-9649r">tiles</span></div>');function bl(e,t){var n=xl(),r=S(_(n),2),i=_(r);te(()=>L(i,t.tileCount)),F(e,n)}var El=J('<div class="unexplored-edge svelte-12eown4" data-testid="unexplored-edge"><span class="question-mark svelte-12eown4">?</span></div>');function Tl(e,t){ct(t,!0);const r=(()=>{const l=t.cellSize*1.5,o=36;switch(t.direction){case"north":return{left:`${t.tileWidth/2-l/2}px`,top:`${o-8/2}px`,width:`${l}px`,height:"8px"};case"south":return{left:`${t.tileWidth/2-l/2}px`,bottom:`${o-8/2}px`,width:`${l}px`,height:"8px"};case"east":return{right:`${o-8/2}px`,top:`${t.tileHeight/2-l/2}px`,width:"8px",height:`${l}px`};case"west":return{left:`${o-8/2}px`,top:`${t.tileHeight/2-l/2}px`,width:"8px",height:`${l}px`}}})(),i=Object.entries(r).map(([a,l])=>`${a}: ${l}`).join("; ");var s=El();te(()=>{z(s,"data-direction",t.direction),dt(s,i)}),F(e,s),ut()}var Sl=J('<div class="monster-token svelte-1g5ysl" data-testid="monster-token"><img class="token-image svelte-1g5ysl"/> <span class="token-label svelte-1g5ysl"> </span></div>');function kl(e,t){ct(t,!0);const n=K(()=>lr.find(l=>l.id===t.monster.monsterId)),r=K(()=>()=>{const l=t.cellSize/2,o=t.tilePixelOffset.x+t.tileOffsetX+t.monster.position.x*t.cellSize+l,u=t.tilePixelOffset.y+t.tileOffsetY+t.monster.position.y*t.cellSize+l;return`left: ${o}px; top: ${u}px;`});var i=Ne(),s=Re(i);{var a=l=>{var o=Sl(),u=_(o),f=S(u,2),v=_(f);te((d,h)=>{z(o,"data-monster-id",t.monster.instanceId),dt(o,d),z(u,"src",h),z(u,"alt",c(n).name),L(v,c(n).name)},[()=>c(r)(),()=>Se(c(n).imagePath)]),F(l,o)};ne(s,l=>{c(n)&&l(a)})}F(e,i),ut()}var Il=J('<div class="monster-card-overlay svelte-at5lsg" role="dialog" aria-modal="true" aria-label="Monster spawned" tabindex="0" data-testid="monster-card-overlay"><div class="monster-card svelte-at5lsg" role="article" data-testid="monster-card"><div class="card-header svelte-at5lsg"><h3 class="monster-name svelte-at5lsg" data-testid="monster-name"> </h3> <button class="dismiss-button svelte-at5lsg" aria-label="Dismiss monster card" data-testid="dismiss-monster-card">â</button></div> <div class="card-image svelte-at5lsg"><img class="monster-image svelte-at5lsg"/></div> <div class="card-stats svelte-at5lsg"><div class="stat svelte-at5lsg"><span class="stat-label svelte-at5lsg">AC</span> <span class="stat-value svelte-at5lsg" data-testid="monster-ac"> </span></div> <div class="stat svelte-at5lsg"><span class="stat-label svelte-at5lsg">HP</span> <span class="stat-value svelte-at5lsg" data-testid="monster-hp"> </span></div> <div class="stat svelte-at5lsg"><span class="stat-label svelte-at5lsg">XP</span> <span class="stat-value svelte-at5lsg" data-testid="monster-xp"> </span></div></div> <p class="card-hint svelte-at5lsg">Click anywhere to dismiss</p></div></div>');function Pl(e,t){ct(t,!0);const n=K(()=>lr.find(o=>o.id===t.monsterId));function r(){t.onDismiss&&t.onDismiss()}function i(o){(o.key==="Escape"||o.key==="Enter"||o.key===" ")&&(o.preventDefault(),r())}var s=Ne(),a=Re(s);{var l=o=>{var u=Il();u.__click=r,u.__keydown=i;var f=_(u);f.__click=x=>x.stopPropagation(),f.__keydown=x=>x.stopPropagation();var v=_(f),d=_(v),h=_(d),b=S(d,2);b.__click=r;var N=S(v,2),p=_(N),k=S(N,2),$=_(k),I=S(_($),2),E=_(I),P=S($,2),U=S(_(P),2),B=_(U),C=S(P,2),T=S(_(C),2),y=_(T);te(x=>{L(h,c(n).name),z(p,"src",x),z(p,"alt",c(n).name),L(E,c(n).ac),L(B,c(n).hp),L(y,c(n).xp)},[()=>Se(c(n).imagePath)]),F(o,u)};ne(a,o=>{c(n)&&o(l)})}F(e,s),ut()}hn(["click","keydown"]);var Ml=J('<div class="player-info svelte-8w11tm" data-testid="turn-indicator"><img class="player-avatar svelte-8w11tm"/> <div class="turn-details svelte-8w11tm"><span class="player-name svelte-8w11tm"> </span> <span class="turn-phase svelte-8w11tm" data-testid="turn-phase"> </span> <span class="turn-number svelte-8w11tm"> </span></div></div>'),Cl=J('<div class="player-info svelte-8w11tm"><img class="player-avatar svelte-8w11tm"/> <div class="turn-details svelte-8w11tm"><span class="player-name svelte-8w11tm"> </span> <span class="turn-phase svelte-8w11tm"> </span> <span class="turn-number svelte-8w11tm"> </span></div></div>'),Ol=J('<div><img class="tile-image svelte-8w11tm"/> <!></div>'),zl=J('<div class="movement-overlay-container svelte-8w11tm"><!></div>'),Dl=J('<div data-testid="hero-token"><img class="token-image svelte-8w11tm"/> <span class="token-label svelte-8w11tm"> </span></div>'),Al=J('<div class="player-info svelte-8w11tm"><img class="player-avatar svelte-8w11tm"/> <div class="turn-details svelte-8w11tm"><span class="player-name svelte-8w11tm"> </span> <span class="turn-phase svelte-8w11tm"> </span> <span class="turn-number svelte-8w11tm"> </span></div></div>'),Rl=J('<div class="player-info svelte-8w11tm" data-testid="turn-indicator"><img class="player-avatar svelte-8w11tm"/> <div class="turn-details svelte-8w11tm"><span class="player-name svelte-8w11tm"> </span> <span class="turn-phase svelte-8w11tm" data-testid="turn-phase"> </span> <span class="turn-number svelte-8w11tm"> </span></div></div>'),Nl=J('<div class="game-board svelte-8w11tm" data-testid="game-board"><div data-testid="player-zone-top"><!></div> <div class="middle-section svelte-8w11tm"><div data-testid="player-zone-left"><!></div> <div class="board-container svelte-8w11tm"><div class="dungeon-map svelte-8w11tm" data-testid="dungeon-map" role="button" tabindex="0"><!> <!> <!> <!></div> <div class="board-controls svelte-8w11tm"><!> <button class="end-phase-button svelte-8w11tm" data-testid="end-phase-button"> </button> <button class="reset-button svelte-8w11tm" data-testid="reset-button">â© Return to Character Select</button></div></div> <div data-testid="player-zone-right"><!></div></div> <div data-testid="player-zone-bottom"><!></div> <!></div>');function Hl(e,t){ct(t,!0);const n=140,r=4,i=8,s=4,a=n*r,l=n*i,o=n*s,u=32,f=.15,v=1,d=36,h=36,b=632,N=632,p=1195,k=3,$=0;let I=Q(ve([])),E=Q(ve([])),P=Q(ve({currentHeroIndex:0,currentPhase:"hero-phase",turnNumber:1})),U=Q(ve([])),B=Q(!1),C=Q(ve({tiles:[],unexploredEdges:[],tileDeck:[]})),T=Q(ve([])),y=Q(null),x=Q(null),G=Q(1),V=K(()=>xe(c(C)));nn(()=>{const m=Z.subscribe(()=>{const w=Z.getState();A(I,w.game.heroTokens,!0),A(E,w.heroes.selectedHeroes,!0),A(P,w.game.turnState,!0),A(U,w.game.validMoveSquares,!0),A(B,w.game.showingMovement,!0),A(C,w.game.dungeon,!0),A(T,w.game.monsters,!0),A(y,w.game.recentlySpawnedMonsterId,!0)}),g=Z.getState();return A(I,g.game.heroTokens,!0),A(E,g.heroes.selectedHeroes,!0),A(P,g.game.turnState,!0),A(U,g.game.validMoveSquares,!0),A(B,g.game.showingMovement,!0),A(C,g.game.dungeon,!0),A(T,g.game.monsters,!0),A(y,g.game.recentlySpawnedMonsterId,!0),m});function xe(m){if(m.tiles.length===0)return{minCol:0,maxCol:0,minRow:0,maxRow:0,width:b,height:p};let g=1/0,w=-1/0,M=1/0,D=-1/0;for(const X of m.tiles)g=Math.min(g,X.position.col),w=Math.max(w,X.position.col),M=Math.min(M,X.position.row),D=Math.max(D,X.position.row);const H=w-g+1,j=b+(H-1)*a,Y=Math.max(0,-M),O=Math.max(0,D),ce=p+Y*o+O*o;return{minCol:g,maxCol:w,minRow:M,maxRow:D,width:Math.max(j,b),height:Math.max(ce,p)}}function ee(m,g){const w=(m.position.col-g.minCol)*a;let M=0;return m.position.row<0?M=(m.position.row-g.minRow)*o:m.position.row===0?M=Math.max(0,-g.minRow)*o-k:M=Math.max(0,-g.minRow)*o+l+(m.position.row-1)*o-k-$,{x:w,y:M}}function Pe(m){return m.tileType==="start"?"assets/StartTile.png":Ui.find(w=>w.tileType===m.tileType)?.imagePath||"assets/Tile_Black_x2_01.png"}function ze(m){return m.tileType==="start"?{width:b,height:p}:{width:b,height:N}}nn(()=>{if(c(x)){const m=()=>{const w=c(x);if(!w)return;const M=w.clientWidth-u,D=w.clientHeight-u,H=c(V),j=M/H.width,Y=D/H.height,O=Math.min(j,Y,v);A(G,Math.max(O,f),!0)};m();const g=new ResizeObserver(m);return g.observe(c(x)),()=>g.disconnect()}});function he(m){return c(E).find(g=>g.id===m)}function le(){return c(I)[c(P).currentHeroIndex]?.heroId}function be(m){switch(m){case"hero-phase":return"Hero Phase";case"exploration-phase":return"Exploration Phase";case"villain-phase":return"Villain Phase"}}function qe(){Z.dispatch(al())}function Yi(m,g){const w=n/2,M=g.x+d+m.x*n+w,D=g.y+h+m.y*n+w;return`left: ${M}px; top: ${D}px;`}function rt(){const m=c(P).currentHeroIndex%4;return["bottom","right","top","left"][m]}function cr(m){if(c(P).currentPhase!=="hero-phase")return;const g=le();if(!g)return;const w=he(g);w&&(c(B)?Z.dispatch(il()):Z.dispatch(rl({heroId:g,speed:w.speed})))}function Xi(m){const g=le();g&&Z.dispatch(sl({heroId:g,position:m}))}function Qi(m){(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),cr())}function Zi(){switch(c(P).currentPhase){case"hero-phase":Z.dispatch(ol());break;case"exploration-phase":Z.dispatch(ll());break;case"villain-phase":Z.dispatch(cl());break}}function Ji(){switch(c(P).currentPhase){case"hero-phase":return"End Hero Phase";case"exploration-phase":return"End Exploration";case"villain-phase":return"End Villain Phase"}}function es(){Z.dispatch(ul())}function ts(m){const g=c(C).tiles.find(w=>w.id===m);return g?ee(g,c(V)):{x:0,y:0}}var ur=Nl(),yn=_(ur);let fr;var ns=_(yn);{var rs=m=>{const g=K(le),w=K(()=>c(g)?he(c(g)):void 0);var M=Ne(),D=Re(M);{var H=j=>{var Y=Ml(),O=_(Y),ce=S(O,2),X=_(ce),De=_(X),ue=S(X,2),$e=_(ue),Ue=S(ue,2),Ge=_(Ue);te((Ve,ft)=>{z(O,"src",Ve),z(O,"alt",c(w).name),L(De,`${c(w).name??""}'s Turn`),L($e,ft),L(Ge,`Turn ${c(P).turnNumber??""}`)},[()=>Se(c(w).imagePath),()=>be(c(P).currentPhase)]),F(j,Y)};ne(D,j=>{c(w)&&j(H)})}F(m,M)};ne(ns,m=>{rt()==="top"&&m(rs)})}var dr=S(yn,2),xn=_(dr);let hr;var is=_(xn);{var ss=m=>{const g=K(le),w=K(()=>c(g)?he(c(g)):void 0);var M=Ne(),D=Re(M);{var H=j=>{var Y=Cl(),O=_(Y),ce=S(O,2),X=_(ce),De=_(X),ue=S(X,2),$e=_(ue),Ue=S(ue,2),Ge=_(Ue);te((Ve,ft)=>{z(O,"src",Ve),z(O,"alt",c(w).name),L(De,`${c(w).name??""}'s Turn`),L($e,ft),L(Ge,`Turn ${c(P).turnNumber??""}`)},[()=>Se(c(w).imagePath),()=>be(c(P).currentPhase)]),F(j,Y)};ne(D,j=>{c(w)&&j(H)})}F(m,M)};ne(is,m=>{rt()==="left"&&m(ss)})}var bn=S(xn,2),gt=_(bn);gt.__click=cr,gt.__keydown=Qi;var vr=_(gt);Ye(vr,17,()=>c(C).tiles,m=>m.id,(m,g)=>{const w=K(()=>ee(c(g),c(V))),M=K(()=>ze(c(g)));var D=Ol();let H;var j=_(D),Y=S(j,2);Ye(Y,17,()=>c(C).unexploredEdges.filter(O=>O.tileId===c(g).id),O=>O.direction,(O,ce)=>{Tl(O,{get direction(){return c(ce).direction},cellSize:n,get tileWidth(){return c(M).width},get tileHeight(){return c(M).height}})}),te(O=>{H=He(D,1,"placed-tile svelte-8w11tm",null,H,{"start-tile":c(g).tileType==="start"}),z(D,"data-testid",c(g).tileType==="start"?"start-tile":"dungeon-tile"),z(D,"data-tile-id",c(g).id),dt(D,`left: ${c(w).x??""}px; top: ${c(w).y??""}px; width: ${c(M).width??""}px; height: ${c(M).height??""}px;`),z(j,"src",O),z(j,"alt",c(g).tileType)},[()=>Se(Pe(c(g)))]),F(m,D)});var _r=S(vr,2);{var as=m=>{const g=K(()=>c(C).tiles.find(H=>H.tileType==="start"));var w=Ne(),M=Re(w);{var D=H=>{const j=K(()=>ee(c(g),c(V))),Y=K(()=>ze(c(g)));var O=zl(),ce=_(O);yl(ce,{get validMoveSquares(){return c(U)},tileOffsetX:d,tileOffsetY:h,cellSize:n,onSquareClick:Xi}),te(()=>dt(O,`left: ${c(j).x??""}px; top: ${c(j).y??""}px; width: ${c(Y).width??""}px; height: ${c(Y).height??""}px;`)),F(H,O)};ne(M,H=>{c(g)&&H(D)})}F(m,w)};ne(_r,m=>{c(B)&&c(U).length>0&&m(as)})}var pr=S(_r,2);Ye(pr,17,()=>c(I),m=>m.heroId,(m,g)=>{const w=K(()=>he(c(g).heroId)),M=K(()=>c(g).heroId===le()),D=K(()=>c(C).tiles.find(O=>O.tileType==="start"));var H=Ne(),j=Re(H);{var Y=O=>{const ce=K(()=>ee(c(D),c(V)));var X=Dl();let De;var ue=_(X),$e=S(ue,2),Ue=_($e);te((Ge,Ve)=>{De=He(X,1,"hero-token svelte-8w11tm",null,De,{active:c(M)}),z(X,"data-hero-id",c(g).heroId),dt(X,Ge),z(ue,"src",Ve),z(ue,"alt",c(w).name),L(Ue,c(w).name)},[()=>Yi(c(g).position,c(ce)),()=>Se(c(w).imagePath)]),F(O,X)};ne(j,O=>{c(w)&&c(D)&&O(Y)})}F(m,H)});var os=S(pr,2);Ye(os,17,()=>c(T),m=>m.instanceId,(m,g)=>{{let w=K(()=>ts(c(g).tileId));kl(m,{get monster(){return c(g)},cellSize:n,tileOffsetX:d,tileOffsetY:h,get tilePixelOffset(){return c(w)}})}});var ls=S(gt,2),mr=_(ls);bl(mr,{get tileCount(){return c(C).tileDeck.length}});var En=S(mr,2);En.__click=Zi;var cs=_(En),us=S(En,2);us.__click=qe,za(bn,m=>A(x,m),()=>c(x));var gr=S(bn,2);let wr;var fs=_(gr);{var ds=m=>{const g=K(le),w=K(()=>c(g)?he(c(g)):void 0);var M=Ne(),D=Re(M);{var H=j=>{var Y=Al(),O=_(Y),ce=S(O,2),X=_(ce),De=_(X),ue=S(X,2),$e=_(ue),Ue=S(ue,2),Ge=_(Ue);te((Ve,ft)=>{z(O,"src",Ve),z(O,"alt",c(w).name),L(De,`${c(w).name??""}'s Turn`),L($e,ft),L(Ge,`Turn ${c(P).turnNumber??""}`)},[()=>Se(c(w).imagePath),()=>be(c(P).currentPhase)]),F(j,Y)};ne(D,j=>{c(w)&&j(H)})}F(m,M)};ne(fs,m=>{rt()==="right"&&m(ds)})}var Tn=S(dr,2);let yr;var hs=_(Tn);{var vs=m=>{const g=K(le),w=K(()=>c(g)?he(c(g)):void 0);var M=Ne(),D=Re(M);{var H=j=>{var Y=Rl(),O=_(Y),ce=S(O,2),X=_(ce),De=_(X),ue=S(X,2),$e=_(ue),Ue=S(ue,2),Ge=_(Ue);te((Ve,ft)=>{z(O,"src",Ve),z(O,"alt",c(w).name),L(De,`${c(w).name??""}'s Turn`),L($e,ft),L(Ge,`Turn ${c(P).turnNumber??""}`)},[()=>Se(c(w).imagePath),()=>be(c(P).currentPhase)]),F(j,Y)};ne(D,j=>{c(w)&&j(H)})}F(m,M)};ne(hs,m=>{rt()==="bottom"&&m(vs)})}var _s=S(Tn,2);{var ps=m=>{const g=K(()=>c(T).find(H=>H.instanceId===c(y)));var w=Ne(),M=Re(w);{var D=H=>{Pl(H,{get monsterId(){return c(g).monsterId},onDismiss:es})};ne(M,H=>{c(g)&&H(D)})}F(m,w)};ne(_s,m=>{c(y)&&m(ps)})}te((m,g,w,M,D)=>{fr=He(yn,1,"edge-zone edge-top svelte-8w11tm",null,fr,m),hr=He(xn,1,"edge-zone edge-left svelte-8w11tm",null,hr,g),dt(gt,`transform: scale(${c(G)??""}); width: ${c(V).width??""}px; height: ${c(V).height??""}px;`),z(gt,"aria-label",c(B)?"Click to hide movement options":"Click to show movement options for current hero"),L(cs,w),wr=He(gr,1,"edge-zone edge-right svelte-8w11tm",null,wr,M),yr=He(Tn,1,"edge-zone edge-bottom svelte-8w11tm",null,yr,D)},[()=>({"active-edge":rt()==="top"}),()=>({"active-edge":rt()==="left"}),Ji,()=>({"active-edge":rt()==="right"}),()=>({"active-edge":rt()==="bottom"})]),F(e,ur),ut()}hn(["click","keydown"]);var Fl=J('<main class="svelte-1n46o8q"><!></main>');function Ll(e,t){ct(t,!0);let n=Q("character-select");nn(()=>{const l=Z.subscribe(()=>{const u=Z.getState();A(n,u.game.currentScreen,!0)}),o=Z.getState();return A(n,o.game.currentScreen,!0),l});var r=Fl(),i=_(r);{var s=l=>{ml(l,{})},a=l=>{var o=Ne(),u=Re(o);{var f=v=>{Hl(v,{})};ne(u,v=>{c(n)==="game-board"&&v(f)},!0)}F(l,o)};ne(i,l=>{c(n)==="character-select"?l(s):l(a,!1)})}F(e,r),ut()}ba(Ll,{target:document.getElementById("app")});
