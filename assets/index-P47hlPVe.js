(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}})();const io="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(io);const ns=1,rs=2,as=4,oo=8,lo=16,co=1,uo=2,De=Symbol(),fo="http://www.w3.org/1999/xhtml",_r=!1;var ss=Array.isArray,vo=Array.prototype.indexOf,Or=Array.from,ho=Object.defineProperty,hn=Object.getOwnPropertyDescriptor,po=Object.getOwnPropertyDescriptors,mo=Object.prototype,go=Array.prototype,is=Object.getPrototypeOf,Ca=Object.isExtensible;function _o(e){for(var t=0;t<e.length;t++)e[t]()}function os(){var e,t,n=new Promise((r,a)=>{e=r,t=a});return{promise:n,resolve:e,reject:t}}const Ee=2,Nr=4,jr=8,yo=1<<24,Ht=16,At=32,Xt=64,Jn=128,ft=512,ze=1024,Ye=2048,Dt=4096,Qe=8192,Nt=16384,Br=32768,nn=65536,Ma=1<<17,ls=1<<18,cn=1<<19,wo=1<<20,Yt=32768,yr=1<<21,Lr=1<<22,jt=1<<23,zn=Symbol("$state"),ko=Symbol(""),$t=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function bo(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function xo(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function So(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Io(e){throw new Error("https://svelte.dev/e/effect_orphan")}function To(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Co(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Mo(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Eo(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Po(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}function Ho(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function cs(e){return e===this.v}function Ao(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function ds(e){return!Ao(e,this.v)}let Do=!1,at=null;function rn(e){at=e}function Pe(e,t=!1,n){at={p:at,i:!1,c:null,e:null,s:e,x:null,l:null}}function He(e){var t=at,n=t.e;if(n!==null){t.e=null;for(var r of n)Ss(r)}return t.i=!0,at=t.p,{}}function us(){return!0}let en=[];function Ro(){var e=en;en=[],_o(e)}function xn(e){if(en.length===0){var t=en;queueMicrotask(()=>{t===en&&Ro()})}en.push(e)}function fs(e){var t=oe;if(t===null)return te.f|=jt,e;if((t.f&Br)===0){if((t.f&Jn)===0)throw e;t.b.error(e)}else an(e,t)}function an(e,t){for(;t!==null;){if((t.f&Jn)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e}const Pn=new Set;let he=null,rt=null,ht=[],Fr=null,wr=!1;class pt{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#r=0;#n=0;#l=null;#s=[];#a=[];skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(t){ht=[],this.apply();var n={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const r of t)this.#i(r,n);this.is_fork||this.#d(),this.is_deferred()?(this.#o(n.effects),this.#o(n.render_effects),this.#o(n.block_effects)):(he=null,Ea(n.render_effects),Ea(n.effects),this.#l?.resolve()),rt=null}#i(t,n){t.f^=ze;for(var r=t.first;r!==null;){var a=r.f,s=(a&(At|Xt))!==0,o=s&&(a&ze)!==0,c=o||(a&Qe)!==0||this.skipped_effects.has(r);if((r.f&Jn)!==0&&r.b?.is_pending()&&(n={parent:n,effect:r,effects:[],render_effects:[],block_effects:[]}),!c&&r.fn!==null){s?r.f^=ze:(a&Nr)!==0?n.effects.push(r):In(r)&&((r.f&Ht)!==0&&n.block_effects.push(r),_n(r));var l=r.first;if(l!==null){r=l;continue}}var d=r.parent;for(r=r.next;r===null&&d!==null;)d===n.effect&&(this.#o(n.effects),this.#o(n.render_effects),this.#o(n.block_effects),n=n.parent),r=d.next,d=d.parent}}#o(t){for(const n of t)((n.f&Ye)!==0?this.#s:this.#a).push(n),this.#c(n.deps),Oe(n,ze)}#c(t){if(t!==null)for(const n of t)(n.f&Ee)===0||(n.f&Yt)===0||(n.f^=Yt,this.#c(n.deps))}capture(t,n){this.previous.has(t)||this.previous.set(t,n),(t.f&jt)===0&&(this.current.set(t,t.v),rt?.set(t,t.v))}activate(){he=this,this.apply()}deactivate(){he===this&&(he=null,rt=null)}flush(){if(this.activate(),ht.length>0){if(zo(),he!==null&&he!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#t)t(this);this.#t.clear()}#d(){if(this.#n===0){for(const t of this.#e)t();this.#e.clear()}this.#r===0&&this.#u()}#u(){if(Pn.size>1){this.previous.clear();var t=rt,n=!0,r={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const s of Pn){if(s===this){n=!1;continue}const o=[];for(const[l,d]of this.current){if(s.current.has(l))if(n&&d!==s.current.get(l))s.current.set(l,d);else continue;o.push(l)}if(o.length===0)continue;const c=[...s.current.keys()].filter(l=>!this.current.has(l));if(c.length>0){var a=ht;ht=[];const l=new Set,d=new Map;for(const f of o)vs(f,c,l,d);if(ht.length>0){he=s,s.apply();for(const f of ht)s.#i(f,r);s.deactivate()}ht=a}}he=null,rt=t}this.committed=!0,Pn.delete(this)}increment(t){this.#r+=1,t&&(this.#n+=1)}decrement(t){this.#r-=1,t&&(this.#n-=1),this.revive()}revive(){for(const t of this.#s)Oe(t,Ye),Vt(t);for(const t of this.#a)Oe(t,Dt),Vt(t);this.#s=[],this.#a=[],this.flush()}oncommit(t){this.#e.add(t)}ondiscard(t){this.#t.add(t)}settled(){return(this.#l??=os()).promise}static ensure(){if(he===null){const t=he=new pt;Pn.add(he),pt.enqueue(()=>{he===t&&t.flush()})}return he}static enqueue(t){xn(t)}apply(){}}function zo(){var e=Lt;wr=!0;var t=null;try{var n=0;for(Fn(!0);ht.length>0;){var r=pt.ensure();if(n++>1e3){var a,s;Oo()}r.process(ht),Bt.clear()}}finally{wr=!1,Fn(e),Fr=null}}function Oo(){try{To()}catch(e){an(e,Fr)}}let xt=null;function Ea(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if((r.f&(Nt|Qe))===0&&In(r)&&(xt=new Set,_n(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?Ms(r):r.fn=null),xt?.size>0)){Bt.clear();for(const a of xt){if((a.f&(Nt|Qe))!==0)continue;const s=[a];let o=a.parent;for(;o!==null;)xt.has(o)&&(xt.delete(o),s.push(o)),o=o.parent;for(let c=s.length-1;c>=0;c--){const l=s[c];(l.f&(Nt|Qe))===0&&_n(l)}}xt.clear()}}xt=null}}function vs(e,t,n,r){if(!n.has(e)&&(n.add(e),e.reactions!==null))for(const a of e.reactions){const s=a.f;(s&Ee)!==0?vs(a,t,n,r):(s&(Lr|Ht))!==0&&(s&Ye)===0&&hs(a,t,r)&&(Oe(a,Ye),Vt(a))}}function hs(e,t,n){const r=n.get(e);if(r!==void 0)return r;if(e.deps!==null)for(const a of e.deps){if(t.includes(a))return!0;if((a.f&Ee)!==0&&hs(a,t,n))return n.set(a,!0),!0}return n.set(e,!1),!1}function Vt(e){for(var t=Fr=e;t.parent!==null;){t=t.parent;var n=t.f;if(wr&&t===oe&&(n&Ht)!==0&&(n&ls)===0)return;if((n&(Xt|At))!==0){if((n&ze)===0)return;t.f^=ze}}ht.push(t)}function No(e){let t=0,n=Gt(0),r;return()=>{mn()&&(i(n),Is(()=>(t===0&&(r=Bs(()=>e(()=>pn(n)))),t+=1,()=>{xn(()=>{t-=1,t===0&&(r?.(),r=void 0,pn(n))})})))}}var jo=nn|cn|Jn;function Bo(e,t,n){new Lo(e,t,n)}class Lo{parent;#e=!1;#t;#r=null;#n;#l;#s;#a=null;#i=null;#o=null;#c=null;#d=null;#u=0;#f=0;#h=!1;#v=null;#y=No(()=>(this.#v=Gt(this.#u),()=>{this.#v=null}));constructor(t,n,r){this.#t=t,this.#n=n,this.#l=r,this.parent=oe.b,this.#e=!!this.#n.pending,this.#s=Wr(()=>{oe.b=this;{var a=this.#g();try{this.#a=nt(()=>r(a))}catch(s){this.error(s)}this.#f>0?this.#m():this.#e=!1}return()=>{this.#d?.remove()}},jo)}#w(){try{this.#a=nt(()=>this.#l(this.#t))}catch(t){this.error(t)}this.#e=!1}#k(){const t=this.#n.pending;t&&(this.#i=nt(()=>t(this.#t)),pt.enqueue(()=>{var n=this.#g();this.#a=this.#p(()=>(pt.ensure(),nt(()=>this.#l(n)))),this.#f>0?this.#m():(tn(this.#i,()=>{this.#i=null}),this.#e=!1)}))}#g(){var t=this.#t;return this.#e&&(this.#d=Et(),this.#t.before(this.#d),t=this.#d),t}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#p(t){var n=oe,r=te,a=at;gt(this.#s),Ue(this.#s),rn(this.#s.ctx);try{return t()}catch(s){return fs(s),null}finally{gt(n),Ue(r),rn(a)}}#m(){const t=this.#n.pending;this.#a!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#d),Hs(this.#a,this.#c)),this.#i===null&&(this.#i=nt(()=>t(this.#t)))}#_(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#_(t);return}this.#f+=t,this.#f===0&&(this.#e=!1,this.#i&&tn(this.#i,()=>{this.#i=null}),this.#c&&(this.#t.before(this.#c),this.#c=null))}update_pending_count(t){this.#_(t),this.#u+=t,this.#v&&sn(this.#v,this.#u)}get_effect_pending(){return this.#y(),i(this.#v)}error(t){var n=this.#n.onerror;let r=this.#n.failed;if(this.#h||!n&&!r)throw t;this.#a&&(We(this.#a),this.#a=null),this.#i&&(We(this.#i),this.#i=null),this.#o&&(We(this.#o),this.#o=null);var a=!1,s=!1;const o=()=>{if(a){Ho();return}a=!0,s&&Po(),pt.ensure(),this.#u=0,this.#o!==null&&tn(this.#o,()=>{this.#o=null}),this.#e=this.has_pending_snippet(),this.#a=this.#p(()=>(this.#h=!1,nt(()=>this.#l(this.#t)))),this.#f>0?this.#m():this.#e=!1};var c=te;try{Ue(null),s=!0,n?.(t,o),s=!1}catch(l){an(l,this.#s&&this.#s.parent)}finally{Ue(c)}r&&xn(()=>{this.#o=this.#p(()=>{pt.ensure(),this.#h=!0;try{return nt(()=>{r(this.#t,()=>t,()=>o)})}catch(l){return an(l,this.#s.parent),null}finally{this.#h=!1}})})}}function Fo(e,t,n){for(var r=[],a=t.length,s=0;s<a;s++)Yr(t[s].e,r,!0);Es(r,()=>{var o=r.length===0&&n!==null;if(o){var c=n,l=c.parentNode;Jo(l),l.append(c),e.items.clear(),dt(e,t[0].prev,t[a-1].next)}for(var d=0;d<a;d++){var f=t[d];o||(e.items.delete(f.k),dt(e,f.prev,f.next)),We(f.e,!o)}e.first===t[0]&&(e.first=t[0].prev)})}function Le(e,t,n,r,a,s=null){var o=e,c=new Map,l=null,d=(t&as)!==0,f=(t&ns)!==0,g=(t&rs)!==0;if(d){var p=e;o=p.appendChild(Et())}var _=null,x=Go(()=>{var T=n();return ss(T)?T:T==null?[]:Or(T)}),O,k=!0;function P(){qo(E,O,o,t,r),_!==null&&(O.length===0?(_.fragment?(o.before(_.fragment),_.fragment=null):Vr(_.effect),H.first=_.effect):tn(_.effect,()=>{_=null}))}var H=Wr(()=>{O=i(x);for(var T=O.length,N=new Set,z=he,K=null,q=bs(),V=0;V<T;V+=1){var $=O[V],Z=r($,V),ie=k?null:c.get(Z);ie?(f&&sn(ie.v,$),g?sn(ie.i,V):ie.i=V,q&&z.skipped_effects.delete(ie.e)):(ie=Uo(k?o:null,K,$,Z,V,a,t,n),k&&(ie.o=!0,K===null?l=ie:K.next=ie,K=ie),c.set(Z,ie)),N.add(Z)}if(T===0&&s&&!_)if(k)_={fragment:null,effect:nt(()=>s(o))};else{var me=document.createDocumentFragment(),ye=Et();me.append(ye),_={fragment:me,effect:nt(()=>s(ye))}}if(!k)if(q){for(const[xe,Ae]of c)N.has(xe)||z.skipped_effects.add(Ae.e);z.oncommit(P),z.ondiscard(()=>{})}else P();i(x)}),E={effect:H,items:c,first:l};k=!1}function qo(e,t,n,r,a){var s=(r&oo)!==0,o=t.length,c=e.items,l=e.first,d,f=null,g,p=[],_=[],x,O,k,P;if(s)for(P=0;P<o;P+=1)x=t[P],O=a(x,P),k=c.get(O),k.o&&(k.a?.measure(),(g??=new Set).add(k));for(P=0;P<o;P+=1){if(x=t[P],O=a(x,P),k=c.get(O),e.first??=k,!k.o){k.o=!0;var H=f?f.next:l;dt(e,f,k),dt(e,k,H),hr(k,H,n),f=k,p=[],_=[],l=f.next;continue}if((k.e.f&Qe)!==0&&(Vr(k.e),s&&(k.a?.unfix(),(g??=new Set).delete(k))),k!==l){if(d!==void 0&&d.has(k)){if(p.length<_.length){var E=_[0],T;f=E.prev;var N=p[0],z=p[p.length-1];for(T=0;T<p.length;T+=1)hr(p[T],E,n);for(T=0;T<_.length;T+=1)d.delete(_[T]);dt(e,N.prev,z.next),dt(e,f,N),dt(e,z,E),l=E,f=z,P-=1,p=[],_=[]}else d.delete(k),hr(k,l,n),dt(e,k.prev,k.next),dt(e,k,f===null?e.first:f.next),dt(e,f,k),f=k;continue}for(p=[],_=[];l!==null&&l.k!==O;)(l.e.f&Qe)===0&&(d??=new Set).add(l),_.push(l),l=l.next;if(l===null)continue;k=l}p.push(k),f=k,l=k.next}let K=c.size>o;if(l!==null||d!==void 0){for(var q=d===void 0?[]:Or(d);l!==null;)(l.e.f&Qe)===0&&q.push(l),l=l.next;var V=q.length;if(K=c.size-V>o,V>0){var $=(r&as)!==0&&o===0?n:null;if(s){for(P=0;P<V;P+=1)q[P].a?.measure();for(P=0;P<V;P+=1)q[P].a?.fix()}Fo(e,q,$)}}if(K)for(const Z of c.values())Z.o||(dt(e,f,Z),f=Z);e.effect.last=f&&f.e,s&&xn(()=>{if(g!==void 0)for(k of g)k.a?.apply()})}function Uo(e,t,n,r,a,s,o,c){var l=(o&ns)!==0,d=(o&lo)===0,f=l?d?Ko(n,!1,!1):Gt(n):n,g=(o&rs)===0?a:Gt(a),p={i:g,v:f,k:r,a:null,e:null,o:!1,prev:t,next:null};try{if(e===null){var _=document.createDocumentFragment();_.append(e=Et())}return p.e=nt(()=>s(e,f,g,c)),t!==null&&(t.next=p),p}finally{}}function hr(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,a=t?t.e.nodes_start:n,s=e.e.nodes_start;s!==null&&s!==r;){var o=Sn(s);a.before(s),s=o}}function dt(e,t,n){t===null?(e.first=n,e.effect.first=n&&n.e):(t.e.next&&(t.e.next.prev=null),t.next=n,t.e.next=n&&n.e),n!==null&&(n.e.prev&&(n.e.prev.next=null),n.prev=t,n.e.prev=t&&t.e)}function Wo(e,t,n,r){const a=qr;if(n.length===0&&e.length===0){r(t.map(a));return}var s=he,o=oe,c=Yo();function l(){Promise.all(n.map(d=>Vo(d))).then(d=>{c();try{r([...t.map(a),...d])}catch(f){(o.f&Nt)===0&&an(f,o)}s?.deactivate(),Bn()}).catch(d=>{an(d,o)})}e.length>0?Promise.all(e).then(()=>{c();try{return l()}finally{s?.deactivate(),Bn()}}):l()}function Yo(){var e=oe,t=te,n=at,r=he;return function(s=!0){gt(e),Ue(t),rn(n),s&&r?.activate()}}function Bn(){gt(null),Ue(null),rn(null)}function qr(e){var t=Ee|Ye,n=te!==null&&(te.f&Ee)!==0?te:null;return oe!==null&&(oe.f|=cn),{ctx:at,deps:null,effects:null,equals:cs,f:t,fn:e,reactions:null,rv:0,v:De,wv:0,parent:n??oe,ac:null}}function Vo(e,t){let n=oe;n===null&&bo();var r=n.b,a=void 0,s=Gt(De),o=!te,c=new Map;return al(()=>{var l=os();a=l.promise;try{Promise.resolve(e()).then(l.resolve,l.reject).then(()=>{d===he&&d.committed&&d.deactivate(),Bn()})}catch(p){l.reject(p),Bn()}var d=he;if(o){var f=!r.is_pending();r.update_pending_count(1),d.increment(f),c.get(d)?.reject($t),c.delete(d),c.set(d,l)}const g=(p,_=void 0)=>{if(d.activate(),_)_!==$t&&(s.f|=jt,sn(s,_));else{(s.f&jt)!==0&&(s.f^=jt),sn(s,p);for(const[x,O]of c){if(c.delete(x),x===d)break;O.reject($t)}}o&&(r.update_pending_count(-1),d.decrement(f))};l.promise.then(g,p=>g(null,p||"unknown"))}),tl(()=>{for(const l of c.values())l.reject($t)}),new Promise(l=>{function d(f){function g(){f===a?l(s):d(a)}f.then(g,g)}d(a)})}function X(e){const t=qr(e);return As(t),t}function Go(e){const t=qr(e);return t.equals=ds,t}function ps(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)We(t[n])}}function Xo(e){for(var t=e.parent;t!==null;){if((t.f&Ee)===0)return(t.f&Nt)===0?t:null;t=t.parent}return null}function Ur(e){var t,n=oe;gt(Xo(e));try{e.f&=~Yt,ps(e),t=Os(e)}finally{gt(n)}return t}function ms(e){var t=Ur(e);if(e.equals(t)||(he?.is_fork||(e.v=t),e.wv=Rs()),!dn)if(rt!==null)(mn()||he?.is_fork)&&rt.set(e,t);else{var n=(e.f&ft)===0?Dt:ze;Oe(e,n)}}let kr=new Set;const Bt=new Map;let gs=!1;function Gt(e,t){var n={f:0,v:e,reactions:null,equals:cs,rv:0,wv:0};return n}function F(e,t){const n=Gt(e);return As(n),n}function Ko(e,t=!1,n=!0){const r=Gt(e);return t||(r.equals=ds),r}function b(e,t,n=!1){te!==null&&(!mt||(te.f&Ma)!==0)&&us()&&(te.f&(Ee|Ht|Lr|Ma))!==0&&!Tt?.includes(e)&&Eo();let r=n?pe(t):t;return sn(e,r)}function sn(e,t){if(!e.equals(t)){var n=e.v;dn?Bt.set(e,t):Bt.set(e,n),e.v=t;var r=pt.ensure();r.capture(e,n),(e.f&Ee)!==0&&((e.f&Ye)!==0&&Ur(e),Oe(e,(e.f&ft)!==0?ze:Dt)),e.wv=Rs(),_s(e,Ye),oe!==null&&(oe.f&ze)!==0&&(oe.f&(At|Xt))===0&&(tt===null?ol([e]):tt.push(e)),!r.is_fork&&kr.size>0&&!gs&&Qo()}return t}function Qo(){gs=!1;var e=Lt;Fn(!0);const t=Array.from(kr);try{for(const n of t)(n.f&ze)!==0&&Oe(n,Dt),In(n)&&_n(n)}finally{Fn(e)}kr.clear()}function pn(e){b(e,e.v+1)}function _s(e,t){var n=e.reactions;if(n!==null)for(var r=n.length,a=0;a<r;a++){var s=n[a],o=s.f,c=(o&Ye)===0;if(c&&Oe(s,t),(o&Ee)!==0){var l=s;rt?.delete(l),(o&Yt)===0&&(o&ft&&(s.f|=Yt),_s(l,Dt))}else c&&((o&Ht)!==0&&xt!==null&&xt.add(s),Vt(s))}}function pe(e){if(typeof e!="object"||e===null||zn in e)return e;const t=is(e);if(t!==mo&&t!==go)return e;var n=new Map,r=ss(e),a=F(0),s=Wt,o=c=>{if(Wt===s)return c();var l=te,d=Wt;Ue(null),Aa(s);var f=c();return Ue(l),Aa(d),f};return r&&n.set("length",F(e.length)),new Proxy(e,{defineProperty(c,l,d){(!("value"in d)||d.configurable===!1||d.enumerable===!1||d.writable===!1)&&Co();var f=n.get(l);return f===void 0?f=o(()=>{var g=F(d.value);return n.set(l,g),g}):b(f,d.value,!0),!0},deleteProperty(c,l){var d=n.get(l);if(d===void 0){if(l in c){const f=o(()=>F(De));n.set(l,f),pn(a)}}else b(d,De),pn(a);return!0},get(c,l,d){if(l===zn)return e;var f=n.get(l),g=l in c;if(f===void 0&&(!g||hn(c,l)?.writable)&&(f=o(()=>{var _=pe(g?c[l]:De),x=F(_);return x}),n.set(l,f)),f!==void 0){var p=i(f);return p===De?void 0:p}return Reflect.get(c,l,d)},getOwnPropertyDescriptor(c,l){var d=Reflect.getOwnPropertyDescriptor(c,l);if(d&&"value"in d){var f=n.get(l);f&&(d.value=i(f))}else if(d===void 0){var g=n.get(l),p=g?.v;if(g!==void 0&&p!==De)return{enumerable:!0,configurable:!0,value:p,writable:!0}}return d},has(c,l){if(l===zn)return!0;var d=n.get(l),f=d!==void 0&&d.v!==De||Reflect.has(c,l);if(d!==void 0||oe!==null&&(!f||hn(c,l)?.writable)){d===void 0&&(d=o(()=>{var p=f?pe(c[l]):De,_=F(p);return _}),n.set(l,d));var g=i(d);if(g===De)return!1}return f},set(c,l,d,f){var g=n.get(l),p=l in c;if(r&&l==="length")for(var _=d;_<g.v;_+=1){var x=n.get(_+"");x!==void 0?b(x,De):_ in c&&(x=o(()=>F(De)),n.set(_+"",x))}if(g===void 0)(!p||hn(c,l)?.writable)&&(g=o(()=>F(void 0)),b(g,pe(d)),n.set(l,g));else{p=g.v!==De;var O=o(()=>pe(d));b(g,O)}var k=Reflect.getOwnPropertyDescriptor(c,l);if(k?.set&&k.set.call(f,d),!p){if(r&&typeof l=="string"){var P=n.get("length"),H=Number(l);Number.isInteger(H)&&H>=P.v&&b(P,H+1)}pn(a)}return!0},ownKeys(c){i(a);var l=Reflect.ownKeys(c).filter(g=>{var p=n.get(g);return p===void 0||p.v!==De});for(var[d,f]of n)f.v!==De&&!(d in c)&&l.push(d);return l},setPrototypeOf(){Mo()}})}var Pa,ys,ws,ks;function Zo(){if(Pa===void 0){Pa=window,ys=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;ws=hn(t,"firstChild").get,ks=hn(t,"nextSibling").get,Ca(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Ca(n)&&(n.__t=void 0)}}function Et(e=""){return document.createTextNode(e)}function Ln(e){return ws.call(e)}function Sn(e){return ks.call(e)}function u(e,t){return Ln(e)}function Ie(e,t=!1){{var n=Ln(e);return n instanceof Comment&&n.data===""?Sn(n):n}}function v(e,t=1,n=!1){let r=e;for(;t--;)r=Sn(r);return r}function Jo(e){e.textContent=""}function bs(){return!1}function xs(e){var t=te,n=oe;Ue(null),gt(null);try{return e()}finally{Ue(t),gt(n)}}function $o(e){oe===null&&(te===null&&Io(),So()),dn&&xo()}function el(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function Rt(e,t,n){var r=oe;r!==null&&(r.f&Qe)!==0&&(e|=Qe);var a={ctx:at,deps:null,nodes_start:null,nodes_end:null,f:e|Ye|ft,first:null,fn:t,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{_n(a),a.f|=Br}catch(c){throw We(a),c}else t!==null&&Vt(a);var s=a;if(n&&s.deps===null&&s.teardown===null&&s.nodes_start===null&&s.first===s.last&&(s.f&cn)===0&&(s=s.first,(e&Ht)!==0&&(e&nn)!==0&&s!==null&&(s.f|=nn)),s!==null&&(s.parent=r,r!==null&&el(s,r),te!==null&&(te.f&Ee)!==0&&(e&Xt)===0)){var o=te;(o.effects??=[]).push(s)}return a}function mn(){return te!==null&&!mt}function tl(e){const t=Rt(jr,null,!1);return Oe(t,ze),t.teardown=e,t}function It(e){$o();var t=oe.f,n=!te&&(t&At)!==0&&(t&Br)===0;if(n){var r=at;(r.e??=[]).push(e)}else return Ss(e)}function Ss(e){return Rt(Nr|wo,e,!1)}function nl(e){pt.ensure();const t=Rt(Xt|cn,e,!0);return(n={})=>new Promise(r=>{n.outro?tn(t,()=>{We(t),r(void 0)}):(We(t),r(void 0))})}function rl(e){return Rt(Nr,e,!1)}function al(e){return Rt(Lr|cn,e,!0)}function Is(e,t=0){return Rt(jr|t,e,!0)}function U(e,t=[],n=[],r=[]){Wo(r,t,n,a=>{Rt(jr,()=>e(...a.map(i)),!0)})}function Wr(e,t=0){var n=Rt(Ht|t,e,!0);return n}function nt(e){return Rt(At|cn,e,!0)}function Ts(e){var t=e.teardown;if(t!==null){const n=dn,r=te;Ha(!0),Ue(null);try{t.call(null)}finally{Ha(n),Ue(r)}}}function Cs(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const a=n.ac;a!==null&&xs(()=>{a.abort($t)});var r=n.next;(n.f&Xt)!==0?n.parent=null:We(n,t),n=r}}function sl(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&At)===0&&We(t),t=n}}function We(e,t=!0){var n=!1;(t||(e.f&ls)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(il(e.nodes_start,e.nodes_end),n=!0),Cs(e,t&&!n),qn(e,0),Oe(e,Nt);var r=e.transitions;if(r!==null)for(const s of r)s.stop();Ts(e);var a=e.parent;a!==null&&a.first!==null&&Ms(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function il(e,t){for(;e!==null;){var n=e===t?null:Sn(e);e.remove(),e=n}}function Ms(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function tn(e,t,n=!0){var r=[];Yr(e,r,!0),Es(r,()=>{n&&We(e),t&&t()})}function Es(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var a of e)a.out(r)}else t()}function Yr(e,t,n){if((e.f&Qe)===0){if(e.f^=Qe,e.transitions!==null)for(const o of e.transitions)(o.is_global||n)&&t.push(o);for(var r=e.first;r!==null;){var a=r.next,s=(r.f&nn)!==0||(r.f&At)!==0&&(e.f&Ht)!==0;Yr(r,t,s?n:!1),r=a}}}function Vr(e){Ps(e,!0)}function Ps(e,t){if((e.f&Qe)!==0){e.f^=Qe,(e.f&ze)===0&&(Oe(e,Ye),Vt(e));for(var n=e.first;n!==null;){var r=n.next,a=(n.f&nn)!==0||(n.f&At)!==0;Ps(n,a?t:!1),n=r}if(e.transitions!==null)for(const s of e.transitions)(s.is_global||t)&&s.in()}}function Hs(e,t){for(var n=e.nodes_start,r=e.nodes_end;n!==null;){var a=n===r?null:Sn(n);t.append(n),n=a}}let Lt=!1;function Fn(e){Lt=e}let dn=!1;function Ha(e){dn=e}let te=null,mt=!1;function Ue(e){te=e}let oe=null;function gt(e){oe=e}let Tt=null;function As(e){te!==null&&(Tt===null?Tt=[e]:Tt.push(e))}let je=null,Xe=0,tt=null;function ol(e){tt=e}let Ds=1,gn=0,Wt=gn;function Aa(e){Wt=e}function Rs(){return++Ds}function In(e){var t=e.f;if((t&Ye)!==0)return!0;if(t&Ee&&(e.f&=~Yt),(t&Dt)!==0){var n=e.deps;if(n!==null)for(var r=n.length,a=0;a<r;a++){var s=n[a];if(In(s)&&ms(s),s.wv>e.wv)return!0}(t&ft)!==0&&rt===null&&Oe(e,ze)}return!1}function zs(e,t,n=!0){var r=e.reactions;if(r!==null&&!Tt?.includes(e))for(var a=0;a<r.length;a++){var s=r[a];(s.f&Ee)!==0?zs(s,t,!1):t===s&&(n?Oe(s,Ye):(s.f&ze)!==0&&Oe(s,Dt),Vt(s))}}function Os(e){var t=je,n=Xe,r=tt,a=te,s=Tt,o=at,c=mt,l=Wt,d=e.f;je=null,Xe=0,tt=null,te=(d&(At|Xt))===0?e:null,Tt=null,rn(e.ctx),mt=!1,Wt=++gn,e.ac!==null&&(xs(()=>{e.ac.abort($t)}),e.ac=null);try{e.f|=yr;var f=e.fn,g=f(),p=e.deps;if(je!==null){var _;if(qn(e,Xe),p!==null&&Xe>0)for(p.length=Xe+je.length,_=0;_<je.length;_++)p[Xe+_]=je[_];else e.deps=p=je;if(Lt&&mn()&&(e.f&ft)!==0)for(_=Xe;_<p.length;_++)(p[_].reactions??=[]).push(e)}else p!==null&&Xe<p.length&&(qn(e,Xe),p.length=Xe);if(us()&&tt!==null&&!mt&&p!==null&&(e.f&(Ee|Dt|Ye))===0)for(_=0;_<tt.length;_++)zs(tt[_],e);return a!==null&&a!==e&&(gn++,tt!==null&&(r===null?r=tt:r.push(...tt))),(e.f&jt)!==0&&(e.f^=jt),g}catch(x){return fs(x)}finally{e.f^=yr,je=t,Xe=n,tt=r,te=a,Tt=s,rn(o),mt=c,Wt=l}}function ll(e,t){let n=t.reactions;if(n!==null){var r=vo.call(n,e);if(r!==-1){var a=n.length-1;a===0?n=t.reactions=null:(n[r]=n[a],n.pop())}}n===null&&(t.f&Ee)!==0&&(je===null||!je.includes(t))&&(Oe(t,Dt),(t.f&ft)!==0&&(t.f^=ft,t.f&=~Yt),ps(t),qn(t,0))}function qn(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)ll(e,n[r])}function _n(e){var t=e.f;if((t&Nt)===0){Oe(e,ze);var n=oe,r=Lt;oe=e,Lt=!0;try{(t&(Ht|yo))!==0?sl(e):Cs(e),Ts(e);var a=Os(e);e.teardown=typeof a=="function"?a:null,e.wv=Ds;var s;_r&&Do&&(e.f&Ye)!==0&&e.deps}finally{Lt=r,oe=n}}}function i(e){var t=e.f,n=(t&Ee)!==0;if(te!==null&&!mt){var r=oe!==null&&(oe.f&Nt)!==0;if(!r&&!Tt?.includes(e)){var a=te.deps;if((te.f&yr)!==0)e.rv<gn&&(e.rv=gn,je===null&&a!==null&&a[Xe]===e?Xe++:je===null?je=[e]:je.includes(e)||je.push(e));else{(te.deps??=[]).push(e);var s=e.reactions;s===null?e.reactions=[te]:s.includes(te)||s.push(te)}}}if(dn){if(Bt.has(e))return Bt.get(e);if(n){var o=e,c=o.v;return((o.f&ze)===0&&o.reactions!==null||js(o))&&(c=Ur(o)),Bt.set(o,c),c}}else n&&(!rt?.has(e)||he?.is_fork&&!mn())&&(o=e,In(o)&&ms(o),Lt&&mn()&&(o.f&ft)===0&&Ns(o));if(rt?.has(e))return rt.get(e);if((e.f&jt)!==0)throw e.v;return e.v}function Ns(e){if(e.deps!==null){e.f^=ft;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&Ee)!==0&&(t.f&ft)===0&&Ns(t)}}function js(e){if(e.v===De)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(Bt.has(t)||(t.f&Ee)!==0&&js(t))return!0;return!1}function Bs(e){var t=mt;try{return mt=!0,e()}finally{mt=t}}const cl=-7169;function Oe(e,t){e.f=e.f&cl|t}const Ls=new Set,br=new Set;function Ze(e){for(var t=0;t<e.length;t++)Ls.add(e[t]);for(var n of br)n(e)}let Da=null;function Hn(e){var t=this,n=t.ownerDocument,r=e.type,a=e.composedPath?.()||[],s=a[0]||e.target;Da=e;var o=0,c=Da===e&&e.__root;if(c){var l=a.indexOf(c);if(l!==-1&&(t===document||t===window)){e.__root=t;return}var d=a.indexOf(t);if(d===-1)return;l<=d&&(o=l)}if(s=a[o]||e.target,s!==t){ho(e,"currentTarget",{configurable:!0,get(){return s||n}});var f=te,g=oe;Ue(null),gt(null);try{for(var p,_=[];s!==null;){var x=s.assignedSlot||s.parentNode||s.host||null;try{var O=s["__"+r];O!=null&&(!s.disabled||e.target===s)&&O.call(s,e)}catch(k){p?_.push(k):p=k}if(e.cancelBubble||x===t||x===null)break;s=x}if(p){for(let k of _)queueMicrotask(()=>{throw k});throw p}}finally{e.__root=t,delete e.currentTarget,Ue(f),gt(g)}}}function dl(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Un(e,t){var n=oe;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function D(e,t){var n=(t&co)!==0,r=(t&uo)!==0,a,s=!e.startsWith("<!>");return()=>{a===void 0&&(a=dl(s?e:"<!>"+e),n||(a=Ln(a)));var o=r||ys?document.importNode(a,!0):a.cloneNode(!0);if(n){var c=Ln(o),l=o.lastChild;Un(c,l)}else Un(o,o);return o}}function Ra(e=""){{var t=Et(e+"");return Un(t,t),t}}function Me(){var e=document.createDocumentFragment(),t=document.createComment(""),n=Et();return e.append(t,n),Un(t,n),e}function I(e,t){e!==null&&e.before(t)}const ul=["touchstart","touchmove"];function fl(e){return ul.includes(e)}function w(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function vl(e,t){return hl(e,t)}const Qt=new Map;function hl(e,{target:t,anchor:n,props:r={},events:a,context:s,intro:o=!0}){Zo();var c=new Set,l=g=>{for(var p=0;p<g.length;p++){var _=g[p];if(!c.has(_)){c.add(_);var x=fl(_);t.addEventListener(_,Hn,{passive:x});var O=Qt.get(_);O===void 0?(document.addEventListener(_,Hn,{passive:x}),Qt.set(_,1)):Qt.set(_,O+1)}}};l(Or(Ls)),br.add(l);var d=void 0,f=nl(()=>{var g=n??t.appendChild(Et());return Bo(g,{pending:()=>{}},p=>{if(s){Pe({});var _=at;_.c=s}a&&(r.$$events=a),d=e(p,r)||{},s&&He()}),()=>{for(var p of c){t.removeEventListener(p,Hn);var _=Qt.get(p);--_===0?(document.removeEventListener(p,Hn),Qt.delete(p)):Qt.set(p,_)}br.delete(l),g!==n&&g.parentNode?.removeChild(g)}});return pl.set(d,f),d}let pl=new WeakMap;class ml{anchor;#e=new Map;#t=new Map;#r=new Map;#n=new Set;#l=!0;constructor(t,n=!0){this.anchor=t,this.#l=n}#s=()=>{var t=he;if(this.#e.has(t)){var n=this.#e.get(t),r=this.#t.get(n);if(r)Vr(r),this.#n.delete(n);else{var a=this.#r.get(n);a&&(this.#t.set(n,a.effect),this.#r.delete(n),a.fragment.lastChild.remove(),this.anchor.before(a.fragment),r=a.effect)}for(const[s,o]of this.#e){if(this.#e.delete(s),s===t)break;const c=this.#r.get(o);c&&(We(c.effect),this.#r.delete(o))}for(const[s,o]of this.#t){if(s===n||this.#n.has(s))continue;const c=()=>{if(Array.from(this.#e.values()).includes(s)){var d=document.createDocumentFragment();Hs(o,d),d.append(Et()),this.#r.set(s,{effect:o,fragment:d})}else We(o);this.#n.delete(s),this.#t.delete(s)};this.#l||!r?(this.#n.add(s),tn(o,c,!1)):c()}}};#a=t=>{this.#e.delete(t);const n=Array.from(this.#e.values());for(const[r,a]of this.#r)n.includes(r)||(We(a.effect),this.#r.delete(r))};ensure(t,n){var r=he,a=bs();if(n&&!this.#t.has(t)&&!this.#r.has(t))if(a){var s=document.createDocumentFragment(),o=Et();s.append(o),this.#r.set(t,{effect:nt(()=>n(o)),fragment:s})}else this.#t.set(t,nt(()=>n(this.anchor)));if(this.#e.set(r,t),a){for(const[c,l]of this.#t)c===t?r.skipped_effects.delete(l):r.skipped_effects.add(l);for(const[c,l]of this.#r)c===t?r.skipped_effects.delete(l.effect):r.skipped_effects.add(l.effect);r.oncommit(this.#s),r.ondiscard(this.#a)}else this.#s()}}function L(e,t,n=!1){var r=new ml(e),a=n?nn:0;function s(o,c){r.ensure(o,c)}Wr(()=>{var o=!1;t((c,l=!0)=>{o=!0,s(l,c)}),o||s(!1,null)},a)}const za=[...` 	
\r\fÂ \v\uFEFF`];function gl(e,t,n){var r=e==null?"":""+e;if(t&&(r=r?r+" "+t:t),n){for(var a in n)if(n[a])r=r?r+" "+a:a;else if(r.length)for(var s=a.length,o=0;(o=r.indexOf(a,o))>=0;){var c=o+s;(o===0||za.includes(r[o-1]))&&(c===r.length||za.includes(r[c]))?r=(o===0?"":r.substring(0,o))+r.substring(c+1):o=c}}return r===""?null:r}function _l(e,t){return e==null?null:String(e)}function Re(e,t,n,r,a,s){var o=e.__className;if(o!==n||o===void 0){var c=gl(n,r,s);c==null?e.removeAttribute("class"):e.className=c,e.__className=n}else if(s&&a!==s)for(var l in s){var d=!!s[l];(a==null||d!==!!a[l])&&e.classList.toggle(l,d)}return s}function Ot(e,t,n,r){var a=e.__style;if(a!==t){var s=_l(t);s==null?e.removeAttribute("style"):e.style.cssText=s,e.__style=t}return r}const yl=Symbol("is custom element"),wl=Symbol("is html");function B(e,t,n,r){var a=kl(e);a[t]!==(a[t]=n)&&(t==="loading"&&(e[ko]=n),n==null?e.removeAttribute(t):typeof n!="string"&&bl(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function kl(e){return e.__attributes??={[yl]:e.nodeName.includes("-"),[wl]:e.namespaceURI===fo}}var Oa=new Map;function bl(e){var t=e.getAttribute("is")||e.nodeName,n=Oa.get(t);if(n)return n;Oa.set(t,n=[]);for(var r,a=e,s=Element.prototype;s!==a;){r=po(a);for(var o in r)r[o].set&&n.push(o);a=is(a)}return n}function Na(e,t){return e===t||e?.[zn]===t}function xl(e={},t,n,r){return rl(()=>{var a,s;return Is(()=>{a=s,s=[],Bs(()=>{e!==n(...s)&&(t(e,...s),a&&Na(n(...a),e)&&t(null,...a))})}),()=>{xn(()=>{s&&Na(n(...s),e)&&t(null,...s)})}}),e}function Ce(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Sl=typeof Symbol=="function"&&Symbol.observable||"@@observable",ja=Sl,pr=()=>Math.random().toString(36).substring(7).split("").join("."),Il={INIT:`@@redux/INIT${pr()}`,REPLACE:`@@redux/REPLACE${pr()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${pr()}`},Wn=Il;function Gr(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Fs(e,t,n){if(typeof e!="function")throw new Error(Ce(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Ce(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Ce(1));return n(Fs)(e,t)}let r=e,a=t,s=new Map,o=s,c=0,l=!1;function d(){o===s&&(o=new Map,s.forEach((k,P)=>{o.set(P,k)}))}function f(){if(l)throw new Error(Ce(3));return a}function g(k){if(typeof k!="function")throw new Error(Ce(4));if(l)throw new Error(Ce(5));let P=!0;d();const H=c++;return o.set(H,k),function(){if(P){if(l)throw new Error(Ce(6));P=!1,d(),o.delete(H),s=null}}}function p(k){if(!Gr(k))throw new Error(Ce(7));if(typeof k.type>"u")throw new Error(Ce(8));if(typeof k.type!="string")throw new Error(Ce(17));if(l)throw new Error(Ce(9));try{l=!0,a=r(a,k)}finally{l=!1}return(s=o).forEach(H=>{H()}),k}function _(k){if(typeof k!="function")throw new Error(Ce(10));r=k,p({type:Wn.REPLACE})}function x(){const k=g;return{subscribe(P){if(typeof P!="object"||P===null)throw new Error(Ce(11));function H(){const T=P;T.next&&T.next(f())}return H(),{unsubscribe:k(H)}},[ja](){return this}}}return p({type:Wn.INIT}),{dispatch:p,subscribe:g,getState:f,replaceReducer:_,[ja]:x}}function Tl(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:Wn.INIT})>"u")throw new Error(Ce(12));if(typeof n(void 0,{type:Wn.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ce(13))})}function Cl(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let a;try{Tl(n)}catch(s){a=s}return function(o={},c){if(a)throw a;let l=!1;const d={};for(let f=0;f<r.length;f++){const g=r[f],p=n[g],_=o[g],x=p(_,c);if(typeof x>"u")throw c&&c.type,new Error(Ce(14));d[g]=x,l=l||x!==_}return l=l||r.length!==Object.keys(o).length,l?d:o}}function Yn(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function Ml(...e){return t=>(n,r)=>{const a=t(n,r);let s=()=>{throw new Error(Ce(15))};const o={getState:a.getState,dispatch:(l,...d)=>s(l,...d)},c=e.map(l=>l(o));return s=Yn(...c)(a.dispatch),{...a,dispatch:s}}}function El(e){return Gr(e)&&"type"in e&&typeof e.type=="string"}var qs=Symbol.for("immer-nothing"),Ba=Symbol.for("immer-draftable"),Fe=Symbol.for("immer-state");function ut(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Ke=Object,on=Ke.getPrototypeOf,Vn="constructor",$n="prototype",xr="configurable",Gn="enumerable",On="writable",yn="value",Pt=e=>!!e&&!!e[Fe];function _t(e){return e?Us(e)||er(e)||!!e[Ba]||!!e[Vn]?.[Ba]||tr(e)||nr(e):!1}var Pl=Ke[$n][Vn].toString(),La=new WeakMap;function Us(e){if(!e||!Xr(e))return!1;const t=on(e);if(t===null||t===Ke[$n])return!0;const n=Ke.hasOwnProperty.call(t,Vn)&&t[Vn];if(n===Object)return!0;if(!Jt(n))return!1;let r=La.get(n);return r===void 0&&(r=Function.toString.call(n),La.set(n,r)),r===Pl}function Tn(e,t,n=!0){Cn(e)===0?(n?Reflect.ownKeys(e):Ke.keys(e)).forEach(a=>{t(a,e[a],e)}):e.forEach((r,a)=>t(a,r,e))}function Cn(e){const t=e[Fe];return t?t.type_:er(e)?1:tr(e)?2:nr(e)?3:0}var Fa=(e,t,n=Cn(e))=>n===2?e.has(t):Ke[$n].hasOwnProperty.call(e,t),Sr=(e,t,n=Cn(e))=>n===2?e.get(t):e[t],Xn=(e,t,n,r=Cn(e))=>{r===2?e.set(t,n):r===3?e.add(n):e[t]=n};function Hl(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var er=Array.isArray,tr=e=>e instanceof Map,nr=e=>e instanceof Set,Xr=e=>typeof e=="object",Jt=e=>typeof e=="function",mr=e=>typeof e=="boolean",St=e=>e.copy_||e.base_,Kr=e=>e.modified_?e.copy_:e.base_;function Ir(e,t){if(tr(e))return new Map(e);if(nr(e))return new Set(e);if(er(e))return Array[$n].slice.call(e);const n=Us(e);if(t===!0||t==="class_only"&&!n){const r=Ke.getOwnPropertyDescriptors(e);delete r[Fe];let a=Reflect.ownKeys(r);for(let s=0;s<a.length;s++){const o=a[s],c=r[o];c[On]===!1&&(c[On]=!0,c[xr]=!0),(c.get||c.set)&&(r[o]={[xr]:!0,[On]:!0,[Gn]:c[Gn],[yn]:e[o]})}return Ke.create(on(e),r)}else{const r=on(e);if(r!==null&&n)return{...e};const a=Ke.create(r);return Ke.assign(a,e)}}function Qr(e,t=!1){return rr(e)||Pt(e)||(Cn(e)>1&&Ke.defineProperties(e,{set:An,add:An,clear:An,delete:An}),Ke.freeze(e),t&&Tn(e,(n,r)=>{Qr(r,!0)},!1)),e}function Al(){ut(2)}var An={[yn]:Al};function rr(e){return e===null||!Xr(e)?!0:Ke.isFrozen(e)}var Kn="MapSet",Tr="Patches",Ws={};function ln(e){const t=Ws[e];return t||ut(0,e),t}var Dl=e=>!!Ws[e],wn,Ys=()=>wn,Rl=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:Dl(Kn)?ln(Kn):void 0});function qa(e,t){t&&(e.patchPlugin_=ln(Tr),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Cr(e){Mr(e),e.drafts_.forEach(zl),e.drafts_=null}function Mr(e){e===wn&&(wn=e.parent_)}var Ua=e=>wn=Rl(wn,e);function zl(e){const t=e[Fe];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Wa(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];if(e!==void 0&&e!==n){n[Fe].modified_&&(Cr(t),ut(4)),_t(e)&&(e=Ya(t,e));const{patchPlugin_:a}=t;a&&a.generateReplacementPatches_(n[Fe].base_,e,t)}else e=Ya(t,n);return Ol(t,e,!0),Cr(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==qs?e:void 0}function Ya(e,t){if(rr(t))return t;const n=t[Fe];if(!n)return Zr(t,e.handledSet_,e);if(!ar(n,e))return t;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(e);Xs(n,e)}return n.copy_}function Ol(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Qr(t,n)}function Vs(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var ar=(e,t)=>e.scope_===t,Nl=[];function Gs(e,t,n,r){const a=St(e),s=e.type_;if(r!==void 0&&Sr(a,r,s)===t){Xn(a,r,n,s);return}if(!e.draftLocations_){const c=e.draftLocations_=new Map;Tn(a,(l,d)=>{if(Pt(d)){const f=c.get(d)||[];f.push(l),c.set(d,f)}})}const o=e.draftLocations_.get(t)??Nl;for(const c of o)Xn(a,c,n,s)}function jl(e,t,n){e.callbacks_.push(function(a){const s=t;if(!s||!ar(s,a))return;a.mapSetPlugin_?.fixSetContents(s);const o=Kr(s);Gs(e,s.draft_??s,o,n),Xs(s,a)})}function Xs(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||(e.assigned_?.size??0)>0)){const{patchPlugin_:r}=t;if(r){const a=r.getPath(e);a&&r.generatePatches_(e,a,t)}Vs(e)}}function Bl(e,t,n){const{scope_:r}=e;if(Pt(n)){const a=n[Fe];ar(a,r)&&a.callbacks_.push(function(){Nn(e);const o=Kr(a);Gs(e,n,o,t)})}else _t(n)&&e.callbacks_.push(function(){const s=St(e);Sr(s,t,e.type_)===n&&r.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&Zr(Sr(e.copy_,t,e.type_),r.handledSet_,r)})}function Zr(e,t,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||Pt(e)||t.has(e)||!_t(e)||rr(e)||(t.add(e),Tn(e,(r,a)=>{if(Pt(a)){const s=a[Fe];if(ar(s,n)){const o=Kr(s);Xn(e,r,o,e.type_),Vs(s)}}else _t(a)&&Zr(a,t,n)})),e}function Ll(e,t){const n=er(e),r={type_:n?1:0,scope_:t?t.scope_:Ys(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let a=r,s=Jr;n&&(a=[r],s=kn);const{revoke:o,proxy:c}=Proxy.revocable(a,s);return r.draft_=c,r.revoke_=o,[c,r]}var Jr={get(e,t){if(t===Fe)return e;const n=St(e);if(!Fa(n,t,e.type_))return Fl(e,n,t);const r=n[t];if(e.finalized_||!_t(r))return r;if(r===gr(e.base_,t)){Nn(e);const a=e.type_===1?+t:t,s=Pr(e.scope_,r,e,a);return e.copy_[a]=s}return r},has(e,t){return t in St(e)},ownKeys(e){return Reflect.ownKeys(St(e))},set(e,t,n){const r=Ks(St(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const a=gr(St(e),t),s=a?.[Fe];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_.set(t,!1),!0;if(Hl(n,a)&&(n!==void 0||Fa(e.base_,t,e.type_)))return!0;Nn(e),Er(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_.set(t,!0),Bl(e,t,n)),!0},deleteProperty(e,t){return Nn(e),gr(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),Er(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=St(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{[On]:!0,[xr]:e.type_!==1||t!=="length",[Gn]:r[Gn],[yn]:n[t]}},defineProperty(){ut(11)},getPrototypeOf(e){return on(e.base_)},setPrototypeOf(){ut(12)}},kn={};Tn(Jr,(e,t)=>{kn[e]=function(){const n=arguments;return n[0]=n[0][0],t.apply(this,n)}});kn.deleteProperty=function(e,t){return kn.set.call(this,e,t,void 0)};kn.set=function(e,t,n){return Jr.set.call(this,e[0],t,n,e[0])};function gr(e,t){const n=e[Fe];return(n?St(n):e)[t]}function Fl(e,t,n){const r=Ks(t,n);return r?yn in r?r[yn]:r.get?.call(e.draft_):void 0}function Ks(e,t){if(!(t in e))return;let n=on(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=on(n)}}function Er(e){e.modified_||(e.modified_=!0,e.parent_&&Er(e.parent_))}function Nn(e){e.copy_||(e.assigned_=new Map,e.copy_=Ir(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var ql=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(t,n,r)=>{if(Jt(t)&&!Jt(n)){const s=n;n=t;const o=this;return function(l=s,...d){return o.produce(l,f=>n.call(this,f,...d))}}Jt(n)||ut(6),r!==void 0&&!Jt(r)&&ut(7);let a;if(_t(t)){const s=Ua(this),o=Pr(s,t,void 0);let c=!0;try{a=n(o),c=!1}finally{c?Cr(s):Mr(s)}return qa(s,r),Wa(a,s)}else if(!t||!Xr(t)){if(a=n(t),a===void 0&&(a=t),a===qs&&(a=void 0),this.autoFreeze_&&Qr(a,!0),r){const s=[],o=[];ln(Tr).generateReplacementPatches_(t,a,{patches_:s,inversePatches_:o}),r(s,o)}return a}else ut(1,t)},this.produceWithPatches=(t,n)=>{if(Jt(t))return(o,...c)=>this.produceWithPatches(o,l=>t(l,...c));let r,a;return[this.produce(t,n,(o,c)=>{r=o,a=c}),r,a]},mr(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),mr(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),mr(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){_t(e)||ut(8),Pt(e)&&(e=Ul(e));const t=Ua(this),n=Pr(t,e,void 0);return n[Fe].isManual_=!0,Mr(t),n}finishDraft(e,t){const n=e&&e[Fe];(!n||!n.isManual_)&&ut(9);const{scope_:r}=n;return qa(r,t),Wa(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const a=t[n];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}n>-1&&(t=t.slice(n+1));const r=ln(Tr).applyPatches_;return Pt(e)?r(e,t):this.produce(e,a=>r(a,t))}};function Pr(e,t,n,r){const[a,s]=tr(t)?ln(Kn).proxyMap_(t,n):nr(t)?ln(Kn).proxySet_(t,n):Ll(t,n);return(n?.scope_??Ys()).drafts_.push(a),s.callbacks_=n?.callbacks_??[],s.key_=r,n&&r!==void 0?jl(n,s,r):s.callbacks_.push(function(l){l.mapSetPlugin_?.fixSetContents(s);const{patchPlugin_:d}=l;s.modified_&&d&&d.generatePatches_(s,[],l)}),a}function Ul(e){return Pt(e)||ut(10,e),Qs(e)}function Qs(e){if(!_t(e)||rr(e))return e;const t=e[Fe];let n,r=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Ir(e,t.scope_.immer_.useStrictShallowCopy_),r=t.scope_.immer_.shouldUseStrictIteration()}else n=Ir(e,!0);return Tn(n,(a,s)=>{Xn(n,a,Qs(s))},r),t&&(t.finalized_=!1),n}var Wl=new ql,Zs=Wl.produce;function Js(e){return({dispatch:n,getState:r})=>a=>s=>typeof s=="function"?s(n,r,e):a(s)}var Yl=Js(),Vl=Js,Gl=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Yn:Yn.apply(null,arguments)};function Va(e,t){function n(...r){if(t){let a=t(...r);if(!a)throw new Error(Ct(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>El(r)&&r.type===e,n}var $s=class fn extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,fn.prototype)}static get[Symbol.species](){return fn}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new fn(...t[0].concat(this)):new fn(...t.concat(this))}};function Ga(e){return _t(e)?Zs(e,()=>{}):e}function Dn(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function Xl(e){return typeof e=="boolean"}var Kl=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:a=!0,actionCreatorCheck:s=!0}=t??{};let o=new $s;return n&&(Xl(n)?o.push(Yl):o.push(Vl(n.extraArgument))),o},Ql="RTK_autoBatch",Xa=e=>t=>{setTimeout(t,e)},Zl=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let a=!0,s=!1,o=!1;const c=new Set,l=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Xa(10):e.type==="callback"?e.queueNotification:Xa(e.timeout),d=()=>{o=!1,s&&(s=!1,c.forEach(f=>f()))};return Object.assign({},r,{subscribe(f){const g=()=>a&&f(),p=r.subscribe(g);return c.add(f),()=>{p(),c.delete(f)}},dispatch(f){try{return a=!f?.meta?.[Ql],s=!a,s&&(o||(o=!0,l(d))),r.dispatch(f)}finally{a=!0}}})},Jl=e=>function(n){const{autoBatch:r=!0}=n??{};let a=new $s(e);return r&&a.push(Zl(typeof r=="object"?r:void 0)),a};function $l(e){const t=Kl(),{reducer:n=void 0,middleware:r,devTools:a=!0,preloadedState:s=void 0,enhancers:o=void 0}=e||{};let c;if(typeof n=="function")c=n;else if(Gr(n))c=Cl(n);else throw new Error(Ct(1));let l;typeof r=="function"?l=r(t):l=t();let d=Yn;a&&(d=Gl({trace:!1,...typeof a=="object"&&a}));const f=Ml(...l),g=Jl(f);let p=typeof o=="function"?o(g):g();const _=d(...p);return Fs(c,s,_)}function ei(e){const t={},n=[];let r;const a={addCase(s,o){const c=typeof s=="string"?s:s.type;if(!c)throw new Error(Ct(28));if(c in t)throw new Error(Ct(29));return t[c]=o,a},addAsyncThunk(s,o){return o.pending&&(t[s.pending.type]=o.pending),o.rejected&&(t[s.rejected.type]=o.rejected),o.fulfilled&&(t[s.fulfilled.type]=o.fulfilled),o.settled&&n.push({matcher:s.settled,reducer:o.settled}),a},addMatcher(s,o){return n.push({matcher:s,reducer:o}),a},addDefaultCase(s){return r=s,a}};return e(a),[t,n,r]}function ec(e){return typeof e=="function"}function tc(e,t){let[n,r,a]=ei(t),s;if(ec(e))s=()=>Ga(e());else{const c=Ga(e);s=()=>c}function o(c=s(),l){let d=[n[l.type],...r.filter(({matcher:f})=>f(l)).map(({reducer:f})=>f)];return d.filter(f=>!!f).length===0&&(d=[a]),d.reduce((f,g)=>{if(g)if(Pt(f)){const _=g(f,l);return _===void 0?f:_}else{if(_t(f))return Zs(f,p=>g(p,l));{const p=g(f,l);if(p===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return p}}return f},c)}return o.getInitialState=s,o}var nc=Symbol.for("rtk-slice-createasyncthunk");function rc(e,t){return`${e}/${t}`}function ac({creators:e}={}){const t=e?.asyncThunk?.[nc];return function(r){const{name:a,reducerPath:s=a}=r;if(!a)throw new Error(Ct(11));const o=(typeof r.reducers=="function"?r.reducers(ic()):r.reducers)||{},c=Object.keys(o),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(E,T){const N=typeof E=="string"?E:E.type;if(!N)throw new Error(Ct(12));if(N in l.sliceCaseReducersByType)throw new Error(Ct(13));return l.sliceCaseReducersByType[N]=T,d},addMatcher(E,T){return l.sliceMatchers.push({matcher:E,reducer:T}),d},exposeAction(E,T){return l.actionCreators[E]=T,d},exposeCaseReducer(E,T){return l.sliceCaseReducersByName[E]=T,d}};c.forEach(E=>{const T=o[E],N={reducerName:E,type:rc(a,E),createNotation:typeof r.reducers=="function"};lc(T)?dc(N,T,d,t):oc(N,T,d)});function f(){const[E={},T=[],N=void 0]=typeof r.extraReducers=="function"?ei(r.extraReducers):[r.extraReducers],z={...E,...l.sliceCaseReducersByType};return tc(r.initialState,K=>{for(let q in z)K.addCase(q,z[q]);for(let q of l.sliceMatchers)K.addMatcher(q.matcher,q.reducer);for(let q of T)K.addMatcher(q.matcher,q.reducer);N&&K.addDefaultCase(N)})}const g=E=>E,p=new Map,_=new WeakMap;let x;function O(E,T){return x||(x=f()),x(E,T)}function k(){return x||(x=f()),x.getInitialState()}function P(E,T=!1){function N(K){let q=K[E];return typeof q>"u"&&T&&(q=Dn(_,N,k)),q}function z(K=g){const q=Dn(p,T,()=>new WeakMap);return Dn(q,K,()=>{const V={};for(const[$,Z]of Object.entries(r.selectors??{}))V[$]=sc(Z,K,()=>Dn(_,K,k),T);return V})}return{reducerPath:E,getSelectors:z,get selectors(){return z(N)},selectSlice:N}}const H={name:a,reducer:O,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:k,...P(s),injectInto(E,{reducerPath:T,...N}={}){const z=T??s;return E.inject({reducerPath:z,reducer:O},N),{...H,...P(z,!0)}}};return H}}function sc(e,t,n,r){function a(s,...o){let c=t(s);return typeof c>"u"&&r&&(c=n()),e(c,...o)}return a.unwrapped=e,a}var ti=ac();function ic(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function oc({type:e,reducerName:t,createNotation:n},r,a){let s,o;if("reducer"in r){if(n&&!cc(r))throw new Error(Ct(17));s=r.reducer,o=r.prepare}else s=r;a.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?Va(e,o):Va(e))}function lc(e){return e._reducerDefinitionType==="asyncThunk"}function cc(e){return e._reducerDefinitionType==="reducerWithPrepare"}function dc({type:e,reducerName:t},n,r,a){if(!a)throw new Error(Ct(18));const{payloadCreator:s,fulfilled:o,pending:c,rejected:l,settled:d,options:f}=n,g=a(e,s,f);r.exposeAction(t,g),o&&r.addCase(g.fulfilled,o),c&&r.addCase(g.pending,c),l&&r.addCase(g.rejected,l),d&&r.addMatcher(g.settled,d),r.exposeCaseReducer(t,{fulfilled:o||Rn,pending:c||Rn,rejected:l||Rn,settled:d||Rn})}function Rn(){}function Ct(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}const ni={quinn:{level1:{level:1,hp:8,maxHp:8,ac:17,surgeValue:4,attackBonus:6,damage:2},level2:{level:2,hp:10,maxHp:10,ac:18,surgeValue:5,attackBonus:7,damage:2}},vistra:{level1:{level:1,hp:10,maxHp:10,ac:18,surgeValue:5,attackBonus:8,damage:2},level2:{level:2,hp:12,maxHp:12,ac:19,surgeValue:6,attackBonus:9,damage:2}},keyleth:{level1:{level:1,hp:10,maxHp:10,ac:18,surgeValue:5,attackBonus:7,damage:2},level2:{level:2,hp:12,maxHp:12,ac:19,surgeValue:6,attackBonus:8,damage:2}},tarak:{level1:{level:1,hp:8,maxHp:8,ac:17,surgeValue:4,attackBonus:7,damage:2},level2:{level:2,hp:10,maxHp:10,ac:18,surgeValue:5,attackBonus:8,damage:2}},haskan:{level1:{level:1,hp:6,maxHp:6,ac:14,surgeValue:3,attackBonus:4,damage:1},level2:{level:2,hp:8,maxHp:8,ac:15,surgeValue:4,attackBonus:5,damage:1}}},ri=5,uc={kobold:{attackBonus:5,damage:1},snake:{attackBonus:4,damage:1},cultist:{attackBonus:5,damage:1}},Mn=[{id:"kobold",name:"Kobold Dragonshield",ac:14,hp:1,maxHp:1,xp:1,imagePath:"assets/Monster_KoboldDragonshield.png"},{id:"snake",name:"Snake",ac:12,hp:1,maxHp:1,xp:1,imagePath:"assets/Monster_Snake.png"},{id:"cultist",name:"Cultist",ac:13,hp:2,maxHp:2,xp:1,imagePath:"assets/Monster_Cultist.png"}],fc=["kobold","kobold","kobold","snake","snake","snake","cultist","cultist","cultist"],Mt=[{id:"quinn",name:"Quinn",heroClass:"Cleric",imagePath:"assets/Hero_Cleric_Quinn.png",speed:5,attack:{name:"Mace",attackBonus:6,damage:2,range:1},hp:8,maxHp:8,ac:17},{id:"vistra",name:"Vistra",heroClass:"Fighter",imagePath:"assets/Hero_Fighter_Vistra.png",speed:5,attack:{name:"Warhammer",attackBonus:8,damage:2,range:1},hp:10,maxHp:10,ac:18},{id:"keyleth",name:"Keyleth",heroClass:"Paladin",imagePath:"assets/Hero_Paladin_Keyleth.png",speed:6,attack:{name:"Longsword",attackBonus:7,damage:2,range:1},hp:10,maxHp:10,ac:18},{id:"tarak",name:"Tarak",heroClass:"Rogue",imagePath:"assets/Hero_Rogue_Tarak.png",speed:6,attack:{name:"Short Sword",attackBonus:7,damage:2,range:1},hp:8,maxHp:8,ac:17},{id:"haskan",name:"Haskan",heroClass:"Wizard",imagePath:"assets/Hero_Wizard_Haskan.png",speed:6,attack:{name:"Quarterstaff",attackBonus:4,damage:1,range:1},hp:6,maxHp:6,ac:14}],vc=[{x:1,y:2},{x:2,y:2},{x:3,y:2},{x:3,y:3},{x:3,y:4},{x:1,y:5},{x:2,y:5},{x:3,y:5}],ai=[{tileType:"tile-2exit-a",imagePath:"assets/Tile_Black_x2_01.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-2exit-b",imagePath:"assets/Tile_Black_x2_02.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-2exit-c",imagePath:"assets/Tile_Black_x2_03.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-3exit-a",imagePath:"assets/Tile_Black_x3_01.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-3exit-b",imagePath:"assets/Tile_Black_x3_02.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-3exit-c",imagePath:"assets/Tile_Black_x3_03.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-4exit-a",imagePath:"assets/Tile_Black_x4_01.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-4exit-b",imagePath:"assets/Tile_Black_x4_02.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}}],hc=["tile-2exit-a","tile-2exit-b","tile-2exit-c","tile-3exit-a","tile-3exit-b","tile-3exit-c","tile-4exit-a","tile-4exit-b"],pc={id:"start-tile",tileType:"start",position:{col:0,row:0},rotation:0,edges:{north:"unexplored",south:"unexplored",east:"unexplored",west:"unexplored"}},si=[{id:1,name:"Healing Hymn",type:"utility",heroClass:"Cleric",description:"You sing a soothing song that seals the wounds of you and your allies.",rule:`Use this power during your Hero Phase.
You and one other Hero on your tile regain 2 Hit Points.`,isCustomAbility:!0},{id:2,name:"Cleric's Shield",type:"at-will",heroClass:"Cleric",description:"You utter a minor defensive prayer as you strike your foe.",rule:`Attack one adjacent Monster.
Hit or Miss: Choose 1 Hero on your tile. That Hero gains a +2 bonus to AC until you use this power again.`,attackBonus:6,damage:1},{id:3,name:"Righteous Advance",type:"at-will",heroClass:"Cleric",description:"Your attack grants your ally time to advance.",rule:`Attack one adjacent Monster.
Hit or Miss: One Hero on your tile moves 2 squares.`,attackBonus:6,damage:1},{id:4,name:"Sacred Flame",type:"at-will",heroClass:"Cleric",description:"Sacred light shines from above, searing a single enemy with holy radiance.",rule:`Attack one Monster within 1 tile of you.
If you hit, choose yourself or one Hero on your tile. That Hero gains 1 Hit Point.`,attackBonus:6,damage:1},{id:5,name:"Blade Barrier",type:"daily",heroClass:"Cleric",description:"You conjure a wall of whirling blades to cut apart advancing foes.",rule:`Choose a tile within 2 tiles of you. Place five Blade Barrier tokens on five different squares on that tile.
When a Monster is placed on a square with a Blade Barrier token, remove that token and deal 1 damage to the Monster.`},{id:6,name:"Cause Fear",type:"daily",heroClass:"Cleric",description:"Your holy symbol ignites with divine light, slamming your foes with uncontrollable terror.",rule:`Choose a tile within 1 tile of you. Each ally on that tile adjacent to a Monster can make an At-Will attack with a +2 bonus to the Attack roll.
After the attacks, place each Monster remaining on a tile within 2 tiles of you.`},{id:7,name:"Wrathful Thunder",type:"daily",heroClass:"Cleric",description:"When you strike, a shattering thunderclap fills the room.",rule:`Attack one adjacent Monster.
After the attack, choose one Monster on your tile. Pass that Monster's card to the player on your right. That player now controls the Monster.`,attackBonus:6,damage:3},{id:8,name:"Astral Refuge",type:"utility",heroClass:"Cleric",description:"You send an ally to a safe refuge in the Astral Sea for a short time.",rule:`Use this power at the start of any Villain Phase.
Choose one Hero within 2 tiles of you. Remove that Hero from the tile. At the start of that player's next Hero Phase, that player places the Hero on any tile.`},{id:9,name:"Command",type:"utility",heroClass:"Cleric",description:"You utter a single word that your foe must obey.",rule:`Use this power during your Hero Phase.
Choose one Monster on your tile. Place that Monster on a tile within 2 tiles of you.`},{id:10,name:"Perseverance",type:"utility",heroClass:"Cleric",description:"A house does not stand with just a single wall.",rule:`Use this power when any player draws an Encounter Card.
The cost to cancel the Encounter Card is reduced by the number of Heroes on your tile, including your own Hero.`},{id:11,name:"Dwarven Resilience",type:"utility",heroClass:"Dwarf",description:"Your dwarven heritage grants you uncommonly strong health.",rule:`Use this power during your Hero Phase instead of moving.
You regain 4 Hit Points.`,isCustomAbility:!0},{id:12,name:"Charge",type:"at-will",heroClass:"Fighter",description:"You rush into combat.",rule:"Move up to your speed, then attack one adjacent Monster.",attackBonus:8,damage:1},{id:13,name:"Reaping Strike",type:"at-will",heroClass:"Fighter",description:"You punctuate your scything attacks with wicked jabs and small cutting blows that slip through your enemy's defenses.",rule:"Attack one adjacent Monster twice.",attackBonus:4,damage:1},{id:14,name:"Sure Strike",type:"at-will",heroClass:"Fighter",description:"You trade power for precision.",rule:"Attack one adjacent Monster.",attackBonus:11,damage:1},{id:15,name:"Comeback Strike",type:"daily",heroClass:"Fighter",description:"A timely strike gives you the strength to fight on.",rule:`Attack one adjacent Monster.
If you hit, you regain 2 hit points.
If you miss, do not flip this card over.`,attackBonus:7,damage:2},{id:16,name:"Into the Fray",type:"daily",heroClass:"Fighter",description:"You unleash a fierce battle cry as you leap boldly into battle.",rule:"Place your Hero adjacent to any Hero within 2 tiles of you. Attack one adjacent Monster.",attackBonus:7,damage:3},{id:17,name:"Taunting Advance",type:"daily",heroClass:"Fighter",description:"You rush forward and call forth your enemy.",rule:"Move your speed. Then choose a Monster within 2 tiles of you. Place that Monster adjacent to your Hero and attack it.",attackBonus:8,damage:3},{id:18,name:"Inspiring Advice",type:"utility",heroClass:"Fighter",description:"You encourage your teammate to fight on.",rule:`Use when a Hero misses a Monster with an attack.
The Hero rerolls the attack.
If the attack misses, do not flip this card over.`},{id:19,name:"One for the Team",type:"utility",heroClass:"Fighter",description:"You protect your ally from the hazards of the dungeon.",rule:`Use when any player draws an Encounter Card.
Resolve the Encounter Card as if you drew it.`},{id:20,name:"To Arms!",type:"utility",heroClass:"Fighter",description:"You rally your companions to meet your foe head on.",rule:`Use when a new Monster is placed on a tile.
You and one Hero on your tile can move your speed.`},{id:21,name:"Lay On Hands",type:"utility",heroClass:"Paladin",description:"Your divine touch instantly heals wounds.",rule:"One adjacent Hero regains 2 hit points.",isCustomAbility:!0},{id:22,name:"Divine Challenge",type:"at-will",heroClass:"Paladin",description:"You boldly confront a nearby enemy.",rule:`Choose one Monster within 1 tile of you. Place that Monster adjacent to your Hero.
Attack one adjacent Monster.`,attackBonus:8,damage:1},{id:23,name:"Holy Strike",type:"at-will",heroClass:"Paladin",description:"You strike an enemy, igniting it with holy light.",rule:`Attack one adjacent Monster.
If you started your Hero Phase adjacent to the Monster, deal +1 damage if you hit.`,attackBonus:8,damage:1},{id:24,name:"Valiant Strike",type:"at-will",heroClass:"Paladin",description:"The odds against you add strength to your attack.",rule:`Attack one adjacent Monster.
When making this attack, you get a +1 bonus to attack for each Monster adjacent to your Hero.`,attackBonus:8,damage:1},{id:25,name:"Arcing Strike",type:"daily",heroClass:"Paladin",description:"You swing your weapon in a wide arc.",rule:"Attack one or two adjacent Monsters.",attackBonus:9,damage:3},{id:26,name:"Benign Transposition",type:"daily",heroClass:"Paladin",description:"You call upon divine power to switch places with an ally to strike a foe.",rule:`Choose 1 Hero within 2 tiles of you. You swap positions with that Hero.
After swapping positions, attack one adjacent Monster.`,attackBonus:8,damage:3},{id:27,name:"Righteous Smite",type:"daily",heroClass:"Paladin",description:"Your righteous attack fills your party with preternatural resolve.",rule:`Attack one adjacent Monster.
Hit or Miss: All Heroes on your tile regain 1 Hit Point.`,attackBonus:9,damage:3},{id:28,name:"Bravery",type:"utility",heroClass:"Paladin",description:"Your bravery gives you the power to fight on.",rule:`Use when a Monster within 1 tile of you activates during any player's Villain Phase.
Place your Hero adjacent to that Monster. You regain 1 hit point.`},{id:29,name:"Noble Shield",type:"utility",heroClass:"Paladin",description:"You quickly throw up your shield, protecting your friends from harm at your expense.",rule:`Use when a Monster targets you and at least one additional Hero with the same attack.
You are the only target of the attack, but the attack roll against you is automatically a 20 and cannot be rerolled.`},{id:30,name:"Virtue's Touch",type:"utility",heroClass:"Paladin",description:"Your gentle touch removes affliction.",rule:"Choose one adjacent Hero. End one condition on that Hero."},{id:31,name:"Furious Assault",type:"utility",heroClass:"Half-Orc",description:"Your wrath burns inside you, giving strength to your next attack.",rule:`Use this power when you hit a Monster with an attack.
The Monster takes +1 damage.`,isCustomAbility:!0},{id:32,name:"Distracting Jab",type:"at-will",heroClass:"Rogue",description:"You escape the clutches of your foe as it reacts to your attack.",rule:`Attack one adjacent Monster.
If you hit, move the Monster 1 square.
After the attack, move your speed.`,attackBonus:7,damage:1},{id:33,name:"Lucky Strike",type:"at-will",heroClass:"Rogue",description:"They fall for it if you're lucky, and then they fall.",rule:`Attack one Monster within 1 tile of you.
If you hit and your attack roll is an even number, deal +1 damage.`,attackBonus:7,damage:1},{id:34,name:"Positioning Shot",type:"at-will",heroClass:"Rogue",description:"To avoid your vicious attack, your enemy leaps exactly where you want it to be.",rule:`Attack one Monster within 2 tiles of you.
Hit or Miss: Place that Monster on any square on your tile or on an adjacent tile.`,attackBonus:7,damage:1},{id:35,name:"Acrobatic Onslaught",type:"daily",heroClass:"Rogue",description:"After a quick strike, you leap through the air, lining up your next target.",rule:`Attack one adjacent Monster.
Hit or Miss: Place your Hero on any tile within 2 tiles of where you started, and then use an At-Will power immediately.`,attackBonus:7,damage:2},{id:36,name:"King's Castle",type:"daily",heroClass:"Rogue",description:"It's hard to get the little guy when he's behind an ally who can crush plate armor in his teeth.",rule:`Swap positions with one Hero within 1 tile of you.
Attack 1 Monster within 2 tiles of you.`,attackBonus:7,damage:3},{id:37,name:"Tornado Strike",type:"daily",heroClass:"Rogue",description:"Your weapon becomes a blur as you make swift, sweeping attacks.",rule:`Attack four times. Each attack can be against any Monster on your tile.
After the attacks, place your Hero on any square on your tile.`,attackBonus:7,damage:1},{id:38,name:"Distant Diversion",type:"utility",heroClass:"Rogue",description:"The monster turns to investigate the sound of a thrown pebble.",rule:`Choose one Monster within 3 tiles of you.
Place that Monster onto an adjacent tile.`},{id:39,name:"Practiced Evasion",type:"utility",heroClass:"Rogue",description:"A quick flip and quicker fingers disables the trap.",rule:`Use this power when you are hit by an attack from a Trap or Event Attack Encounter Card.
The attack misses. If the attack was from a Trap Encounter Card, you get a free Disable check against that Trap.`},{id:40,name:"Tumbling Escape",type:"utility",heroClass:"Rogue",description:"You nimbly roll out of harm's way.",rule:`Use this power when a Monster hits you with an attack.
The attack misses. Place your Hero on any tile within 1 tile of where you started.`},{id:41,name:"Hurled Breath",type:"daily",heroClass:"Dragonborn",description:"You hurl your draconic breath, engulfing your foes a short distance away.",rule:`Choose a tile within 2 tiles of you. Attack each Monster on that tile.
This attack does not count as an attack action.`,attackBonus:5,damage:1,isCustomAbility:!0},{id:42,name:"Arc Lightning",type:"at-will",heroClass:"Wizard",description:"Lightning leaps from your outstretched hands, blasting your foes.",rule:"Attack up to two Monsters. Each monster can be on your tile or any tile within 1 tile of you.",attackBonus:7,damage:1},{id:43,name:"Hypnotism",type:"at-will",heroClass:"Wizard",description:"Your enemy's mouth goes slack as your magic takes control.",rule:"Choose a Monster within 1 tile of you. Move that Monster 1 tile. If it ends adjacent to another Monster, make an attack against the second Monster.",attackBonus:9,damage:1},{id:44,name:"Ray of Frost",type:"at-will",heroClass:"Wizard",description:"A blistering ray of white frost streaks to your target, slowing its reactions.",rule:"Attack one Monster on your tile or on any tile within 2 tiles of you.",attackBonus:7,damage:1},{id:45,name:"Flaming Sphere",type:"daily",heroClass:"Wizard",description:"You conjure a rolling ball of fire and control where it goes.",rule:`Place 3 Flaming Sphere tokens in a stack on any square within 1 tile of you.
Instead of moving during your Hero phase, you can move the Flaming Sphere stack 1 tile.
At the end of your Hero Phase, you can remove 1 Flaming Sphere token and deal 1 damage to each Monster on that tile.`},{id:46,name:"Shock Sphere",type:"daily",heroClass:"Wizard",description:"You hurl a crackling orb of lightning, engulfing your foes in its electric embrace.",rule:"Choose a tile within 2 tiles of you. Attack each Monster on that tile.",attackBonus:9,damage:2},{id:47,name:"Spectral Ram",type:"daily",heroClass:"Wizard",description:"You bash your foe with arcane force that sends it reeling.",rule:`Attack one Monster within 2 tiles of you.
Hit or Miss: Place the Monster onto any tile within 2 tiles of where it started.`,attackBonus:9,damage:3},{id:48,name:"Invisibility",type:"utility",heroClass:"Wizard",description:"You vanish from sight.",rule:`Use this power during your Hero Phase.
Until the start of your next Hero Phase, you do not count as the closest Hero for any Monster's tactics.
Monster attacks that attack every Hero on a tile still attack you.`},{id:49,name:"Mirror Image",type:"utility",heroClass:"Wizard",description:"You create three duplicate images of yourself.",rule:`Use this power during your Hero Phase.
Place 3 Mirror Image tokens on your Hero Card.
For each Mirror Image token on your Hero Card, you gain +2 AC. Whenever a Monster misses you with an attack, remove 1 Mirror Image token.`},{id:50,name:"Wizard Eye",type:"utility",heroClass:"Wizard",description:"You see through a magical hovering eye, allowing you to explore from a distance.",rule:`Use this power during your Hero Phase.
Place the Wizard Eye token on a tile within 1 tile of you.
Instead of moving during your Hero Phase, you can move the Wizard Eye marker 1 tile.
During your Exploration Phase, you can explore as if your Hero was on any unexplored edge on the Wizard Eye's tile.`}],ii={quinn:1,vistra:11,tarak:31,keyleth:21,haskan:41};function $r(e){const n={Cleric:["Cleric"],Fighter:["Fighter","Dwarf"],Paladin:["Paladin"],Rogue:["Rogue","Half-Orc"],Wizard:["Wizard","Dragonborn"]}[e]||[];return si.filter(r=>n.includes(r.heroClass))}function mc(e){return $r(e).filter(t=>t.type==="at-will")}function gc(e){return $r(e).filter(t=>t.type==="daily")}function _c(e){return $r(e).filter(t=>t.type==="utility"&&!t.isCustomAbility)}function Qn(e){return si.find(t=>t.id===e)}function yc(e,t,n,r,a){const s=[t,n,...r,a];return{heroId:e,customAbility:t,utility:n,atWills:r,daily:a,cardStates:s.map(o=>({cardId:o,isFlipped:!1}))}}function wc(e,t){return{...e,cardStates:e.cardStates.map(n=>n.cardId===t?{...n,isFlipped:!0}:n)}}function kc(e,t){return{...e,dailyLevel2:t,cardStates:[...e.cardStates,{cardId:t,isFlipped:!1}]}}const bc={availableHeroes:Mt,selectedHeroes:[],heroEdgeMap:{},powerCardSelections:{},heroPowerCards:{}},oi=ti({name:"heroes",initialState:bc,reducers:{toggleHeroSelection:(e,t)=>{const n=t.payload,r=e.selectedHeroes.findIndex(a=>a.id===n);if(r>=0)e.selectedHeroes.splice(r,1),delete e.heroEdgeMap[n],delete e.powerCardSelections[n];else if(e.selectedHeroes.length<5){const a=e.availableHeroes.find(s=>s.id===n);a&&(e.selectedHeroes.push(a),e.powerCardSelections[n]={heroId:n,utility:null,atWills:[],daily:null})}},selectHeroFromEdge:(e,t)=>{const{heroId:n,edge:r}=t.payload,a=e.selectedHeroes.findIndex(s=>s.id===n);if(a>=0)e.heroEdgeMap[n]===r&&(e.selectedHeroes.splice(a,1),delete e.heroEdgeMap[n],delete e.powerCardSelections[n]);else if(e.selectedHeroes.length<5){const s=e.availableHeroes.find(o=>o.id===n);s&&(e.selectedHeroes.push(s),e.heroEdgeMap[n]=r,e.powerCardSelections[n]={heroId:n,utility:null,atWills:[],daily:null})}},clearSelection:e=>{e.selectedHeroes=[],e.heroEdgeMap={},e.powerCardSelections={},e.heroPowerCards={}},selectUtilityCard:(e,t)=>{const{heroId:n,cardId:r}=t.payload,a=e.powerCardSelections[n];a&&(a.utility=a.utility===r?null:r)},toggleAtWillCard:(e,t)=>{const{heroId:n,cardId:r}=t.payload,a=e.powerCardSelections[n];if(a){const s=a.atWills.indexOf(r);s>=0?a.atWills.splice(s,1):a.atWills.length<2&&a.atWills.push(r)}},selectDailyCard:(e,t)=>{const{heroId:n,cardId:r}=t.payload,a=e.powerCardSelections[n];a&&(a.daily=a.daily===r?null:r)},finalizePowerCardSelections:e=>{e.heroPowerCards={};for(const t of e.selectedHeroes){const n=e.powerCardSelections[t.id],r=ii[t.id];n&&r&&n.utility&&n.daily&&n.atWills.length===2?e.heroPowerCards[t.id]=yc(t.id,r,n.utility,n.atWills,n.daily):console.warn(`Hero ${t.id} has incomplete power card selection, skipping`)}},usePowerCard:(e,t)=>{const{heroId:n,cardId:r}=t.payload,a=e.heroPowerCards[n];a&&(e.heroPowerCards[n]=wc(a,r))},addLevel2Daily:(e,t)=>{const{heroId:n,cardId:r}=t.payload,a=e.heroPowerCards[n];a&&(e.heroPowerCards[n]=kc(a,r))}}}),{toggleHeroSelection:of,selectHeroFromEdge:xc,clearSelection:lf,selectUtilityCard:Sc,toggleAtWillCard:Ic,selectDailyCard:Tc,finalizePowerCardSelections:Cc,usePowerCard:Mc,addLevel2Daily:cf}=oi.actions,Ec=oi.reducer,vn={minX:1,maxX:3,minY:0,maxY:7,staircase:[{x:1,y:3},{x:2,y:3},{x:1,y:4},{x:2,y:4}]},Zt=4,Pc=4,Hc=8;function En(e){const{col:t,row:n}=e.position;if(e.tileType==="start")return{minX:0,maxX:3,minY:0,maxY:7};let r,a;return t>0?r=Pc+(t-1)*Zt:t<0?r=t*Zt:r=0,n>0?a=Hc+(n-1)*Zt:n<0?a=n*Zt:a=0,{minX:r,maxX:r+Zt-1,minY:a,maxY:a+Zt-1}}function bn(e,t){for(const n of t.tiles){const r=En(n);if(e.x>=r.minX&&e.x<=r.maxX&&e.y>=r.minY&&e.y<=r.maxY)return n}return null}function Ac(e){return e.x>=vn.minX&&e.x<=vn.maxX&&e.y>=vn.minY&&e.y<=vn.maxY}function li(e){return vn.staircase.some(t=>t.x===e.x&&t.y===e.y)}function Dc(e,t){return Ac(e)&&!li(e)}function Rc(e,t,n){return t.some(r=>r.position.x===e.x&&r.position.y===e.y&&r.heroId!==n)}function zc(e,t,n,r){const a=En(r),s=r.tileType==="start"?1:a.minX,o=e.y===a.minY,c=e.y===a.maxY,l=e.x===a.maxX,d=e.x===s,f=n<0?"north":n>0?"south":null,g=t<0?"west":t>0?"east":null;if(!f||!g)return!1;let p=!1,_=!1;return f==="north"&&o&&r.edges.north==="wall"&&(p=!0),f==="south"&&c&&r.edges.south==="wall"&&(p=!0),g==="east"&&l&&r.edges.east==="wall"&&(_=!0),g==="west"&&d&&r.edges.west==="wall"&&(_=!0),p&&_}function Oc(e,t,n,r){const a=r.x-n.x,s=r.y-n.y;if(a!==0&&s!==0)return!1;let o,c;return s<0?(o="north",c="south"):s>0?(o="south",c="north"):a>0?(o="east",c="west"):(o="west",c="east"),!(e.edges[o]!=="open"||t.edges[c]!=="open")}function ea(e,t){const n=[],r=[{dx:0,dy:-1,cardinal:!0},{dx:0,dy:1,cardinal:!0},{dx:-1,dy:0,cardinal:!0},{dx:1,dy:0,cardinal:!0},{dx:-1,dy:-1,cardinal:!1},{dx:1,dy:-1,cardinal:!1},{dx:-1,dy:1,cardinal:!1},{dx:1,dy:1,cardinal:!1}];if(!t){for(const s of r){const o={x:e.x+s.dx,y:e.y+s.dy};Dc(o)&&n.push(o)}return n}const a=bn(e,t);if(!a)return n;for(const s of r){const o={x:e.x+s.dx,y:e.y+s.dy},c=bn(o,t);if(c&&!(c.tileType==="start"&&(li(o)||o.x<1))){if(a.id===c.id){if(!s.cardinal&&zc(e,s.dx,s.dy,a))continue;n.push(o);continue}s.cardinal&&Oc(a,c,e,o)&&n.push(o)}}return n}function Nc(e,t,n,r,a){const s=[],o=new Set,c=[{pos:e,distance:0}];for(o.add(`${e.x},${e.y}`);c.length>0;){const l=c.shift();if(!l)break;if(l.distance>0&&!Rc(l.pos,n,r)&&s.push(l.pos),l.distance<t){const d=ea(l.pos,a);for(const f of d){const g=`${f.x},${f.y}`;o.has(g)||(o.add(g),c.push({pos:f,distance:l.distance+1}))}}}return s}function jc(e,t){return t.some(n=>n.x===e.x&&n.y===e.y)}const Bc={north:[{x:1,y:0},{x:2,y:0},{x:3,y:0}],south:[{x:1,y:7},{x:2,y:7},{x:3,y:7}],east:[{x:3,y:0},{x:3,y:1},{x:3,y:2},{x:3,y:5},{x:3,y:6},{x:3,y:7}],west:[{x:1,y:0},{x:1,y:1},{x:1,y:2},{x:1,y:5},{x:1,y:6},{x:1,y:7}]};function Lc(e,t){return Bc[t].some(r=>r.x===e.x&&r.y===e.y)}function ta(e){return{north:"south",south:"north",east:"west",west:"east"}[e]}function Fc(e,t){const n=t.tiles.find(r=>r.id==="start-tile");if(!n)return null;for(const r of t.unexploredEdges)if(r.tileId===n.id&&Lc(e.position,r.direction))return r;return null}function qc(e,t){const{col:n,row:r}=e.position;switch(t){case"north":return{col:n,row:r-1};case"south":return{col:n,row:r+1};case"east":return{col:n+1,row:r};case"west":return{col:n-1,row:r}}}function Uc(e){const t=ta(e);return{south:0,west:90,north:180,east:270}[t]}function Wc(e){return ai.find(t=>t.tileType===e)}function Yc(e,t,n){const r=n.tiles.find(f=>f.id===e.tileId);if(!r)return null;const a=qc(r,e.direction),s=Uc(e.direction);if(!Wc(t))return null;const c=`tile-${n.tiles.length}`,d={north:"unexplored",south:"unexplored",east:"unexplored",west:"unexplored",[ta(e.direction)]:"open"};return{id:c,tileType:t,position:a,rotation:s,edges:d}}function Hr(){return{tiles:[{...pc}],unexploredEdges:[{tileId:"start-tile",direction:"north"},{tileId:"start-tile",direction:"south"},{tileId:"start-tile",direction:"east"},{tileId:"start-tile",direction:"west"}],tileDeck:[]}}function Vc(e,t=Math.random){const n=[...e];for(let r=n.length-1;r>0;r--){const a=Math.floor(t()*(r+1));[n[r],n[a]]=[n[a],n[r]]}return n}function Gc(e,t=Math.random){return Vc(e,t)}function Xc(e){if(e.length===0)return{drawnTile:null,remainingDeck:[]};const[t,...n]=e;return{drawnTile:t,remainingDeck:n}}function Kc(e,t,n){const r=e.unexploredEdges.filter(l=>!(l.tileId===t.tileId&&l.direction===t.direction)),a=ta(t.direction),o=["north","south","east","west"].filter(l=>l!==a&&n.edges[l]==="unexplored").map(l=>({tileId:n.id,direction:l}));return{tiles:[...e.tiles.map(l=>l.id===t.tileId?{...l,edges:{...l.edges,[t.direction]:"open"}}:l),n],unexploredEdges:[...r,...o],tileDeck:e.tileDeck}}function ci(e,t=Math.random){const n=[...e];for(let r=n.length-1;r>0;r--){const a=Math.floor(t()*(r+1));[n[r],n[a]]=[n[a],n[r]]}return n}function Qc(e=Math.random){return{drawPile:ci([...fc],e),discardPile:[]}}function Zc(e,t=Math.random){if(e.drawPile.length===0){if(e.discardPile.length===0)return{monster:null,deck:e};const a=ci(e.discardPile,t);return{monster:a[0],deck:{drawPile:a.slice(1),discardPile:[]}}}const[n,...r]=e.drawPile;return{monster:n,deck:{drawPile:r,discardPile:e.discardPile}}}function Jc(e,t){return{drawPile:e.drawPile,discardPile:[...e.discardPile,t]}}function na(e){return Mn.find(t=>t.id===e)}function $c(e,t,n,r,a){const s=na(e);return s?{monsterId:e,instanceId:`${e}-${a}`,position:t,currentHp:s.hp,controllerId:n,tileId:r}:null}const ed=4,Ka=Math.floor(ed/2);function td(){return{x:Ka,y:Ka}}function nd(e,t){return e.currentHp===0&&t.healingSurges>0}function rd(e,t){return e.currentHp===0&&t.healingSurges===0}function ad(e,t){const n=e.surgeValue;return{heroState:{...e,currentHp:Math.min(n,e.maxHp)},resources:{...t,healingSurges:t.healingSurges-1}}}function di(e=Math.random){return Math.floor(e()*20)+1}function sd(e,t,n=Math.random){const r=di(n),a=r+e.attackBonus,s=r===20||a>=t,o=r===20;return{roll:r,attackBonus:e.attackBonus,total:a,targetAC:t,isHit:s,damage:s?e.damage:0,isCritical:o}}function id(e,t,n){return e.level===1&&t===20&&n.xp>=ri}function od(e,t){const n=ni[e.heroId];if(!n)return console.warn(`Hero levels not found for heroId: ${e.heroId}. Level up skipped.`),{heroState:e,resources:t};const r=n.level2,a=e.maxHp-e.currentHp;return{heroState:{...e,level:2,maxHp:r.maxHp,currentHp:Math.max(1,r.maxHp-a),ac:r.ac,surgeValue:r.surgeValue,attackBonus:r.attackBonus},resources:{...t,xp:t.xp-ri}}}function ld(e,t,n){return t===20&&e===2?n+1:n}function Ar(e,t){const n=Math.abs(e.x-t.x),r=Math.abs(e.y-t.y);return n<=1&&r<=1&&(n>0||r>0)}function cd(e){return na(e)?.ac}function dd(e,t){const n=t.tiles.find(a=>a.id===e.tileId);if(!n)return null;const r=En(n);return{x:r.minX+e.position.x,y:r.minY+e.position.y}}function ud(e,t,n,r){return r?bn(e,r)?t.filter(s=>{const o=dd(s,r);return o?Ar(e,o):!1}):[]:t.filter(s=>s.tileId===n&&Ar(e,s.position))}function Zn(e,t){const n=t.tiles.find(a=>a.id===e.tileId);if(!n)return null;const r=En(n);return{x:r.minX+e.position.x,y:r.minY+e.position.y}}function Qa(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function fd(e,t,n,r){const a=Zn(e,r);if(!a)return null;const s=t.filter(d=>{const f=n[d.heroId];return f!==void 0&&f>0});if(s.length===0)return null;const o=new Set,c=[{pos:a,distance:0}];o.add(`${a.x},${a.y}`);let l=null;for(;c.length>0;){const d=c.shift();for(const g of s)g.position.x===d.pos.x&&g.position.y===d.pos.y&&(!l||d.distance<l.distance)&&(l={hero:g,distance:d.distance});if(l&&l.distance<d.distance)break;const f=ea(d.pos,r);for(const g of f){const p=`${g.x},${g.y}`;o.has(p)||(o.add(p),c.push({pos:g,distance:d.distance+1}))}}return l}function vd(e,t,n,r){const a=Zn(e,r);if(!a)return null;const s=t.filter(o=>{const c=n[o.heroId];return c!==void 0&&c>0});for(const o of s)if(Ar(a,o.position))return o;return null}function hd(e,t,n,r,a){const s=Zn(e,a);if(!s)return null;const c=ea(s,a).filter(f=>{if(n.some(p=>p.position.x===f.x&&p.position.y===f.y))return!1;for(const p of r){if(p.instanceId===e.instanceId)continue;const _=Zn(p,a);if(_&&_.x===f.x&&_.y===f.y)return!1}return!0});if(c.length===0)return null;let l=c[0],d=Qa(l,t);for(const f of c){const g=Qa(f,t);g<d&&(d=g,l=f)}return l}function pd(e,t,n=Math.random){const r=uc[e];if(!r)return{roll:1,attackBonus:0,total:1,targetAC:t,isHit:!1,damage:0,isCritical:!1};const a=di(n),s=a+r.attackBonus,o=a===20||s>=t,c=a===20;return{roll:a,attackBonus:r.attackBonus,total:s,targetAC:t,isHit:o,damage:o?r.damage:0,isCritical:c}}function md(e,t,n,r,a,s,o=Math.random){const c=vd(e,t,n,s);if(c){const f=r[c.heroId]??10,g=pd(e.monsterId,f,o);return{type:"attack",targetId:c.heroId,result:g}}const l=fd(e,t,n,s);if(!l)return{type:"none"};const d=hd(e,l.hero.position,t,a,s);return d?{type:"move",destination:d}:{type:"none"}}function gd(e,t,n){const r=n.tiles.find(s=>s.id===t);if(!r)return null;const a=En(r);return{x:e.x-a.minX,y:e.y-a.minY}}function _d(e,t){return bn(e,t)?.id??null}const Dr={currentHeroIndex:0,currentPhase:"hero-phase",turnNumber:1},jn={actionsTaken:[],canMove:!0,canAttack:!0},Rr={monstersDefeated:0,monstersToDefeat:2,objective:"Defeat 2 monsters"},zr={xp:0,healingSurges:2},yd={currentScreen:"character-select",heroTokens:[],turnState:{...Dr},validMoveSquares:[],showingMovement:!1,dungeon:Hr(),monsterDeck:{drawPile:[],discardPile:[]},monsters:[],monsterInstanceCounter:0,recentlySpawnedMonsterId:null,attackResult:null,attackTargetId:null,attackName:null,heroHp:[],monsterAttackResult:null,monsterAttackTargetId:null,monsterAttackerId:null,villainPhaseMonsterIndex:0,monsterMoveActionId:null,heroTurnActions:{...jn},scenario:{...Rr},partyResources:{...zr},defeatedMonsterXp:null,defeatedMonsterName:null,leveledUpHeroId:null,levelUpOldStats:null,healingSurgeUsedHeroId:null,healingSurgeHpRestored:null,defeatReason:null};function Za(e,t){const n=[...e.actionsTaken,t],r=n.filter(c=>c==="move").length,a=n.filter(c=>c==="attack").length,s=a===0,o=r<2&&!(r===1&&a===1);return{actionsTaken:n,canMove:o,canAttack:s}}function wd(e){const{actionsTaken:t}=e,n=t.filter(a=>a==="move").length,r=t.filter(a=>a==="attack").length;return n>=1&&r>=1||n>=2}function kd(e){let t=e;return()=>(t=t*1103515245+12345&2147483647,t/2147483647)}function bd(e,t=Math.random){const n=[...e];for(let r=n.length-1;r>0;r--){const a=Math.floor(t()*(r+1));[n[r],n[a]]=[n[a],n[r]]}return n}const ui=ti({name:"game",initialState:yd,reducers:{startGame:(e,t)=>{const{heroIds:n,positions:r,seed:a}=t.payload;if(n.length===0||n.length>5)return;const s=a??Date.now();e.randomSeed=s;let o;const c=kd(s);r?o=r:o=bd(vc,c).slice(0,5),e.heroTokens=n.map((d,f)=>({heroId:d,position:o[f]})),e.turnState={...Dr},e.validMoveSquares=[],e.showingMovement=!1;const l=Hr();l.tileDeck=Gc([...hc],c),e.dungeon=l,e.monsterDeck=Qc(c),e.monsters=[],e.monsterInstanceCounter=0,e.recentlySpawnedMonsterId=null,e.attackResult=null,e.attackTargetId=null,e.attackName=null,e.heroHp=n.map(d=>{const f=ni[d];f||console.warn(`Hero levels not found for ${d}, using defaults`);const g=f?.level1,p=Mt.find(P=>P.id===d),_=g?.hp??p?.hp??8,x=g?.ac??p?.ac??17,O=g?.surgeValue??4,k=g?.attackBonus??p?.attack?.attackBonus??6;return{heroId:d,currentHp:_,maxHp:_,level:1,ac:x,surgeValue:O,attackBonus:k}}),e.monsterAttackResult=null,e.monsterAttackTargetId=null,e.monsterAttackerId=null,e.villainPhaseMonsterIndex=0,e.heroTurnActions={...jn},e.scenario={...Rr},e.partyResources={...zr},e.defeatedMonsterXp=null,e.defeatedMonsterName=null,e.leveledUpHeroId=null,e.levelUpOldStats=null,e.currentScreen="game-board"},setHeroPosition:(e,t)=>{const n=e.heroTokens.find(r=>r.heroId===t.payload.heroId);n&&(n.position=t.payload.position)},showMovement:(e,t)=>{if(e.turnState.currentPhase!=="hero-phase"||!e.heroTurnActions.canMove)return;const{heroId:n,speed:r}=t.payload,a=e.heroTokens.find(s=>s.heroId===n);a&&(e.validMoveSquares=Nc(a.position,r,e.heroTokens,n,e.dungeon),e.showingMovement=!0)},hideMovement:e=>{e.validMoveSquares=[],e.showingMovement=!1},moveHero:(e,t)=>{const{heroId:n,position:r}=t.payload;if(e.turnState.currentPhase!=="hero-phase"||!e.heroTurnActions.canMove||!jc(r,e.validMoveSquares))return;const a=e.heroTokens.find(s=>s.heroId===n);a&&(a.position=r,e.validMoveSquares=[],e.showingMovement=!1,e.heroTurnActions=Za(e.heroTurnActions,"move"))},resetGame:e=>{e.currentScreen="character-select",e.heroTokens=[],e.turnState={...Dr},e.randomSeed=void 0,e.validMoveSquares=[],e.showingMovement=!1,e.dungeon=Hr(),e.monsterDeck={drawPile:[],discardPile:[]},e.monsters=[],e.monsterInstanceCounter=0,e.recentlySpawnedMonsterId=null,e.attackResult=null,e.attackTargetId=null,e.attackName=null,e.heroHp=[],e.monsterAttackResult=null,e.monsterAttackTargetId=null,e.monsterAttackerId=null,e.villainPhaseMonsterIndex=0,e.monsterMoveActionId=null,e.heroTurnActions={...jn},e.scenario={...Rr},e.partyResources={...zr},e.defeatedMonsterXp=null,e.defeatedMonsterName=null,e.leveledUpHeroId=null,e.levelUpOldStats=null,e.healingSurgeUsedHeroId=null,e.healingSurgeHpRestored=null,e.defeatReason=null},endHeroPhase:e=>{if(e.turnState.currentPhase!=="hero-phase")return;e.recentlySpawnedMonsterId=null;const t=e.heroTokens[e.turnState.currentHeroIndex];if(!t)return;const n=Fc(t,e.dungeon);if(n&&e.dungeon.tileDeck.length>0){const{drawnTile:r,remainingDeck:a}=Xc(e.dungeon.tileDeck);if(r){const s=Yc(n,r,e.dungeon);if(s){e.dungeon=Kc(e.dungeon,n,s),e.dungeon.tileDeck=a;const{monster:o,deck:c}=Zc(e.monsterDeck);if(o){const l=td(),d=$c(o,l,t.heroId,s.id,e.monsterInstanceCounter);d&&(e.monsters.push(d),e.monsterInstanceCounter+=1,e.recentlySpawnedMonsterId=d.instanceId),e.monsterDeck=c}}}}e.turnState.currentPhase="exploration-phase"},endExplorationPhase:e=>{e.turnState.currentPhase==="exploration-phase"&&(e.turnState.currentPhase="villain-phase",e.villainPhaseMonsterIndex=0,e.monsterAttackResult=null,e.monsterAttackTargetId=null,e.monsterAttackerId=null,e.monsterMoveActionId=null)},endVillainPhase:e=>{if(e.turnState.currentPhase!=="villain-phase")return;e.villainPhaseMonsterIndex=0,e.monsterAttackResult=null,e.monsterAttackTargetId=null,e.monsterAttackerId=null,e.monsterMoveActionId=null,e.healingSurgeUsedHeroId=null,e.healingSurgeHpRestored=null,e.turnState.currentHeroIndex=(e.turnState.currentHeroIndex+1)%e.heroTokens.length,e.turnState.currentHeroIndex===0&&(e.turnState.turnNumber+=1),e.turnState.currentPhase="hero-phase",e.heroTurnActions={...jn};const t=e.heroTokens[e.turnState.currentHeroIndex]?.heroId;if(t){const n=e.heroHp.findIndex(r=>r.heroId===t);if(n!==-1){const r=e.heroHp[n];if(rd(r,e.partyResources)){const a=Mt.find(o=>o.id===t);a||console.warn(`Hero not found in AVAILABLE_HEROES for ID: ${t}`);const s=a?.name??"A hero";e.defeatReason=`${s} fell with no healing surges remaining.`,e.currentScreen="defeat";return}if(nd(r,e.partyResources)){const a=ad(r,e.partyResources);e.heroHp[n]=a.heroState,e.partyResources=a.resources,e.healingSurgeUsedHeroId=t,e.healingSurgeHpRestored=r.surgeValue}}}},dismissMonsterCard:e=>{e.recentlySpawnedMonsterId=null},setAttackResult:(e,t)=>{if(e.turnState.currentPhase!=="hero-phase"||!e.heroTurnActions.canAttack)return;const{result:n,targetInstanceId:r,attackName:a}=t.payload;e.attackTargetId=r,e.attackName=a,e.defeatedMonsterXp=null,e.defeatedMonsterName=null,e.leveledUpHeroId=null,e.levelUpOldStats=null;const s=e.heroTokens[e.turnState.currentHeroIndex]?.heroId,o=e.heroHp.find(l=>l.heroId===s),c=n.isHit&&o?ld(o.level,n.roll,n.damage):n.damage;if(e.attackResult={...n,damage:c},n.isHit&&c>0){const l=e.monsters.find(d=>d.instanceId===r);if(l&&(l.currentHp-=c,l.currentHp<=0)){const d=na(l.monsterId);d||console.warn(`Monster definition not found for ID: ${l.monsterId}`);const f=d?.xp??0;e.partyResources.xp+=f,e.defeatedMonsterXp=f,e.defeatedMonsterName=d?.name??l.monsterId,e.monsters=e.monsters.filter(g=>g.instanceId!==r),e.monsterDeck=Jc(e.monsterDeck,l.monsterId),e.scenario.monstersDefeated+=1,e.scenario.monstersDefeated>=e.scenario.monstersToDefeat&&(e.currentScreen="victory")}}if(o&&s&&id(o,n.roll,e.partyResources)){e.levelUpOldStats={...o};const l=od(o,e.partyResources),d=e.heroHp.findIndex(f=>f.heroId===s);d!==-1&&(e.heroHp[d]=l.heroState),e.partyResources=l.resources,e.leveledUpHeroId=s}e.heroTurnActions=Za(e.heroTurnActions,"attack")},dismissAttackResult:e=>{e.attackResult=null,e.attackTargetId=null,e.attackName=null},dismissDefeatNotification:e=>{e.defeatedMonsterXp=null,e.defeatedMonsterName=null},dismissLevelUpNotification:e=>{e.leveledUpHeroId=null,e.levelUpOldStats=null},setMonsters:(e,t)=>{e.monsters=t.payload},activateNextMonster:(e,t)=>{if(e.turnState.currentPhase!=="villain-phase")return;const n=e.heroTokens[e.turnState.currentHeroIndex]?.heroId;if(!n)return;const r=e.monsters.filter(d=>d.controllerId===n);if(e.villainPhaseMonsterIndex>=r.length)return;const a=r[e.villainPhaseMonsterIndex];if(!a)return;const s={},o={};for(const d of e.heroHp)s[d.heroId]=d.currentHp;for(const d of e.heroTokens){const f=Mt.find(g=>g.id===d.heroId);f&&(o[d.heroId]=f.ac)}const c=t.payload?.randomFn??Math.random,l=md(a,e.heroTokens,s,o,e.monsters,e.dungeon,c);if(l.type==="move"){const d=e.monsters.find(f=>f.instanceId===a.instanceId);if(d){const f=_d(l.destination,e.dungeon);if(f){const g=gd(l.destination,f,e.dungeon);g&&(d.position=g,d.tileId=f)}}e.monsterMoveActionId=a.instanceId}else if(l.type==="attack"&&(e.monsterAttackResult=l.result,e.monsterAttackTargetId=l.targetId,e.monsterAttackerId=a.instanceId,l.result.isHit&&l.result.damage>0)){const d=e.heroHp.find(f=>f.heroId===l.targetId);d&&(d.currentHp=Math.max(0,d.currentHp-l.result.damage),e.heroHp.every(g=>g.currentHp<=0)&&(e.currentScreen="defeat"))}e.villainPhaseMonsterIndex+=1},dismissMonsterAttackResult:e=>{e.monsterAttackResult=null,e.monsterAttackTargetId=null,e.monsterAttackerId=null},dismissMonsterMoveAction:e=>{e.monsterMoveActionId=null},dismissHealingSurgeNotification:e=>{e.healingSurgeUsedHeroId=null,e.healingSurgeHpRestored=null},setHeroHp:(e,t)=>{const{heroId:n,hp:r}=t.payload,a=e.heroHp.find(s=>s.heroId===n);a&&(a.currentHp=Math.max(0,r))},setPartyResources:(e,t)=>{const{xp:n,healingSurges:r}=t.payload;n!==void 0&&(e.partyResources.xp=n),r!==void 0&&(e.partyResources.healingSurges=r)}}}),{startGame:xd,setHeroPosition:df,showMovement:Ja,hideMovement:Sd,moveHero:Id,resetGame:ra,endHeroPhase:$a,endExplorationPhase:Td,endVillainPhase:es,dismissMonsterCard:Cd,setAttackResult:Md,dismissAttackResult:Ed,dismissDefeatNotification:Pd,setMonsters:uf,activateNextMonster:Hd,dismissMonsterAttackResult:Ad,dismissMonsterMoveAction:Dd,dismissHealingSurgeNotification:Rd,setHeroHp:ff,dismissLevelUpNotification:zd,setPartyResources:vf}=ui.actions,Od=ui.reducer,Y=$l({reducer:{heroes:Ec,game:Od}});typeof window<"u"&&(window.__REDUX_STORE__=Y);function Be(e){const t="/Ashardalon/",n=e.startsWith("/")?e.slice(1):e;return(t.endsWith("/")?t:t+"/")+n}var Nd=D('<span class="status-complete svelte-4rkta9">â Selection Complete</span>'),jd=D('<span class="status-incomplete svelte-4rkta9"> </span>'),Bd=D("<span> </span>"),Ld=D('<div class="card-stats svelte-4rkta9"><span> </span> <!></div>'),Fd=D('<div class="power-card custom-ability svelte-4rkta9" data-testid="custom-ability-card"><div class="card-header svelte-4rkta9"><span class="card-name svelte-4rkta9"> </span> <span class="card-type svelte-4rkta9"> </span></div> <p class="card-description svelte-4rkta9"> </p> <p class="card-rule svelte-4rkta9"> </p> <!></div>'),qd=D('<button><div class="card-header svelte-4rkta9"><span class="card-name svelte-4rkta9"> </span> <span class="card-type svelte-4rkta9"> </span></div> <p class="card-description svelte-4rkta9"> </p> <p class="card-rule svelte-4rkta9"> </p></button>'),Ud=D("<span> </span>"),Wd=D('<div class="card-stats svelte-4rkta9"><span> </span> <!></div>'),Yd=D('<button><div class="card-header svelte-4rkta9"><span class="card-name svelte-4rkta9"> </span> <span class="card-type svelte-4rkta9"> </span></div> <p class="card-description svelte-4rkta9"> </p> <p class="card-rule svelte-4rkta9"> </p> <!></button>'),Vd=D("<span> </span>"),Gd=D('<div class="card-stats svelte-4rkta9"><span> </span> <!></div>'),Xd=D('<button><div class="card-header svelte-4rkta9"><span class="card-name svelte-4rkta9"> </span> <span class="card-type svelte-4rkta9"> </span></div> <p class="card-description svelte-4rkta9"> </p> <p class="card-rule svelte-4rkta9"> </p> <!></button>'),Kd=D('<div class="power-card-selection svelte-4rkta9" data-testid="power-card-selection"><div class="modal-overlay svelte-4rkta9" role="button" tabindex="-1" aria-label="Close modal"></div> <div class="modal-content svelte-4rkta9"><div class="modal-header svelte-4rkta9"><h2 class="svelte-4rkta9"> </h2> <button class="close-button svelte-4rkta9" data-testid="close-power-selection">Ã</button></div> <div class="selection-status svelte-4rkta9" data-testid="selection-status"><!></div> <div class="card-sections svelte-4rkta9"><div class="card-section svelte-4rkta9"><h3 class="svelte-4rkta9">Custom Ability (Automatic)</h3> <div class="card-grid svelte-4rkta9"><!></div></div> <div class="card-section svelte-4rkta9"><h3 class="svelte-4rkta9">Utility Power (Select 1)</h3> <div class="card-grid svelte-4rkta9" data-testid="utility-cards"></div></div> <div class="card-section svelte-4rkta9"><h3 class="svelte-4rkta9">At-Will Powers (Select 2)</h3> <div class="card-grid svelte-4rkta9" data-testid="atwill-cards"></div></div> <div class="card-section svelte-4rkta9"><h3 class="svelte-4rkta9">Daily Power (Select 1)</h3> <div class="card-grid svelte-4rkta9" data-testid="daily-cards"></div></div></div> <div class="modal-footer svelte-4rkta9"><button class="done-button svelte-4rkta9" data-testid="done-power-selection">Done</button></div></div></div>');function Qd(e,t){Pe(t,!0);const n=X(()=>mc(t.hero.heroClass)),r=X(()=>gc(t.hero.heroClass)),a=X(()=>_c(t.hero.heroClass)),s=X(()=>ii[t.hero.id]),o=X(()=>i(s)?Qn(i(s)):null),c=X(()=>t.selection.utility!==null&&t.selection.atWills.length===2&&t.selection.daily!==null);function l(S){Y.dispatch(Sc({heroId:t.hero.id,cardId:S}))}function d(S){Y.dispatch(Ic({heroId:t.hero.id,cardId:S}))}function f(S){Y.dispatch(Tc({heroId:t.hero.id,cardId:S}))}function g(S){return t.selection.utility===S}function p(S){return t.selection.atWills.includes(S)}function _(S){return t.selection.daily===S}function x(S){return t.selection.atWills.includes(S)||t.selection.atWills.length<2}var O=Kd(),k=u(O);k.__click=function(...S){t.onClose?.apply(this,S)},k.__keydown=S=>S.key==="Escape"&&t.onClose();var P=v(k,2),H=u(P),E=u(H),T=u(E),N=v(E,2);N.__click=function(...S){t.onClose?.apply(this,S)};var z=v(H,2),K=u(z);{var q=S=>{var C=Nd();I(S,C)},V=S=>{var C=jd(),G=u(C);U(()=>w(G,`Select: 1 Utility (${t.selection.utility?"â":"â"}), 
          2 At-Wills (${t.selection.atWills.length??""}/2), 
          1 Daily (${t.selection.daily?"â":"â"})`)),I(S,C)};L(K,S=>{i(c)?S(q):S(V,!1)})}var $=v(z,2),Z=u($),ie=v(u(Z),2),me=u(ie);{var ye=S=>{var C=Fd(),G=u(C),re=u(G),de=u(re),le=v(re,2),ve=u(le),we=v(G,2),ke=u(we),ce=v(we,2),fe=u(ce),Te=v(ce,2);{var Je=st=>{var yt=Ld(),_e=u(yt),ue=u(_e),$e=v(_e,2);{var vt=et=>{var wt=Bd(),it=u(wt);U(()=>w(it,`Damage: ${i(o).damage??""}`)),I(et,wt)};L($e,et=>{i(o).damage!==void 0&&et(vt)})}U(()=>w(ue,`Attack: +${i(o).attackBonus??""}`)),I(st,yt)};L(Te,st=>{i(o).attackBonus!==void 0&&st(Je)})}U(()=>{w(de,i(o).name),w(ve,i(o).type),w(ke,i(o).description),w(fe,i(o).rule)}),I(S,C)};L(me,S=>{i(o)&&S(ye)})}var xe=v(Z,2),Ae=v(u(xe),2);Le(Ae,21,()=>i(a),S=>S.id,(S,C)=>{var G=qd();let re;G.__click=()=>l(i(C).id);var de=u(G),le=u(de),ve=u(le),we=v(le,2),ke=u(we),ce=v(de,2),fe=u(ce),Te=v(ce,2),Je=u(Te);U(st=>{re=Re(G,1,"power-card svelte-4rkta9",null,re,st),B(G,"data-testid",`utility-card-${i(C).id??""}`),w(ve,i(C).name),w(ke,i(C).type),w(fe,i(C).description),w(Je,i(C).rule)},[()=>({selected:g(i(C).id)})]),I(S,G)});var se=v(xe,2),ne=v(u(se),2);Le(ne,21,()=>i(n),S=>S.id,(S,C)=>{var G=Yd();let re;G.__click=()=>d(i(C).id);var de=u(G),le=u(de),ve=u(le),we=v(le,2),ke=u(we),ce=v(de,2),fe=u(ce),Te=v(ce,2),Je=u(Te),st=v(Te,2);{var yt=_e=>{var ue=Wd(),$e=u(ue),vt=u($e),et=v($e,2);{var wt=it=>{var Ft=Ud(),un=u(Ft);U(()=>w(un,`Damage: ${i(C).damage??""}`)),I(it,Ft)};L(et,it=>{i(C).damage!==void 0&&it(wt)})}U(()=>w(vt,`Attack: +${i(C).attackBonus??""}`)),I(_e,ue)};L(st,_e=>{i(C).attackBonus!==void 0&&_e(yt)})}U((_e,ue)=>{re=Re(G,1,"power-card svelte-4rkta9",null,re,_e),G.disabled=ue,B(G,"data-testid",`atwill-card-${i(C).id??""}`),w(ve,i(C).name),w(ke,i(C).type),w(fe,i(C).description),w(Je,i(C).rule)},[()=>({selected:p(i(C).id),disabled:!x(i(C).id)}),()=>!x(i(C).id)]),I(S,G)});var ge=v(se,2),R=v(u(ge),2);Le(R,21,()=>i(r),S=>S.id,(S,C)=>{var G=Xd();let re;G.__click=()=>f(i(C).id);var de=u(G),le=u(de),ve=u(le),we=v(le,2),ke=u(we),ce=v(de,2),fe=u(ce),Te=v(ce,2),Je=u(Te),st=v(Te,2);{var yt=_e=>{var ue=Gd(),$e=u(ue),vt=u($e),et=v($e,2);{var wt=it=>{var Ft=Vd(),un=u(Ft);U(()=>w(un,`Damage: ${i(C).damage??""}`)),I(it,Ft)};L(et,it=>{i(C).damage!==void 0&&it(wt)})}U(()=>w(vt,`Attack: +${i(C).attackBonus??""}`)),I(_e,ue)};L(st,_e=>{i(C).attackBonus!==void 0&&_e(yt)})}U(_e=>{re=Re(G,1,"power-card svelte-4rkta9",null,re,_e),B(G,"data-testid",`daily-card-${i(C).id??""}`),w(ve,i(C).name),w(ke,i(C).type),w(fe,i(C).description),w(Je,i(C).rule)},[()=>({selected:_(i(C).id)})]),I(S,G)});var M=v($,2),j=u(M);j.__click=function(...S){t.onClose?.apply(this,S)},U(()=>{w(T,`Select Power Cards for ${t.hero.name??""}`),j.disabled=!i(c)}),I(e,O),He()}Ze(["click","keydown"]);var Zd=D('<button><img class="hero-image svelte-1rwnzlz"/> <div class="hero-info svelte-1rwnzlz"><span class="hero-name svelte-1rwnzlz" data-testid="hero-name"> </span> <span class="hero-class svelte-1rwnzlz"> </span></div></button>'),Jd=D('<button><img class="hero-image svelte-1rwnzlz"/> <div class="hero-info svelte-1rwnzlz"><span class="hero-name svelte-1rwnzlz" data-testid="hero-name"> </span> <span class="hero-class svelte-1rwnzlz"> </span></div></button>'),$d=D('<span class="power-status complete svelte-1rwnzlz">â Powers Selected</span>'),eu=D('<span class="power-status incomplete svelte-1rwnzlz">Select Powers</span>'),tu=D('<button><img class="selected-hero-image svelte-1rwnzlz"/> <div class="selected-hero-info svelte-1rwnzlz"><span class="selected-hero-name svelte-1rwnzlz"> </span> <!></div></button>'),nu=D('<div class="selected-heroes svelte-1rwnzlz" data-testid="selected-heroes-list"></div>'),ru=D('<button><img class="hero-image svelte-1rwnzlz"/> <div class="hero-info svelte-1rwnzlz"><span class="hero-name svelte-1rwnzlz" data-testid="hero-name"> </span> <span class="hero-class svelte-1rwnzlz"> </span></div></button>'),au=D('<button><img class="hero-image svelte-1rwnzlz"/> <div class="hero-info svelte-1rwnzlz"><span class="hero-name svelte-1rwnzlz" data-testid="hero-name"> </span> <span class="hero-class svelte-1rwnzlz"> </span></div></button>'),su=D('<div class="character-select svelte-1rwnzlz" data-testid="character-select"><div class="edge-zone edge-top svelte-1rwnzlz" data-testid="edge-top"><div class="hero-row svelte-1rwnzlz" data-testid="hero-grid"></div></div> <div class="middle-section svelte-1rwnzlz"><div class="edge-zone edge-left svelte-1rwnzlz" data-testid="edge-left"><div class="hero-column svelte-1rwnzlz"></div></div> <div class="center-zone svelte-1rwnzlz" data-testid="center-zone"><h1 class="svelte-1rwnzlz">Select Your Heroes</h1> <p class="instructions svelte-1rwnzlz">Choose 1-5 heroes for your adventure</p> <p class="instructions svelte-1rwnzlz">Tap a hero from your edge of the table</p> <div class="selection-info svelte-1rwnzlz"><span data-testid="selected-count"> </span></div> <!> <button class="start-button svelte-1rwnzlz" data-testid="start-game-button">Start Adventure</button></div> <div class="edge-zone edge-right svelte-1rwnzlz" data-testid="edge-right"><div class="hero-column svelte-1rwnzlz"></div></div></div> <div class="edge-zone edge-bottom svelte-1rwnzlz" data-testid="edge-bottom"><div class="hero-row svelte-1rwnzlz"></div></div></div> <!>',1);function iu(e,t){Pe(t,!0);let n=F(pe([])),r=F(pe([])),a=F(pe({})),s=F(pe({})),o=F(null);It(()=>{const R=Y.subscribe(()=>{const j=Y.getState();b(n,j.heroes.selectedHeroes,!0),b(r,j.heroes.availableHeroes,!0),b(a,j.heroes.heroEdgeMap,!0),b(s,j.heroes.powerCardSelections,!0)}),M=Y.getState();return b(n,M.heroes.selectedHeroes,!0),b(r,M.heroes.availableHeroes,!0),b(a,M.heroes.heroEdgeMap,!0),b(s,M.heroes.powerCardSelections,!0),R});function c(R,M){return i(a)[R]===M}function l(R,M){const j=i(a)[R];return j!==void 0&&j!==M}function d(R,M){Y.dispatch(xc({heroId:R,edge:M}))}function f(){i(n).length>0&&p()&&(Y.dispatch(Cc()),Y.dispatch(xd({heroIds:i(n).map(R=>R.id)})))}function g(R){const M=i(s)[R];return M?M.utility!==null&&M.atWills.length===2&&M.daily!==null:!1}function p(){return i(n).every(R=>g(R.id))}function _(){return i(n).length>=1&&i(n).length<=5&&p()}function x(R){b(o,R,!0)}function O(){b(o,null)}var k=su(),P=Ie(k),H=u(P),E=u(H);Le(E,21,()=>i(r),R=>R.id,(R,M)=>{var j=Zd();let S;j.__click=()=>d(i(M).id,"top");var C=u(j),G=v(C,2),re=u(G),de=u(re),le=v(re,2),ve=u(le);U((we,ke,ce)=>{S=Re(j,1,"hero-card svelte-1rwnzlz",null,S,we),B(j,"data-testid",`hero-${i(M).id??""}-top`),j.disabled=ke,B(C,"src",ce),B(C,"alt",i(M).name),w(de,i(M).name),w(ve,i(M).heroClass)},[()=>({selected:c(i(M).id,"top"),unavailable:l(i(M).id,"top")}),()=>l(i(M).id,"top"),()=>Be(i(M).imagePath)]),I(R,j)});var T=v(H,2),N=u(T),z=u(N);Le(z,21,()=>i(r),R=>R.id,(R,M)=>{var j=Jd();let S;j.__click=()=>d(i(M).id,"left");var C=u(j),G=v(C,2),re=u(G),de=u(re),le=v(re,2),ve=u(le);U((we,ke,ce)=>{S=Re(j,1,"hero-card svelte-1rwnzlz",null,S,we),B(j,"data-testid",`hero-${i(M).id??""}-left`),j.disabled=ke,B(C,"src",ce),B(C,"alt",i(M).name),w(de,i(M).name),w(ve,i(M).heroClass)},[()=>({selected:c(i(M).id,"left"),unavailable:l(i(M).id,"left")}),()=>l(i(M).id,"left"),()=>Be(i(M).imagePath)]),I(R,j)});var K=v(N,2),q=v(u(K),6),V=u(q),$=u(V),Z=v(q,2);{var ie=R=>{var M=nu();Le(M,21,()=>i(n),j=>j.id,(j,S)=>{var C=tu();let G;C.__click=()=>x(i(S));var re=u(C),de=v(re,2),le=u(de),ve=u(le),we=v(le,2);{var ke=fe=>{var Te=$d();I(fe,Te)},ce=fe=>{var Te=eu();I(fe,Te)};L(we,fe=>{g(i(S).id)?fe(ke):fe(ce,!1)})}U((fe,Te)=>{G=Re(C,1,"selected-hero-item svelte-1rwnzlz",null,G,fe),B(C,"data-testid",`select-powers-${i(S).id??""}`),B(re,"src",Te),B(re,"alt",i(S).name),w(ve,i(S).name)},[()=>({complete:g(i(S).id)}),()=>Be(i(S).imagePath)]),I(j,C)}),I(R,M)};L(Z,R=>{i(n).length>0&&R(ie)})}var me=v(Z,2);me.__click=f;var ye=v(K,2),xe=u(ye);Le(xe,21,()=>i(r),R=>R.id,(R,M)=>{var j=ru();let S;j.__click=()=>d(i(M).id,"right");var C=u(j),G=v(C,2),re=u(G),de=u(re),le=v(re,2),ve=u(le);U((we,ke,ce)=>{S=Re(j,1,"hero-card svelte-1rwnzlz",null,S,we),B(j,"data-testid",`hero-${i(M).id??""}-right`),j.disabled=ke,B(C,"src",ce),B(C,"alt",i(M).name),w(de,i(M).name),w(ve,i(M).heroClass)},[()=>({selected:c(i(M).id,"right"),unavailable:l(i(M).id,"right")}),()=>l(i(M).id,"right"),()=>Be(i(M).imagePath)]),I(R,j)});var Ae=v(T,2),se=u(Ae);Le(se,21,()=>i(r),R=>R.id,(R,M)=>{var j=au();let S;j.__click=()=>d(i(M).id,"bottom");var C=u(j),G=v(C,2),re=u(G),de=u(re),le=v(re,2),ve=u(le);U((we,ke,ce)=>{S=Re(j,1,"hero-card svelte-1rwnzlz",null,S,we),B(j,"data-testid",`hero-${i(M).id??""}`),j.disabled=ke,B(C,"src",ce),B(C,"alt",i(M).name),w(de,i(M).name),w(ve,i(M).heroClass)},[()=>({selected:c(i(M).id,"bottom"),unavailable:l(i(M).id,"bottom")}),()=>l(i(M).id,"bottom"),()=>Be(i(M).imagePath)]),I(R,j)});var ne=v(P,2);{var ge=R=>{Qd(R,{get hero(){return i(o)},get selection(){return i(s)[i(o).id]},onClose:O})};L(ne,R=>{i(o)&&R(ge)})}U(R=>{w($,`${i(n).length??""} heroes selected`),me.disabled=R},[()=>!_()]),I(e,k),He()}Ze(["click"]);var ou=D('<button class="move-square svelte-ehd1hj" data-testid="move-square"><span class="sr-only svelte-ehd1hj"> </span></button>'),lu=D('<div class="movement-overlay svelte-ehd1hj" data-testid="movement-overlay"></div>');function cu(e,t){Pe(t,!0);function n(s){const o=t.tileOffsetX+s.x*t.cellSize,c=t.tileOffsetY+s.y*t.cellSize;return`left: ${o}px; top: ${c}px; width: ${t.cellSize}px; height: ${t.cellSize}px;`}function r(s,o){s.stopPropagation(),t.onSquareClick(o)}var a=lu();Le(a,21,()=>t.validMoveSquares,s=>`${s.x},${s.y}`,(s,o)=>{var c=ou();c.__click=f=>r(f,i(o));var l=u(c),d=u(l);U(f=>{B(c,"data-position-x",i(o).x),B(c,"data-position-y",i(o).y),Ot(c,f),w(d,`Move to (${i(o).x??""}, ${i(o).y??""})`)},[()=>n(i(o))]),I(s,c)}),I(e,a),He()}Ze(["click"]);var du=D('<div class="tile-deck-counter svelte-9649r" data-testid="tile-deck-counter"><span class="deck-icon svelte-9649r">ð¦</span> <span class="deck-count svelte-9649r" data-testid="tile-deck-count"> </span> <span class="deck-label svelte-9649r">tiles</span></div>');function uu(e,t){var n=du(),r=v(u(n),2),a=u(r);U(()=>w(a,t.tileCount)),I(e,n)}var fu=D('<div class="unexplored-edge svelte-12eown4" data-testid="unexplored-edge"><span class="question-mark svelte-12eown4">?</span></div>');function vu(e,t){Pe(t,!0);const r=(()=>{const c=t.cellSize*1.5,l=36;switch(t.direction){case"north":return{left:`${t.tileWidth/2-c/2}px`,top:`${l-8/2}px`,width:`${c}px`,height:"8px"};case"south":return{left:`${t.tileWidth/2-c/2}px`,bottom:`${l-8/2}px`,width:`${c}px`,height:"8px"};case"east":return{right:`${l-8/2}px`,top:`${t.tileHeight/2-c/2}px`,width:"8px",height:`${c}px`};case"west":return{left:`${l-8/2}px`,top:`${t.tileHeight/2-c/2}px`,width:"8px",height:`${c}px`}}})(),a=Object.entries(r).map(([o,c])=>`${o}: ${c}`).join("; ");var s=fu();U(()=>{B(s,"data-direction",t.direction),Ot(s,a)}),I(e,s),He()}var hu=D('<div class="monster-token svelte-1g5ysl" data-testid="monster-token"><img class="token-image svelte-1g5ysl"/> <span class="token-label svelte-1g5ysl"> </span></div>');function pu(e,t){Pe(t,!0);const n=X(()=>Mn.find(c=>c.id===t.monster.monsterId)),r=X(()=>()=>{const c=t.cellSize/2,l=t.tilePixelOffset.x+t.tileOffsetX+t.monster.position.x*t.cellSize+c,d=t.tilePixelOffset.y+t.tileOffsetY+t.monster.position.y*t.cellSize+c;return`left: ${l}px; top: ${d}px;`});var a=Me(),s=Ie(a);{var o=c=>{var l=hu(),d=u(l),f=v(d,2),g=u(f);U((p,_)=>{B(l,"data-monster-id",t.monster.instanceId),Ot(l,p),B(d,"src",_),B(d,"alt",i(n).name),w(g,i(n).name)},[()=>i(r)(),()=>Be(i(n).imagePath)]),I(c,l)};L(s,c=>{i(n)&&c(o)})}I(e,a),He()}var mu=D('<div class="monster-card-overlay svelte-at5lsg" role="dialog" aria-modal="true" aria-label="Monster spawned" tabindex="0" data-testid="monster-card-overlay"><div class="monster-card svelte-at5lsg" role="article" data-testid="monster-card"><div class="card-header svelte-at5lsg"><h3 class="monster-name svelte-at5lsg" data-testid="monster-name"> </h3> <button class="dismiss-button svelte-at5lsg" aria-label="Dismiss monster card" data-testid="dismiss-monster-card">â</button></div> <div class="card-image svelte-at5lsg"><img class="monster-image svelte-at5lsg"/></div> <div class="card-stats svelte-at5lsg"><div class="stat svelte-at5lsg"><span class="stat-label svelte-at5lsg">AC</span> <span class="stat-value svelte-at5lsg" data-testid="monster-ac"> </span></div> <div class="stat svelte-at5lsg"><span class="stat-label svelte-at5lsg">HP</span> <span class="stat-value svelte-at5lsg" data-testid="monster-hp"> </span></div> <div class="stat svelte-at5lsg"><span class="stat-label svelte-at5lsg">XP</span> <span class="stat-value svelte-at5lsg" data-testid="monster-xp"> </span></div></div> <p class="card-hint svelte-at5lsg">Click anywhere to dismiss</p></div></div>');function gu(e,t){Pe(t,!0);const n=X(()=>Mn.find(l=>l.id===t.monsterId));function r(){t.onDismiss&&t.onDismiss()}function a(l){(l.key==="Escape"||l.key==="Enter"||l.key===" ")&&(l.preventDefault(),r())}var s=Me(),o=Ie(s);{var c=l=>{var d=mu();d.__click=r,d.__keydown=a;var f=u(d);f.__click=Z=>Z.stopPropagation(),f.__keydown=Z=>Z.stopPropagation();var g=u(f),p=u(g),_=u(p),x=v(p,2);x.__click=r;var O=v(g,2),k=u(O),P=v(O,2),H=u(P),E=v(u(H),2),T=u(E),N=v(H,2),z=v(u(N),2),K=u(z),q=v(N,2),V=v(u(q),2),$=u(V);U(Z=>{w(_,i(n).name),B(k,"src",Z),B(k,"alt",i(n).name),w(T,i(n).ac),w(K,i(n).hp),w($,i(n).xp)},[()=>Be(i(n).imagePath)]),I(l,d)};L(o,l=>{i(n)&&l(c)})}I(e,s),He()}Ze(["click","keydown"]);var _u=D('<button><div class="card-header svelte-77qxlp"><span class="card-name svelte-77qxlp"> </span> <span class="card-type-badge svelte-77qxlp"> </span></div> <div class="card-stats svelte-77qxlp"><span class="attack-bonus svelte-77qxlp"> </span> <span class="damage svelte-77qxlp"> </span></div></button>'),yu=D('<button class="attack-button svelte-77qxlp"> </button>'),wu=D('<div class="target-selection svelte-77qxlp" data-testid="target-selection"><div class="target-header svelte-77qxlp"><span> </span></div> <div class="target-list svelte-77qxlp"></div></div>'),ku=D('<div class="select-card-hint svelte-77qxlp" data-testid="select-card-hint">Select a power card above to attack</div>'),bu=D('<div class="power-card-attack-panel svelte-77qxlp" data-testid="power-card-attack-panel"><div class="panel-header svelte-77qxlp"><span class="panel-title svelte-77qxlp">Select Attack Power</span></div> <div class="card-list svelte-77qxlp" data-testid="attack-card-list"></div> <!></div>');function xu(e,t){Pe(t,!0);let n=F(null);const r=X(()=>()=>{const p=[];for(const _ of t.heroPowerCards.cardStates){if(_.isFlipped)continue;const x=Qn(_.cardId);x&&x.attackBonus!==void 0&&p.push({card:x,state:_})}return p});function a(p){return Mn.find(x=>x.id===p)?.name||"Unknown"}function s(p){b(n,i(n)===p?null:p,!0)}function o(p){i(n)!==null&&(t.onAttackWithCard(i(n),p),b(n,null))}function c(p){switch(p){case"at-will":return"At-Will";case"daily":return"Daily";case"utility":return"Utility";default:return p}}function l(p){switch(p){case"at-will":return"card-atwill";case"daily":return"card-daily";case"utility":return"card-utility";default:return""}}var d=Me(),f=Ie(d);{var g=p=>{var _=bu(),x=v(u(_),2);Le(x,21,()=>i(r)(),({card:H,state:E})=>H.id,(H,E)=>{let T=()=>i(E).card;var N=_u();let z;N.__click=()=>s(T().id);var K=u(N),q=u(K),V=u(q),$=v(q,2),Z=u($),ie=v(K,2),me=u(ie),ye=u(me),xe=v(me,2),Ae=u(xe);U((se,ne)=>{z=Re(N,1,`power-card-option ${se??""}`,"svelte-77qxlp",z,{selected:i(n)===T().id}),B(N,"data-testid",`attack-card-${T().id??""}`),B(N,"data-card-type",T().type),w(V,T().name),w(Z,ne),w(ye,`+${T().attackBonus??""}`),w(Ae,`${T().damage??""} dmg`)},[()=>l(T().type),()=>c(T().type)]),I(H,N)});var O=v(x,2);{var k=H=>{const E=X(()=>Qn(i(n)));var T=wu(),N=u(T),z=u(N),K=u(z),q=v(N,2);Le(q,21,()=>t.adjacentMonsters,V=>V.instanceId,(V,$)=>{var Z=yu();Z.__click=()=>o(i($).instanceId);var ie=u(Z);U((me,ye)=>{B(Z,"data-testid",`attack-target-${i($).instanceId??""}`),B(Z,"aria-label",`Attack ${me??""} with ${i(E)?.name??""}`),w(ie,`Attack ${ye??""}`)},[()=>a(i($).monsterId),()=>a(i($).monsterId)]),I(V,Z)}),U(()=>w(K,`Attack with ${i(E)?.name??""}`)),I(H,T)},P=H=>{var E=ku();I(H,E)};L(O,H=>{i(n)!==null?H(k):H(P,!1)})}I(p,_)};L(f,p=>{t.adjacentMonsters.length>0&&i(r)().length>0&&p(g)})}I(e,d),He()}Ze(["click"]);var Su=D('<span class="result-text critical svelte-1jt2qdd" data-testid="result-text">âï¸ CRITICAL HIT!</span>'),Iu=D('<span class="result-text hit svelte-1jt2qdd" data-testid="result-text">â HIT!</span>'),Tu=D('<span class="result-text miss svelte-1jt2qdd" data-testid="result-text">â MISS!</span>'),Cu=D('<div class="damage-info svelte-1jt2qdd" data-testid="damage-info"><span class="damage-value svelte-1jt2qdd"> </span> <span class="damage-label svelte-1jt2qdd"> </span></div>'),Mu=D('<div class="combat-result-overlay svelte-1jt2qdd" role="dialog" aria-modal="true" aria-label="Combat result" tabindex="0" data-testid="combat-result-overlay"><div role="document" data-testid="combat-result"><div class="result-header svelte-1jt2qdd"><h3 class="attacker-info svelte-1jt2qdd" data-testid="attacker-info"> </h3> <button class="dismiss-button svelte-1jt2qdd" aria-label="Dismiss combat result" data-testid="dismiss-combat-result">â</button></div> <div class="dice-roll-section svelte-1jt2qdd"><div class="dice-container svelte-1jt2qdd"><span class="d20-icon svelte-1jt2qdd" aria-label="D20 die">D20</span> <span class="roll-value svelte-1jt2qdd" data-testid="roll-value"> </span></div> <div class="roll-breakdown svelte-1jt2qdd"><div class="breakdown-row svelte-1jt2qdd"><span class="breakdown-label svelte-1jt2qdd">Roll:</span> <span class="breakdown-value svelte-1jt2qdd" data-testid="dice-roll"> </span></div> <div class="breakdown-row svelte-1jt2qdd"><span class="breakdown-label svelte-1jt2qdd">+ Bonus:</span> <span class="breakdown-value svelte-1jt2qdd" data-testid="attack-bonus"> </span></div> <div class="breakdown-divider svelte-1jt2qdd"></div> <div class="breakdown-row total svelte-1jt2qdd"><span class="breakdown-label svelte-1jt2qdd">Total:</span> <span class="breakdown-value svelte-1jt2qdd" data-testid="attack-total"> </span></div> <div class="breakdown-row target svelte-1jt2qdd"><span class="breakdown-label svelte-1jt2qdd">vs AC:</span> <span class="breakdown-value svelte-1jt2qdd" data-testid="target-ac"> </span></div></div></div> <div class="result-section svelte-1jt2qdd"><!> <!></div> <p class="dismiss-hint svelte-1jt2qdd">Click anywhere to dismiss</p></div></div>');function ts(e,t){Pe(t,!0);function n(){t.onDismiss&&t.onDismiss()}function r(ne){(ne.key==="Escape"||ne.key==="Enter"||ne.key===" ")&&(ne.preventDefault(),n())}var a=Mu();a.__click=n,a.__keydown=r;var s=u(a);let o;s.__click=ne=>ne.stopPropagation(),s.__keydown=ne=>ne.stopPropagation();var c=u(s),l=u(c),d=u(l),f=v(l,2);f.__click=n;var g=v(c,2),p=u(g),_=v(u(p),2),x=u(_),O=v(p,2),k=u(O),P=v(u(k),2),H=u(P),E=v(k,2),T=v(u(E),2),N=u(T),z=v(E,4),K=v(u(z),2),q=u(K),V=v(z,2),$=v(u(V),2),Z=u($),ie=v(g,2),me=u(ie);{var ye=ne=>{var ge=Su();I(ne,ge)},xe=ne=>{var ge=Me(),R=Ie(ge);{var M=S=>{var C=Iu();I(S,C)},j=S=>{var C=Tu();I(S,C)};L(R,S=>{t.result.isHit?S(M):S(j,!1)},!0)}I(ne,ge)};L(me,ne=>{t.result.isCritical?ne(ye):ne(xe,!1)})}var Ae=v(me,2);{var se=ne=>{var ge=Cu(),R=u(ge),M=u(R),j=v(R,2),S=u(j);U(()=>{w(M,t.result.damage),w(S,`damage to ${t.targetName??""}`)}),I(ne,ge)};L(Ae,ne=>{t.result.isHit&&ne(se)})}U(()=>{o=Re(s,1,"combat-result svelte-1jt2qdd",null,o,{hit:t.result.isHit,miss:!t.result.isHit,critical:t.result.isCritical}),w(d,`${t.attackerName??""} attacks with ${t.attackName??""}!`),w(x,t.result.roll),w(H,t.result.roll),w(N,t.result.attackBonus),w(q,t.result.total),w(Z,t.result.targetAC)}),I(e,a),He()}Ze(["click","keydown"]);var Eu=D('<div class="monster-move-overlay svelte-18np0et" role="dialog" aria-modal="true" aria-label="Monster move result" tabindex="0" data-testid="monster-move-overlay"><div class="monster-move-card svelte-18np0et" role="document" data-testid="monster-move-card"><div class="move-header svelte-18np0et"><h3 class="monster-name svelte-18np0et" data-testid="monster-name"> </h3> <button class="dismiss-button svelte-18np0et" aria-label="Dismiss monster move result" data-testid="dismiss-monster-move">â</button></div> <div class="move-content svelte-18np0et"><span class="move-icon svelte-18np0et">ð</span> <p class="move-text svelte-18np0et" data-testid="move-text">Moved but could not attack</p></div> <p class="dismiss-hint svelte-18np0et">Click anywhere to continue</p></div></div>');function Pu(e,t){Pe(t,!0);function n(){t.onDismiss&&t.onDismiss()}function r(f){(f.key==="Escape"||f.key==="Enter"||f.key===" ")&&(f.preventDefault(),n())}var a=Eu();a.__click=n,a.__keydown=r;var s=u(a);s.__click=f=>f.stopPropagation(),s.__keydown=f=>f.stopPropagation();var o=u(s),c=u(o),l=u(c),d=v(c,2);d.__click=n,U(()=>w(l,t.monsterName)),I(e,a),He()}Ze(["click","keydown"]);var Hu=D('<div class="xp-counter svelte-1ymh8ps" data-testid="xp-counter"><span class="xp-icon svelte-1ymh8ps" aria-label="Experience Points">â­</span> <span class="xp-label svelte-1ymh8ps">XP:</span> <span class="xp-value svelte-1ymh8ps" data-testid="xp-value"> </span></div>');function Au(e,t){var n=Hu(),r=v(u(n),4),a=u(r);U(()=>w(a,t.xp)),I(e,n)}var Du=D('<div class="healing-surge-counter svelte-121e3gw" data-testid="healing-surge-counter"><span class="surge-icon svelte-121e3gw" aria-label="Healing Surges">â¤ï¸</span> <span class="surge-label svelte-121e3gw">Surges:</span> <span class="surge-value svelte-121e3gw" data-testid="surge-value"> </span></div>');function Ru(e,t){var n=Du(),r=v(u(n),4),a=u(r);U(()=>w(a,t.surges)),I(e,n)}var zu=D('<div class="defeat-overlay svelte-1h38uhv" role="dialog" aria-modal="true" aria-label="Monster defeated notification" tabindex="0" data-testid="defeat-notification-overlay"><div class="defeat-notification svelte-1h38uhv" role="dialog" aria-labelledby="defeat-title" tabindex="-1" data-testid="defeat-notification"><div class="defeat-header svelte-1h38uhv"><span class="defeat-icon svelte-1h38uhv">ð</span> <h3 class="defeat-title svelte-1h38uhv" id="defeat-title" data-testid="defeat-title"> </h3> <button class="dismiss-button svelte-1h38uhv" aria-label="Dismiss notification" data-testid="dismiss-defeat-notification">â</button></div> <div class="xp-gain-section svelte-1h38uhv" data-testid="xp-gain-section"><span class="xp-icon svelte-1h38uhv">â­</span> <span class="xp-amount svelte-1h38uhv" data-testid="xp-amount"> </span></div> <p class="dismiss-hint svelte-1h38uhv">Click anywhere to dismiss</p></div></div>');function Ou(e,t){Pe(t,!0);function n(){t.onDismiss&&t.onDismiss()}function r(_){(_.key==="Escape"||_.key==="Enter"||_.key===" ")&&(_.preventDefault(),n())}var a=zu();a.__click=n,a.__keydown=r;var s=u(a);s.__click=_=>_.stopPropagation(),s.__keydown=_=>_.stopPropagation();var o=u(s),c=v(u(o),2),l=u(c),d=v(c,2);d.__click=n;var f=v(o,2),g=v(u(f),2),p=u(g);U(()=>{w(l,`${t.monsterName??""} Defeated!`),w(p,`+${t.xpGained??""} XP`)}),I(e,a),He()}Ze(["click","keydown"]);var Nu=D('<div class="hero-section svelte-da0ogt"><img class="hero-avatar svelte-da0ogt"/> <div class="hero-level-info svelte-da0ogt"><span class="hero-name svelte-da0ogt" data-testid="level-up-hero-name"> </span> <span class="level-badge svelte-da0ogt" data-testid="level-badge"> </span></div></div>'),ju=D('<div class="level-up-overlay svelte-da0ogt" role="dialog" aria-modal="true" aria-label="Level up notification" tabindex="0" data-testid="level-up-overlay"><div class="level-up-notification svelte-da0ogt" role="dialog" aria-labelledby="level-up-title" tabindex="-1" data-testid="level-up-notification"><div class="level-up-header svelte-da0ogt"><span class="level-up-icon svelte-da0ogt">â¨</span> <h3 class="level-up-title svelte-da0ogt" id="level-up-title" data-testid="level-up-title">LEVEL UP!</h3> <span class="level-up-icon svelte-da0ogt">â¨</span> <button class="dismiss-button svelte-da0ogt" aria-label="Dismiss notification" data-testid="dismiss-level-up">â</button></div> <!> <div class="stats-section svelte-da0ogt" data-testid="stats-section"><div class="stat-change svelte-da0ogt"><span class="stat-label svelte-da0ogt">HP</span> <span class="stat-old svelte-da0ogt" data-testid="old-hp"> </span> <span class="stat-arrow svelte-da0ogt">â</span> <span class="stat-new svelte-da0ogt" data-testid="new-hp"> </span></div> <div class="stat-change svelte-da0ogt"><span class="stat-label svelte-da0ogt">AC</span> <span class="stat-old svelte-da0ogt" data-testid="old-ac"> </span> <span class="stat-arrow svelte-da0ogt">â</span> <span class="stat-new svelte-da0ogt" data-testid="new-ac"> </span></div> <div class="stat-change svelte-da0ogt"><span class="stat-label svelte-da0ogt">Surge</span> <span class="stat-old svelte-da0ogt" data-testid="old-surge"> </span> <span class="stat-arrow svelte-da0ogt">â</span> <span class="stat-new svelte-da0ogt" data-testid="new-surge"> </span></div> <div class="stat-change svelte-da0ogt"><span class="stat-label svelte-da0ogt">Attack</span> <span class="stat-old svelte-da0ogt" data-testid="old-attack"> </span> <span class="stat-arrow svelte-da0ogt">â</span> <span class="stat-new svelte-da0ogt" data-testid="new-attack"> </span></div></div> <div class="xp-spent-section svelte-da0ogt" data-testid="xp-spent-section"><span class="xp-icon svelte-da0ogt">â­</span> <span class="xp-text svelte-da0ogt">5 XP spent</span></div> <div class="critical-bonus-section svelte-da0ogt" data-testid="critical-bonus"><span class="bonus-text svelte-da0ogt">âï¸ Critical attacks now deal +1 damage!</span></div> <button class="continue-button svelte-da0ogt" data-testid="continue-button">Continue</button> <p class="dismiss-hint svelte-da0ogt">Click anywhere to dismiss</p></div></div>');function Bu(e,t){Pe(t,!0);const n=Mt.find(se=>se.id===t.heroId);function r(){t.onDismiss&&t.onDismiss()}function a(se){(se.key==="Escape"||se.key==="Enter"||se.key===" ")&&(se.preventDefault(),r())}var s=ju();s.__click=r,s.__keydown=a;var o=u(s);o.__click=se=>se.stopPropagation(),o.__keydown=se=>{(se.key==="Escape"||se.key==="Enter"||se.key===" ")&&se.stopPropagation()};var c=u(o),l=v(u(c),6);l.__click=r;var d=v(c,2);{var f=se=>{var ne=Nu(),ge=u(ne),R=v(ge,2),M=u(R),j=u(M),S=v(M,2),C=u(S);U(G=>{B(ge,"src",G),B(ge,"alt",n.name),w(j,n.name),w(C,`Level ${t.newStats.level??""}`)},[()=>Be(n.imagePath)]),I(se,ne)};L(d,se=>{n&&se(f)})}var g=v(d,2),p=u(g),_=v(u(p),2),x=u(_),O=v(_,4),k=u(O),P=v(p,2),H=v(u(P),2),E=u(H),T=v(H,4),N=u(T),z=v(P,2),K=v(u(z),2),q=u(K),V=v(K,4),$=u(V),Z=v(z,2),ie=v(u(Z),2),me=u(ie),ye=v(ie,4),xe=u(ye),Ae=v(g,6);Ae.__click=r,U(()=>{w(x,t.oldStats.maxHp),w(k,t.newStats.maxHp),w(E,t.oldStats.ac),w(N,t.newStats.ac),w(q,t.oldStats.surgeValue),w($,t.newStats.surgeValue),w(me,`+${t.oldStats.attackBonus??""}`),w(xe,`+${t.newStats.attackBonus??""}`)}),I(e,s),He()}Ze(["click","keydown"]);var Lu=D('<div class="healing-surge-overlay svelte-1ugospu" data-testid="healing-surge-notification"><div class="healing-surge-card svelte-1ugospu"><h2 class="healing-title svelte-1ugospu" data-testid="healing-title">Healing Surge!</h2> <div class="hero-section svelte-1ugospu"><img class="hero-avatar svelte-1ugospu"/> <span class="hero-name svelte-1ugospu" data-testid="healed-hero-name"> </span></div> <div class="healing-message svelte-1ugospu"><span class="was-text svelte-1ugospu">was at 0 HP</span></div> <div class="hp-restored-section svelte-1ugospu" data-testid="hp-restored-section"><span class="hp-icon svelte-1ugospu">â¤ï¸</span> <span class="hp-value svelte-1ugospu"> </span> <span class="hp-text svelte-1ugospu">restored</span></div> <button class="continue-button svelte-1ugospu" data-testid="dismiss-healing-surge">Continue</button></div></div>');function Fu(e,t){Pe(t,!0);function n(x){return Mt.find(O=>O.id===x)?.name??"Hero"}function r(x){return Mt.find(O=>O.id===x)?.imagePath??""}var a=Lu(),s=u(a),o=v(u(s),2),c=u(o),l=v(c,2),d=u(l),f=v(o,4),g=v(u(f),2),p=u(g),_=v(f,2);_.__click=function(...x){t.onDismiss?.apply(this,x)},U((x,O,k)=>{B(c,"src",x),B(c,"alt",O),w(d,k),w(p,`+${t.hpRestored??""} HP`)},[()=>Be(r(t.heroId)),()=>n(t.heroId),()=>n(t.heroId)]),I(e,a),He()}Ze(["click"]);var qu=D('<span class="hero-level svelte-8w11tm" data-testid="hero-level">Level 2 â­</span>'),Uu=D('<div class="player-info svelte-8w11tm" data-testid="turn-indicator"><img class="player-avatar svelte-8w11tm"/> <div class="turn-details svelte-8w11tm"><span class="player-name svelte-8w11tm"> </span> <!> <span class="turn-phase svelte-8w11tm" data-testid="turn-phase"> </span> <span class="turn-number svelte-8w11tm"> </span> <span class="hero-hp svelte-8w11tm" data-testid="hero-hp"> </span></div></div>'),Wu=D('<div class="player-info svelte-8w11tm"><img class="player-avatar svelte-8w11tm"/> <div class="turn-details svelte-8w11tm"><span class="player-name svelte-8w11tm"> </span> <span class="turn-phase svelte-8w11tm"> </span> <span class="turn-number svelte-8w11tm"> </span> <span class="hero-hp svelte-8w11tm"> </span></div></div>'),Yu=D('<div><img class="tile-image svelte-8w11tm"/> <!></div>'),Vu=D('<div class="movement-overlay-container svelte-8w11tm"><!></div>'),Gu=D('<div data-testid="hero-token"><img class="token-image svelte-8w11tm"/> <span class="token-label svelte-8w11tm"> </span></div>'),Xu=D('<div class="player-info svelte-8w11tm"><img class="player-avatar svelte-8w11tm"/> <div class="turn-details svelte-8w11tm"><span class="player-name svelte-8w11tm"> </span> <span class="turn-phase svelte-8w11tm"> </span> <span class="turn-number svelte-8w11tm"> </span> <span class="hero-hp svelte-8w11tm"> </span></div></div>'),Ku=D('<span class="hero-level svelte-8w11tm" data-testid="hero-level">Level 2 â­</span>'),Qu=D('<div class="player-info svelte-8w11tm" data-testid="turn-indicator"><img class="player-avatar svelte-8w11tm"/> <div class="turn-details svelte-8w11tm"><span class="player-name svelte-8w11tm"> </span> <!> <span class="turn-phase svelte-8w11tm" data-testid="turn-phase"> </span> <span class="turn-number svelte-8w11tm"> </span> <span class="hero-hp svelte-8w11tm" data-testid="hero-hp"> </span></div></div>'),Zu=D('<div class="game-board svelte-8w11tm" data-testid="game-board"><div data-testid="player-zone-top"><!></div> <div class="middle-section svelte-8w11tm"><div data-testid="player-zone-left"><!></div> <div class="board-container svelte-8w11tm"><div class="dungeon-map svelte-8w11tm" data-testid="dungeon-map" role="button" tabindex="0"><!> <!> <!> <!></div> <div class="board-controls svelte-8w11tm"><div class="objective-display svelte-8w11tm" data-testid="objective-display"><span class="objective-label svelte-8w11tm">ð¯ Objective:</span> <span class="objective-text svelte-8w11tm"> </span> <span class="objective-progress svelte-8w11tm" data-testid="objective-progress"> </span></div> <!> <!> <!> <button class="end-phase-button svelte-8w11tm" data-testid="end-phase-button"> </button> <button class="reset-button svelte-8w11tm" data-testid="reset-button">â© Return to Character Select</button> <!></div></div> <div data-testid="player-zone-right"><!></div></div> <div data-testid="player-zone-bottom"><!></div> <!> <!> <!> <!> <!>  <!> <!></div>');function Ju(e,t){Pe(t,!0);const n=140,r=4,a=8,s=4,o=n*r,c=n*a,l=n*s,d=140,f=.15,g=1,p=36,_=36,x=632,O=632,k=1195,P=3,H=0;let E=F(pe([])),T=F(pe([])),N=F(pe({})),z=F(pe({currentHeroIndex:0,currentPhase:"hero-phase",turnNumber:1})),K=F(pe([])),q=F(!1),V=F(pe({tiles:[],unexploredEdges:[],tileDeck:[]})),$=F(pe([])),Z=F(null),ie=F(null),me=F(null),ye=F(pe([])),xe=F(null),Ae=F(null),se=F(null),ne=F(0),ge=F(null),R=F(pe({actionsTaken:[],canMove:!0,canAttack:!0})),M=F(pe({monstersDefeated:0,monstersToDefeat:2,objective:"Defeat 2 monsters"})),j=F(pe({xp:0,healingSurges:2})),S=F(null),C=F(null),G=F(null),re=F(null),de=F(null),le=F(null),ve=F(null),we=F(1),ke=F(pe({})),ce=F(null),fe=X(()=>Te(i(V)));It(()=>{const m=Y.subscribe(()=>{const y=Y.getState();b(E,y.game.heroTokens,!0),b(T,y.heroes.selectedHeroes,!0),b(N,y.heroes.heroEdgeMap,!0),b(z,y.game.turnState,!0),b(K,y.game.validMoveSquares,!0),b(q,y.game.showingMovement,!0),b(V,y.game.dungeon,!0),b($,y.game.monsters,!0),b(Z,y.game.recentlySpawnedMonsterId,!0),b(ie,y.game.attackResult,!0),b(me,y.game.attackTargetId,!0),b(ye,y.game.heroHp,!0),b(xe,y.game.monsterAttackResult,!0),b(Ae,y.game.monsterAttackTargetId,!0),b(se,y.game.monsterAttackerId,!0),b(ne,y.game.villainPhaseMonsterIndex,!0),b(ge,y.game.monsterMoveActionId,!0),b(R,y.game.heroTurnActions,!0),b(M,y.game.scenario,!0),b(j,y.game.partyResources,!0),b(S,y.game.defeatedMonsterXp,!0),b(C,y.game.defeatedMonsterName,!0),b(G,y.game.leveledUpHeroId,!0),b(re,y.game.levelUpOldStats,!0),b(de,y.game.healingSurgeUsedHeroId,!0),b(le,y.game.healingSurgeHpRestored,!0),b(ke,y.heroes.heroPowerCards,!0),b(ce,y.game.attackName,!0)}),h=Y.getState();return b(E,h.game.heroTokens,!0),b(T,h.heroes.selectedHeroes,!0),b(N,h.heroes.heroEdgeMap,!0),b(z,h.game.turnState,!0),b(K,h.game.validMoveSquares,!0),b(q,h.game.showingMovement,!0),b(V,h.game.dungeon,!0),b($,h.game.monsters,!0),b(Z,h.game.recentlySpawnedMonsterId,!0),b(ie,h.game.attackResult,!0),b(me,h.game.attackTargetId,!0),b(ye,h.game.heroHp,!0),b(xe,h.game.monsterAttackResult,!0),b(Ae,h.game.monsterAttackTargetId,!0),b(se,h.game.monsterAttackerId,!0),b(ne,h.game.villainPhaseMonsterIndex,!0),b(ge,h.game.monsterMoveActionId,!0),b(R,h.game.heroTurnActions,!0),b(M,h.game.scenario,!0),b(j,h.game.partyResources,!0),b(S,h.game.defeatedMonsterXp,!0),b(C,h.game.defeatedMonsterName,!0),b(G,h.game.leveledUpHeroId,!0),b(re,h.game.levelUpOldStats,!0),b(de,h.game.healingSurgeUsedHeroId,!0),b(le,h.game.healingSurgeHpRestored,!0),b(ke,h.heroes.heroPowerCards,!0),b(ce,h.game.attackName,!0),m}),It(()=>{i(z).currentPhase==="hero-phase"&&wd(i(R))&&Y.dispatch($a())}),It(()=>{if(i(z).currentPhase!=="hero-phase"||!i(R).canMove||i(q))return;const m=ue();if(!m)return;const h=_e(m);h&&Y.dispatch(Ja({heroId:m,speed:h.speed}))}),It(()=>{if(i(z).currentPhase!=="villain-phase"||i(xe)!==null||i(ge)!==null)return;const m=it();if(i(ne)>=m.length){Y.dispatch(es());return}Y.dispatch(Hd({}))});function Te(m){if(m.tiles.length===0)return{minCol:0,maxCol:0,minRow:0,maxRow:0,width:x,height:k};let h=1/0,y=-1/0,A=1/0,W=-1/0;for(const Se of m.tiles)h=Math.min(h,Se.position.col),y=Math.max(y,Se.position.col),A=Math.min(A,Se.position.row),W=Math.max(W,Se.position.row);const Q=y-h+1,ee=x+(Q-1)*o,ae=Math.max(0,-A),J=Math.max(0,W),be=k+ae*l+J*l;return{minCol:h,maxCol:y,minRow:A,maxRow:W,width:Math.max(ee,x),height:Math.max(be,k)}}function Je(m,h){const y=(m.position.col-h.minCol)*o;let A=0;return m.position.row<0?A=(m.position.row-h.minRow)*l:m.position.row===0?A=Math.max(0,-h.minRow)*l-P:A=Math.max(0,-h.minRow)*l+c+(m.position.row-1)*l-P-H,{x:y,y:A}}function st(m){return m.tileType==="start"?"assets/StartTile.png":ai.find(y=>y.tileType===m.tileType)?.imagePath||"assets/Tile_Black_x2_01.png"}function yt(m){return m.tileType==="start"?{width:x,height:k}:{width:x,height:O}}It(()=>{if(i(ve)){const m=()=>{const y=i(ve);if(!y)return;const A=y.clientWidth-d,W=y.clientHeight-d,Q=i(fe),ee=A/Q.width,ae=W/Q.height,J=Math.min(ee,ae,g);b(we,Math.max(J,f),!0)};m();const h=new ResizeObserver(m);return h.observe(i(ve)),()=>h.disconnect()}});function _e(m){return i(T).find(h=>h.id===m)}function ue(){return i(E)[i(z).currentHeroIndex]?.heroId}function $e(m){switch(m){case"hero-phase":return"Hero Phase";case"exploration-phase":return"Exploration Phase";case"villain-phase":return"Villain Phase"}}function vt(m){return i(ye).find(y=>y.heroId===m)?.currentHp??0}function et(m){return i(ye).find(y=>y.heroId===m)?.maxHp??0}function wt(m){return i(ye).find(y=>y.heroId===m)?.level??1}function it(){const m=ue();return m?i($).filter(h=>h.controllerId===m):[]}function Ft(){Y.dispatch(ra())}function un(m,h){const y=n/2,A=h.x+p+m.x*n+y,W=h.y+_+m.y*n+y;return`left: ${A}px; top: ${W}px;`}function zt(){const m=ue();if(m&&i(N)[m])return i(N)[m];const h=i(z).currentHeroIndex%4;return["bottom","right","top","left"][h]}function fi(m){const h=i(N)[m];if(!h)return 0;switch(h){case"bottom":return 0;case"top":return 180;case"left":return 90;case"right":return-90;default:return 0}}function aa(m){if(i(z).currentPhase!=="hero-phase")return;const h=ue();if(!h)return;const y=_e(h);y&&(i(q)?Y.dispatch(Sd()):Y.dispatch(Ja({heroId:h,speed:y.speed})))}function vi(m){const h=ue();h&&Y.dispatch(Id({heroId:h,position:m}))}function hi(m){(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),aa())}function pi(){switch(i(z).currentPhase){case"hero-phase":Y.dispatch($a());break;case"exploration-phase":Y.dispatch(Td());break;case"villain-phase":Y.dispatch(es());break}}function mi(){switch(i(z).currentPhase){case"hero-phase":return"End Hero Phase";case"exploration-phase":return"End Exploration";case"villain-phase":return"End Villain Phase"}}function gi(){Y.dispatch(Cd())}function _i(m){const h=i(V).tiles.find(y=>y.id===m);return h?Je(h,i(fe)):{x:0,y:0}}const sr="start-tile";function yi(){const m=ue();if(!m)return sr;const h=i(E).find(A=>A.heroId===m);return h?bn(h.position,i(V))?.id??sr:sr}function wi(){const m=ue();if(!m)return[];const h=i(E).find(A=>A.heroId===m);if(!h)return[];const y=yi();return ud(h.position,i($),y,i(V))}function ki(m){return Mt.find(h=>h.id===m)}const bi=1;function xi(m,h){const y=ue();if(!y)return;const A=Qn(m);if(!A||A.attackBonus===void 0)return;const W=i($).find(J=>J.instanceId===h);if(!W)return;const Q=cd(W.monsterId);if(Q===void 0)return;const ee={name:A.name,attackBonus:A.attackBonus,damage:A.damage??bi},ae=sd(ee,Q);Y.dispatch(Md({result:ae,targetInstanceId:h,attackName:A.name})),A.type==="daily"&&Y.dispatch(Mc({heroId:y,cardId:m}))}function Si(){Y.dispatch(Ed())}function ir(m){return Mn.find(y=>y.id===m)?.name||"Monster"}function Ii(){if(i(me))return i($).find(m=>m.instanceId===i(me))}function Ti(){Y.dispatch(Ad())}function Ci(){Y.dispatch(Dd())}function Mi(){return i(Ae)&&Mt.find(h=>h.id===i(Ae))?.name||"Hero"}function Ei(){if(!i(se))return"Monster";const m=i($).find(h=>h.instanceId===i(se));return m?ir(m.monsterId):"Monster"}function Pi(){if(!i(ge))return"Monster";const m=i($).find(h=>h.instanceId===i(ge));return m?ir(m.monsterId):"Monster"}function Hi(){Y.dispatch(Pd())}function Ai(){Y.dispatch(zd())}function Di(){Y.dispatch(Rd())}function Ri(){if(i(G))return i(ye).find(m=>m.heroId===i(G))}var sa=Zu(),or=u(sa);let ia;var zi=u(or);{var Oi=m=>{const h=X(ue),y=X(()=>i(h)?_e(i(h)):void 0);var A=Me(),W=Ie(A);{var Q=ee=>{var ae=Uu(),J=u(ae),be=v(J,2),Se=u(be),Ve=u(Se),qe=v(Se,2);{var ot=Ne=>{var ct=qu();I(Ne,ct)};L(qe,Ne=>{wt(i(h))===2&&Ne(ot)})}var Ge=v(qe,2),kt=u(Ge),lt=v(Ge,2),bt=u(lt),qt=v(lt,2),Ut=u(qt);U((Ne,ct,fr,vr)=>{B(J,"src",Ne),B(J,"alt",i(y).name),w(Ve,`${i(y).name??""}'s Turn`),w(kt,ct),w(bt,`Turn ${i(z).turnNumber??""}`),w(Ut,`HP: ${fr??""}/${vr??""}`)},[()=>Be(i(y).imagePath),()=>$e(i(z).currentPhase),()=>vt(i(h)),()=>et(i(h))]),I(ee,ae)};L(W,ee=>{i(y)&&i(h)&&ee(Q)})}I(m,A)};L(zi,m=>{zt()==="top"&&m(Oi)})}var oa=v(or,2),lr=u(oa);let la;var Ni=u(lr);{var ji=m=>{const h=X(ue),y=X(()=>i(h)?_e(i(h)):void 0);var A=Me(),W=Ie(A);{var Q=ee=>{var ae=Wu(),J=u(ae),be=v(J,2),Se=u(be),Ve=u(Se),qe=v(Se,2),ot=u(qe),Ge=v(qe,2),kt=u(Ge),lt=v(Ge,2),bt=u(lt);U((qt,Ut,Ne,ct)=>{B(J,"src",qt),B(J,"alt",i(y).name),w(Ve,`${i(y).name??""}'s Turn`),w(ot,Ut),w(kt,`Turn ${i(z).turnNumber??""}`),w(bt,`HP: ${Ne??""}/${ct??""}`)},[()=>Be(i(y).imagePath),()=>$e(i(z).currentPhase),()=>vt(i(h)),()=>et(i(h))]),I(ee,ae)};L(W,ee=>{i(y)&&i(h)&&ee(Q)})}I(m,A)};L(Ni,m=>{zt()==="left"&&m(ji)})}var cr=v(lr,2),Kt=u(cr);Kt.__click=aa,Kt.__keydown=hi;var ca=u(Kt);Le(ca,17,()=>i(V).tiles,m=>m.id,(m,h)=>{const y=X(()=>Je(i(h),i(fe))),A=X(()=>yt(i(h)));var W=Yu();let Q;var ee=u(W),ae=v(ee,2);Le(ae,17,()=>i(V).unexploredEdges.filter(J=>J.tileId===i(h).id),J=>J.direction,(J,be)=>{vu(J,{get direction(){return i(be).direction},cellSize:n,get tileWidth(){return i(A).width},get tileHeight(){return i(A).height}})}),U(J=>{Q=Re(W,1,"placed-tile svelte-8w11tm",null,Q,{"start-tile":i(h).tileType==="start"}),B(W,"data-testid",i(h).tileType==="start"?"start-tile":"dungeon-tile"),B(W,"data-tile-id",i(h).id),Ot(W,`left: ${i(y).x??""}px; top: ${i(y).y??""}px; width: ${i(A).width??""}px; height: ${i(A).height??""}px;`),B(ee,"src",J),B(ee,"alt",i(h).tileType),Ot(ee,i(h).rotation!==0?`transform: rotate(${i(h).rotation}deg);`:"")},[()=>Be(st(i(h)))]),I(m,W)});var da=v(ca,2);{var Bi=m=>{const h=X(()=>i(V).tiles.find(Q=>Q.tileType==="start"));var y=Me(),A=Ie(y);{var W=Q=>{const ee=X(()=>Je(i(h),i(fe))),ae=X(()=>yt(i(h)));var J=Vu(),be=u(J);cu(be,{get validMoveSquares(){return i(K)},tileOffsetX:p,tileOffsetY:_,cellSize:n,onSquareClick:vi}),U(()=>Ot(J,`left: ${i(ee).x??""}px; top: ${i(ee).y??""}px; width: ${i(ae).width??""}px; height: ${i(ae).height??""}px;`)),I(Q,J)};L(A,Q=>{i(h)&&Q(W)})}I(m,y)};L(da,m=>{i(q)&&i(K).length>0&&m(Bi)})}var ua=v(da,2);Le(ua,17,()=>i(E),m=>m.heroId,(m,h)=>{const y=X(()=>_e(i(h).heroId)),A=X(()=>i(h).heroId===ue()),W=X(()=>i(V).tiles.find(be=>be.tileType==="start")),Q=X(()=>fi(i(h).heroId));var ee=Me(),ae=Ie(ee);{var J=be=>{const Se=X(()=>Je(i(W),i(fe)));var Ve=Gu();let qe;var ot=u(Ve),Ge=v(ot,2),kt=u(Ge);U((lt,bt)=>{qe=Re(Ve,1,"hero-token svelte-8w11tm",null,qe,{active:i(A)}),B(Ve,"data-hero-id",i(h).heroId),Ot(Ve,`${lt??""} --token-rotation: ${i(Q)??""}deg;`),B(ot,"src",bt),B(ot,"alt",i(y).name),w(kt,i(y).name)},[()=>un(i(h).position,i(Se)),()=>Be(i(y).imagePath)]),I(be,Ve)};L(ae,be=>{i(y)&&i(W)&&be(J)})}I(m,ee)});var Li=v(ua,2);Le(Li,17,()=>i($),m=>m.instanceId,(m,h)=>{{let y=X(()=>_i(i(h).tileId));pu(m,{get monster(){return i(h)},cellSize:n,tileOffsetX:p,tileOffsetY:_,get tilePixelOffset(){return i(y)}})}});var Fi=v(Kt,2),fa=u(Fi),va=v(u(fa),2),qi=u(va),Ui=v(va,2),Wi=u(Ui),ha=v(fa,2);Au(ha,{get xp(){return i(j).xp}});var pa=v(ha,2);Ru(pa,{get surges(){return i(j).healingSurges}});var ma=v(pa,2);uu(ma,{get tileCount(){return i(V).tileDeck.length}});var dr=v(ma,2);dr.__click=pi;var Yi=u(dr),ga=v(dr,2);ga.__click=Ft;var Vi=v(ga,2);{var Gi=m=>{const h=X(ue),y=X(()=>i(h)?i(ke)[i(h)]:void 0),A=X(wi);var W=Me(),Q=Ie(W);{var ee=ae=>{xu(ae,{get heroPowerCards(){return i(y)},get adjacentMonsters(){return i(A)},onAttackWithCard:xi})};L(Q,ae=>{i(y)&&i(A).length>0&&ae(ee)})}I(m,W)};L(Vi,m=>{i(z).currentPhase==="hero-phase"&&i(R).canAttack&&m(Gi)})}xl(cr,m=>b(ve,m),()=>i(ve));var _a=v(cr,2);let ya;var Xi=u(_a);{var Ki=m=>{const h=X(ue),y=X(()=>i(h)?_e(i(h)):void 0);var A=Me(),W=Ie(A);{var Q=ee=>{var ae=Xu(),J=u(ae),be=v(J,2),Se=u(be),Ve=u(Se),qe=v(Se,2),ot=u(qe),Ge=v(qe,2),kt=u(Ge),lt=v(Ge,2),bt=u(lt);U((qt,Ut,Ne,ct)=>{B(J,"src",qt),B(J,"alt",i(y).name),w(Ve,`${i(y).name??""}'s Turn`),w(ot,Ut),w(kt,`Turn ${i(z).turnNumber??""}`),w(bt,`HP: ${Ne??""}/${ct??""}`)},[()=>Be(i(y).imagePath),()=>$e(i(z).currentPhase),()=>vt(i(h)),()=>et(i(h))]),I(ee,ae)};L(W,ee=>{i(y)&&i(h)&&ee(Q)})}I(m,A)};L(Xi,m=>{zt()==="right"&&m(Ki)})}var ur=v(oa,2);let wa;var Qi=u(ur);{var Zi=m=>{const h=X(ue),y=X(()=>i(h)?_e(i(h)):void 0);var A=Me(),W=Ie(A);{var Q=ee=>{var ae=Qu(),J=u(ae),be=v(J,2),Se=u(be),Ve=u(Se),qe=v(Se,2);{var ot=Ne=>{var ct=Ku();I(Ne,ct)};L(qe,Ne=>{wt(i(h))===2&&Ne(ot)})}var Ge=v(qe,2),kt=u(Ge),lt=v(Ge,2),bt=u(lt),qt=v(lt,2),Ut=u(qt);U((Ne,ct,fr,vr)=>{B(J,"src",Ne),B(J,"alt",i(y).name),w(Ve,`${i(y).name??""}'s Turn`),w(kt,ct),w(bt,`Turn ${i(z).turnNumber??""}`),w(Ut,`HP: ${fr??""}/${vr??""}`)},[()=>Be(i(y).imagePath),()=>$e(i(z).currentPhase),()=>vt(i(h)),()=>et(i(h))]),I(ee,ae)};L(W,ee=>{i(y)&&i(h)&&ee(Q)})}I(m,A)};L(Qi,m=>{zt()==="bottom"&&m(Zi)})}var ka=v(ur,2);{var Ji=m=>{const h=X(()=>i($).find(Q=>Q.instanceId===i(Z)));var y=Me(),A=Ie(y);{var W=Q=>{gu(Q,{get monsterId(){return i(h).monsterId},onDismiss:gi})};L(A,Q=>{i(h)&&Q(W)})}I(m,y)};L(ka,m=>{i(Z)&&m(Ji)})}var ba=v(ka,2);{var $i=m=>{const h=X(ue),y=X(()=>i(h)?ki(i(h)):void 0),A=X(Ii);var W=Me(),Q=Ie(W);{var ee=ae=>{{let J=X(()=>i(A)?ir(i(A).monsterId):"Monster");ts(ae,{get result(){return i(ie)},get attackerName(){return i(y).name},get attackName(){return i(ce)},get targetName(){return i(J)},onDismiss:Si})}};L(Q,ae=>{i(y)&&i(ce)&&ae(ee)})}I(m,W)};L(ba,m=>{i(ie)&&m($i)})}var xa=v(ba,2);{var eo=m=>{{let h=X(Ei),y=X(Mi);ts(m,{get result(){return i(xe)},get attackerName(){return i(h)},attackName:"Attack",get targetName(){return i(y)},onDismiss:Ti})}};L(xa,m=>{i(xe)&&m(eo)})}var Sa=v(xa,2);{var to=m=>{{let h=X(Pi);Pu(m,{get monsterName(){return i(h)},onDismiss:Ci})}};L(Sa,m=>{i(ge)&&m(to)})}var Ia=v(Sa,2);{var no=m=>{Ou(m,{get monsterName(){return i(C)},get xpGained(){return i(S)},onDismiss:Hi})};L(Ia,m=>{i(S)!==null&&i(C)!==null&&m(no)})}var Ta=v(Ia,2);{var ro=m=>{const h=X(Ri);var y=Me(),A=Ie(y);{var W=Q=>{Bu(Q,{get heroId(){return i(G)},get oldStats(){return i(re)},get newStats(){return i(h)},onDismiss:Ai})};L(A,Q=>{i(h)&&Q(W)})}I(m,y)};L(Ta,m=>{i(G)&&i(re)&&!i(ie)&&!i(S)&&m(ro)})}var ao=v(Ta,2);{var so=m=>{Fu(m,{get heroId(){return i(de)},get hpRestored(){return i(le)},onDismiss:Di})};L(ao,m=>{i(de)&&i(le)!==null&&m(so)})}U((m,h,y,A,W)=>{ia=Re(or,1,"edge-zone edge-top svelte-8w11tm",null,ia,m),la=Re(lr,1,"edge-zone edge-left svelte-8w11tm",null,la,h),Ot(Kt,`transform: scale(${i(we)??""}); width: ${i(fe).width??""}px; height: ${i(fe).height??""}px;`),B(Kt,"aria-label",i(q)?"Click to hide movement options":"Click to show movement options for current hero"),w(qi,i(M).objective),w(Wi,`${i(M).monstersDefeated??""} / ${i(M).monstersToDefeat??""} defeated`),w(Yi,y),ya=Re(_a,1,"edge-zone edge-right svelte-8w11tm",null,ya,A),wa=Re(ur,1,"edge-zone edge-bottom svelte-8w11tm",null,wa,W)},[()=>({"active-edge":zt()==="top"}),()=>({"active-edge":zt()==="left"}),mi,()=>({"active-edge":zt()==="right"}),()=>({"active-edge":zt()==="bottom"})]),I(e,sa),He()}Ze(["click","keydown"]);var $u=D('<div class="victory-screen svelte-12ok9q2" data-testid="victory-screen"><div class="victory-content svelte-12ok9q2"><div class="victory-icon svelte-12ok9q2">ð</div> <h1 class="victory-title svelte-12ok9q2">Victory!</h1> <p class="victory-message svelte-12ok9q2"> </p> <div class="victory-objective svelte-12ok9q2"><span class="objective-label svelte-12ok9q2">Objective Complete:</span> <span class="objective-text svelte-12ok9q2"> </span></div> <button class="return-button svelte-12ok9q2" data-testid="return-to-menu-button">Return to Character Select</button></div></div>');function ef(e,t){Pe(t,!0);let n=F(pe({monstersDefeated:0,monstersToDefeat:2,objective:"Defeat 2 monsters"}));It(()=>{const p=Y.subscribe(()=>{const x=Y.getState();b(n,x.game.scenario,!0)}),_=Y.getState();return b(n,_.game.scenario,!0),p});function r(){Y.dispatch(ra())}var a=$u(),s=u(a),o=v(u(s),4),c=u(o),l=v(o,2),d=v(u(l),2),f=u(d),g=v(l,2);g.__click=r,U(()=>{w(c,`You have defeated ${i(n).monstersDefeated??""} monsters and completed the objective!`),w(f,i(n).objective)}),I(e,a),He()}Ze(["click"]);var tf=D('<div class="defeat-screen svelte-1jz2vy1" data-testid="defeat-screen"><div class="defeat-content svelte-1jz2vy1"><div class="defeat-icon svelte-1jz2vy1">ð</div> <h1 class="defeat-title svelte-1jz2vy1">Defeat</h1> <p class="defeat-message svelte-1jz2vy1" data-testid="defeat-message"><!></p> <div class="defeat-progress svelte-1jz2vy1"><span class="progress-label svelte-1jz2vy1">Progress:</span> <span class="progress-text svelte-1jz2vy1" data-testid="defeat-progress"> </span></div> <div class="defeat-objective svelte-1jz2vy1"><span class="objective-label svelte-1jz2vy1">Objective:</span> <span class="objective-text svelte-1jz2vy1"> </span></div> <button class="new-game-button svelte-1jz2vy1" data-testid="new-game-button">New Game</button></div></div>');function nf(e,t){Pe(t,!0);let n=F(pe({monstersDefeated:0,monstersToDefeat:2,objective:"Defeat 2 monsters"})),r=F(null);It(()=>{const H=Y.subscribe(()=>{const T=Y.getState();b(n,T.game.scenario,!0),b(r,T.game.defeatReason,!0)}),E=Y.getState();return b(n,E.game.scenario,!0),b(r,E.game.defeatReason,!0),H});function a(){Y.dispatch(ra())}var s=tf(),o=u(s),c=v(u(o),4),l=u(c);{var d=H=>{var E=Ra();U(()=>w(E,i(r))),I(H,E)},f=H=>{var E=Ra("Your party has been eliminated before completing the objective.");I(H,E)};L(l,H=>{i(r)?H(d):H(f,!1)})}var g=v(c,2),p=v(u(g),2),_=u(p),x=v(g,2),O=v(u(x),2),k=u(O),P=v(x,2);P.__click=a,U(()=>{w(_,`${i(n).monstersDefeated??""} / ${i(n).monstersToDefeat??""} monsters defeated`),w(k,i(n).objective)}),I(e,s),He()}Ze(["click"]);var rf=D('<main class="svelte-1n46o8q"><!></main>');function af(e,t){Pe(t,!0);let n=F("character-select");It(()=>{const c=Y.subscribe(()=>{const d=Y.getState();b(n,d.game.currentScreen,!0)}),l=Y.getState();return b(n,l.game.currentScreen,!0),c});var r=rf(),a=u(r);{var s=c=>{iu(c,{})},o=c=>{var l=Me(),d=Ie(l);{var f=p=>{Ju(p,{})},g=p=>{var _=Me(),x=Ie(_);{var O=P=>{ef(P,{})},k=P=>{var H=Me(),E=Ie(H);{var T=N=>{nf(N,{})};L(E,N=>{i(n)==="defeat"&&N(T)},!0)}I(P,H)};L(x,P=>{i(n)==="victory"?P(O):P(k,!1)},!0)}I(p,_)};L(d,p=>{i(n)==="game-board"?p(f):p(g,!1)},!0)}I(c,l)};L(a,c=>{i(n)==="character-select"?c(s):c(o,!1)})}I(e,r),He()}vl(af,{target:document.getElementById("app")});
