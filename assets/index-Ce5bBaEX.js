(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();const $i="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add($i);const Ws=1,Ks=2,Qs=4,eo=8,to=16,no=2,me=Symbol(),ro="http://www.w3.org/1999/xhtml",ir=!1;var Zs=Array.isArray,so=Array.prototype.indexOf,Ir=Array.from,ao=Object.defineProperty,Qt=Object.getOwnPropertyDescriptor,io=Object.getOwnPropertyDescriptors,oo=Object.prototype,lo=Array.prototype,Js=Object.getPrototypeOf,ys=Object.isExtensible;function co(e){for(var t=0;t<e.length;t++)e[t]()}function $s(){var e,t,n=new Promise((r,s)=>{e=r,t=s});return{promise:n,resolve:e,reject:t}}const pe=2,Tr=4,Sr=8,uo=1<<24,ft=16,vt=32,At=64,Ln=128,Ye=512,ge=1024,Pe=2048,ht=4096,Oe=8192,yt=16384,Er=32768,Lt=65536,ws=1<<17,ea=1<<18,Gt=1<<19,fo=1<<20,Mt=32768,or=1<<21,Mr=1<<22,wt=1<<23,Tn=Symbol("$state"),vo=Symbol(""),zt=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function ho(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function po(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function _o(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function mo(e){throw new Error("https://svelte.dev/e/effect_orphan")}function go(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function yo(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function wo(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function xo(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function ko(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}function bo(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function ta(e){return e===this.v}function Io(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function na(e){return!Io(e,this.v)}let To=!1,Le=null;function Ft(e){Le=e}function we(e,t=!1,n){Le={p:Le,i:!1,c:null,e:null,s:e,x:null,l:null}}function xe(e){var t=Le,n=t.e;if(n!==null){t.e=null;for(var r of n)_a(r)}return t.i=!0,Le=t.p,{}}function ra(){return!0}let Nt=[];function So(){var e=Nt;Nt=[],co(e)}function an(e){if(Nt.length===0){var t=Nt;queueMicrotask(()=>{t===Nt&&So()})}Nt.push(e)}function sa(e){var t=te;if(t===null)return K.f|=wt,e;if((t.f&Er)===0){if((t.f&Ln)===0)throw e;t.b.error(e)}else Bt(e,t)}function Bt(e,t){for(;t!==null;){if((t.f&Ln)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e}const wn=new Set;let se=null,je=null,Qe=[],Hr=null,lr=!1;class Ze{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#r=0;#n=0;#l=null;#a=[];#s=[];skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(t){Qe=[],this.apply();var n={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const r of t)this.#i(r,n);this.is_fork||this.#u(),this.is_deferred()?(this.#o(n.effects),this.#o(n.render_effects),this.#o(n.block_effects)):(se=null,xs(n.render_effects),xs(n.effects),this.#l?.resolve()),je=null}#i(t,n){t.f^=ge;for(var r=t.first;r!==null;){var s=r.f,a=(s&(vt|At))!==0,i=a&&(s&ge)!==0,l=i||(s&Oe)!==0||this.skipped_effects.has(r);if((r.f&Ln)!==0&&r.b?.is_pending()&&(n={parent:n,effect:r,effects:[],render_effects:[],block_effects:[]}),!l&&r.fn!==null){a?r.f^=ge:(s&Tr)!==0?n.effects.push(r):ln(r)&&((r.f&ft)!==0&&n.block_effects.push(r),en(r));var o=r.first;if(o!==null){r=o;continue}}var u=r.parent;for(r=r.next;r===null&&u!==null;)u===n.effect&&(this.#o(n.effects),this.#o(n.render_effects),this.#o(n.block_effects),n=n.parent),r=u.next,u=u.parent}}#o(t){for(const n of t)((n.f&Pe)!==0?this.#a:this.#s).push(n),this.#c(n.deps),ye(n,ge)}#c(t){if(t!==null)for(const n of t)(n.f&pe)===0||(n.f&Mt)===0||(n.f^=Mt,this.#c(n.deps))}capture(t,n){this.previous.has(t)||this.previous.set(t,n),(t.f&wt)===0&&(this.current.set(t,t.v),je?.set(t,t.v))}activate(){se=this,this.apply()}deactivate(){se===this&&(se=null,je=null)}flush(){if(this.activate(),Qe.length>0){if(Eo(),se!==null&&se!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#t)t(this);this.#t.clear()}#u(){if(this.#n===0){for(const t of this.#e)t();this.#e.clear()}this.#r===0&&this.#d()}#d(){if(wn.size>1){this.previous.clear();var t=je,n=!0,r={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const a of wn){if(a===this){n=!1;continue}const i=[];for(const[o,u]of this.current){if(a.current.has(o))if(n&&u!==a.current.get(o))a.current.set(o,u);else continue;i.push(o)}if(i.length===0)continue;const l=[...a.current.keys()].filter(o=>!this.current.has(o));if(l.length>0){var s=Qe;Qe=[];const o=new Set,u=new Map;for(const d of i)aa(d,l,o,u);if(Qe.length>0){se=a,a.apply();for(const d of Qe)a.#i(d,r);a.deactivate()}Qe=s}}se=null,je=t}this.committed=!0,wn.delete(this)}increment(t){this.#r+=1,t&&(this.#n+=1)}decrement(t){this.#r-=1,t&&(this.#n-=1),this.revive()}revive(){for(const t of this.#a)ye(t,Pe),Ht(t);for(const t of this.#s)ye(t,ht),Ht(t);this.#a=[],this.#s=[],this.flush()}oncommit(t){this.#e.add(t)}ondiscard(t){this.#t.add(t)}settled(){return(this.#l??=$s()).promise}static ensure(){if(se===null){const t=se=new Ze;wn.add(se),Ze.enqueue(()=>{se===t&&t.flush()})}return se}static enqueue(t){an(t)}apply(){}}function Eo(){var e=kt;lr=!0;var t=null;try{var n=0;for(Pn(!0);Qe.length>0;){var r=Ze.ensure();if(n++>1e3){var s,a;Mo()}r.process(Qe),xt.clear()}}finally{lr=!1,Pn(e),Hr=null}}function Mo(){try{go()}catch(e){Bt(e,Hr)}}let st=null;function xs(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if((r.f&(yt|Oe))===0&&ln(r)&&(st=new Set,en(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?wa(r):r.fn=null),st?.size>0)){xt.clear();for(const s of st){if((s.f&(yt|Oe))!==0)continue;const a=[s];let i=s.parent;for(;i!==null;)st.has(i)&&(st.delete(i),a.push(i)),i=i.parent;for(let l=a.length-1;l>=0;l--){const o=a[l];(o.f&(yt|Oe))===0&&en(o)}}st.clear()}}st=null}}function aa(e,t,n,r){if(!n.has(e)&&(n.add(e),e.reactions!==null))for(const s of e.reactions){const a=s.f;(a&pe)!==0?aa(s,t,n,r):(a&(Mr|ft))!==0&&(a&Pe)===0&&ia(s,t,r)&&(ye(s,Pe),Ht(s))}}function ia(e,t,n){const r=n.get(e);if(r!==void 0)return r;if(e.deps!==null)for(const s of e.deps){if(t.includes(s))return!0;if((s.f&pe)!==0&&ia(s,t,n))return n.set(s,!0),!0}return n.set(e,!1),!1}function Ht(e){for(var t=Hr=e;t.parent!==null;){t=t.parent;var n=t.f;if(lr&&t===te&&(n&ft)!==0&&(n&ea)===0)return;if((n&(At|vt))!==0){if((n&ge)===0)return;t.f^=ge}}Qe.push(t)}function Ho(e){let t=0,n=Pt(0),r;return()=>{Jt()&&(c(n),ma(()=>(t===0&&(r=Aa(()=>e(()=>Zt(n)))),t+=1,()=>{an(()=>{t-=1,t===0&&(r?.(),r=void 0,Zt(n))})})))}}var Po=Lt|Gt|Ln;function Ao(e,t,n){new Do(e,t,n)}class Do{parent;#e=!1;#t;#r=null;#n;#l;#a;#s=null;#i=null;#o=null;#c=null;#u=null;#d=0;#f=0;#h=!1;#v=null;#y=Ho(()=>(this.#v=Pt(this.#d),()=>{this.#v=null}));constructor(t,n,r){this.#t=t,this.#n=n,this.#l=r,this.parent=te.b,this.#e=!!this.#n.pending,this.#a=Cr(()=>{te.b=this;{var s=this.#m();try{this.#s=Ne(()=>r(s))}catch(a){this.error(a)}this.#f>0?this.#_():this.#e=!1}return()=>{this.#u?.remove()}},Po)}#w(){try{this.#s=Ne(()=>this.#l(this.#t))}catch(t){this.error(t)}this.#e=!1}#x(){const t=this.#n.pending;t&&(this.#i=Ne(()=>t(this.#t)),Ze.enqueue(()=>{var n=this.#m();this.#s=this.#p(()=>(Ze.ensure(),Ne(()=>this.#l(n)))),this.#f>0?this.#_():(jt(this.#i,()=>{this.#i=null}),this.#e=!1)}))}#m(){var t=this.#t;return this.#e&&(this.#u=ut(),this.#t.before(this.#u),t=this.#u),t}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#p(t){var n=te,r=K,s=Le;et(this.#a),Me(this.#a),Ft(this.#a.ctx);try{return t()}catch(a){return sa(a),null}finally{et(n),Me(r),Ft(s)}}#_(){const t=this.#n.pending;this.#s!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#u),ba(this.#s,this.#c)),this.#i===null&&(this.#i=Ne(()=>t(this.#t)))}#g(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#g(t);return}this.#f+=t,this.#f===0&&(this.#e=!1,this.#i&&jt(this.#i,()=>{this.#i=null}),this.#c&&(this.#t.before(this.#c),this.#c=null))}update_pending_count(t){this.#g(t),this.#d+=t,this.#v&&qt(this.#v,this.#d)}get_effect_pending(){return this.#y(),c(this.#v)}error(t){var n=this.#n.onerror;let r=this.#n.failed;if(this.#h||!n&&!r)throw t;this.#s&&(He(this.#s),this.#s=null),this.#i&&(He(this.#i),this.#i=null),this.#o&&(He(this.#o),this.#o=null);var s=!1,a=!1;const i=()=>{if(s){bo();return}s=!0,a&&ko(),Ze.ensure(),this.#d=0,this.#o!==null&&jt(this.#o,()=>{this.#o=null}),this.#e=this.has_pending_snippet(),this.#s=this.#p(()=>(this.#h=!1,Ne(()=>this.#l(this.#t)))),this.#f>0?this.#_():this.#e=!1};var l=K;try{Me(null),a=!0,n?.(t,i),a=!1}catch(o){Bt(o,this.#a&&this.#a.parent)}finally{Me(l)}r&&an(()=>{this.#o=this.#p(()=>{Ze.ensure(),this.#h=!0;try{return Ne(()=>{r(this.#t,()=>t,()=>i)})}catch(o){return Bt(o,this.#a.parent),null}finally{this.#h=!1}})})}}function Co(e,t,n){for(var r=[],s=t.length,a=0;a<s;a++)Rr(t[a].e,r,!0);xa(r,()=>{var i=r.length===0&&n!==null;if(i){var l=n,o=l.parentNode;Vo(o),o.append(l),e.items.clear(),Ve(e,t[0].prev,t[s-1].next)}for(var u=0;u<s;u++){var d=t[u];i||(e.items.delete(d.k),Ve(e,d.prev,d.next)),He(d.e,!i)}e.first===t[0]&&(e.first=t[0].prev)})}function Je(e,t,n,r,s,a=null){var i=e,l=new Map,o=null,u=(t&Qs)!==0,d=(t&Ws)!==0,p=(t&Ks)!==0;if(u){var _=e;i=_.appendChild(ut())}var m=null,b=Lo(()=>{var E=n();return Zs(E)?E:E==null?[]:Ir(E)}),D,w=!0;function T(){Ro(S,D,i,t,r),m!==null&&(D.length===0?(m.fragment?(i.before(m.fragment),m.fragment=null):Or(m.effect),R.first=m.effect):jt(m.effect,()=>{m=null}))}var R=Cr(()=>{D=c(b);for(var E=D.length,j=new Set,C=se,Q=null,B=ha(),M=0;M<E;M+=1){var k=D[M],H=r(k,M),Y=w?null:l.get(H);Y?(d&&qt(Y.v,k),p?qt(Y.i,M):Y.i=M,B&&C.skipped_effects.delete(Y.e)):(Y=Oo(w?i:null,Q,k,H,M,s,t,n),w&&(Y.o=!0,Q===null?o=Y:Q.next=Y,Q=Y),l.set(H,Y)),j.add(H)}if(E===0&&a&&!m)if(w)m={fragment:null,effect:Ne(()=>a(i))};else{var ee=document.createDocumentFragment(),ae=ut();ee.append(ae),m={fragment:ee,effect:Ne(()=>a(ae))}}if(!w)if(B){for(const[re,ue]of l)j.has(re)||C.skipped_effects.add(ue.e);C.oncommit(T),C.ondiscard(()=>{})}else T();c(b)}),S={effect:R,items:l,first:o};w=!1}function Ro(e,t,n,r,s){var a=(r&eo)!==0,i=t.length,l=e.items,o=e.first,u,d=null,p,_=[],m=[],b,D,w,T;if(a)for(T=0;T<i;T+=1)b=t[T],D=s(b,T),w=l.get(D),w.o&&(w.a?.measure(),(p??=new Set).add(w));for(T=0;T<i;T+=1){if(b=t[T],D=s(b,T),w=l.get(D),e.first??=w,!w.o){w.o=!0;var R=d?d.next:o;Ve(e,d,w),Ve(e,w,R),nr(w,R,n),d=w,_=[],m=[],o=d.next;continue}if((w.e.f&Oe)!==0&&(Or(w.e),a&&(w.a?.unfix(),(p??=new Set).delete(w))),w!==o){if(u!==void 0&&u.has(w)){if(_.length<m.length){var S=m[0],E;d=S.prev;var j=_[0],C=_[_.length-1];for(E=0;E<_.length;E+=1)nr(_[E],S,n);for(E=0;E<m.length;E+=1)u.delete(m[E]);Ve(e,j.prev,C.next),Ve(e,d,j),Ve(e,C,S),o=S,d=C,T-=1,_=[],m=[]}else u.delete(w),nr(w,o,n),Ve(e,w.prev,w.next),Ve(e,w,d===null?e.first:d.next),Ve(e,d,w),d=w;continue}for(_=[],m=[];o!==null&&o.k!==D;)(o.e.f&Oe)===0&&(u??=new Set).add(o),m.push(o),o=o.next;if(o===null)continue;w=o}_.push(w),d=w,o=w.next}let Q=l.size>i;if(o!==null||u!==void 0){for(var B=u===void 0?[]:Ir(u);o!==null;)(o.e.f&Oe)===0&&B.push(o),o=o.next;var M=B.length;if(Q=l.size-M>i,M>0){var k=(r&Qs)!==0&&i===0?n:null;if(a){for(T=0;T<M;T+=1)B[T].a?.measure();for(T=0;T<M;T+=1)B[T].a?.fix()}Co(e,B,k)}}if(Q)for(const H of l.values())H.o||(Ve(e,d,H),d=H);e.effect.last=d&&d.e,a&&an(()=>{if(p!==void 0)for(w of p)w.a?.apply()})}function Oo(e,t,n,r,s,a,i,l){var o=(i&Ws)!==0,u=(i&to)===0,d=o?u?Bo(n,!1,!1):Pt(n):n,p=(i&Ks)===0?s:Pt(s),_={i:p,v:d,k:r,a:null,e:null,o:!1,prev:t,next:null};try{if(e===null){var m=document.createDocumentFragment();m.append(e=ut())}return _.e=Ne(()=>a(e,d,p,l)),t!==null&&(t.next=_),_}finally{}}function nr(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,s=t?t.e.nodes_start:n,a=e.e.nodes_start;a!==null&&a!==r;){var i=on(a);s.before(a),a=i}}function Ve(e,t,n){t===null?(e.first=n,e.effect.first=n&&n.e):(t.e.next&&(t.e.next.prev=null),t.next=n,t.e.next=n&&n.e),n!==null&&(n.e.prev&&(n.e.prev.next=null),n.prev=t,n.e.prev=t&&t.e)}function zo(e,t,n,r){const s=Pr;if(n.length===0&&e.length===0){r(t.map(s));return}var a=se,i=te,l=No();function o(){Promise.all(n.map(u=>jo(u))).then(u=>{l();try{r([...t.map(s),...u])}catch(d){(i.f&yt)===0&&Bt(d,i)}a?.deactivate(),Hn()}).catch(u=>{Bt(u,i)})}e.length>0?Promise.all(e).then(()=>{l();try{return o()}finally{a?.deactivate(),Hn()}}):o()}function No(){var e=te,t=K,n=Le,r=se;return function(a=!0){et(e),Me(t),Ft(n),a&&r?.activate()}}function Hn(){et(null),Me(null),Ft(null)}function Pr(e){var t=pe|Pe,n=K!==null&&(K.f&pe)!==0?K:null;return te!==null&&(te.f|=Gt),{ctx:Le,deps:null,effects:null,equals:ta,f:t,fn:e,reactions:null,rv:0,v:me,wv:0,parent:n??te,ac:null}}function jo(e,t){let n=te;n===null&&ho();var r=n.b,s=void 0,a=Pt(me),i=!K,l=new Map;return Qo(()=>{var o=$s();s=o.promise;try{Promise.resolve(e()).then(o.resolve,o.reject).then(()=>{u===se&&u.committed&&u.deactivate(),Hn()})}catch(_){o.reject(_),Hn()}var u=se;if(i){var d=!r.is_pending();r.update_pending_count(1),u.increment(d),l.get(u)?.reject(zt),l.delete(u),l.set(u,o)}const p=(_,m=void 0)=>{if(u.activate(),m)m!==zt&&(a.f|=wt,qt(a,m));else{(a.f&wt)!==0&&(a.f^=wt),qt(a,_);for(const[b,D]of l){if(l.delete(b),b===u)break;D.reject(zt)}}i&&(r.update_pending_count(-1),u.decrement(d))};o.promise.then(p,_=>p(null,_||"unknown"))}),Yo(()=>{for(const o of l.values())o.reject(zt)}),new Promise(o=>{function u(d){function p(){d===s?o(a):u(s)}d.then(p,p)}u(s)})}function X(e){const t=Pr(e);return Ia(t),t}function Lo(e){const t=Pr(e);return t.equals=na,t}function oa(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)He(t[n])}}function Fo(e){for(var t=e.parent;t!==null;){if((t.f&pe)===0)return(t.f&yt)===0?t:null;t=t.parent}return null}function Ar(e){var t,n=te;et(Fo(e));try{e.f&=~Mt,oa(e),t=Ma(e)}finally{et(n)}return t}function la(e){var t=Ar(e);if(e.equals(t)||(se?.is_fork||(e.v=t),e.wv=Sa()),!Xt)if(je!==null)(Jt()||se?.is_fork)&&je.set(e,t);else{var n=(e.f&Ye)===0?ht:ge;ye(e,n)}}let cr=new Set;const xt=new Map;let ca=!1;function Pt(e,t){var n={f:0,v:e,reactions:null,equals:ta,rv:0,wv:0};return n}function z(e,t){const n=Pt(e);return Ia(n),n}function Bo(e,t=!1,n=!0){const r=Pt(e);return t||(r.equals=na),r}function x(e,t,n=!1){K!==null&&(!$e||(K.f&ws)!==0)&&ra()&&(K.f&(pe|ft|Mr|ws))!==0&&!ot?.includes(e)&&xo();let r=n?ie(t):t;return qt(e,r)}function qt(e,t){if(!e.equals(t)){var n=e.v;Xt?xt.set(e,t):xt.set(e,n),e.v=t;var r=Ze.ensure();r.capture(e,n),(e.f&pe)!==0&&((e.f&Pe)!==0&&Ar(e),ye(e,(e.f&Ye)!==0?ge:ht)),e.wv=Sa(),ua(e,Pe),te!==null&&(te.f&ge)!==0&&(te.f&(vt|At))===0&&(ze===null?$o([e]):ze.push(e)),!r.is_fork&&cr.size>0&&!ca&&qo()}return t}function qo(){ca=!1;var e=kt;Pn(!0);const t=Array.from(cr);try{for(const n of t)(n.f&ge)!==0&&ye(n,ht),ln(n)&&en(n)}finally{Pn(e)}cr.clear()}function Zt(e){x(e,e.v+1)}function ua(e,t){var n=e.reactions;if(n!==null)for(var r=n.length,s=0;s<r;s++){var a=n[s],i=a.f,l=(i&Pe)===0;if(l&&ye(a,t),(i&pe)!==0){var o=a;je?.delete(o),(i&Mt)===0&&(i&Ye&&(a.f|=Mt),ua(o,ht))}else l&&((i&ft)!==0&&st!==null&&st.add(a),Ht(a))}}function ie(e){if(typeof e!="object"||e===null||Tn in e)return e;const t=Js(e);if(t!==oo&&t!==lo)return e;var n=new Map,r=Zs(e),s=z(0),a=Et,i=l=>{if(Et===a)return l();var o=K,u=Et;Me(null),Is(a);var d=l();return Me(o),Is(u),d};return r&&n.set("length",z(e.length)),new Proxy(e,{defineProperty(l,o,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&yo();var d=n.get(o);return d===void 0?d=i(()=>{var p=z(u.value);return n.set(o,p),p}):x(d,u.value,!0),!0},deleteProperty(l,o){var u=n.get(o);if(u===void 0){if(o in l){const d=i(()=>z(me));n.set(o,d),Zt(s)}}else x(u,me),Zt(s);return!0},get(l,o,u){if(o===Tn)return e;var d=n.get(o),p=o in l;if(d===void 0&&(!p||Qt(l,o)?.writable)&&(d=i(()=>{var m=ie(p?l[o]:me),b=z(m);return b}),n.set(o,d)),d!==void 0){var _=c(d);return _===me?void 0:_}return Reflect.get(l,o,u)},getOwnPropertyDescriptor(l,o){var u=Reflect.getOwnPropertyDescriptor(l,o);if(u&&"value"in u){var d=n.get(o);d&&(u.value=c(d))}else if(u===void 0){var p=n.get(o),_=p?.v;if(p!==void 0&&_!==me)return{enumerable:!0,configurable:!0,value:_,writable:!0}}return u},has(l,o){if(o===Tn)return!0;var u=n.get(o),d=u!==void 0&&u.v!==me||Reflect.has(l,o);if(u!==void 0||te!==null&&(!d||Qt(l,o)?.writable)){u===void 0&&(u=i(()=>{var _=d?ie(l[o]):me,m=z(_);return m}),n.set(o,u));var p=c(u);if(p===me)return!1}return d},set(l,o,u,d){var p=n.get(o),_=o in l;if(r&&o==="length")for(var m=u;m<p.v;m+=1){var b=n.get(m+"");b!==void 0?x(b,me):m in l&&(b=i(()=>z(me)),n.set(m+"",b))}if(p===void 0)(!_||Qt(l,o)?.writable)&&(p=i(()=>z(void 0)),x(p,ie(u)),n.set(o,p));else{_=p.v!==me;var D=i(()=>ie(u));x(p,D)}var w=Reflect.getOwnPropertyDescriptor(l,o);if(w?.set&&w.set.call(d,u),!_){if(r&&typeof o=="string"){var T=n.get("length"),R=Number(o);Number.isInteger(R)&&R>=T.v&&x(T,R+1)}Zt(s)}return!0},ownKeys(l){c(s);var o=Reflect.ownKeys(l).filter(p=>{var _=n.get(p);return _===void 0||_.v!==me});for(var[u,d]of n)d.v!==me&&!(u in l)&&o.push(u);return o},setPrototypeOf(){wo()}})}var ks,da,fa,va;function Uo(){if(ks===void 0){ks=window,da=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;fa=Qt(t,"firstChild").get,va=Qt(t,"nextSibling").get,ys(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),ys(n)&&(n.__t=void 0)}}function ut(e=""){return document.createTextNode(e)}function Dr(e){return fa.call(e)}function on(e){return va.call(e)}function f(e,t){return Dr(e)}function ve(e,t=!1){{var n=Dr(e);return n instanceof Comment&&n.data===""?on(n):n}}function g(e,t=1,n=!1){let r=e;for(;t--;)r=on(r);return r}function Vo(e){e.textContent=""}function ha(){return!1}function pa(e){var t=K,n=te;Me(null),et(null);try{return e()}finally{Me(t),et(n)}}function Go(e){te===null&&(K===null&&mo(),_o()),Xt&&po()}function Xo(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function pt(e,t,n){var r=te;r!==null&&(r.f&Oe)!==0&&(e|=Oe);var s={ctx:Le,deps:null,nodes_start:null,nodes_end:null,f:e|Pe|Ye,first:null,fn:t,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{en(s),s.f|=Er}catch(l){throw He(s),l}else t!==null&&Ht(s);var a=s;if(n&&a.deps===null&&a.teardown===null&&a.nodes_start===null&&a.first===a.last&&(a.f&Gt)===0&&(a=a.first,(e&ft)!==0&&(e&Lt)!==0&&a!==null&&(a.f|=Lt)),a!==null&&(a.parent=r,r!==null&&Xo(a,r),K!==null&&(K.f&pe)!==0&&(e&At)===0)){var i=K;(i.effects??=[]).push(a)}return s}function Jt(){return K!==null&&!$e}function Yo(e){const t=pt(Sr,null,!1);return ye(t,ge),t.teardown=e,t}function it(e){Go();var t=te.f,n=!K&&(t&vt)!==0&&(t&Er)===0;if(n){var r=Le;(r.e??=[]).push(e)}else return _a(e)}function _a(e){return pt(Tr|fo,e,!1)}function Wo(e){Ze.ensure();const t=pt(At|Gt,e,!0);return(n={})=>new Promise(r=>{n.outro?jt(t,()=>{He(t),r(void 0)}):(He(t),r(void 0))})}function Ko(e){return pt(Tr,e,!1)}function Qo(e){return pt(Mr|Gt,e,!0)}function ma(e,t=0){return pt(Sr|t,e,!0)}function J(e,t=[],n=[],r=[]){zo(r,t,n,s=>{pt(Sr,()=>e(...s.map(c)),!0)})}function Cr(e,t=0){var n=pt(ft|t,e,!0);return n}function Ne(e){return pt(vt|Gt,e,!0)}function ga(e){var t=e.teardown;if(t!==null){const n=Xt,r=K;bs(!0),Me(null);try{t.call(null)}finally{bs(n),Me(r)}}}function ya(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const s=n.ac;s!==null&&pa(()=>{s.abort(zt)});var r=n.next;(n.f&At)!==0?n.parent=null:He(n,t),n=r}}function Zo(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&vt)===0&&He(t),t=n}}function He(e,t=!0){var n=!1;(t||(e.f&ea)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(Jo(e.nodes_start,e.nodes_end),n=!0),ya(e,t&&!n),An(e,0),ye(e,yt);var r=e.transitions;if(r!==null)for(const a of r)a.stop();ga(e);var s=e.parent;s!==null&&s.first!==null&&wa(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function Jo(e,t){for(;e!==null;){var n=e===t?null:on(e);e.remove(),e=n}}function wa(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function jt(e,t,n=!0){var r=[];Rr(e,r,!0),xa(r,()=>{n&&He(e),t&&t()})}function xa(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var s of e)s.out(r)}else t()}function Rr(e,t,n){if((e.f&Oe)===0){if(e.f^=Oe,e.transitions!==null)for(const i of e.transitions)(i.is_global||n)&&t.push(i);for(var r=e.first;r!==null;){var s=r.next,a=(r.f&Lt)!==0||(r.f&vt)!==0&&(e.f&ft)!==0;Rr(r,t,a?n:!1),r=s}}}function Or(e){ka(e,!0)}function ka(e,t){if((e.f&Oe)!==0){e.f^=Oe,(e.f&ge)===0&&(ye(e,Pe),Ht(e));for(var n=e.first;n!==null;){var r=n.next,s=(n.f&Lt)!==0||(n.f&vt)!==0;ka(n,s?t:!1),n=r}if(e.transitions!==null)for(const a of e.transitions)(a.is_global||t)&&a.in()}}function ba(e,t){for(var n=e.nodes_start,r=e.nodes_end;n!==null;){var s=n===r?null:on(n);t.append(n),n=s}}let kt=!1;function Pn(e){kt=e}let Xt=!1;function bs(e){Xt=e}let K=null,$e=!1;function Me(e){K=e}let te=null;function et(e){te=e}let ot=null;function Ia(e){K!==null&&(ot===null?ot=[e]:ot.push(e))}let Ie=null,Ce=0,ze=null;function $o(e){ze=e}let Ta=1,$t=0,Et=$t;function Is(e){Et=e}function Sa(){return++Ta}function ln(e){var t=e.f;if((t&Pe)!==0)return!0;if(t&pe&&(e.f&=~Mt),(t&ht)!==0){var n=e.deps;if(n!==null)for(var r=n.length,s=0;s<r;s++){var a=n[s];if(ln(a)&&la(a),a.wv>e.wv)return!0}(t&Ye)!==0&&je===null&&ye(e,ge)}return!1}function Ea(e,t,n=!0){var r=e.reactions;if(r!==null&&!ot?.includes(e))for(var s=0;s<r.length;s++){var a=r[s];(a.f&pe)!==0?Ea(a,t,!1):t===a&&(n?ye(a,Pe):(a.f&ge)!==0&&ye(a,ht),Ht(a))}}function Ma(e){var t=Ie,n=Ce,r=ze,s=K,a=ot,i=Le,l=$e,o=Et,u=e.f;Ie=null,Ce=0,ze=null,K=(u&(vt|At))===0?e:null,ot=null,Ft(e.ctx),$e=!1,Et=++$t,e.ac!==null&&(pa(()=>{e.ac.abort(zt)}),e.ac=null);try{e.f|=or;var d=e.fn,p=d(),_=e.deps;if(Ie!==null){var m;if(An(e,Ce),_!==null&&Ce>0)for(_.length=Ce+Ie.length,m=0;m<Ie.length;m++)_[Ce+m]=Ie[m];else e.deps=_=Ie;if(kt&&Jt()&&(e.f&Ye)!==0)for(m=Ce;m<_.length;m++)(_[m].reactions??=[]).push(e)}else _!==null&&Ce<_.length&&(An(e,Ce),_.length=Ce);if(ra()&&ze!==null&&!$e&&_!==null&&(e.f&(pe|ht|Pe))===0)for(m=0;m<ze.length;m++)Ea(ze[m],e);return s!==null&&s!==e&&($t++,ze!==null&&(r===null?r=ze:r.push(...ze))),(e.f&wt)!==0&&(e.f^=wt),p}catch(b){return sa(b)}finally{e.f^=or,Ie=t,Ce=n,ze=r,K=s,ot=a,Ft(i),$e=l,Et=o}}function el(e,t){let n=t.reactions;if(n!==null){var r=so.call(n,e);if(r!==-1){var s=n.length-1;s===0?n=t.reactions=null:(n[r]=n[s],n.pop())}}n===null&&(t.f&pe)!==0&&(Ie===null||!Ie.includes(t))&&(ye(t,ht),(t.f&Ye)!==0&&(t.f^=Ye,t.f&=~Mt),oa(t),An(t,0))}function An(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)el(e,n[r])}function en(e){var t=e.f;if((t&yt)===0){ye(e,ge);var n=te,r=kt;te=e,kt=!0;try{(t&(ft|uo))!==0?Zo(e):ya(e),ga(e);var s=Ma(e);e.teardown=typeof s=="function"?s:null,e.wv=Ta;var a;ir&&To&&(e.f&Pe)!==0&&e.deps}finally{kt=r,te=n}}}function c(e){var t=e.f,n=(t&pe)!==0;if(K!==null&&!$e){var r=te!==null&&(te.f&yt)!==0;if(!r&&!ot?.includes(e)){var s=K.deps;if((K.f&or)!==0)e.rv<$t&&(e.rv=$t,Ie===null&&s!==null&&s[Ce]===e?Ce++:Ie===null?Ie=[e]:Ie.includes(e)||Ie.push(e));else{(K.deps??=[]).push(e);var a=e.reactions;a===null?e.reactions=[K]:a.includes(K)||a.push(K)}}}if(Xt){if(xt.has(e))return xt.get(e);if(n){var i=e,l=i.v;return((i.f&ge)===0&&i.reactions!==null||Pa(i))&&(l=Ar(i)),xt.set(i,l),l}}else n&&(!je?.has(e)||se?.is_fork&&!Jt())&&(i=e,ln(i)&&la(i),kt&&Jt()&&(i.f&Ye)===0&&Ha(i));if(je?.has(e))return je.get(e);if((e.f&wt)!==0)throw e.v;return e.v}function Ha(e){if(e.deps!==null){e.f^=Ye;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&pe)!==0&&(t.f&Ye)===0&&Ha(t)}}function Pa(e){if(e.v===me)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(xt.has(t)||(t.f&pe)!==0&&Pa(t))return!0;return!1}function Aa(e){var t=$e;try{return $e=!0,e()}finally{$e=t}}const tl=-7169;function ye(e,t){e.f=e.f&tl|t}const Da=new Set,ur=new Set;function Fe(e){for(var t=0;t<e.length;t++)Da.add(e[t]);for(var n of ur)n(e)}let Ts=null;function xn(e){var t=this,n=t.ownerDocument,r=e.type,s=e.composedPath?.()||[],a=s[0]||e.target;Ts=e;var i=0,l=Ts===e&&e.__root;if(l){var o=s.indexOf(l);if(o!==-1&&(t===document||t===window)){e.__root=t;return}var u=s.indexOf(t);if(u===-1)return;o<=u&&(i=o)}if(a=s[i]||e.target,a!==t){ao(e,"currentTarget",{configurable:!0,get(){return a||n}});var d=K,p=te;Me(null),et(null);try{for(var _,m=[];a!==null;){var b=a.assignedSlot||a.parentNode||a.host||null;try{var D=a["__"+r];D!=null&&(!a.disabled||e.target===a)&&D.call(a,e)}catch(w){_?m.push(w):_=w}if(e.cancelBubble||b===t||b===null)break;a=b}if(_){for(let w of m)queueMicrotask(()=>{throw w});throw _}}finally{e.__root=t,delete e.currentTarget,Me(d),et(p)}}}function nl(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function zr(e,t){var n=te;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function q(e,t){var n=(t&no)!==0,r,s=!e.startsWith("<!>");return()=>{r===void 0&&(r=nl(s?e:"<!>"+e),r=Dr(r));var a=n||da?document.importNode(r,!0):r.cloneNode(!0);return zr(a,a),a}}function Ss(e=""){{var t=ut(e+"");return zr(t,t),t}}function he(){var e=document.createDocumentFragment(),t=document.createComment(""),n=ut();return e.append(t,n),zr(t,n),e}function P(e,t){e!==null&&e.before(t)}const rl=["touchstart","touchmove"];function sl(e){return rl.includes(e)}function I(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function al(e,t){return il(e,t)}const Ct=new Map;function il(e,{target:t,anchor:n,props:r={},events:s,context:a,intro:i=!0}){Uo();var l=new Set,o=p=>{for(var _=0;_<p.length;_++){var m=p[_];if(!l.has(m)){l.add(m);var b=sl(m);t.addEventListener(m,xn,{passive:b});var D=Ct.get(m);D===void 0?(document.addEventListener(m,xn,{passive:b}),Ct.set(m,1)):Ct.set(m,D+1)}}};o(Ir(Da)),ur.add(o);var u=void 0,d=Wo(()=>{var p=n??t.appendChild(ut());return Ao(p,{pending:()=>{}},_=>{if(a){we({});var m=Le;m.c=a}s&&(r.$$events=s),u=e(_,r)||{},a&&xe()}),()=>{for(var _ of l){t.removeEventListener(_,xn);var m=Ct.get(_);--m===0?(document.removeEventListener(_,xn),Ct.delete(_)):Ct.set(_,m)}ur.delete(o),p!==n&&p.parentNode?.removeChild(p)}});return ol.set(u,d),u}let ol=new WeakMap;class ll{anchor;#e=new Map;#t=new Map;#r=new Map;#n=new Set;#l=!0;constructor(t,n=!0){this.anchor=t,this.#l=n}#a=()=>{var t=se;if(this.#e.has(t)){var n=this.#e.get(t),r=this.#t.get(n);if(r)Or(r),this.#n.delete(n);else{var s=this.#r.get(n);s&&(this.#t.set(n,s.effect),this.#r.delete(n),s.fragment.lastChild.remove(),this.anchor.before(s.fragment),r=s.effect)}for(const[a,i]of this.#e){if(this.#e.delete(a),a===t)break;const l=this.#r.get(i);l&&(He(l.effect),this.#r.delete(i))}for(const[a,i]of this.#t){if(a===n||this.#n.has(a))continue;const l=()=>{if(Array.from(this.#e.values()).includes(a)){var u=document.createDocumentFragment();ba(i,u),u.append(ut()),this.#r.set(a,{effect:i,fragment:u})}else He(i);this.#n.delete(a),this.#t.delete(a)};this.#l||!r?(this.#n.add(a),jt(i,l,!1)):l()}}};#s=t=>{this.#e.delete(t);const n=Array.from(this.#e.values());for(const[r,s]of this.#r)n.includes(r)||(He(s.effect),this.#r.delete(r))};ensure(t,n){var r=se,s=ha();if(n&&!this.#t.has(t)&&!this.#r.has(t))if(s){var a=document.createDocumentFragment(),i=ut();a.append(i),this.#r.set(t,{effect:Ne(()=>n(i)),fragment:a})}else this.#t.set(t,Ne(()=>n(this.anchor)));if(this.#e.set(r,t),s){for(const[l,o]of this.#t)l===t?r.skipped_effects.delete(o):r.skipped_effects.add(o);for(const[l,o]of this.#r)l===t?r.skipped_effects.delete(o.effect):r.skipped_effects.add(o.effect);r.oncommit(this.#a),r.ondiscard(this.#s)}else this.#a()}}function U(e,t,n=!1){var r=new ll(e),s=n?Lt:0;function a(i,l){r.ensure(i,l)}Cr(()=>{var i=!1;t((l,o=!0)=>{i=!0,a(o,l)}),i||a(!1,null)},s)}const Es=[...` 	
\r\fÂ \v\uFEFF`];function cl(e,t,n){var r=e==null?"":""+e;if(n){for(var s in n)if(n[s])r=r?r+" "+s:s;else if(r.length)for(var a=s.length,i=0;(i=r.indexOf(s,i))>=0;){var l=i+a;(i===0||Es.includes(r[i-1]))&&(l===r.length||Es.includes(r[l]))?r=(i===0?"":r.substring(0,i))+r.substring(l+1):i=l}}return r===""?null:r}function ul(e,t){return e==null?null:String(e)}function Ge(e,t,n,r,s,a){var i=e.__className;if(i!==n||i===void 0){var l=cl(n,r,a);l==null?e.removeAttribute("class"):e.className=l,e.__className=n}else if(a&&s!==a)for(var o in a){var u=!!a[o];(s==null||u!==!!s[o])&&e.classList.toggle(o,u)}return a}function gt(e,t,n,r){var s=e.__style;if(s!==t){var a=ul(t);a==null?e.removeAttribute("style"):e.style.cssText=a,e.__style=t}return r}const dl=Symbol("is custom element"),fl=Symbol("is html");function N(e,t,n,r){var s=vl(e);s[t]!==(s[t]=n)&&(t==="loading"&&(e[vo]=n),n==null?e.removeAttribute(t):typeof n!="string"&&hl(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function vl(e){return e.__attributes??={[dl]:e.nodeName.includes("-"),[fl]:e.namespaceURI===ro}}var Ms=new Map;function hl(e){var t=e.getAttribute("is")||e.nodeName,n=Ms.get(t);if(n)return n;Ms.set(t,n=[]);for(var r,s=e,a=Element.prototype;a!==s;){r=io(s);for(var i in r)r[i].set&&n.push(i);s=Js(s)}return n}function Hs(e,t){return e===t||e?.[Tn]===t}function pl(e={},t,n,r){return Ko(()=>{var s,a;return ma(()=>{s=a,a=[],Aa(()=>{e!==n(...a)&&(t(e,...a),s&&Hs(n(...s),e)&&t(null,...s))})}),()=>{an(()=>{a&&Hs(n(...a),e)&&t(null,...a)})}}),e}function fe(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var _l=typeof Symbol=="function"&&Symbol.observable||"@@observable",Ps=_l,rr=()=>Math.random().toString(36).substring(7).split("").join("."),ml={INIT:`@@redux/INIT${rr()}`,REPLACE:`@@redux/REPLACE${rr()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${rr()}`},Dn=ml;function Nr(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Ca(e,t,n){if(typeof e!="function")throw new Error(fe(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(fe(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(fe(1));return n(Ca)(e,t)}let r=e,s=t,a=new Map,i=a,l=0,o=!1;function u(){i===a&&(i=new Map,a.forEach((w,T)=>{i.set(T,w)}))}function d(){if(o)throw new Error(fe(3));return s}function p(w){if(typeof w!="function")throw new Error(fe(4));if(o)throw new Error(fe(5));let T=!0;u();const R=l++;return i.set(R,w),function(){if(T){if(o)throw new Error(fe(6));T=!1,u(),i.delete(R),a=null}}}function _(w){if(!Nr(w))throw new Error(fe(7));if(typeof w.type>"u")throw new Error(fe(8));if(typeof w.type!="string")throw new Error(fe(17));if(o)throw new Error(fe(9));try{o=!0,s=r(s,w)}finally{o=!1}return(a=i).forEach(R=>{R()}),w}function m(w){if(typeof w!="function")throw new Error(fe(10));r=w,_({type:Dn.REPLACE})}function b(){const w=p;return{subscribe(T){if(typeof T!="object"||T===null)throw new Error(fe(11));function R(){const E=T;E.next&&E.next(d())}return R(),{unsubscribe:w(R)}},[Ps](){return this}}}return _({type:Dn.INIT}),{dispatch:_,subscribe:p,getState:d,replaceReducer:m,[Ps]:b}}function gl(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:Dn.INIT})>"u")throw new Error(fe(12));if(typeof n(void 0,{type:Dn.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(fe(13))})}function yl(e){const t=Object.keys(e),n={};for(let a=0;a<t.length;a++){const i=t[a];typeof e[i]=="function"&&(n[i]=e[i])}const r=Object.keys(n);let s;try{gl(n)}catch(a){s=a}return function(i={},l){if(s)throw s;let o=!1;const u={};for(let d=0;d<r.length;d++){const p=r[d],_=n[p],m=i[p],b=_(m,l);if(typeof b>"u")throw l&&l.type,new Error(fe(14));u[p]=b,o=o||b!==m}return o=o||r.length!==Object.keys(i).length,o?u:i}}function Cn(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function wl(...e){return t=>(n,r)=>{const s=t(n,r);let a=()=>{throw new Error(fe(15))};const i={getState:s.getState,dispatch:(o,...u)=>a(o,...u)},l=e.map(o=>o(i));return a=Cn(...l)(s.dispatch),{...s,dispatch:a}}}function xl(e){return Nr(e)&&"type"in e&&typeof e.type=="string"}var Ra=Symbol.for("immer-nothing"),As=Symbol.for("immer-draftable"),Te=Symbol.for("immer-state");function Xe(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Re=Object,Ut=Re.getPrototypeOf,Rn="constructor",Fn="prototype",dr="configurable",On="enumerable",Sn="writable",tn="value",dt=e=>!!e&&!!e[Te];function tt(e){return e?Oa(e)||Bn(e)||!!e[As]||!!e[Rn]?.[As]||qn(e)||Un(e):!1}var kl=Re[Fn][Rn].toString(),Ds=new WeakMap;function Oa(e){if(!e||!jr(e))return!1;const t=Ut(e);if(t===null||t===Re[Fn])return!0;const n=Re.hasOwnProperty.call(t,Rn)&&t[Rn];if(n===Object)return!0;if(!Ot(n))return!1;let r=Ds.get(n);return r===void 0&&(r=Function.toString.call(n),Ds.set(n,r)),r===kl}function cn(e,t,n=!0){un(e)===0?(n?Reflect.ownKeys(e):Re.keys(e)).forEach(s=>{t(s,e[s],e)}):e.forEach((r,s)=>t(s,r,e))}function un(e){const t=e[Te];return t?t.type_:Bn(e)?1:qn(e)?2:Un(e)?3:0}var Cs=(e,t,n=un(e))=>n===2?e.has(t):Re[Fn].hasOwnProperty.call(e,t),fr=(e,t,n=un(e))=>n===2?e.get(t):e[t],zn=(e,t,n,r=un(e))=>{r===2?e.set(t,n):r===3?e.add(n):e[t]=n};function bl(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var Bn=Array.isArray,qn=e=>e instanceof Map,Un=e=>e instanceof Set,jr=e=>typeof e=="object",Ot=e=>typeof e=="function",sr=e=>typeof e=="boolean",at=e=>e.copy_||e.base_,Lr=e=>e.modified_?e.copy_:e.base_;function vr(e,t){if(qn(e))return new Map(e);if(Un(e))return new Set(e);if(Bn(e))return Array[Fn].slice.call(e);const n=Oa(e);if(t===!0||t==="class_only"&&!n){const r=Re.getOwnPropertyDescriptors(e);delete r[Te];let s=Reflect.ownKeys(r);for(let a=0;a<s.length;a++){const i=s[a],l=r[i];l[Sn]===!1&&(l[Sn]=!0,l[dr]=!0),(l.get||l.set)&&(r[i]={[dr]:!0,[Sn]:!0,[On]:l[On],[tn]:e[i]})}return Re.create(Ut(e),r)}else{const r=Ut(e);if(r!==null&&n)return{...e};const s=Re.create(r);return Re.assign(s,e)}}function Fr(e,t=!1){return Vn(e)||dt(e)||(un(e)>1&&Re.defineProperties(e,{set:kn,add:kn,clear:kn,delete:kn}),Re.freeze(e),t&&cn(e,(n,r)=>{Fr(r,!0)},!1)),e}function Il(){Xe(2)}var kn={[tn]:Il};function Vn(e){return e===null||!jr(e)?!0:Re.isFrozen(e)}var Nn="MapSet",hr="Patches",za={};function Vt(e){const t=za[e];return t||Xe(0,e),t}var Tl=e=>!!za[e],nn,Na=()=>nn,Sl=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:Tl(Nn)?Vt(Nn):void 0});function Rs(e,t){t&&(e.patchPlugin_=Vt(hr),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function pr(e){_r(e),e.drafts_.forEach(El),e.drafts_=null}function _r(e){e===nn&&(nn=e.parent_)}var Os=e=>nn=Sl(nn,e);function El(e){const t=e[Te];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function zs(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];if(e!==void 0&&e!==n){n[Te].modified_&&(pr(t),Xe(4)),tt(e)&&(e=Ns(t,e));const{patchPlugin_:s}=t;s&&s.generateReplacementPatches_(n[Te].base_,e,t)}else e=Ns(t,n);return Ml(t,e,!0),pr(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Ra?e:void 0}function Ns(e,t){if(Vn(t))return t;const n=t[Te];if(!n)return Br(t,e.handledSet_,e);if(!Gn(n,e))return t;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(e);Fa(n,e)}return n.copy_}function Ml(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Fr(t,n)}function ja(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var Gn=(e,t)=>e.scope_===t,Hl=[];function La(e,t,n,r){const s=at(e),a=e.type_;if(r!==void 0&&fr(s,r,a)===t){zn(s,r,n,a);return}if(!e.draftLocations_){const l=e.draftLocations_=new Map;cn(s,(o,u)=>{if(dt(u)){const d=l.get(u)||[];d.push(o),l.set(u,d)}})}const i=e.draftLocations_.get(t)??Hl;for(const l of i)zn(s,l,n,a)}function Pl(e,t,n){e.callbacks_.push(function(s){const a=t;if(!a||!Gn(a,s))return;s.mapSetPlugin_?.fixSetContents(a);const i=Lr(a);La(e,a.draft_??a,i,n),Fa(a,s)})}function Fa(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||(e.assigned_?.size??0)>0)){const{patchPlugin_:r}=t;if(r){const s=r.getPath(e);s&&r.generatePatches_(e,s,t)}ja(e)}}function Al(e,t,n){const{scope_:r}=e;if(dt(n)){const s=n[Te];Gn(s,r)&&s.callbacks_.push(function(){En(e);const i=Lr(s);La(e,n,i,t)})}else tt(n)&&e.callbacks_.push(function(){const a=at(e);fr(a,t,e.type_)===n&&r.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&Br(fr(e.copy_,t,e.type_),r.handledSet_,r)})}function Br(e,t,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||dt(e)||t.has(e)||!tt(e)||Vn(e)||(t.add(e),cn(e,(r,s)=>{if(dt(s)){const a=s[Te];if(Gn(a,n)){const i=Lr(a);zn(e,r,i,e.type_),ja(a)}}else tt(s)&&Br(s,t,n)})),e}function Dl(e,t){const n=Bn(e),r={type_:n?1:0,scope_:t?t.scope_:Na(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let s=r,a=qr;n&&(s=[r],a=rn);const{revoke:i,proxy:l}=Proxy.revocable(s,a);return r.draft_=l,r.revoke_=i,[l,r]}var qr={get(e,t){if(t===Te)return e;const n=at(e);if(!Cs(n,t,e.type_))return Cl(e,n,t);const r=n[t];if(e.finalized_||!tt(r))return r;if(r===ar(e.base_,t)){En(e);const s=e.type_===1?+t:t,a=gr(e.scope_,r,e,s);return e.copy_[s]=a}return r},has(e,t){return t in at(e)},ownKeys(e){return Reflect.ownKeys(at(e))},set(e,t,n){const r=Ba(at(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const s=ar(at(e),t),a=s?.[Te];if(a&&a.base_===n)return e.copy_[t]=n,e.assigned_.set(t,!1),!0;if(bl(n,s)&&(n!==void 0||Cs(e.base_,t,e.type_)))return!0;En(e),mr(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_.set(t,!0),Al(e,t,n)),!0},deleteProperty(e,t){return En(e),ar(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),mr(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=at(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{[Sn]:!0,[dr]:e.type_!==1||t!=="length",[On]:r[On],[tn]:n[t]}},defineProperty(){Xe(11)},getPrototypeOf(e){return Ut(e.base_)},setPrototypeOf(){Xe(12)}},rn={};cn(qr,(e,t)=>{rn[e]=function(){const n=arguments;return n[0]=n[0][0],t.apply(this,n)}});rn.deleteProperty=function(e,t){return rn.set.call(this,e,t,void 0)};rn.set=function(e,t,n){return qr.set.call(this,e[0],t,n,e[0])};function ar(e,t){const n=e[Te];return(n?at(n):e)[t]}function Cl(e,t,n){const r=Ba(t,n);return r?tn in r?r[tn]:r.get?.call(e.draft_):void 0}function Ba(e,t){if(!(t in e))return;let n=Ut(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Ut(n)}}function mr(e){e.modified_||(e.modified_=!0,e.parent_&&mr(e.parent_))}function En(e){e.copy_||(e.assigned_=new Map,e.copy_=vr(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Rl=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(t,n,r)=>{if(Ot(t)&&!Ot(n)){const a=n;n=t;const i=this;return function(o=a,...u){return i.produce(o,d=>n.call(this,d,...u))}}Ot(n)||Xe(6),r!==void 0&&!Ot(r)&&Xe(7);let s;if(tt(t)){const a=Os(this),i=gr(a,t,void 0);let l=!0;try{s=n(i),l=!1}finally{l?pr(a):_r(a)}return Rs(a,r),zs(s,a)}else if(!t||!jr(t)){if(s=n(t),s===void 0&&(s=t),s===Ra&&(s=void 0),this.autoFreeze_&&Fr(s,!0),r){const a=[],i=[];Vt(hr).generateReplacementPatches_(t,s,{patches_:a,inversePatches_:i}),r(a,i)}return s}else Xe(1,t)},this.produceWithPatches=(t,n)=>{if(Ot(t))return(i,...l)=>this.produceWithPatches(i,o=>t(o,...l));let r,s;return[this.produce(t,n,(i,l)=>{r=i,s=l}),r,s]},sr(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),sr(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),sr(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){tt(e)||Xe(8),dt(e)&&(e=Ol(e));const t=Os(this),n=gr(t,e,void 0);return n[Te].isManual_=!0,_r(t),n}finishDraft(e,t){const n=e&&e[Te];(!n||!n.isManual_)&&Xe(9);const{scope_:r}=n;return Rs(r,t),zs(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const s=t[n];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}n>-1&&(t=t.slice(n+1));const r=Vt(hr).applyPatches_;return dt(e)?r(e,t):this.produce(e,s=>r(s,t))}};function gr(e,t,n,r){const[s,a]=qn(t)?Vt(Nn).proxyMap_(t,n):Un(t)?Vt(Nn).proxySet_(t,n):Dl(t,n);return(n?.scope_??Na()).drafts_.push(s),a.callbacks_=n?.callbacks_??[],a.key_=r,n&&r!==void 0?Pl(n,a,r):a.callbacks_.push(function(o){o.mapSetPlugin_?.fixSetContents(a);const{patchPlugin_:u}=o;a.modified_&&u&&u.generatePatches_(a,[],o)}),s}function Ol(e){return dt(e)||Xe(10,e),qa(e)}function qa(e){if(!tt(e)||Vn(e))return e;const t=e[Te];let n,r=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=vr(e,t.scope_.immer_.useStrictShallowCopy_),r=t.scope_.immer_.shouldUseStrictIteration()}else n=vr(e,!0);return cn(n,(s,a)=>{zn(n,s,qa(a))},r),t&&(t.finalized_=!1),n}var zl=new Rl,Ua=zl.produce;function Va(e){return({dispatch:n,getState:r})=>s=>a=>typeof a=="function"?a(n,r,e):s(a)}var Nl=Va(),jl=Va,Ll=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Cn:Cn.apply(null,arguments)};function js(e,t){function n(...r){if(t){let s=t(...r);if(!s)throw new Error(lt(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>xl(r)&&r.type===e,n}var Ga=class Wt extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Wt.prototype)}static get[Symbol.species](){return Wt}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Wt(...t[0].concat(this)):new Wt(...t.concat(this))}};function Ls(e){return tt(e)?Ua(e,()=>{}):e}function bn(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function Fl(e){return typeof e=="boolean"}var Bl=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:s=!0,actionCreatorCheck:a=!0}=t??{};let i=new Ga;return n&&(Fl(n)?i.push(Nl):i.push(jl(n.extraArgument))),i},ql="RTK_autoBatch",Fs=e=>t=>{setTimeout(t,e)},Ul=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let s=!0,a=!1,i=!1;const l=new Set,o=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Fs(10):e.type==="callback"?e.queueNotification:Fs(e.timeout),u=()=>{i=!1,a&&(a=!1,l.forEach(d=>d()))};return Object.assign({},r,{subscribe(d){const p=()=>s&&d(),_=r.subscribe(p);return l.add(d),()=>{_(),l.delete(d)}},dispatch(d){try{return s=!d?.meta?.[ql],a=!s,a&&(i||(i=!0,o(u))),r.dispatch(d)}finally{s=!0}}})},Vl=e=>function(n){const{autoBatch:r=!0}=n??{};let s=new Ga(e);return r&&s.push(Ul(typeof r=="object"?r:void 0)),s};function Gl(e){const t=Bl(),{reducer:n=void 0,middleware:r,devTools:s=!0,preloadedState:a=void 0,enhancers:i=void 0}=e||{};let l;if(typeof n=="function")l=n;else if(Nr(n))l=yl(n);else throw new Error(lt(1));let o;typeof r=="function"?o=r(t):o=t();let u=Cn;s&&(u=Ll({trace:!1,...typeof s=="object"&&s}));const d=wl(...o),p=Vl(d);let _=typeof i=="function"?i(p):p();const m=u(..._);return Ca(l,a,m)}function Xa(e){const t={},n=[];let r;const s={addCase(a,i){const l=typeof a=="string"?a:a.type;if(!l)throw new Error(lt(28));if(l in t)throw new Error(lt(29));return t[l]=i,s},addAsyncThunk(a,i){return i.pending&&(t[a.pending.type]=i.pending),i.rejected&&(t[a.rejected.type]=i.rejected),i.fulfilled&&(t[a.fulfilled.type]=i.fulfilled),i.settled&&n.push({matcher:a.settled,reducer:i.settled}),s},addMatcher(a,i){return n.push({matcher:a,reducer:i}),s},addDefaultCase(a){return r=a,s}};return e(s),[t,n,r]}function Xl(e){return typeof e=="function"}function Yl(e,t){let[n,r,s]=Xa(t),a;if(Xl(e))a=()=>Ls(e());else{const l=Ls(e);a=()=>l}function i(l=a(),o){let u=[n[o.type],...r.filter(({matcher:d})=>d(o)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[s]),u.reduce((d,p)=>{if(p)if(dt(d)){const m=p(d,o);return m===void 0?d:m}else{if(tt(d))return Ua(d,_=>p(_,o));{const _=p(d,o);if(_===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return _}}return d},l)}return i.getInitialState=a,i}var Wl=Symbol.for("rtk-slice-createasyncthunk");function Kl(e,t){return`${e}/${t}`}function Ql({creators:e}={}){const t=e?.asyncThunk?.[Wl];return function(r){const{name:s,reducerPath:a=s}=r;if(!s)throw new Error(lt(11));const i=(typeof r.reducers=="function"?r.reducers(Jl()):r.reducers)||{},l=Object.keys(i),o={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(S,E){const j=typeof S=="string"?S:S.type;if(!j)throw new Error(lt(12));if(j in o.sliceCaseReducersByType)throw new Error(lt(13));return o.sliceCaseReducersByType[j]=E,u},addMatcher(S,E){return o.sliceMatchers.push({matcher:S,reducer:E}),u},exposeAction(S,E){return o.actionCreators[S]=E,u},exposeCaseReducer(S,E){return o.sliceCaseReducersByName[S]=E,u}};l.forEach(S=>{const E=i[S],j={reducerName:S,type:Kl(s,S),createNotation:typeof r.reducers=="function"};ec(E)?nc(j,E,u,t):$l(j,E,u)});function d(){const[S={},E=[],j=void 0]=typeof r.extraReducers=="function"?Xa(r.extraReducers):[r.extraReducers],C={...S,...o.sliceCaseReducersByType};return Yl(r.initialState,Q=>{for(let B in C)Q.addCase(B,C[B]);for(let B of o.sliceMatchers)Q.addMatcher(B.matcher,B.reducer);for(let B of E)Q.addMatcher(B.matcher,B.reducer);j&&Q.addDefaultCase(j)})}const p=S=>S,_=new Map,m=new WeakMap;let b;function D(S,E){return b||(b=d()),b(S,E)}function w(){return b||(b=d()),b.getInitialState()}function T(S,E=!1){function j(Q){let B=Q[S];return typeof B>"u"&&E&&(B=bn(m,j,w)),B}function C(Q=p){const B=bn(_,E,()=>new WeakMap);return bn(B,Q,()=>{const M={};for(const[k,H]of Object.entries(r.selectors??{}))M[k]=Zl(H,Q,()=>bn(m,Q,w),E);return M})}return{reducerPath:S,getSelectors:C,get selectors(){return C(j)},selectSlice:j}}const R={name:s,reducer:D,actions:o.actionCreators,caseReducers:o.sliceCaseReducersByName,getInitialState:w,...T(a),injectInto(S,{reducerPath:E,...j}={}){const C=E??a;return S.inject({reducerPath:C,reducer:D},j),{...R,...T(C,!0)}}};return R}}function Zl(e,t,n,r){function s(a,...i){let l=t(a);return typeof l>"u"&&r&&(l=n()),e(l,...i)}return s.unwrapped=e,s}var Ya=Ql();function Jl(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function $l({type:e,reducerName:t,createNotation:n},r,s){let a,i;if("reducer"in r){if(n&&!tc(r))throw new Error(lt(17));a=r.reducer,i=r.prepare}else a=r;s.addCase(e,a).exposeCaseReducer(t,a).exposeAction(t,i?js(e,i):js(e))}function ec(e){return e._reducerDefinitionType==="asyncThunk"}function tc(e){return e._reducerDefinitionType==="reducerWithPrepare"}function nc({type:e,reducerName:t},n,r,s){if(!s)throw new Error(lt(18));const{payloadCreator:a,fulfilled:i,pending:l,rejected:o,settled:u,options:d}=n,p=s(e,a,d);r.exposeAction(t,p),i&&r.addCase(p.fulfilled,i),l&&r.addCase(p.pending,l),o&&r.addCase(p.rejected,o),u&&r.addMatcher(p.settled,u),r.exposeCaseReducer(t,{fulfilled:i||In,pending:l||In,rejected:o||In,settled:u||In})}function In(){}function lt(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}const Wa={quinn:{level1:{level:1,hp:8,maxHp:8,ac:17,surgeValue:4,attackBonus:6,damage:2},level2:{level:2,hp:10,maxHp:10,ac:18,surgeValue:5,attackBonus:7,damage:2}},vistra:{level1:{level:1,hp:10,maxHp:10,ac:18,surgeValue:5,attackBonus:8,damage:2},level2:{level:2,hp:12,maxHp:12,ac:19,surgeValue:6,attackBonus:9,damage:2}},keyleth:{level1:{level:1,hp:10,maxHp:10,ac:18,surgeValue:5,attackBonus:7,damage:2},level2:{level:2,hp:12,maxHp:12,ac:19,surgeValue:6,attackBonus:8,damage:2}},tarak:{level1:{level:1,hp:8,maxHp:8,ac:17,surgeValue:4,attackBonus:7,damage:2},level2:{level:2,hp:10,maxHp:10,ac:18,surgeValue:5,attackBonus:8,damage:2}},haskan:{level1:{level:1,hp:6,maxHp:6,ac:14,surgeValue:3,attackBonus:4,damage:1},level2:{level:2,hp:8,maxHp:8,ac:15,surgeValue:4,attackBonus:5,damage:1}}},Ka=5,rc={kobold:{attackBonus:5,damage:1},snake:{attackBonus:4,damage:1},cultist:{attackBonus:5,damage:1}},dn=[{id:"kobold",name:"Kobold Dragonshield",ac:14,hp:1,maxHp:1,xp:1,imagePath:"assets/Monster_KoboldDragonshield.png"},{id:"snake",name:"Snake",ac:12,hp:1,maxHp:1,xp:1,imagePath:"assets/Monster_Snake.png"},{id:"cultist",name:"Cultist",ac:13,hp:2,maxHp:2,xp:1,imagePath:"assets/Monster_Cultist.png"}],sc=["kobold","kobold","kobold","snake","snake","snake","cultist","cultist","cultist"],ct=[{id:"quinn",name:"Quinn",heroClass:"Cleric",imagePath:"assets/Hero_Cleric_Quinn.png",speed:5,attack:{name:"Mace",attackBonus:6,damage:2,range:1},hp:8,maxHp:8,ac:17},{id:"vistra",name:"Vistra",heroClass:"Fighter",imagePath:"assets/Hero_Fighter_Vistra.png",speed:5,attack:{name:"Warhammer",attackBonus:8,damage:2,range:1},hp:10,maxHp:10,ac:18},{id:"keyleth",name:"Keyleth",heroClass:"Paladin",imagePath:"assets/Hero_Paladin_Keyleth.png",speed:6,attack:{name:"Longsword",attackBonus:7,damage:2,range:1},hp:10,maxHp:10,ac:18},{id:"tarak",name:"Tarak",heroClass:"Rogue",imagePath:"assets/Hero_Rogue_Tarak.png",speed:6,attack:{name:"Short Sword",attackBonus:7,damage:2,range:1},hp:8,maxHp:8,ac:17},{id:"haskan",name:"Haskan",heroClass:"Wizard",imagePath:"assets/Hero_Wizard_Haskan.png",speed:6,attack:{name:"Quarterstaff",attackBonus:4,damage:1,range:1},hp:6,maxHp:6,ac:14}],ac=[{x:1,y:2},{x:2,y:2},{x:3,y:2},{x:3,y:3},{x:3,y:4},{x:1,y:5},{x:2,y:5},{x:3,y:5}],Qa=[{tileType:"tile-2exit-a",imagePath:"assets/Tile_Black_x2_01.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-2exit-b",imagePath:"assets/Tile_Black_x2_02.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-2exit-c",imagePath:"assets/Tile_Black_x2_03.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-3exit-a",imagePath:"assets/Tile_Black_x3_01.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-3exit-b",imagePath:"assets/Tile_Black_x3_02.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-3exit-c",imagePath:"assets/Tile_Black_x3_03.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-4exit-a",imagePath:"assets/Tile_Black_x4_01.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-4exit-b",imagePath:"assets/Tile_Black_x4_02.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}}],ic=["tile-2exit-a","tile-2exit-b","tile-2exit-c","tile-3exit-a","tile-3exit-b","tile-3exit-c","tile-4exit-a","tile-4exit-b"],oc={id:"start-tile",tileType:"start",position:{col:0,row:0},rotation:0,edges:{north:"unexplored",south:"unexplored",east:"unexplored",west:"unexplored"}},lc={availableHeroes:ct,selectedHeroes:[],heroEdgeMap:{}},Za=Ya({name:"heroes",initialState:lc,reducers:{toggleHeroSelection:(e,t)=>{const n=t.payload,r=e.selectedHeroes.findIndex(s=>s.id===n);if(r>=0)e.selectedHeroes.splice(r,1),delete e.heroEdgeMap[n];else if(e.selectedHeroes.length<5){const s=e.availableHeroes.find(a=>a.id===n);s&&e.selectedHeroes.push(s)}},selectHeroFromEdge:(e,t)=>{const{heroId:n,edge:r}=t.payload,s=e.selectedHeroes.findIndex(a=>a.id===n);if(s>=0)e.heroEdgeMap[n]===r&&(e.selectedHeroes.splice(s,1),delete e.heroEdgeMap[n]);else if(e.selectedHeroes.length<5){const a=e.availableHeroes.find(i=>i.id===n);a&&(e.selectedHeroes.push(a),e.heroEdgeMap[n]=r)}},clearSelection:e=>{e.selectedHeroes=[],e.heroEdgeMap={}}}}),{toggleHeroSelection:wd,selectHeroFromEdge:cc,clearSelection:xd}=Za.actions,uc=Za.reducer,Kt={minX:1,maxX:3,minY:0,maxY:7,staircase:[{x:1,y:3},{x:2,y:3},{x:1,y:4},{x:2,y:4}]},Rt=4,dc=4,fc=8;function fn(e){const{col:t,row:n}=e.position;if(e.tileType==="start")return{minX:0,maxX:3,minY:0,maxY:7};let r,s;return t>0?r=dc+(t-1)*Rt:t<0?r=t*Rt:r=0,n>0?s=fc+(n-1)*Rt:n<0?s=n*Rt:s=0,{minX:r,maxX:r+Rt-1,minY:s,maxY:s+Rt-1}}function sn(e,t){for(const n of t.tiles){const r=fn(n);if(e.x>=r.minX&&e.x<=r.maxX&&e.y>=r.minY&&e.y<=r.maxY)return n}return null}function vc(e){return e.x>=Kt.minX&&e.x<=Kt.maxX&&e.y>=Kt.minY&&e.y<=Kt.maxY}function Ja(e){return Kt.staircase.some(t=>t.x===e.x&&t.y===e.y)}function hc(e,t){return vc(e)&&!Ja(e)}function pc(e,t,n){return t.some(r=>r.position.x===e.x&&r.position.y===e.y&&r.heroId!==n)}function _c(e,t,n,r){const s=fn(r),a=r.tileType==="start"?1:s.minX,i=e.y===s.minY,l=e.y===s.maxY,o=e.x===s.maxX,u=e.x===a,d=n<0?"north":n>0?"south":null,p=t<0?"west":t>0?"east":null;if(!d||!p)return!1;let _=!1,m=!1;return d==="north"&&i&&r.edges.north==="wall"&&(_=!0),d==="south"&&l&&r.edges.south==="wall"&&(_=!0),p==="east"&&o&&r.edges.east==="wall"&&(m=!0),p==="west"&&u&&r.edges.west==="wall"&&(m=!0),_&&m}function mc(e,t,n,r){const s=r.x-n.x,a=r.y-n.y;if(s!==0&&a!==0)return!1;let i,l;return a<0?(i="north",l="south"):a>0?(i="south",l="north"):s>0?(i="east",l="west"):(i="west",l="east"),!(e.edges[i]!=="open"||t.edges[l]!=="open")}function Ur(e,t){const n=[],r=[{dx:0,dy:-1,cardinal:!0},{dx:0,dy:1,cardinal:!0},{dx:-1,dy:0,cardinal:!0},{dx:1,dy:0,cardinal:!0},{dx:-1,dy:-1,cardinal:!1},{dx:1,dy:-1,cardinal:!1},{dx:-1,dy:1,cardinal:!1},{dx:1,dy:1,cardinal:!1}];if(!t){for(const a of r){const i={x:e.x+a.dx,y:e.y+a.dy};hc(i)&&n.push(i)}return n}const s=sn(e,t);if(!s)return n;for(const a of r){const i={x:e.x+a.dx,y:e.y+a.dy},l=sn(i,t);if(l&&!(l.tileType==="start"&&(Ja(i)||i.x<1))){if(s.id===l.id){if(!a.cardinal&&_c(e,a.dx,a.dy,s))continue;n.push(i);continue}a.cardinal&&mc(s,l,e,i)&&n.push(i)}}return n}function gc(e,t,n,r,s){const a=[],i=new Set,l=[{pos:e,distance:0}];for(i.add(`${e.x},${e.y}`);l.length>0;){const o=l.shift();if(!o)break;if(o.distance>0&&!pc(o.pos,n,r)&&a.push(o.pos),o.distance<t){const u=Ur(o.pos,s);for(const d of u){const p=`${d.x},${d.y}`;i.has(p)||(i.add(p),l.push({pos:d,distance:o.distance+1}))}}}return a}function yc(e,t){return t.some(n=>n.x===e.x&&n.y===e.y)}const wc={north:[{x:1,y:0},{x:2,y:0},{x:3,y:0}],south:[{x:1,y:7},{x:2,y:7},{x:3,y:7}],east:[{x:3,y:0},{x:3,y:1},{x:3,y:2},{x:3,y:5},{x:3,y:6},{x:3,y:7}],west:[{x:1,y:0},{x:1,y:1},{x:1,y:2},{x:1,y:5},{x:1,y:6},{x:1,y:7}]};function xc(e,t){return wc[t].some(r=>r.x===e.x&&r.y===e.y)}function Vr(e){return{north:"south",south:"north",east:"west",west:"east"}[e]}function kc(e,t){const n=t.tiles.find(r=>r.id==="start-tile");if(!n)return null;for(const r of t.unexploredEdges)if(r.tileId===n.id&&xc(e.position,r.direction))return r;return null}function bc(e,t){const{col:n,row:r}=e.position;switch(t){case"north":return{col:n,row:r-1};case"south":return{col:n,row:r+1};case"east":return{col:n+1,row:r};case"west":return{col:n-1,row:r}}}function Ic(e){const t=Vr(e);return{south:0,west:90,north:180,east:270}[t]}function Tc(e){return Qa.find(t=>t.tileType===e)}function Sc(e,t,n){const r=n.tiles.find(d=>d.id===e.tileId);if(!r)return null;const s=bc(r,e.direction),a=Ic(e.direction);if(!Tc(t))return null;const l=`tile-${n.tiles.length}`,u={north:"unexplored",south:"unexplored",east:"unexplored",west:"unexplored",[Vr(e.direction)]:"open"};return{id:l,tileType:t,position:s,rotation:a,edges:u}}function yr(){return{tiles:[{...oc}],unexploredEdges:[{tileId:"start-tile",direction:"north"},{tileId:"start-tile",direction:"south"},{tileId:"start-tile",direction:"east"},{tileId:"start-tile",direction:"west"}],tileDeck:[]}}function Ec(e,t=Math.random){const n=[...e];for(let r=n.length-1;r>0;r--){const s=Math.floor(t()*(r+1));[n[r],n[s]]=[n[s],n[r]]}return n}function Mc(e,t=Math.random){return Ec(e,t)}function Hc(e){if(e.length===0)return{drawnTile:null,remainingDeck:[]};const[t,...n]=e;return{drawnTile:t,remainingDeck:n}}function Pc(e,t,n){const r=e.unexploredEdges.filter(o=>!(o.tileId===t.tileId&&o.direction===t.direction)),s=Vr(t.direction),i=["north","south","east","west"].filter(o=>o!==s&&n.edges[o]==="unexplored").map(o=>({tileId:n.id,direction:o}));return{tiles:[...e.tiles.map(o=>o.id===t.tileId?{...o,edges:{...o.edges,[t.direction]:"open"}}:o),n],unexploredEdges:[...r,...i],tileDeck:e.tileDeck}}function $a(e,t=Math.random){const n=[...e];for(let r=n.length-1;r>0;r--){const s=Math.floor(t()*(r+1));[n[r],n[s]]=[n[s],n[r]]}return n}function Ac(e=Math.random){return{drawPile:$a([...sc],e),discardPile:[]}}function Dc(e,t=Math.random){if(e.drawPile.length===0){if(e.discardPile.length===0)return{monster:null,deck:e};const s=$a(e.discardPile,t);return{monster:s[0],deck:{drawPile:s.slice(1),discardPile:[]}}}const[n,...r]=e.drawPile;return{monster:n,deck:{drawPile:r,discardPile:e.discardPile}}}function Cc(e,t){return{drawPile:e.drawPile,discardPile:[...e.discardPile,t]}}function Gr(e){return dn.find(t=>t.id===e)}function Rc(e,t,n,r,s){const a=Gr(e);return a?{monsterId:e,instanceId:`${e}-${s}`,position:t,currentHp:a.hp,controllerId:n,tileId:r}:null}const Oc=4,Bs=Math.floor(Oc/2);function zc(){return{x:Bs,y:Bs}}function Nc(e,t){return e.currentHp===0&&t.healingSurges>0}function jc(e,t){return e.currentHp===0&&t.healingSurges===0}function Lc(e,t){const n=e.surgeValue;return{heroState:{...e,currentHp:Math.min(n,e.maxHp)},resources:{...t,healingSurges:t.healingSurges-1}}}function ei(e=Math.random){return Math.floor(e()*20)+1}function Fc(e,t,n=Math.random){const r=ei(n),s=r+e.attackBonus,a=r===20||s>=t,i=r===20;return{roll:r,attackBonus:e.attackBonus,total:s,targetAC:t,isHit:a,damage:a?e.damage:0,isCritical:i}}function Bc(e,t,n){return e.level===1&&t===20&&n.xp>=Ka}function qc(e,t){const n=Wa[e.heroId];if(!n)return console.warn(`Hero levels not found for heroId: ${e.heroId}. Level up skipped.`),{heroState:e,resources:t};const r=n.level2,s=e.maxHp-e.currentHp;return{heroState:{...e,level:2,maxHp:r.maxHp,currentHp:Math.max(1,r.maxHp-s),ac:r.ac,surgeValue:r.surgeValue,attackBonus:r.attackBonus},resources:{...t,xp:t.xp-Ka}}}function Uc(e,t,n){return t===20&&e===2?n+1:n}function wr(e,t){const n=Math.abs(e.x-t.x),r=Math.abs(e.y-t.y);return n<=1&&r<=1&&(n>0||r>0)}function Vc(e){return Gr(e)?.ac}function Gc(e,t){const n=t.tiles.find(s=>s.id===e.tileId);if(!n)return null;const r=fn(n);return{x:r.minX+e.position.x,y:r.minY+e.position.y}}function Xc(e,t,n,r){return r?sn(e,r)?t.filter(a=>{const i=Gc(a,r);return i?wr(e,i):!1}):[]:t.filter(a=>a.tileId===n&&wr(e,a.position))}function jn(e,t){const n=t.tiles.find(s=>s.id===e.tileId);if(!n)return null;const r=fn(n);return{x:r.minX+e.position.x,y:r.minY+e.position.y}}function qs(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function Yc(e,t,n,r){const s=jn(e,r);if(!s)return null;const a=t.filter(u=>{const d=n[u.heroId];return d!==void 0&&d>0});if(a.length===0)return null;const i=new Set,l=[{pos:s,distance:0}];i.add(`${s.x},${s.y}`);let o=null;for(;l.length>0;){const u=l.shift();for(const p of a)p.position.x===u.pos.x&&p.position.y===u.pos.y&&(!o||u.distance<o.distance)&&(o={hero:p,distance:u.distance});if(o&&o.distance<u.distance)break;const d=Ur(u.pos,r);for(const p of d){const _=`${p.x},${p.y}`;i.has(_)||(i.add(_),l.push({pos:p,distance:u.distance+1}))}}return o}function Wc(e,t,n,r){const s=jn(e,r);if(!s)return null;const a=t.filter(i=>{const l=n[i.heroId];return l!==void 0&&l>0});for(const i of a)if(wr(s,i.position))return i;return null}function Kc(e,t,n,r,s){const a=jn(e,s);if(!a)return null;const l=Ur(a,s).filter(d=>{if(n.some(_=>_.position.x===d.x&&_.position.y===d.y))return!1;for(const _ of r){if(_.instanceId===e.instanceId)continue;const m=jn(_,s);if(m&&m.x===d.x&&m.y===d.y)return!1}return!0});if(l.length===0)return null;let o=l[0],u=qs(o,t);for(const d of l){const p=qs(d,t);p<u&&(u=p,o=d)}return o}function Qc(e,t,n=Math.random){const r=rc[e];if(!r)return{roll:1,attackBonus:0,total:1,targetAC:t,isHit:!1,damage:0,isCritical:!1};const s=ei(n),a=s+r.attackBonus,i=s===20||a>=t,l=s===20;return{roll:s,attackBonus:r.attackBonus,total:a,targetAC:t,isHit:i,damage:i?r.damage:0,isCritical:l}}function Zc(e,t,n,r,s,a,i=Math.random){const l=Wc(e,t,n,a);if(l){const d=r[l.heroId]??10,p=Qc(e.monsterId,d,i);return{type:"attack",targetId:l.heroId,result:p}}const o=Yc(e,t,n,a);if(!o)return{type:"none"};const u=Kc(e,o.hero.position,t,s,a);return u?{type:"move",destination:u}:{type:"none"}}function Jc(e,t,n){const r=n.tiles.find(a=>a.id===t);if(!r)return null;const s=fn(r);return{x:e.x-s.minX,y:e.y-s.minY}}function $c(e,t){return sn(e,t)?.id??null}const xr={currentHeroIndex:0,currentPhase:"hero-phase",turnNumber:1},Mn={actionsTaken:[],canMove:!0,canAttack:!0},kr={monstersDefeated:0,monstersToDefeat:2,objective:"Defeat 2 monsters"},br={xp:0,healingSurges:2},eu={currentScreen:"character-select",heroTokens:[],turnState:{...xr},validMoveSquares:[],showingMovement:!1,dungeon:yr(),monsterDeck:{drawPile:[],discardPile:[]},monsters:[],monsterInstanceCounter:0,recentlySpawnedMonsterId:null,attackResult:null,attackTargetId:null,heroHp:[],monsterAttackResult:null,monsterAttackTargetId:null,monsterAttackerId:null,villainPhaseMonsterIndex:0,monsterMoveActionId:null,heroTurnActions:{...Mn},scenario:{...kr},partyResources:{...br},defeatedMonsterXp:null,defeatedMonsterName:null,leveledUpHeroId:null,levelUpOldStats:null,healingSurgeUsedHeroId:null,healingSurgeHpRestored:null,defeatReason:null};function Us(e,t){const n=[...e.actionsTaken,t],r=n.filter(l=>l==="move").length,s=n.filter(l=>l==="attack").length,a=s===0,i=r<2&&!(r===1&&s===1);return{actionsTaken:n,canMove:i,canAttack:a}}function tu(e){const{actionsTaken:t}=e,n=t.filter(s=>s==="move").length,r=t.filter(s=>s==="attack").length;return n>=1&&r>=1||n>=2}function nu(e){let t=e;return()=>(t=t*1103515245+12345&2147483647,t/2147483647)}function ru(e,t=Math.random){const n=[...e];for(let r=n.length-1;r>0;r--){const s=Math.floor(t()*(r+1));[n[r],n[s]]=[n[s],n[r]]}return n}const ti=Ya({name:"game",initialState:eu,reducers:{startGame:(e,t)=>{const{heroIds:n,positions:r,seed:s}=t.payload;if(n.length===0||n.length>5)return;const a=s??Date.now();e.randomSeed=a;let i;const l=nu(a);r?i=r:i=ru(ac,l).slice(0,5),e.heroTokens=n.map((u,d)=>({heroId:u,position:i[d]})),e.turnState={...xr},e.validMoveSquares=[],e.showingMovement=!1;const o=yr();o.tileDeck=Mc([...ic],l),e.dungeon=o,e.monsterDeck=Ac(l),e.monsters=[],e.monsterInstanceCounter=0,e.recentlySpawnedMonsterId=null,e.attackResult=null,e.attackTargetId=null,e.heroHp=n.map(u=>{const d=Wa[u];d||console.warn(`Hero levels not found for ${u}, using defaults`);const p=d?.level1,_=ct.find(T=>T.id===u),m=p?.hp??_?.hp??8,b=p?.ac??_?.ac??17,D=p?.surgeValue??4,w=p?.attackBonus??_?.attack?.attackBonus??6;return{heroId:u,currentHp:m,maxHp:m,level:1,ac:b,surgeValue:D,attackBonus:w}}),e.monsterAttackResult=null,e.monsterAttackTargetId=null,e.monsterAttackerId=null,e.villainPhaseMonsterIndex=0,e.heroTurnActions={...Mn},e.scenario={...kr},e.partyResources={...br},e.defeatedMonsterXp=null,e.defeatedMonsterName=null,e.leveledUpHeroId=null,e.levelUpOldStats=null,e.currentScreen="game-board"},setHeroPosition:(e,t)=>{const n=e.heroTokens.find(r=>r.heroId===t.payload.heroId);n&&(n.position=t.payload.position)},showMovement:(e,t)=>{if(e.turnState.currentPhase!=="hero-phase"||!e.heroTurnActions.canMove)return;const{heroId:n,speed:r}=t.payload,s=e.heroTokens.find(a=>a.heroId===n);s&&(e.validMoveSquares=gc(s.position,r,e.heroTokens,n,e.dungeon),e.showingMovement=!0)},hideMovement:e=>{e.validMoveSquares=[],e.showingMovement=!1},moveHero:(e,t)=>{const{heroId:n,position:r}=t.payload;if(e.turnState.currentPhase!=="hero-phase"||!e.heroTurnActions.canMove||!yc(r,e.validMoveSquares))return;const s=e.heroTokens.find(a=>a.heroId===n);s&&(s.position=r,e.validMoveSquares=[],e.showingMovement=!1,e.heroTurnActions=Us(e.heroTurnActions,"move"))},resetGame:e=>{e.currentScreen="character-select",e.heroTokens=[],e.turnState={...xr},e.randomSeed=void 0,e.validMoveSquares=[],e.showingMovement=!1,e.dungeon=yr(),e.monsterDeck={drawPile:[],discardPile:[]},e.monsters=[],e.monsterInstanceCounter=0,e.recentlySpawnedMonsterId=null,e.attackResult=null,e.attackTargetId=null,e.heroHp=[],e.monsterAttackResult=null,e.monsterAttackTargetId=null,e.monsterAttackerId=null,e.villainPhaseMonsterIndex=0,e.monsterMoveActionId=null,e.heroTurnActions={...Mn},e.scenario={...kr},e.partyResources={...br},e.defeatedMonsterXp=null,e.defeatedMonsterName=null,e.leveledUpHeroId=null,e.levelUpOldStats=null,e.healingSurgeUsedHeroId=null,e.healingSurgeHpRestored=null,e.defeatReason=null},endHeroPhase:e=>{if(e.turnState.currentPhase!=="hero-phase")return;e.recentlySpawnedMonsterId=null;const t=e.heroTokens[e.turnState.currentHeroIndex];if(!t)return;const n=kc(t,e.dungeon);if(n&&e.dungeon.tileDeck.length>0){const{drawnTile:r,remainingDeck:s}=Hc(e.dungeon.tileDeck);if(r){const a=Sc(n,r,e.dungeon);if(a){e.dungeon=Pc(e.dungeon,n,a),e.dungeon.tileDeck=s;const{monster:i,deck:l}=Dc(e.monsterDeck);if(i){const o=zc(),u=Rc(i,o,t.heroId,a.id,e.monsterInstanceCounter);u&&(e.monsters.push(u),e.monsterInstanceCounter+=1,e.recentlySpawnedMonsterId=u.instanceId),e.monsterDeck=l}}}}e.turnState.currentPhase="exploration-phase"},endExplorationPhase:e=>{e.turnState.currentPhase==="exploration-phase"&&(e.turnState.currentPhase="villain-phase",e.villainPhaseMonsterIndex=0,e.monsterAttackResult=null,e.monsterAttackTargetId=null,e.monsterAttackerId=null,e.monsterMoveActionId=null)},endVillainPhase:e=>{if(e.turnState.currentPhase!=="villain-phase")return;e.villainPhaseMonsterIndex=0,e.monsterAttackResult=null,e.monsterAttackTargetId=null,e.monsterAttackerId=null,e.monsterMoveActionId=null,e.healingSurgeUsedHeroId=null,e.healingSurgeHpRestored=null,e.turnState.currentHeroIndex=(e.turnState.currentHeroIndex+1)%e.heroTokens.length,e.turnState.currentHeroIndex===0&&(e.turnState.turnNumber+=1),e.turnState.currentPhase="hero-phase",e.heroTurnActions={...Mn};const t=e.heroTokens[e.turnState.currentHeroIndex]?.heroId;if(t){const n=e.heroHp.findIndex(r=>r.heroId===t);if(n!==-1){const r=e.heroHp[n];if(jc(r,e.partyResources)){const s=ct.find(i=>i.id===t);s||console.warn(`Hero not found in AVAILABLE_HEROES for ID: ${t}`);const a=s?.name??"A hero";e.defeatReason=`${a} fell with no healing surges remaining.`,e.currentScreen="defeat";return}if(Nc(r,e.partyResources)){const s=Lc(r,e.partyResources);e.heroHp[n]=s.heroState,e.partyResources=s.resources,e.healingSurgeUsedHeroId=t,e.healingSurgeHpRestored=r.surgeValue}}}},dismissMonsterCard:e=>{e.recentlySpawnedMonsterId=null},setAttackResult:(e,t)=>{if(e.turnState.currentPhase!=="hero-phase"||!e.heroTurnActions.canAttack)return;const{result:n,targetInstanceId:r}=t.payload;e.attackTargetId=r,e.defeatedMonsterXp=null,e.defeatedMonsterName=null,e.leveledUpHeroId=null,e.levelUpOldStats=null;const s=e.heroTokens[e.turnState.currentHeroIndex]?.heroId,a=e.heroHp.find(l=>l.heroId===s),i=n.isHit&&a?Uc(a.level,n.roll,n.damage):n.damage;if(e.attackResult={...n,damage:i},n.isHit&&i>0){const l=e.monsters.find(o=>o.instanceId===r);if(l&&(l.currentHp-=i,l.currentHp<=0)){const o=Gr(l.monsterId);o||console.warn(`Monster definition not found for ID: ${l.monsterId}`);const u=o?.xp??0;e.partyResources.xp+=u,e.defeatedMonsterXp=u,e.defeatedMonsterName=o?.name??l.monsterId,e.monsters=e.monsters.filter(d=>d.instanceId!==r),e.monsterDeck=Cc(e.monsterDeck,l.monsterId),e.scenario.monstersDefeated+=1,e.scenario.monstersDefeated>=e.scenario.monstersToDefeat&&(e.currentScreen="victory")}}if(a&&s&&Bc(a,n.roll,e.partyResources)){e.levelUpOldStats={...a};const l=qc(a,e.partyResources),o=e.heroHp.findIndex(u=>u.heroId===s);o!==-1&&(e.heroHp[o]=l.heroState),e.partyResources=l.resources,e.leveledUpHeroId=s}e.heroTurnActions=Us(e.heroTurnActions,"attack")},dismissAttackResult:e=>{e.attackResult=null,e.attackTargetId=null},dismissDefeatNotification:e=>{e.defeatedMonsterXp=null,e.defeatedMonsterName=null},dismissLevelUpNotification:e=>{e.leveledUpHeroId=null,e.levelUpOldStats=null},setMonsters:(e,t)=>{e.monsters=t.payload},activateNextMonster:(e,t)=>{if(e.turnState.currentPhase!=="villain-phase")return;const n=e.heroTokens[e.turnState.currentHeroIndex]?.heroId;if(!n)return;const r=e.monsters.filter(u=>u.controllerId===n);if(e.villainPhaseMonsterIndex>=r.length)return;const s=r[e.villainPhaseMonsterIndex];if(!s)return;const a={},i={};for(const u of e.heroHp)a[u.heroId]=u.currentHp;for(const u of e.heroTokens){const d=ct.find(p=>p.id===u.heroId);d&&(i[u.heroId]=d.ac)}const l=t.payload?.randomFn??Math.random,o=Zc(s,e.heroTokens,a,i,e.monsters,e.dungeon,l);if(o.type==="move"){const u=e.monsters.find(d=>d.instanceId===s.instanceId);if(u){const d=$c(o.destination,e.dungeon);if(d){const p=Jc(o.destination,d,e.dungeon);p&&(u.position=p,u.tileId=d)}}e.monsterMoveActionId=s.instanceId}else if(o.type==="attack"&&(e.monsterAttackResult=o.result,e.monsterAttackTargetId=o.targetId,e.monsterAttackerId=s.instanceId,o.result.isHit&&o.result.damage>0)){const u=e.heroHp.find(d=>d.heroId===o.targetId);u&&(u.currentHp=Math.max(0,u.currentHp-o.result.damage),e.heroHp.every(p=>p.currentHp<=0)&&(e.currentScreen="defeat"))}e.villainPhaseMonsterIndex+=1},dismissMonsterAttackResult:e=>{e.monsterAttackResult=null,e.monsterAttackTargetId=null,e.monsterAttackerId=null},dismissMonsterMoveAction:e=>{e.monsterMoveActionId=null},dismissHealingSurgeNotification:e=>{e.healingSurgeUsedHeroId=null,e.healingSurgeHpRestored=null},setHeroHp:(e,t)=>{const{heroId:n,hp:r}=t.payload,s=e.heroHp.find(a=>a.heroId===n);s&&(s.currentHp=Math.max(0,r))},setPartyResources:(e,t)=>{const{xp:n,healingSurges:r}=t.payload;n!==void 0&&(e.partyResources.xp=n),r!==void 0&&(e.partyResources.healingSurges=r)}}}),{startGame:su,setHeroPosition:kd,showMovement:Vs,hideMovement:au,moveHero:iu,resetGame:Xr,endHeroPhase:Gs,endExplorationPhase:ou,endVillainPhase:Xs,dismissMonsterCard:lu,setAttackResult:cu,dismissAttackResult:uu,dismissDefeatNotification:du,setMonsters:bd,activateNextMonster:fu,dismissMonsterAttackResult:vu,dismissMonsterMoveAction:hu,dismissHealingSurgeNotification:pu,setHeroHp:Id,dismissLevelUpNotification:_u,setPartyResources:Td}=ti.actions,mu=ti.reducer,F=Gl({reducer:{heroes:uc,game:mu}});typeof window<"u"&&(window.__REDUX_STORE__=F);function Ee(e){const t="/Ashardalon/",n=e.startsWith("/")?e.slice(1):e;return(t.endsWith("/")?t:t+"/")+n}var gu=q('<button><img class="hero-image svelte-1rwnzlz"/> <div class="hero-info svelte-1rwnzlz"><span class="hero-name svelte-1rwnzlz" data-testid="hero-name"> </span> <span class="hero-class svelte-1rwnzlz"> </span></div></button>'),yu=q('<button><img class="hero-image svelte-1rwnzlz"/> <div class="hero-info svelte-1rwnzlz"><span class="hero-name svelte-1rwnzlz" data-testid="hero-name"> </span> <span class="hero-class svelte-1rwnzlz"> </span></div></button>'),wu=q('<button><img class="hero-image svelte-1rwnzlz"/> <div class="hero-info svelte-1rwnzlz"><span class="hero-name svelte-1rwnzlz" data-testid="hero-name"> </span> <span class="hero-class svelte-1rwnzlz"> </span></div></button>'),xu=q('<button><img class="hero-image svelte-1rwnzlz"/> <div class="hero-info svelte-1rwnzlz"><span class="hero-name svelte-1rwnzlz" data-testid="hero-name"> </span> <span class="hero-class svelte-1rwnzlz"> </span></div></button>'),ku=q('<div class="character-select svelte-1rwnzlz" data-testid="character-select"><div class="edge-zone edge-top svelte-1rwnzlz" data-testid="edge-top"><div class="hero-row svelte-1rwnzlz" data-testid="hero-grid"></div></div> <div class="middle-section svelte-1rwnzlz"><div class="edge-zone edge-left svelte-1rwnzlz" data-testid="edge-left"><div class="hero-column svelte-1rwnzlz"></div></div> <div class="center-zone svelte-1rwnzlz" data-testid="center-zone"><h1 class="svelte-1rwnzlz">Select Your Heroes</h1> <p class="instructions svelte-1rwnzlz">Choose 1-5 heroes for your adventure</p> <p class="instructions svelte-1rwnzlz">Tap a hero from your edge of the table</p> <div class="selection-info svelte-1rwnzlz"><span data-testid="selected-count"> </span></div> <button class="start-button svelte-1rwnzlz" data-testid="start-game-button">Start Adventure</button></div> <div class="edge-zone edge-right svelte-1rwnzlz" data-testid="edge-right"><div class="hero-column svelte-1rwnzlz"></div></div></div> <div class="edge-zone edge-bottom svelte-1rwnzlz" data-testid="edge-bottom"><div class="hero-row svelte-1rwnzlz"></div></div></div>');function bu(e,t){we(t,!0);let n=z(ie([])),r=z(ie([])),s=z(ie({}));it(()=>{const M=F.subscribe(()=>{const H=F.getState();x(n,H.heroes.selectedHeroes,!0),x(r,H.heroes.availableHeroes,!0),x(s,H.heroes.heroEdgeMap,!0)}),k=F.getState();return x(n,k.heroes.selectedHeroes,!0),x(r,k.heroes.availableHeroes,!0),x(s,k.heroes.heroEdgeMap,!0),M});function a(M,k){return c(s)[M]===k}function i(M,k){const H=c(s)[M];return H!==void 0&&H!==k}function l(M,k){F.dispatch(cc({heroId:M,edge:k}))}function o(){c(n).length>0&&F.dispatch(su({heroIds:c(n).map(M=>M.id)}))}function u(){return c(n).length>=1&&c(n).length<=5}var d=ku(),p=f(d),_=f(p);Je(_,21,()=>c(r),M=>M.id,(M,k)=>{var H=gu();let Y;H.__click=()=>l(c(k).id,"top");var ee=f(H),ae=g(ee,2),re=f(ae),ue=f(re),Z=g(re,2),W=f(Z);J((ne,oe,le)=>{Y=Ge(H,1,"hero-card svelte-1rwnzlz",null,Y,ne),N(H,"data-testid",`hero-${c(k).id??""}-top`),H.disabled=oe,N(ee,"src",le),N(ee,"alt",c(k).name),I(ue,c(k).name),I(W,c(k).heroClass)},[()=>({selected:a(c(k).id,"top"),unavailable:i(c(k).id,"top")}),()=>i(c(k).id,"top"),()=>Ee(c(k).imagePath)]),P(M,H)});var m=g(p,2),b=f(m),D=f(b);Je(D,21,()=>c(r),M=>M.id,(M,k)=>{var H=yu();let Y;H.__click=()=>l(c(k).id,"left");var ee=f(H),ae=g(ee,2),re=f(ae),ue=f(re),Z=g(re,2),W=f(Z);J((ne,oe,le)=>{Y=Ge(H,1,"hero-card svelte-1rwnzlz",null,Y,ne),N(H,"data-testid",`hero-${c(k).id??""}-left`),H.disabled=oe,N(ee,"src",le),N(ee,"alt",c(k).name),I(ue,c(k).name),I(W,c(k).heroClass)},[()=>({selected:a(c(k).id,"left"),unavailable:i(c(k).id,"left")}),()=>i(c(k).id,"left"),()=>Ee(c(k).imagePath)]),P(M,H)});var w=g(b,2),T=g(f(w),6),R=f(T),S=f(R),E=g(T,2);E.__click=o;var j=g(w,2),C=f(j);Je(C,21,()=>c(r),M=>M.id,(M,k)=>{var H=wu();let Y;H.__click=()=>l(c(k).id,"right");var ee=f(H),ae=g(ee,2),re=f(ae),ue=f(re),Z=g(re,2),W=f(Z);J((ne,oe,le)=>{Y=Ge(H,1,"hero-card svelte-1rwnzlz",null,Y,ne),N(H,"data-testid",`hero-${c(k).id??""}-right`),H.disabled=oe,N(ee,"src",le),N(ee,"alt",c(k).name),I(ue,c(k).name),I(W,c(k).heroClass)},[()=>({selected:a(c(k).id,"right"),unavailable:i(c(k).id,"right")}),()=>i(c(k).id,"right"),()=>Ee(c(k).imagePath)]),P(M,H)});var Q=g(m,2),B=f(Q);Je(B,21,()=>c(r),M=>M.id,(M,k)=>{var H=xu();let Y;H.__click=()=>l(c(k).id,"bottom");var ee=f(H),ae=g(ee,2),re=f(ae),ue=f(re),Z=g(re,2),W=f(Z);J((ne,oe,le)=>{Y=Ge(H,1,"hero-card svelte-1rwnzlz",null,Y,ne),N(H,"data-testid",`hero-${c(k).id??""}`),H.disabled=oe,N(ee,"src",le),N(ee,"alt",c(k).name),I(ue,c(k).name),I(W,c(k).heroClass)},[()=>({selected:a(c(k).id,"bottom"),unavailable:i(c(k).id,"bottom")}),()=>i(c(k).id,"bottom"),()=>Ee(c(k).imagePath)]),P(M,H)}),J(M=>{I(S,`${c(n).length??""} heroes selected`),E.disabled=M},[()=>!u()]),P(e,d),xe()}Fe(["click"]);var Iu=q('<button class="move-square svelte-ehd1hj" data-testid="move-square"><span class="sr-only svelte-ehd1hj"> </span></button>'),Tu=q('<div class="movement-overlay svelte-ehd1hj" data-testid="movement-overlay"></div>');function Su(e,t){we(t,!0);function n(a){const i=t.tileOffsetX+a.x*t.cellSize,l=t.tileOffsetY+a.y*t.cellSize;return`left: ${i}px; top: ${l}px; width: ${t.cellSize}px; height: ${t.cellSize}px;`}function r(a,i){a.stopPropagation(),t.onSquareClick(i)}var s=Tu();Je(s,21,()=>t.validMoveSquares,a=>`${a.x},${a.y}`,(a,i)=>{var l=Iu();l.__click=d=>r(d,c(i));var o=f(l),u=f(o);J(d=>{N(l,"data-position-x",c(i).x),N(l,"data-position-y",c(i).y),gt(l,d),I(u,`Move to (${c(i).x??""}, ${c(i).y??""})`)},[()=>n(c(i))]),P(a,l)}),P(e,s),xe()}Fe(["click"]);var Eu=q('<div class="tile-deck-counter svelte-9649r" data-testid="tile-deck-counter"><span class="deck-icon svelte-9649r">ð¦</span> <span class="deck-count svelte-9649r" data-testid="tile-deck-count"> </span> <span class="deck-label svelte-9649r">tiles</span></div>');function Mu(e,t){var n=Eu(),r=g(f(n),2),s=f(r);J(()=>I(s,t.tileCount)),P(e,n)}var Hu=q('<div class="unexplored-edge svelte-12eown4" data-testid="unexplored-edge"><span class="question-mark svelte-12eown4">?</span></div>');function Pu(e,t){we(t,!0);const r=(()=>{const l=t.cellSize*1.5,o=36;switch(t.direction){case"north":return{left:`${t.tileWidth/2-l/2}px`,top:`${o-8/2}px`,width:`${l}px`,height:"8px"};case"south":return{left:`${t.tileWidth/2-l/2}px`,bottom:`${o-8/2}px`,width:`${l}px`,height:"8px"};case"east":return{right:`${o-8/2}px`,top:`${t.tileHeight/2-l/2}px`,width:"8px",height:`${l}px`};case"west":return{left:`${o-8/2}px`,top:`${t.tileHeight/2-l/2}px`,width:"8px",height:`${l}px`}}})(),s=Object.entries(r).map(([i,l])=>`${i}: ${l}`).join("; ");var a=Hu();J(()=>{N(a,"data-direction",t.direction),gt(a,s)}),P(e,a),xe()}var Au=q('<div class="monster-token svelte-1g5ysl" data-testid="monster-token"><img class="token-image svelte-1g5ysl"/> <span class="token-label svelte-1g5ysl"> </span></div>');function Du(e,t){we(t,!0);const n=X(()=>dn.find(l=>l.id===t.monster.monsterId)),r=X(()=>()=>{const l=t.cellSize/2,o=t.tilePixelOffset.x+t.tileOffsetX+t.monster.position.x*t.cellSize+l,u=t.tilePixelOffset.y+t.tileOffsetY+t.monster.position.y*t.cellSize+l;return`left: ${o}px; top: ${u}px;`});var s=he(),a=ve(s);{var i=l=>{var o=Au(),u=f(o),d=g(u,2),p=f(d);J((_,m)=>{N(o,"data-monster-id",t.monster.instanceId),gt(o,_),N(u,"src",m),N(u,"alt",c(n).name),I(p,c(n).name)},[()=>c(r)(),()=>Ee(c(n).imagePath)]),P(l,o)};U(a,l=>{c(n)&&l(i)})}P(e,s),xe()}var Cu=q('<div class="monster-card-overlay svelte-at5lsg" role="dialog" aria-modal="true" aria-label="Monster spawned" tabindex="0" data-testid="monster-card-overlay"><div class="monster-card svelte-at5lsg" role="article" data-testid="monster-card"><div class="card-header svelte-at5lsg"><h3 class="monster-name svelte-at5lsg" data-testid="monster-name"> </h3> <button class="dismiss-button svelte-at5lsg" aria-label="Dismiss monster card" data-testid="dismiss-monster-card">â</button></div> <div class="card-image svelte-at5lsg"><img class="monster-image svelte-at5lsg"/></div> <div class="card-stats svelte-at5lsg"><div class="stat svelte-at5lsg"><span class="stat-label svelte-at5lsg">AC</span> <span class="stat-value svelte-at5lsg" data-testid="monster-ac"> </span></div> <div class="stat svelte-at5lsg"><span class="stat-label svelte-at5lsg">HP</span> <span class="stat-value svelte-at5lsg" data-testid="monster-hp"> </span></div> <div class="stat svelte-at5lsg"><span class="stat-label svelte-at5lsg">XP</span> <span class="stat-value svelte-at5lsg" data-testid="monster-xp"> </span></div></div> <p class="card-hint svelte-at5lsg">Click anywhere to dismiss</p></div></div>');function Ru(e,t){we(t,!0);const n=X(()=>dn.find(o=>o.id===t.monsterId));function r(){t.onDismiss&&t.onDismiss()}function s(o){(o.key==="Escape"||o.key==="Enter"||o.key===" ")&&(o.preventDefault(),r())}var a=he(),i=ve(a);{var l=o=>{var u=Cu();u.__click=r,u.__keydown=s;var d=f(u);d.__click=H=>H.stopPropagation(),d.__keydown=H=>H.stopPropagation();var p=f(d),_=f(p),m=f(_),b=g(_,2);b.__click=r;var D=g(p,2),w=f(D),T=g(D,2),R=f(T),S=g(f(R),2),E=f(S),j=g(R,2),C=g(f(j),2),Q=f(C),B=g(j,2),M=g(f(B),2),k=f(M);J(H=>{I(m,c(n).name),N(w,"src",H),N(w,"alt",c(n).name),I(E,c(n).ac),I(Q,c(n).hp),I(k,c(n).xp)},[()=>Ee(c(n).imagePath)]),P(o,u)};U(i,o=>{c(n)&&o(l)})}P(e,a),xe()}Fe(["click","keydown"]);var Ou=q('<button class="attack-button svelte-1ea4ae8" data-testid="attack-button"> </button>'),zu=q('<div class="attack-panel svelte-1ea4ae8" data-testid="attack-panel"><div class="attack-header svelte-1ea4ae8"><span class="attack-label svelte-1ea4ae8"> </span> <span class="attack-stats svelte-1ea4ae8"> </span></div> <div class="attack-targets svelte-1ea4ae8"></div></div>');function Nu(e,t){we(t,!0);function n(l){return dn.find(u=>u.id===l)?.name||"Unknown"}function r(l){t.onAttack(l)}var s=he(),a=ve(s);{var i=l=>{var o=zu(),u=f(o),d=f(u),p=f(d),_=g(d,2),m=f(_),b=g(u,2);Je(b,21,()=>t.adjacentMonsters,D=>D.instanceId,(D,w)=>{var T=Ou();T.__click=()=>r(c(w).instanceId);var R=f(T);J((S,E)=>{N(T,"data-target-id",c(w).instanceId),N(T,"aria-label",`Attack ${S??""}`),I(R,`Attack ${E??""}`)},[()=>n(c(w).monsterId),()=>n(c(w).monsterId)]),P(D,T)}),J(()=>{I(p,`Attack with ${t.heroAttack.name??""}`),I(m,`+${t.heroAttack.attackBonus??""} / ${t.heroAttack.damage??""} dmg`)}),P(l,o)};U(a,l=>{t.adjacentMonsters.length>0&&l(i)})}P(e,s),xe()}Fe(["click"]);var ju=q('<span class="result-text critical svelte-1jt2qdd" data-testid="result-text">âï¸ CRITICAL HIT!</span>'),Lu=q('<span class="result-text hit svelte-1jt2qdd" data-testid="result-text">â HIT!</span>'),Fu=q('<span class="result-text miss svelte-1jt2qdd" data-testid="result-text">â MISS!</span>'),Bu=q('<div class="damage-info svelte-1jt2qdd" data-testid="damage-info"><span class="damage-value svelte-1jt2qdd"> </span> <span class="damage-label svelte-1jt2qdd"> </span></div>'),qu=q('<div class="combat-result-overlay svelte-1jt2qdd" role="dialog" aria-modal="true" aria-label="Combat result" tabindex="0" data-testid="combat-result-overlay"><div role="document" data-testid="combat-result"><div class="result-header svelte-1jt2qdd"><h3 class="attacker-info svelte-1jt2qdd" data-testid="attacker-info"> </h3> <button class="dismiss-button svelte-1jt2qdd" aria-label="Dismiss combat result" data-testid="dismiss-combat-result">â</button></div> <div class="dice-roll-section svelte-1jt2qdd"><div class="dice-container svelte-1jt2qdd"><span class="d20-icon svelte-1jt2qdd" aria-label="D20 die">D20</span> <span class="roll-value svelte-1jt2qdd" data-testid="roll-value"> </span></div> <div class="roll-breakdown svelte-1jt2qdd"><div class="breakdown-row svelte-1jt2qdd"><span class="breakdown-label svelte-1jt2qdd">Roll:</span> <span class="breakdown-value svelte-1jt2qdd" data-testid="dice-roll"> </span></div> <div class="breakdown-row svelte-1jt2qdd"><span class="breakdown-label svelte-1jt2qdd">+ Bonus:</span> <span class="breakdown-value svelte-1jt2qdd" data-testid="attack-bonus"> </span></div> <div class="breakdown-divider svelte-1jt2qdd"></div> <div class="breakdown-row total svelte-1jt2qdd"><span class="breakdown-label svelte-1jt2qdd">Total:</span> <span class="breakdown-value svelte-1jt2qdd" data-testid="attack-total"> </span></div> <div class="breakdown-row target svelte-1jt2qdd"><span class="breakdown-label svelte-1jt2qdd">vs AC:</span> <span class="breakdown-value svelte-1jt2qdd" data-testid="target-ac"> </span></div></div></div> <div class="result-section svelte-1jt2qdd"><!> <!></div> <p class="dismiss-hint svelte-1jt2qdd">Click anywhere to dismiss</p></div></div>');function Ys(e,t){we(t,!0);function n(){t.onDismiss&&t.onDismiss()}function r(W){(W.key==="Escape"||W.key==="Enter"||W.key===" ")&&(W.preventDefault(),n())}var s=qu();s.__click=n,s.__keydown=r;var a=f(s);let i;a.__click=W=>W.stopPropagation(),a.__keydown=W=>W.stopPropagation();var l=f(a),o=f(l),u=f(o),d=g(o,2);d.__click=n;var p=g(l,2),_=f(p),m=g(f(_),2),b=f(m),D=g(_,2),w=f(D),T=g(f(w),2),R=f(T),S=g(w,2),E=g(f(S),2),j=f(E),C=g(S,4),Q=g(f(C),2),B=f(Q),M=g(C,2),k=g(f(M),2),H=f(k),Y=g(p,2),ee=f(Y);{var ae=W=>{var ne=ju();P(W,ne)},re=W=>{var ne=he(),oe=ve(ne);{var le=_e=>{var Ke=Lu();P(_e,Ke)},We=_e=>{var Ke=Fu();P(_e,Ke)};U(oe,_e=>{t.result.isHit?_e(le):_e(We,!1)},!0)}P(W,ne)};U(ee,W=>{t.result.isCritical?W(ae):W(re,!1)})}var ue=g(ee,2);{var Z=W=>{var ne=Bu(),oe=f(ne),le=f(oe),We=g(oe,2),_e=f(We);J(()=>{I(le,t.result.damage),I(_e,`damage to ${t.targetName??""}`)}),P(W,ne)};U(ue,W=>{t.result.isHit&&W(Z)})}J(()=>{i=Ge(a,1,"combat-result svelte-1jt2qdd",null,i,{hit:t.result.isHit,miss:!t.result.isHit,critical:t.result.isCritical}),I(u,`${t.attackerName??""} attacks with ${t.attackName??""}!`),I(b,t.result.roll),I(R,t.result.roll),I(j,t.result.attackBonus),I(B,t.result.total),I(H,t.result.targetAC)}),P(e,s),xe()}Fe(["click","keydown"]);var Uu=q('<div class="monster-move-overlay svelte-18np0et" role="dialog" aria-modal="true" aria-label="Monster move result" tabindex="0" data-testid="monster-move-overlay"><div class="monster-move-card svelte-18np0et" role="document" data-testid="monster-move-card"><div class="move-header svelte-18np0et"><h3 class="monster-name svelte-18np0et" data-testid="monster-name"> </h3> <button class="dismiss-button svelte-18np0et" aria-label="Dismiss monster move result" data-testid="dismiss-monster-move">â</button></div> <div class="move-content svelte-18np0et"><span class="move-icon svelte-18np0et">ð</span> <p class="move-text svelte-18np0et" data-testid="move-text">Moved but could not attack</p></div> <p class="dismiss-hint svelte-18np0et">Click anywhere to continue</p></div></div>');function Vu(e,t){we(t,!0);function n(){t.onDismiss&&t.onDismiss()}function r(d){(d.key==="Escape"||d.key==="Enter"||d.key===" ")&&(d.preventDefault(),n())}var s=Uu();s.__click=n,s.__keydown=r;var a=f(s);a.__click=d=>d.stopPropagation(),a.__keydown=d=>d.stopPropagation();var i=f(a),l=f(i),o=f(l),u=g(l,2);u.__click=n,J(()=>I(o,t.monsterName)),P(e,s),xe()}Fe(["click","keydown"]);var Gu=q('<div class="xp-counter svelte-1ymh8ps" data-testid="xp-counter"><span class="xp-icon svelte-1ymh8ps" aria-label="Experience Points">â­</span> <span class="xp-label svelte-1ymh8ps">XP:</span> <span class="xp-value svelte-1ymh8ps" data-testid="xp-value"> </span></div>');function Xu(e,t){var n=Gu(),r=g(f(n),4),s=f(r);J(()=>I(s,t.xp)),P(e,n)}var Yu=q('<div class="healing-surge-counter svelte-121e3gw" data-testid="healing-surge-counter"><span class="surge-icon svelte-121e3gw" aria-label="Healing Surges">â¤ï¸</span> <span class="surge-label svelte-121e3gw">Surges:</span> <span class="surge-value svelte-121e3gw" data-testid="surge-value"> </span></div>');function Wu(e,t){var n=Yu(),r=g(f(n),4),s=f(r);J(()=>I(s,t.surges)),P(e,n)}var Ku=q('<div class="defeat-overlay svelte-1h38uhv" role="dialog" aria-modal="true" aria-label="Monster defeated notification" tabindex="0" data-testid="defeat-notification-overlay"><div class="defeat-notification svelte-1h38uhv" role="dialog" aria-labelledby="defeat-title" tabindex="-1" data-testid="defeat-notification"><div class="defeat-header svelte-1h38uhv"><span class="defeat-icon svelte-1h38uhv">ð</span> <h3 class="defeat-title svelte-1h38uhv" id="defeat-title" data-testid="defeat-title"> </h3> <button class="dismiss-button svelte-1h38uhv" aria-label="Dismiss notification" data-testid="dismiss-defeat-notification">â</button></div> <div class="xp-gain-section svelte-1h38uhv" data-testid="xp-gain-section"><span class="xp-icon svelte-1h38uhv">â­</span> <span class="xp-amount svelte-1h38uhv" data-testid="xp-amount"> </span></div> <p class="dismiss-hint svelte-1h38uhv">Click anywhere to dismiss</p></div></div>');function Qu(e,t){we(t,!0);function n(){t.onDismiss&&t.onDismiss()}function r(m){(m.key==="Escape"||m.key==="Enter"||m.key===" ")&&(m.preventDefault(),n())}var s=Ku();s.__click=n,s.__keydown=r;var a=f(s);a.__click=m=>m.stopPropagation(),a.__keydown=m=>m.stopPropagation();var i=f(a),l=g(f(i),2),o=f(l),u=g(l,2);u.__click=n;var d=g(i,2),p=g(f(d),2),_=f(p);J(()=>{I(o,`${t.monsterName??""} Defeated!`),I(_,`+${t.xpGained??""} XP`)}),P(e,s),xe()}Fe(["click","keydown"]);var Zu=q('<div class="hero-section svelte-da0ogt"><img class="hero-avatar svelte-da0ogt"/> <div class="hero-level-info svelte-da0ogt"><span class="hero-name svelte-da0ogt" data-testid="level-up-hero-name"> </span> <span class="level-badge svelte-da0ogt" data-testid="level-badge"> </span></div></div>'),Ju=q('<div class="level-up-overlay svelte-da0ogt" role="dialog" aria-modal="true" aria-label="Level up notification" tabindex="0" data-testid="level-up-overlay"><div class="level-up-notification svelte-da0ogt" role="dialog" aria-labelledby="level-up-title" tabindex="-1" data-testid="level-up-notification"><div class="level-up-header svelte-da0ogt"><span class="level-up-icon svelte-da0ogt">â¨</span> <h3 class="level-up-title svelte-da0ogt" id="level-up-title" data-testid="level-up-title">LEVEL UP!</h3> <span class="level-up-icon svelte-da0ogt">â¨</span> <button class="dismiss-button svelte-da0ogt" aria-label="Dismiss notification" data-testid="dismiss-level-up">â</button></div> <!> <div class="stats-section svelte-da0ogt" data-testid="stats-section"><div class="stat-change svelte-da0ogt"><span class="stat-label svelte-da0ogt">HP</span> <span class="stat-old svelte-da0ogt" data-testid="old-hp"> </span> <span class="stat-arrow svelte-da0ogt">â</span> <span class="stat-new svelte-da0ogt" data-testid="new-hp"> </span></div> <div class="stat-change svelte-da0ogt"><span class="stat-label svelte-da0ogt">AC</span> <span class="stat-old svelte-da0ogt" data-testid="old-ac"> </span> <span class="stat-arrow svelte-da0ogt">â</span> <span class="stat-new svelte-da0ogt" data-testid="new-ac"> </span></div> <div class="stat-change svelte-da0ogt"><span class="stat-label svelte-da0ogt">Surge</span> <span class="stat-old svelte-da0ogt" data-testid="old-surge"> </span> <span class="stat-arrow svelte-da0ogt">â</span> <span class="stat-new svelte-da0ogt" data-testid="new-surge"> </span></div> <div class="stat-change svelte-da0ogt"><span class="stat-label svelte-da0ogt">Attack</span> <span class="stat-old svelte-da0ogt" data-testid="old-attack"> </span> <span class="stat-arrow svelte-da0ogt">â</span> <span class="stat-new svelte-da0ogt" data-testid="new-attack"> </span></div></div> <div class="xp-spent-section svelte-da0ogt" data-testid="xp-spent-section"><span class="xp-icon svelte-da0ogt">â­</span> <span class="xp-text svelte-da0ogt">5 XP spent</span></div> <div class="critical-bonus-section svelte-da0ogt" data-testid="critical-bonus"><span class="bonus-text svelte-da0ogt">âï¸ Critical attacks now deal +1 damage!</span></div> <button class="continue-button svelte-da0ogt" data-testid="continue-button">Continue</button> <p class="dismiss-hint svelte-da0ogt">Click anywhere to dismiss</p></div></div>');function $u(e,t){we(t,!0);const n=ct.find(Z=>Z.id===t.heroId);function r(){t.onDismiss&&t.onDismiss()}function s(Z){(Z.key==="Escape"||Z.key==="Enter"||Z.key===" ")&&(Z.preventDefault(),r())}var a=Ju();a.__click=r,a.__keydown=s;var i=f(a);i.__click=Z=>Z.stopPropagation(),i.__keydown=Z=>{(Z.key==="Escape"||Z.key==="Enter"||Z.key===" ")&&Z.stopPropagation()};var l=f(i),o=g(f(l),6);o.__click=r;var u=g(l,2);{var d=Z=>{var W=Zu(),ne=f(W),oe=g(ne,2),le=f(oe),We=f(le),_e=g(le,2),Ke=f(_e);J(_t=>{N(ne,"src",_t),N(ne,"alt",n.name),I(We,n.name),I(Ke,`Level ${t.newStats.level??""}`)},[()=>Ee(n.imagePath)]),P(Z,W)};U(u,Z=>{n&&Z(d)})}var p=g(u,2),_=f(p),m=g(f(_),2),b=f(m),D=g(m,4),w=f(D),T=g(_,2),R=g(f(T),2),S=f(R),E=g(R,4),j=f(E),C=g(T,2),Q=g(f(C),2),B=f(Q),M=g(Q,4),k=f(M),H=g(C,2),Y=g(f(H),2),ee=f(Y),ae=g(Y,4),re=f(ae),ue=g(p,6);ue.__click=r,J(()=>{I(b,t.oldStats.maxHp),I(w,t.newStats.maxHp),I(S,t.oldStats.ac),I(j,t.newStats.ac),I(B,t.oldStats.surgeValue),I(k,t.newStats.surgeValue),I(ee,`+${t.oldStats.attackBonus??""}`),I(re,`+${t.newStats.attackBonus??""}`)}),P(e,a),xe()}Fe(["click","keydown"]);var ed=q('<div class="healing-surge-overlay svelte-1ugospu" data-testid="healing-surge-notification"><div class="healing-surge-card svelte-1ugospu"><h2 class="healing-title svelte-1ugospu" data-testid="healing-title">Healing Surge!</h2> <div class="hero-section svelte-1ugospu"><img class="hero-avatar svelte-1ugospu"/> <span class="hero-name svelte-1ugospu" data-testid="healed-hero-name"> </span></div> <div class="healing-message svelte-1ugospu"><span class="was-text svelte-1ugospu">was at 0 HP</span></div> <div class="hp-restored-section svelte-1ugospu" data-testid="hp-restored-section"><span class="hp-icon svelte-1ugospu">â¤ï¸</span> <span class="hp-value svelte-1ugospu"> </span> <span class="hp-text svelte-1ugospu">restored</span></div> <button class="continue-button svelte-1ugospu" data-testid="dismiss-healing-surge">Continue</button></div></div>');function td(e,t){we(t,!0);function n(b){return ct.find(D=>D.id===b)?.name??"Hero"}function r(b){return ct.find(D=>D.id===b)?.imagePath??""}var s=ed(),a=f(s),i=g(f(a),2),l=f(i),o=g(l,2),u=f(o),d=g(i,4),p=g(f(d),2),_=f(p),m=g(d,2);m.__click=function(...b){t.onDismiss?.apply(this,b)},J((b,D,w)=>{N(l,"src",b),N(l,"alt",D),I(u,w),I(_,`+${t.hpRestored??""} HP`)},[()=>Ee(r(t.heroId)),()=>n(t.heroId),()=>n(t.heroId)]),P(e,s),xe()}Fe(["click"]);var nd=q('<span class="hero-level svelte-8w11tm" data-testid="hero-level">Level 2 â­</span>'),rd=q('<div class="player-info svelte-8w11tm" data-testid="turn-indicator"><img class="player-avatar svelte-8w11tm"/> <div class="turn-details svelte-8w11tm"><span class="player-name svelte-8w11tm"> </span> <!> <span class="turn-phase svelte-8w11tm" data-testid="turn-phase"> </span> <span class="turn-number svelte-8w11tm"> </span> <span class="hero-hp svelte-8w11tm" data-testid="hero-hp"> </span></div></div>'),sd=q('<div class="player-info svelte-8w11tm"><img class="player-avatar svelte-8w11tm"/> <div class="turn-details svelte-8w11tm"><span class="player-name svelte-8w11tm"> </span> <span class="turn-phase svelte-8w11tm"> </span> <span class="turn-number svelte-8w11tm"> </span> <span class="hero-hp svelte-8w11tm"> </span></div></div>'),ad=q('<div><img class="tile-image svelte-8w11tm"/> <!></div>'),id=q('<div class="movement-overlay-container svelte-8w11tm"><!></div>'),od=q('<div data-testid="hero-token"><img class="token-image svelte-8w11tm"/> <span class="token-label svelte-8w11tm"> </span></div>'),ld=q('<div class="player-info svelte-8w11tm"><img class="player-avatar svelte-8w11tm"/> <div class="turn-details svelte-8w11tm"><span class="player-name svelte-8w11tm"> </span> <span class="turn-phase svelte-8w11tm"> </span> <span class="turn-number svelte-8w11tm"> </span> <span class="hero-hp svelte-8w11tm"> </span></div></div>'),cd=q('<span class="hero-level svelte-8w11tm" data-testid="hero-level">Level 2 â­</span>'),ud=q('<div class="player-info svelte-8w11tm" data-testid="turn-indicator"><img class="player-avatar svelte-8w11tm"/> <div class="turn-details svelte-8w11tm"><span class="player-name svelte-8w11tm"> </span> <!> <span class="turn-phase svelte-8w11tm" data-testid="turn-phase"> </span> <span class="turn-number svelte-8w11tm"> </span> <span class="hero-hp svelte-8w11tm" data-testid="hero-hp"> </span></div></div>'),dd=q('<div class="game-board svelte-8w11tm" data-testid="game-board"><div data-testid="player-zone-top"><!></div> <div class="middle-section svelte-8w11tm"><div data-testid="player-zone-left"><!></div> <div class="board-container svelte-8w11tm"><div class="dungeon-map svelte-8w11tm" data-testid="dungeon-map" role="button" tabindex="0"><!> <!> <!> <!></div> <div class="board-controls svelte-8w11tm"><div class="objective-display svelte-8w11tm" data-testid="objective-display"><span class="objective-label svelte-8w11tm">ð¯ Objective:</span> <span class="objective-text svelte-8w11tm"> </span> <span class="objective-progress svelte-8w11tm" data-testid="objective-progress"> </span></div> <!> <!> <!> <button class="end-phase-button svelte-8w11tm" data-testid="end-phase-button"> </button> <button class="reset-button svelte-8w11tm" data-testid="reset-button">â© Return to Character Select</button> <!></div></div> <div data-testid="player-zone-right"><!></div></div> <div data-testid="player-zone-bottom"><!></div> <!> <!> <!> <!> <!>  <!> <!></div>');function fd(e,t){we(t,!0);const n=140,r=4,s=8,a=4,i=n*r,l=n*s,o=n*a,u=140,d=.15,p=1,_=36,m=36,b=632,D=632,w=1195,T=3,R=0;let S=z(ie([])),E=z(ie([])),j=z(ie({})),C=z(ie({currentHeroIndex:0,currentPhase:"hero-phase",turnNumber:1})),Q=z(ie([])),B=z(!1),M=z(ie({tiles:[],unexploredEdges:[],tileDeck:[]})),k=z(ie([])),H=z(null),Y=z(null),ee=z(null),ae=z(ie([])),re=z(null),ue=z(null),Z=z(null),W=z(0),ne=z(null),oe=z(ie({actionsTaken:[],canMove:!0,canAttack:!0})),le=z(ie({monstersDefeated:0,monstersToDefeat:2,objective:"Defeat 2 monsters"})),We=z(ie({xp:0,healingSurges:2})),_e=z(null),Ke=z(null),_t=z(null),vn=z(null),hn=z(null),pn=z(null),Yt=z(null),Yr=z(1),bt=X(()=>ni(c(M)));it(()=>{const h=F.subscribe(()=>{const y=F.getState();x(S,y.game.heroTokens,!0),x(E,y.heroes.selectedHeroes,!0),x(j,y.heroes.heroEdgeMap,!0),x(C,y.game.turnState,!0),x(Q,y.game.validMoveSquares,!0),x(B,y.game.showingMovement,!0),x(M,y.game.dungeon,!0),x(k,y.game.monsters,!0),x(H,y.game.recentlySpawnedMonsterId,!0),x(Y,y.game.attackResult,!0),x(ee,y.game.attackTargetId,!0),x(ae,y.game.heroHp,!0),x(re,y.game.monsterAttackResult,!0),x(ue,y.game.monsterAttackTargetId,!0),x(Z,y.game.monsterAttackerId,!0),x(W,y.game.villainPhaseMonsterIndex,!0),x(ne,y.game.monsterMoveActionId,!0),x(oe,y.game.heroTurnActions,!0),x(le,y.game.scenario,!0),x(We,y.game.partyResources,!0),x(_e,y.game.defeatedMonsterXp,!0),x(Ke,y.game.defeatedMonsterName,!0),x(_t,y.game.leveledUpHeroId,!0),x(vn,y.game.levelUpOldStats,!0),x(hn,y.game.healingSurgeUsedHeroId,!0),x(pn,y.game.healingSurgeHpRestored,!0)}),v=F.getState();return x(S,v.game.heroTokens,!0),x(E,v.heroes.selectedHeroes,!0),x(j,v.heroes.heroEdgeMap,!0),x(C,v.game.turnState,!0),x(Q,v.game.validMoveSquares,!0),x(B,v.game.showingMovement,!0),x(M,v.game.dungeon,!0),x(k,v.game.monsters,!0),x(H,v.game.recentlySpawnedMonsterId,!0),x(Y,v.game.attackResult,!0),x(ee,v.game.attackTargetId,!0),x(ae,v.game.heroHp,!0),x(re,v.game.monsterAttackResult,!0),x(ue,v.game.monsterAttackTargetId,!0),x(Z,v.game.monsterAttackerId,!0),x(W,v.game.villainPhaseMonsterIndex,!0),x(ne,v.game.monsterMoveActionId,!0),x(oe,v.game.heroTurnActions,!0),x(le,v.game.scenario,!0),x(We,v.game.partyResources,!0),x(_e,v.game.defeatedMonsterXp,!0),x(Ke,v.game.defeatedMonsterName,!0),x(_t,v.game.leveledUpHeroId,!0),x(vn,v.game.levelUpOldStats,!0),x(hn,v.game.healingSurgeUsedHeroId,!0),x(pn,v.game.healingSurgeHpRestored,!0),h}),it(()=>{c(C).currentPhase==="hero-phase"&&tu(c(oe))&&F.dispatch(Gs())}),it(()=>{if(c(C).currentPhase!=="hero-phase"||!c(oe).canMove||c(B))return;const h=ke();if(!h)return;const v=It(h);v&&F.dispatch(Vs({heroId:h,speed:v.speed}))}),it(()=>{if(c(C).currentPhase!=="villain-phase"||c(re)!==null||c(ne)!==null)return;const h=si();if(c(W)>=h.length){F.dispatch(Xs());return}F.dispatch(fu({}))});function ni(h){if(h.tiles.length===0)return{minCol:0,maxCol:0,minRow:0,maxRow:0,width:b,height:w};let v=1/0,y=-1/0,A=1/0,O=-1/0;for(const de of h.tiles)v=Math.min(v,de.position.col),y=Math.max(y,de.position.col),A=Math.min(A,de.position.row),O=Math.max(O,de.position.row);const L=y-v+1,V=b+(L-1)*i,$=Math.max(0,-A),G=Math.max(0,O),ce=w+$*o+G*o;return{minCol:v,maxCol:y,minRow:A,maxRow:O,width:Math.max(V,b),height:Math.max(ce,w)}}function _n(h,v){const y=(h.position.col-v.minCol)*i;let A=0;return h.position.row<0?A=(h.position.row-v.minRow)*o:h.position.row===0?A=Math.max(0,-v.minRow)*o-T:A=Math.max(0,-v.minRow)*o+l+(h.position.row-1)*o-T-R,{x:y,y:A}}function ri(h){return h.tileType==="start"?"assets/StartTile.png":Qa.find(y=>y.tileType===h.tileType)?.imagePath||"assets/Tile_Black_x2_01.png"}function Wr(h){return h.tileType==="start"?{width:b,height:w}:{width:b,height:D}}it(()=>{if(c(Yt)){const h=()=>{const y=c(Yt);if(!y)return;const A=y.clientWidth-u,O=y.clientHeight-u,L=c(bt),V=A/L.width,$=O/L.height,G=Math.min(V,$,p);x(Yr,Math.max(G,d),!0)};h();const v=new ResizeObserver(h);return v.observe(c(Yt)),()=>v.disconnect()}});function It(h){return c(E).find(v=>v.id===h)}function ke(){return c(S)[c(C).currentHeroIndex]?.heroId}function mn(h){switch(h){case"hero-phase":return"Hero Phase";case"exploration-phase":return"Exploration Phase";case"villain-phase":return"Villain Phase"}}function gn(h){return c(ae).find(y=>y.heroId===h)?.currentHp??0}function yn(h){return c(ae).find(y=>y.heroId===h)?.maxHp??0}function Kr(h){return c(ae).find(y=>y.heroId===h)?.level??1}function si(){const h=ke();return h?c(k).filter(v=>v.controllerId===h):[]}function ai(){F.dispatch(Xr())}function ii(h,v){const y=n/2,A=v.x+_+h.x*n+y,O=v.y+m+h.y*n+y;return`left: ${A}px; top: ${O}px;`}function mt(){const h=ke();if(h&&c(j)[h])return c(j)[h];const v=c(C).currentHeroIndex%4;return["bottom","right","top","left"][v]}function oi(h){const v=c(j)[h];if(!v)return 0;switch(v){case"bottom":return 0;case"top":return 180;case"left":return 90;case"right":return-90;default:return 0}}function Qr(h){if(c(C).currentPhase!=="hero-phase")return;const v=ke();if(!v)return;const y=It(v);y&&(c(B)?F.dispatch(au()):F.dispatch(Vs({heroId:v,speed:y.speed})))}function li(h){const v=ke();v&&F.dispatch(iu({heroId:v,position:h}))}function ci(h){(h.key==="Enter"||h.key===" ")&&(h.preventDefault(),Qr())}function ui(){switch(c(C).currentPhase){case"hero-phase":F.dispatch(Gs());break;case"exploration-phase":F.dispatch(ou());break;case"villain-phase":F.dispatch(Xs());break}}function di(){switch(c(C).currentPhase){case"hero-phase":return"End Hero Phase";case"exploration-phase":return"End Exploration";case"villain-phase":return"End Villain Phase"}}function fi(){F.dispatch(lu())}function vi(h){const v=c(M).tiles.find(y=>y.id===h);return v?_n(v,c(bt)):{x:0,y:0}}const Xn="start-tile";function hi(){const h=ke();if(!h)return Xn;const v=c(S).find(A=>A.heroId===h);return v?sn(v.position,c(M))?.id??Xn:Xn}function pi(){const h=ke();if(!h)return[];const v=c(S).find(A=>A.heroId===h);if(!v)return[];const y=hi();return Xc(v.position,c(k),y,c(M))}function Yn(h){return ct.find(v=>v.id===h)}function _i(h){const v=ke();if(!v)return;const y=Yn(v);if(!y)return;const A=c(k).find(V=>V.instanceId===h);if(!A)return;const O=Vc(A.monsterId);if(O===void 0)return;const L=Fc(y.attack,O);F.dispatch(cu({result:L,targetInstanceId:h}))}function mi(){F.dispatch(uu())}function Wn(h){return dn.find(y=>y.id===h)?.name||"Monster"}function gi(){if(c(ee))return c(k).find(h=>h.instanceId===c(ee))}function yi(){F.dispatch(vu())}function wi(){F.dispatch(hu())}function xi(){return c(ue)&&ct.find(v=>v.id===c(ue))?.name||"Hero"}function ki(){if(!c(Z))return"Monster";const h=c(k).find(v=>v.instanceId===c(Z));return h?Wn(h.monsterId):"Monster"}function bi(){if(!c(ne))return"Monster";const h=c(k).find(v=>v.instanceId===c(ne));return h?Wn(h.monsterId):"Monster"}function Ii(){F.dispatch(du())}function Ti(){F.dispatch(_u())}function Si(){F.dispatch(pu())}function Ei(){if(c(_t))return c(ae).find(h=>h.heroId===c(_t))}var Zr=dd(),Kn=f(Zr);let Jr;var Mi=f(Kn);{var Hi=h=>{const v=X(ke),y=X(()=>c(v)?It(c(v)):void 0);var A=he(),O=ve(A);{var L=V=>{var $=rd(),G=f($),ce=g(G,2),de=f(ce),Ae=f(de),Se=g(de,2);{var Be=be=>{var Ue=nd();P(be,Ue)};U(Se,be=>{Kr(c(v))===2&&be(Be)})}var De=g(Se,2),nt=f(De),qe=g(De,2),rt=f(qe),Tt=g(qe,2),St=f(Tt);J((be,Ue,er,tr)=>{N(G,"src",be),N(G,"alt",c(y).name),I(Ae,`${c(y).name??""}'s Turn`),I(nt,Ue),I(rt,`Turn ${c(C).turnNumber??""}`),I(St,`HP: ${er??""}/${tr??""}`)},[()=>Ee(c(y).imagePath),()=>mn(c(C).currentPhase),()=>gn(c(v)),()=>yn(c(v))]),P(V,$)};U(O,V=>{c(y)&&c(v)&&V(L)})}P(h,A)};U(Mi,h=>{mt()==="top"&&h(Hi)})}var $r=g(Kn,2),Qn=f($r);let es;var Pi=f(Qn);{var Ai=h=>{const v=X(ke),y=X(()=>c(v)?It(c(v)):void 0);var A=he(),O=ve(A);{var L=V=>{var $=sd(),G=f($),ce=g(G,2),de=f(ce),Ae=f(de),Se=g(de,2),Be=f(Se),De=g(Se,2),nt=f(De),qe=g(De,2),rt=f(qe);J((Tt,St,be,Ue)=>{N(G,"src",Tt),N(G,"alt",c(y).name),I(Ae,`${c(y).name??""}'s Turn`),I(Be,St),I(nt,`Turn ${c(C).turnNumber??""}`),I(rt,`HP: ${be??""}/${Ue??""}`)},[()=>Ee(c(y).imagePath),()=>mn(c(C).currentPhase),()=>gn(c(v)),()=>yn(c(v))]),P(V,$)};U(O,V=>{c(y)&&c(v)&&V(L)})}P(h,A)};U(Pi,h=>{mt()==="left"&&h(Ai)})}var Zn=g(Qn,2),Dt=f(Zn);Dt.__click=Qr,Dt.__keydown=ci;var ts=f(Dt);Je(ts,17,()=>c(M).tiles,h=>h.id,(h,v)=>{const y=X(()=>_n(c(v),c(bt))),A=X(()=>Wr(c(v)));var O=ad();let L;var V=f(O),$=g(V,2);Je($,17,()=>c(M).unexploredEdges.filter(G=>G.tileId===c(v).id),G=>G.direction,(G,ce)=>{Pu(G,{get direction(){return c(ce).direction},cellSize:n,get tileWidth(){return c(A).width},get tileHeight(){return c(A).height}})}),J(G=>{L=Ge(O,1,"placed-tile svelte-8w11tm",null,L,{"start-tile":c(v).tileType==="start"}),N(O,"data-testid",c(v).tileType==="start"?"start-tile":"dungeon-tile"),N(O,"data-tile-id",c(v).id),gt(O,`left: ${c(y).x??""}px; top: ${c(y).y??""}px; width: ${c(A).width??""}px; height: ${c(A).height??""}px;`),N(V,"src",G),N(V,"alt",c(v).tileType),gt(V,c(v).rotation!==0?`transform: rotate(${c(v).rotation}deg);`:"")},[()=>Ee(ri(c(v)))]),P(h,O)});var ns=g(ts,2);{var Di=h=>{const v=X(()=>c(M).tiles.find(L=>L.tileType==="start"));var y=he(),A=ve(y);{var O=L=>{const V=X(()=>_n(c(v),c(bt))),$=X(()=>Wr(c(v)));var G=id(),ce=f(G);Su(ce,{get validMoveSquares(){return c(Q)},tileOffsetX:_,tileOffsetY:m,cellSize:n,onSquareClick:li}),J(()=>gt(G,`left: ${c(V).x??""}px; top: ${c(V).y??""}px; width: ${c($).width??""}px; height: ${c($).height??""}px;`)),P(L,G)};U(A,L=>{c(v)&&L(O)})}P(h,y)};U(ns,h=>{c(B)&&c(Q).length>0&&h(Di)})}var rs=g(ns,2);Je(rs,17,()=>c(S),h=>h.heroId,(h,v)=>{const y=X(()=>It(c(v).heroId)),A=X(()=>c(v).heroId===ke()),O=X(()=>c(M).tiles.find(ce=>ce.tileType==="start")),L=X(()=>oi(c(v).heroId));var V=he(),$=ve(V);{var G=ce=>{const de=X(()=>_n(c(O),c(bt)));var Ae=od();let Se;var Be=f(Ae),De=g(Be,2),nt=f(De);J((qe,rt)=>{Se=Ge(Ae,1,"hero-token svelte-8w11tm",null,Se,{active:c(A)}),N(Ae,"data-hero-id",c(v).heroId),gt(Ae,`${qe??""} --token-rotation: ${c(L)??""}deg;`),N(Be,"src",rt),N(Be,"alt",c(y).name),I(nt,c(y).name)},[()=>ii(c(v).position,c(de)),()=>Ee(c(y).imagePath)]),P(ce,Ae)};U($,ce=>{c(y)&&c(O)&&ce(G)})}P(h,V)});var Ci=g(rs,2);Je(Ci,17,()=>c(k),h=>h.instanceId,(h,v)=>{{let y=X(()=>vi(c(v).tileId));Du(h,{get monster(){return c(v)},cellSize:n,tileOffsetX:_,tileOffsetY:m,get tilePixelOffset(){return c(y)}})}});var Ri=g(Dt,2),ss=f(Ri),as=g(f(ss),2),Oi=f(as),zi=g(as,2),Ni=f(zi),is=g(ss,2);Xu(is,{get xp(){return c(We).xp}});var os=g(is,2);Wu(os,{get surges(){return c(We).healingSurges}});var ls=g(os,2);Mu(ls,{get tileCount(){return c(M).tileDeck.length}});var Jn=g(ls,2);Jn.__click=ui;var ji=f(Jn),cs=g(Jn,2);cs.__click=ai;var Li=g(cs,2);{var Fi=h=>{const v=X(ke),y=X(()=>c(v)?Yn(c(v)):void 0),A=X(pi);var O=he(),L=ve(O);{var V=$=>{Nu($,{get adjacentMonsters(){return c(A)},get heroAttack(){return c(y).attack},onAttack:_i})};U(L,$=>{c(y)&&c(A).length>0&&$(V)})}P(h,O)};U(Li,h=>{c(C).currentPhase==="hero-phase"&&c(oe).canAttack&&h(Fi)})}pl(Zn,h=>x(Yt,h),()=>c(Yt));var us=g(Zn,2);let ds;var Bi=f(us);{var qi=h=>{const v=X(ke),y=X(()=>c(v)?It(c(v)):void 0);var A=he(),O=ve(A);{var L=V=>{var $=ld(),G=f($),ce=g(G,2),de=f(ce),Ae=f(de),Se=g(de,2),Be=f(Se),De=g(Se,2),nt=f(De),qe=g(De,2),rt=f(qe);J((Tt,St,be,Ue)=>{N(G,"src",Tt),N(G,"alt",c(y).name),I(Ae,`${c(y).name??""}'s Turn`),I(Be,St),I(nt,`Turn ${c(C).turnNumber??""}`),I(rt,`HP: ${be??""}/${Ue??""}`)},[()=>Ee(c(y).imagePath),()=>mn(c(C).currentPhase),()=>gn(c(v)),()=>yn(c(v))]),P(V,$)};U(O,V=>{c(y)&&c(v)&&V(L)})}P(h,A)};U(Bi,h=>{mt()==="right"&&h(qi)})}var $n=g($r,2);let fs;var Ui=f($n);{var Vi=h=>{const v=X(ke),y=X(()=>c(v)?It(c(v)):void 0);var A=he(),O=ve(A);{var L=V=>{var $=ud(),G=f($),ce=g(G,2),de=f(ce),Ae=f(de),Se=g(de,2);{var Be=be=>{var Ue=cd();P(be,Ue)};U(Se,be=>{Kr(c(v))===2&&be(Be)})}var De=g(Se,2),nt=f(De),qe=g(De,2),rt=f(qe),Tt=g(qe,2),St=f(Tt);J((be,Ue,er,tr)=>{N(G,"src",be),N(G,"alt",c(y).name),I(Ae,`${c(y).name??""}'s Turn`),I(nt,Ue),I(rt,`Turn ${c(C).turnNumber??""}`),I(St,`HP: ${er??""}/${tr??""}`)},[()=>Ee(c(y).imagePath),()=>mn(c(C).currentPhase),()=>gn(c(v)),()=>yn(c(v))]),P(V,$)};U(O,V=>{c(y)&&c(v)&&V(L)})}P(h,A)};U(Ui,h=>{mt()==="bottom"&&h(Vi)})}var vs=g($n,2);{var Gi=h=>{const v=X(()=>c(k).find(L=>L.instanceId===c(H)));var y=he(),A=ve(y);{var O=L=>{Ru(L,{get monsterId(){return c(v).monsterId},onDismiss:fi})};U(A,L=>{c(v)&&L(O)})}P(h,y)};U(vs,h=>{c(H)&&h(Gi)})}var hs=g(vs,2);{var Xi=h=>{const v=X(ke),y=X(()=>c(v)?Yn(c(v)):void 0),A=X(gi);var O=he(),L=ve(O);{var V=$=>{{let G=X(()=>c(A)?Wn(c(A).monsterId):"Monster");Ys($,{get result(){return c(Y)},get attackerName(){return c(y).name},get attackName(){return c(y).attack.name},get targetName(){return c(G)},onDismiss:mi})}};U(L,$=>{c(y)&&$(V)})}P(h,O)};U(hs,h=>{c(Y)&&h(Xi)})}var ps=g(hs,2);{var Yi=h=>{{let v=X(ki),y=X(xi);Ys(h,{get result(){return c(re)},get attackerName(){return c(v)},attackName:"Attack",get targetName(){return c(y)},onDismiss:yi})}};U(ps,h=>{c(re)&&h(Yi)})}var _s=g(ps,2);{var Wi=h=>{{let v=X(bi);Vu(h,{get monsterName(){return c(v)},onDismiss:wi})}};U(_s,h=>{c(ne)&&h(Wi)})}var ms=g(_s,2);{var Ki=h=>{Qu(h,{get monsterName(){return c(Ke)},get xpGained(){return c(_e)},onDismiss:Ii})};U(ms,h=>{c(_e)!==null&&c(Ke)!==null&&h(Ki)})}var gs=g(ms,2);{var Qi=h=>{const v=X(Ei);var y=he(),A=ve(y);{var O=L=>{$u(L,{get heroId(){return c(_t)},get oldStats(){return c(vn)},get newStats(){return c(v)},onDismiss:Ti})};U(A,L=>{c(v)&&L(O)})}P(h,y)};U(gs,h=>{c(_t)&&c(vn)&&!c(Y)&&!c(_e)&&h(Qi)})}var Zi=g(gs,2);{var Ji=h=>{td(h,{get heroId(){return c(hn)},get hpRestored(){return c(pn)},onDismiss:Si})};U(Zi,h=>{c(hn)&&c(pn)!==null&&h(Ji)})}J((h,v,y,A,O)=>{Jr=Ge(Kn,1,"edge-zone edge-top svelte-8w11tm",null,Jr,h),es=Ge(Qn,1,"edge-zone edge-left svelte-8w11tm",null,es,v),gt(Dt,`transform: scale(${c(Yr)??""}); width: ${c(bt).width??""}px; height: ${c(bt).height??""}px;`),N(Dt,"aria-label",c(B)?"Click to hide movement options":"Click to show movement options for current hero"),I(Oi,c(le).objective),I(Ni,`${c(le).monstersDefeated??""} / ${c(le).monstersToDefeat??""} defeated`),I(ji,y),ds=Ge(us,1,"edge-zone edge-right svelte-8w11tm",null,ds,A),fs=Ge($n,1,"edge-zone edge-bottom svelte-8w11tm",null,fs,O)},[()=>({"active-edge":mt()==="top"}),()=>({"active-edge":mt()==="left"}),di,()=>({"active-edge":mt()==="right"}),()=>({"active-edge":mt()==="bottom"})]),P(e,Zr),xe()}Fe(["click","keydown"]);var vd=q('<div class="victory-screen svelte-12ok9q2" data-testid="victory-screen"><div class="victory-content svelte-12ok9q2"><div class="victory-icon svelte-12ok9q2">ð</div> <h1 class="victory-title svelte-12ok9q2">Victory!</h1> <p class="victory-message svelte-12ok9q2"> </p> <div class="victory-objective svelte-12ok9q2"><span class="objective-label svelte-12ok9q2">Objective Complete:</span> <span class="objective-text svelte-12ok9q2"> </span></div> <button class="return-button svelte-12ok9q2" data-testid="return-to-menu-button">Return to Character Select</button></div></div>');function hd(e,t){we(t,!0);let n=z(ie({monstersDefeated:0,monstersToDefeat:2,objective:"Defeat 2 monsters"}));it(()=>{const _=F.subscribe(()=>{const b=F.getState();x(n,b.game.scenario,!0)}),m=F.getState();return x(n,m.game.scenario,!0),_});function r(){F.dispatch(Xr())}var s=vd(),a=f(s),i=g(f(a),4),l=f(i),o=g(i,2),u=g(f(o),2),d=f(u),p=g(o,2);p.__click=r,J(()=>{I(l,`You have defeated ${c(n).monstersDefeated??""} monsters and completed the objective!`),I(d,c(n).objective)}),P(e,s),xe()}Fe(["click"]);var pd=q('<div class="defeat-screen svelte-1jz2vy1" data-testid="defeat-screen"><div class="defeat-content svelte-1jz2vy1"><div class="defeat-icon svelte-1jz2vy1">ð</div> <h1 class="defeat-title svelte-1jz2vy1">Defeat</h1> <p class="defeat-message svelte-1jz2vy1" data-testid="defeat-message"><!></p> <div class="defeat-progress svelte-1jz2vy1"><span class="progress-label svelte-1jz2vy1">Progress:</span> <span class="progress-text svelte-1jz2vy1" data-testid="defeat-progress"> </span></div> <div class="defeat-objective svelte-1jz2vy1"><span class="objective-label svelte-1jz2vy1">Objective:</span> <span class="objective-text svelte-1jz2vy1"> </span></div> <button class="new-game-button svelte-1jz2vy1" data-testid="new-game-button">New Game</button></div></div>');function _d(e,t){we(t,!0);let n=z(ie({monstersDefeated:0,monstersToDefeat:2,objective:"Defeat 2 monsters"})),r=z(null);it(()=>{const R=F.subscribe(()=>{const E=F.getState();x(n,E.game.scenario,!0),x(r,E.game.defeatReason,!0)}),S=F.getState();return x(n,S.game.scenario,!0),x(r,S.game.defeatReason,!0),R});function s(){F.dispatch(Xr())}var a=pd(),i=f(a),l=g(f(i),4),o=f(l);{var u=R=>{var S=Ss();J(()=>I(S,c(r))),P(R,S)},d=R=>{var S=Ss("Your party has been eliminated before completing the objective.");P(R,S)};U(o,R=>{c(r)?R(u):R(d,!1)})}var p=g(l,2),_=g(f(p),2),m=f(_),b=g(p,2),D=g(f(b),2),w=f(D),T=g(b,2);T.__click=s,J(()=>{I(m,`${c(n).monstersDefeated??""} / ${c(n).monstersToDefeat??""} monsters defeated`),I(w,c(n).objective)}),P(e,a),xe()}Fe(["click"]);var md=q('<main class="svelte-1n46o8q"><!></main>');function gd(e,t){we(t,!0);let n=z("character-select");it(()=>{const l=F.subscribe(()=>{const u=F.getState();x(n,u.game.currentScreen,!0)}),o=F.getState();return x(n,o.game.currentScreen,!0),l});var r=md(),s=f(r);{var a=l=>{bu(l,{})},i=l=>{var o=he(),u=ve(o);{var d=_=>{fd(_,{})},p=_=>{var m=he(),b=ve(m);{var D=T=>{hd(T,{})},w=T=>{var R=he(),S=ve(R);{var E=j=>{_d(j,{})};U(S,j=>{c(n)==="defeat"&&j(E)},!0)}P(T,R)};U(b,T=>{c(n)==="victory"?T(D):T(w,!1)},!0)}P(_,m)};U(u,_=>{c(n)==="game-board"?_(d):_(p,!1)},!0)}P(l,o)};U(s,l=>{c(n)==="character-select"?l(a):l(i,!1)})}P(e,r),xe()}al(gd,{target:document.getElementById("app")});
