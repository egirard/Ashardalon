(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const Ia="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Ia);const Ps=1,As=2,Cs=4,Ea=8,Sa=16,Ma=2,he=Symbol(),Pa="http://www.w3.org/1999/xhtml",Qn=!1;var Ds=Array.isArray,Aa=Array.prototype.indexOf,hr=Array.from,Ca=Object.defineProperty,Wt=Object.getOwnPropertyDescriptor,Da=Object.getOwnPropertyDescriptors,Ha=Object.prototype,Ra=Array.prototype,Hs=Object.getPrototypeOf,ns=Object.isExtensible;function za(e){for(var t=0;t<e.length;t++)e[t]()}function Rs(){var e,t,n=new Promise((r,s)=>{e=r,t=s});return{promise:n,resolve:e,reject:t}}const de=2,pr=4,_r=8,Oa=1<<24,st=16,it=32,Et=64,Hn=128,Ue=512,me=1024,Ee=2048,at=4096,Ce=8192,dt=16384,mr=32768,zt=65536,rs=1<<17,zs=1<<18,qt=1<<19,Na=1<<20,kt=32768,Zn=1<<21,gr=1<<22,ft=1<<23,wn=Symbol("$state"),ja=Symbol(""),Dt=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Fa(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function La(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function qa(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Ba(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Ua(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Ga(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Ya(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Wa(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Va(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}function Xa(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Os(e){return e===this.v}function Ka(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Ns(e){return!Ka(e,this.v)}let $a=!1,Oe=null;function Ot(e){Oe=e}function Ne(e,t=!1,n){Oe={p:Oe,i:!1,c:null,e:null,s:e,x:null,l:null}}function je(e){var t=Oe,n=t.e;if(n!==null){t.e=null;for(var r of n)Qs(r)}return t.i=!0,Oe=t.p,{}}function js(){return!0}let Ht=[];function Qa(){var e=Ht;Ht=[],za(e)}function nn(e){if(Ht.length===0){var t=Ht;queueMicrotask(()=>{t===Ht&&Qa()})}Ht.push(e)}function Fs(e){var t=Z;if(t===null)return Y.f|=ft,e;if((t.f&mr)===0){if((t.f&Hn)===0)throw e;t.b.error(e)}else Nt(e,t)}function Nt(e,t){for(;t!==null;){if((t.f&Hn)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e}const hn=new Set;let te=null,ze=null,Ge=[],wr=null,Jn=!1;class Ye{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#r=0;#n=0;#l=null;#i=[];#s=[];skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(t){Ge=[],this.apply();var n={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const r of t)this.#a(r,n);this.is_fork||this.#u(),this.is_deferred()?(this.#o(n.effects),this.#o(n.render_effects),this.#o(n.block_effects)):(te=null,ss(n.render_effects),ss(n.effects),this.#l?.resolve()),ze=null}#a(t,n){t.f^=me;for(var r=t.first;r!==null;){var s=r.f,i=(s&(it|Et))!==0,a=i&&(s&me)!==0,l=a||(s&Ce)!==0||this.skipped_effects.has(r);if((r.f&Hn)!==0&&r.b?.is_pending()&&(n={parent:n,effect:r,effects:[],render_effects:[],block_effects:[]}),!l&&r.fn!==null){i?r.f^=me:(s&pr)!==0?n.effects.push(r):sn(r)&&((r.f&st)!==0&&n.block_effects.push(r),$t(r));var o=r.first;if(o!==null){r=o;continue}}var u=r.parent;for(r=r.next;r===null&&u!==null;)u===n.effect&&(this.#o(n.effects),this.#o(n.render_effects),this.#o(n.block_effects),n=n.parent),r=u.next,u=u.parent}}#o(t){for(const n of t)((n.f&Ee)!==0?this.#i:this.#s).push(n),this.#c(n.deps),ge(n,me)}#c(t){if(t!==null)for(const n of t)(n.f&de)===0||(n.f&kt)===0||(n.f^=kt,this.#c(n.deps))}capture(t,n){this.previous.has(t)||this.previous.set(t,n),(t.f&ft)===0&&(this.current.set(t,t.v),ze?.set(t,t.v))}activate(){te=this,this.apply()}deactivate(){te===this&&(te=null,ze=null)}flush(){if(this.activate(),Ge.length>0){if(Za(),te!==null&&te!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#t)t(this);this.#t.clear()}#u(){if(this.#n===0){for(const t of this.#e)t();this.#e.clear()}this.#r===0&&this.#d()}#d(){if(hn.size>1){this.previous.clear();var t=ze,n=!0,r={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const i of hn){if(i===this){n=!1;continue}const a=[];for(const[o,u]of this.current){if(i.current.has(o))if(n&&u!==i.current.get(o))i.current.set(o,u);else continue;a.push(o)}if(a.length===0)continue;const l=[...i.current.keys()].filter(o=>!this.current.has(o));if(l.length>0){var s=Ge;Ge=[];const o=new Set,u=new Map;for(const d of a)Ls(d,l,o,u);if(Ge.length>0){te=i,i.apply();for(const d of Ge)i.#a(d,r);i.deactivate()}Ge=s}}te=null,ze=t}this.committed=!0,hn.delete(this)}increment(t){this.#r+=1,t&&(this.#n+=1)}decrement(t){this.#r-=1,t&&(this.#n-=1),this.revive()}revive(){for(const t of this.#i)ge(t,Ee),Tt(t);for(const t of this.#s)ge(t,at),Tt(t);this.#i=[],this.#s=[],this.flush()}oncommit(t){this.#e.add(t)}ondiscard(t){this.#t.add(t)}settled(){return(this.#l??=Rs()).promise}static ensure(){if(te===null){const t=te=new Ye;hn.add(te),Ye.enqueue(()=>{te===t&&t.flush()})}return te}static enqueue(t){nn(t)}apply(){}}function Za(){var e=ht;Jn=!0;var t=null;try{var n=0;for(Tn(!0);Ge.length>0;){var r=Ye.ensure();if(n++>1e3){var s,i;Ja()}r.process(Ge),vt.clear()}}finally{Jn=!1,Tn(e),wr=null}}function Ja(){try{Ua()}catch(e){Nt(e,wr)}}let Je=null;function ss(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if((r.f&(dt|Ce))===0&&sn(r)&&(Je=new Set,$t(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?ti(r):r.fn=null),Je?.size>0)){vt.clear();for(const s of Je){if((s.f&(dt|Ce))!==0)continue;const i=[s];let a=s.parent;for(;a!==null;)Je.has(a)&&(Je.delete(a),i.push(a)),a=a.parent;for(let l=i.length-1;l>=0;l--){const o=i[l];(o.f&(dt|Ce))===0&&$t(o)}}Je.clear()}}Je=null}}function Ls(e,t,n,r){if(!n.has(e)&&(n.add(e),e.reactions!==null))for(const s of e.reactions){const i=s.f;(i&de)!==0?Ls(s,t,n,r):(i&(gr|st))!==0&&(i&Ee)===0&&qs(s,t,r)&&(ge(s,Ee),Tt(s))}}function qs(e,t,n){const r=n.get(e);if(r!==void 0)return r;if(e.deps!==null)for(const s of e.deps){if(t.includes(s))return!0;if((s.f&de)!==0&&qs(s,t,n))return n.set(s,!0),!0}return n.set(e,!1),!1}function Tt(e){for(var t=wr=e;t.parent!==null;){t=t.parent;var n=t.f;if(Jn&&t===Z&&(n&st)!==0&&(n&zs)===0)return;if((n&(Et|it))!==0){if((n&me)===0)return;t.f^=me}}Ge.push(t)}function eo(e){let t=0,n=It(0),r;return()=>{Xt()&&(c(n),Zs(()=>(t===0&&(r=fi(()=>e(()=>Vt(n)))),t+=1,()=>{nn(()=>{t-=1,t===0&&(r?.(),r=void 0,Vt(n))})})))}}var to=zt|qt|Hn;function no(e,t,n){new ro(e,t,n)}class ro{parent;#e=!1;#t;#r=null;#n;#l;#i;#s=null;#a=null;#o=null;#c=null;#u=null;#d=0;#f=0;#h=!1;#v=null;#w=eo(()=>(this.#v=It(this.#d),()=>{this.#v=null}));constructor(t,n,r){this.#t=t,this.#n=n,this.#l=r,this.parent=Z.b,this.#e=!!this.#n.pending,this.#i=kr(()=>{Z.b=this;{var s=this.#m();try{this.#s=He(()=>r(s))}catch(i){this.error(i)}this.#f>0?this.#_():this.#e=!1}return()=>{this.#u?.remove()}},to)}#y(){try{this.#s=He(()=>this.#l(this.#t))}catch(t){this.error(t)}this.#e=!1}#b(){const t=this.#n.pending;t&&(this.#a=He(()=>t(this.#t)),Ye.enqueue(()=>{var n=this.#m();this.#s=this.#p(()=>(Ye.ensure(),He(()=>this.#l(n)))),this.#f>0?this.#_():(Rt(this.#a,()=>{this.#a=null}),this.#e=!1)}))}#m(){var t=this.#t;return this.#e&&(this.#u=pt(),this.#t.before(this.#u),t=this.#u),t}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#p(t){var n=Z,r=Y,s=Oe;Xe(this.#i),Te(this.#i),Ot(this.#i.ctx);try{return t()}catch(i){return Fs(i),null}finally{Xe(n),Te(r),Ot(s)}}#_(){const t=this.#n.pending;this.#s!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#u),si(this.#s,this.#c)),this.#a===null&&(this.#a=He(()=>t(this.#t)))}#g(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#g(t);return}this.#f+=t,this.#f===0&&(this.#e=!1,this.#a&&Rt(this.#a,()=>{this.#a=null}),this.#c&&(this.#t.before(this.#c),this.#c=null))}update_pending_count(t){this.#g(t),this.#d+=t,this.#v&&jt(this.#v,this.#d)}get_effect_pending(){return this.#w(),c(this.#v)}error(t){var n=this.#n.onerror;let r=this.#n.failed;if(this.#h||!n&&!r)throw t;this.#s&&(Ie(this.#s),this.#s=null),this.#a&&(Ie(this.#a),this.#a=null),this.#o&&(Ie(this.#o),this.#o=null);var s=!1,i=!1;const a=()=>{if(s){Xa();return}s=!0,i&&Va(),Ye.ensure(),this.#d=0,this.#o!==null&&Rt(this.#o,()=>{this.#o=null}),this.#e=this.has_pending_snippet(),this.#s=this.#p(()=>(this.#h=!1,He(()=>this.#l(this.#t)))),this.#f>0?this.#_():this.#e=!1};var l=Y;try{Te(null),i=!0,n?.(t,a),i=!1}catch(o){Nt(o,this.#i&&this.#i.parent)}finally{Te(l)}r&&nn(()=>{this.#o=this.#p(()=>{Ye.ensure(),this.#h=!0;try{return He(()=>{r(this.#t,()=>t,()=>a)})}catch(o){return Nt(o,this.#i.parent),null}finally{this.#h=!1}})})}}function so(e,t,n){for(var r=[],s=t.length,i=0;i<s;i++)Tr(t[i].e,r,!0);ni(r,()=>{var a=r.length===0&&n!==null;if(a){var l=n,o=l.parentNode;_o(o),o.append(l),e.items.clear(),Le(e,t[0].prev,t[s-1].next)}for(var u=0;u<s;u++){var d=t[u];a||(e.items.delete(d.k),Le(e,d.prev,d.next)),Ie(d.e,!a)}e.first===t[0]&&(e.first=t[0].prev)})}function We(e,t,n,r,s,i=null){var a=e,l=new Map,o=null,u=(t&Cs)!==0,d=(t&Ps)!==0,h=(t&As)!==0;if(u){var p=e;a=p.appendChild(pt())}var m=null,k=uo(()=>{var S=n();return Ds(S)?S:S==null?[]:hr(S)}),R,w=!0;function x(){io(A,R,a,t,r),m!==null&&(R.length===0?(m.fragment?(a.before(m.fragment),m.fragment=null):Ir(m.effect),q.first=m.effect):Rt(m.effect,()=>{m=null}))}var q=kr(()=>{R=c(k);for(var S=R.length,z=new Set,D=te,$=null,N=Ks(),T=0;T<S;T+=1){var b=R[T],I=r(b,T),V=w?null:l.get(I);V?(d&&jt(V.v,b),h?jt(V.i,T):V.i=T,N&&D.skipped_effects.delete(V.e)):(V=ao(w?a:null,$,b,I,T,s,t,n),w&&(V.o=!0,$===null?o=V:$.next=V,$=V),l.set(I,V)),z.add(I)}if(S===0&&i&&!m)if(w)m={fragment:null,effect:He(()=>i(a))};else{var J=document.createDocumentFragment(),le=pt();J.append(le),m={fragment:J,effect:He(()=>i(le))}}if(!w)if(N){for(const[ne,fe]of l)z.has(ne)||D.skipped_effects.add(fe.e);D.oncommit(x),D.ondiscard(()=>{})}else x();c(k)}),A={effect:q,items:l,first:o};w=!1}function io(e,t,n,r,s){var i=(r&Ea)!==0,a=t.length,l=e.items,o=e.first,u,d=null,h,p=[],m=[],k,R,w,x;if(i)for(x=0;x<a;x+=1)k=t[x],R=s(k,x),w=l.get(R),w.o&&(w.a?.measure(),(h??=new Set).add(w));for(x=0;x<a;x+=1){if(k=t[x],R=s(k,x),w=l.get(R),e.first??=w,!w.o){w.o=!0;var q=d?d.next:o;Le(e,d,w),Le(e,w,q),Vn(w,q,n),d=w,p=[],m=[],o=d.next;continue}if((w.e.f&Ce)!==0&&(Ir(w.e),i&&(w.a?.unfix(),(h??=new Set).delete(w))),w!==o){if(u!==void 0&&u.has(w)){if(p.length<m.length){var A=m[0],S;d=A.prev;var z=p[0],D=p[p.length-1];for(S=0;S<p.length;S+=1)Vn(p[S],A,n);for(S=0;S<m.length;S+=1)u.delete(m[S]);Le(e,z.prev,D.next),Le(e,d,z),Le(e,D,A),o=A,d=D,x-=1,p=[],m=[]}else u.delete(w),Vn(w,o,n),Le(e,w.prev,w.next),Le(e,w,d===null?e.first:d.next),Le(e,d,w),d=w;continue}for(p=[],m=[];o!==null&&o.k!==R;)(o.e.f&Ce)===0&&(u??=new Set).add(o),m.push(o),o=o.next;if(o===null)continue;w=o}p.push(w),d=w,o=w.next}let $=l.size>a;if(o!==null||u!==void 0){for(var N=u===void 0?[]:hr(u);o!==null;)(o.e.f&Ce)===0&&N.push(o),o=o.next;var T=N.length;if($=l.size-T>a,T>0){var b=(r&Cs)!==0&&a===0?n:null;if(i){for(x=0;x<T;x+=1)N[x].a?.measure();for(x=0;x<T;x+=1)N[x].a?.fix()}so(e,N,b)}}if($)for(const I of l.values())I.o||(Le(e,d,I),d=I);e.effect.last=d&&d.e,i&&nn(()=>{if(h!==void 0)for(w of h)w.a?.apply()})}function ao(e,t,n,r,s,i,a,l){var o=(a&Ps)!==0,u=(a&Sa)===0,d=o?u?vo(n,!1,!1):It(n):n,h=(a&As)===0?s:It(s),p={i:h,v:d,k:r,a:null,e:null,o:!1,prev:t,next:null};try{if(e===null){var m=document.createDocumentFragment();m.append(e=pt())}return p.e=He(()=>i(e,d,h,l)),t!==null&&(t.next=p),p}finally{}}function Vn(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,s=t?t.e.nodes_start:n,i=e.e.nodes_start;i!==null&&i!==r;){var a=rn(i);s.before(i),i=a}}function Le(e,t,n){t===null?(e.first=n,e.effect.first=n&&n.e):(t.e.next&&(t.e.next.prev=null),t.next=n,t.e.next=n&&n.e),n!==null&&(n.e.prev&&(n.e.prev.next=null),n.prev=t,n.e.prev=t&&t.e)}function oo(e,t,n,r){const s=yr;if(n.length===0&&e.length===0){r(t.map(s));return}var i=te,a=Z,l=lo();function o(){Promise.all(n.map(u=>co(u))).then(u=>{l();try{r([...t.map(s),...u])}catch(d){(a.f&dt)===0&&Nt(d,a)}i?.deactivate(),kn()}).catch(u=>{Nt(u,a)})}e.length>0?Promise.all(e).then(()=>{l();try{return o()}finally{i?.deactivate(),kn()}}):o()}function lo(){var e=Z,t=Y,n=Oe,r=te;return function(i=!0){Xe(e),Te(t),Ot(n),i&&r?.activate()}}function kn(){Xe(null),Te(null),Ot(null)}function yr(e){var t=de|Ee,n=Y!==null&&(Y.f&de)!==0?Y:null;return Z!==null&&(Z.f|=qt),{ctx:Oe,deps:null,effects:null,equals:Os,f:t,fn:e,reactions:null,rv:0,v:he,wv:0,parent:n??Z,ac:null}}function co(e,t){let n=Z;n===null&&Fa();var r=n.b,s=void 0,i=It(he),a=!Y,l=new Map;return xo(()=>{var o=Rs();s=o.promise;try{Promise.resolve(e()).then(o.resolve,o.reject).then(()=>{u===te&&u.committed&&u.deactivate(),kn()})}catch(p){o.reject(p),kn()}var u=te;if(a){var d=!r.is_pending();r.update_pending_count(1),u.increment(d),l.get(u)?.reject(Dt),l.delete(u),l.set(u,o)}const h=(p,m=void 0)=>{if(u.activate(),m)m!==Dt&&(i.f|=ft,jt(i,m));else{(i.f&ft)!==0&&(i.f^=ft),jt(i,p);for(const[k,R]of l){if(l.delete(k),k===u)break;R.reject(Dt)}}a&&(r.update_pending_count(-1),u.decrement(d))};o.promise.then(h,p=>h(null,p||"unknown"))}),wo(()=>{for(const o of l.values())o.reject(Dt)}),new Promise(o=>{function u(d){function h(){d===s?o(i):u(s)}d.then(h,h)}u(s)})}function G(e){const t=yr(e);return ii(t),t}function uo(e){const t=yr(e);return t.equals=Ns,t}function Bs(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)Ie(t[n])}}function fo(e){for(var t=e.parent;t!==null;){if((t.f&de)===0)return(t.f&dt)===0?t:null;t=t.parent}return null}function br(e){var t,n=Z;Xe(fo(e));try{e.f&=~kt,Bs(e),t=ci(e)}finally{Xe(n)}return t}function Us(e){var t=br(e);if(e.equals(t)||(te?.is_fork||(e.v=t),e.wv=oi()),!Bt)if(ze!==null)(Xt()||te?.is_fork)&&ze.set(e,t);else{var n=(e.f&Ue)===0?at:me;ge(e,n)}}let er=new Set;const vt=new Map;let Gs=!1;function It(e,t){var n={f:0,v:e,reactions:null,equals:Os,rv:0,wv:0};return n}function B(e,t){const n=It(e);return ii(n),n}function vo(e,t=!1,n=!0){const r=It(e);return t||(r.equals=Ns),r}function E(e,t,n=!1){Y!==null&&(!Ve||(Y.f&rs)!==0)&&js()&&(Y.f&(de|st|gr|rs))!==0&&!tt?.includes(e)&&Wa();let r=n?se(t):t;return jt(e,r)}function jt(e,t){if(!e.equals(t)){var n=e.v;Bt?vt.set(e,t):vt.set(e,n),e.v=t;var r=Ye.ensure();r.capture(e,n),(e.f&de)!==0&&((e.f&Ee)!==0&&br(e),ge(e,(e.f&Ue)!==0?me:at)),e.wv=oi(),Ys(e,Ee),Z!==null&&(Z.f&me)!==0&&(Z.f&(it|Et))===0&&(De===null?Io([e]):De.push(e)),!r.is_fork&&er.size>0&&!Gs&&ho()}return t}function ho(){Gs=!1;var e=ht;Tn(!0);const t=Array.from(er);try{for(const n of t)(n.f&me)!==0&&ge(n,at),sn(n)&&$t(n)}finally{Tn(e)}er.clear()}function Vt(e){E(e,e.v+1)}function Ys(e,t){var n=e.reactions;if(n!==null)for(var r=n.length,s=0;s<r;s++){var i=n[s],a=i.f,l=(a&Ee)===0;if(l&&ge(i,t),(a&de)!==0){var o=i;ze?.delete(o),(a&kt)===0&&(a&Ue&&(i.f|=kt),Ys(o,at))}else l&&((a&st)!==0&&Je!==null&&Je.add(i),Tt(i))}}function se(e){if(typeof e!="object"||e===null||wn in e)return e;const t=Hs(e);if(t!==Ha&&t!==Ra)return e;var n=new Map,r=Ds(e),s=B(0),i=xt,a=l=>{if(xt===i)return l();var o=Y,u=xt;Te(null),os(i);var d=l();return Te(o),os(u),d};return r&&n.set("length",B(e.length)),new Proxy(e,{defineProperty(l,o,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&Ga();var d=n.get(o);return d===void 0?d=a(()=>{var h=B(u.value);return n.set(o,h),h}):E(d,u.value,!0),!0},deleteProperty(l,o){var u=n.get(o);if(u===void 0){if(o in l){const d=a(()=>B(he));n.set(o,d),Vt(s)}}else E(u,he),Vt(s);return!0},get(l,o,u){if(o===wn)return e;var d=n.get(o),h=o in l;if(d===void 0&&(!h||Wt(l,o)?.writable)&&(d=a(()=>{var m=se(h?l[o]:he),k=B(m);return k}),n.set(o,d)),d!==void 0){var p=c(d);return p===he?void 0:p}return Reflect.get(l,o,u)},getOwnPropertyDescriptor(l,o){var u=Reflect.getOwnPropertyDescriptor(l,o);if(u&&"value"in u){var d=n.get(o);d&&(u.value=c(d))}else if(u===void 0){var h=n.get(o),p=h?.v;if(h!==void 0&&p!==he)return{enumerable:!0,configurable:!0,value:p,writable:!0}}return u},has(l,o){if(o===wn)return!0;var u=n.get(o),d=u!==void 0&&u.v!==he||Reflect.has(l,o);if(u!==void 0||Z!==null&&(!d||Wt(l,o)?.writable)){u===void 0&&(u=a(()=>{var p=d?se(l[o]):he,m=B(p);return m}),n.set(o,u));var h=c(u);if(h===he)return!1}return d},set(l,o,u,d){var h=n.get(o),p=o in l;if(r&&o==="length")for(var m=u;m<h.v;m+=1){var k=n.get(m+"");k!==void 0?E(k,he):m in l&&(k=a(()=>B(he)),n.set(m+"",k))}if(h===void 0)(!p||Wt(l,o)?.writable)&&(h=a(()=>B(void 0)),E(h,se(u)),n.set(o,h));else{p=h.v!==he;var R=a(()=>se(u));E(h,R)}var w=Reflect.getOwnPropertyDescriptor(l,o);if(w?.set&&w.set.call(d,u),!p){if(r&&typeof o=="string"){var x=n.get("length"),q=Number(o);Number.isInteger(q)&&q>=x.v&&E(x,q+1)}Vt(s)}return!0},ownKeys(l){c(s);var o=Reflect.ownKeys(l).filter(h=>{var p=n.get(h);return p===void 0||p.v!==he});for(var[u,d]of n)d.v!==he&&!(u in l)&&o.push(u);return o},setPrototypeOf(){Ya()}})}var is,Ws,Vs,Xs;function po(){if(is===void 0){is=window,Ws=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;Vs=Wt(t,"firstChild").get,Xs=Wt(t,"nextSibling").get,ns(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),ns(n)&&(n.__t=void 0)}}function pt(e=""){return document.createTextNode(e)}function xr(e){return Vs.call(e)}function rn(e){return Xs.call(e)}function _(e,t){return xr(e)}function pe(e,t=!1){{var n=xr(e);return n instanceof Comment&&n.data===""?rn(n):n}}function y(e,t=1,n=!1){let r=e;for(;t--;)r=rn(r);return r}function _o(e){e.textContent=""}function Ks(){return!1}function $s(e){var t=Y,n=Z;Te(null),Xe(null);try{return e()}finally{Te(t),Xe(n)}}function mo(e){Z===null&&(Y===null&&Ba(),qa()),Bt&&La()}function go(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function ot(e,t,n){var r=Z;r!==null&&(r.f&Ce)!==0&&(e|=Ce);var s={ctx:Oe,deps:null,nodes_start:null,nodes_end:null,f:e|Ee|Ue,first:null,fn:t,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{$t(s),s.f|=mr}catch(l){throw Ie(s),l}else t!==null&&Tt(s);var i=s;if(n&&i.deps===null&&i.teardown===null&&i.nodes_start===null&&i.first===i.last&&(i.f&qt)===0&&(i=i.first,(e&st)!==0&&(e&zt)!==0&&i!==null&&(i.f|=zt)),i!==null&&(i.parent=r,r!==null&&go(i,r),Y!==null&&(Y.f&de)!==0&&(e&Et)===0)){var a=Y;(a.effects??=[]).push(i)}return s}function Xt(){return Y!==null&&!Ve}function wo(e){const t=ot(_r,null,!1);return ge(t,me),t.teardown=e,t}function ut(e){mo();var t=Z.f,n=!Y&&(t&it)!==0&&(t&mr)===0;if(n){var r=Oe;(r.e??=[]).push(e)}else return Qs(e)}function Qs(e){return ot(pr|Na,e,!1)}function yo(e){Ye.ensure();const t=ot(Et|qt,e,!0);return(n={})=>new Promise(r=>{n.outro?Rt(t,()=>{Ie(t),r(void 0)}):(Ie(t),r(void 0))})}function bo(e){return ot(pr,e,!1)}function xo(e){return ot(gr|qt,e,!0)}function Zs(e,t=0){return ot(_r|t,e,!0)}function ee(e,t=[],n=[],r=[]){oo(r,t,n,s=>{ot(_r,()=>e(...s.map(c)),!0)})}function kr(e,t=0){var n=ot(st|t,e,!0);return n}function He(e){return ot(it|qt,e,!0)}function Js(e){var t=e.teardown;if(t!==null){const n=Bt,r=Y;as(!0),Te(null);try{t.call(null)}finally{as(n),Te(r)}}}function ei(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const s=n.ac;s!==null&&$s(()=>{s.abort(Dt)});var r=n.next;(n.f&Et)!==0?n.parent=null:Ie(n,t),n=r}}function ko(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&it)===0&&Ie(t),t=n}}function Ie(e,t=!0){var n=!1;(t||(e.f&zs)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(To(e.nodes_start,e.nodes_end),n=!0),ei(e,t&&!n),In(e,0),ge(e,dt);var r=e.transitions;if(r!==null)for(const i of r)i.stop();Js(e);var s=e.parent;s!==null&&s.first!==null&&ti(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function To(e,t){for(;e!==null;){var n=e===t?null:rn(e);e.remove(),e=n}}function ti(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function Rt(e,t,n=!0){var r=[];Tr(e,r,!0),ni(r,()=>{n&&Ie(e),t&&t()})}function ni(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var s of e)s.out(r)}else t()}function Tr(e,t,n){if((e.f&Ce)===0){if(e.f^=Ce,e.transitions!==null)for(const a of e.transitions)(a.is_global||n)&&t.push(a);for(var r=e.first;r!==null;){var s=r.next,i=(r.f&zt)!==0||(r.f&it)!==0&&(e.f&st)!==0;Tr(r,t,i?n:!1),r=s}}}function Ir(e){ri(e,!0)}function ri(e,t){if((e.f&Ce)!==0){e.f^=Ce,(e.f&me)===0&&(ge(e,Ee),Tt(e));for(var n=e.first;n!==null;){var r=n.next,s=(n.f&zt)!==0||(n.f&it)!==0;ri(n,s?t:!1),n=r}if(e.transitions!==null)for(const i of e.transitions)(i.is_global||t)&&i.in()}}function si(e,t){for(var n=e.nodes_start,r=e.nodes_end;n!==null;){var s=n===r?null:rn(n);t.append(n),n=s}}let ht=!1;function Tn(e){ht=e}let Bt=!1;function as(e){Bt=e}let Y=null,Ve=!1;function Te(e){Y=e}let Z=null;function Xe(e){Z=e}let tt=null;function ii(e){Y!==null&&(tt===null?tt=[e]:tt.push(e))}let ye=null,Pe=0,De=null;function Io(e){De=e}let ai=1,Kt=0,xt=Kt;function os(e){xt=e}function oi(){return++ai}function sn(e){var t=e.f;if((t&Ee)!==0)return!0;if(t&de&&(e.f&=~kt),(t&at)!==0){var n=e.deps;if(n!==null)for(var r=n.length,s=0;s<r;s++){var i=n[s];if(sn(i)&&Us(i),i.wv>e.wv)return!0}(t&Ue)!==0&&ze===null&&ge(e,me)}return!1}function li(e,t,n=!0){var r=e.reactions;if(r!==null&&!tt?.includes(e))for(var s=0;s<r.length;s++){var i=r[s];(i.f&de)!==0?li(i,t,!1):t===i&&(n?ge(i,Ee):(i.f&me)!==0&&ge(i,at),Tt(i))}}function ci(e){var t=ye,n=Pe,r=De,s=Y,i=tt,a=Oe,l=Ve,o=xt,u=e.f;ye=null,Pe=0,De=null,Y=(u&(it|Et))===0?e:null,tt=null,Ot(e.ctx),Ve=!1,xt=++Kt,e.ac!==null&&($s(()=>{e.ac.abort(Dt)}),e.ac=null);try{e.f|=Zn;var d=e.fn,h=d(),p=e.deps;if(ye!==null){var m;if(In(e,Pe),p!==null&&Pe>0)for(p.length=Pe+ye.length,m=0;m<ye.length;m++)p[Pe+m]=ye[m];else e.deps=p=ye;if(ht&&Xt()&&(e.f&Ue)!==0)for(m=Pe;m<p.length;m++)(p[m].reactions??=[]).push(e)}else p!==null&&Pe<p.length&&(In(e,Pe),p.length=Pe);if(js()&&De!==null&&!Ve&&p!==null&&(e.f&(de|at|Ee))===0)for(m=0;m<De.length;m++)li(De[m],e);return s!==null&&s!==e&&(Kt++,De!==null&&(r===null?r=De:r.push(...De))),(e.f&ft)!==0&&(e.f^=ft),h}catch(k){return Fs(k)}finally{e.f^=Zn,ye=t,Pe=n,De=r,Y=s,tt=i,Ot(a),Ve=l,xt=o}}function Eo(e,t){let n=t.reactions;if(n!==null){var r=Aa.call(n,e);if(r!==-1){var s=n.length-1;s===0?n=t.reactions=null:(n[r]=n[s],n.pop())}}n===null&&(t.f&de)!==0&&(ye===null||!ye.includes(t))&&(ge(t,at),(t.f&Ue)!==0&&(t.f^=Ue,t.f&=~kt),Bs(t),In(t,0))}function In(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)Eo(e,n[r])}function $t(e){var t=e.f;if((t&dt)===0){ge(e,me);var n=Z,r=ht;Z=e,ht=!0;try{(t&(st|Oa))!==0?ko(e):ei(e),Js(e);var s=ci(e);e.teardown=typeof s=="function"?s:null,e.wv=ai;var i;Qn&&$a&&(e.f&Ee)!==0&&e.deps}finally{ht=r,Z=n}}}function c(e){var t=e.f,n=(t&de)!==0;if(Y!==null&&!Ve){var r=Z!==null&&(Z.f&dt)!==0;if(!r&&!tt?.includes(e)){var s=Y.deps;if((Y.f&Zn)!==0)e.rv<Kt&&(e.rv=Kt,ye===null&&s!==null&&s[Pe]===e?Pe++:ye===null?ye=[e]:ye.includes(e)||ye.push(e));else{(Y.deps??=[]).push(e);var i=e.reactions;i===null?e.reactions=[Y]:i.includes(Y)||i.push(Y)}}}if(Bt){if(vt.has(e))return vt.get(e);if(n){var a=e,l=a.v;return((a.f&me)===0&&a.reactions!==null||di(a))&&(l=br(a)),vt.set(a,l),l}}else n&&(!ze?.has(e)||te?.is_fork&&!Xt())&&(a=e,sn(a)&&Us(a),ht&&Xt()&&(a.f&Ue)===0&&ui(a));if(ze?.has(e))return ze.get(e);if((e.f&ft)!==0)throw e.v;return e.v}function ui(e){if(e.deps!==null){e.f^=Ue;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&de)!==0&&(t.f&Ue)===0&&ui(t)}}function di(e){if(e.v===he)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(vt.has(t)||(t.f&de)!==0&&di(t))return!0;return!1}function fi(e){var t=Ve;try{return Ve=!0,e()}finally{Ve=t}}const So=-7169;function ge(e,t){e.f=e.f&So|t}const vi=new Set,tr=new Set;function _t(e){for(var t=0;t<e.length;t++)vi.add(e[t]);for(var n of tr)n(e)}let ls=null;function pn(e){var t=this,n=t.ownerDocument,r=e.type,s=e.composedPath?.()||[],i=s[0]||e.target;ls=e;var a=0,l=ls===e&&e.__root;if(l){var o=s.indexOf(l);if(o!==-1&&(t===document||t===window)){e.__root=t;return}var u=s.indexOf(t);if(u===-1)return;o<=u&&(a=o)}if(i=s[a]||e.target,i!==t){Ca(e,"currentTarget",{configurable:!0,get(){return i||n}});var d=Y,h=Z;Te(null),Xe(null);try{for(var p,m=[];i!==null;){var k=i.assignedSlot||i.parentNode||i.host||null;try{var R=i["__"+r];R!=null&&(!i.disabled||e.target===i)&&R.call(i,e)}catch(w){p?m.push(w):p=w}if(e.cancelBubble||k===t||k===null)break;i=k}if(p){for(let w of m)queueMicrotask(()=>{throw w});throw p}}finally{e.__root=t,delete e.currentTarget,Te(d),Xe(h)}}}function Mo(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function hi(e,t){var n=Z;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function K(e,t){var n=(t&Ma)!==0,r,s=!e.startsWith("<!>");return()=>{r===void 0&&(r=Mo(s?e:"<!>"+e),r=xr(r));var i=n||Ws?document.importNode(r,!0):r.cloneNode(!0);return hi(i,i),i}}function _e(){var e=document.createDocumentFragment(),t=document.createComment(""),n=pt();return e.append(t,n),hi(t,n),e}function C(e,t){e!==null&&e.before(t)}const Po=["touchstart","touchmove"];function Ao(e){return Po.includes(e)}function P(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function Co(e,t){return Do(e,t)}const Pt=new Map;function Do(e,{target:t,anchor:n,props:r={},events:s,context:i,intro:a=!0}){po();var l=new Set,o=h=>{for(var p=0;p<h.length;p++){var m=h[p];if(!l.has(m)){l.add(m);var k=Ao(m);t.addEventListener(m,pn,{passive:k});var R=Pt.get(m);R===void 0?(document.addEventListener(m,pn,{passive:k}),Pt.set(m,1)):Pt.set(m,R+1)}}};o(hr(vi)),tr.add(o);var u=void 0,d=yo(()=>{var h=n??t.appendChild(pt());return no(h,{pending:()=>{}},p=>{if(i){Ne({});var m=Oe;m.c=i}s&&(r.$$events=s),u=e(p,r)||{},i&&je()}),()=>{for(var p of l){t.removeEventListener(p,pn);var m=Pt.get(p);--m===0?(document.removeEventListener(p,pn),Pt.delete(p)):Pt.set(p,m)}tr.delete(o),h!==n&&h.parentNode?.removeChild(h)}});return Ho.set(u,d),u}let Ho=new WeakMap;class Ro{anchor;#e=new Map;#t=new Map;#r=new Map;#n=new Set;#l=!0;constructor(t,n=!0){this.anchor=t,this.#l=n}#i=()=>{var t=te;if(this.#e.has(t)){var n=this.#e.get(t),r=this.#t.get(n);if(r)Ir(r),this.#n.delete(n);else{var s=this.#r.get(n);s&&(this.#t.set(n,s.effect),this.#r.delete(n),s.fragment.lastChild.remove(),this.anchor.before(s.fragment),r=s.effect)}for(const[i,a]of this.#e){if(this.#e.delete(i),i===t)break;const l=this.#r.get(a);l&&(Ie(l.effect),this.#r.delete(a))}for(const[i,a]of this.#t){if(i===n||this.#n.has(i))continue;const l=()=>{if(Array.from(this.#e.values()).includes(i)){var u=document.createDocumentFragment();si(a,u),u.append(pt()),this.#r.set(i,{effect:a,fragment:u})}else Ie(a);this.#n.delete(i),this.#t.delete(i)};this.#l||!r?(this.#n.add(i),Rt(a,l,!1)):l()}}};#s=t=>{this.#e.delete(t);const n=Array.from(this.#e.values());for(const[r,s]of this.#r)n.includes(r)||(Ie(s.effect),this.#r.delete(r))};ensure(t,n){var r=te,s=Ks();if(n&&!this.#t.has(t)&&!this.#r.has(t))if(s){var i=document.createDocumentFragment(),a=pt();i.append(a),this.#r.set(t,{effect:He(()=>n(a)),fragment:i})}else this.#t.set(t,He(()=>n(this.anchor)));if(this.#e.set(r,t),s){for(const[l,o]of this.#t)l===t?r.skipped_effects.delete(o):r.skipped_effects.add(o);for(const[l,o]of this.#r)l===t?r.skipped_effects.delete(o.effect):r.skipped_effects.add(o.effect);r.oncommit(this.#i),r.ondiscard(this.#s)}else this.#i()}}function Q(e,t,n=!1){var r=new Ro(e),s=n?zt:0;function i(a,l){r.ensure(a,l)}kr(()=>{var a=!1;t((l,o=!0)=>{a=!0,i(o,l)}),a||i(!1,null)},s)}const cs=[...` 	
\r\fÂ \v\uFEFF`];function zo(e,t,n){var r=e==null?"":""+e;if(n){for(var s in n)if(n[s])r=r?r+" "+s:s;else if(r.length)for(var i=s.length,a=0;(a=r.indexOf(s,a))>=0;){var l=a+i;(a===0||cs.includes(r[a-1]))&&(l===r.length||cs.includes(r[l]))?r=(a===0?"":r.substring(0,a))+r.substring(l+1):a=l}}return r===""?null:r}function Oo(e,t){return e==null?null:String(e)}function qe(e,t,n,r,s,i){var a=e.__className;if(a!==n||a===void 0){var l=zo(n,r,i);l==null?e.removeAttribute("class"):e.className=l,e.__className=n}else if(i&&s!==i)for(var o in i){var u=!!i[o];(s==null||u!==!!s[o])&&e.classList.toggle(o,u)}return i}function ct(e,t,n,r){var s=e.__style;if(s!==t){var i=Oo(t);i==null?e.removeAttribute("style"):e.style.cssText=i,e.__style=t}return r}const No=Symbol("is custom element"),jo=Symbol("is html");function O(e,t,n,r){var s=Fo(e);s[t]!==(s[t]=n)&&(t==="loading"&&(e[ja]=n),n==null?e.removeAttribute(t):typeof n!="string"&&Lo(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function Fo(e){return e.__attributes??={[No]:e.nodeName.includes("-"),[jo]:e.namespaceURI===Pa}}var us=new Map;function Lo(e){var t=e.getAttribute("is")||e.nodeName,n=us.get(t);if(n)return n;us.set(t,n=[]);for(var r,s=e,i=Element.prototype;i!==s;){r=Da(s);for(var a in r)r[a].set&&n.push(a);s=Hs(s)}return n}function ds(e,t){return e===t||e?.[wn]===t}function qo(e={},t,n,r){return bo(()=>{var s,i;return Zs(()=>{s=i,i=[],fi(()=>{e!==n(...i)&&(t(e,...i),s&&ds(n(...s),e)&&t(null,...s))})}),()=>{nn(()=>{i&&ds(n(...i),e)&&t(null,...i)})}}),e}function ue(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Bo=typeof Symbol=="function"&&Symbol.observable||"@@observable",fs=Bo,Xn=()=>Math.random().toString(36).substring(7).split("").join("."),Uo={INIT:`@@redux/INIT${Xn()}`,REPLACE:`@@redux/REPLACE${Xn()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Xn()}`},En=Uo;function Er(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function pi(e,t,n){if(typeof e!="function")throw new Error(ue(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(ue(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(ue(1));return n(pi)(e,t)}let r=e,s=t,i=new Map,a=i,l=0,o=!1;function u(){a===i&&(a=new Map,i.forEach((w,x)=>{a.set(x,w)}))}function d(){if(o)throw new Error(ue(3));return s}function h(w){if(typeof w!="function")throw new Error(ue(4));if(o)throw new Error(ue(5));let x=!0;u();const q=l++;return a.set(q,w),function(){if(x){if(o)throw new Error(ue(6));x=!1,u(),a.delete(q),i=null}}}function p(w){if(!Er(w))throw new Error(ue(7));if(typeof w.type>"u")throw new Error(ue(8));if(typeof w.type!="string")throw new Error(ue(17));if(o)throw new Error(ue(9));try{o=!0,s=r(s,w)}finally{o=!1}return(i=a).forEach(q=>{q()}),w}function m(w){if(typeof w!="function")throw new Error(ue(10));r=w,p({type:En.REPLACE})}function k(){const w=h;return{subscribe(x){if(typeof x!="object"||x===null)throw new Error(ue(11));function q(){const S=x;S.next&&S.next(d())}return q(),{unsubscribe:w(q)}},[fs](){return this}}}return p({type:En.INIT}),{dispatch:p,subscribe:h,getState:d,replaceReducer:m,[fs]:k}}function Go(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:En.INIT})>"u")throw new Error(ue(12));if(typeof n(void 0,{type:En.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ue(13))})}function Yo(e){const t=Object.keys(e),n={};for(let i=0;i<t.length;i++){const a=t[i];typeof e[a]=="function"&&(n[a]=e[a])}const r=Object.keys(n);let s;try{Go(n)}catch(i){s=i}return function(a={},l){if(s)throw s;let o=!1;const u={};for(let d=0;d<r.length;d++){const h=r[d],p=n[h],m=a[h],k=p(m,l);if(typeof k>"u")throw l&&l.type,new Error(ue(14));u[h]=k,o=o||k!==m}return o=o||r.length!==Object.keys(a).length,o?u:a}}function Sn(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function Wo(...e){return t=>(n,r)=>{const s=t(n,r);let i=()=>{throw new Error(ue(15))};const a={getState:s.getState,dispatch:(o,...u)=>i(o,...u)},l=e.map(o=>o(a));return i=Sn(...l)(s.dispatch),{...s,dispatch:i}}}function Vo(e){return Er(e)&&"type"in e&&typeof e.type=="string"}var _i=Symbol.for("immer-nothing"),vs=Symbol.for("immer-draftable"),be=Symbol.for("immer-state");function Be(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Ae=Object,Ft=Ae.getPrototypeOf,Mn="constructor",Rn="prototype",nr="configurable",Pn="enumerable",yn="writable",Qt="value",rt=e=>!!e&&!!e[be];function Ke(e){return e?mi(e)||zn(e)||!!e[vs]||!!e[Mn]?.[vs]||On(e)||Nn(e):!1}var Xo=Ae[Rn][Mn].toString(),hs=new WeakMap;function mi(e){if(!e||!Sr(e))return!1;const t=Ft(e);if(t===null||t===Ae[Rn])return!0;const n=Ae.hasOwnProperty.call(t,Mn)&&t[Mn];if(n===Object)return!0;if(!Ct(n))return!1;let r=hs.get(n);return r===void 0&&(r=Function.toString.call(n),hs.set(n,r)),r===Xo}function an(e,t,n=!0){on(e)===0?(n?Reflect.ownKeys(e):Ae.keys(e)).forEach(s=>{t(s,e[s],e)}):e.forEach((r,s)=>t(s,r,e))}function on(e){const t=e[be];return t?t.type_:zn(e)?1:On(e)?2:Nn(e)?3:0}var ps=(e,t,n=on(e))=>n===2?e.has(t):Ae[Rn].hasOwnProperty.call(e,t),rr=(e,t,n=on(e))=>n===2?e.get(t):e[t],An=(e,t,n,r=on(e))=>{r===2?e.set(t,n):r===3?e.add(n):e[t]=n};function Ko(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var zn=Array.isArray,On=e=>e instanceof Map,Nn=e=>e instanceof Set,Sr=e=>typeof e=="object",Ct=e=>typeof e=="function",Kn=e=>typeof e=="boolean",et=e=>e.copy_||e.base_,Mr=e=>e.modified_?e.copy_:e.base_;function sr(e,t){if(On(e))return new Map(e);if(Nn(e))return new Set(e);if(zn(e))return Array[Rn].slice.call(e);const n=mi(e);if(t===!0||t==="class_only"&&!n){const r=Ae.getOwnPropertyDescriptors(e);delete r[be];let s=Reflect.ownKeys(r);for(let i=0;i<s.length;i++){const a=s[i],l=r[a];l[yn]===!1&&(l[yn]=!0,l[nr]=!0),(l.get||l.set)&&(r[a]={[nr]:!0,[yn]:!0,[Pn]:l[Pn],[Qt]:e[a]})}return Ae.create(Ft(e),r)}else{const r=Ft(e);if(r!==null&&n)return{...e};const s=Ae.create(r);return Ae.assign(s,e)}}function Pr(e,t=!1){return jn(e)||rt(e)||(on(e)>1&&Ae.defineProperties(e,{set:_n,add:_n,clear:_n,delete:_n}),Ae.freeze(e),t&&an(e,(n,r)=>{Pr(r,!0)},!1)),e}function $o(){Be(2)}var _n={[Qt]:$o};function jn(e){return e===null||!Sr(e)?!0:Ae.isFrozen(e)}var Cn="MapSet",ir="Patches",gi={};function Lt(e){const t=gi[e];return t||Be(0,e),t}var Qo=e=>!!gi[e],Zt,wi=()=>Zt,Zo=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:Qo(Cn)?Lt(Cn):void 0});function _s(e,t){t&&(e.patchPlugin_=Lt(ir),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function ar(e){or(e),e.drafts_.forEach(Jo),e.drafts_=null}function or(e){e===Zt&&(Zt=e.parent_)}var ms=e=>Zt=Zo(Zt,e);function Jo(e){const t=e[be];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function gs(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];if(e!==void 0&&e!==n){n[be].modified_&&(ar(t),Be(4)),Ke(e)&&(e=ws(t,e));const{patchPlugin_:s}=t;s&&s.generateReplacementPatches_(n[be].base_,e,t)}else e=ws(t,n);return el(t,e,!0),ar(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==_i?e:void 0}function ws(e,t){if(jn(t))return t;const n=t[be];if(!n)return Ar(t,e.handledSet_,e);if(!Fn(n,e))return t;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(e);xi(n,e)}return n.copy_}function el(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Pr(t,n)}function yi(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var Fn=(e,t)=>e.scope_===t,tl=[];function bi(e,t,n,r){const s=et(e),i=e.type_;if(r!==void 0&&rr(s,r,i)===t){An(s,r,n,i);return}if(!e.draftLocations_){const l=e.draftLocations_=new Map;an(s,(o,u)=>{if(rt(u)){const d=l.get(u)||[];d.push(o),l.set(u,d)}})}const a=e.draftLocations_.get(t)??tl;for(const l of a)An(s,l,n,i)}function nl(e,t,n){e.callbacks_.push(function(s){const i=t;if(!i||!Fn(i,s))return;s.mapSetPlugin_?.fixSetContents(i);const a=Mr(i);bi(e,i.draft_??i,a,n),xi(i,s)})}function xi(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||(e.assigned_?.size??0)>0)){const{patchPlugin_:r}=t;if(r){const s=r.getPath(e);s&&r.generatePatches_(e,s,t)}yi(e)}}function rl(e,t,n){const{scope_:r}=e;if(rt(n)){const s=n[be];Fn(s,r)&&s.callbacks_.push(function(){bn(e);const a=Mr(s);bi(e,n,a,t)})}else Ke(n)&&e.callbacks_.push(function(){const i=et(e);rr(i,t,e.type_)===n&&r.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&Ar(rr(e.copy_,t,e.type_),r.handledSet_,r)})}function Ar(e,t,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||rt(e)||t.has(e)||!Ke(e)||jn(e)||(t.add(e),an(e,(r,s)=>{if(rt(s)){const i=s[be];if(Fn(i,n)){const a=Mr(i);An(e,r,a,e.type_),yi(i)}}else Ke(s)&&Ar(s,t,n)})),e}function sl(e,t){const n=zn(e),r={type_:n?1:0,scope_:t?t.scope_:wi(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let s=r,i=Cr;n&&(s=[r],i=Jt);const{revoke:a,proxy:l}=Proxy.revocable(s,i);return r.draft_=l,r.revoke_=a,[l,r]}var Cr={get(e,t){if(t===be)return e;const n=et(e);if(!ps(n,t,e.type_))return il(e,n,t);const r=n[t];if(e.finalized_||!Ke(r))return r;if(r===$n(e.base_,t)){bn(e);const s=e.type_===1?+t:t,i=cr(e.scope_,r,e,s);return e.copy_[s]=i}return r},has(e,t){return t in et(e)},ownKeys(e){return Reflect.ownKeys(et(e))},set(e,t,n){const r=ki(et(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const s=$n(et(e),t),i=s?.[be];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_.set(t,!1),!0;if(Ko(n,s)&&(n!==void 0||ps(e.base_,t,e.type_)))return!0;bn(e),lr(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_.set(t,!0),rl(e,t,n)),!0},deleteProperty(e,t){return bn(e),$n(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),lr(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=et(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{[yn]:!0,[nr]:e.type_!==1||t!=="length",[Pn]:r[Pn],[Qt]:n[t]}},defineProperty(){Be(11)},getPrototypeOf(e){return Ft(e.base_)},setPrototypeOf(){Be(12)}},Jt={};an(Cr,(e,t)=>{Jt[e]=function(){const n=arguments;return n[0]=n[0][0],t.apply(this,n)}});Jt.deleteProperty=function(e,t){return Jt.set.call(this,e,t,void 0)};Jt.set=function(e,t,n){return Cr.set.call(this,e[0],t,n,e[0])};function $n(e,t){const n=e[be];return(n?et(n):e)[t]}function il(e,t,n){const r=ki(t,n);return r?Qt in r?r[Qt]:r.get?.call(e.draft_):void 0}function ki(e,t){if(!(t in e))return;let n=Ft(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Ft(n)}}function lr(e){e.modified_||(e.modified_=!0,e.parent_&&lr(e.parent_))}function bn(e){e.copy_||(e.assigned_=new Map,e.copy_=sr(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var al=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(t,n,r)=>{if(Ct(t)&&!Ct(n)){const i=n;n=t;const a=this;return function(o=i,...u){return a.produce(o,d=>n.call(this,d,...u))}}Ct(n)||Be(6),r!==void 0&&!Ct(r)&&Be(7);let s;if(Ke(t)){const i=ms(this),a=cr(i,t,void 0);let l=!0;try{s=n(a),l=!1}finally{l?ar(i):or(i)}return _s(i,r),gs(s,i)}else if(!t||!Sr(t)){if(s=n(t),s===void 0&&(s=t),s===_i&&(s=void 0),this.autoFreeze_&&Pr(s,!0),r){const i=[],a=[];Lt(ir).generateReplacementPatches_(t,s,{patches_:i,inversePatches_:a}),r(i,a)}return s}else Be(1,t)},this.produceWithPatches=(t,n)=>{if(Ct(t))return(a,...l)=>this.produceWithPatches(a,o=>t(o,...l));let r,s;return[this.produce(t,n,(a,l)=>{r=a,s=l}),r,s]},Kn(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),Kn(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),Kn(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Ke(e)||Be(8),rt(e)&&(e=ol(e));const t=ms(this),n=cr(t,e,void 0);return n[be].isManual_=!0,or(t),n}finishDraft(e,t){const n=e&&e[be];(!n||!n.isManual_)&&Be(9);const{scope_:r}=n;return _s(r,t),gs(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const s=t[n];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}n>-1&&(t=t.slice(n+1));const r=Lt(ir).applyPatches_;return rt(e)?r(e,t):this.produce(e,s=>r(s,t))}};function cr(e,t,n,r){const[s,i]=On(t)?Lt(Cn).proxyMap_(t,n):Nn(t)?Lt(Cn).proxySet_(t,n):sl(t,n);return(n?.scope_??wi()).drafts_.push(s),i.callbacks_=n?.callbacks_??[],i.key_=r,n&&r!==void 0?nl(n,i,r):i.callbacks_.push(function(o){o.mapSetPlugin_?.fixSetContents(i);const{patchPlugin_:u}=o;i.modified_&&u&&u.generatePatches_(i,[],o)}),s}function ol(e){return rt(e)||Be(10,e),Ti(e)}function Ti(e){if(!Ke(e)||jn(e))return e;const t=e[be];let n,r=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=sr(e,t.scope_.immer_.useStrictShallowCopy_),r=t.scope_.immer_.shouldUseStrictIteration()}else n=sr(e,!0);return an(n,(s,i)=>{An(n,s,Ti(i))},r),t&&(t.finalized_=!1),n}var ll=new al,Ii=ll.produce;function Ei(e){return({dispatch:n,getState:r})=>s=>i=>typeof i=="function"?i(n,r,e):s(i)}var cl=Ei(),ul=Ei,dl=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Sn:Sn.apply(null,arguments)};function ys(e,t){function n(...r){if(t){let s=t(...r);if(!s)throw new Error(nt(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>Vo(r)&&r.type===e,n}var Si=class Gt extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Gt.prototype)}static get[Symbol.species](){return Gt}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Gt(...t[0].concat(this)):new Gt(...t.concat(this))}};function bs(e){return Ke(e)?Ii(e,()=>{}):e}function mn(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function fl(e){return typeof e=="boolean"}var vl=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:s=!0,actionCreatorCheck:i=!0}=t??{};let a=new Si;return n&&(fl(n)?a.push(cl):a.push(ul(n.extraArgument))),a},hl="RTK_autoBatch",xs=e=>t=>{setTimeout(t,e)},pl=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let s=!0,i=!1,a=!1;const l=new Set,o=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:xs(10):e.type==="callback"?e.queueNotification:xs(e.timeout),u=()=>{a=!1,i&&(i=!1,l.forEach(d=>d()))};return Object.assign({},r,{subscribe(d){const h=()=>s&&d(),p=r.subscribe(h);return l.add(d),()=>{p(),l.delete(d)}},dispatch(d){try{return s=!d?.meta?.[hl],i=!s,i&&(a||(a=!0,o(u))),r.dispatch(d)}finally{s=!0}}})},_l=e=>function(n){const{autoBatch:r=!0}=n??{};let s=new Si(e);return r&&s.push(pl(typeof r=="object"?r:void 0)),s};function ml(e){const t=vl(),{reducer:n=void 0,middleware:r,devTools:s=!0,preloadedState:i=void 0,enhancers:a=void 0}=e||{};let l;if(typeof n=="function")l=n;else if(Er(n))l=Yo(n);else throw new Error(nt(1));let o;typeof r=="function"?o=r(t):o=t();let u=Sn;s&&(u=dl({trace:!1,...typeof s=="object"&&s}));const d=Wo(...o),h=_l(d);let p=typeof a=="function"?a(h):h();const m=u(...p);return pi(l,i,m)}function Mi(e){const t={},n=[];let r;const s={addCase(i,a){const l=typeof i=="string"?i:i.type;if(!l)throw new Error(nt(28));if(l in t)throw new Error(nt(29));return t[l]=a,s},addAsyncThunk(i,a){return a.pending&&(t[i.pending.type]=a.pending),a.rejected&&(t[i.rejected.type]=a.rejected),a.fulfilled&&(t[i.fulfilled.type]=a.fulfilled),a.settled&&n.push({matcher:i.settled,reducer:a.settled}),s},addMatcher(i,a){return n.push({matcher:i,reducer:a}),s},addDefaultCase(i){return r=i,s}};return e(s),[t,n,r]}function gl(e){return typeof e=="function"}function wl(e,t){let[n,r,s]=Mi(t),i;if(gl(e))i=()=>bs(e());else{const l=bs(e);i=()=>l}function a(l=i(),o){let u=[n[o.type],...r.filter(({matcher:d})=>d(o)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[s]),u.reduce((d,h)=>{if(h)if(rt(d)){const m=h(d,o);return m===void 0?d:m}else{if(Ke(d))return Ii(d,p=>h(p,o));{const p=h(d,o);if(p===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return p}}return d},l)}return a.getInitialState=i,a}var yl=Symbol.for("rtk-slice-createasyncthunk");function bl(e,t){return`${e}/${t}`}function xl({creators:e}={}){const t=e?.asyncThunk?.[yl];return function(r){const{name:s,reducerPath:i=s}=r;if(!s)throw new Error(nt(11));const a=(typeof r.reducers=="function"?r.reducers(Tl()):r.reducers)||{},l=Object.keys(a),o={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(A,S){const z=typeof A=="string"?A:A.type;if(!z)throw new Error(nt(12));if(z in o.sliceCaseReducersByType)throw new Error(nt(13));return o.sliceCaseReducersByType[z]=S,u},addMatcher(A,S){return o.sliceMatchers.push({matcher:A,reducer:S}),u},exposeAction(A,S){return o.actionCreators[A]=S,u},exposeCaseReducer(A,S){return o.sliceCaseReducersByName[A]=S,u}};l.forEach(A=>{const S=a[A],z={reducerName:A,type:bl(s,A),createNotation:typeof r.reducers=="function"};El(S)?Ml(z,S,u,t):Il(z,S,u)});function d(){const[A={},S=[],z=void 0]=typeof r.extraReducers=="function"?Mi(r.extraReducers):[r.extraReducers],D={...A,...o.sliceCaseReducersByType};return wl(r.initialState,$=>{for(let N in D)$.addCase(N,D[N]);for(let N of o.sliceMatchers)$.addMatcher(N.matcher,N.reducer);for(let N of S)$.addMatcher(N.matcher,N.reducer);z&&$.addDefaultCase(z)})}const h=A=>A,p=new Map,m=new WeakMap;let k;function R(A,S){return k||(k=d()),k(A,S)}function w(){return k||(k=d()),k.getInitialState()}function x(A,S=!1){function z($){let N=$[A];return typeof N>"u"&&S&&(N=mn(m,z,w)),N}function D($=h){const N=mn(p,S,()=>new WeakMap);return mn(N,$,()=>{const T={};for(const[b,I]of Object.entries(r.selectors??{}))T[b]=kl(I,$,()=>mn(m,$,w),S);return T})}return{reducerPath:A,getSelectors:D,get selectors(){return D(z)},selectSlice:z}}const q={name:s,reducer:R,actions:o.actionCreators,caseReducers:o.sliceCaseReducersByName,getInitialState:w,...x(i),injectInto(A,{reducerPath:S,...z}={}){const D=S??i;return A.inject({reducerPath:D,reducer:R},z),{...q,...x(D,!0)}}};return q}}function kl(e,t,n,r){function s(i,...a){let l=t(i);return typeof l>"u"&&r&&(l=n()),e(l,...a)}return s.unwrapped=e,s}var Pi=xl();function Tl(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function Il({type:e,reducerName:t,createNotation:n},r,s){let i,a;if("reducer"in r){if(n&&!Sl(r))throw new Error(nt(17));i=r.reducer,a=r.prepare}else i=r;s.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,a?ys(e,a):ys(e))}function El(e){return e._reducerDefinitionType==="asyncThunk"}function Sl(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Ml({type:e,reducerName:t},n,r,s){if(!s)throw new Error(nt(18));const{payloadCreator:i,fulfilled:a,pending:l,rejected:o,settled:u,options:d}=n,h=s(e,i,d);r.exposeAction(t,h),a&&r.addCase(h.fulfilled,a),l&&r.addCase(h.pending,l),o&&r.addCase(h.rejected,o),u&&r.addMatcher(h.settled,u),r.exposeCaseReducer(t,{fulfilled:a||gn,pending:l||gn,rejected:o||gn,settled:u||gn})}function gn(){}function nt(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}const Pl={kobold:{attackBonus:5,damage:1},snake:{attackBonus:4,damage:1},cultist:{attackBonus:5,damage:1}},ln=[{id:"kobold",name:"Kobold Dragonshield",ac:14,hp:1,maxHp:1,xp:1,imagePath:"assets/Monster_KoboldDragonshield.png"},{id:"snake",name:"Snake",ac:12,hp:1,maxHp:1,xp:1,imagePath:"assets/Monster_Snake.png"},{id:"cultist",name:"Cultist",ac:13,hp:2,maxHp:2,xp:1,imagePath:"assets/Monster_Cultist.png"}],Al=["kobold","kobold","kobold","snake","snake","snake","cultist","cultist","cultist"],en=[{id:"quinn",name:"Quinn",heroClass:"Cleric",imagePath:"assets/Hero_Cleric_Quinn.png",speed:5,attack:{name:"Mace",attackBonus:6,damage:2,range:1},hp:8,maxHp:8,ac:17},{id:"vistra",name:"Vistra",heroClass:"Fighter",imagePath:"assets/Hero_Fighter_Vistra.png",speed:5,attack:{name:"Warhammer",attackBonus:8,damage:2,range:1},hp:10,maxHp:10,ac:18},{id:"keyleth",name:"Keyleth",heroClass:"Paladin",imagePath:"assets/Hero_Paladin_Keyleth.png",speed:6,attack:{name:"Longsword",attackBonus:7,damage:2,range:1},hp:10,maxHp:10,ac:18},{id:"tarak",name:"Tarak",heroClass:"Rogue",imagePath:"assets/Hero_Rogue_Tarak.png",speed:6,attack:{name:"Short Sword",attackBonus:7,damage:2,range:1},hp:8,maxHp:8,ac:17},{id:"haskan",name:"Haskan",heroClass:"Wizard",imagePath:"assets/Hero_Wizard_Haskan.png",speed:6,attack:{name:"Quarterstaff",attackBonus:4,damage:1,range:1},hp:6,maxHp:6,ac:14}],Cl=[{x:1,y:2},{x:2,y:2},{x:3,y:2},{x:3,y:3},{x:3,y:4},{x:1,y:5},{x:2,y:5},{x:3,y:5}],Ai=[{tileType:"tile-2exit-a",imagePath:"assets/Tile_Black_x2_01.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-2exit-b",imagePath:"assets/Tile_Black_x2_02.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-2exit-c",imagePath:"assets/Tile_Black_x2_03.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-3exit-a",imagePath:"assets/Tile_Black_x3_01.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-3exit-b",imagePath:"assets/Tile_Black_x3_02.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-3exit-c",imagePath:"assets/Tile_Black_x3_03.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-4exit-a",imagePath:"assets/Tile_Black_x4_01.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-4exit-b",imagePath:"assets/Tile_Black_x4_02.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}}],Dl=["tile-2exit-a","tile-2exit-b","tile-2exit-c","tile-3exit-a","tile-3exit-b","tile-3exit-c","tile-4exit-a","tile-4exit-b"],Hl={id:"start-tile",tileType:"start",position:{col:0,row:0},rotation:0,edges:{north:"unexplored",south:"unexplored",east:"unexplored",west:"unexplored"}},Rl={availableHeroes:en,selectedHeroes:[],heroEdgeMap:{}},Ci=Pi({name:"heroes",initialState:Rl,reducers:{toggleHeroSelection:(e,t)=>{const n=t.payload,r=e.selectedHeroes.findIndex(s=>s.id===n);if(r>=0)e.selectedHeroes.splice(r,1),delete e.heroEdgeMap[n];else if(e.selectedHeroes.length<5){const s=e.availableHeroes.find(i=>i.id===n);s&&e.selectedHeroes.push(s)}},selectHeroFromEdge:(e,t)=>{const{heroId:n,edge:r}=t.payload,s=e.selectedHeroes.findIndex(i=>i.id===n);if(s>=0)e.heroEdgeMap[n]===r&&(e.selectedHeroes.splice(s,1),delete e.heroEdgeMap[n]);else if(e.selectedHeroes.length<5){const i=e.availableHeroes.find(a=>a.id===n);i&&(e.selectedHeroes.push(i),e.heroEdgeMap[n]=r)}},clearSelection:e=>{e.selectedHeroes=[],e.heroEdgeMap={}}}}),{toggleHeroSelection:ku,selectHeroFromEdge:zl,clearSelection:Tu}=Ci.actions,Ol=Ci.reducer,Yt={minX:1,maxX:3,minY:0,maxY:7,staircase:[{x:1,y:3},{x:2,y:3},{x:1,y:4},{x:2,y:4}]},At=4,Nl=4,jl=8;function cn(e){const{col:t,row:n}=e.position;if(e.tileType==="start")return{minX:0,maxX:3,minY:0,maxY:7};let r,s;return t>0?r=Nl+(t-1)*At:t<0?r=t*At:r=0,n>0?s=jl+(n-1)*At:n<0?s=n*At:s=0,{minX:r,maxX:r+At-1,minY:s,maxY:s+At-1}}function tn(e,t){for(const n of t.tiles){const r=cn(n);if(e.x>=r.minX&&e.x<=r.maxX&&e.y>=r.minY&&e.y<=r.maxY)return n}return null}function Fl(e){return e.x>=Yt.minX&&e.x<=Yt.maxX&&e.y>=Yt.minY&&e.y<=Yt.maxY}function Di(e){return Yt.staircase.some(t=>t.x===e.x&&t.y===e.y)}function Ll(e,t){return Fl(e)&&!Di(e)}function ql(e,t,n){return t.some(r=>r.position.x===e.x&&r.position.y===e.y&&r.heroId!==n)}function Bl(e,t,n,r){const s=cn(r),i=r.tileType==="start"?1:s.minX,a=e.y===s.minY,l=e.y===s.maxY,o=e.x===s.maxX,u=e.x===i,d=n<0?"north":n>0?"south":null,h=t<0?"west":t>0?"east":null;if(!d||!h)return!1;let p=!1,m=!1;return d==="north"&&a&&r.edges.north==="wall"&&(p=!0),d==="south"&&l&&r.edges.south==="wall"&&(p=!0),h==="east"&&o&&r.edges.east==="wall"&&(m=!0),h==="west"&&u&&r.edges.west==="wall"&&(m=!0),p&&m}function Ul(e,t,n,r){const s=r.x-n.x,i=r.y-n.y;if(s!==0&&i!==0)return!1;let a,l;return i<0?(a="north",l="south"):i>0?(a="south",l="north"):s>0?(a="east",l="west"):(a="west",l="east"),!(e.edges[a]!=="open"||t.edges[l]!=="open")}function Dr(e,t){const n=[],r=[{dx:0,dy:-1,cardinal:!0},{dx:0,dy:1,cardinal:!0},{dx:-1,dy:0,cardinal:!0},{dx:1,dy:0,cardinal:!0},{dx:-1,dy:-1,cardinal:!1},{dx:1,dy:-1,cardinal:!1},{dx:-1,dy:1,cardinal:!1},{dx:1,dy:1,cardinal:!1}];if(!t){for(const i of r){const a={x:e.x+i.dx,y:e.y+i.dy};Ll(a)&&n.push(a)}return n}const s=tn(e,t);if(!s)return n;for(const i of r){const a={x:e.x+i.dx,y:e.y+i.dy},l=tn(a,t);if(l&&!(l.tileType==="start"&&(Di(a)||a.x<1))){if(s.id===l.id){if(!i.cardinal&&Bl(e,i.dx,i.dy,s))continue;n.push(a);continue}i.cardinal&&Ul(s,l,e,a)&&n.push(a)}}return n}function Gl(e,t,n,r,s){const i=[],a=new Set,l=[{pos:e,distance:0}];for(a.add(`${e.x},${e.y}`);l.length>0;){const o=l.shift();if(!o)break;if(o.distance>0&&!ql(o.pos,n,r)&&i.push(o.pos),o.distance<t){const u=Dr(o.pos,s);for(const d of u){const h=`${d.x},${d.y}`;a.has(h)||(a.add(h),l.push({pos:d,distance:o.distance+1}))}}}return i}function Yl(e,t){return t.some(n=>n.x===e.x&&n.y===e.y)}const Wl={north:[{x:1,y:0},{x:2,y:0},{x:3,y:0}],south:[{x:1,y:7},{x:2,y:7},{x:3,y:7}],east:[{x:3,y:0},{x:3,y:1},{x:3,y:2},{x:3,y:5},{x:3,y:6},{x:3,y:7}],west:[{x:1,y:0},{x:1,y:1},{x:1,y:2},{x:1,y:5},{x:1,y:6},{x:1,y:7}]};function Vl(e,t){return Wl[t].some(r=>r.x===e.x&&r.y===e.y)}function Hr(e){return{north:"south",south:"north",east:"west",west:"east"}[e]}function Xl(e,t){const n=t.tiles.find(r=>r.id==="start-tile");if(!n)return null;for(const r of t.unexploredEdges)if(r.tileId===n.id&&Vl(e.position,r.direction))return r;return null}function Kl(e,t){const{col:n,row:r}=e.position;switch(t){case"north":return{col:n,row:r-1};case"south":return{col:n,row:r+1};case"east":return{col:n+1,row:r};case"west":return{col:n-1,row:r}}}function $l(e){const t=Hr(e);return{south:0,west:90,north:180,east:270}[t]}function Ql(e){return Ai.find(t=>t.tileType===e)}function Zl(e,t,n){const r=n.tiles.find(d=>d.id===e.tileId);if(!r)return null;const s=Kl(r,e.direction),i=$l(e.direction);if(!Ql(t))return null;const l=`tile-${n.tiles.length}`,u={north:"unexplored",south:"unexplored",east:"unexplored",west:"unexplored",[Hr(e.direction)]:"open"};return{id:l,tileType:t,position:s,rotation:i,edges:u}}function ur(){return{tiles:[{...Hl}],unexploredEdges:[{tileId:"start-tile",direction:"north"},{tileId:"start-tile",direction:"south"},{tileId:"start-tile",direction:"east"},{tileId:"start-tile",direction:"west"}],tileDeck:[]}}function Jl(e,t=Math.random){const n=[...e];for(let r=n.length-1;r>0;r--){const s=Math.floor(t()*(r+1));[n[r],n[s]]=[n[s],n[r]]}return n}function ec(e,t=Math.random){return Jl(e,t)}function tc(e){if(e.length===0)return{drawnTile:null,remainingDeck:[]};const[t,...n]=e;return{drawnTile:t,remainingDeck:n}}function nc(e,t,n){const r=e.unexploredEdges.filter(o=>!(o.tileId===t.tileId&&o.direction===t.direction)),s=Hr(t.direction),a=["north","south","east","west"].filter(o=>o!==s&&n.edges[o]==="unexplored").map(o=>({tileId:n.id,direction:o}));return{tiles:[...e.tiles.map(o=>o.id===t.tileId?{...o,edges:{...o.edges,[t.direction]:"open"}}:o),n],unexploredEdges:[...r,...a],tileDeck:e.tileDeck}}function Hi(e,t=Math.random){const n=[...e];for(let r=n.length-1;r>0;r--){const s=Math.floor(t()*(r+1));[n[r],n[s]]=[n[s],n[r]]}return n}function rc(e=Math.random){return{drawPile:Hi([...Al],e),discardPile:[]}}function sc(e,t=Math.random){if(e.drawPile.length===0){if(e.discardPile.length===0)return{monster:null,deck:e};const s=Hi(e.discardPile,t);return{monster:s[0],deck:{drawPile:s.slice(1),discardPile:[]}}}const[n,...r]=e.drawPile;return{monster:n,deck:{drawPile:r,discardPile:e.discardPile}}}function ic(e,t){return{drawPile:e.drawPile,discardPile:[...e.discardPile,t]}}function Ri(e){return ln.find(t=>t.id===e)}function ac(e,t,n,r,s){const i=Ri(e);return i?{monsterId:e,instanceId:`${e}-${s}`,position:t,currentHp:i.hp,controllerId:n,tileId:r}:null}const oc=4,ks=Math.floor(oc/2);function lc(){return{x:ks,y:ks}}function zi(e=Math.random){return Math.floor(e()*20)+1}function cc(e,t,n=Math.random){const r=zi(n),s=r+e.attackBonus,i=r===20||s>=t,a=r===20;return{roll:r,attackBonus:e.attackBonus,total:s,targetAC:t,isHit:i,damage:i?e.damage:0,isCritical:a}}function dr(e,t){const n=Math.abs(e.x-t.x),r=Math.abs(e.y-t.y);return n<=1&&r<=1&&(n>0||r>0)}function uc(e){return Ri(e)?.ac}function dc(e,t){const n=t.tiles.find(s=>s.id===e.tileId);if(!n)return null;const r=cn(n);return{x:r.minX+e.position.x,y:r.minY+e.position.y}}function fc(e,t,n,r){return r?tn(e,r)?t.filter(i=>{const a=dc(i,r);return a?dr(e,a):!1}):[]:t.filter(i=>i.tileId===n&&dr(e,i.position))}function Dn(e,t){const n=t.tiles.find(s=>s.id===e.tileId);if(!n)return null;const r=cn(n);return{x:r.minX+e.position.x,y:r.minY+e.position.y}}function Ts(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function vc(e,t,n,r){const s=Dn(e,r);if(!s)return null;const i=t.filter(u=>{const d=n[u.heroId];return d!==void 0&&d>0});if(i.length===0)return null;const a=new Set,l=[{pos:s,distance:0}];a.add(`${s.x},${s.y}`);let o=null;for(;l.length>0;){const u=l.shift();for(const h of i)h.position.x===u.pos.x&&h.position.y===u.pos.y&&(!o||u.distance<o.distance)&&(o={hero:h,distance:u.distance});if(o&&o.distance<u.distance)break;const d=Dr(u.pos,r);for(const h of d){const p=`${h.x},${h.y}`;a.has(p)||(a.add(p),l.push({pos:h,distance:u.distance+1}))}}return o}function hc(e,t,n,r){const s=Dn(e,r);if(!s)return null;const i=t.filter(a=>{const l=n[a.heroId];return l!==void 0&&l>0});for(const a of i)if(dr(s,a.position))return a;return null}function pc(e,t,n,r,s){const i=Dn(e,s);if(!i)return null;const l=Dr(i,s).filter(d=>{if(n.some(p=>p.position.x===d.x&&p.position.y===d.y))return!1;for(const p of r){if(p.instanceId===e.instanceId)continue;const m=Dn(p,s);if(m&&m.x===d.x&&m.y===d.y)return!1}return!0});if(l.length===0)return null;let o=l[0],u=Ts(o,t);for(const d of l){const h=Ts(d,t);h<u&&(u=h,o=d)}return o}function _c(e,t,n=Math.random){const r=Pl[e];if(!r)return{roll:1,attackBonus:0,total:1,targetAC:t,isHit:!1,damage:0,isCritical:!1};const s=zi(n),i=s+r.attackBonus,a=s===20||i>=t,l=s===20;return{roll:s,attackBonus:r.attackBonus,total:i,targetAC:t,isHit:a,damage:a?r.damage:0,isCritical:l}}function mc(e,t,n,r,s,i,a=Math.random){const l=hc(e,t,n,i);if(l){const d=r[l.heroId]??10,h=_c(e.monsterId,d,a);return{type:"attack",targetId:l.heroId,result:h}}const o=vc(e,t,n,i);if(!o)return{type:"none"};const u=pc(e,o.hero.position,t,s,i);return u?{type:"move",destination:u}:{type:"none"}}function gc(e,t,n){const r=n.tiles.find(i=>i.id===t);if(!r)return null;const s=cn(r);return{x:e.x-s.minX,y:e.y-s.minY}}function wc(e,t){return tn(e,t)?.id??null}const fr={currentHeroIndex:0,currentPhase:"hero-phase",turnNumber:1},xn={actionsTaken:[],canMove:!0,canAttack:!0},vr={monstersDefeated:0,monstersToDefeat:2,objective:"Defeat 2 monsters"},yc={currentScreen:"character-select",heroTokens:[],turnState:{...fr},validMoveSquares:[],showingMovement:!1,dungeon:ur(),monsterDeck:{drawPile:[],discardPile:[]},monsters:[],monsterInstanceCounter:0,recentlySpawnedMonsterId:null,attackResult:null,attackTargetId:null,heroHp:[],monsterAttackResult:null,monsterAttackTargetId:null,monsterAttackerId:null,villainPhaseMonsterIndex:0,heroTurnActions:{...xn},scenario:{...vr}};function Is(e,t){const n=[...e.actionsTaken,t],r=n.filter(l=>l==="move").length,s=n.filter(l=>l==="attack").length,i=s===0,a=r<2&&!(r===1&&s===1);return{actionsTaken:n,canMove:a,canAttack:i}}function bc(e){const{actionsTaken:t}=e,n=t.filter(s=>s==="move").length,r=t.filter(s=>s==="attack").length;return n>=1&&r>=1||n>=2}function xc(e){let t=e;return()=>(t=t*1103515245+12345&2147483647,t/2147483647)}function kc(e,t=Math.random){const n=[...e];for(let r=n.length-1;r>0;r--){const s=Math.floor(t()*(r+1));[n[r],n[s]]=[n[s],n[r]]}return n}const Oi=Pi({name:"game",initialState:yc,reducers:{startGame:(e,t)=>{const{heroIds:n,positions:r,seed:s}=t.payload;if(n.length===0||n.length>5)return;const i=s??Date.now();e.randomSeed=i;let a;const l=xc(i);r?a=r:a=kc(Cl,l).slice(0,5),e.heroTokens=n.map((u,d)=>({heroId:u,position:a[d]})),e.turnState={...fr},e.validMoveSquares=[],e.showingMovement=!1;const o=ur();o.tileDeck=ec([...Dl],l),e.dungeon=o,e.monsterDeck=rc(l),e.monsters=[],e.monsterInstanceCounter=0,e.recentlySpawnedMonsterId=null,e.attackResult=null,e.attackTargetId=null,e.heroHp=n.map(u=>{const d=en.find(h=>h.id===u);return{heroId:u,currentHp:d?.hp??8,maxHp:d?.maxHp??8}}),e.monsterAttackResult=null,e.monsterAttackTargetId=null,e.monsterAttackerId=null,e.villainPhaseMonsterIndex=0,e.heroTurnActions={...xn},e.scenario={...vr},e.currentScreen="game-board"},setHeroPosition:(e,t)=>{const n=e.heroTokens.find(r=>r.heroId===t.payload.heroId);n&&(n.position=t.payload.position)},showMovement:(e,t)=>{if(e.turnState.currentPhase!=="hero-phase"||!e.heroTurnActions.canMove)return;const{heroId:n,speed:r}=t.payload,s=e.heroTokens.find(i=>i.heroId===n);s&&(e.validMoveSquares=Gl(s.position,r,e.heroTokens,n,e.dungeon),e.showingMovement=!0)},hideMovement:e=>{e.validMoveSquares=[],e.showingMovement=!1},moveHero:(e,t)=>{const{heroId:n,position:r}=t.payload;if(e.turnState.currentPhase!=="hero-phase"||!e.heroTurnActions.canMove||!Yl(r,e.validMoveSquares))return;const s=e.heroTokens.find(i=>i.heroId===n);s&&(s.position=r,e.validMoveSquares=[],e.showingMovement=!1,e.heroTurnActions=Is(e.heroTurnActions,"move"))},resetGame:e=>{e.currentScreen="character-select",e.heroTokens=[],e.turnState={...fr},e.randomSeed=void 0,e.validMoveSquares=[],e.showingMovement=!1,e.dungeon=ur(),e.monsterDeck={drawPile:[],discardPile:[]},e.monsters=[],e.monsterInstanceCounter=0,e.recentlySpawnedMonsterId=null,e.attackResult=null,e.attackTargetId=null,e.heroHp=[],e.monsterAttackResult=null,e.monsterAttackTargetId=null,e.monsterAttackerId=null,e.villainPhaseMonsterIndex=0,e.heroTurnActions={...xn},e.scenario={...vr}},endHeroPhase:e=>{if(e.turnState.currentPhase!=="hero-phase")return;e.recentlySpawnedMonsterId=null;const t=e.heroTokens[e.turnState.currentHeroIndex];if(!t)return;const n=Xl(t,e.dungeon);if(n&&e.dungeon.tileDeck.length>0){const{drawnTile:r,remainingDeck:s}=tc(e.dungeon.tileDeck);if(r){const i=Zl(n,r,e.dungeon);if(i){e.dungeon=nc(e.dungeon,n,i),e.dungeon.tileDeck=s;const{monster:a,deck:l}=sc(e.monsterDeck);if(a){const o=lc(),u=ac(a,o,t.heroId,i.id,e.monsterInstanceCounter);u&&(e.monsters.push(u),e.monsterInstanceCounter+=1,e.recentlySpawnedMonsterId=u.instanceId),e.monsterDeck=l}}}}e.turnState.currentPhase="exploration-phase"},endExplorationPhase:e=>{e.turnState.currentPhase==="exploration-phase"&&(e.turnState.currentPhase="villain-phase",e.villainPhaseMonsterIndex=0,e.monsterAttackResult=null,e.monsterAttackTargetId=null,e.monsterAttackerId=null)},endVillainPhase:e=>{e.turnState.currentPhase==="villain-phase"&&(e.villainPhaseMonsterIndex=0,e.monsterAttackResult=null,e.monsterAttackTargetId=null,e.monsterAttackerId=null,e.turnState.currentHeroIndex=(e.turnState.currentHeroIndex+1)%e.heroTokens.length,e.turnState.currentHeroIndex===0&&(e.turnState.turnNumber+=1),e.turnState.currentPhase="hero-phase",e.heroTurnActions={...xn})},dismissMonsterCard:e=>{e.recentlySpawnedMonsterId=null},setAttackResult:(e,t)=>{if(e.turnState.currentPhase!=="hero-phase"||!e.heroTurnActions.canAttack)return;const{result:n,targetInstanceId:r}=t.payload;if(e.attackResult=n,e.attackTargetId=r,n.isHit&&n.damage>0){const s=e.monsters.find(i=>i.instanceId===r);s&&(s.currentHp-=n.damage,s.currentHp<=0&&(e.monsters=e.monsters.filter(i=>i.instanceId!==r),e.monsterDeck=ic(e.monsterDeck,s.monsterId),e.scenario.monstersDefeated+=1,e.scenario.monstersDefeated>=e.scenario.monstersToDefeat&&(e.currentScreen="victory")))}e.heroTurnActions=Is(e.heroTurnActions,"attack")},dismissAttackResult:e=>{e.attackResult=null,e.attackTargetId=null},setMonsters:(e,t)=>{e.monsters=t.payload},activateNextMonster:(e,t)=>{if(e.turnState.currentPhase!=="villain-phase")return;const n=e.heroTokens[e.turnState.currentHeroIndex]?.heroId;if(!n)return;const r=e.monsters.filter(u=>u.controllerId===n);if(e.villainPhaseMonsterIndex>=r.length)return;const s=r[e.villainPhaseMonsterIndex];if(!s)return;const i={},a={};for(const u of e.heroHp)i[u.heroId]=u.currentHp;for(const u of e.heroTokens){const d=en.find(h=>h.id===u.heroId);d&&(a[u.heroId]=d.ac)}const l=t.payload?.randomFn??Math.random,o=mc(s,e.heroTokens,i,a,e.monsters,e.dungeon,l);if(o.type==="move"){const u=e.monsters.find(d=>d.instanceId===s.instanceId);if(u){const d=wc(o.destination,e.dungeon);if(d){const h=gc(o.destination,d,e.dungeon);h&&(u.position=h,u.tileId=d)}}}else if(o.type==="attack"&&(e.monsterAttackResult=o.result,e.monsterAttackTargetId=o.targetId,e.monsterAttackerId=s.instanceId,o.result.isHit&&o.result.damage>0)){const u=e.heroHp.find(d=>d.heroId===o.targetId);u&&(u.currentHp=Math.max(0,u.currentHp-o.result.damage),e.heroHp.every(h=>h.currentHp<=0)&&(e.currentScreen="defeat"))}e.villainPhaseMonsterIndex+=1},dismissMonsterAttackResult:e=>{e.monsterAttackResult=null,e.monsterAttackTargetId=null,e.monsterAttackerId=null},setHeroHp:(e,t)=>{const{heroId:n,hp:r}=t.payload,s=e.heroHp.find(i=>i.heroId===n);s&&(s.currentHp=Math.max(0,r))}}}),{startGame:Tc,setHeroPosition:Iu,showMovement:Es,hideMovement:Ic,moveHero:Ec,resetGame:Rr,endHeroPhase:Ss,endExplorationPhase:Sc,endVillainPhase:Mc,dismissMonsterCard:Pc,setAttackResult:Ac,dismissAttackResult:Cc,setMonsters:Eu,activateNextMonster:Dc,dismissMonsterAttackResult:Hc,setHeroHp:Su}=Oi.actions,Rc=Oi.reducer,U=ml({reducer:{heroes:Ol,game:Rc}});typeof window<"u"&&(window.__REDUX_STORE__=U);function Re(e){const t="/Ashardalon/",n=e.startsWith("/")?e.slice(1):e;return(t.endsWith("/")?t:t+"/")+n}var zc=K('<button><img class="hero-image svelte-1rwnzlz"/> <div class="hero-info svelte-1rwnzlz"><span class="hero-name svelte-1rwnzlz" data-testid="hero-name"> </span> <span class="hero-class svelte-1rwnzlz"> </span></div></button>'),Oc=K('<button><img class="hero-image svelte-1rwnzlz"/> <div class="hero-info svelte-1rwnzlz"><span class="hero-name svelte-1rwnzlz" data-testid="hero-name"> </span> <span class="hero-class svelte-1rwnzlz"> </span></div></button>'),Nc=K('<button><img class="hero-image svelte-1rwnzlz"/> <div class="hero-info svelte-1rwnzlz"><span class="hero-name svelte-1rwnzlz" data-testid="hero-name"> </span> <span class="hero-class svelte-1rwnzlz"> </span></div></button>'),jc=K('<button><img class="hero-image svelte-1rwnzlz"/> <div class="hero-info svelte-1rwnzlz"><span class="hero-name svelte-1rwnzlz" data-testid="hero-name"> </span> <span class="hero-class svelte-1rwnzlz"> </span></div></button>'),Fc=K('<div class="character-select svelte-1rwnzlz" data-testid="character-select"><div class="edge-zone edge-top svelte-1rwnzlz" data-testid="edge-top"><div class="hero-row svelte-1rwnzlz" data-testid="hero-grid"></div></div> <div class="middle-section svelte-1rwnzlz"><div class="edge-zone edge-left svelte-1rwnzlz" data-testid="edge-left"><div class="hero-column svelte-1rwnzlz"></div></div> <div class="center-zone svelte-1rwnzlz" data-testid="center-zone"><h1 class="svelte-1rwnzlz">Select Your Heroes</h1> <p class="instructions svelte-1rwnzlz">Choose 1-5 heroes for your adventure</p> <p class="instructions svelte-1rwnzlz">Tap a hero from your edge of the table</p> <div class="selection-info svelte-1rwnzlz"><span data-testid="selected-count"> </span></div> <button class="start-button svelte-1rwnzlz" data-testid="start-game-button">Start Adventure</button></div> <div class="edge-zone edge-right svelte-1rwnzlz" data-testid="edge-right"><div class="hero-column svelte-1rwnzlz"></div></div></div> <div class="edge-zone edge-bottom svelte-1rwnzlz" data-testid="edge-bottom"><div class="hero-row svelte-1rwnzlz"></div></div></div>');function Lc(e,t){Ne(t,!0);let n=B(se([])),r=B(se([])),s=B(se({}));ut(()=>{const T=U.subscribe(()=>{const I=U.getState();E(n,I.heroes.selectedHeroes,!0),E(r,I.heroes.availableHeroes,!0),E(s,I.heroes.heroEdgeMap,!0)}),b=U.getState();return E(n,b.heroes.selectedHeroes,!0),E(r,b.heroes.availableHeroes,!0),E(s,b.heroes.heroEdgeMap,!0),T});function i(T,b){return c(s)[T]===b}function a(T,b){const I=c(s)[T];return I!==void 0&&I!==b}function l(T,b){U.dispatch(zl({heroId:T,edge:b}))}function o(){c(n).length>0&&U.dispatch(Tc({heroIds:c(n).map(T=>T.id)}))}function u(){return c(n).length>=1&&c(n).length<=5}var d=Fc(),h=_(d),p=_(h);We(p,21,()=>c(r),T=>T.id,(T,b)=>{var I=zc();let V;I.__click=()=>l(c(b).id,"top");var J=_(I),le=y(J,2),ne=_(le),fe=_(ne),xe=y(ne,2),W=_(xe);ee((re,ae,ce)=>{V=qe(I,1,"hero-card svelte-1rwnzlz",null,V,re),O(I,"data-testid",`hero-${c(b).id??""}-top`),I.disabled=ae,O(J,"src",ce),O(J,"alt",c(b).name),P(fe,c(b).name),P(W,c(b).heroClass)},[()=>({selected:i(c(b).id,"top"),unavailable:a(c(b).id,"top")}),()=>a(c(b).id,"top"),()=>Re(c(b).imagePath)]),C(T,I)});var m=y(h,2),k=_(m),R=_(k);We(R,21,()=>c(r),T=>T.id,(T,b)=>{var I=Oc();let V;I.__click=()=>l(c(b).id,"left");var J=_(I),le=y(J,2),ne=_(le),fe=_(ne),xe=y(ne,2),W=_(xe);ee((re,ae,ce)=>{V=qe(I,1,"hero-card svelte-1rwnzlz",null,V,re),O(I,"data-testid",`hero-${c(b).id??""}-left`),I.disabled=ae,O(J,"src",ce),O(J,"alt",c(b).name),P(fe,c(b).name),P(W,c(b).heroClass)},[()=>({selected:i(c(b).id,"left"),unavailable:a(c(b).id,"left")}),()=>a(c(b).id,"left"),()=>Re(c(b).imagePath)]),C(T,I)});var w=y(k,2),x=y(_(w),6),q=_(x),A=_(q),S=y(x,2);S.__click=o;var z=y(w,2),D=_(z);We(D,21,()=>c(r),T=>T.id,(T,b)=>{var I=Nc();let V;I.__click=()=>l(c(b).id,"right");var J=_(I),le=y(J,2),ne=_(le),fe=_(ne),xe=y(ne,2),W=_(xe);ee((re,ae,ce)=>{V=qe(I,1,"hero-card svelte-1rwnzlz",null,V,re),O(I,"data-testid",`hero-${c(b).id??""}-right`),I.disabled=ae,O(J,"src",ce),O(J,"alt",c(b).name),P(fe,c(b).name),P(W,c(b).heroClass)},[()=>({selected:i(c(b).id,"right"),unavailable:a(c(b).id,"right")}),()=>a(c(b).id,"right"),()=>Re(c(b).imagePath)]),C(T,I)});var $=y(m,2),N=_($);We(N,21,()=>c(r),T=>T.id,(T,b)=>{var I=jc();let V;I.__click=()=>l(c(b).id,"bottom");var J=_(I),le=y(J,2),ne=_(le),fe=_(ne),xe=y(ne,2),W=_(xe);ee((re,ae,ce)=>{V=qe(I,1,"hero-card svelte-1rwnzlz",null,V,re),O(I,"data-testid",`hero-${c(b).id??""}`),I.disabled=ae,O(J,"src",ce),O(J,"alt",c(b).name),P(fe,c(b).name),P(W,c(b).heroClass)},[()=>({selected:i(c(b).id,"bottom"),unavailable:a(c(b).id,"bottom")}),()=>a(c(b).id,"bottom"),()=>Re(c(b).imagePath)]),C(T,I)}),ee(T=>{P(A,`${c(n).length??""} heroes selected`),S.disabled=T},[()=>!u()]),C(e,d),je()}_t(["click"]);var qc=K('<button class="move-square svelte-ehd1hj" data-testid="move-square"><span class="sr-only svelte-ehd1hj"> </span></button>'),Bc=K('<div class="movement-overlay svelte-ehd1hj" data-testid="movement-overlay"></div>');function Uc(e,t){Ne(t,!0);function n(i){const a=t.tileOffsetX+i.x*t.cellSize,l=t.tileOffsetY+i.y*t.cellSize;return`left: ${a}px; top: ${l}px; width: ${t.cellSize}px; height: ${t.cellSize}px;`}function r(i,a){i.stopPropagation(),t.onSquareClick(a)}var s=Bc();We(s,21,()=>t.validMoveSquares,i=>`${i.x},${i.y}`,(i,a)=>{var l=qc();l.__click=d=>r(d,c(a));var o=_(l),u=_(o);ee(d=>{O(l,"data-position-x",c(a).x),O(l,"data-position-y",c(a).y),ct(l,d),P(u,`Move to (${c(a).x??""}, ${c(a).y??""})`)},[()=>n(c(a))]),C(i,l)}),C(e,s),je()}_t(["click"]);var Gc=K('<div class="tile-deck-counter svelte-9649r" data-testid="tile-deck-counter"><span class="deck-icon svelte-9649r">ð¦</span> <span class="deck-count svelte-9649r" data-testid="tile-deck-count"> </span> <span class="deck-label svelte-9649r">tiles</span></div>');function Yc(e,t){var n=Gc(),r=y(_(n),2),s=_(r);ee(()=>P(s,t.tileCount)),C(e,n)}var Wc=K('<div class="unexplored-edge svelte-12eown4" data-testid="unexplored-edge"><span class="question-mark svelte-12eown4">?</span></div>');function Vc(e,t){Ne(t,!0);const r=(()=>{const l=t.cellSize*1.5,o=36;switch(t.direction){case"north":return{left:`${t.tileWidth/2-l/2}px`,top:`${o-8/2}px`,width:`${l}px`,height:"8px"};case"south":return{left:`${t.tileWidth/2-l/2}px`,bottom:`${o-8/2}px`,width:`${l}px`,height:"8px"};case"east":return{right:`${o-8/2}px`,top:`${t.tileHeight/2-l/2}px`,width:"8px",height:`${l}px`};case"west":return{left:`${o-8/2}px`,top:`${t.tileHeight/2-l/2}px`,width:"8px",height:`${l}px`}}})(),s=Object.entries(r).map(([a,l])=>`${a}: ${l}`).join("; ");var i=Wc();ee(()=>{O(i,"data-direction",t.direction),ct(i,s)}),C(e,i),je()}var Xc=K('<div class="monster-token svelte-1g5ysl" data-testid="monster-token"><img class="token-image svelte-1g5ysl"/> <span class="token-label svelte-1g5ysl"> </span></div>');function Kc(e,t){Ne(t,!0);const n=G(()=>ln.find(l=>l.id===t.monster.monsterId)),r=G(()=>()=>{const l=t.cellSize/2,o=t.tilePixelOffset.x+t.tileOffsetX+t.monster.position.x*t.cellSize+l,u=t.tilePixelOffset.y+t.tileOffsetY+t.monster.position.y*t.cellSize+l;return`left: ${o}px; top: ${u}px;`});var s=_e(),i=pe(s);{var a=l=>{var o=Xc(),u=_(o),d=y(u,2),h=_(d);ee((p,m)=>{O(o,"data-monster-id",t.monster.instanceId),ct(o,p),O(u,"src",m),O(u,"alt",c(n).name),P(h,c(n).name)},[()=>c(r)(),()=>Re(c(n).imagePath)]),C(l,o)};Q(i,l=>{c(n)&&l(a)})}C(e,s),je()}var $c=K('<div class="monster-card-overlay svelte-at5lsg" role="dialog" aria-modal="true" aria-label="Monster spawned" tabindex="0" data-testid="monster-card-overlay"><div class="monster-card svelte-at5lsg" role="article" data-testid="monster-card"><div class="card-header svelte-at5lsg"><h3 class="monster-name svelte-at5lsg" data-testid="monster-name"> </h3> <button class="dismiss-button svelte-at5lsg" aria-label="Dismiss monster card" data-testid="dismiss-monster-card">â</button></div> <div class="card-image svelte-at5lsg"><img class="monster-image svelte-at5lsg"/></div> <div class="card-stats svelte-at5lsg"><div class="stat svelte-at5lsg"><span class="stat-label svelte-at5lsg">AC</span> <span class="stat-value svelte-at5lsg" data-testid="monster-ac"> </span></div> <div class="stat svelte-at5lsg"><span class="stat-label svelte-at5lsg">HP</span> <span class="stat-value svelte-at5lsg" data-testid="monster-hp"> </span></div> <div class="stat svelte-at5lsg"><span class="stat-label svelte-at5lsg">XP</span> <span class="stat-value svelte-at5lsg" data-testid="monster-xp"> </span></div></div> <p class="card-hint svelte-at5lsg">Click anywhere to dismiss</p></div></div>');function Qc(e,t){Ne(t,!0);const n=G(()=>ln.find(o=>o.id===t.monsterId));function r(){t.onDismiss&&t.onDismiss()}function s(o){(o.key==="Escape"||o.key==="Enter"||o.key===" ")&&(o.preventDefault(),r())}var i=_e(),a=pe(i);{var l=o=>{var u=$c();u.__click=r,u.__keydown=s;var d=_(u);d.__click=I=>I.stopPropagation(),d.__keydown=I=>I.stopPropagation();var h=_(d),p=_(h),m=_(p),k=y(p,2);k.__click=r;var R=y(h,2),w=_(R),x=y(R,2),q=_(x),A=y(_(q),2),S=_(A),z=y(q,2),D=y(_(z),2),$=_(D),N=y(z,2),T=y(_(N),2),b=_(T);ee(I=>{P(m,c(n).name),O(w,"src",I),O(w,"alt",c(n).name),P(S,c(n).ac),P($,c(n).hp),P(b,c(n).xp)},[()=>Re(c(n).imagePath)]),C(o,u)};Q(a,o=>{c(n)&&o(l)})}C(e,i),je()}_t(["click","keydown"]);var Zc=K('<button class="attack-button svelte-1ea4ae8" data-testid="attack-button"> </button>'),Jc=K('<div class="attack-panel svelte-1ea4ae8" data-testid="attack-panel"><div class="attack-header svelte-1ea4ae8"><span class="attack-label svelte-1ea4ae8"> </span> <span class="attack-stats svelte-1ea4ae8"> </span></div> <div class="attack-targets svelte-1ea4ae8"></div></div>');function eu(e,t){Ne(t,!0);function n(l){return ln.find(u=>u.id===l)?.name||"Unknown"}function r(l){t.onAttack(l)}var s=_e(),i=pe(s);{var a=l=>{var o=Jc(),u=_(o),d=_(u),h=_(d),p=y(d,2),m=_(p),k=y(u,2);We(k,21,()=>t.adjacentMonsters,R=>R.instanceId,(R,w)=>{var x=Zc();x.__click=()=>r(c(w).instanceId);var q=_(x);ee((A,S)=>{O(x,"data-target-id",c(w).instanceId),O(x,"aria-label",`Attack ${A??""}`),P(q,`Attack ${S??""}`)},[()=>n(c(w).monsterId),()=>n(c(w).monsterId)]),C(R,x)}),ee(()=>{P(h,`Attack with ${t.heroAttack.name??""}`),P(m,`+${t.heroAttack.attackBonus??""} / ${t.heroAttack.damage??""} dmg`)}),C(l,o)};Q(i,l=>{t.adjacentMonsters.length>0&&l(a)})}C(e,s),je()}_t(["click"]);var tu=K('<span class="result-text critical svelte-1jt2qdd" data-testid="result-text">âï¸ CRITICAL HIT!</span>'),nu=K('<span class="result-text hit svelte-1jt2qdd" data-testid="result-text">â HIT!</span>'),ru=K('<span class="result-text miss svelte-1jt2qdd" data-testid="result-text">â MISS!</span>'),su=K('<div class="damage-info svelte-1jt2qdd" data-testid="damage-info"><span class="damage-value svelte-1jt2qdd"> </span> <span class="damage-label svelte-1jt2qdd"> </span></div>'),iu=K('<div class="combat-result-overlay svelte-1jt2qdd" role="dialog" aria-modal="true" aria-label="Combat result" tabindex="0" data-testid="combat-result-overlay"><div role="document" data-testid="combat-result"><div class="result-header svelte-1jt2qdd"><h3 class="attacker-info svelte-1jt2qdd" data-testid="attacker-info"> </h3> <button class="dismiss-button svelte-1jt2qdd" aria-label="Dismiss combat result" data-testid="dismiss-combat-result">â</button></div> <div class="dice-roll-section svelte-1jt2qdd"><div class="dice-container svelte-1jt2qdd"><span class="d20-icon svelte-1jt2qdd" aria-label="D20 die">D20</span> <span class="roll-value svelte-1jt2qdd" data-testid="roll-value"> </span></div> <div class="roll-breakdown svelte-1jt2qdd"><div class="breakdown-row svelte-1jt2qdd"><span class="breakdown-label svelte-1jt2qdd">Roll:</span> <span class="breakdown-value svelte-1jt2qdd" data-testid="dice-roll"> </span></div> <div class="breakdown-row svelte-1jt2qdd"><span class="breakdown-label svelte-1jt2qdd">+ Bonus:</span> <span class="breakdown-value svelte-1jt2qdd" data-testid="attack-bonus"> </span></div> <div class="breakdown-divider svelte-1jt2qdd"></div> <div class="breakdown-row total svelte-1jt2qdd"><span class="breakdown-label svelte-1jt2qdd">Total:</span> <span class="breakdown-value svelte-1jt2qdd" data-testid="attack-total"> </span></div> <div class="breakdown-row target svelte-1jt2qdd"><span class="breakdown-label svelte-1jt2qdd">vs AC:</span> <span class="breakdown-value svelte-1jt2qdd" data-testid="target-ac"> </span></div></div></div> <div class="result-section svelte-1jt2qdd"><!> <!></div> <p class="dismiss-hint svelte-1jt2qdd">Click anywhere to dismiss</p></div></div>');function Ms(e,t){Ne(t,!0);function n(){t.onDismiss&&t.onDismiss()}function r(W){(W.key==="Escape"||W.key==="Enter"||W.key===" ")&&(W.preventDefault(),n())}var s=iu();s.__click=n,s.__keydown=r;var i=_(s);let a;i.__click=W=>W.stopPropagation(),i.__keydown=W=>W.stopPropagation();var l=_(i),o=_(l),u=_(o),d=y(o,2);d.__click=n;var h=y(l,2),p=_(h),m=y(_(p),2),k=_(m),R=y(p,2),w=_(R),x=y(_(w),2),q=_(x),A=y(w,2),S=y(_(A),2),z=_(S),D=y(A,4),$=y(_(D),2),N=_($),T=y(D,2),b=y(_(T),2),I=_(b),V=y(h,2),J=_(V);{var le=W=>{var re=tu();C(W,re)},ne=W=>{var re=_e(),ae=pe(re);{var ce=ve=>{var Ut=nu();C(ve,Ut)},St=ve=>{var Ut=ru();C(ve,Ut)};Q(ae,ve=>{t.result.isHit?ve(ce):ve(St,!1)},!0)}C(W,re)};Q(J,W=>{t.result.isCritical?W(le):W(ne,!1)})}var fe=y(J,2);{var xe=W=>{var re=su(),ae=_(re),ce=_(ae),St=y(ae,2),ve=_(St);ee(()=>{P(ce,t.result.damage),P(ve,`damage to ${t.targetName??""}`)}),C(W,re)};Q(fe,W=>{t.result.isHit&&W(xe)})}ee(()=>{a=qe(i,1,"combat-result svelte-1jt2qdd",null,a,{hit:t.result.isHit,miss:!t.result.isHit,critical:t.result.isCritical}),P(u,`${t.attackerName??""} attacks with ${t.attackName??""}!`),P(k,t.result.roll),P(q,t.result.roll),P(z,t.result.attackBonus),P(N,t.result.total),P(I,t.result.targetAC)}),C(e,s),je()}_t(["click","keydown"]);var au=K('<div class="player-info svelte-8w11tm" data-testid="turn-indicator"><img class="player-avatar svelte-8w11tm"/> <div class="turn-details svelte-8w11tm"><span class="player-name svelte-8w11tm"> </span> <span class="turn-phase svelte-8w11tm" data-testid="turn-phase"> </span> <span class="turn-number svelte-8w11tm"> </span> <span class="hero-hp svelte-8w11tm" data-testid="hero-hp"> </span></div></div>'),ou=K('<div class="player-info svelte-8w11tm"><img class="player-avatar svelte-8w11tm"/> <div class="turn-details svelte-8w11tm"><span class="player-name svelte-8w11tm"> </span> <span class="turn-phase svelte-8w11tm"> </span> <span class="turn-number svelte-8w11tm"> </span> <span class="hero-hp svelte-8w11tm"> </span></div></div>'),lu=K('<div><img class="tile-image svelte-8w11tm"/> <!></div>'),cu=K('<div class="movement-overlay-container svelte-8w11tm"><!></div>'),uu=K('<div data-testid="hero-token"><img class="token-image svelte-8w11tm"/> <span class="token-label svelte-8w11tm"> </span></div>'),du=K('<button class="activate-monster-button svelte-8w11tm" data-testid="activate-monster-button"> </button>'),fu=K('<div class="player-info svelte-8w11tm"><img class="player-avatar svelte-8w11tm"/> <div class="turn-details svelte-8w11tm"><span class="player-name svelte-8w11tm"> </span> <span class="turn-phase svelte-8w11tm"> </span> <span class="turn-number svelte-8w11tm"> </span> <span class="hero-hp svelte-8w11tm"> </span></div></div>'),vu=K('<div class="player-info svelte-8w11tm" data-testid="turn-indicator"><img class="player-avatar svelte-8w11tm"/> <div class="turn-details svelte-8w11tm"><span class="player-name svelte-8w11tm"> </span> <span class="turn-phase svelte-8w11tm" data-testid="turn-phase"> </span> <span class="turn-number svelte-8w11tm"> </span> <span class="hero-hp svelte-8w11tm" data-testid="hero-hp"> </span></div></div>'),hu=K('<div class="game-board svelte-8w11tm" data-testid="game-board"><div data-testid="player-zone-top"><!></div> <div class="middle-section svelte-8w11tm"><div data-testid="player-zone-left"><!></div> <div class="board-container svelte-8w11tm"><div class="dungeon-map svelte-8w11tm" data-testid="dungeon-map" role="button" tabindex="0"><!> <!> <!> <!></div> <div class="board-controls svelte-8w11tm"><div class="objective-display svelte-8w11tm" data-testid="objective-display"><span class="objective-label svelte-8w11tm">ð¯ Objective:</span> <span class="objective-text svelte-8w11tm"> </span> <span class="objective-progress svelte-8w11tm" data-testid="objective-progress"> </span></div> <!> <!> <button class="end-phase-button svelte-8w11tm" data-testid="end-phase-button"> </button> <button class="reset-button svelte-8w11tm" data-testid="reset-button">â© Return to Character Select</button> <!></div></div> <div data-testid="player-zone-right"><!></div></div> <div data-testid="player-zone-bottom"><!></div> <!> <!> <!></div>');function pu(e,t){Ne(t,!0);const n=140,r=4,s=8,i=4,a=n*r,l=n*s,o=n*i,u=140,d=.15,h=1,p=36,m=36,k=632,R=632,w=1195,x=3,q=0;let A=B(se([])),S=B(se([])),z=B(se({})),D=B(se({currentHeroIndex:0,currentPhase:"hero-phase",turnNumber:1})),$=B(se([])),N=B(!1),T=B(se({tiles:[],unexploredEdges:[],tileDeck:[]})),b=B(se([])),I=B(null),V=B(null),J=B(null),le=B(se([])),ne=B(null),fe=B(null),xe=B(null),W=B(0),re=B(se({actionsTaken:[],canMove:!0,canAttack:!0})),ae=B(se({monstersDefeated:0,monstersToDefeat:2,objective:"Defeat 2 monsters"})),ce=B(null),St=B(1),ve=G(()=>Ut(c(T)));ut(()=>{const v=U.subscribe(()=>{const g=U.getState();E(A,g.game.heroTokens,!0),E(S,g.heroes.selectedHeroes,!0),E(z,g.heroes.heroEdgeMap,!0),E(D,g.game.turnState,!0),E($,g.game.validMoveSquares,!0),E(N,g.game.showingMovement,!0),E(T,g.game.dungeon,!0),E(b,g.game.monsters,!0),E(I,g.game.recentlySpawnedMonsterId,!0),E(V,g.game.attackResult,!0),E(J,g.game.attackTargetId,!0),E(le,g.game.heroHp,!0),E(ne,g.game.monsterAttackResult,!0),E(fe,g.game.monsterAttackTargetId,!0),E(xe,g.game.monsterAttackerId,!0),E(W,g.game.villainPhaseMonsterIndex,!0),E(re,g.game.heroTurnActions,!0),E(ae,g.game.scenario,!0)}),f=U.getState();return E(A,f.game.heroTokens,!0),E(S,f.heroes.selectedHeroes,!0),E(z,f.heroes.heroEdgeMap,!0),E(D,f.game.turnState,!0),E($,f.game.validMoveSquares,!0),E(N,f.game.showingMovement,!0),E(T,f.game.dungeon,!0),E(b,f.game.monsters,!0),E(I,f.game.recentlySpawnedMonsterId,!0),E(V,f.game.attackResult,!0),E(J,f.game.attackTargetId,!0),E(le,f.game.heroHp,!0),E(ne,f.game.monsterAttackResult,!0),E(fe,f.game.monsterAttackTargetId,!0),E(xe,f.game.monsterAttackerId,!0),E(W,f.game.villainPhaseMonsterIndex,!0),E(re,f.game.heroTurnActions,!0),E(ae,f.game.scenario,!0),v}),ut(()=>{c(D).currentPhase==="hero-phase"&&bc(c(re))&&U.dispatch(Ss())}),ut(()=>{if(c(D).currentPhase!=="hero-phase"||!c(re).canMove||c(N))return;const v=we();if(!v)return;const f=mt(v);f&&U.dispatch(Es({heroId:v,speed:f.speed}))});function Ut(v){if(v.tiles.length===0)return{minCol:0,maxCol:0,minRow:0,maxRow:0,width:k,height:w};let f=1/0,g=-1/0,M=1/0,H=-1/0;for(const oe of v.tiles)f=Math.min(f,oe.position.col),g=Math.max(g,oe.position.col),M=Math.min(M,oe.position.row),H=Math.max(H,oe.position.row);const F=g-f+1,j=k+(F-1)*a,X=Math.max(0,-M),L=Math.max(0,H),ie=w+X*o+L*o;return{minCol:f,maxCol:g,minRow:M,maxRow:H,width:Math.max(j,k),height:Math.max(ie,w)}}function un(v,f){const g=(v.position.col-f.minCol)*a;let M=0;return v.position.row<0?M=(v.position.row-f.minRow)*o:v.position.row===0?M=Math.max(0,-f.minRow)*o-x:M=Math.max(0,-f.minRow)*o+l+(v.position.row-1)*o-x-q,{x:g,y:M}}function Ni(v){return v.tileType==="start"?"assets/StartTile.png":Ai.find(g=>g.tileType===v.tileType)?.imagePath||"assets/Tile_Black_x2_01.png"}function zr(v){return v.tileType==="start"?{width:k,height:w}:{width:k,height:R}}ut(()=>{if(c(ce)){const v=()=>{const g=c(ce);if(!g)return;const M=g.clientWidth-u,H=g.clientHeight-u,F=c(ve),j=M/F.width,X=H/F.height,L=Math.min(j,X,h);E(St,Math.max(L,d),!0)};v();const f=new ResizeObserver(v);return f.observe(c(ce)),()=>f.disconnect()}});function mt(v){return c(S).find(f=>f.id===v)}function we(){return c(A)[c(D).currentHeroIndex]?.heroId}function dn(v){switch(v){case"hero-phase":return"Hero Phase";case"exploration-phase":return"Exploration Phase";case"villain-phase":return"Villain Phase"}}function fn(v){return c(le).find(g=>g.heroId===v)?.currentHp??0}function vn(v){return c(le).find(g=>g.heroId===v)?.maxHp??0}function Or(){const v=we();return v?c(b).filter(f=>f.controllerId===v):[]}function ji(){const v=Or();return c(W)>=v.length}function Fi(){U.dispatch(Rr())}function Li(v,f){const g=n/2,M=f.x+p+v.x*n+g,H=f.y+m+v.y*n+g;return`left: ${M}px; top: ${H}px;`}function lt(){const v=we();if(v&&c(z)[v])return c(z)[v];const f=c(D).currentHeroIndex%4;return["bottom","right","top","left"][f]}function qi(v){const f=c(z)[v];if(!f)return 0;switch(f){case"bottom":return 0;case"top":return 180;case"left":return 90;case"right":return-90;default:return 0}}function Nr(v){if(c(D).currentPhase!=="hero-phase")return;const f=we();if(!f)return;const g=mt(f);g&&(c(N)?U.dispatch(Ic()):U.dispatch(Es({heroId:f,speed:g.speed})))}function Bi(v){const f=we();f&&U.dispatch(Ec({heroId:f,position:v}))}function Ui(v){(v.key==="Enter"||v.key===" ")&&(v.preventDefault(),Nr())}function Gi(){switch(c(D).currentPhase){case"hero-phase":U.dispatch(Ss());break;case"exploration-phase":U.dispatch(Sc());break;case"villain-phase":U.dispatch(Mc());break}}function Yi(){switch(c(D).currentPhase){case"hero-phase":return"End Hero Phase";case"exploration-phase":return"End Exploration";case"villain-phase":return"End Villain Phase"}}function Wi(){U.dispatch(Pc())}function Vi(v){const f=c(T).tiles.find(g=>g.id===v);return f?un(f,c(ve)):{x:0,y:0}}const Ln="start-tile";function Xi(){const v=we();if(!v)return Ln;const f=c(A).find(M=>M.heroId===v);return f?tn(f.position,c(T))?.id??Ln:Ln}function Ki(){const v=we();if(!v)return[];const f=c(A).find(M=>M.heroId===v);if(!f)return[];const g=Xi();return fc(f.position,c(b),g,c(T))}function qn(v){return en.find(f=>f.id===v)}function $i(v){const f=we();if(!f)return;const g=qn(f);if(!g)return;const M=c(b).find(j=>j.instanceId===v);if(!M)return;const H=uc(M.monsterId);if(H===void 0)return;const F=cc(g.attack,H);U.dispatch(Ac({result:F,targetInstanceId:v}))}function Qi(){U.dispatch(Cc())}function jr(v){return ln.find(g=>g.id===v)?.name||"Monster"}function Zi(){if(c(J))return c(b).find(v=>v.instanceId===c(J))}function Ji(){U.dispatch(Dc({}))}function ea(){U.dispatch(Hc())}function ta(){return c(fe)&&en.find(f=>f.id===c(fe))?.name||"Hero"}function na(){if(!c(xe))return"Monster";const v=c(b).find(f=>f.instanceId===c(xe));return v?jr(v.monsterId):"Monster"}var Fr=hu(),Bn=_(Fr);let Lr;var ra=_(Bn);{var sa=v=>{const f=G(we),g=G(()=>c(f)?mt(c(f)):void 0);var M=_e(),H=pe(M);{var F=j=>{var X=au(),L=_(X),ie=y(L,2),oe=_(ie),Se=_(oe),ke=y(oe,2),Fe=_(ke),Me=y(ke,2),$e=_(Me),Qe=y(Me,2),Ze=_(Qe);ee((gt,wt,yt,bt)=>{O(L,"src",gt),O(L,"alt",c(g).name),P(Se,`${c(g).name??""}'s Turn`),P(Fe,wt),P($e,`Turn ${c(D).turnNumber??""}`),P(Ze,`HP: ${yt??""}/${bt??""}`)},[()=>Re(c(g).imagePath),()=>dn(c(D).currentPhase),()=>fn(c(f)),()=>vn(c(f))]),C(j,X)};Q(H,j=>{c(g)&&c(f)&&j(F)})}C(v,M)};Q(ra,v=>{lt()==="top"&&v(sa)})}var qr=y(Bn,2),Un=_(qr);let Br;var ia=_(Un);{var aa=v=>{const f=G(we),g=G(()=>c(f)?mt(c(f)):void 0);var M=_e(),H=pe(M);{var F=j=>{var X=ou(),L=_(X),ie=y(L,2),oe=_(ie),Se=_(oe),ke=y(oe,2),Fe=_(ke),Me=y(ke,2),$e=_(Me),Qe=y(Me,2),Ze=_(Qe);ee((gt,wt,yt,bt)=>{O(L,"src",gt),O(L,"alt",c(g).name),P(Se,`${c(g).name??""}'s Turn`),P(Fe,wt),P($e,`Turn ${c(D).turnNumber??""}`),P(Ze,`HP: ${yt??""}/${bt??""}`)},[()=>Re(c(g).imagePath),()=>dn(c(D).currentPhase),()=>fn(c(f)),()=>vn(c(f))]),C(j,X)};Q(H,j=>{c(g)&&c(f)&&j(F)})}C(v,M)};Q(ia,v=>{lt()==="left"&&v(aa)})}var Gn=y(Un,2),Mt=_(Gn);Mt.__click=Nr,Mt.__keydown=Ui;var Ur=_(Mt);We(Ur,17,()=>c(T).tiles,v=>v.id,(v,f)=>{const g=G(()=>un(c(f),c(ve))),M=G(()=>zr(c(f)));var H=lu();let F;var j=_(H),X=y(j,2);We(X,17,()=>c(T).unexploredEdges.filter(L=>L.tileId===c(f).id),L=>L.direction,(L,ie)=>{Vc(L,{get direction(){return c(ie).direction},cellSize:n,get tileWidth(){return c(M).width},get tileHeight(){return c(M).height}})}),ee(L=>{F=qe(H,1,"placed-tile svelte-8w11tm",null,F,{"start-tile":c(f).tileType==="start"}),O(H,"data-testid",c(f).tileType==="start"?"start-tile":"dungeon-tile"),O(H,"data-tile-id",c(f).id),ct(H,`left: ${c(g).x??""}px; top: ${c(g).y??""}px; width: ${c(M).width??""}px; height: ${c(M).height??""}px;`),O(j,"src",L),O(j,"alt",c(f).tileType),ct(j,c(f).rotation!==0?`transform: rotate(${c(f).rotation}deg);`:"")},[()=>Re(Ni(c(f)))]),C(v,H)});var Gr=y(Ur,2);{var oa=v=>{const f=G(()=>c(T).tiles.find(F=>F.tileType==="start"));var g=_e(),M=pe(g);{var H=F=>{const j=G(()=>un(c(f),c(ve))),X=G(()=>zr(c(f)));var L=cu(),ie=_(L);Uc(ie,{get validMoveSquares(){return c($)},tileOffsetX:p,tileOffsetY:m,cellSize:n,onSquareClick:Bi}),ee(()=>ct(L,`left: ${c(j).x??""}px; top: ${c(j).y??""}px; width: ${c(X).width??""}px; height: ${c(X).height??""}px;`)),C(F,L)};Q(M,F=>{c(f)&&F(H)})}C(v,g)};Q(Gr,v=>{c(N)&&c($).length>0&&v(oa)})}var Yr=y(Gr,2);We(Yr,17,()=>c(A),v=>v.heroId,(v,f)=>{const g=G(()=>mt(c(f).heroId)),M=G(()=>c(f).heroId===we()),H=G(()=>c(T).tiles.find(ie=>ie.tileType==="start")),F=G(()=>qi(c(f).heroId));var j=_e(),X=pe(j);{var L=ie=>{const oe=G(()=>un(c(H),c(ve)));var Se=uu();let ke;var Fe=_(Se),Me=y(Fe,2),$e=_(Me);ee((Qe,Ze)=>{ke=qe(Se,1,"hero-token svelte-8w11tm",null,ke,{active:c(M)}),O(Se,"data-hero-id",c(f).heroId),ct(Se,`${Qe??""} --token-rotation: ${c(F)??""}deg;`),O(Fe,"src",Ze),O(Fe,"alt",c(g).name),P($e,c(g).name)},[()=>Li(c(f).position,c(oe)),()=>Re(c(g).imagePath)]),C(ie,Se)};Q(X,ie=>{c(g)&&c(H)&&ie(L)})}C(v,j)});var la=y(Yr,2);We(la,17,()=>c(b),v=>v.instanceId,(v,f)=>{{let g=G(()=>Vi(c(f).tileId));Kc(v,{get monster(){return c(f)},cellSize:n,tileOffsetX:p,tileOffsetY:m,get tilePixelOffset(){return c(g)}})}});var ca=y(Mt,2),Wr=_(ca),Vr=y(_(Wr),2),ua=_(Vr),da=y(Vr,2),fa=_(da),Xr=y(Wr,2);Yc(Xr,{get tileCount(){return c(T).tileDeck.length}});var Kr=y(Xr,2);{var va=v=>{var f=du();f.__click=Ji;var g=_(f);ee(M=>P(g,`ð¹ Activate Monster (${c(W)+1}/${M??""})`),[()=>Or().length]),C(v,f)};Q(Kr,v=>{c(D).currentPhase==="villain-phase"&&!ji()&&!c(ne)&&v(va)})}var Yn=y(Kr,2);Yn.__click=Gi;var ha=_(Yn),$r=y(Yn,2);$r.__click=Fi;var pa=y($r,2);{var _a=v=>{const f=G(we),g=G(()=>c(f)?qn(c(f)):void 0),M=G(Ki);var H=_e(),F=pe(H);{var j=X=>{eu(X,{get adjacentMonsters(){return c(M)},get heroAttack(){return c(g).attack},onAttack:$i})};Q(F,X=>{c(g)&&c(M).length>0&&X(j)})}C(v,H)};Q(pa,v=>{c(D).currentPhase==="hero-phase"&&c(re).canAttack&&v(_a)})}qo(Gn,v=>E(ce,v),()=>c(ce));var Qr=y(Gn,2);let Zr;var ma=_(Qr);{var ga=v=>{const f=G(we),g=G(()=>c(f)?mt(c(f)):void 0);var M=_e(),H=pe(M);{var F=j=>{var X=fu(),L=_(X),ie=y(L,2),oe=_(ie),Se=_(oe),ke=y(oe,2),Fe=_(ke),Me=y(ke,2),$e=_(Me),Qe=y(Me,2),Ze=_(Qe);ee((gt,wt,yt,bt)=>{O(L,"src",gt),O(L,"alt",c(g).name),P(Se,`${c(g).name??""}'s Turn`),P(Fe,wt),P($e,`Turn ${c(D).turnNumber??""}`),P(Ze,`HP: ${yt??""}/${bt??""}`)},[()=>Re(c(g).imagePath),()=>dn(c(D).currentPhase),()=>fn(c(f)),()=>vn(c(f))]),C(j,X)};Q(H,j=>{c(g)&&c(f)&&j(F)})}C(v,M)};Q(ma,v=>{lt()==="right"&&v(ga)})}var Wn=y(qr,2);let Jr;var wa=_(Wn);{var ya=v=>{const f=G(we),g=G(()=>c(f)?mt(c(f)):void 0);var M=_e(),H=pe(M);{var F=j=>{var X=vu(),L=_(X),ie=y(L,2),oe=_(ie),Se=_(oe),ke=y(oe,2),Fe=_(ke),Me=y(ke,2),$e=_(Me),Qe=y(Me,2),Ze=_(Qe);ee((gt,wt,yt,bt)=>{O(L,"src",gt),O(L,"alt",c(g).name),P(Se,`${c(g).name??""}'s Turn`),P(Fe,wt),P($e,`Turn ${c(D).turnNumber??""}`),P(Ze,`HP: ${yt??""}/${bt??""}`)},[()=>Re(c(g).imagePath),()=>dn(c(D).currentPhase),()=>fn(c(f)),()=>vn(c(f))]),C(j,X)};Q(H,j=>{c(g)&&c(f)&&j(F)})}C(v,M)};Q(wa,v=>{lt()==="bottom"&&v(ya)})}var es=y(Wn,2);{var ba=v=>{const f=G(()=>c(b).find(F=>F.instanceId===c(I)));var g=_e(),M=pe(g);{var H=F=>{Qc(F,{get monsterId(){return c(f).monsterId},onDismiss:Wi})};Q(M,F=>{c(f)&&F(H)})}C(v,g)};Q(es,v=>{c(I)&&v(ba)})}var ts=y(es,2);{var xa=v=>{const f=G(we),g=G(()=>c(f)?qn(c(f)):void 0),M=G(Zi);var H=_e(),F=pe(H);{var j=X=>{{let L=G(()=>c(M)?jr(c(M).monsterId):"Monster");Ms(X,{get result(){return c(V)},get attackerName(){return c(g).name},get attackName(){return c(g).attack.name},get targetName(){return c(L)},onDismiss:Qi})}};Q(F,X=>{c(g)&&X(j)})}C(v,H)};Q(ts,v=>{c(V)&&v(xa)})}var ka=y(ts,2);{var Ta=v=>{{let f=G(na),g=G(ta);Ms(v,{get result(){return c(ne)},get attackerName(){return c(f)},attackName:"Attack",get targetName(){return c(g)},onDismiss:ea})}};Q(ka,v=>{c(ne)&&v(Ta)})}ee((v,f,g,M,H)=>{Lr=qe(Bn,1,"edge-zone edge-top svelte-8w11tm",null,Lr,v),Br=qe(Un,1,"edge-zone edge-left svelte-8w11tm",null,Br,f),ct(Mt,`transform: scale(${c(St)??""}); width: ${c(ve).width??""}px; height: ${c(ve).height??""}px;`),O(Mt,"aria-label",c(N)?"Click to hide movement options":"Click to show movement options for current hero"),P(ua,c(ae).objective),P(fa,`${c(ae).monstersDefeated??""} / ${c(ae).monstersToDefeat??""} defeated`),P(ha,g),Zr=qe(Qr,1,"edge-zone edge-right svelte-8w11tm",null,Zr,M),Jr=qe(Wn,1,"edge-zone edge-bottom svelte-8w11tm",null,Jr,H)},[()=>({"active-edge":lt()==="top"}),()=>({"active-edge":lt()==="left"}),Yi,()=>({"active-edge":lt()==="right"}),()=>({"active-edge":lt()==="bottom"})]),C(e,Fr),je()}_t(["click","keydown"]);var _u=K('<div class="victory-screen svelte-12ok9q2" data-testid="victory-screen"><div class="victory-content svelte-12ok9q2"><div class="victory-icon svelte-12ok9q2">ð</div> <h1 class="victory-title svelte-12ok9q2">Victory!</h1> <p class="victory-message svelte-12ok9q2"> </p> <div class="victory-objective svelte-12ok9q2"><span class="objective-label svelte-12ok9q2">Objective Complete:</span> <span class="objective-text svelte-12ok9q2"> </span></div> <button class="return-button svelte-12ok9q2" data-testid="return-to-menu-button">Return to Character Select</button></div></div>');function mu(e,t){Ne(t,!0);let n=B(se({monstersDefeated:0,monstersToDefeat:2,objective:"Defeat 2 monsters"}));ut(()=>{const p=U.subscribe(()=>{const k=U.getState();E(n,k.game.scenario,!0)}),m=U.getState();return E(n,m.game.scenario,!0),p});function r(){U.dispatch(Rr())}var s=_u(),i=_(s),a=y(_(i),4),l=_(a),o=y(a,2),u=y(_(o),2),d=_(u),h=y(o,2);h.__click=r,ee(()=>{P(l,`You have defeated ${c(n).monstersDefeated??""} monsters and completed the objective!`),P(d,c(n).objective)}),C(e,s),je()}_t(["click"]);var gu=K('<div class="defeat-screen svelte-1jz2vy1" data-testid="defeat-screen"><div class="defeat-content svelte-1jz2vy1"><div class="defeat-icon svelte-1jz2vy1">ð</div> <h1 class="defeat-title svelte-1jz2vy1">Defeat</h1> <p class="defeat-message svelte-1jz2vy1">Your party has been eliminated before completing the objective.</p> <div class="defeat-progress svelte-1jz2vy1"><span class="progress-label svelte-1jz2vy1">Progress:</span> <span class="progress-text svelte-1jz2vy1"> </span></div> <div class="defeat-objective svelte-1jz2vy1"><span class="objective-label svelte-1jz2vy1">Objective:</span> <span class="objective-text svelte-1jz2vy1"> </span></div> <button class="return-button svelte-1jz2vy1" data-testid="return-to-menu-button">Return to Character Select</button></div></div>');function wu(e,t){Ne(t,!0);let n=B(se({monstersDefeated:0,monstersToDefeat:2,objective:"Defeat 2 monsters"}));ut(()=>{const m=U.subscribe(()=>{const R=U.getState();E(n,R.game.scenario,!0)}),k=U.getState();return E(n,k.game.scenario,!0),m});function r(){U.dispatch(Rr())}var s=gu(),i=_(s),a=y(_(i),6),l=y(_(a),2),o=_(l),u=y(a,2),d=y(_(u),2),h=_(d),p=y(u,2);p.__click=r,ee(()=>{P(o,`${c(n).monstersDefeated??""} / ${c(n).monstersToDefeat??""} monsters defeated`),P(h,c(n).objective)}),C(e,s),je()}_t(["click"]);var yu=K('<main class="svelte-1n46o8q"><!></main>');function bu(e,t){Ne(t,!0);let n=B("character-select");ut(()=>{const l=U.subscribe(()=>{const u=U.getState();E(n,u.game.currentScreen,!0)}),o=U.getState();return E(n,o.game.currentScreen,!0),l});var r=yu(),s=_(r);{var i=l=>{Lc(l,{})},a=l=>{var o=_e(),u=pe(o);{var d=p=>{pu(p,{})},h=p=>{var m=_e(),k=pe(m);{var R=x=>{mu(x,{})},w=x=>{var q=_e(),A=pe(q);{var S=z=>{wu(z,{})};Q(A,z=>{c(n)==="defeat"&&z(S)},!0)}C(x,q)};Q(k,x=>{c(n)==="victory"?x(R):x(w,!1)},!0)}C(p,m)};Q(u,p=>{c(n)==="game-board"?p(d):p(h,!1)},!0)}C(l,o)};Q(s,l=>{c(n)==="character-select"?l(i):l(a,!1)})}C(e,r),je()}Co(bu,{target:document.getElementById("app")});
