(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();const ds="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(ds);const jr=1,qr=2,$r=4,hs=8,vs=16,_s=2,oe=Symbol(),ps="http://www.w3.org/1999/xhtml",In=!1;var Ur=Array.isArray,ms=Array.prototype.indexOf,$n=Array.from,gs=Object.defineProperty,Ot=Object.getOwnPropertyDescriptor,ws=Object.getOwnPropertyDescriptors,ys=Object.prototype,xs=Array.prototype,Vr=Object.getPrototypeOf,wr=Object.isExtensible;function bs(e){for(var t=0;t<e.length;t++)e[t]()}function Kr(){var e,t,n=new Promise((r,i)=>{e=r,t=i});return{promise:n,resolve:e,reject:t}}const se=2,Un=4,Vn=8,Es=1<<24,Je=16,et=32,pt=64,fn=128,Ce=512,le=1024,me=2048,tt=4096,ye=8192,rt=16384,Kn=32768,Et=65536,yr=1<<17,Wr=1<<18,Ct=1<<19,Ss=1<<20,ht=32768,Cn=1<<21,Wn=1<<22,it=1<<23,Qt=Symbol("$state"),Ts=Symbol(""),yt=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function ks(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Ps(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Is(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Cs(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Ms(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function zs(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Ds(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Os(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function As(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}function Rs(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Gr(e){return e===this.v}function Ns(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Yr(e){return!Ns(e,this.v)}let Hs=!1,Te=null;function St(e){Te=e}function lt(e,t=!1,n){Te={p:Te,i:!1,c:null,e:null,s:e,x:null,l:null}}function ct(e){var t=Te,n=t.e;if(n!==null){t.e=null;for(var r of n)ci(r)}return t.i=!0,Te=t.p,{}}function Xr(){return!0}let xt=[];function Fs(){var e=xt;xt=[],bs(e)}function jt(e){if(xt.length===0){var t=xt;queueMicrotask(()=>{t===xt&&Fs()})}xt.push(e)}function Qr(e){var t=q;if(t===null)return R.f|=it,e;if((t.f&Kn)===0){if((t.f&fn)===0)throw e;t.b.error(e)}else Tt(e,t)}function Tt(e,t){for(;t!==null;){if((t.f&fn)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e}const Kt=new Set;let G=null,Se=null,De=[],Gn=null,Mn=!1;class Ne{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#r=0;#n=0;#l=null;#s=[];#i=[];skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(t){De=[],this.apply();var n={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const r of t)this.#a(r,n);this.is_fork||this.#u(),this.is_deferred()?(this.#o(n.effects),this.#o(n.render_effects),this.#o(n.block_effects)):(G=null,xr(n.render_effects),xr(n.effects),this.#l?.resolve()),Se=null}#a(t,n){t.f^=le;for(var r=t.first;r!==null;){var i=r.f,s=(i&(et|pt))!==0,a=s&&(i&le)!==0,l=a||(i&ye)!==0||this.skipped_effects.has(r);if((r.f&fn)!==0&&r.b?.is_pending()&&(n={parent:n,effect:r,effects:[],render_effects:[],block_effects:[]}),!l&&r.fn!==null){s?r.f^=le:(i&Un)!==0?n.effects.push(r):$t(r)&&((r.f&Je)!==0&&n.block_effects.push(r),Ht(r));var o=r.first;if(o!==null){r=o;continue}}var u=r.parent;for(r=r.next;r===null&&u!==null;)u===n.effect&&(this.#o(n.effects),this.#o(n.render_effects),this.#o(n.block_effects),n=n.parent),r=u.next,u=u.parent}}#o(t){for(const n of t)((n.f&me)!==0?this.#s:this.#i).push(n),this.#c(n.deps),ce(n,le)}#c(t){if(t!==null)for(const n of t)(n.f&se)===0||(n.f&ht)===0||(n.f^=ht,this.#c(n.deps))}capture(t,n){this.previous.has(t)||this.previous.set(t,n),(t.f&it)===0&&(this.current.set(t,t.v),Se?.set(t,t.v))}activate(){G=this,this.apply()}deactivate(){G===this&&(G=null,Se=null)}flush(){if(this.activate(),De.length>0){if(Ls(),G!==null&&G!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#t)t(this);this.#t.clear()}#u(){if(this.#n===0){for(const t of this.#e)t();this.#e.clear()}this.#r===0&&this.#f()}#f(){if(Kt.size>1){this.previous.clear();var t=Se,n=!0,r={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const s of Kt){if(s===this){n=!1;continue}const a=[];for(const[o,u]of this.current){if(s.current.has(o))if(n&&u!==s.current.get(o))s.current.set(o,u);else continue;a.push(o)}if(a.length===0)continue;const l=[...s.current.keys()].filter(o=>!this.current.has(o));if(l.length>0){var i=De;De=[];const o=new Set,u=new Map;for(const f of a)Zr(f,l,o,u);if(De.length>0){G=s,s.apply();for(const f of De)s.#a(f,r);s.deactivate()}De=i}}G=null,Se=t}this.committed=!0,Kt.delete(this)}increment(t){this.#r+=1,t&&(this.#n+=1)}decrement(t){this.#r-=1,t&&(this.#n-=1),this.revive()}revive(){for(const t of this.#s)ce(t,me),vt(t);for(const t of this.#i)ce(t,tt),vt(t);this.#s=[],this.#i=[],this.flush()}oncommit(t){this.#e.add(t)}ondiscard(t){this.#t.add(t)}settled(){return(this.#l??=Kr()).promise}static ensure(){if(G===null){const t=G=new Ne;Kt.add(G),Ne.enqueue(()=>{G===t&&t.flush()})}return G}static enqueue(t){jt(t)}apply(){}}function Ls(){var e=at;Mn=!0;var t=null;try{var n=0;for(nn(!0);De.length>0;){var r=Ne.ensure();if(n++>1e3){var i,s;Bs()}r.process(De),st.clear()}}finally{Mn=!1,nn(e),Gn=null}}function Bs(){try{Ms()}catch(e){Tt(e,Gn)}}let We=null;function xr(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if((r.f&(rt|ye))===0&&$t(r)&&(We=new Set,Ht(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?hi(r):r.fn=null),We?.size>0)){st.clear();for(const i of We){if((i.f&(rt|ye))!==0)continue;const s=[i];let a=i.parent;for(;a!==null;)We.has(a)&&(We.delete(a),s.push(a)),a=a.parent;for(let l=s.length-1;l>=0;l--){const o=s[l];(o.f&(rt|ye))===0&&Ht(o)}}We.clear()}}We=null}}function Zr(e,t,n,r){if(!n.has(e)&&(n.add(e),e.reactions!==null))for(const i of e.reactions){const s=i.f;(s&se)!==0?Zr(i,t,n,r):(s&(Wn|Je))!==0&&(s&me)===0&&Jr(i,t,r)&&(ce(i,me),vt(i))}}function Jr(e,t,n){const r=n.get(e);if(r!==void 0)return r;if(e.deps!==null)for(const i of e.deps){if(t.includes(i))return!0;if((i.f&se)!==0&&Jr(i,t,n))return n.set(i,!0),!0}return n.set(e,!1),!1}function vt(e){for(var t=Gn=e;t.parent!==null;){t=t.parent;var n=t.f;if(Mn&&t===q&&(n&Je)!==0&&(n&Wr)===0)return;if((n&(pt|et))!==0){if((n&le)===0)return;t.f^=le}}De.push(t)}function js(e){let t=0,n=_t(0),r;return()=>{Rt()&&(c(n),ui(()=>(t===0&&(r=Si(()=>e(()=>At(n)))),t+=1,()=>{jt(()=>{t-=1,t===0&&(r?.(),r=void 0,At(n))})})))}}var qs=Et|Ct|fn;function $s(e,t,n){new Us(e,t,n)}class Us{parent;#e=!1;#t;#r=null;#n;#l;#s;#i=null;#a=null;#o=null;#c=null;#u=null;#f=0;#d=0;#v=!1;#h=null;#w=js(()=>(this.#h=_t(this.#f),()=>{this.#h=null}));constructor(t,n,r){this.#t=t,this.#n=n,this.#l=r,this.parent=q.b,this.#e=!!this.#n.pending,this.#s=Zn(()=>{q.b=this;{var i=this.#m();try{this.#i=be(()=>r(i))}catch(s){this.error(s)}this.#d>0?this.#p():this.#e=!1}return()=>{this.#u?.remove()}},qs)}#y(){try{this.#i=be(()=>this.#l(this.#t))}catch(t){this.error(t)}this.#e=!1}#x(){const t=this.#n.pending;t&&(this.#a=be(()=>t(this.#t)),Ne.enqueue(()=>{var n=this.#m();this.#i=this.#_(()=>(Ne.ensure(),be(()=>this.#l(n)))),this.#d>0?this.#p():(bt(this.#a,()=>{this.#a=null}),this.#e=!1)}))}#m(){var t=this.#t;return this.#e&&(this.#u=ot(),this.#t.before(this.#u),t=this.#u),t}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#_(t){var n=q,r=R,i=Te;Fe(this.#s),_e(this.#s),St(this.#s.ctx);try{return t()}catch(s){return Qr(s),null}finally{Fe(n),_e(r),St(i)}}#p(){const t=this.#n.pending;this.#i!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#u),pi(this.#i,this.#c)),this.#a===null&&(this.#a=be(()=>t(this.#t)))}#g(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#g(t);return}this.#d+=t,this.#d===0&&(this.#e=!1,this.#a&&bt(this.#a,()=>{this.#a=null}),this.#c&&(this.#t.before(this.#c),this.#c=null))}update_pending_count(t){this.#g(t),this.#f+=t,this.#h&&kt(this.#h,this.#f)}get_effect_pending(){return this.#w(),c(this.#h)}error(t){var n=this.#n.onerror;let r=this.#n.failed;if(this.#v||!n&&!r)throw t;this.#i&&(pe(this.#i),this.#i=null),this.#a&&(pe(this.#a),this.#a=null),this.#o&&(pe(this.#o),this.#o=null);var i=!1,s=!1;const a=()=>{if(i){Rs();return}i=!0,s&&As(),Ne.ensure(),this.#f=0,this.#o!==null&&bt(this.#o,()=>{this.#o=null}),this.#e=this.has_pending_snippet(),this.#i=this.#_(()=>(this.#v=!1,be(()=>this.#l(this.#t)))),this.#d>0?this.#p():this.#e=!1};var l=R;try{_e(null),s=!0,n?.(t,a),s=!1}catch(o){Tt(o,this.#s&&this.#s.parent)}finally{_e(l)}r&&jt(()=>{this.#o=this.#_(()=>{Ne.ensure(),this.#v=!0;try{return be(()=>{r(this.#t,()=>t,()=>a)})}catch(o){return Tt(o,this.#s.parent),null}finally{this.#v=!1}})})}}function Vs(e,t,n){for(var r=[],i=t.length,s=0;s<i;s++)Jn(t[s].e,r,!0);vi(r,()=>{var a=r.length===0&&n!==null;if(a){var l=n,o=l.parentNode;na(o),o.append(l),e.items.clear(),Pe(e,t[0].prev,t[i-1].next)}for(var u=0;u<i;u++){var f=t[u];a||(e.items.delete(f.k),Pe(e,f.prev,f.next)),pe(f.e,!a)}e.first===t[0]&&(e.first=t[0].prev)})}function Ye(e,t,n,r,i,s=null){var a=e,l=new Map,o=null,u=(t&$r)!==0,f=(t&jr)!==0,_=(t&qr)!==0;if(u){var d=e;a=d.appendChild(ot())}var h=null,E=Qs(()=>{var b=n();return Ur(b)?b:b==null?[]:$n(b)}),D,v=!0;function T(){Ks(k,D,a,t,r),h!==null&&(D.length===0?(h.fragment?(a.before(h.fragment),h.fragment=null):er(h.effect),N.first=h.effect):bt(h.effect,()=>{h=null}))}var N=Zn(()=>{D=c(E);for(var b=D.length,H=new Set,$=G,V=null,z=oi(),P=0;P<b;P+=1){var y=D[P],x=r(y,P),U=v?null:l.get(x);U?(f&&kt(U.v,y),_?kt(U.i,P):U.i=P,z&&$.skipped_effects.delete(U.e)):(U=Ws(v?a:null,V,y,x,P,i,t,n),v&&(U.o=!0,V===null?o=U:V.next=U,V=U),l.set(x,U)),H.add(x)}if(b===0&&s&&!h)if(v)h={fragment:null,effect:be(()=>s(a))};else{var K=document.createDocumentFragment(),ee=ot();K.append(ee),h={fragment:K,effect:be(()=>s(ee))}}if(!v)if(z){for(const[te,ke]of l)H.has(te)||$.skipped_effects.add(ke.e);$.oncommit(T),$.ondiscard(()=>{})}else T();c(E)}),k={effect:N,items:l,first:o};v=!1}function Ks(e,t,n,r,i){var s=(r&hs)!==0,a=t.length,l=e.items,o=e.first,u,f=null,_,d=[],h=[],E,D,v,T;if(s)for(T=0;T<a;T+=1)E=t[T],D=i(E,T),v=l.get(D),v.o&&(v.a?.measure(),(_??=new Set).add(v));for(T=0;T<a;T+=1){if(E=t[T],D=i(E,T),v=l.get(D),e.first??=v,!v.o){v.o=!0;var N=f?f.next:o;Pe(e,f,v),Pe(e,v,N),Sn(v,N,n),f=v,d=[],h=[],o=f.next;continue}if((v.e.f&ye)!==0&&(er(v.e),s&&(v.a?.unfix(),(_??=new Set).delete(v))),v!==o){if(u!==void 0&&u.has(v)){if(d.length<h.length){var k=h[0],b;f=k.prev;var H=d[0],$=d[d.length-1];for(b=0;b<d.length;b+=1)Sn(d[b],k,n);for(b=0;b<h.length;b+=1)u.delete(h[b]);Pe(e,H.prev,$.next),Pe(e,f,H),Pe(e,$,k),o=k,f=$,T-=1,d=[],h=[]}else u.delete(v),Sn(v,o,n),Pe(e,v.prev,v.next),Pe(e,v,f===null?e.first:f.next),Pe(e,f,v),f=v;continue}for(d=[],h=[];o!==null&&o.k!==D;)(o.e.f&ye)===0&&(u??=new Set).add(o),h.push(o),o=o.next;if(o===null)continue;v=o}d.push(v),f=v,o=v.next}let V=l.size>a;if(o!==null||u!==void 0){for(var z=u===void 0?[]:$n(u);o!==null;)(o.e.f&ye)===0&&z.push(o),o=o.next;var P=z.length;if(V=l.size-P>a,P>0){var y=(r&$r)!==0&&a===0?n:null;if(s){for(T=0;T<P;T+=1)z[T].a?.measure();for(T=0;T<P;T+=1)z[T].a?.fix()}Vs(e,z,y)}}if(V)for(const x of l.values())x.o||(Pe(e,f,x),f=x);e.effect.last=f&&f.e,s&&jt(()=>{if(_!==void 0)for(v of _)v.a?.apply()})}function Ws(e,t,n,r,i,s,a,l){var o=(a&jr)!==0,u=(a&vs)===0,f=o?u?Js(n,!1,!1):_t(n):n,_=(a&qr)===0?i:_t(i),d={i:_,v:f,k:r,a:null,e:null,o:!1,prev:t,next:null};try{if(e===null){var h=document.createDocumentFragment();h.append(e=ot())}return d.e=be(()=>s(e,f,_,l)),t!==null&&(t.next=d),d}finally{}}function Sn(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,i=t?t.e.nodes_start:n,s=e.e.nodes_start;s!==null&&s!==r;){var a=qt(s);i.before(s),s=a}}function Pe(e,t,n){t===null?(e.first=n,e.effect.first=n&&n.e):(t.e.next&&(t.e.next.prev=null),t.next=n,t.e.next=n&&n.e),n!==null&&(n.e.prev&&(n.e.prev.next=null),n.prev=t,n.e.prev=t&&t.e)}function Gs(e,t,n,r){const i=Yn;if(n.length===0&&e.length===0){r(t.map(i));return}var s=G,a=q,l=Ys();function o(){Promise.all(n.map(u=>Xs(u))).then(u=>{l();try{r([...t.map(i),...u])}catch(f){(a.f&rt)===0&&Tt(f,a)}s?.deactivate(),en()}).catch(u=>{Tt(u,a)})}e.length>0?Promise.all(e).then(()=>{l();try{return o()}finally{s?.deactivate(),en()}}):o()}function Ys(){var e=q,t=R,n=Te,r=G;return function(s=!0){Fe(e),_e(t),St(n),s&&r?.activate()}}function en(){Fe(null),_e(null),St(null)}function Yn(e){var t=se|me,n=R!==null&&(R.f&se)!==0?R:null;return q!==null&&(q.f|=Ct),{ctx:Te,deps:null,effects:null,equals:Gr,f:t,fn:e,reactions:null,rv:0,v:oe,wv:0,parent:n??q,ac:null}}function Xs(e,t){let n=q;n===null&&ks();var r=n.b,i=void 0,s=_t(oe),a=!R,l=new Map;return la(()=>{var o=Kr();i=o.promise;try{Promise.resolve(e()).then(o.resolve,o.reject).then(()=>{u===G&&u.committed&&u.deactivate(),en()})}catch(d){o.reject(d),en()}var u=G;if(a){var f=!r.is_pending();r.update_pending_count(1),u.increment(f),l.get(u)?.reject(yt),l.delete(u),l.set(u,o)}const _=(d,h=void 0)=>{if(u.activate(),h)h!==yt&&(s.f|=it,kt(s,h));else{(s.f&it)!==0&&(s.f^=it),kt(s,d);for(const[E,D]of l){if(l.delete(E),E===u)break;D.reject(yt)}}a&&(r.update_pending_count(-1),u.decrement(f))};o.promise.then(_,d=>_(null,d||"unknown"))}),sa(()=>{for(const o of l.values())o.reject(yt)}),new Promise(o=>{function u(f){function _(){f===i?o(s):u(i)}f.then(_,_)}u(i)})}function W(e){const t=Yn(e);return mi(t),t}function Qs(e){const t=Yn(e);return t.equals=Yr,t}function ei(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)pe(t[n])}}function Zs(e){for(var t=e.parent;t!==null;){if((t.f&se)===0)return(t.f&rt)===0?t:null;t=t.parent}return null}function Xn(e){var t,n=q;Fe(Zs(e));try{e.f&=~ht,ei(e),t=xi(e)}finally{Fe(n)}return t}function ti(e){var t=Xn(e);if(e.equals(t)||(G?.is_fork||(e.v=t),e.wv=wi()),!Mt)if(Se!==null)(Rt()||G?.is_fork)&&Se.set(e,t);else{var n=(e.f&Ce)===0?tt:le;ce(e,n)}}let zn=new Set;const st=new Map;let ni=!1;function _t(e,t){var n={f:0,v:e,reactions:null,equals:Gr,rv:0,wv:0};return n}function Q(e,t){const n=_t(e);return mi(n),n}function Js(e,t=!1,n=!0){const r=_t(e);return t||(r.equals=Yr),r}function A(e,t,n=!1){R!==null&&(!He||(R.f&yr)!==0)&&Xr()&&(R.f&(se|Je|Wn|yr))!==0&&!Xe?.includes(e)&&Os();let r=n?ve(t):t;return kt(e,r)}function kt(e,t){if(!e.equals(t)){var n=e.v;Mt?st.set(e,t):st.set(e,n),e.v=t;var r=Ne.ensure();r.capture(e,n),(e.f&se)!==0&&((e.f&me)!==0&&Xn(e),ce(e,(e.f&Ce)!==0?le:tt)),e.wv=wi(),ri(e,me),q!==null&&(q.f&le)!==0&&(q.f&(et|pt))===0&&(xe===null?fa([e]):xe.push(e)),!r.is_fork&&zn.size>0&&!ni&&ea()}return t}function ea(){ni=!1;var e=at;nn(!0);const t=Array.from(zn);try{for(const n of t)(n.f&le)!==0&&ce(n,tt),$t(n)&&Ht(n)}finally{nn(e)}zn.clear()}function At(e){A(e,e.v+1)}function ri(e,t){var n=e.reactions;if(n!==null)for(var r=n.length,i=0;i<r;i++){var s=n[i],a=s.f,l=(a&me)===0;if(l&&ce(s,t),(a&se)!==0){var o=s;Se?.delete(o),(a&ht)===0&&(a&Ce&&(s.f|=ht),ri(o,tt))}else l&&((a&Je)!==0&&We!==null&&We.add(s),vt(s))}}function ve(e){if(typeof e!="object"||e===null||Qt in e)return e;const t=Vr(e);if(t!==ys&&t!==xs)return e;var n=new Map,r=Ur(e),i=Q(0),s=dt,a=l=>{if(dt===s)return l();var o=R,u=dt;_e(null),Sr(s);var f=l();return _e(o),Sr(u),f};return r&&n.set("length",Q(e.length)),new Proxy(e,{defineProperty(l,o,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&zs();var f=n.get(o);return f===void 0?f=a(()=>{var _=Q(u.value);return n.set(o,_),_}):A(f,u.value,!0),!0},deleteProperty(l,o){var u=n.get(o);if(u===void 0){if(o in l){const f=a(()=>Q(oe));n.set(o,f),At(i)}}else A(u,oe),At(i);return!0},get(l,o,u){if(o===Qt)return e;var f=n.get(o),_=o in l;if(f===void 0&&(!_||Ot(l,o)?.writable)&&(f=a(()=>{var h=ve(_?l[o]:oe),E=Q(h);return E}),n.set(o,f)),f!==void 0){var d=c(f);return d===oe?void 0:d}return Reflect.get(l,o,u)},getOwnPropertyDescriptor(l,o){var u=Reflect.getOwnPropertyDescriptor(l,o);if(u&&"value"in u){var f=n.get(o);f&&(u.value=c(f))}else if(u===void 0){var _=n.get(o),d=_?.v;if(_!==void 0&&d!==oe)return{enumerable:!0,configurable:!0,value:d,writable:!0}}return u},has(l,o){if(o===Qt)return!0;var u=n.get(o),f=u!==void 0&&u.v!==oe||Reflect.has(l,o);if(u!==void 0||q!==null&&(!f||Ot(l,o)?.writable)){u===void 0&&(u=a(()=>{var d=f?ve(l[o]):oe,h=Q(d);return h}),n.set(o,u));var _=c(u);if(_===oe)return!1}return f},set(l,o,u,f){var _=n.get(o),d=o in l;if(r&&o==="length")for(var h=u;h<_.v;h+=1){var E=n.get(h+"");E!==void 0?A(E,oe):h in l&&(E=a(()=>Q(oe)),n.set(h+"",E))}if(_===void 0)(!d||Ot(l,o)?.writable)&&(_=a(()=>Q(void 0)),A(_,ve(u)),n.set(o,_));else{d=_.v!==oe;var D=a(()=>ve(u));A(_,D)}var v=Reflect.getOwnPropertyDescriptor(l,o);if(v?.set&&v.set.call(f,u),!d){if(r&&typeof o=="string"){var T=n.get("length"),N=Number(o);Number.isInteger(N)&&N>=T.v&&A(T,N+1)}At(i)}return!0},ownKeys(l){c(i);var o=Reflect.ownKeys(l).filter(_=>{var d=n.get(_);return d===void 0||d.v!==oe});for(var[u,f]of n)f.v!==oe&&!(u in l)&&o.push(u);return o},setPrototypeOf(){Ds()}})}var br,ii,si,ai;function ta(){if(br===void 0){br=window,ii=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;si=Ot(t,"firstChild").get,ai=Ot(t,"nextSibling").get,wr(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),wr(n)&&(n.__t=void 0)}}function ot(e=""){return document.createTextNode(e)}function Qn(e){return si.call(e)}function qt(e){return ai.call(e)}function p(e,t){return Qn(e)}function Oe(e,t=!1){{var n=Qn(e);return n instanceof Comment&&n.data===""?qt(n):n}}function S(e,t=1,n=!1){let r=e;for(;t--;)r=qt(r);return r}function na(e){e.textContent=""}function oi(){return!1}function li(e){var t=R,n=q;_e(null),Fe(null);try{return e()}finally{_e(t),Fe(n)}}function ra(e){q===null&&(R===null&&Cs(),Is()),Mt&&Ps()}function ia(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function nt(e,t,n){var r=q;r!==null&&(r.f&ye)!==0&&(e|=ye);var i={ctx:Te,deps:null,nodes_start:null,nodes_end:null,f:e|me|Ce,first:null,fn:t,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{Ht(i),i.f|=Kn}catch(l){throw pe(i),l}else t!==null&&vt(i);var s=i;if(n&&s.deps===null&&s.teardown===null&&s.nodes_start===null&&s.first===s.last&&(s.f&Ct)===0&&(s=s.first,(e&Je)!==0&&(e&Et)!==0&&s!==null&&(s.f|=Et)),s!==null&&(s.parent=r,r!==null&&ia(s,r),R!==null&&(R.f&se)!==0&&(e&pt)===0)){var a=R;(a.effects??=[]).push(s)}return i}function Rt(){return R!==null&&!He}function sa(e){const t=nt(Vn,null,!1);return ce(t,le),t.teardown=e,t}function tn(e){ra();var t=q.f,n=!R&&(t&et)!==0&&(t&Kn)===0;if(n){var r=Te;(r.e??=[]).push(e)}else return ci(e)}function ci(e){return nt(Un|Ss,e,!1)}function aa(e){Ne.ensure();const t=nt(pt|Ct,e,!0);return(n={})=>new Promise(r=>{n.outro?bt(t,()=>{pe(t),r(void 0)}):(pe(t),r(void 0))})}function oa(e){return nt(Un,e,!1)}function la(e){return nt(Wn|Ct,e,!0)}function ui(e,t=0){return nt(Vn|t,e,!0)}function ne(e,t=[],n=[],r=[]){Gs(r,t,n,i=>{nt(Vn,()=>e(...i.map(c)),!0)})}function Zn(e,t=0){var n=nt(Je|t,e,!0);return n}function be(e){return nt(et|Ct,e,!0)}function fi(e){var t=e.teardown;if(t!==null){const n=Mt,r=R;Er(!0),_e(null);try{t.call(null)}finally{Er(n),_e(r)}}}function di(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const i=n.ac;i!==null&&li(()=>{i.abort(yt)});var r=n.next;(n.f&pt)!==0?n.parent=null:pe(n,t),n=r}}function ca(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&et)===0&&pe(t),t=n}}function pe(e,t=!0){var n=!1;(t||(e.f&Wr)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(ua(e.nodes_start,e.nodes_end),n=!0),di(e,t&&!n),rn(e,0),ce(e,rt);var r=e.transitions;if(r!==null)for(const s of r)s.stop();fi(e);var i=e.parent;i!==null&&i.first!==null&&hi(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function ua(e,t){for(;e!==null;){var n=e===t?null:qt(e);e.remove(),e=n}}function hi(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function bt(e,t,n=!0){var r=[];Jn(e,r,!0),vi(r,()=>{n&&pe(e),t&&t()})}function vi(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var i of e)i.out(r)}else t()}function Jn(e,t,n){if((e.f&ye)===0){if(e.f^=ye,e.transitions!==null)for(const a of e.transitions)(a.is_global||n)&&t.push(a);for(var r=e.first;r!==null;){var i=r.next,s=(r.f&Et)!==0||(r.f&et)!==0&&(e.f&Je)!==0;Jn(r,t,s?n:!1),r=i}}}function er(e){_i(e,!0)}function _i(e,t){if((e.f&ye)!==0){e.f^=ye,(e.f&le)===0&&(ce(e,me),vt(e));for(var n=e.first;n!==null;){var r=n.next,i=(n.f&Et)!==0||(n.f&et)!==0;_i(n,i?t:!1),n=r}if(e.transitions!==null)for(const s of e.transitions)(s.is_global||t)&&s.in()}}function pi(e,t){for(var n=e.nodes_start,r=e.nodes_end;n!==null;){var i=n===r?null:qt(n);t.append(n),n=i}}let at=!1;function nn(e){at=e}let Mt=!1;function Er(e){Mt=e}let R=null,He=!1;function _e(e){R=e}let q=null;function Fe(e){q=e}let Xe=null;function mi(e){R!==null&&(Xe===null?Xe=[e]:Xe.push(e))}let de=null,ge=0,xe=null;function fa(e){xe=e}let gi=1,Nt=0,dt=Nt;function Sr(e){dt=e}function wi(){return++gi}function $t(e){var t=e.f;if((t&me)!==0)return!0;if(t&se&&(e.f&=~ht),(t&tt)!==0){var n=e.deps;if(n!==null)for(var r=n.length,i=0;i<r;i++){var s=n[i];if($t(s)&&ti(s),s.wv>e.wv)return!0}(t&Ce)!==0&&Se===null&&ce(e,le)}return!1}function yi(e,t,n=!0){var r=e.reactions;if(r!==null&&!Xe?.includes(e))for(var i=0;i<r.length;i++){var s=r[i];(s.f&se)!==0?yi(s,t,!1):t===s&&(n?ce(s,me):(s.f&le)!==0&&ce(s,tt),vt(s))}}function xi(e){var t=de,n=ge,r=xe,i=R,s=Xe,a=Te,l=He,o=dt,u=e.f;de=null,ge=0,xe=null,R=(u&(et|pt))===0?e:null,Xe=null,St(e.ctx),He=!1,dt=++Nt,e.ac!==null&&(li(()=>{e.ac.abort(yt)}),e.ac=null);try{e.f|=Cn;var f=e.fn,_=f(),d=e.deps;if(de!==null){var h;if(rn(e,ge),d!==null&&ge>0)for(d.length=ge+de.length,h=0;h<de.length;h++)d[ge+h]=de[h];else e.deps=d=de;if(at&&Rt()&&(e.f&Ce)!==0)for(h=ge;h<d.length;h++)(d[h].reactions??=[]).push(e)}else d!==null&&ge<d.length&&(rn(e,ge),d.length=ge);if(Xr()&&xe!==null&&!He&&d!==null&&(e.f&(se|tt|me))===0)for(h=0;h<xe.length;h++)yi(xe[h],e);return i!==null&&i!==e&&(Nt++,xe!==null&&(r===null?r=xe:r.push(...xe))),(e.f&it)!==0&&(e.f^=it),_}catch(E){return Qr(E)}finally{e.f^=Cn,de=t,ge=n,xe=r,R=i,Xe=s,St(a),He=l,dt=o}}function da(e,t){let n=t.reactions;if(n!==null){var r=ms.call(n,e);if(r!==-1){var i=n.length-1;i===0?n=t.reactions=null:(n[r]=n[i],n.pop())}}n===null&&(t.f&se)!==0&&(de===null||!de.includes(t))&&(ce(t,tt),(t.f&Ce)!==0&&(t.f^=Ce,t.f&=~ht),ei(t),rn(t,0))}function rn(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)da(e,n[r])}function Ht(e){var t=e.f;if((t&rt)===0){ce(e,le);var n=q,r=at;q=e,at=!0;try{(t&(Je|Es))!==0?ca(e):di(e),fi(e);var i=xi(e);e.teardown=typeof i=="function"?i:null,e.wv=gi;var s;In&&Hs&&(e.f&me)!==0&&e.deps}finally{at=r,q=n}}}function c(e){var t=e.f,n=(t&se)!==0;if(R!==null&&!He){var r=q!==null&&(q.f&rt)!==0;if(!r&&!Xe?.includes(e)){var i=R.deps;if((R.f&Cn)!==0)e.rv<Nt&&(e.rv=Nt,de===null&&i!==null&&i[ge]===e?ge++:de===null?de=[e]:de.includes(e)||de.push(e));else{(R.deps??=[]).push(e);var s=e.reactions;s===null?e.reactions=[R]:s.includes(R)||s.push(R)}}}if(Mt){if(st.has(e))return st.get(e);if(n){var a=e,l=a.v;return((a.f&le)===0&&a.reactions!==null||Ei(a))&&(l=Xn(a)),st.set(a,l),l}}else n&&(!Se?.has(e)||G?.is_fork&&!Rt())&&(a=e,$t(a)&&ti(a),at&&Rt()&&(a.f&Ce)===0&&bi(a));if(Se?.has(e))return Se.get(e);if((e.f&it)!==0)throw e.v;return e.v}function bi(e){if(e.deps!==null){e.f^=Ce;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&se)!==0&&(t.f&Ce)===0&&bi(t)}}function Ei(e){if(e.v===oe)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(st.has(t)||(t.f&se)!==0&&Ei(t))return!0;return!1}function Si(e){var t=He;try{return He=!0,e()}finally{He=t}}const ha=-7169;function ce(e,t){e.f=e.f&ha|t}const Ti=new Set,Dn=new Set;function dn(e){for(var t=0;t<e.length;t++)Ti.add(e[t]);for(var n of Dn)n(e)}let Tr=null;function Wt(e){var t=this,n=t.ownerDocument,r=e.type,i=e.composedPath?.()||[],s=i[0]||e.target;Tr=e;var a=0,l=Tr===e&&e.__root;if(l){var o=i.indexOf(l);if(o!==-1&&(t===document||t===window)){e.__root=t;return}var u=i.indexOf(t);if(u===-1)return;o<=u&&(a=o)}if(s=i[a]||e.target,s!==t){gs(e,"currentTarget",{configurable:!0,get(){return s||n}});var f=R,_=q;_e(null),Fe(null);try{for(var d,h=[];s!==null;){var E=s.assignedSlot||s.parentNode||s.host||null;try{var D=s["__"+r];D!=null&&(!s.disabled||e.target===s)&&D.call(s,e)}catch(v){d?h.push(v):d=v}if(e.cancelBubble||E===t||E===null)break;s=E}if(d){for(let v of h)queueMicrotask(()=>{throw v});throw d}}finally{e.__root=t,delete e.currentTarget,_e(f),Fe(_)}}}function va(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function ki(e,t){var n=q;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function J(e,t){var n=(t&_s)!==0,r,i=!e.startsWith("<!>");return()=>{r===void 0&&(r=va(i?e:"<!>"+e),r=Qn(r));var s=n||ii?document.importNode(r,!0):r.cloneNode(!0);return ki(s,s),s}}function Ae(){var e=document.createDocumentFragment(),t=document.createComment(""),n=ot();return e.append(t,n),ki(t,n),e}function F(e,t){e!==null&&e.before(t)}const _a=["touchstart","touchmove"];function pa(e){return _a.includes(e)}function L(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function ma(e,t){return ga(e,t)}const gt=new Map;function ga(e,{target:t,anchor:n,props:r={},events:i,context:s,intro:a=!0}){ta();var l=new Set,o=_=>{for(var d=0;d<_.length;d++){var h=_[d];if(!l.has(h)){l.add(h);var E=pa(h);t.addEventListener(h,Wt,{passive:E});var D=gt.get(h);D===void 0?(document.addEventListener(h,Wt,{passive:E}),gt.set(h,1)):gt.set(h,D+1)}}};o($n(Ti)),Dn.add(o);var u=void 0,f=aa(()=>{var _=n??t.appendChild(ot());return $s(_,{pending:()=>{}},d=>{if(s){lt({});var h=Te;h.c=s}i&&(r.$$events=i),u=e(d,r)||{},s&&ct()}),()=>{for(var d of l){t.removeEventListener(d,Wt);var h=gt.get(d);--h===0?(document.removeEventListener(d,Wt),gt.delete(d)):gt.set(d,h)}Dn.delete(o),_!==n&&_.parentNode?.removeChild(_)}});return wa.set(u,f),u}let wa=new WeakMap;class ya{anchor;#e=new Map;#t=new Map;#r=new Map;#n=new Set;#l=!0;constructor(t,n=!0){this.anchor=t,this.#l=n}#s=()=>{var t=G;if(this.#e.has(t)){var n=this.#e.get(t),r=this.#t.get(n);if(r)er(r),this.#n.delete(n);else{var i=this.#r.get(n);i&&(this.#t.set(n,i.effect),this.#r.delete(n),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),r=i.effect)}for(const[s,a]of this.#e){if(this.#e.delete(s),s===t)break;const l=this.#r.get(a);l&&(pe(l.effect),this.#r.delete(a))}for(const[s,a]of this.#t){if(s===n||this.#n.has(s))continue;const l=()=>{if(Array.from(this.#e.values()).includes(s)){var u=document.createDocumentFragment();pi(a,u),u.append(ot()),this.#r.set(s,{effect:a,fragment:u})}else pe(a);this.#n.delete(s),this.#t.delete(s)};this.#l||!r?(this.#n.add(s),bt(a,l,!1)):l()}}};#i=t=>{this.#e.delete(t);const n=Array.from(this.#e.values());for(const[r,i]of this.#r)n.includes(r)||(pe(i.effect),this.#r.delete(r))};ensure(t,n){var r=G,i=oi();if(n&&!this.#t.has(t)&&!this.#r.has(t))if(i){var s=document.createDocumentFragment(),a=ot();s.append(a),this.#r.set(t,{effect:be(()=>n(a)),fragment:s})}else this.#t.set(t,be(()=>n(this.anchor)));if(this.#e.set(r,t),i){for(const[l,o]of this.#t)l===t?r.skipped_effects.delete(o):r.skipped_effects.add(o);for(const[l,o]of this.#r)l===t?r.skipped_effects.delete(o.effect):r.skipped_effects.add(o.effect);r.oncommit(this.#s),r.ondiscard(this.#i)}else this.#s()}}function re(e,t,n=!1){var r=new ya(e),i=n?Et:0;function s(a,l){r.ensure(a,l)}Zn(()=>{var a=!1;t((l,o=!0)=>{a=!0,s(o,l)}),a||s(!1,null)},i)}const kr=[...` 	
\r\fÂ \v\uFEFF`];function xa(e,t,n){var r=e==null?"":""+e;if(n){for(var i in n)if(n[i])r=r?r+" "+i:i;else if(r.length)for(var s=i.length,a=0;(a=r.indexOf(i,a))>=0;){var l=a+s;(a===0||kr.includes(r[a-1]))&&(l===r.length||kr.includes(r[l]))?r=(a===0?"":r.substring(0,a))+r.substring(l+1):a=l}}return r===""?null:r}function ba(e,t){return e==null?null:String(e)}function Re(e,t,n,r,i,s){var a=e.__className;if(a!==n||a===void 0){var l=xa(n,r,s);l==null?e.removeAttribute("class"):e.className=l,e.__className=n}else if(s&&i!==s)for(var o in s){var u=!!s[o];(i==null||u!==!!i[o])&&e.classList.toggle(o,u)}return s}function ft(e,t,n,r){var i=e.__style;if(i!==t){var s=ba(t);s==null?e.removeAttribute("style"):e.style.cssText=s,e.__style=t}return r}const Ea=Symbol("is custom element"),Sa=Symbol("is html");function M(e,t,n,r){var i=Ta(e);i[t]!==(i[t]=n)&&(t==="loading"&&(e[Ts]=n),n==null?e.removeAttribute(t):typeof n!="string"&&ka(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function Ta(e){return e.__attributes??={[Ea]:e.nodeName.includes("-"),[Sa]:e.namespaceURI===ps}}var Pr=new Map;function ka(e){var t=e.getAttribute("is")||e.nodeName,n=Pr.get(t);if(n)return n;Pr.set(t,n=[]);for(var r,i=e,s=Element.prototype;s!==i;){r=ws(i);for(var a in r)r[a].set&&n.push(a);i=Vr(i)}return n}function Ir(e,t){return e===t||e?.[Qt]===t}function Pa(e={},t,n,r){return oa(()=>{var i,s;return ui(()=>{i=s,s=[],Si(()=>{e!==n(...s)&&(t(e,...s),i&&Ir(n(...i),e)&&t(null,...i))})}),()=>{jt(()=>{s&&Ir(n(...s),e)&&t(null,...s)})}}),e}function ie(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Ia=typeof Symbol=="function"&&Symbol.observable||"@@observable",Cr=Ia,Tn=()=>Math.random().toString(36).substring(7).split("").join("."),Ca={INIT:`@@redux/INIT${Tn()}`,REPLACE:`@@redux/REPLACE${Tn()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Tn()}`},sn=Ca;function tr(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Pi(e,t,n){if(typeof e!="function")throw new Error(ie(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(ie(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(ie(1));return n(Pi)(e,t)}let r=e,i=t,s=new Map,a=s,l=0,o=!1;function u(){a===s&&(a=new Map,s.forEach((v,T)=>{a.set(T,v)}))}function f(){if(o)throw new Error(ie(3));return i}function _(v){if(typeof v!="function")throw new Error(ie(4));if(o)throw new Error(ie(5));let T=!0;u();const N=l++;return a.set(N,v),function(){if(T){if(o)throw new Error(ie(6));T=!1,u(),a.delete(N),s=null}}}function d(v){if(!tr(v))throw new Error(ie(7));if(typeof v.type>"u")throw new Error(ie(8));if(typeof v.type!="string")throw new Error(ie(17));if(o)throw new Error(ie(9));try{o=!0,i=r(i,v)}finally{o=!1}return(s=a).forEach(N=>{N()}),v}function h(v){if(typeof v!="function")throw new Error(ie(10));r=v,d({type:sn.REPLACE})}function E(){const v=_;return{subscribe(T){if(typeof T!="object"||T===null)throw new Error(ie(11));function N(){const b=T;b.next&&b.next(f())}return N(),{unsubscribe:v(N)}},[Cr](){return this}}}return d({type:sn.INIT}),{dispatch:d,subscribe:_,getState:f,replaceReducer:h,[Cr]:E}}function Ma(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:sn.INIT})>"u")throw new Error(ie(12));if(typeof n(void 0,{type:sn.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ie(13))})}function za(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const a=t[s];typeof e[a]=="function"&&(n[a]=e[a])}const r=Object.keys(n);let i;try{Ma(n)}catch(s){i=s}return function(a={},l){if(i)throw i;let o=!1;const u={};for(let f=0;f<r.length;f++){const _=r[f],d=n[_],h=a[_],E=d(h,l);if(typeof E>"u")throw l&&l.type,new Error(ie(14));u[_]=E,o=o||E!==h}return o=o||r.length!==Object.keys(a).length,o?u:a}}function an(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function Da(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(ie(15))};const a={getState:i.getState,dispatch:(o,...u)=>s(o,...u)},l=e.map(o=>o(a));return s=an(...l)(i.dispatch),{...i,dispatch:s}}}function Oa(e){return tr(e)&&"type"in e&&typeof e.type=="string"}var Ii=Symbol.for("immer-nothing"),Mr=Symbol.for("immer-draftable"),he=Symbol.for("immer-state");function Ie(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var we=Object,Pt=we.getPrototypeOf,on="constructor",hn="prototype",On="configurable",ln="enumerable",Zt="writable",Ft="value",Ze=e=>!!e&&!!e[he];function Le(e){return e?Ci(e)||vn(e)||!!e[Mr]||!!e[on]?.[Mr]||_n(e)||pn(e):!1}var Aa=we[hn][on].toString(),zr=new WeakMap;function Ci(e){if(!e||!nr(e))return!1;const t=Pt(e);if(t===null||t===we[hn])return!0;const n=we.hasOwnProperty.call(t,on)&&t[on];if(n===Object)return!0;if(!wt(n))return!1;let r=zr.get(n);return r===void 0&&(r=Function.toString.call(n),zr.set(n,r)),r===Aa}function Ut(e,t,n=!0){Vt(e)===0?(n?Reflect.ownKeys(e):we.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((r,i)=>t(i,r,e))}function Vt(e){const t=e[he];return t?t.type_:vn(e)?1:_n(e)?2:pn(e)?3:0}var Dr=(e,t,n=Vt(e))=>n===2?e.has(t):we[hn].hasOwnProperty.call(e,t),An=(e,t,n=Vt(e))=>n===2?e.get(t):e[t],cn=(e,t,n,r=Vt(e))=>{r===2?e.set(t,n):r===3?e.add(n):e[t]=n};function Ra(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var vn=Array.isArray,_n=e=>e instanceof Map,pn=e=>e instanceof Set,nr=e=>typeof e=="object",wt=e=>typeof e=="function",kn=e=>typeof e=="boolean",Ge=e=>e.copy_||e.base_,rr=e=>e.modified_?e.copy_:e.base_;function Rn(e,t){if(_n(e))return new Map(e);if(pn(e))return new Set(e);if(vn(e))return Array[hn].slice.call(e);const n=Ci(e);if(t===!0||t==="class_only"&&!n){const r=we.getOwnPropertyDescriptors(e);delete r[he];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const a=i[s],l=r[a];l[Zt]===!1&&(l[Zt]=!0,l[On]=!0),(l.get||l.set)&&(r[a]={[On]:!0,[Zt]:!0,[ln]:l[ln],[Ft]:e[a]})}return we.create(Pt(e),r)}else{const r=Pt(e);if(r!==null&&n)return{...e};const i=we.create(r);return we.assign(i,e)}}function ir(e,t=!1){return mn(e)||Ze(e)||(Vt(e)>1&&we.defineProperties(e,{set:Gt,add:Gt,clear:Gt,delete:Gt}),we.freeze(e),t&&Ut(e,(n,r)=>{ir(r,!0)},!1)),e}function Na(){Ie(2)}var Gt={[Ft]:Na};function mn(e){return e===null||!nr(e)?!0:we.isFrozen(e)}var un="MapSet",Nn="Patches",Mi={};function It(e){const t=Mi[e];return t||Ie(0,e),t}var Ha=e=>!!Mi[e],Lt,zi=()=>Lt,Fa=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:Ha(un)?It(un):void 0});function Or(e,t){t&&(e.patchPlugin_=It(Nn),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Hn(e){Fn(e),e.drafts_.forEach(La),e.drafts_=null}function Fn(e){e===Lt&&(Lt=e.parent_)}var Ar=e=>Lt=Fa(Lt,e);function La(e){const t=e[he];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Rr(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];if(e!==void 0&&e!==n){n[he].modified_&&(Hn(t),Ie(4)),Le(e)&&(e=Nr(t,e));const{patchPlugin_:i}=t;i&&i.generateReplacementPatches_(n[he].base_,e,t)}else e=Nr(t,n);return Ba(t,e,!0),Hn(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Ii?e:void 0}function Nr(e,t){if(mn(t))return t;const n=t[he];if(!n)return sr(t,e.handledSet_,e);if(!gn(n,e))return t;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(e);Ai(n,e)}return n.copy_}function Ba(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&ir(t,n)}function Di(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var gn=(e,t)=>e.scope_===t,ja=[];function Oi(e,t,n,r){const i=Ge(e),s=e.type_;if(r!==void 0&&An(i,r,s)===t){cn(i,r,n,s);return}if(!e.draftLocations_){const l=e.draftLocations_=new Map;Ut(i,(o,u)=>{if(Ze(u)){const f=l.get(u)||[];f.push(o),l.set(u,f)}})}const a=e.draftLocations_.get(t)??ja;for(const l of a)cn(i,l,n,s)}function qa(e,t,n){e.callbacks_.push(function(i){const s=t;if(!s||!gn(s,i))return;i.mapSetPlugin_?.fixSetContents(s);const a=rr(s);Oi(e,s.draft_??s,a,n),Ai(s,i)})}function Ai(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||(e.assigned_?.size??0)>0)){const{patchPlugin_:r}=t;if(r){const i=r.getPath(e);i&&r.generatePatches_(e,i,t)}Di(e)}}function $a(e,t,n){const{scope_:r}=e;if(Ze(n)){const i=n[he];gn(i,r)&&i.callbacks_.push(function(){Jt(e);const a=rr(i);Oi(e,n,a,t)})}else Le(n)&&e.callbacks_.push(function(){const s=Ge(e);An(s,t,e.type_)===n&&r.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&sr(An(e.copy_,t,e.type_),r.handledSet_,r)})}function sr(e,t,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||Ze(e)||t.has(e)||!Le(e)||mn(e)||(t.add(e),Ut(e,(r,i)=>{if(Ze(i)){const s=i[he];if(gn(s,n)){const a=rr(s);cn(e,r,a,e.type_),Di(s)}}else Le(i)&&sr(i,t,n)})),e}function Ua(e,t){const n=vn(e),r={type_:n?1:0,scope_:t?t.scope_:zi(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=r,s=ar;n&&(i=[r],s=Bt);const{revoke:a,proxy:l}=Proxy.revocable(i,s);return r.draft_=l,r.revoke_=a,[l,r]}var ar={get(e,t){if(t===he)return e;const n=Ge(e);if(!Dr(n,t,e.type_))return Va(e,n,t);const r=n[t];if(e.finalized_||!Le(r))return r;if(r===Pn(e.base_,t)){Jt(e);const i=e.type_===1?+t:t,s=Bn(e.scope_,r,e,i);return e.copy_[i]=s}return r},has(e,t){return t in Ge(e)},ownKeys(e){return Reflect.ownKeys(Ge(e))},set(e,t,n){const r=Ri(Ge(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=Pn(Ge(e),t),s=i?.[he];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_.set(t,!1),!0;if(Ra(n,i)&&(n!==void 0||Dr(e.base_,t,e.type_)))return!0;Jt(e),Ln(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_.set(t,!0),$a(e,t,n)),!0},deleteProperty(e,t){return Jt(e),Pn(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),Ln(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Ge(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{[Zt]:!0,[On]:e.type_!==1||t!=="length",[ln]:r[ln],[Ft]:n[t]}},defineProperty(){Ie(11)},getPrototypeOf(e){return Pt(e.base_)},setPrototypeOf(){Ie(12)}},Bt={};Ut(ar,(e,t)=>{Bt[e]=function(){const n=arguments;return n[0]=n[0][0],t.apply(this,n)}});Bt.deleteProperty=function(e,t){return Bt.set.call(this,e,t,void 0)};Bt.set=function(e,t,n){return ar.set.call(this,e[0],t,n,e[0])};function Pn(e,t){const n=e[he];return(n?Ge(n):e)[t]}function Va(e,t,n){const r=Ri(t,n);return r?Ft in r?r[Ft]:r.get?.call(e.draft_):void 0}function Ri(e,t){if(!(t in e))return;let n=Pt(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Pt(n)}}function Ln(e){e.modified_||(e.modified_=!0,e.parent_&&Ln(e.parent_))}function Jt(e){e.copy_||(e.assigned_=new Map,e.copy_=Rn(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Ka=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(t,n,r)=>{if(wt(t)&&!wt(n)){const s=n;n=t;const a=this;return function(o=s,...u){return a.produce(o,f=>n.call(this,f,...u))}}wt(n)||Ie(6),r!==void 0&&!wt(r)&&Ie(7);let i;if(Le(t)){const s=Ar(this),a=Bn(s,t,void 0);let l=!0;try{i=n(a),l=!1}finally{l?Hn(s):Fn(s)}return Or(s,r),Rr(i,s)}else if(!t||!nr(t)){if(i=n(t),i===void 0&&(i=t),i===Ii&&(i=void 0),this.autoFreeze_&&ir(i,!0),r){const s=[],a=[];It(Nn).generateReplacementPatches_(t,i,{patches_:s,inversePatches_:a}),r(s,a)}return i}else Ie(1,t)},this.produceWithPatches=(t,n)=>{if(wt(t))return(a,...l)=>this.produceWithPatches(a,o=>t(o,...l));let r,i;return[this.produce(t,n,(a,l)=>{r=a,i=l}),r,i]},kn(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),kn(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),kn(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Le(e)||Ie(8),Ze(e)&&(e=Wa(e));const t=Ar(this),n=Bn(t,e,void 0);return n[he].isManual_=!0,Fn(t),n}finishDraft(e,t){const n=e&&e[he];(!n||!n.isManual_)&&Ie(9);const{scope_:r}=n;return Or(r,t),Rr(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=It(Nn).applyPatches_;return Ze(e)?r(e,t):this.produce(e,i=>r(i,t))}};function Bn(e,t,n,r){const[i,s]=_n(t)?It(un).proxyMap_(t,n):pn(t)?It(un).proxySet_(t,n):Ua(t,n);return(n?.scope_??zi()).drafts_.push(i),s.callbacks_=n?.callbacks_??[],s.key_=r,n&&r!==void 0?qa(n,s,r):s.callbacks_.push(function(o){o.mapSetPlugin_?.fixSetContents(s);const{patchPlugin_:u}=o;s.modified_&&u&&u.generatePatches_(s,[],o)}),i}function Wa(e){return Ze(e)||Ie(10,e),Ni(e)}function Ni(e){if(!Le(e)||mn(e))return e;const t=e[he];let n,r=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Rn(e,t.scope_.immer_.useStrictShallowCopy_),r=t.scope_.immer_.shouldUseStrictIteration()}else n=Rn(e,!0);return Ut(n,(i,s)=>{cn(n,i,Ni(s))},r),t&&(t.finalized_=!1),n}var Ga=new Ka,Hi=Ga.produce;function Fi(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var Ya=Fi(),Xa=Fi,Qa=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?an:an.apply(null,arguments)};function Hr(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(Qe(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>Oa(r)&&r.type===e,n}var Li=class zt extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,zt.prototype)}static get[Symbol.species](){return zt}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new zt(...t[0].concat(this)):new zt(...t.concat(this))}};function Fr(e){return Le(e)?Hi(e,()=>{}):e}function Yt(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function Za(e){return typeof e=="boolean"}var Ja=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let a=new Li;return n&&(Za(n)?a.push(Ya):a.push(Xa(n.extraArgument))),a},eo="RTK_autoBatch",Lr=e=>t=>{setTimeout(t,e)},to=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,a=!1;const l=new Set,o=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Lr(10):e.type==="callback"?e.queueNotification:Lr(e.timeout),u=()=>{a=!1,s&&(s=!1,l.forEach(f=>f()))};return Object.assign({},r,{subscribe(f){const _=()=>i&&f(),d=r.subscribe(_);return l.add(f),()=>{d(),l.delete(f)}},dispatch(f){try{return i=!f?.meta?.[eo],s=!i,s&&(a||(a=!0,o(u))),r.dispatch(f)}finally{i=!0}}})},no=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new Li(e);return r&&i.push(to(typeof r=="object"?r:void 0)),i};function ro(e){const t=Ja(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:a=void 0}=e||{};let l;if(typeof n=="function")l=n;else if(tr(n))l=za(n);else throw new Error(Qe(1));let o;typeof r=="function"?o=r(t):o=t();let u=an;i&&(u=Qa({trace:!1,...typeof i=="object"&&i}));const f=Da(...o),_=no(f);let d=typeof a=="function"?a(_):_();const h=u(...d);return Pi(l,s,h)}function Bi(e){const t={},n=[];let r;const i={addCase(s,a){const l=typeof s=="string"?s:s.type;if(!l)throw new Error(Qe(28));if(l in t)throw new Error(Qe(29));return t[l]=a,i},addAsyncThunk(s,a){return a.pending&&(t[s.pending.type]=a.pending),a.rejected&&(t[s.rejected.type]=a.rejected),a.fulfilled&&(t[s.fulfilled.type]=a.fulfilled),a.settled&&n.push({matcher:s.settled,reducer:a.settled}),i},addMatcher(s,a){return n.push({matcher:s,reducer:a}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function io(e){return typeof e=="function"}function so(e,t){let[n,r,i]=Bi(t),s;if(io(e))s=()=>Fr(e());else{const l=Fr(e);s=()=>l}function a(l=s(),o){let u=[n[o.type],...r.filter(({matcher:f})=>f(o)).map(({reducer:f})=>f)];return u.filter(f=>!!f).length===0&&(u=[i]),u.reduce((f,_)=>{if(_)if(Ze(f)){const h=_(f,o);return h===void 0?f:h}else{if(Le(f))return Hi(f,d=>_(d,o));{const d=_(f,o);if(d===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return d}}return f},l)}return a.getInitialState=s,a}var ao=Symbol.for("rtk-slice-createasyncthunk");function oo(e,t){return`${e}/${t}`}function lo({creators:e}={}){const t=e?.asyncThunk?.[ao];return function(r){const{name:i,reducerPath:s=i}=r;if(!i)throw new Error(Qe(11));const a=(typeof r.reducers=="function"?r.reducers(uo()):r.reducers)||{},l=Object.keys(a),o={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(k,b){const H=typeof k=="string"?k:k.type;if(!H)throw new Error(Qe(12));if(H in o.sliceCaseReducersByType)throw new Error(Qe(13));return o.sliceCaseReducersByType[H]=b,u},addMatcher(k,b){return o.sliceMatchers.push({matcher:k,reducer:b}),u},exposeAction(k,b){return o.actionCreators[k]=b,u},exposeCaseReducer(k,b){return o.sliceCaseReducersByName[k]=b,u}};l.forEach(k=>{const b=a[k],H={reducerName:k,type:oo(i,k),createNotation:typeof r.reducers=="function"};ho(b)?_o(H,b,u,t):fo(H,b,u)});function f(){const[k={},b=[],H=void 0]=typeof r.extraReducers=="function"?Bi(r.extraReducers):[r.extraReducers],$={...k,...o.sliceCaseReducersByType};return so(r.initialState,V=>{for(let z in $)V.addCase(z,$[z]);for(let z of o.sliceMatchers)V.addMatcher(z.matcher,z.reducer);for(let z of b)V.addMatcher(z.matcher,z.reducer);H&&V.addDefaultCase(H)})}const _=k=>k,d=new Map,h=new WeakMap;let E;function D(k,b){return E||(E=f()),E(k,b)}function v(){return E||(E=f()),E.getInitialState()}function T(k,b=!1){function H(V){let z=V[k];return typeof z>"u"&&b&&(z=Yt(h,H,v)),z}function $(V=_){const z=Yt(d,b,()=>new WeakMap);return Yt(z,V,()=>{const P={};for(const[y,x]of Object.entries(r.selectors??{}))P[y]=co(x,V,()=>Yt(h,V,v),b);return P})}return{reducerPath:k,getSelectors:$,get selectors(){return $(H)},selectSlice:H}}const N={name:i,reducer:D,actions:o.actionCreators,caseReducers:o.sliceCaseReducersByName,getInitialState:v,...T(s),injectInto(k,{reducerPath:b,...H}={}){const $=b??s;return k.inject({reducerPath:$,reducer:D},H),{...N,...T($,!0)}}};return N}}function co(e,t,n,r){function i(s,...a){let l=t(s);return typeof l>"u"&&r&&(l=n()),e(l,...a)}return i.unwrapped=e,i}var ji=lo();function uo(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function fo({type:e,reducerName:t,createNotation:n},r,i){let s,a;if("reducer"in r){if(n&&!vo(r))throw new Error(Qe(17));s=r.reducer,a=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,a?Hr(e,a):Hr(e))}function ho(e){return e._reducerDefinitionType==="asyncThunk"}function vo(e){return e._reducerDefinitionType==="reducerWithPrepare"}function _o({type:e,reducerName:t},n,r,i){if(!i)throw new Error(Qe(18));const{payloadCreator:s,fulfilled:a,pending:l,rejected:o,settled:u,options:f}=n,_=i(e,s,f);r.exposeAction(t,_),a&&r.addCase(_.fulfilled,a),l&&r.addCase(_.pending,l),o&&r.addCase(_.rejected,o),u&&r.addMatcher(_.settled,u),r.exposeCaseReducer(t,{fulfilled:a||Xt,pending:l||Xt,rejected:o||Xt,settled:u||Xt})}function Xt(){}function Qe(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}const or=[{id:"kobold",name:"Kobold Dragonshield",ac:14,hp:1,maxHp:1,xp:1,imagePath:"assets/Monster_KoboldDragonshield.png"},{id:"snake",name:"Snake",ac:12,hp:1,maxHp:1,xp:1,imagePath:"assets/Monster_Snake.png"},{id:"cultist",name:"Cultist",ac:13,hp:2,maxHp:2,xp:1,imagePath:"assets/Monster_Cultist.png"}],po=["kobold","kobold","kobold","snake","snake","snake","cultist","cultist","cultist"],mo=[{id:"quinn",name:"Quinn",heroClass:"Cleric",imagePath:"assets/Hero_Cleric_Quinn.png",speed:5},{id:"vistra",name:"Vistra",heroClass:"Fighter",imagePath:"assets/Hero_Fighter_Vistra.png",speed:5},{id:"keyleth",name:"Keyleth",heroClass:"Paladin",imagePath:"assets/Hero_Paladin_Keyleth.png",speed:6},{id:"tarak",name:"Tarak",heroClass:"Rogue",imagePath:"assets/Hero_Rogue_Tarak.png",speed:6},{id:"haskan",name:"Haskan",heroClass:"Wizard",imagePath:"assets/Hero_Wizard_Haskan.png",speed:6}],go=[{x:1,y:2},{x:2,y:2},{x:3,y:2},{x:3,y:3},{x:3,y:4},{x:1,y:5},{x:2,y:5},{x:3,y:5}],qi=[{tileType:"tile-2exit-a",imagePath:"assets/Tile_Black_x2_01.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-2exit-b",imagePath:"assets/Tile_Black_x2_02.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-2exit-c",imagePath:"assets/Tile_Black_x2_03.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-3exit-a",imagePath:"assets/Tile_Black_x3_01.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-3exit-b",imagePath:"assets/Tile_Black_x3_02.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-3exit-c",imagePath:"assets/Tile_Black_x3_03.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-4exit-a",imagePath:"assets/Tile_Black_x4_01.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-4exit-b",imagePath:"assets/Tile_Black_x4_02.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}}],wo=["tile-2exit-a","tile-2exit-b","tile-2exit-c","tile-3exit-a","tile-3exit-b","tile-3exit-c","tile-4exit-a","tile-4exit-b"],yo={id:"start-tile",tileType:"start",position:{col:0,row:0},rotation:0,edges:{north:"unexplored",south:"unexplored",east:"unexplored",west:"unexplored"}},xo={availableHeroes:mo,selectedHeroes:[],heroEdgeMap:{}},$i=ji({name:"heroes",initialState:xo,reducers:{toggleHeroSelection:(e,t)=>{const n=t.payload,r=e.selectedHeroes.findIndex(i=>i.id===n);if(r>=0)e.selectedHeroes.splice(r,1),delete e.heroEdgeMap[n];else if(e.selectedHeroes.length<5){const i=e.availableHeroes.find(s=>s.id===n);i&&e.selectedHeroes.push(i)}},selectHeroFromEdge:(e,t)=>{const{heroId:n,edge:r}=t.payload,i=e.selectedHeroes.findIndex(s=>s.id===n);if(i>=0)e.heroEdgeMap[n]===r&&(e.selectedHeroes.splice(i,1),delete e.heroEdgeMap[n]);else if(e.selectedHeroes.length<5){const s=e.availableHeroes.find(a=>a.id===n);s&&(e.selectedHeroes.push(s),e.heroEdgeMap[n]=r)}},clearSelection:e=>{e.selectedHeroes=[],e.heroEdgeMap={}}}}),{toggleHeroSelection:Nl,selectHeroFromEdge:bo,clearSelection:Hl}=$i.actions,Eo=$i.reducer,Dt={minX:1,maxX:3,minY:0,maxY:7,staircase:[{x:1,y:3},{x:2,y:3},{x:1,y:4},{x:2,y:4}]};function So(e){return e.x>=Dt.minX&&e.x<=Dt.maxX&&e.y>=Dt.minY&&e.y<=Dt.maxY}function To(e){return Dt.staircase.some(t=>t.x===e.x&&t.y===e.y)}function ko(e){return So(e)&&!To(e)}function Po(e,t,n){return t.some(r=>r.position.x===e.x&&r.position.y===e.y&&r.heroId!==n)}function Io(e){const t=[],n=[{dx:0,dy:-1},{dx:0,dy:1},{dx:-1,dy:0},{dx:1,dy:0},{dx:-1,dy:-1},{dx:1,dy:-1},{dx:-1,dy:1},{dx:1,dy:1}];for(const r of n){const i={x:e.x+r.dx,y:e.y+r.dy};ko(i)&&t.push(i)}return t}function Co(e,t,n,r){const i=[],s=new Set,a=[{pos:e,distance:0}];for(s.add(`${e.x},${e.y}`);a.length>0;){const l=a.shift();if(!l)break;if(l.distance>0&&!Po(l.pos,n,r)&&i.push(l.pos),l.distance<t){const o=Io(l.pos);for(const u of o){const f=`${u.x},${u.y}`;s.has(f)||(s.add(f),a.push({pos:u,distance:l.distance+1}))}}}return i}function Mo(e,t){return t.some(n=>n.x===e.x&&n.y===e.y)}const zo={north:[{x:1,y:0},{x:2,y:0},{x:3,y:0}],south:[{x:1,y:7},{x:2,y:7},{x:3,y:7}],east:[{x:3,y:0},{x:3,y:1},{x:3,y:2},{x:3,y:5},{x:3,y:6},{x:3,y:7}],west:[{x:1,y:0},{x:1,y:1},{x:1,y:2},{x:1,y:5},{x:1,y:6},{x:1,y:7}]};function Do(e,t){return zo[t].some(r=>r.x===e.x&&r.y===e.y)}function Ui(e){return{north:"south",south:"north",east:"west",west:"east"}[e]}function Oo(e,t){const n=t.tiles.find(r=>r.id==="start-tile");if(!n)return null;for(const r of t.unexploredEdges)if(r.tileId===n.id&&Do(e.position,r.direction))return r;return null}function Ao(e,t){const{col:n,row:r}=e.position;switch(t){case"north":return{col:n,row:r-1};case"south":return{col:n,row:r+1};case"east":return{col:n+1,row:r};case"west":return{col:n-1,row:r}}}function Ro(e){return 0}function No(e){return qi.find(t=>t.tileType===e)}function Ho(e,t,n){const r=n.tiles.find(f=>f.id===e.tileId);if(!r)return null;const i=Ao(r,e.direction),s=Ro(e.direction);if(!No(t))return null;const l=`tile-${n.tiles.length}`,u={north:"unexplored",south:"unexplored",east:"unexplored",west:"unexplored",[Ui(e.direction)]:"open"};return{id:l,tileType:t,position:i,rotation:s,edges:u}}function jn(){return{tiles:[{...yo}],unexploredEdges:[{tileId:"start-tile",direction:"north"},{tileId:"start-tile",direction:"south"},{tileId:"start-tile",direction:"east"},{tileId:"start-tile",direction:"west"}],tileDeck:[]}}function Fo(e,t=Math.random){const n=[...e];for(let r=n.length-1;r>0;r--){const i=Math.floor(t()*(r+1));[n[r],n[i]]=[n[i],n[r]]}return n}function Lo(e,t=Math.random){return Fo(e,t)}function Bo(e){if(e.length===0)return{drawnTile:null,remainingDeck:[]};const[t,...n]=e;return{drawnTile:t,remainingDeck:n}}function jo(e,t,n){const r=e.unexploredEdges.filter(o=>!(o.tileId===t.tileId&&o.direction===t.direction)),i=Ui(t.direction),a=["north","south","east","west"].filter(o=>o!==i&&n.edges[o]==="unexplored").map(o=>({tileId:n.id,direction:o}));return{tiles:[...e.tiles.map(o=>o.id===t.tileId?{...o,edges:{...o.edges,[t.direction]:"open"}}:o),n],unexploredEdges:[...r,...a],tileDeck:e.tileDeck}}function Vi(e,t=Math.random){const n=[...e];for(let r=n.length-1;r>0;r--){const i=Math.floor(t()*(r+1));[n[r],n[i]]=[n[i],n[r]]}return n}function qo(e=Math.random){return{drawPile:Vi([...po],e),discardPile:[]}}function $o(e,t=Math.random){if(e.drawPile.length===0){if(e.discardPile.length===0)return{monster:null,deck:e};const i=Vi(e.discardPile,t);return{monster:i[0],deck:{drawPile:i.slice(1),discardPile:[]}}}const[n,...r]=e.drawPile;return{monster:n,deck:{drawPile:r,discardPile:e.discardPile}}}function Uo(e){return or.find(t=>t.id===e)}function Vo(e,t,n,r,i){const s=Uo(e);return s?{monsterId:e,instanceId:`${e}-${i}`,position:t,currentHp:s.hp,controllerId:n,tileId:r}:null}const Ko=4,Br=Math.floor(Ko/2);function Wo(){return{x:Br,y:Br}}const qn={currentHeroIndex:0,currentPhase:"hero-phase",turnNumber:1},Go={currentScreen:"character-select",heroTokens:[],turnState:{...qn},validMoveSquares:[],showingMovement:!1,dungeon:jn(),monsterDeck:{drawPile:[],discardPile:[]},monsters:[],monsterInstanceCounter:0,recentlySpawnedMonsterId:null};function Yo(e){let t=e;return()=>(t=t*1103515245+12345&2147483647,t/2147483647)}function Xo(e,t=Math.random){const n=[...e];for(let r=n.length-1;r>0;r--){const i=Math.floor(t()*(r+1));[n[r],n[i]]=[n[i],n[r]]}return n}const Ki=ji({name:"game",initialState:Go,reducers:{startGame:(e,t)=>{const{heroIds:n,positions:r,seed:i}=t.payload;if(n.length===0||n.length>5)return;const s=i??Date.now();e.randomSeed=s;let a;const l=Yo(s);r?a=r:a=Xo(go,l).slice(0,5),e.heroTokens=n.map((u,f)=>({heroId:u,position:a[f]})),e.turnState={...qn},e.validMoveSquares=[],e.showingMovement=!1;const o=jn();o.tileDeck=Lo([...wo],l),e.dungeon=o,e.monsterDeck=qo(l),e.monsters=[],e.monsterInstanceCounter=0,e.recentlySpawnedMonsterId=null,e.currentScreen="game-board"},setHeroPosition:(e,t)=>{const n=e.heroTokens.find(r=>r.heroId===t.payload.heroId);n&&(n.position=t.payload.position)},showMovement:(e,t)=>{const{heroId:n,speed:r}=t.payload,i=e.heroTokens.find(s=>s.heroId===n);i&&(e.validMoveSquares=Co(i.position,r,e.heroTokens,n),e.showingMovement=!0)},hideMovement:e=>{e.validMoveSquares=[],e.showingMovement=!1},moveHero:(e,t)=>{const{heroId:n,position:r}=t.payload;if(!Mo(r,e.validMoveSquares))return;const i=e.heroTokens.find(s=>s.heroId===n);i&&(i.position=r,e.validMoveSquares=[],e.showingMovement=!1)},resetGame:e=>{e.currentScreen="character-select",e.heroTokens=[],e.turnState={...qn},e.randomSeed=void 0,e.validMoveSquares=[],e.showingMovement=!1,e.dungeon=jn(),e.monsterDeck={drawPile:[],discardPile:[]},e.monsters=[],e.monsterInstanceCounter=0,e.recentlySpawnedMonsterId=null},endHeroPhase:e=>{if(e.turnState.currentPhase!=="hero-phase")return;e.recentlySpawnedMonsterId=null;const t=e.heroTokens[e.turnState.currentHeroIndex];if(!t)return;const n=Oo(t,e.dungeon);if(n&&e.dungeon.tileDeck.length>0){const{drawnTile:r,remainingDeck:i}=Bo(e.dungeon.tileDeck);if(r){const s=Ho(n,r,e.dungeon);if(s){e.dungeon=jo(e.dungeon,n,s),e.dungeon.tileDeck=i;const{monster:a,deck:l}=$o(e.monsterDeck);if(a){const o=Wo(),u=Vo(a,o,t.heroId,s.id,e.monsterInstanceCounter);u&&(e.monsters.push(u),e.monsterInstanceCounter+=1,e.recentlySpawnedMonsterId=u.instanceId),e.monsterDeck=l}}}}e.turnState.currentPhase="exploration-phase"},endExplorationPhase:e=>{e.turnState.currentPhase==="exploration-phase"&&(e.turnState.currentPhase="villain-phase")},endVillainPhase:e=>{e.turnState.currentPhase==="villain-phase"&&(e.turnState.currentHeroIndex=(e.turnState.currentHeroIndex+1)%e.heroTokens.length,e.turnState.currentHeroIndex===0&&(e.turnState.turnNumber+=1),e.turnState.currentPhase="hero-phase")},dismissMonsterCard:e=>{e.recentlySpawnedMonsterId=null}}}),{startGame:Qo,setHeroPosition:Fl,showMovement:Zo,hideMovement:Jo,moveHero:el,resetGame:tl,endHeroPhase:nl,endExplorationPhase:rl,endVillainPhase:il,dismissMonsterCard:sl}=Ki.actions,al=Ki.reducer,Z=ro({reducer:{heroes:Eo,game:al}});typeof window<"u"&&(window.__REDUX_STORE__=Z);function Ee(e){const t="/Ashardalon/",n=e.startsWith("/")?e.slice(1):e;return(t.endsWith("/")?t:t+"/")+n}var ol=J('<button><img class="hero-image svelte-1rwnzlz"/> <div class="hero-info svelte-1rwnzlz"><span class="hero-name svelte-1rwnzlz" data-testid="hero-name"> </span> <span class="hero-class svelte-1rwnzlz"> </span></div></button>'),ll=J('<button><img class="hero-image svelte-1rwnzlz"/> <div class="hero-info svelte-1rwnzlz"><span class="hero-name svelte-1rwnzlz" data-testid="hero-name"> </span> <span class="hero-class svelte-1rwnzlz"> </span></div></button>'),cl=J('<button><img class="hero-image svelte-1rwnzlz"/> <div class="hero-info svelte-1rwnzlz"><span class="hero-name svelte-1rwnzlz" data-testid="hero-name"> </span> <span class="hero-class svelte-1rwnzlz"> </span></div></button>'),ul=J('<button><img class="hero-image svelte-1rwnzlz"/> <div class="hero-info svelte-1rwnzlz"><span class="hero-name svelte-1rwnzlz" data-testid="hero-name"> </span> <span class="hero-class svelte-1rwnzlz"> </span></div></button>'),fl=J('<div class="character-select svelte-1rwnzlz" data-testid="character-select"><div class="edge-zone edge-top svelte-1rwnzlz" data-testid="edge-top"><div class="hero-row svelte-1rwnzlz" data-testid="hero-grid"></div></div> <div class="middle-section svelte-1rwnzlz"><div class="edge-zone edge-left svelte-1rwnzlz" data-testid="edge-left"><div class="hero-column svelte-1rwnzlz"></div></div> <div class="center-zone svelte-1rwnzlz" data-testid="center-zone"><h1 class="svelte-1rwnzlz">Select Your Heroes</h1> <p class="instructions svelte-1rwnzlz">Choose 1-5 heroes for your adventure</p> <p class="instructions svelte-1rwnzlz">Tap a hero from your edge of the table</p> <div class="selection-info svelte-1rwnzlz"><span data-testid="selected-count"> </span></div> <button class="start-button svelte-1rwnzlz" data-testid="start-game-button">Start Adventure</button></div> <div class="edge-zone edge-right svelte-1rwnzlz" data-testid="edge-right"><div class="hero-column svelte-1rwnzlz"></div></div></div> <div class="edge-zone edge-bottom svelte-1rwnzlz" data-testid="edge-bottom"><div class="hero-row svelte-1rwnzlz"></div></div></div>');function dl(e,t){lt(t,!0);let n=Q(ve([])),r=Q(ve([])),i=Q(ve({}));tn(()=>{const P=Z.subscribe(()=>{const x=Z.getState();A(n,x.heroes.selectedHeroes,!0),A(r,x.heroes.availableHeroes,!0),A(i,x.heroes.heroEdgeMap,!0)}),y=Z.getState();return A(n,y.heroes.selectedHeroes,!0),A(r,y.heroes.availableHeroes,!0),A(i,y.heroes.heroEdgeMap,!0),P});function s(P,y){return c(i)[P]===y}function a(P,y){const x=c(i)[P];return x!==void 0&&x!==y}function l(P,y){Z.dispatch(bo({heroId:P,edge:y}))}function o(){c(n).length>0&&Z.dispatch(Qo({heroIds:c(n).map(P=>P.id)}))}function u(){return c(n).length>=1&&c(n).length<=5}var f=fl(),_=p(f),d=p(_);Ye(d,21,()=>c(r),P=>P.id,(P,y)=>{var x=ol();let U;x.__click=()=>l(c(y).id,"top");var K=p(x),ee=S(K,2),te=p(ee),ke=p(te),Be=S(te,2),ae=p(Be);ne((Me,je,qe)=>{U=Re(x,1,"hero-card svelte-1rwnzlz",null,U,Me),M(x,"data-testid",`hero-${c(y).id??""}-top`),x.disabled=je,M(K,"src",qe),M(K,"alt",c(y).name),L(ke,c(y).name),L(ae,c(y).heroClass)},[()=>({selected:s(c(y).id,"top"),unavailable:a(c(y).id,"top")}),()=>a(c(y).id,"top"),()=>Ee(c(y).imagePath)]),F(P,x)});var h=S(_,2),E=p(h),D=p(E);Ye(D,21,()=>c(r),P=>P.id,(P,y)=>{var x=ll();let U;x.__click=()=>l(c(y).id,"left");var K=p(x),ee=S(K,2),te=p(ee),ke=p(te),Be=S(te,2),ae=p(Be);ne((Me,je,qe)=>{U=Re(x,1,"hero-card svelte-1rwnzlz",null,U,Me),M(x,"data-testid",`hero-${c(y).id??""}-left`),x.disabled=je,M(K,"src",qe),M(K,"alt",c(y).name),L(ke,c(y).name),L(ae,c(y).heroClass)},[()=>({selected:s(c(y).id,"left"),unavailable:a(c(y).id,"left")}),()=>a(c(y).id,"left"),()=>Ee(c(y).imagePath)]),F(P,x)});var v=S(E,2),T=S(p(v),6),N=p(T),k=p(N),b=S(T,2);b.__click=o;var H=S(v,2),$=p(H);Ye($,21,()=>c(r),P=>P.id,(P,y)=>{var x=cl();let U;x.__click=()=>l(c(y).id,"right");var K=p(x),ee=S(K,2),te=p(ee),ke=p(te),Be=S(te,2),ae=p(Be);ne((Me,je,qe)=>{U=Re(x,1,"hero-card svelte-1rwnzlz",null,U,Me),M(x,"data-testid",`hero-${c(y).id??""}-right`),x.disabled=je,M(K,"src",qe),M(K,"alt",c(y).name),L(ke,c(y).name),L(ae,c(y).heroClass)},[()=>({selected:s(c(y).id,"right"),unavailable:a(c(y).id,"right")}),()=>a(c(y).id,"right"),()=>Ee(c(y).imagePath)]),F(P,x)});var V=S(h,2),z=p(V);Ye(z,21,()=>c(r),P=>P.id,(P,y)=>{var x=ul();let U;x.__click=()=>l(c(y).id,"bottom");var K=p(x),ee=S(K,2),te=p(ee),ke=p(te),Be=S(te,2),ae=p(Be);ne((Me,je,qe)=>{U=Re(x,1,"hero-card svelte-1rwnzlz",null,U,Me),M(x,"data-testid",`hero-${c(y).id??""}`),x.disabled=je,M(K,"src",qe),M(K,"alt",c(y).name),L(ke,c(y).name),L(ae,c(y).heroClass)},[()=>({selected:s(c(y).id,"bottom"),unavailable:a(c(y).id,"bottom")}),()=>a(c(y).id,"bottom"),()=>Ee(c(y).imagePath)]),F(P,x)}),ne(P=>{L(k,`${c(n).length??""} heroes selected`),b.disabled=P},[()=>!u()]),F(e,f),ct()}dn(["click"]);var hl=J('<button class="move-square svelte-ehd1hj" data-testid="move-square"><span class="sr-only svelte-ehd1hj"> </span></button>'),vl=J('<div class="movement-overlay svelte-ehd1hj" data-testid="movement-overlay"></div>');function _l(e,t){lt(t,!0);function n(s){const a=t.tileOffsetX+s.x*t.cellSize,l=t.tileOffsetY+s.y*t.cellSize;return`left: ${a}px; top: ${l}px; width: ${t.cellSize}px; height: ${t.cellSize}px;`}function r(s,a){s.stopPropagation(),t.onSquareClick(a)}var i=vl();Ye(i,21,()=>t.validMoveSquares,s=>`${s.x},${s.y}`,(s,a)=>{var l=hl();l.__click=f=>r(f,c(a));var o=p(l),u=p(o);ne(f=>{M(l,"data-position-x",c(a).x),M(l,"data-position-y",c(a).y),ft(l,f),L(u,`Move to (${c(a).x??""}, ${c(a).y??""})`)},[()=>n(c(a))]),F(s,l)}),F(e,i),ct()}dn(["click"]);var pl=J('<div class="tile-deck-counter svelte-9649r" data-testid="tile-deck-counter"><span class="deck-icon svelte-9649r">ð¦</span> <span class="deck-count svelte-9649r" data-testid="tile-deck-count"> </span> <span class="deck-label svelte-9649r">tiles</span></div>');function ml(e,t){var n=pl(),r=S(p(n),2),i=p(r);ne(()=>L(i,t.tileCount)),F(e,n)}var gl=J('<div class="unexplored-edge svelte-12eown4" data-testid="unexplored-edge"><span class="question-mark svelte-12eown4">?</span></div>');function wl(e,t){lt(t,!0);const r=(()=>{const l=t.cellSize*1.5,o=36;switch(t.direction){case"north":return{left:`${t.tileWidth/2-l/2}px`,top:`${o-8/2}px`,width:`${l}px`,height:"8px"};case"south":return{left:`${t.tileWidth/2-l/2}px`,bottom:`${o-8/2}px`,width:`${l}px`,height:"8px"};case"east":return{right:`${o-8/2}px`,top:`${t.tileHeight/2-l/2}px`,width:"8px",height:`${l}px`};case"west":return{left:`${o-8/2}px`,top:`${t.tileHeight/2-l/2}px`,width:"8px",height:`${l}px`}}})(),i=Object.entries(r).map(([a,l])=>`${a}: ${l}`).join("; ");var s=gl();ne(()=>{M(s,"data-direction",t.direction),ft(s,i)}),F(e,s),ct()}var yl=J('<div class="monster-token svelte-1g5ysl" data-testid="monster-token"><img class="token-image svelte-1g5ysl"/> <span class="token-label svelte-1g5ysl"> </span></div>');function xl(e,t){lt(t,!0);const n=W(()=>or.find(l=>l.id===t.monster.monsterId)),r=W(()=>()=>{const l=t.cellSize/2,o=t.tilePixelOffset.x+t.tileOffsetX+t.monster.position.x*t.cellSize+l,u=t.tilePixelOffset.y+t.tileOffsetY+t.monster.position.y*t.cellSize+l;return`left: ${o}px; top: ${u}px;`});var i=Ae(),s=Oe(i);{var a=l=>{var o=yl(),u=p(o),f=S(u,2),_=p(f);ne((d,h)=>{M(o,"data-monster-id",t.monster.instanceId),ft(o,d),M(u,"src",h),M(u,"alt",c(n).name),L(_,c(n).name)},[()=>c(r)(),()=>Ee(c(n).imagePath)]),F(l,o)};re(s,l=>{c(n)&&l(a)})}F(e,i),ct()}var bl=J('<div class="monster-card-overlay svelte-at5lsg" role="dialog" aria-modal="true" aria-label="Monster spawned" tabindex="0" data-testid="monster-card-overlay"><div class="monster-card svelte-at5lsg" role="article" data-testid="monster-card"><div class="card-header svelte-at5lsg"><h3 class="monster-name svelte-at5lsg" data-testid="monster-name"> </h3> <button class="dismiss-button svelte-at5lsg" aria-label="Dismiss monster card" data-testid="dismiss-monster-card">â</button></div> <div class="card-image svelte-at5lsg"><img class="monster-image svelte-at5lsg"/></div> <div class="card-stats svelte-at5lsg"><div class="stat svelte-at5lsg"><span class="stat-label svelte-at5lsg">AC</span> <span class="stat-value svelte-at5lsg" data-testid="monster-ac"> </span></div> <div class="stat svelte-at5lsg"><span class="stat-label svelte-at5lsg">HP</span> <span class="stat-value svelte-at5lsg" data-testid="monster-hp"> </span></div> <div class="stat svelte-at5lsg"><span class="stat-label svelte-at5lsg">XP</span> <span class="stat-value svelte-at5lsg" data-testid="monster-xp"> </span></div></div> <p class="card-hint svelte-at5lsg">Click anywhere to dismiss</p></div></div>');function El(e,t){lt(t,!0);const n=W(()=>or.find(o=>o.id===t.monsterId));function r(){t.onDismiss&&t.onDismiss()}function i(o){(o.key==="Escape"||o.key==="Enter"||o.key===" ")&&(o.preventDefault(),r())}var s=Ae(),a=Oe(s);{var l=o=>{var u=bl();u.__click=r,u.__keydown=i;var f=p(u);f.__click=x=>x.stopPropagation(),f.__keydown=x=>x.stopPropagation();var _=p(f),d=p(_),h=p(d),E=S(d,2);E.__click=r;var D=S(_,2),v=p(D),T=S(D,2),N=p(T),k=S(p(N),2),b=p(k),H=S(N,2),$=S(p(H),2),V=p($),z=S(H,2),P=S(p(z),2),y=p(P);ne(x=>{L(h,c(n).name),M(v,"src",x),M(v,"alt",c(n).name),L(b,c(n).ac),L(V,c(n).hp),L(y,c(n).xp)},[()=>Ee(c(n).imagePath)]),F(o,u)};re(a,o=>{c(n)&&o(l)})}F(e,s),ct()}dn(["click","keydown"]);var Sl=J('<div class="player-info svelte-8w11tm" data-testid="turn-indicator"><img class="player-avatar svelte-8w11tm"/> <div class="turn-details svelte-8w11tm"><span class="player-name svelte-8w11tm"> </span> <span class="turn-phase svelte-8w11tm" data-testid="turn-phase"> </span> <span class="turn-number svelte-8w11tm"> </span></div></div>'),Tl=J('<div class="player-info svelte-8w11tm"><img class="player-avatar svelte-8w11tm"/> <div class="turn-details svelte-8w11tm"><span class="player-name svelte-8w11tm"> </span> <span class="turn-phase svelte-8w11tm"> </span> <span class="turn-number svelte-8w11tm"> </span></div></div>'),kl=J('<div><img class="tile-image svelte-8w11tm"/> <!></div>'),Pl=J('<div class="movement-overlay-container svelte-8w11tm"><!></div>'),Il=J('<div data-testid="hero-token"><img class="token-image svelte-8w11tm"/> <span class="token-label svelte-8w11tm"> </span></div>'),Cl=J('<div class="player-info svelte-8w11tm"><img class="player-avatar svelte-8w11tm"/> <div class="turn-details svelte-8w11tm"><span class="player-name svelte-8w11tm"> </span> <span class="turn-phase svelte-8w11tm"> </span> <span class="turn-number svelte-8w11tm"> </span></div></div>'),Ml=J('<div class="player-info svelte-8w11tm" data-testid="turn-indicator"><img class="player-avatar svelte-8w11tm"/> <div class="turn-details svelte-8w11tm"><span class="player-name svelte-8w11tm"> </span> <span class="turn-phase svelte-8w11tm" data-testid="turn-phase"> </span> <span class="turn-number svelte-8w11tm"> </span></div></div>'),zl=J('<div class="game-board svelte-8w11tm" data-testid="game-board"><div data-testid="player-zone-top"><!></div> <div class="middle-section svelte-8w11tm"><div data-testid="player-zone-left"><!></div> <div class="board-container svelte-8w11tm"><div class="dungeon-map svelte-8w11tm" data-testid="dungeon-map" role="button" tabindex="0"><!> <!> <!> <!></div> <div class="board-controls svelte-8w11tm"><!> <button class="end-phase-button svelte-8w11tm" data-testid="end-phase-button"> </button> <button class="reset-button svelte-8w11tm" data-testid="reset-button">â© Return to Character Select</button></div></div> <div data-testid="player-zone-right"><!></div></div> <div data-testid="player-zone-bottom"><!></div> <!></div>');function Dl(e,t){lt(t,!0);const n=140,r=4,i=8,s=4,a=n*r,l=n*i,o=n*s,u=32,f=.15,_=1,d=36,h=36;let E=Q(ve([])),D=Q(ve([])),v=Q(ve({currentHeroIndex:0,currentPhase:"hero-phase",turnNumber:1})),T=Q(ve([])),N=Q(!1),k=Q(ve({tiles:[],unexploredEdges:[],tileDeck:[]})),b=Q(ve([])),H=Q(null),$=Q(null),V=Q(1),z=W(()=>P(c(k)));tn(()=>{const m=Z.subscribe(()=>{const w=Z.getState();A(E,w.game.heroTokens,!0),A(D,w.heroes.selectedHeroes,!0),A(v,w.game.turnState,!0),A(T,w.game.validMoveSquares,!0),A(N,w.game.showingMovement,!0),A(k,w.game.dungeon,!0),A(b,w.game.monsters,!0),A(H,w.game.recentlySpawnedMonsterId,!0)}),g=Z.getState();return A(E,g.game.heroTokens,!0),A(D,g.heroes.selectedHeroes,!0),A(v,g.game.turnState,!0),A(T,g.game.validMoveSquares,!0),A(N,g.game.showingMovement,!0),A(k,g.game.dungeon,!0),A(b,g.game.monsters,!0),A(H,g.game.recentlySpawnedMonsterId,!0),m});function P(m){if(m.tiles.length===0)return{minCol:0,maxCol:0,minRow:0,maxRow:0,width:a,height:l};let g=1/0,w=-1/0,I=1/0,O=-1/0;for(const X of m.tiles)g=Math.min(g,X.position.col),w=Math.max(w,X.position.col),I=Math.min(I,X.position.row),O=Math.max(O,X.position.row);const j=(w-g+1)*a,Y=Math.max(0,-I),C=Math.max(0,O),ue=Y*o+l+C*o;return{minCol:g,maxCol:w,minRow:I,maxRow:O,width:Math.max(j,a),height:Math.max(ue,l)}}function y(m,g){const w=(m.position.col-g.minCol)*a;let I=0;return m.position.row<0?I=(m.position.row-g.minRow)*o:m.position.row===0?I=Math.max(0,-g.minRow)*o:I=Math.max(0,-g.minRow)*o+l+(m.position.row-1)*o,{x:w,y:I}}function x(m){return m.tileType==="start"?"assets/StartTile.png":qi.find(w=>w.tileType===m.tileType)?.imagePath||"assets/Tile_Black_x2_01.png"}function U(m){return m.tileType==="start"?{width:a,height:l}:{width:a,height:o}}tn(()=>{if(c($)){const m=()=>{const w=c($);if(!w)return;const I=w.clientWidth-u,O=w.clientHeight-u,B=c(z),j=I/B.width,Y=O/B.height,C=Math.min(j,Y,_);A(V,Math.max(C,f),!0)};m();const g=new ResizeObserver(m);return g.observe(c($)),()=>g.disconnect()}});function K(m){return c(D).find(g=>g.id===m)}function ee(){return c(E)[c(v).currentHeroIndex]?.heroId}function te(m){switch(m){case"hero-phase":return"Hero Phase";case"exploration-phase":return"Exploration Phase";case"villain-phase":return"Villain Phase"}}function ke(){Z.dispatch(tl())}function Be(m,g){const w=n/2,I=g.x+d+m.x*n+w,O=g.y+h+m.y*n+w;return`left: ${I}px; top: ${O}px;`}function ae(){const m=c(v).currentHeroIndex%4;return["bottom","right","top","left"][m]}function Me(m){if(c(v).currentPhase!=="hero-phase")return;const g=ee();if(!g)return;const w=K(g);w&&(c(N)?Z.dispatch(Jo()):Z.dispatch(Zo({heroId:g,speed:w.speed})))}function je(m){const g=ee();g&&Z.dispatch(el({heroId:g,position:m}))}function qe(m){(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),Me())}function Wi(){switch(c(v).currentPhase){case"hero-phase":Z.dispatch(nl());break;case"exploration-phase":Z.dispatch(rl());break;case"villain-phase":Z.dispatch(il());break}}function Gi(){switch(c(v).currentPhase){case"hero-phase":return"End Hero Phase";case"exploration-phase":return"End Exploration";case"villain-phase":return"End Villain Phase"}}function Yi(){Z.dispatch(sl())}function Xi(m){const g=c(k).tiles.find(w=>w.id===m);return g?y(g,c(z)):{x:0,y:0}}var lr=zl(),wn=p(lr);let cr;var Qi=p(wn);{var Zi=m=>{const g=W(ee),w=W(()=>c(g)?K(c(g)):void 0);var I=Ae(),O=Oe(I);{var B=j=>{var Y=Sl(),C=p(Y),ue=S(C,2),X=p(ue),ze=p(X),fe=S(X,2),$e=p(fe),Ue=S(fe,2),Ve=p(Ue);ne((Ke,ut)=>{M(C,"src",Ke),M(C,"alt",c(w).name),L(ze,`${c(w).name??""}'s Turn`),L($e,ut),L(Ve,`Turn ${c(v).turnNumber??""}`)},[()=>Ee(c(w).imagePath),()=>te(c(v).currentPhase)]),F(j,Y)};re(O,j=>{c(w)&&j(B)})}F(m,I)};re(Qi,m=>{ae()==="top"&&m(Zi)})}var ur=S(wn,2),yn=p(ur);let fr;var Ji=p(yn);{var es=m=>{const g=W(ee),w=W(()=>c(g)?K(c(g)):void 0);var I=Ae(),O=Oe(I);{var B=j=>{var Y=Tl(),C=p(Y),ue=S(C,2),X=p(ue),ze=p(X),fe=S(X,2),$e=p(fe),Ue=S(fe,2),Ve=p(Ue);ne((Ke,ut)=>{M(C,"src",Ke),M(C,"alt",c(w).name),L(ze,`${c(w).name??""}'s Turn`),L($e,ut),L(Ve,`Turn ${c(v).turnNumber??""}`)},[()=>Ee(c(w).imagePath),()=>te(c(v).currentPhase)]),F(j,Y)};re(O,j=>{c(w)&&j(B)})}F(m,I)};re(Ji,m=>{ae()==="left"&&m(es)})}var xn=S(yn,2),mt=p(xn);mt.__click=Me,mt.__keydown=qe;var dr=p(mt);Ye(dr,17,()=>c(k).tiles,m=>m.id,(m,g)=>{const w=W(()=>y(c(g),c(z))),I=W(()=>U(c(g)));var O=kl();let B;var j=p(O),Y=S(j,2);Ye(Y,17,()=>c(k).unexploredEdges.filter(C=>C.tileId===c(g).id),C=>C.direction,(C,ue)=>{wl(C,{get direction(){return c(ue).direction},cellSize:n,get tileWidth(){return c(I).width},get tileHeight(){return c(I).height}})}),ne(C=>{B=Re(O,1,"placed-tile svelte-8w11tm",null,B,{"start-tile":c(g).tileType==="start"}),M(O,"data-testid",c(g).tileType==="start"?"start-tile":"dungeon-tile"),M(O,"data-tile-id",c(g).id),ft(O,`left: ${c(w).x??""}px; top: ${c(w).y??""}px; width: ${c(I).width??""}px; height: ${c(I).height??""}px;`),M(j,"src",C),M(j,"alt",c(g).tileType)},[()=>Ee(x(c(g)))]),F(m,O)});var hr=S(dr,2);{var ts=m=>{const g=W(()=>c(k).tiles.find(B=>B.tileType==="start"));var w=Ae(),I=Oe(w);{var O=B=>{const j=W(()=>y(c(g),c(z))),Y=W(()=>U(c(g)));var C=Pl(),ue=p(C);_l(ue,{get validMoveSquares(){return c(T)},tileOffsetX:d,tileOffsetY:h,cellSize:n,onSquareClick:je}),ne(()=>ft(C,`left: ${c(j).x??""}px; top: ${c(j).y??""}px; width: ${c(Y).width??""}px; height: ${c(Y).height??""}px;`)),F(B,C)};re(I,B=>{c(g)&&B(O)})}F(m,w)};re(hr,m=>{c(N)&&c(T).length>0&&m(ts)})}var vr=S(hr,2);Ye(vr,17,()=>c(E),m=>m.heroId,(m,g)=>{const w=W(()=>K(c(g).heroId)),I=W(()=>c(g).heroId===ee()),O=W(()=>c(k).tiles.find(C=>C.tileType==="start"));var B=Ae(),j=Oe(B);{var Y=C=>{const ue=W(()=>y(c(O),c(z)));var X=Il();let ze;var fe=p(X),$e=S(fe,2),Ue=p($e);ne((Ve,Ke)=>{ze=Re(X,1,"hero-token svelte-8w11tm",null,ze,{active:c(I)}),M(X,"data-hero-id",c(g).heroId),ft(X,Ve),M(fe,"src",Ke),M(fe,"alt",c(w).name),L(Ue,c(w).name)},[()=>Be(c(g).position,c(ue)),()=>Ee(c(w).imagePath)]),F(C,X)};re(j,C=>{c(w)&&c(O)&&C(Y)})}F(m,B)});var ns=S(vr,2);Ye(ns,17,()=>c(b),m=>m.instanceId,(m,g)=>{{let w=W(()=>Xi(c(g).tileId));xl(m,{get monster(){return c(g)},cellSize:n,tileOffsetX:d,tileOffsetY:h,get tilePixelOffset(){return c(w)}})}});var rs=S(mt,2),_r=p(rs);ml(_r,{get tileCount(){return c(k).tileDeck.length}});var bn=S(_r,2);bn.__click=Wi;var is=p(bn),ss=S(bn,2);ss.__click=ke,Pa(xn,m=>A($,m),()=>c($));var pr=S(xn,2);let mr;var as=p(pr);{var os=m=>{const g=W(ee),w=W(()=>c(g)?K(c(g)):void 0);var I=Ae(),O=Oe(I);{var B=j=>{var Y=Cl(),C=p(Y),ue=S(C,2),X=p(ue),ze=p(X),fe=S(X,2),$e=p(fe),Ue=S(fe,2),Ve=p(Ue);ne((Ke,ut)=>{M(C,"src",Ke),M(C,"alt",c(w).name),L(ze,`${c(w).name??""}'s Turn`),L($e,ut),L(Ve,`Turn ${c(v).turnNumber??""}`)},[()=>Ee(c(w).imagePath),()=>te(c(v).currentPhase)]),F(j,Y)};re(O,j=>{c(w)&&j(B)})}F(m,I)};re(as,m=>{ae()==="right"&&m(os)})}var En=S(ur,2);let gr;var ls=p(En);{var cs=m=>{const g=W(ee),w=W(()=>c(g)?K(c(g)):void 0);var I=Ae(),O=Oe(I);{var B=j=>{var Y=Ml(),C=p(Y),ue=S(C,2),X=p(ue),ze=p(X),fe=S(X,2),$e=p(fe),Ue=S(fe,2),Ve=p(Ue);ne((Ke,ut)=>{M(C,"src",Ke),M(C,"alt",c(w).name),L(ze,`${c(w).name??""}'s Turn`),L($e,ut),L(Ve,`Turn ${c(v).turnNumber??""}`)},[()=>Ee(c(w).imagePath),()=>te(c(v).currentPhase)]),F(j,Y)};re(O,j=>{c(w)&&j(B)})}F(m,I)};re(ls,m=>{ae()==="bottom"&&m(cs)})}var us=S(En,2);{var fs=m=>{const g=W(()=>c(b).find(B=>B.instanceId===c(H)));var w=Ae(),I=Oe(w);{var O=B=>{El(B,{get monsterId(){return c(g).monsterId},onDismiss:Yi})};re(I,B=>{c(g)&&B(O)})}F(m,w)};re(us,m=>{c(H)&&m(fs)})}ne((m,g,w,I,O)=>{cr=Re(wn,1,"edge-zone edge-top svelte-8w11tm",null,cr,m),fr=Re(yn,1,"edge-zone edge-left svelte-8w11tm",null,fr,g),ft(mt,`transform: scale(${c(V)??""}); width: ${c(z).width??""}px; height: ${c(z).height??""}px;`),M(mt,"aria-label",c(N)?"Click to hide movement options":"Click to show movement options for current hero"),L(is,w),mr=Re(pr,1,"edge-zone edge-right svelte-8w11tm",null,mr,I),gr=Re(En,1,"edge-zone edge-bottom svelte-8w11tm",null,gr,O)},[()=>({"active-edge":ae()==="top"}),()=>({"active-edge":ae()==="left"}),Gi,()=>({"active-edge":ae()==="right"}),()=>({"active-edge":ae()==="bottom"})]),F(e,lr),ct()}dn(["click","keydown"]);var Ol=J('<main class="svelte-1n46o8q"><!></main>');function Al(e,t){lt(t,!0);let n=Q("character-select");tn(()=>{const l=Z.subscribe(()=>{const u=Z.getState();A(n,u.game.currentScreen,!0)}),o=Z.getState();return A(n,o.game.currentScreen,!0),l});var r=Ol(),i=p(r);{var s=l=>{dl(l,{})},a=l=>{var o=Ae(),u=Oe(o);{var f=_=>{Dl(_,{})};re(u,_=>{c(n)==="game-board"&&_(f)},!0)}F(l,o)};re(i,l=>{c(n)==="character-select"?l(s):l(a,!1)})}F(e,r),ct()}ma(Al,{target:document.getElementById("app")});
