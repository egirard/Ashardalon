(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();const Io="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Io);const ps=1,ms=2,gs=4,Co=8,Mo=16,Ao=1,Eo=2,Ye=Symbol(),Po="http://www.w3.org/1999/xhtml",ba=!1;var _s=Array.isArray,Ho=Array.prototype.indexOf,qa=Array.from,Do=Object.defineProperty,kn=Object.getOwnPropertyDescriptor,Ro=Object.getOwnPropertyDescriptors,Oo=Object.prototype,zo=Array.prototype,ys=Object.getPrototypeOf,jr=Object.isExtensible;function jo(e){for(var t=0;t<e.length;t++)e[t]()}function ws(){var e,t,n=new Promise((a,r)=>{e=a,t=r});return{promise:n,resolve:e,reject:t}}const Ue=2,Ua=4,Wa=8,No=1<<24,Ot=16,zt=32,en=64,aa=128,yt=512,Ve=1024,at=2048,jt=4096,ot=8192,qt=16384,Ya=32768,cn=65536,Nr=1<<17,ks=1<<18,pn=1<<19,Bo=1<<20,Qt=32768,Ta=1<<21,Va=1<<22,Ut=1<<23,Ln=Symbol("$state"),Fo=Symbol(""),sn=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Lo(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function qo(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Uo(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Wo(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Yo(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Vo(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Xo(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Go(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Ko(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}function Qo(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function xs(e){return e===this.v}function Zo(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function bs(e){return!Zo(e,this.v)}let Jo=!1,vt=null;function un(e){vt=e}function Oe(e,t=!1,n){vt={p:vt,i:!1,c:null,e:null,s:e,x:null,l:null}}function ze(e){var t=vt,n=t.e;if(n!==null){t.e=null;for(var a of n)js(a)}return t.i=!0,vt=t.p,{}}function Ts(){return!0}let on=[];function $o(){var e=on;on=[],jo(e)}function mn(e){if(on.length===0){var t=on;queueMicrotask(()=>{t===on&&$o()})}on.push(e)}function Ss(e){var t=we;if(t===null)return ce.f|=Ut,e;if((t.f&Ya)===0){if((t.f&aa)===0)throw e;t.b.error(e)}else dn(e,t)}function dn(e,t){for(;t!==null;){if((t.f&aa)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e}const On=new Set;let Se=null,ut=null,bt=[],Xa=null,Sa=!1;class Tt{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#a=0;#n=0;#l=null;#s=[];#r=[];skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(t){bt=[],this.apply();var n={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const a of t)this.#i(a,n);this.is_fork||this.#u(),this.is_deferred()?(this.#o(n.effects),this.#o(n.render_effects),this.#o(n.block_effects)):(Se=null,Br(n.render_effects),Br(n.effects),this.#l?.resolve()),ut=null}#i(t,n){t.f^=Ve;for(var a=t.first;a!==null;){var r=a.f,s=(r&(zt|en))!==0,o=s&&(r&Ve)!==0,c=o||(r&ot)!==0||this.skipped_effects.has(a);if((a.f&aa)!==0&&a.b?.is_pending()&&(n={parent:n,effect:a,effects:[],render_effects:[],block_effects:[]}),!c&&a.fn!==null){s?a.f^=Ve:(r&Ua)!==0?n.effects.push(a):En(a)&&((a.f&Ot)!==0&&n.block_effects.push(a),Sn(a));var l=a.first;if(l!==null){a=l;continue}}var u=a.parent;for(a=a.next;a===null&&u!==null;)u===n.effect&&(this.#o(n.effects),this.#o(n.render_effects),this.#o(n.block_effects),n=n.parent),a=u.next,u=u.parent}}#o(t){for(const n of t)((n.f&at)!==0?this.#s:this.#r).push(n),this.#c(n.deps),Xe(n,Ve)}#c(t){if(t!==null)for(const n of t)(n.f&Ue)===0||(n.f&Qt)===0||(n.f^=Qt,this.#c(n.deps))}capture(t,n){this.previous.has(t)||this.previous.set(t,n),(t.f&Ut)===0&&(this.current.set(t,t.v),ut?.set(t,t.v))}activate(){Se=this,this.apply()}deactivate(){Se===this&&(Se=null,ut=null)}flush(){if(this.activate(),bt.length>0){if(el(),Se!==null&&Se!==this)return}else this.#a===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#t)t(this);this.#t.clear()}#u(){if(this.#n===0){for(const t of this.#e)t();this.#e.clear()}this.#a===0&&this.#d()}#d(){if(On.size>1){this.previous.clear();var t=ut,n=!0,a={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const s of On){if(s===this){n=!1;continue}const o=[];for(const[l,u]of this.current){if(s.current.has(l))if(n&&u!==s.current.get(l))s.current.set(l,u);else continue;o.push(l)}if(o.length===0)continue;const c=[...s.current.keys()].filter(l=>!this.current.has(l));if(c.length>0){var r=bt;bt=[];const l=new Set,u=new Map;for(const f of o)Is(f,c,l,u);if(bt.length>0){Se=s,s.apply();for(const f of bt)s.#i(f,a);s.deactivate()}bt=r}}Se=null,ut=t}this.committed=!0,On.delete(this)}increment(t){this.#a+=1,t&&(this.#n+=1)}decrement(t){this.#a-=1,t&&(this.#n-=1),this.revive()}revive(){for(const t of this.#s)Xe(t,at),Zt(t);for(const t of this.#r)Xe(t,jt),Zt(t);this.#s=[],this.#r=[],this.flush()}oncommit(t){this.#e.add(t)}ondiscard(t){this.#t.add(t)}settled(){return(this.#l??=ws()).promise}static ensure(){if(Se===null){const t=Se=new Tt;On.add(Se),Tt.enqueue(()=>{Se===t&&t.flush()})}return Se}static enqueue(t){mn(t)}apply(){}}function el(){var e=Yt;Sa=!0;var t=null;try{var n=0;for(Xn(!0);bt.length>0;){var a=Tt.ensure();if(n++>1e3){var r,s;tl()}a.process(bt),Wt.clear()}}finally{Sa=!1,Xn(e),Xa=null}}function tl(){try{Yo()}catch(e){dn(e,Xa)}}let Mt=null;function Br(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var a=e[n++];if((a.f&(qt|ot))===0&&En(a)&&(Mt=new Set,Sn(a),a.deps===null&&a.first===null&&a.nodes_start===null&&(a.teardown===null&&a.ac===null?Ls(a):a.fn=null),Mt?.size>0)){Wt.clear();for(const r of Mt){if((r.f&(qt|ot))!==0)continue;const s=[r];let o=r.parent;for(;o!==null;)Mt.has(o)&&(Mt.delete(o),s.push(o)),o=o.parent;for(let c=s.length-1;c>=0;c--){const l=s[c];(l.f&(qt|ot))===0&&Sn(l)}}Mt.clear()}}Mt=null}}function Is(e,t,n,a){if(!n.has(e)&&(n.add(e),e.reactions!==null))for(const r of e.reactions){const s=r.f;(s&Ue)!==0?Is(r,t,n,a):(s&(Va|Ot))!==0&&(s&at)===0&&Cs(r,t,a)&&(Xe(r,at),Zt(r))}}function Cs(e,t,n){const a=n.get(e);if(a!==void 0)return a;if(e.deps!==null)for(const r of e.deps){if(t.includes(r))return!0;if((r.f&Ue)!==0&&Cs(r,t,n))return n.set(r,!0),!0}return n.set(e,!1),!1}function Zt(e){for(var t=Xa=e;t.parent!==null;){t=t.parent;var n=t.f;if(Sa&&t===we&&(n&Ot)!==0&&(n&ks)===0)return;if((n&(en|zt))!==0){if((n&Ve)===0)return;t.f^=Ve}}bt.push(t)}function nl(e){let t=0,n=Jt(0),a;return()=>{bn()&&(i(n),Ns(()=>(t===0&&(a=Js(()=>e(()=>xn(n)))),t+=1,()=>{mn(()=>{t-=1,t===0&&(a?.(),a=void 0,xn(n))})})))}}var al=cn|pn|aa;function rl(e,t,n){new sl(e,t,n)}class sl{parent;#e=!1;#t;#a=null;#n;#l;#s;#r=null;#i=null;#o=null;#c=null;#u=null;#d=0;#f=0;#h=!1;#v=null;#y=nl(()=>(this.#v=Jt(this.#d),()=>{this.#v=null}));constructor(t,n,a){this.#t=t,this.#n=n,this.#l=a,this.parent=we.b,this.#e=!!this.#n.pending,this.#s=Za(()=>{we.b=this;{var r=this.#g();try{this.#r=ct(()=>a(r))}catch(s){this.error(s)}this.#f>0?this.#m():this.#e=!1}return()=>{this.#u?.remove()}},al)}#w(){try{this.#r=ct(()=>this.#l(this.#t))}catch(t){this.error(t)}this.#e=!1}#k(){const t=this.#n.pending;t&&(this.#i=ct(()=>t(this.#t)),Tt.enqueue(()=>{var n=this.#g();this.#r=this.#p(()=>(Tt.ensure(),ct(()=>this.#l(n)))),this.#f>0?this.#m():(ln(this.#i,()=>{this.#i=null}),this.#e=!1)}))}#g(){var t=this.#t;return this.#e&&(this.#u=Dt(),this.#t.before(this.#u),t=this.#u),t}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#p(t){var n=we,a=ce,r=vt;It(this.#s),tt(this.#s),un(this.#s.ctx);try{return t()}catch(s){return Ss(s),null}finally{It(n),tt(a),un(r)}}#m(){const t=this.#n.pending;this.#r!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#u),Ws(this.#r,this.#c)),this.#i===null&&(this.#i=ct(()=>t(this.#t)))}#_(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#_(t);return}this.#f+=t,this.#f===0&&(this.#e=!1,this.#i&&ln(this.#i,()=>{this.#i=null}),this.#c&&(this.#t.before(this.#c),this.#c=null))}update_pending_count(t){this.#_(t),this.#d+=t,this.#v&&fn(this.#v,this.#d)}get_effect_pending(){return this.#y(),i(this.#v)}error(t){var n=this.#n.onerror;let a=this.#n.failed;if(this.#h||!n&&!a)throw t;this.#r&&(nt(this.#r),this.#r=null),this.#i&&(nt(this.#i),this.#i=null),this.#o&&(nt(this.#o),this.#o=null);var r=!1,s=!1;const o=()=>{if(r){Qo();return}r=!0,s&&Ko(),Tt.ensure(),this.#d=0,this.#o!==null&&ln(this.#o,()=>{this.#o=null}),this.#e=this.has_pending_snippet(),this.#r=this.#p(()=>(this.#h=!1,ct(()=>this.#l(this.#t)))),this.#f>0?this.#m():this.#e=!1};var c=ce;try{tt(null),s=!0,n?.(t,o),s=!1}catch(l){dn(l,this.#s&&this.#s.parent)}finally{tt(c)}a&&mn(()=>{this.#o=this.#p(()=>{Tt.ensure(),this.#h=!0;try{return ct(()=>{a(this.#t,()=>t,()=>o)})}catch(l){return dn(l,this.#s.parent),null}finally{this.#h=!1}})})}}function il(e,t,n){for(var a=[],r=t.length,s=0;s<r;s++)Ja(t[s].e,a,!0);qs(a,()=>{var o=a.length===0&&n!==null;if(o){var c=n,l=c.parentNode;gl(l),l.append(c),e.items.clear(),gt(e,t[0].prev,t[r-1].next)}for(var u=0;u<r;u++){var f=t[u];o||(e.items.delete(f.k),gt(e,f.prev,f.next)),nt(f.e,!o)}e.first===t[0]&&(e.first=t[0].prev)})}function Re(e,t,n,a,r,s=null){var o=e,c=new Map,l=null,u=(t&gs)!==0,f=(t&ps)!==0,m=(t&ms)!==0;if(u){var g=e;o=g.appendChild(Dt())}var _=null,A=fl(()=>{var P=n();return _s(P)?P:P==null?[]:qa(P)}),L,x=!0;function k(){ol(I,L,o,t,a),_!==null&&(L.length===0?(_.fragment?(o.before(_.fragment),_.fragment=null):$a(_.effect),D.first=_.effect):ln(_.effect,()=>{_=null}))}var D=Za(()=>{L=i(A);for(var P=L.length,K=new Set,q=Se,W=null,G=Os(),Z=0;Z<P;Z+=1){var re=L[Z],ue=a(re,Z),N=x?null:c.get(ue);N?(f&&fn(N.v,re),m?fn(N.i,Z):N.i=Z,G&&q.skipped_effects.delete(N.e)):(N=ll(x?o:null,W,re,ue,Z,r,t,n),x&&(N.o=!0,W===null?l=N:W.next=N,W=N),c.set(ue,N)),K.add(ue)}if(P===0&&s&&!_)if(x)_={fragment:null,effect:ct(()=>s(o))};else{var ke=document.createDocumentFragment(),$=Dt();ke.append($),_={fragment:ke,effect:ct(()=>s($))}}if(!x)if(G){for(const[oe,ie]of c)K.has(oe)||q.skipped_effects.add(ie.e);q.oncommit(k),q.ondiscard(()=>{})}else k();i(A)}),I={effect:D,items:c,first:l};x=!1}function ol(e,t,n,a,r){var s=(a&Co)!==0,o=t.length,c=e.items,l=e.first,u,f=null,m,g=[],_=[],A,L,x,k;if(s)for(k=0;k<o;k+=1)A=t[k],L=r(A,k),x=c.get(L),x.o&&(x.a?.measure(),(m??=new Set).add(x));for(k=0;k<o;k+=1){if(A=t[k],L=r(A,k),x=c.get(L),e.first??=x,!x.o){x.o=!0;var D=f?f.next:l;gt(e,f,x),gt(e,x,D),_a(x,D,n),f=x,g=[],_=[],l=f.next;continue}if((x.e.f&ot)!==0&&($a(x.e),s&&(x.a?.unfix(),(m??=new Set).delete(x))),x!==l){if(u!==void 0&&u.has(x)){if(g.length<_.length){var I=_[0],P;f=I.prev;var K=g[0],q=g[g.length-1];for(P=0;P<g.length;P+=1)_a(g[P],I,n);for(P=0;P<_.length;P+=1)u.delete(_[P]);gt(e,K.prev,q.next),gt(e,f,K),gt(e,q,I),l=I,f=q,k-=1,g=[],_=[]}else u.delete(x),_a(x,l,n),gt(e,x.prev,x.next),gt(e,x,f===null?e.first:f.next),gt(e,f,x),f=x;continue}for(g=[],_=[];l!==null&&l.k!==L;)(l.e.f&ot)===0&&(u??=new Set).add(l),_.push(l),l=l.next;if(l===null)continue;x=l}g.push(x),f=x,l=x.next}let W=c.size>o;if(l!==null||u!==void 0){for(var G=u===void 0?[]:qa(u);l!==null;)(l.e.f&ot)===0&&G.push(l),l=l.next;var Z=G.length;if(W=c.size-Z>o,Z>0){var re=(a&gs)!==0&&o===0?n:null;if(s){for(k=0;k<Z;k+=1)G[k].a?.measure();for(k=0;k<Z;k+=1)G[k].a?.fix()}il(e,G,re)}}if(W)for(const ue of c.values())ue.o||(gt(e,f,ue),f=ue);e.effect.last=f&&f.e,s&&mn(()=>{if(m!==void 0)for(x of m)x.a?.apply()})}function ll(e,t,n,a,r,s,o,c){var l=(o&ps)!==0,u=(o&Mo)===0,f=l?u?hl(n,!1,!1):Jt(n):n,m=(o&ms)===0?r:Jt(r),g={i:m,v:f,k:a,a:null,e:null,o:!1,prev:t,next:null};try{if(e===null){var _=document.createDocumentFragment();_.append(e=Dt())}return g.e=ct(()=>s(e,f,m,c)),t!==null&&(t.next=g),g}finally{}}function _a(e,t,n){for(var a=e.next?e.next.e.nodes_start:n,r=t?t.e.nodes_start:n,s=e.e.nodes_start;s!==null&&s!==a;){var o=An(s);r.before(s),s=o}}function gt(e,t,n){t===null?(e.first=n,e.effect.first=n&&n.e):(t.e.next&&(t.e.next.prev=null),t.next=n,t.e.next=n&&n.e),n!==null&&(n.e.prev&&(n.e.prev.next=null),n.prev=t,n.e.prev=t&&t.e)}function cl(e,t,n,a){const r=Ga;if(n.length===0&&e.length===0){a(t.map(r));return}var s=Se,o=we,c=ul();function l(){Promise.all(n.map(u=>dl(u))).then(u=>{c();try{a([...t.map(r),...u])}catch(f){(o.f&qt)===0&&dn(f,o)}s?.deactivate(),Yn()}).catch(u=>{dn(u,o)})}e.length>0?Promise.all(e).then(()=>{c();try{return l()}finally{s?.deactivate(),Yn()}}):l()}function ul(){var e=we,t=ce,n=vt,a=Se;return function(s=!0){It(e),tt(t),un(n),s&&a?.activate()}}function Yn(){It(null),tt(null),un(null)}function Ga(e){var t=Ue|at,n=ce!==null&&(ce.f&Ue)!==0?ce:null;return we!==null&&(we.f|=pn),{ctx:vt,deps:null,effects:null,equals:xs,f:t,fn:e,reactions:null,rv:0,v:Ye,wv:0,parent:n??we,ac:null}}function dl(e,t){let n=we;n===null&&Lo();var a=n.b,r=void 0,s=Jt(Ye),o=!ce,c=new Map;return xl(()=>{var l=ws();r=l.promise;try{Promise.resolve(e()).then(l.resolve,l.reject).then(()=>{u===Se&&u.committed&&u.deactivate(),Yn()})}catch(g){l.reject(g),Yn()}var u=Se;if(o){var f=!a.is_pending();a.update_pending_count(1),u.increment(f),c.get(u)?.reject(sn),c.delete(u),c.set(u,l)}const m=(g,_=void 0)=>{if(u.activate(),_)_!==sn&&(s.f|=Ut,fn(s,_));else{(s.f&Ut)!==0&&(s.f^=Ut),fn(s,g);for(const[A,L]of c){if(c.delete(A),A===u)break;L.reject(sn)}}o&&(a.update_pending_count(-1),u.decrement(f))};l.promise.then(m,g=>m(null,g||"unknown"))}),zs(()=>{for(const l of c.values())l.reject(sn)}),new Promise(l=>{function u(f){function m(){f===r?l(s):u(r)}f.then(m,m)}u(r)})}function Q(e){const t=Ga(e);return Ys(t),t}function fl(e){const t=Ga(e);return t.equals=bs,t}function Ms(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)nt(t[n])}}function vl(e){for(var t=e.parent;t!==null;){if((t.f&Ue)===0)return(t.f&qt)===0?t:null;t=t.parent}return null}function Ka(e){var t,n=we;It(vl(e));try{e.f&=~Qt,Ms(e),t=Ks(e)}finally{It(n)}return t}function As(e){var t=Ka(e);if(e.equals(t)||(Se?.is_fork||(e.v=t),e.wv=Xs()),!gn)if(ut!==null)(bn()||Se?.is_fork)&&ut.set(e,t);else{var n=(e.f&yt)===0?jt:Ve;Xe(e,n)}}let Ia=new Set;const Wt=new Map;let Es=!1;function Jt(e,t){var n={f:0,v:e,reactions:null,equals:xs,rv:0,wv:0};return n}function V(e,t){const n=Jt(e);return Ys(n),n}function hl(e,t=!1,n=!0){const a=Jt(e);return t||(a.equals=bs),a}function T(e,t,n=!1){ce!==null&&(!St||(ce.f&Nr)!==0)&&Ts()&&(ce.f&(Ue|Ot|Va|Nr))!==0&&!Pt?.includes(e)&&Go();let a=n?Ie(t):t;return fn(e,a)}function fn(e,t){if(!e.equals(t)){var n=e.v;gn?Wt.set(e,t):Wt.set(e,n),e.v=t;var a=Tt.ensure();a.capture(e,n),(e.f&Ue)!==0&&((e.f&at)!==0&&Ka(e),Xe(e,(e.f&yt)!==0?Ve:jt)),e.wv=Xs(),Ps(e,at),we!==null&&(we.f&Ve)!==0&&(we.f&(zt|en))===0&&(lt===null?Sl([e]):lt.push(e)),!a.is_fork&&Ia.size>0&&!Es&&pl()}return t}function pl(){Es=!1;var e=Yt;Xn(!0);const t=Array.from(Ia);try{for(const n of t)(n.f&Ve)!==0&&Xe(n,jt),En(n)&&Sn(n)}finally{Xn(e)}Ia.clear()}function xn(e){T(e,e.v+1)}function Ps(e,t){var n=e.reactions;if(n!==null)for(var a=n.length,r=0;r<a;r++){var s=n[r],o=s.f,c=(o&at)===0;if(c&&Xe(s,t),(o&Ue)!==0){var l=s;ut?.delete(l),(o&Qt)===0&&(o&yt&&(s.f|=Qt),Ps(l,jt))}else c&&((o&Ot)!==0&&Mt!==null&&Mt.add(s),Zt(s))}}function Ie(e){if(typeof e!="object"||e===null||Ln in e)return e;const t=ys(e);if(t!==Oo&&t!==zo)return e;var n=new Map,a=_s(e),r=V(0),s=Kt,o=c=>{if(Kt===s)return c();var l=ce,u=Kt;tt(null),qr(s);var f=c();return tt(l),qr(u),f};return a&&n.set("length",V(e.length)),new Proxy(e,{defineProperty(c,l,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&Vo();var f=n.get(l);return f===void 0?f=o(()=>{var m=V(u.value);return n.set(l,m),m}):T(f,u.value,!0),!0},deleteProperty(c,l){var u=n.get(l);if(u===void 0){if(l in c){const f=o(()=>V(Ye));n.set(l,f),xn(r)}}else T(u,Ye),xn(r);return!0},get(c,l,u){if(l===Ln)return e;var f=n.get(l),m=l in c;if(f===void 0&&(!m||kn(c,l)?.writable)&&(f=o(()=>{var _=Ie(m?c[l]:Ye),A=V(_);return A}),n.set(l,f)),f!==void 0){var g=i(f);return g===Ye?void 0:g}return Reflect.get(c,l,u)},getOwnPropertyDescriptor(c,l){var u=Reflect.getOwnPropertyDescriptor(c,l);if(u&&"value"in u){var f=n.get(l);f&&(u.value=i(f))}else if(u===void 0){var m=n.get(l),g=m?.v;if(m!==void 0&&g!==Ye)return{enumerable:!0,configurable:!0,value:g,writable:!0}}return u},has(c,l){if(l===Ln)return!0;var u=n.get(l),f=u!==void 0&&u.v!==Ye||Reflect.has(c,l);if(u!==void 0||we!==null&&(!f||kn(c,l)?.writable)){u===void 0&&(u=o(()=>{var g=f?Ie(c[l]):Ye,_=V(g);return _}),n.set(l,u));var m=i(u);if(m===Ye)return!1}return f},set(c,l,u,f){var m=n.get(l),g=l in c;if(a&&l==="length")for(var _=u;_<m.v;_+=1){var A=n.get(_+"");A!==void 0?T(A,Ye):_ in c&&(A=o(()=>V(Ye)),n.set(_+"",A))}if(m===void 0)(!g||kn(c,l)?.writable)&&(m=o(()=>V(void 0)),T(m,Ie(u)),n.set(l,m));else{g=m.v!==Ye;var L=o(()=>Ie(u));T(m,L)}var x=Reflect.getOwnPropertyDescriptor(c,l);if(x?.set&&x.set.call(f,u),!g){if(a&&typeof l=="string"){var k=n.get("length"),D=Number(l);Number.isInteger(D)&&D>=k.v&&T(k,D+1)}xn(r)}return!0},ownKeys(c){i(r);var l=Reflect.ownKeys(c).filter(m=>{var g=n.get(m);return g===void 0||g.v!==Ye});for(var[u,f]of n)f.v!==Ye&&!(u in c)&&l.push(u);return l},setPrototypeOf(){Xo()}})}var Fr,Hs,Ds,Rs;function ml(){if(Fr===void 0){Fr=window,Hs=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;Ds=kn(t,"firstChild").get,Rs=kn(t,"nextSibling").get,jr(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),jr(n)&&(n.__t=void 0)}}function Dt(e=""){return document.createTextNode(e)}function Vn(e){return Ds.call(e)}function An(e){return Rs.call(e)}function d(e,t){return Vn(e)}function Ce(e,t=!1){{var n=Vn(e);return n instanceof Comment&&n.data===""?An(n):n}}function h(e,t=1,n=!1){let a=e;for(;t--;)a=An(a);return a}function gl(e){e.textContent=""}function Os(){return!1}function Qa(e){var t=ce,n=we;tt(null),It(null);try{return e()}finally{tt(t),It(n)}}function _l(e){we===null&&(ce===null&&Wo(),Uo()),gn&&qo()}function yl(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function Nt(e,t,n){var a=we;a!==null&&(a.f&ot)!==0&&(e|=ot);var r={ctx:vt,deps:null,nodes_start:null,nodes_end:null,f:e|at|yt,first:null,fn:t,last:null,next:null,parent:a,b:a&&a.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{Sn(r),r.f|=Ya}catch(c){throw nt(r),c}else t!==null&&Zt(r);var s=r;if(n&&s.deps===null&&s.teardown===null&&s.nodes_start===null&&s.first===s.last&&(s.f&pn)===0&&(s=s.first,(e&Ot)!==0&&(e&cn)!==0&&s!==null&&(s.f|=cn)),s!==null&&(s.parent=a,a!==null&&yl(s,a),ce!==null&&(ce.f&Ue)!==0&&(e&en)===0)){var o=ce;(o.effects??=[]).push(s)}return r}function bn(){return ce!==null&&!St}function zs(e){const t=Nt(Wa,null,!1);return Xe(t,Ve),t.teardown=e,t}function Et(e){_l();var t=we.f,n=!ce&&(t&zt)!==0&&(t&Ya)===0;if(n){var a=vt;(a.e??=[]).push(e)}else return js(e)}function js(e){return Nt(Ua|Bo,e,!1)}function wl(e){Tt.ensure();const t=Nt(en|pn,e,!0);return(n={})=>new Promise(a=>{n.outro?ln(t,()=>{nt(t),a(void 0)}):(nt(t),a(void 0))})}function kl(e){return Nt(Ua,e,!1)}function xl(e){return Nt(Va|pn,e,!0)}function Ns(e,t=0){return Nt(Wa|t,e,!0)}function B(e,t=[],n=[],a=[]){cl(a,t,n,r=>{Nt(Wa,()=>e(...r.map(i)),!0)})}function Za(e,t=0){var n=Nt(Ot|t,e,!0);return n}function ct(e){return Nt(zt|pn,e,!0)}function Bs(e){var t=e.teardown;if(t!==null){const n=gn,a=ce;Lr(!0),tt(null);try{t.call(null)}finally{Lr(n),tt(a)}}}function Fs(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const r=n.ac;r!==null&&Qa(()=>{r.abort(sn)});var a=n.next;(n.f&en)!==0?n.parent=null:nt(n,t),n=a}}function bl(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&zt)===0&&nt(t),t=n}}function nt(e,t=!0){var n=!1;(t||(e.f&ks)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(Tl(e.nodes_start,e.nodes_end),n=!0),Fs(e,t&&!n),Gn(e,0),Xe(e,qt);var a=e.transitions;if(a!==null)for(const s of a)s.stop();Bs(e);var r=e.parent;r!==null&&r.first!==null&&Ls(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function Tl(e,t){for(;e!==null;){var n=e===t?null:An(e);e.remove(),e=n}}function Ls(e){var t=e.parent,n=e.prev,a=e.next;n!==null&&(n.next=a),a!==null&&(a.prev=n),t!==null&&(t.first===e&&(t.first=a),t.last===e&&(t.last=n))}function ln(e,t,n=!0){var a=[];Ja(e,a,!0),qs(a,()=>{n&&nt(e),t&&t()})}function qs(e,t){var n=e.length;if(n>0){var a=()=>--n||t();for(var r of e)r.out(a)}else t()}function Ja(e,t,n){if((e.f&ot)===0){if(e.f^=ot,e.transitions!==null)for(const o of e.transitions)(o.is_global||n)&&t.push(o);for(var a=e.first;a!==null;){var r=a.next,s=(a.f&cn)!==0||(a.f&zt)!==0&&(e.f&Ot)!==0;Ja(a,t,s?n:!1),a=r}}}function $a(e){Us(e,!0)}function Us(e,t){if((e.f&ot)!==0){e.f^=ot,(e.f&Ve)===0&&(Xe(e,at),Zt(e));for(var n=e.first;n!==null;){var a=n.next,r=(n.f&cn)!==0||(n.f&zt)!==0;Us(n,r?t:!1),n=a}if(e.transitions!==null)for(const s of e.transitions)(s.is_global||t)&&s.in()}}function Ws(e,t){for(var n=e.nodes_start,a=e.nodes_end;n!==null;){var r=n===a?null:An(n);t.append(n),n=r}}let Yt=!1;function Xn(e){Yt=e}let gn=!1;function Lr(e){gn=e}let ce=null,St=!1;function tt(e){ce=e}let we=null;function It(e){we=e}let Pt=null;function Ys(e){ce!==null&&(Pt===null?Pt=[e]:Pt.push(e))}let Qe=null,st=0,lt=null;function Sl(e){lt=e}let Vs=1,Tn=0,Kt=Tn;function qr(e){Kt=e}function Xs(){return++Vs}function En(e){var t=e.f;if((t&at)!==0)return!0;if(t&Ue&&(e.f&=~Qt),(t&jt)!==0){var n=e.deps;if(n!==null)for(var a=n.length,r=0;r<a;r++){var s=n[r];if(En(s)&&As(s),s.wv>e.wv)return!0}(t&yt)!==0&&ut===null&&Xe(e,Ve)}return!1}function Gs(e,t,n=!0){var a=e.reactions;if(a!==null&&!Pt?.includes(e))for(var r=0;r<a.length;r++){var s=a[r];(s.f&Ue)!==0?Gs(s,t,!1):t===s&&(n?Xe(s,at):(s.f&Ve)!==0&&Xe(s,jt),Zt(s))}}function Ks(e){var t=Qe,n=st,a=lt,r=ce,s=Pt,o=vt,c=St,l=Kt,u=e.f;Qe=null,st=0,lt=null,ce=(u&(zt|en))===0?e:null,Pt=null,un(e.ctx),St=!1,Kt=++Tn,e.ac!==null&&(Qa(()=>{e.ac.abort(sn)}),e.ac=null);try{e.f|=Ta;var f=e.fn,m=f(),g=e.deps;if(Qe!==null){var _;if(Gn(e,st),g!==null&&st>0)for(g.length=st+Qe.length,_=0;_<Qe.length;_++)g[st+_]=Qe[_];else e.deps=g=Qe;if(Yt&&bn()&&(e.f&yt)!==0)for(_=st;_<g.length;_++)(g[_].reactions??=[]).push(e)}else g!==null&&st<g.length&&(Gn(e,st),g.length=st);if(Ts()&&lt!==null&&!St&&g!==null&&(e.f&(Ue|jt|at))===0)for(_=0;_<lt.length;_++)Gs(lt[_],e);return r!==null&&r!==e&&(Tn++,lt!==null&&(a===null?a=lt:a.push(...lt))),(e.f&Ut)!==0&&(e.f^=Ut),m}catch(A){return Ss(A)}finally{e.f^=Ta,Qe=t,st=n,lt=a,ce=r,Pt=s,un(o),St=c,Kt=l}}function Il(e,t){let n=t.reactions;if(n!==null){var a=Ho.call(n,e);if(a!==-1){var r=n.length-1;r===0?n=t.reactions=null:(n[a]=n[r],n.pop())}}n===null&&(t.f&Ue)!==0&&(Qe===null||!Qe.includes(t))&&(Xe(t,jt),(t.f&yt)!==0&&(t.f^=yt,t.f&=~Qt),Ms(t),Gn(t,0))}function Gn(e,t){var n=e.deps;if(n!==null)for(var a=t;a<n.length;a++)Il(e,n[a])}function Sn(e){var t=e.f;if((t&qt)===0){Xe(e,Ve);var n=we,a=Yt;we=e,Yt=!0;try{(t&(Ot|No))!==0?bl(e):Fs(e),Bs(e);var r=Ks(e);e.teardown=typeof r=="function"?r:null,e.wv=Vs;var s;ba&&Jo&&(e.f&at)!==0&&e.deps}finally{Yt=a,we=n}}}function i(e){var t=e.f,n=(t&Ue)!==0;if(ce!==null&&!St){var a=we!==null&&(we.f&qt)!==0;if(!a&&!Pt?.includes(e)){var r=ce.deps;if((ce.f&Ta)!==0)e.rv<Tn&&(e.rv=Tn,Qe===null&&r!==null&&r[st]===e?st++:Qe===null?Qe=[e]:Qe.includes(e)||Qe.push(e));else{(ce.deps??=[]).push(e);var s=e.reactions;s===null?e.reactions=[ce]:s.includes(ce)||s.push(ce)}}}if(gn){if(Wt.has(e))return Wt.get(e);if(n){var o=e,c=o.v;return((o.f&Ve)===0&&o.reactions!==null||Zs(o))&&(c=Ka(o)),Wt.set(o,c),c}}else n&&(!ut?.has(e)||Se?.is_fork&&!bn())&&(o=e,En(o)&&As(o),Yt&&bn()&&(o.f&yt)===0&&Qs(o));if(ut?.has(e))return ut.get(e);if((e.f&Ut)!==0)throw e.v;return e.v}function Qs(e){if(e.deps!==null){e.f^=yt;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&Ue)!==0&&(t.f&yt)===0&&Qs(t)}}function Zs(e){if(e.v===Ye)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(Wt.has(t)||(t.f&Ue)!==0&&Zs(t))return!0;return!1}function Js(e){var t=St;try{return St=!0,e()}finally{St=t}}const Cl=-7169;function Xe(e,t){e.f=e.f&Cl|t}const $s=new Set,Ca=new Set;function Ml(e,t,n,a={}){function r(s){if(a.capture||_n.call(t,s),!s.cancelBubble)return Qa(()=>n?.call(this,s))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?mn(()=>{t.addEventListener(e,r,a)}):t.addEventListener(e,r,a),r}function Al(e,t,n,a,r){var s={capture:a,passive:r},o=Ml(e,t,n,s);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&zs(()=>{t.removeEventListener(e,o,s)})}function Je(e){for(var t=0;t<e.length;t++)$s.add(e[t]);for(var n of Ca)n(e)}let Ur=null;function _n(e){var t=this,n=t.ownerDocument,a=e.type,r=e.composedPath?.()||[],s=r[0]||e.target;Ur=e;var o=0,c=Ur===e&&e.__root;if(c){var l=r.indexOf(c);if(l!==-1&&(t===document||t===window)){e.__root=t;return}var u=r.indexOf(t);if(u===-1)return;l<=u&&(o=l)}if(s=r[o]||e.target,s!==t){Do(e,"currentTarget",{configurable:!0,get(){return s||n}});var f=ce,m=we;tt(null),It(null);try{for(var g,_=[];s!==null;){var A=s.assignedSlot||s.parentNode||s.host||null;try{var L=s["__"+a];L!=null&&(!s.disabled||e.target===s)&&L.call(s,e)}catch(x){g?_.push(x):g=x}if(e.cancelBubble||A===t||A===null)break;s=A}if(g){for(let x of _)queueMicrotask(()=>{throw x});throw g}}finally{e.__root=t,delete e.currentTarget,tt(f),It(m)}}}function El(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Kn(e,t){var n=we;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function E(e,t){var n=(t&Ao)!==0,a=(t&Eo)!==0,r,s=!e.startsWith("<!>");return()=>{r===void 0&&(r=El(s?e:"<!>"+e),n||(r=Vn(r)));var o=a||Hs?document.importNode(r,!0):r.cloneNode(!0);if(n){var c=Vn(o),l=o.lastChild;Kn(c,l)}else Kn(o,o);return o}}function Wr(e=""){{var t=Dt(e+"");return Kn(t,t),t}}function Le(){var e=document.createDocumentFragment(),t=document.createComment(""),n=Dt();return e.append(t,n),Kn(t,n),e}function S(e,t){e!==null&&e.before(t)}const Pl=["touchstart","touchmove"];function Hl(e){return Pl.includes(e)}function w(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function Dl(e,t){return Rl(e,t)}const an=new Map;function Rl(e,{target:t,anchor:n,props:a={},events:r,context:s,intro:o=!0}){ml();var c=new Set,l=m=>{for(var g=0;g<m.length;g++){var _=m[g];if(!c.has(_)){c.add(_);var A=Hl(_);t.addEventListener(_,_n,{passive:A});var L=an.get(_);L===void 0?(document.addEventListener(_,_n,{passive:A}),an.set(_,1)):an.set(_,L+1)}}};l(qa($s)),Ca.add(l);var u=void 0,f=wl(()=>{var m=n??t.appendChild(Dt());return rl(m,{pending:()=>{}},g=>{if(s){Oe({});var _=vt;_.c=s}r&&(a.$$events=r),u=e(g,a)||{},s&&ze()}),()=>{for(var g of c){t.removeEventListener(g,_n);var _=an.get(g);--_===0?(document.removeEventListener(g,_n),an.delete(g)):an.set(g,_)}Ca.delete(l),m!==n&&m.parentNode?.removeChild(m)}});return Ol.set(u,f),u}let Ol=new WeakMap;class zl{anchor;#e=new Map;#t=new Map;#a=new Map;#n=new Set;#l=!0;constructor(t,n=!0){this.anchor=t,this.#l=n}#s=()=>{var t=Se;if(this.#e.has(t)){var n=this.#e.get(t),a=this.#t.get(n);if(a)$a(a),this.#n.delete(n);else{var r=this.#a.get(n);r&&(this.#t.set(n,r.effect),this.#a.delete(n),r.fragment.lastChild.remove(),this.anchor.before(r.fragment),a=r.effect)}for(const[s,o]of this.#e){if(this.#e.delete(s),s===t)break;const c=this.#a.get(o);c&&(nt(c.effect),this.#a.delete(o))}for(const[s,o]of this.#t){if(s===n||this.#n.has(s))continue;const c=()=>{if(Array.from(this.#e.values()).includes(s)){var u=document.createDocumentFragment();Ws(o,u),u.append(Dt()),this.#a.set(s,{effect:o,fragment:u})}else nt(o);this.#n.delete(s),this.#t.delete(s)};this.#l||!a?(this.#n.add(s),ln(o,c,!1)):c()}}};#r=t=>{this.#e.delete(t);const n=Array.from(this.#e.values());for(const[a,r]of this.#a)n.includes(a)||(nt(r.effect),this.#a.delete(a))};ensure(t,n){var a=Se,r=Os();if(n&&!this.#t.has(t)&&!this.#a.has(t))if(r){var s=document.createDocumentFragment(),o=Dt();s.append(o),this.#a.set(t,{effect:ct(()=>n(o)),fragment:s})}else this.#t.set(t,ct(()=>n(this.anchor)));if(this.#e.set(a,t),r){for(const[c,l]of this.#t)c===t?a.skipped_effects.delete(l):a.skipped_effects.add(l);for(const[c,l]of this.#a)c===t?a.skipped_effects.delete(l.effect):a.skipped_effects.add(l.effect);a.oncommit(this.#s),a.ondiscard(this.#r)}else this.#s()}}function j(e,t,n=!1){var a=new zl(e),r=n?cn:0;function s(o,c){a.ensure(o,c)}Za(()=>{var o=!1;t((c,l=!0)=>{o=!0,s(l,c)}),o||s(!1,null)},r)}const Yr=[...` 	
\r\fÂ \v\uFEFF`];function jl(e,t,n){var a=e==null?"":""+e;if(t&&(a=a?a+" "+t:t),n){for(var r in n)if(n[r])a=a?a+" "+r:r;else if(a.length)for(var s=r.length,o=0;(o=a.indexOf(r,o))>=0;){var c=o+s;(o===0||Yr.includes(a[o-1]))&&(c===a.length||Yr.includes(a[c]))?a=(o===0?"":a.substring(0,o))+a.substring(c+1):o=c}}return a===""?null:a}function Nl(e,t){return e==null?null:String(e)}function De(e,t,n,a,r,s){var o=e.__className;if(o!==n||o===void 0){var c=jl(n,a,s);c==null?e.removeAttribute("class"):e.className=c,e.__className=n}else if(s&&r!==s)for(var l in s){var u=!!s[l];(r==null||u!==!!r[l])&&e.classList.toggle(l,u)}return s}function dt(e,t,n,a){var r=e.__style;if(r!==t){var s=Nl(t);s==null?e.removeAttribute("style"):e.style.cssText=s,e.__style=t}return a}const Bl=Symbol("is custom element"),Fl=Symbol("is html");function z(e,t,n,a){var r=Ll(e);r[t]!==(r[t]=n)&&(t==="loading"&&(e[Fo]=n),n==null?e.removeAttribute(t):typeof n!="string"&&ql(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function Ll(e){return e.__attributes??={[Bl]:e.nodeName.includes("-"),[Fl]:e.namespaceURI===Po}}var Vr=new Map;function ql(e){var t=e.getAttribute("is")||e.nodeName,n=Vr.get(t);if(n)return n;Vr.set(t,n=[]);for(var a,r=e,s=Element.prototype;s!==r;){a=Ro(r);for(var o in a)a[o].set&&n.push(o);r=ys(r)}return n}function Xr(e,t){return e===t||e?.[Ln]===t}function Ul(e={},t,n,a){return kl(()=>{var r,s;return Ns(()=>{r=s,s=[],Js(()=>{e!==n(...s)&&(t(e,...s),r&&Xr(n(...r),e)&&t(null,...r))})}),()=>{mn(()=>{s&&Xr(n(...s),e)&&t(null,...s)})}}),e}function Vt(e,t,n,a){var r=a,s=!0,o=()=>(s&&(s=!1,r=a),r),c;c=e[t],c===void 0&&a!==void 0&&(c=o());var l;return l=()=>{var u=e[t];return u===void 0?o():(s=!0,u)},l}function Fe(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Wl=typeof Symbol=="function"&&Symbol.observable||"@@observable",Gr=Wl,ya=()=>Math.random().toString(36).substring(7).split("").join("."),Yl={INIT:`@@redux/INIT${ya()}`,REPLACE:`@@redux/REPLACE${ya()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${ya()}`},Qn=Yl;function er(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function ei(e,t,n){if(typeof e!="function")throw new Error(Fe(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Fe(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Fe(1));return n(ei)(e,t)}let a=e,r=t,s=new Map,o=s,c=0,l=!1;function u(){o===s&&(o=new Map,s.forEach((x,k)=>{o.set(k,x)}))}function f(){if(l)throw new Error(Fe(3));return r}function m(x){if(typeof x!="function")throw new Error(Fe(4));if(l)throw new Error(Fe(5));let k=!0;u();const D=c++;return o.set(D,x),function(){if(k){if(l)throw new Error(Fe(6));k=!1,u(),o.delete(D),s=null}}}function g(x){if(!er(x))throw new Error(Fe(7));if(typeof x.type>"u")throw new Error(Fe(8));if(typeof x.type!="string")throw new Error(Fe(17));if(l)throw new Error(Fe(9));try{l=!0,r=a(r,x)}finally{l=!1}return(s=o).forEach(D=>{D()}),x}function _(x){if(typeof x!="function")throw new Error(Fe(10));a=x,g({type:Qn.REPLACE})}function A(){const x=m;return{subscribe(k){if(typeof k!="object"||k===null)throw new Error(Fe(11));function D(){const P=k;P.next&&P.next(f())}return D(),{unsubscribe:x(D)}},[Gr](){return this}}}return g({type:Qn.INIT}),{dispatch:g,subscribe:m,getState:f,replaceReducer:_,[Gr]:A}}function Vl(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:Qn.INIT})>"u")throw new Error(Fe(12));if(typeof n(void 0,{type:Qn.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Fe(13))})}function Xl(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(n[o]=e[o])}const a=Object.keys(n);let r;try{Vl(n)}catch(s){r=s}return function(o={},c){if(r)throw r;let l=!1;const u={};for(let f=0;f<a.length;f++){const m=a[f],g=n[m],_=o[m],A=g(_,c);if(typeof A>"u")throw c&&c.type,new Error(Fe(14));u[m]=A,l=l||A!==_}return l=l||a.length!==Object.keys(o).length,l?u:o}}function Zn(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...a)=>t(n(...a)))}function Gl(...e){return t=>(n,a)=>{const r=t(n,a);let s=()=>{throw new Error(Fe(15))};const o={getState:r.getState,dispatch:(l,...u)=>s(l,...u)},c=e.map(l=>l(o));return s=Zn(...c)(r.dispatch),{...r,dispatch:s}}}function Kl(e){return er(e)&&"type"in e&&typeof e.type=="string"}var ti=Symbol.for("immer-nothing"),Kr=Symbol.for("immer-draftable"),Ze=Symbol.for("immer-state");function _t(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var it=Object,vn=it.getPrototypeOf,Jn="constructor",ra="prototype",Ma="configurable",$n="enumerable",qn="writable",In="value",Rt=e=>!!e&&!!e[Ze];function Ct(e){return e?ni(e)||sa(e)||!!e[Kr]||!!e[Jn]?.[Kr]||ia(e)||oa(e):!1}var Ql=it[ra][Jn].toString(),Qr=new WeakMap;function ni(e){if(!e||!tr(e))return!1;const t=vn(e);if(t===null||t===it[ra])return!0;const n=it.hasOwnProperty.call(t,Jn)&&t[Jn];if(n===Object)return!0;if(!rn(n))return!1;let a=Qr.get(n);return a===void 0&&(a=Function.toString.call(n),Qr.set(n,a)),a===Ql}function Pn(e,t,n=!0){Hn(e)===0?(n?Reflect.ownKeys(e):it.keys(e)).forEach(r=>{t(r,e[r],e)}):e.forEach((a,r)=>t(r,a,e))}function Hn(e){const t=e[Ze];return t?t.type_:sa(e)?1:ia(e)?2:oa(e)?3:0}var Zr=(e,t,n=Hn(e))=>n===2?e.has(t):it[ra].hasOwnProperty.call(e,t),Aa=(e,t,n=Hn(e))=>n===2?e.get(t):e[t],ea=(e,t,n,a=Hn(e))=>{a===2?e.set(t,n):a===3?e.add(n):e[t]=n};function Zl(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var sa=Array.isArray,ia=e=>e instanceof Map,oa=e=>e instanceof Set,tr=e=>typeof e=="object",rn=e=>typeof e=="function",wa=e=>typeof e=="boolean",At=e=>e.copy_||e.base_,nr=e=>e.modified_?e.copy_:e.base_;function Ea(e,t){if(ia(e))return new Map(e);if(oa(e))return new Set(e);if(sa(e))return Array[ra].slice.call(e);const n=ni(e);if(t===!0||t==="class_only"&&!n){const a=it.getOwnPropertyDescriptors(e);delete a[Ze];let r=Reflect.ownKeys(a);for(let s=0;s<r.length;s++){const o=r[s],c=a[o];c[qn]===!1&&(c[qn]=!0,c[Ma]=!0),(c.get||c.set)&&(a[o]={[Ma]:!0,[qn]:!0,[$n]:c[$n],[In]:e[o]})}return it.create(vn(e),a)}else{const a=vn(e);if(a!==null&&n)return{...e};const r=it.create(a);return it.assign(r,e)}}function ar(e,t=!1){return la(e)||Rt(e)||(Hn(e)>1&&it.defineProperties(e,{set:zn,add:zn,clear:zn,delete:zn}),it.freeze(e),t&&Pn(e,(n,a)=>{ar(a,!0)},!1)),e}function Jl(){_t(2)}var zn={[In]:Jl};function la(e){return e===null||!tr(e)?!0:it.isFrozen(e)}var ta="MapSet",Pa="Patches",ai={};function hn(e){const t=ai[e];return t||_t(0,e),t}var $l=e=>!!ai[e],Cn,ri=()=>Cn,ec=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:$l(ta)?hn(ta):void 0});function Jr(e,t){t&&(e.patchPlugin_=hn(Pa),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Ha(e){Da(e),e.drafts_.forEach(tc),e.drafts_=null}function Da(e){e===Cn&&(Cn=e.parent_)}var $r=e=>Cn=ec(Cn,e);function tc(e){const t=e[Ze];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function es(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];if(e!==void 0&&e!==n){n[Ze].modified_&&(Ha(t),_t(4)),Ct(e)&&(e=ts(t,e));const{patchPlugin_:r}=t;r&&r.generateReplacementPatches_(n[Ze].base_,e,t)}else e=ts(t,n);return nc(t,e,!0),Ha(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==ti?e:void 0}function ts(e,t){if(la(t))return t;const n=t[Ze];if(!n)return rr(t,e.handledSet_,e);if(!ca(n,e))return t;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:a}=n;if(a)for(;a.length>0;)a.pop()(e);oi(n,e)}return n.copy_}function nc(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&ar(t,n)}function si(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var ca=(e,t)=>e.scope_===t,ac=[];function ii(e,t,n,a){const r=At(e),s=e.type_;if(a!==void 0&&Aa(r,a,s)===t){ea(r,a,n,s);return}if(!e.draftLocations_){const c=e.draftLocations_=new Map;Pn(r,(l,u)=>{if(Rt(u)){const f=c.get(u)||[];f.push(l),c.set(u,f)}})}const o=e.draftLocations_.get(t)??ac;for(const c of o)ea(r,c,n,s)}function rc(e,t,n){e.callbacks_.push(function(r){const s=t;if(!s||!ca(s,r))return;r.mapSetPlugin_?.fixSetContents(s);const o=nr(s);ii(e,s.draft_??s,o,n),oi(s,r)})}function oi(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||(e.assigned_?.size??0)>0)){const{patchPlugin_:a}=t;if(a){const r=a.getPath(e);r&&a.generatePatches_(e,r,t)}si(e)}}function sc(e,t,n){const{scope_:a}=e;if(Rt(n)){const r=n[Ze];ca(r,a)&&r.callbacks_.push(function(){Un(e);const o=nr(r);ii(e,n,o,t)})}else Ct(n)&&e.callbacks_.push(function(){const s=At(e);Aa(s,t,e.type_)===n&&a.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&rr(Aa(e.copy_,t,e.type_),a.handledSet_,a)})}function rr(e,t,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||Rt(e)||t.has(e)||!Ct(e)||la(e)||(t.add(e),Pn(e,(a,r)=>{if(Rt(r)){const s=r[Ze];if(ca(s,n)){const o=nr(s);ea(e,a,o,e.type_),si(s)}}else Ct(r)&&rr(r,t,n)})),e}function ic(e,t){const n=sa(e),a={type_:n?1:0,scope_:t?t.scope_:ri(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let r=a,s=sr;n&&(r=[a],s=Mn);const{revoke:o,proxy:c}=Proxy.revocable(r,s);return a.draft_=c,a.revoke_=o,[c,a]}var sr={get(e,t){if(t===Ze)return e;const n=At(e);if(!Zr(n,t,e.type_))return oc(e,n,t);const a=n[t];if(e.finalized_||!Ct(a))return a;if(a===ka(e.base_,t)){Un(e);const r=e.type_===1?+t:t,s=Oa(e.scope_,a,e,r);return e.copy_[r]=s}return a},has(e,t){return t in At(e)},ownKeys(e){return Reflect.ownKeys(At(e))},set(e,t,n){const a=li(At(e),t);if(a?.set)return a.set.call(e.draft_,n),!0;if(!e.modified_){const r=ka(At(e),t),s=r?.[Ze];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_.set(t,!1),!0;if(Zl(n,r)&&(n!==void 0||Zr(e.base_,t,e.type_)))return!0;Un(e),Ra(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_.set(t,!0),sc(e,t,n)),!0},deleteProperty(e,t){return Un(e),ka(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),Ra(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=At(e),a=Reflect.getOwnPropertyDescriptor(n,t);return a&&{[qn]:!0,[Ma]:e.type_!==1||t!=="length",[$n]:a[$n],[In]:n[t]}},defineProperty(){_t(11)},getPrototypeOf(e){return vn(e.base_)},setPrototypeOf(){_t(12)}},Mn={};Pn(sr,(e,t)=>{Mn[e]=function(){const n=arguments;return n[0]=n[0][0],t.apply(this,n)}});Mn.deleteProperty=function(e,t){return Mn.set.call(this,e,t,void 0)};Mn.set=function(e,t,n){return sr.set.call(this,e[0],t,n,e[0])};function ka(e,t){const n=e[Ze];return(n?At(n):e)[t]}function oc(e,t,n){const a=li(t,n);return a?In in a?a[In]:a.get?.call(e.draft_):void 0}function li(e,t){if(!(t in e))return;let n=vn(e);for(;n;){const a=Object.getOwnPropertyDescriptor(n,t);if(a)return a;n=vn(n)}}function Ra(e){e.modified_||(e.modified_=!0,e.parent_&&Ra(e.parent_))}function Un(e){e.copy_||(e.assigned_=new Map,e.copy_=Ea(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var lc=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(t,n,a)=>{if(rn(t)&&!rn(n)){const s=n;n=t;const o=this;return function(l=s,...u){return o.produce(l,f=>n.call(this,f,...u))}}rn(n)||_t(6),a!==void 0&&!rn(a)&&_t(7);let r;if(Ct(t)){const s=$r(this),o=Oa(s,t,void 0);let c=!0;try{r=n(o),c=!1}finally{c?Ha(s):Da(s)}return Jr(s,a),es(r,s)}else if(!t||!tr(t)){if(r=n(t),r===void 0&&(r=t),r===ti&&(r=void 0),this.autoFreeze_&&ar(r,!0),a){const s=[],o=[];hn(Pa).generateReplacementPatches_(t,r,{patches_:s,inversePatches_:o}),a(s,o)}return r}else _t(1,t)},this.produceWithPatches=(t,n)=>{if(rn(t))return(o,...c)=>this.produceWithPatches(o,l=>t(l,...c));let a,r;return[this.produce(t,n,(o,c)=>{a=o,r=c}),a,r]},wa(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),wa(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),wa(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Ct(e)||_t(8),Rt(e)&&(e=cc(e));const t=$r(this),n=Oa(t,e,void 0);return n[Ze].isManual_=!0,Da(t),n}finishDraft(e,t){const n=e&&e[Ze];(!n||!n.isManual_)&&_t(9);const{scope_:a}=n;return Jr(a,t),es(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const r=t[n];if(r.path.length===0&&r.op==="replace"){e=r.value;break}}n>-1&&(t=t.slice(n+1));const a=hn(Pa).applyPatches_;return Rt(e)?a(e,t):this.produce(e,r=>a(r,t))}};function Oa(e,t,n,a){const[r,s]=ia(t)?hn(ta).proxyMap_(t,n):oa(t)?hn(ta).proxySet_(t,n):ic(t,n);return(n?.scope_??ri()).drafts_.push(r),s.callbacks_=n?.callbacks_??[],s.key_=a,n&&a!==void 0?rc(n,s,a):s.callbacks_.push(function(l){l.mapSetPlugin_?.fixSetContents(s);const{patchPlugin_:u}=l;s.modified_&&u&&u.generatePatches_(s,[],l)}),r}function cc(e){return Rt(e)||_t(10,e),ci(e)}function ci(e){if(!Ct(e)||la(e))return e;const t=e[Ze];let n,a=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Ea(e,t.scope_.immer_.useStrictShallowCopy_),a=t.scope_.immer_.shouldUseStrictIteration()}else n=Ea(e,!0);return Pn(n,(r,s)=>{ea(n,r,ci(s))},a),t&&(t.finalized_=!1),n}var uc=new lc,ui=uc.produce;function di(e){return({dispatch:n,getState:a})=>r=>s=>typeof s=="function"?s(n,a,e):r(s)}var dc=di(),fc=di,vc=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Zn:Zn.apply(null,arguments)};function ns(e,t){function n(...a){if(t){let r=t(...a);if(!r)throw new Error(Ht(0));return{type:e,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:e,payload:a[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=a=>Kl(a)&&a.type===e,n}var fi=class yn extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,yn.prototype)}static get[Symbol.species](){return yn}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new yn(...t[0].concat(this)):new yn(...t.concat(this))}};function as(e){return Ct(e)?ui(e,()=>{}):e}function jn(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function hc(e){return typeof e=="boolean"}var pc=()=>function(t){const{thunk:n=!0,immutableCheck:a=!0,serializableCheck:r=!0,actionCreatorCheck:s=!0}=t??{};let o=new fi;return n&&(hc(n)?o.push(dc):o.push(fc(n.extraArgument))),o},mc="RTK_autoBatch",rs=e=>t=>{setTimeout(t,e)},gc=(e={type:"raf"})=>t=>(...n)=>{const a=t(...n);let r=!0,s=!1,o=!1;const c=new Set,l=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:rs(10):e.type==="callback"?e.queueNotification:rs(e.timeout),u=()=>{o=!1,s&&(s=!1,c.forEach(f=>f()))};return Object.assign({},a,{subscribe(f){const m=()=>r&&f(),g=a.subscribe(m);return c.add(f),()=>{g(),c.delete(f)}},dispatch(f){try{return r=!f?.meta?.[mc],s=!r,s&&(o||(o=!0,l(u))),a.dispatch(f)}finally{r=!0}}})},_c=e=>function(n){const{autoBatch:a=!0}=n??{};let r=new fi(e);return a&&r.push(gc(typeof a=="object"?a:void 0)),r};function yc(e){const t=pc(),{reducer:n=void 0,middleware:a,devTools:r=!0,preloadedState:s=void 0,enhancers:o=void 0}=e||{};let c;if(typeof n=="function")c=n;else if(er(n))c=Xl(n);else throw new Error(Ht(1));let l;typeof a=="function"?l=a(t):l=t();let u=Zn;r&&(u=vc({trace:!1,...typeof r=="object"&&r}));const f=Gl(...l),m=_c(f);let g=typeof o=="function"?o(m):m();const _=u(...g);return ei(c,s,_)}function vi(e){const t={},n=[];let a;const r={addCase(s,o){const c=typeof s=="string"?s:s.type;if(!c)throw new Error(Ht(28));if(c in t)throw new Error(Ht(29));return t[c]=o,r},addAsyncThunk(s,o){return o.pending&&(t[s.pending.type]=o.pending),o.rejected&&(t[s.rejected.type]=o.rejected),o.fulfilled&&(t[s.fulfilled.type]=o.fulfilled),o.settled&&n.push({matcher:s.settled,reducer:o.settled}),r},addMatcher(s,o){return n.push({matcher:s,reducer:o}),r},addDefaultCase(s){return a=s,r}};return e(r),[t,n,a]}function wc(e){return typeof e=="function"}function kc(e,t){let[n,a,r]=vi(t),s;if(wc(e))s=()=>as(e());else{const c=as(e);s=()=>c}function o(c=s(),l){let u=[n[l.type],...a.filter(({matcher:f})=>f(l)).map(({reducer:f})=>f)];return u.filter(f=>!!f).length===0&&(u=[r]),u.reduce((f,m)=>{if(m)if(Rt(f)){const _=m(f,l);return _===void 0?f:_}else{if(Ct(f))return ui(f,g=>m(g,l));{const g=m(f,l);if(g===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return g}}return f},c)}return o.getInitialState=s,o}var xc=Symbol.for("rtk-slice-createasyncthunk");function bc(e,t){return`${e}/${t}`}function Tc({creators:e}={}){const t=e?.asyncThunk?.[xc];return function(a){const{name:r,reducerPath:s=r}=a;if(!r)throw new Error(Ht(11));const o=(typeof a.reducers=="function"?a.reducers(Ic()):a.reducers)||{},c=Object.keys(o),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(I,P){const K=typeof I=="string"?I:I.type;if(!K)throw new Error(Ht(12));if(K in l.sliceCaseReducersByType)throw new Error(Ht(13));return l.sliceCaseReducersByType[K]=P,u},addMatcher(I,P){return l.sliceMatchers.push({matcher:I,reducer:P}),u},exposeAction(I,P){return l.actionCreators[I]=P,u},exposeCaseReducer(I,P){return l.sliceCaseReducersByName[I]=P,u}};c.forEach(I=>{const P=o[I],K={reducerName:I,type:bc(r,I),createNotation:typeof a.reducers=="function"};Mc(P)?Ec(K,P,u,t):Cc(K,P,u)});function f(){const[I={},P=[],K=void 0]=typeof a.extraReducers=="function"?vi(a.extraReducers):[a.extraReducers],q={...I,...l.sliceCaseReducersByType};return kc(a.initialState,W=>{for(let G in q)W.addCase(G,q[G]);for(let G of l.sliceMatchers)W.addMatcher(G.matcher,G.reducer);for(let G of P)W.addMatcher(G.matcher,G.reducer);K&&W.addDefaultCase(K)})}const m=I=>I,g=new Map,_=new WeakMap;let A;function L(I,P){return A||(A=f()),A(I,P)}function x(){return A||(A=f()),A.getInitialState()}function k(I,P=!1){function K(W){let G=W[I];return typeof G>"u"&&P&&(G=jn(_,K,x)),G}function q(W=m){const G=jn(g,P,()=>new WeakMap);return jn(G,W,()=>{const Z={};for(const[re,ue]of Object.entries(a.selectors??{}))Z[re]=Sc(ue,W,()=>jn(_,W,x),P);return Z})}return{reducerPath:I,getSelectors:q,get selectors(){return q(K)},selectSlice:K}}const D={name:r,reducer:L,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:x,...k(s),injectInto(I,{reducerPath:P,...K}={}){const q=P??s;return I.inject({reducerPath:q,reducer:L},K),{...D,...k(q,!0)}}};return D}}function Sc(e,t,n,a){function r(s,...o){let c=t(s);return typeof c>"u"&&a&&(c=n()),e(c,...o)}return r.unwrapped=e,r}var hi=Tc();function Ic(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function Cc({type:e,reducerName:t,createNotation:n},a,r){let s,o;if("reducer"in a){if(n&&!Ac(a))throw new Error(Ht(17));s=a.reducer,o=a.prepare}else s=a;r.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?ns(e,o):ns(e))}function Mc(e){return e._reducerDefinitionType==="asyncThunk"}function Ac(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Ec({type:e,reducerName:t},n,a,r){if(!r)throw new Error(Ht(18));const{payloadCreator:s,fulfilled:o,pending:c,rejected:l,settled:u,options:f}=n,m=r(e,s,f);a.exposeAction(t,m),o&&a.addCase(m.fulfilled,o),c&&a.addCase(m.pending,c),l&&a.addCase(m.rejected,l),u&&a.addMatcher(m.settled,u),a.exposeCaseReducer(t,{fulfilled:o||Nn,pending:c||Nn,rejected:l||Nn,settled:u||Nn})}function Nn(){}function Ht(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}const pi={quinn:{level1:{level:1,hp:8,maxHp:8,ac:17,surgeValue:4,attackBonus:6,damage:2},level2:{level:2,hp:10,maxHp:10,ac:18,surgeValue:5,attackBonus:7,damage:2}},vistra:{level1:{level:1,hp:10,maxHp:10,ac:18,surgeValue:5,attackBonus:8,damage:2},level2:{level:2,hp:12,maxHp:12,ac:19,surgeValue:6,attackBonus:9,damage:2}},keyleth:{level1:{level:1,hp:10,maxHp:10,ac:18,surgeValue:5,attackBonus:7,damage:2},level2:{level:2,hp:12,maxHp:12,ac:19,surgeValue:6,attackBonus:8,damage:2}},tarak:{level1:{level:1,hp:8,maxHp:8,ac:17,surgeValue:4,attackBonus:7,damage:2},level2:{level:2,hp:10,maxHp:10,ac:18,surgeValue:5,attackBonus:8,damage:2}},haskan:{level1:{level:1,hp:6,maxHp:6,ac:14,surgeValue:3,attackBonus:4,damage:1},level2:{level:2,hp:8,maxHp:8,ac:15,surgeValue:4,attackBonus:5,damage:1}}},mi=5,ir=5,Pc={kobold:{attackBonus:5,damage:1},snake:{attackBonus:4,damage:1},cultist:{attackBonus:5,damage:1}},Dn=[{id:"kobold",name:"Kobold Dragonshield",ac:14,hp:1,maxHp:1,xp:1,imagePath:"assets/Monster_KoboldDragonshield.png"},{id:"snake",name:"Snake",ac:12,hp:1,maxHp:1,xp:1,imagePath:"assets/Monster_Snake.png"},{id:"cultist",name:"Cultist",ac:13,hp:2,maxHp:2,xp:1,imagePath:"assets/Monster_Cultist.png"}],Hc=["kobold","kobold","kobold","snake","snake","snake","cultist","cultist","cultist"],ft=[{id:"quinn",name:"Quinn",heroClass:"Cleric",imagePath:"assets/Hero_Cleric_Quinn.png",speed:5,attack:{name:"Mace",attackBonus:6,damage:2,range:1},hp:8,maxHp:8,ac:17},{id:"vistra",name:"Vistra",heroClass:"Fighter",imagePath:"assets/Hero_Fighter_Vistra.png",speed:5,attack:{name:"Warhammer",attackBonus:8,damage:2,range:1},hp:10,maxHp:10,ac:18},{id:"keyleth",name:"Keyleth",heroClass:"Paladin",imagePath:"assets/Hero_Paladin_Keyleth.png",speed:6,attack:{name:"Longsword",attackBonus:7,damage:2,range:1},hp:10,maxHp:10,ac:18},{id:"tarak",name:"Tarak",heroClass:"Rogue",imagePath:"assets/Hero_Rogue_Tarak.png",speed:6,attack:{name:"Short Sword",attackBonus:7,damage:2,range:1},hp:8,maxHp:8,ac:17},{id:"haskan",name:"Haskan",heroClass:"Wizard",imagePath:"assets/Hero_Wizard_Haskan.png",speed:6,attack:{name:"Quarterstaff",attackBonus:4,damage:1,range:1},hp:6,maxHp:6,ac:14}],Dc=[{x:1,y:2},{x:2,y:2},{x:3,y:2},{x:3,y:3},{x:3,y:4},{x:1,y:5},{x:2,y:5},{x:3,y:5}],gi=[{tileType:"tile-black-2exit-a",imagePath:"assets/Tile_Black_x2_01.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!0},{tileType:"tile-black-2exit-b",imagePath:"assets/Tile_Black_x2_02.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!0},{tileType:"tile-black-2exit-c",imagePath:"assets/Tile_Black_x2_03.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!0},{tileType:"tile-black-3exit-a",imagePath:"assets/Tile_Black_x3_01.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!0},{tileType:"tile-black-3exit-b",imagePath:"assets/Tile_Black_x3_02.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!0},{tileType:"tile-black-3exit-c",imagePath:"assets/Tile_Black_x3_03.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!0},{tileType:"tile-black-4exit-a",imagePath:"assets/Tile_Black_x4_01.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!0},{tileType:"tile-black-4exit-b",imagePath:"assets/Tile_Black_x4_02.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!0},{tileType:"tile-white-2exit-a",imagePath:"assets/Tile_White_x2_01.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!1},{tileType:"tile-white-2exit-b",imagePath:"assets/Tile_White_x2_02.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!1},{tileType:"tile-white-2exit-c",imagePath:"assets/Tile_White_x2_03.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!1},{tileType:"tile-white-2exit-d",imagePath:"assets/Tile_White_x2_04.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!1},{tileType:"tile-white-2exit-e",imagePath:"assets/Tile_White_x2_05.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!1},{tileType:"tile-white-3exit-a",imagePath:"assets/Tile_White_x3_01.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!1},{tileType:"tile-white-3exit-b",imagePath:"assets/Tile_White_x3_02.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!1},{tileType:"tile-white-3exit-c",imagePath:"assets/Tile_White_x3_03.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!1}],Rc=["tile-black-2exit-a","tile-black-2exit-b","tile-black-2exit-c","tile-black-3exit-a","tile-black-3exit-b","tile-black-3exit-c","tile-black-4exit-a","tile-black-4exit-b","tile-white-2exit-a","tile-white-2exit-b","tile-white-2exit-c","tile-white-2exit-d","tile-white-2exit-e","tile-white-3exit-a","tile-white-3exit-b","tile-white-3exit-c"],_i={northMaxY:3,southMinY:4};function Oc(e){return e>=0&&e<=_i.northMaxY}function zc(e){return e>=_i.southMinY&&e<=7}function jc(e){return Oc(e)?"start-tile-north":zc(e)?"start-tile-south":null}const Nc={id:"start-tile",tileType:"start",position:{col:0,row:0},rotation:0,edges:{north:"unexplored",south:"unexplored",east:"unexplored",west:"unexplored"}},Bc=[{id:"volcanic-spray",name:"Volcanic Spray",type:"event",description:"Hot volcanic spray erupts from a crack in the ground. The active hero takes 1 damage.",effect:{type:"damage",amount:1,target:"active-hero"},imagePath:"assets/Encounter_VolcanicSpray.png"},{id:"goblin-ambush",name:"Goblin Ambush",type:"event",description:"The active hero takes 1 damage.",effect:{type:"damage",amount:1,target:"active-hero"},imagePath:"assets/Encounter_GoblinAmbush.png"},{id:"dark-fog",name:"Dark Fog",type:"environment",description:"All heroes have -2 to attack rolls until the end of the next Hero Phase.",effect:{type:"environment"},imagePath:"assets/Encounter_DarkFog.png"},{id:"cave-in",name:"Cave-In",type:"event",description:"All heroes take 1 damage.",effect:{type:"damage",amount:1,target:"all-heroes"},imagePath:"assets/Encounter_CaveIn.png"},{id:"poisoned-dart-trap",name:"Poisoned Dart Trap",type:"trap",description:"The active hero takes 2 damage unless they succeed on a DC 12 Dexterity check.",effect:{type:"trap",disableDC:12},imagePath:"assets/Encounter_PoisonedDartTrap.png"}],Fc=["volcanic-spray","goblin-ambush","dark-fog","cave-in","poisoned-dart-trap"],yi=[{id:1,name:"Healing Hymn",type:"utility",heroClass:"Cleric",description:"You sing a soothing song that seals the wounds of you and your allies.",rule:`Use this power during your Hero Phase.
You and one other Hero on your tile regain 2 Hit Points.`,isCustomAbility:!0},{id:2,name:"Cleric's Shield",type:"at-will",heroClass:"Cleric",description:"You utter a minor defensive prayer as you strike your foe.",rule:`Attack one adjacent Monster.
Hit or Miss: Choose 1 Hero on your tile. That Hero gains a +2 bonus to AC until you use this power again.`,attackBonus:6,damage:1},{id:3,name:"Righteous Advance",type:"at-will",heroClass:"Cleric",description:"Your attack grants your ally time to advance.",rule:`Attack one adjacent Monster.
Hit or Miss: One Hero on your tile moves 2 squares.`,attackBonus:6,damage:1},{id:4,name:"Sacred Flame",type:"at-will",heroClass:"Cleric",description:"Sacred light shines from above, searing a single enemy with holy radiance.",rule:`Attack one Monster within 1 tile of you.
If you hit, choose yourself or one Hero on your tile. That Hero gains 1 Hit Point.`,attackBonus:6,damage:1},{id:5,name:"Blade Barrier",type:"daily",heroClass:"Cleric",description:"You conjure a wall of whirling blades to cut apart advancing foes.",rule:`Choose a tile within 2 tiles of you. Place five Blade Barrier tokens on five different squares on that tile.
When a Monster is placed on a square with a Blade Barrier token, remove that token and deal 1 damage to the Monster.`},{id:6,name:"Cause Fear",type:"daily",heroClass:"Cleric",description:"Your holy symbol ignites with divine light, slamming your foes with uncontrollable terror.",rule:`Choose a tile within 1 tile of you. Each ally on that tile adjacent to a Monster can make an At-Will attack with a +2 bonus to the Attack roll.
After the attacks, place each Monster remaining on a tile within 2 tiles of you.`},{id:7,name:"Wrathful Thunder",type:"daily",heroClass:"Cleric",description:"When you strike, a shattering thunderclap fills the room.",rule:`Attack one adjacent Monster.
After the attack, choose one Monster on your tile. Pass that Monster's card to the player on your right. That player now controls the Monster.`,attackBonus:6,damage:3},{id:8,name:"Astral Refuge",type:"utility",heroClass:"Cleric",description:"You send an ally to a safe refuge in the Astral Sea for a short time.",rule:`Use this power at the start of any Villain Phase.
Choose one Hero within 2 tiles of you. Remove that Hero from the tile. At the start of that player's next Hero Phase, that player places the Hero on any tile.`},{id:9,name:"Command",type:"utility",heroClass:"Cleric",description:"You utter a single word that your foe must obey.",rule:`Use this power during your Hero Phase.
Choose one Monster on your tile. Place that Monster on a tile within 2 tiles of you.`},{id:10,name:"Perseverance",type:"utility",heroClass:"Cleric",description:"A house does not stand with just a single wall.",rule:`Use this power when any player draws an Encounter Card.
The cost to cancel the Encounter Card is reduced by the number of Heroes on your tile, including your own Hero.`},{id:11,name:"Dwarven Resilience",type:"utility",heroClass:"Dwarf",description:"Your dwarven heritage grants you uncommonly strong health.",rule:`Use this power during your Hero Phase instead of moving.
You regain 4 Hit Points.`,isCustomAbility:!0},{id:12,name:"Charge",type:"at-will",heroClass:"Fighter",description:"You rush into combat.",rule:"Move up to your speed, then attack one adjacent Monster.",attackBonus:8,damage:1},{id:13,name:"Reaping Strike",type:"at-will",heroClass:"Fighter",description:"You punctuate your scything attacks with wicked jabs and small cutting blows that slip through your enemy's defenses.",rule:"Attack one adjacent Monster twice.",attackBonus:4,damage:1},{id:14,name:"Sure Strike",type:"at-will",heroClass:"Fighter",description:"You trade power for precision.",rule:"Attack one adjacent Monster.",attackBonus:11,damage:1},{id:15,name:"Comeback Strike",type:"daily",heroClass:"Fighter",description:"A timely strike gives you the strength to fight on.",rule:`Attack one adjacent Monster.
If you hit, you regain 2 hit points.
If you miss, do not flip this card over.`,attackBonus:7,damage:2},{id:16,name:"Into the Fray",type:"daily",heroClass:"Fighter",description:"You unleash a fierce battle cry as you leap boldly into battle.",rule:"Place your Hero adjacent to any Hero within 2 tiles of you. Attack one adjacent Monster.",attackBonus:7,damage:3},{id:17,name:"Taunting Advance",type:"daily",heroClass:"Fighter",description:"You rush forward and call forth your enemy.",rule:"Move your speed. Then choose a Monster within 2 tiles of you. Place that Monster adjacent to your Hero and attack it.",attackBonus:8,damage:3},{id:18,name:"Inspiring Advice",type:"utility",heroClass:"Fighter",description:"You encourage your teammate to fight on.",rule:`Use when a Hero misses a Monster with an attack.
The Hero rerolls the attack.
If the attack misses, do not flip this card over.`},{id:19,name:"One for the Team",type:"utility",heroClass:"Fighter",description:"You protect your ally from the hazards of the dungeon.",rule:`Use when any player draws an Encounter Card.
Resolve the Encounter Card as if you drew it.`},{id:20,name:"To Arms!",type:"utility",heroClass:"Fighter",description:"You rally your companions to meet your foe head on.",rule:`Use when a new Monster is placed on a tile.
You and one Hero on your tile can move your speed.`},{id:21,name:"Lay On Hands",type:"utility",heroClass:"Paladin",description:"Your divine touch instantly heals wounds.",rule:"One adjacent Hero regains 2 hit points.",isCustomAbility:!0},{id:22,name:"Divine Challenge",type:"at-will",heroClass:"Paladin",description:"You boldly confront a nearby enemy.",rule:`Choose one Monster within 1 tile of you. Place that Monster adjacent to your Hero.
Attack one adjacent Monster.`,attackBonus:8,damage:1},{id:23,name:"Holy Strike",type:"at-will",heroClass:"Paladin",description:"You strike an enemy, igniting it with holy light.",rule:`Attack one adjacent Monster.
If you started your Hero Phase adjacent to the Monster, deal +1 damage if you hit.`,attackBonus:8,damage:1},{id:24,name:"Valiant Strike",type:"at-will",heroClass:"Paladin",description:"The odds against you add strength to your attack.",rule:`Attack one adjacent Monster.
When making this attack, you get a +1 bonus to attack for each Monster adjacent to your Hero.`,attackBonus:8,damage:1},{id:25,name:"Arcing Strike",type:"daily",heroClass:"Paladin",description:"You swing your weapon in a wide arc.",rule:"Attack one or two adjacent Monsters.",attackBonus:9,damage:3},{id:26,name:"Benign Transposition",type:"daily",heroClass:"Paladin",description:"You call upon divine power to switch places with an ally to strike a foe.",rule:`Choose 1 Hero within 2 tiles of you. You swap positions with that Hero.
After swapping positions, attack one adjacent Monster.`,attackBonus:8,damage:3},{id:27,name:"Righteous Smite",type:"daily",heroClass:"Paladin",description:"Your righteous attack fills your party with preternatural resolve.",rule:`Attack one adjacent Monster.
Hit or Miss: All Heroes on your tile regain 1 Hit Point.`,attackBonus:9,damage:3},{id:28,name:"Bravery",type:"utility",heroClass:"Paladin",description:"Your bravery gives you the power to fight on.",rule:`Use when a Monster within 1 tile of you activates during any player's Villain Phase.
Place your Hero adjacent to that Monster. You regain 1 hit point.`},{id:29,name:"Noble Shield",type:"utility",heroClass:"Paladin",description:"You quickly throw up your shield, protecting your friends from harm at your expense.",rule:`Use when a Monster targets you and at least one additional Hero with the same attack.
You are the only target of the attack, but the attack roll against you is automatically a 20 and cannot be rerolled.`},{id:30,name:"Virtue's Touch",type:"utility",heroClass:"Paladin",description:"Your gentle touch removes affliction.",rule:"Choose one adjacent Hero. End one condition on that Hero."},{id:31,name:"Furious Assault",type:"utility",heroClass:"Half-Orc",description:"Your wrath burns inside you, giving strength to your next attack.",rule:`Use this power when you hit a Monster with an attack.
The Monster takes +1 damage.`,isCustomAbility:!0},{id:32,name:"Distracting Jab",type:"at-will",heroClass:"Rogue",description:"You escape the clutches of your foe as it reacts to your attack.",rule:`Attack one adjacent Monster.
If you hit, move the Monster 1 square.
After the attack, move your speed.`,attackBonus:7,damage:1},{id:33,name:"Lucky Strike",type:"at-will",heroClass:"Rogue",description:"They fall for it if you're lucky, and then they fall.",rule:`Attack one Monster within 1 tile of you.
If you hit and your attack roll is an even number, deal +1 damage.`,attackBonus:7,damage:1},{id:34,name:"Positioning Shot",type:"at-will",heroClass:"Rogue",description:"To avoid your vicious attack, your enemy leaps exactly where you want it to be.",rule:`Attack one Monster within 2 tiles of you.
Hit or Miss: Place that Monster on any square on your tile or on an adjacent tile.`,attackBonus:7,damage:1},{id:35,name:"Acrobatic Onslaught",type:"daily",heroClass:"Rogue",description:"After a quick strike, you leap through the air, lining up your next target.",rule:`Attack one adjacent Monster.
Hit or Miss: Place your Hero on any tile within 2 tiles of where you started, and then use an At-Will power immediately.`,attackBonus:7,damage:2},{id:36,name:"King's Castle",type:"daily",heroClass:"Rogue",description:"It's hard to get the little guy when he's behind an ally who can crush plate armor in his teeth.",rule:`Swap positions with one Hero within 1 tile of you.
Attack 1 Monster within 2 tiles of you.`,attackBonus:7,damage:3},{id:37,name:"Tornado Strike",type:"daily",heroClass:"Rogue",description:"Your weapon becomes a blur as you make swift, sweeping attacks.",rule:`Attack four times. Each attack can be against any Monster on your tile.
After the attacks, place your Hero on any square on your tile.`,attackBonus:7,damage:1},{id:38,name:"Distant Diversion",type:"utility",heroClass:"Rogue",description:"The monster turns to investigate the sound of a thrown pebble.",rule:`Choose one Monster within 3 tiles of you.
Place that Monster onto an adjacent tile.`},{id:39,name:"Practiced Evasion",type:"utility",heroClass:"Rogue",description:"A quick flip and quicker fingers disables the trap.",rule:`Use this power when you are hit by an attack from a Trap or Event Attack Encounter Card.
The attack misses. If the attack was from a Trap Encounter Card, you get a free Disable check against that Trap.`},{id:40,name:"Tumbling Escape",type:"utility",heroClass:"Rogue",description:"You nimbly roll out of harm's way.",rule:`Use this power when a Monster hits you with an attack.
The attack misses. Place your Hero on any tile within 1 tile of where you started.`},{id:41,name:"Hurled Breath",type:"daily",heroClass:"Dragonborn",description:"You hurl your draconic breath, engulfing your foes a short distance away.",rule:`Choose a tile within 2 tiles of you. Attack each Monster on that tile.
This attack does not count as an attack action.`,attackBonus:5,damage:1,isCustomAbility:!0},{id:42,name:"Arc Lightning",type:"at-will",heroClass:"Wizard",description:"Lightning leaps from your outstretched hands, blasting your foes.",rule:"Attack up to two Monsters. Each monster can be on your tile or any tile within 1 tile of you.",attackBonus:7,damage:1},{id:43,name:"Hypnotism",type:"at-will",heroClass:"Wizard",description:"Your enemy's mouth goes slack as your magic takes control.",rule:"Choose a Monster within 1 tile of you. Move that Monster 1 tile. If it ends adjacent to another Monster, make an attack against the second Monster.",attackBonus:9,damage:1},{id:44,name:"Ray of Frost",type:"at-will",heroClass:"Wizard",description:"A blistering ray of white frost streaks to your target, slowing its reactions.",rule:"Attack one Monster on your tile or on any tile within 2 tiles of you.",attackBonus:7,damage:1},{id:45,name:"Flaming Sphere",type:"daily",heroClass:"Wizard",description:"You conjure a rolling ball of fire and control where it goes.",rule:`Place 3 Flaming Sphere tokens in a stack on any square within 1 tile of you.
Instead of moving during your Hero phase, you can move the Flaming Sphere stack 1 tile.
At the end of your Hero Phase, you can remove 1 Flaming Sphere token and deal 1 damage to each Monster on that tile.`},{id:46,name:"Shock Sphere",type:"daily",heroClass:"Wizard",description:"You hurl a crackling orb of lightning, engulfing your foes in its electric embrace.",rule:"Choose a tile within 2 tiles of you. Attack each Monster on that tile.",attackBonus:9,damage:2},{id:47,name:"Spectral Ram",type:"daily",heroClass:"Wizard",description:"You bash your foe with arcane force that sends it reeling.",rule:`Attack one Monster within 2 tiles of you.
Hit or Miss: Place the Monster onto any tile within 2 tiles of where it started.`,attackBonus:9,damage:3},{id:48,name:"Invisibility",type:"utility",heroClass:"Wizard",description:"You vanish from sight.",rule:`Use this power during your Hero Phase.
Until the start of your next Hero Phase, you do not count as the closest Hero for any Monster's tactics.
Monster attacks that attack every Hero on a tile still attack you.`},{id:49,name:"Mirror Image",type:"utility",heroClass:"Wizard",description:"You create three duplicate images of yourself.",rule:`Use this power during your Hero Phase.
Place 3 Mirror Image tokens on your Hero Card.
For each Mirror Image token on your Hero Card, you gain +2 AC. Whenever a Monster misses you with an attack, remove 1 Mirror Image token.`},{id:50,name:"Wizard Eye",type:"utility",heroClass:"Wizard",description:"You see through a magical hovering eye, allowing you to explore from a distance.",rule:`Use this power during your Hero Phase.
Place the Wizard Eye token on a tile within 1 tile of you.
Instead of moving during your Hero Phase, you can move the Wizard Eye marker 1 tile.
During your Exploration Phase, you can explore as if your Hero was on any unexplored edge on the Wizard Eye's tile.`}],wi={quinn:1,vistra:11,tarak:31,keyleth:21,haskan:41};function or(e){const n={Cleric:["Cleric"],Fighter:["Fighter","Dwarf"],Paladin:["Paladin"],Rogue:["Rogue","Half-Orc"],Wizard:["Wizard","Dragonborn"]}[e]||[];return yi.filter(a=>n.includes(a.heroClass))}function Lc(e){return or(e).filter(t=>t.type==="at-will")}function qc(e){return or(e).filter(t=>t.type==="daily")}function Uc(e){return or(e).filter(t=>t.type==="utility"&&!t.isCustomAbility)}function Gt(e){return yi.find(t=>t.id===e)}function Wc(e,t,n,a,r){const s=[t,n,...a,r];return{heroId:e,customAbility:t,utility:n,atWills:a,daily:r,cardStates:s.map(o=>({cardId:o,isFlipped:!1}))}}function Yc(e,t){return{...e,cardStates:e.cardStates.map(n=>n.cardId===t?{...n,isFlipped:!0}:n)}}function Vc(e,t){return{...e,dailyLevel2:t,cardStates:[...e.cardStates,{cardId:t,isFlipped:!1}]}}const Xc={availableHeroes:ft,selectedHeroes:[],heroEdgeMap:{},powerCardSelections:{},heroPowerCards:{}},ki=hi({name:"heroes",initialState:Xc,reducers:{toggleHeroSelection:(e,t)=>{const n=t.payload,a=e.selectedHeroes.findIndex(r=>r.id===n);if(a>=0)e.selectedHeroes.splice(a,1),delete e.heroEdgeMap[n],delete e.powerCardSelections[n];else if(e.selectedHeroes.length<5){const r=e.availableHeroes.find(s=>s.id===n);r&&(e.selectedHeroes.push(r),e.powerCardSelections[n]={heroId:n,utility:null,atWills:[],daily:null})}},selectHeroFromEdge:(e,t)=>{const{heroId:n,edge:a}=t.payload,r=e.selectedHeroes.findIndex(s=>s.id===n);if(r>=0)e.heroEdgeMap[n]===a&&(e.selectedHeroes.splice(r,1),delete e.heroEdgeMap[n],delete e.powerCardSelections[n]);else if(e.selectedHeroes.length<5){const s=e.availableHeroes.find(o=>o.id===n);s&&(e.selectedHeroes.push(s),e.heroEdgeMap[n]=a,e.powerCardSelections[n]={heroId:n,utility:null,atWills:[],daily:null})}},clearSelection:e=>{e.selectedHeroes=[],e.heroEdgeMap={},e.powerCardSelections={},e.heroPowerCards={}},selectUtilityCard:(e,t)=>{const{heroId:n,cardId:a}=t.payload,r=e.powerCardSelections[n];r&&(r.utility=r.utility===a?null:a)},toggleAtWillCard:(e,t)=>{const{heroId:n,cardId:a}=t.payload,r=e.powerCardSelections[n];if(r){const s=r.atWills.indexOf(a);s>=0?r.atWills.splice(s,1):r.atWills.length<2&&r.atWills.push(a)}},selectDailyCard:(e,t)=>{const{heroId:n,cardId:a}=t.payload,r=e.powerCardSelections[n];r&&(r.daily=r.daily===a?null:a)},finalizePowerCardSelections:e=>{e.heroPowerCards={};for(const t of e.selectedHeroes){const n=e.powerCardSelections[t.id],a=wi[t.id];n&&a&&n.utility&&n.daily&&n.atWills.length===2?e.heroPowerCards[t.id]=Wc(t.id,a,n.utility,n.atWills,n.daily):console.warn(`Hero ${t.id} has incomplete power card selection, skipping`)}},usePowerCard:(e,t)=>{const{heroId:n,cardId:a}=t.payload,r=e.heroPowerCards[n];r&&(e.heroPowerCards[n]=Yc(r,a))},addLevel2Daily:(e,t)=>{const{heroId:n,cardId:a}=t.payload,r=e.heroPowerCards[n];r&&(e.heroPowerCards[n]=Vc(r,a))}}}),{toggleHeroSelection:xv,selectHeroFromEdge:Gc,clearSelection:bv,selectUtilityCard:Kc,toggleAtWillCard:Qc,selectDailyCard:Zc,finalizePowerCardSelections:Jc,usePowerCard:$c,addLevel2Daily:Tv}=ki.actions,eu=ki.reducer,wn={minX:1,maxX:3,minY:0,maxY:7,staircase:[{x:1,y:3},{x:2,y:3},{x:1,y:4},{x:2,y:4}]},Lt=4,tu=4,nu=8;function tn(e){const{col:t,row:n}=e.position;if(e.tileType==="start")return{minX:0,maxX:3,minY:0,maxY:7};let a,r;return t>0?a=tu+(t-1)*Lt:t<0?a=t*Lt:a=0,n>0?r=nu+(n-1)*Lt:n<0?r=n*Lt:r=0,{minX:a,maxX:a+Lt-1,minY:r,maxY:r+Lt-1}}function $t(e,t){for(const n of t.tiles){const a=tn(n);if(e.x>=a.minX&&e.x<=a.maxX&&e.y>=a.minY&&e.y<=a.maxY)return n}return null}function au(e){return e.x>=wn.minX&&e.x<=wn.maxX&&e.y>=wn.minY&&e.y<=wn.maxY}function ss(e){return wn.staircase.some(t=>t.x===e.x&&t.y===e.y)}function ru(e,t,n){return n.tileType==="start"?!1:n.edges.north==="wall"&&t===0||n.edges.south==="wall"&&t===Lt-1||n.edges.west==="wall"&&e===0||n.edges.east==="wall"&&e===Lt-1}function su(e,t){const n=tn(t);return{localX:e.x-n.minX,localY:e.y-n.minY}}function is(e,t){if(!t)return au(e)&&!ss(e);const n=$t(e,t);if(!n)return!1;if(n.tileType==="start")return!(ss(e)||e.x<1);const{localX:a,localY:r}=su(e,n);return!ru(a,r,n)}function iu(e,t,n){return t.some(a=>a.position.x===e.x&&a.position.y===e.y&&a.heroId!==n)}function ou(e,t,n){const a=tn(t),r=t.tileType==="start"?1:a.minX;switch(n){case"north":return e.y===a.minY;case"south":return e.y===a.maxY;case"east":return e.x===a.maxX;case"west":return e.x===r}}function lu(e,t,n,a){const r=tn(a),s=a.tileType==="start"?1:r.minX,o=e.y===r.minY,c=e.y===r.maxY,l=e.x===r.maxX,u=e.x===s,f=n<0?"north":n>0?"south":null,m=t<0?"west":t>0?"east":null;if(!f||!m)return!1;let g=!1,_=!1;return f==="north"&&o&&a.edges.north==="wall"&&(g=!0),f==="south"&&c&&a.edges.south==="wall"&&(g=!0),m==="east"&&l&&a.edges.east==="wall"&&(_=!0),m==="west"&&u&&a.edges.west==="wall"&&(_=!0),g&&_}function cu(e,t,n,a){const r=a.x-n.x,s=a.y-n.y;if(r!==0&&s!==0)return!1;let o,c;return s<0?(o="north",c="south"):s>0?(o="south",c="north"):r>0?(o="east",c="west"):(o="west",c="east"),!(e.edges[o]!=="open"||t.edges[c]!=="open")}function lr(e,t){const n=[],a=[{dx:0,dy:-1,cardinal:!0},{dx:0,dy:1,cardinal:!0},{dx:-1,dy:0,cardinal:!0},{dx:1,dy:0,cardinal:!0},{dx:-1,dy:-1,cardinal:!1},{dx:1,dy:-1,cardinal:!1},{dx:-1,dy:1,cardinal:!1},{dx:1,dy:1,cardinal:!1}];if(!t){for(const s of a){const o={x:e.x+s.dx,y:e.y+s.dy};is(o)&&n.push(o)}return n}const r=$t(e,t);if(!r)return n;for(const s of a){const o={x:e.x+s.dx,y:e.y+s.dy},c=$t(o,t);if(c&&is(o,t)){if(r.id===c.id){if(!s.cardinal&&lu(e,s.dx,s.dy,r))continue;n.push(o);continue}s.cardinal&&cu(r,c,e,o)&&n.push(o)}}return n}function uu(e,t,n,a,r){const s=[],o=new Set,c=[{pos:e,distance:0}];for(o.add(`${e.x},${e.y}`);c.length>0;){const l=c.shift();if(!l)break;if(l.distance>0&&!iu(l.pos,n,a)&&s.push(l.pos),l.distance<t){const u=lr(l.pos,r);for(const f of u){const m=`${f.x},${f.y}`;o.has(m)||(o.add(m),c.push({pos:f,distance:l.distance+1}))}}}return s}function du(e,t){return t.some(n=>n.x===e.x&&n.y===e.y)}function cr(e){return{north:"south",south:"north",east:"west",west:"east"}[e]}function fu(e,t){const n=$t(e.position,t);if(!n)return null;const a=n.tileType==="start"?jc(e.position.y):void 0;for(const r of t.unexploredEdges)if(r.tileId===n.id&&ou(e.position,n,r.direction)){if(r.subTileId&&a&&r.subTileId!==a)continue;return r}return null}function vu(e,t){const{col:n,row:a}=e.position;switch(t){case"north":return{col:n,row:a-1};case"south":return{col:n,row:a+1};case"east":return{col:n+1,row:a};case"west":return{col:n-1,row:a}}}function hu(e){const t=cr(e);return{south:0,west:90,north:180,east:270}[t]}function xi(e){return gi.find(t=>t.tileType===e)}function pu(e,t,n){const a=n.tiles.find(f=>f.id===e.tileId);if(!a)return null;const r=vu(a,e.direction),s=hu(e.direction);if(!xi(t))return null;const c=`tile-${n.tiles.length}`,u={north:"unexplored",south:"unexplored",east:"unexplored",west:"unexplored",[cr(e.direction)]:"open"};return{id:c,tileType:t,position:r,rotation:s,edges:u}}function za(){return{tiles:[{...Nc}],unexploredEdges:[{tileId:"start-tile",direction:"north"},{tileId:"start-tile",direction:"south"},{tileId:"start-tile",direction:"east",subTileId:"start-tile-north"},{tileId:"start-tile",direction:"east",subTileId:"start-tile-south"},{tileId:"start-tile",direction:"west",subTileId:"start-tile-north"},{tileId:"start-tile",direction:"west",subTileId:"start-tile-south"}],tileDeck:[]}}function mu(e,t=Math.random){const n=[...e];for(let a=n.length-1;a>0;a--){const r=Math.floor(t()*(a+1));[n[a],n[r]]=[n[r],n[a]]}return n}function gu(e,t=Math.random){return mu(e,t)}function _u(e){if(e.length===0)return{drawnTile:null,remainingDeck:[]};const[t,...n]=e;return{drawnTile:t,remainingDeck:n}}function yu(e,t,n){const a=e.unexploredEdges.filter(l=>!(l.tileId===t.tileId&&l.direction===t.direction)),r=cr(t.direction),o=["north","south","east","west"].filter(l=>l!==r&&n.edges[l]==="unexplored").map(l=>({tileId:n.id,direction:l}));return{tiles:[...e.tiles.map(l=>l.id===t.tileId?{...l,edges:{...l.edges,[t.direction]:"open"}}:l),n],unexploredEdges:[...a,...o],tileDeck:e.tileDeck}}function bi(e,t=Math.random){const n=[...e];for(let a=n.length-1;a>0;a--){const r=Math.floor(t()*(a+1));[n[a],n[r]]=[n[r],n[a]]}return n}function wu(e=Math.random){return{drawPile:bi([...Hc],e),discardPile:[]}}function ku(e,t=Math.random){if(e.drawPile.length===0){if(e.discardPile.length===0)return{monster:null,deck:e};const r=bi(e.discardPile,t);return{monster:r[0],deck:{drawPile:r.slice(1),discardPile:[]}}}const[n,...a]=e.drawPile;return{monster:n,deck:{drawPile:a,discardPile:e.discardPile}}}function xu(e,t){return{drawPile:e.drawPile,discardPile:[...e.discardPile,t]}}function ur(e){return Dn.find(t=>t.id===e)}function bu(e,t,n,a,r){const s=ur(e);return s?{monsterId:e,instanceId:`${e}-${r}`,position:t,currentHp:s.hp,controllerId:n,tileId:a}:null}const ja=4,os=Math.floor(ja/2);function Tu(e){switch((e%360+360)%360){case 0:return{x:2,y:1};case 90:return{x:2,y:2};case 180:return{x:1,y:2};case 270:return{x:1,y:1};default:return{x:os,y:os}}}function Su(e){const t=[],n=[{dx:0,dy:-1},{dx:0,dy:1},{dx:1,dy:0},{dx:-1,dy:0},{dx:1,dy:-1},{dx:-1,dy:-1},{dx:1,dy:1},{dx:-1,dy:1}];for(const a of n){const r=e.x+a.dx,s=e.y+a.dy;r>=0&&r<ja&&s>=0&&s<ja&&t.push({x:r,y:s})}return t}function ls(e,t,n){return n.some(a=>a.tileId===t&&a.position.x===e.x&&a.position.y===e.y)}function Iu(e,t){const n=Tu(e.rotation);if(!ls(n,e.id,t))return n;const a=Su(n);for(const r of a)if(!ls(r,e.id,t))return r;return null}function cs(e,t){return e.currentHp===0&&t.healingSurges>0}function Cu(e,t){return e.currentHp===0&&t.healingSurges===0}function Mu(e,t){const n=e.surgeValue;return{heroState:{...e,currentHp:Math.min(n,e.maxHp)},resources:{...t,healingSurges:t.healingSurges-1}}}function Ti(e=Math.random){return Math.floor(e()*20)+1}function Au(e,t,n=Math.random){const a=Ti(n),r=a+e.attackBonus,s=a===20||r>=t,o=a===20;return{roll:a,attackBonus:e.attackBonus,total:r,targetAC:t,isHit:s,damage:s?e.damage:0,isCritical:o}}function Eu(e,t,n){return e.level===1&&t===20&&n.xp>=mi}function Pu(e,t){const n=pi[e.heroId];if(!n)return console.warn(`Hero levels not found for heroId: ${e.heroId}. Level up skipped.`),{heroState:e,resources:t};const a=n.level2,r=e.maxHp-e.currentHp;return{heroState:{...e,level:2,maxHp:a.maxHp,currentHp:Math.max(1,a.maxHp-r),ac:a.ac,surgeValue:a.surgeValue,attackBonus:a.attackBonus},resources:{...t,xp:t.xp-mi}}}function Hu(e,t,n){return t===20&&e===2?n+1:n}function Na(e,t){const n=Math.abs(e.x-t.x),a=Math.abs(e.y-t.y);return n<=1&&a<=1&&(n>0||a>0)}function Du(e){return ur(e)?.ac}function Ru(e,t){const n=t.tiles.find(r=>r.id===e.tileId);if(!n)return null;const a=tn(n);return{x:a.minX+e.position.x,y:a.minY+e.position.y}}function Ou(e,t,n,a){return a?$t(e,a)?t.filter(s=>{const o=Ru(s,a);return o?Na(e,o):!1}):[]:t.filter(s=>s.tileId===n&&Na(e,s.position))}function na(e,t){const n=t.tiles.find(r=>r.id===e.tileId);if(!n)return null;const a=tn(n);return{x:a.minX+e.position.x,y:a.minY+e.position.y}}function us(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function zu(e,t,n,a){const r=na(e,a);if(!r)return null;const s=t.filter(u=>{const f=n[u.heroId];return f!==void 0&&f>0});if(s.length===0)return null;const o=new Set,c=[{pos:r,distance:0}];o.add(`${r.x},${r.y}`);let l=null;for(;c.length>0;){const u=c.shift();for(const m of s)m.position.x===u.pos.x&&m.position.y===u.pos.y&&(!l||u.distance<l.distance)&&(l={hero:m,distance:u.distance});if(l&&l.distance<u.distance)break;const f=lr(u.pos,a);for(const m of f){const g=`${m.x},${m.y}`;o.has(g)||(o.add(g),c.push({pos:m,distance:u.distance+1}))}}return l}function ju(e,t,n,a){const r=na(e,a);if(!r)return null;const s=t.filter(o=>{const c=n[o.heroId];return c!==void 0&&c>0});for(const o of s)if(Na(r,o.position))return o;return null}function Nu(e,t,n,a,r){const s=na(e,r);if(!s)return null;const c=lr(s,r).filter(f=>{if(n.some(g=>g.position.x===f.x&&g.position.y===f.y))return!1;for(const g of a){if(g.instanceId===e.instanceId)continue;const _=na(g,r);if(_&&_.x===f.x&&_.y===f.y)return!1}return!0});if(c.length===0)return null;let l=c[0],u=us(l,t);for(const f of c){const m=us(f,t);m<u&&(u=m,l=f)}return l}function Bu(e,t,n=Math.random){const a=Pc[e];if(!a)return{roll:1,attackBonus:0,total:1,targetAC:t,isHit:!1,damage:0,isCritical:!1};const r=Ti(n),s=r+a.attackBonus,o=r===20||s>=t,c=r===20;return{roll:r,attackBonus:a.attackBonus,total:s,targetAC:t,isHit:o,damage:o?a.damage:0,isCritical:c}}function Fu(e,t,n,a,r,s,o=Math.random){const c=ju(e,t,n,s);if(c){const f=a[c.heroId]??10,m=Bu(e.monsterId,f,o);return{type:"attack",targetId:c.heroId,result:m}}const l=zu(e,t,n,s);if(!l)return{type:"none"};const u=Nu(e,l.hero.position,t,r,s);return u?{type:"move",destination:u}:{type:"none"}}function Lu(e,t,n){const a=n.tiles.find(s=>s.id===t);if(!a)return null;const r=tn(a);return{x:e.x-r.minX,y:e.y-r.minY}}function qu(e,t){return $t(e,t)?.id??null}function Si(e,t=Math.random){const n=[...e];for(let a=n.length-1;a>0;a--){const r=Math.floor(t()*(a+1));[n[a],n[r]]=[n[r],n[a]]}return n}function Uu(e=Math.random){return{drawPile:Si([...Fc],e),discardPile:[]}}function Wu(e,t=Math.random){if(e.drawPile.length===0){if(e.discardPile.length===0)return{encounterId:null,deck:e};const r=Si(e.discardPile,t);return{encounterId:r[0],deck:{drawPile:r.slice(1),discardPile:[]}}}const[n,...a]=e.drawPile;return{encounterId:n,deck:{drawPile:a,discardPile:e.discardPile}}}function Yu(e,t){return{drawPile:e.drawPile,discardPile:[...e.discardPile,t]}}function Vu(e){return Bc.find(t=>t.id===e)}function Xu(e){return!e.drewOnlyWhiteTilesThisTurn}function Gu(e){return e.xp>=ir}function Ku(e,t,n){return{resources:{...t,xp:t.xp-ir},encounterDeck:{...n,discardPile:[...n.discardPile,e.id]}}}function Ii(e,t){return{...e,currentHp:Math.max(0,e.currentHp-t)}}function Qu(e,t){return e.map(n=>Ii(n,t))}function Zu(e,t,n){const a=e.effect;switch(a.type){case"damage":return a.target==="active-hero"?t.map(r=>r.heroId===n?Ii(r,a.amount):r):Qu(t,a.amount);case"environment":return console.warn(`Environment effect '${e.name}' is not yet implemented`),t;case"curse":return console.warn(`Curse effect '${e.name}' is not yet implemented`),t;case"trap":return console.warn(`Trap effect '${e.name}' is not yet implemented`),t;case"hazard":return console.warn(`Hazard effect '${e.name}' is not yet implemented`),t;default:return t}}const Ba={currentHeroIndex:0,currentPhase:"hero-phase",turnNumber:1,exploredThisTurn:!1,drewOnlyWhiteTilesThisTurn:!1},Wn={actionsTaken:[],canMove:!0,canAttack:!0},Fa={monstersDefeated:0,monstersToDefeat:2,objective:"Defeat 2 monsters"},La={xp:0,healingSurges:2},Ju={currentScreen:"character-select",heroTokens:[],turnState:{...Ba},validMoveSquares:[],showingMovement:!1,dungeon:za(),monsterDeck:{drawPile:[],discardPile:[]},monsters:[],monsterInstanceCounter:0,recentlySpawnedMonsterId:null,attackResult:null,attackTargetId:null,attackName:null,heroHp:[],monsterAttackResult:null,monsterAttackTargetId:null,monsterAttackerId:null,villainPhaseMonsterIndex:0,monsterMoveActionId:null,heroTurnActions:{...Wn},scenario:{...Fa},partyResources:{...La},defeatedMonsterXp:null,defeatedMonsterName:null,leveledUpHeroId:null,levelUpOldStats:null,healingSurgeUsedHeroId:null,healingSurgeHpRestored:null,defeatReason:null,encounterDeck:{drawPile:[],discardPile:[]},drawnEncounter:null,showActionSurgePrompt:!1,multiAttackState:null,pendingMoveAttack:null};function Bn(e,t){const n=[...e.actionsTaken,t],a=n.filter(c=>c==="move").length,r=n.filter(c=>c==="attack").length,s=r===0,o=a<2&&!(a===1&&r===1);return{actionsTaken:n,canMove:o,canAttack:s}}function $u(e){const{actionsTaken:t}=e,n=t.filter(r=>r==="move").length,a=t.filter(r=>r==="attack").length;return n>=1&&a>=1||n>=2}function ed(e){let t=e;return()=>(t=t*1103515245+12345&2147483647,t/2147483647)}function td(e,t=Math.random){const n=[...e];for(let a=n.length-1;a>0;a--){const r=Math.floor(t()*(a+1));[n[a],n[r]]=[n[r],n[a]]}return n}const Ci=hi({name:"game",initialState:Ju,reducers:{startGame:(e,t)=>{const{heroIds:n,positions:a,seed:r}=t.payload;if(n.length===0||n.length>5)return;const s=r??Date.now();e.randomSeed=s;let o;const c=ed(s);a?o=a:o=td(Dc,c).slice(0,5),e.heroTokens=n.map((u,f)=>({heroId:u,position:o[f]})),e.turnState={...Ba},e.validMoveSquares=[],e.showingMovement=!1;const l=za();l.tileDeck=gu([...Rc],c),e.dungeon=l,e.monsterDeck=wu(c),e.monsters=[],e.monsterInstanceCounter=0,e.recentlySpawnedMonsterId=null,e.attackResult=null,e.attackTargetId=null,e.attackName=null,e.heroHp=n.map(u=>{const f=pi[u];f||console.warn(`Hero levels not found for ${u}, using defaults`);const m=f?.level1,g=ft.find(k=>k.id===u),_=m?.hp??g?.hp??8,A=m?.ac??g?.ac??17,L=m?.surgeValue??4,x=m?.attackBonus??g?.attack?.attackBonus??6;return{heroId:u,currentHp:_,maxHp:_,level:1,ac:A,surgeValue:L,attackBonus:x}}),e.monsterAttackResult=null,e.monsterAttackTargetId=null,e.monsterAttackerId=null,e.villainPhaseMonsterIndex=0,e.heroTurnActions={...Wn},e.scenario={...Fa},e.partyResources={...La},e.defeatedMonsterXp=null,e.defeatedMonsterName=null,e.leveledUpHeroId=null,e.levelUpOldStats=null,e.encounterDeck=Uu(c),e.drawnEncounter=null,e.currentScreen="game-board"},setHeroPosition:(e,t)=>{const n=e.heroTokens.find(a=>a.heroId===t.payload.heroId);n&&(n.position=t.payload.position)},showMovement:(e,t)=>{if(e.turnState.currentPhase!=="hero-phase"||!e.heroTurnActions.canMove)return;const{heroId:n,speed:a}=t.payload,r=e.heroTokens.find(s=>s.heroId===n);r&&(e.validMoveSquares=uu(r.position,a,e.heroTokens,n,e.dungeon),e.showingMovement=!0)},hideMovement:e=>{e.validMoveSquares=[],e.showingMovement=!1},moveHero:(e,t)=>{const{heroId:n,position:a}=t.payload;if(e.turnState.currentPhase!=="hero-phase"||!e.heroTurnActions.canMove||!du(a,e.validMoveSquares))return;const r=e.heroTokens.find(s=>s.heroId===n);r&&(r.position=a,e.validMoveSquares=[],e.showingMovement=!1,e.heroTurnActions=Bn(e.heroTurnActions,"move"))},resetGame:e=>{e.currentScreen="character-select",e.heroTokens=[],e.turnState={...Ba},e.randomSeed=void 0,e.validMoveSquares=[],e.showingMovement=!1,e.dungeon=za(),e.monsterDeck={drawPile:[],discardPile:[]},e.monsters=[],e.monsterInstanceCounter=0,e.recentlySpawnedMonsterId=null,e.attackResult=null,e.attackTargetId=null,e.attackName=null,e.heroHp=[],e.monsterAttackResult=null,e.monsterAttackTargetId=null,e.monsterAttackerId=null,e.villainPhaseMonsterIndex=0,e.monsterMoveActionId=null,e.heroTurnActions={...Wn},e.scenario={...Fa},e.partyResources={...La},e.defeatedMonsterXp=null,e.defeatedMonsterName=null,e.leveledUpHeroId=null,e.levelUpOldStats=null,e.healingSurgeUsedHeroId=null,e.healingSurgeHpRestored=null,e.defeatReason=null,e.encounterDeck={drawPile:[],discardPile:[]},e.drawnEncounter=null,e.showActionSurgePrompt=!1,e.multiAttackState=null,e.pendingMoveAttack=null},endHeroPhase:e=>{if(e.turnState.currentPhase!=="hero-phase")return;e.validMoveSquares=[],e.showingMovement=!1,e.recentlySpawnedMonsterId=null,e.turnState.exploredThisTurn=!1,e.turnState.drewOnlyWhiteTilesThisTurn=!1;const t=e.heroTokens[e.turnState.currentHeroIndex];if(!t)return;const n=fu(t,e.dungeon);if(n&&e.dungeon.tileDeck.length>0){const{drawnTile:a,remainingDeck:r}=_u(e.dungeon.tileDeck);if(a){const s=pu(n,a,e.dungeon);if(s){xi(a)?.isBlackTile??!0?e.turnState.drewOnlyWhiteTilesThisTurn=!1:e.turnState.exploredThisTurn||(e.turnState.drewOnlyWhiteTilesThisTurn=!0),e.turnState.exploredThisTurn=!0,e.dungeon=yu(e.dungeon,n,s),e.dungeon.tileDeck=r;const{monster:l,deck:u}=ku(e.monsterDeck);if(l){const f=Iu(s,e.monsters);if(f){const m=bu(l,f,t.heroId,s.id,e.monsterInstanceCounter);m&&(e.monsters.push(m),e.monsterInstanceCounter+=1,e.recentlySpawnedMonsterId=m.instanceId)}e.monsterDeck=u}}}}e.turnState.currentPhase="exploration-phase"},endExplorationPhase:e=>{if(e.turnState.currentPhase==="exploration-phase"&&(e.turnState.currentPhase="villain-phase",e.villainPhaseMonsterIndex=0,e.monsterAttackResult=null,e.monsterAttackTargetId=null,e.monsterAttackerId=null,e.monsterMoveActionId=null,Xu(e.turnState))){const{encounterId:t,deck:n}=Wu(e.encounterDeck);if(e.encounterDeck=n,t){const a=Vu(t);a&&(e.drawnEncounter=a)}}},endVillainPhase:e=>{if(e.turnState.currentPhase!=="villain-phase")return;e.villainPhaseMonsterIndex=0,e.monsterAttackResult=null,e.monsterAttackTargetId=null,e.monsterAttackerId=null,e.monsterMoveActionId=null,e.drawnEncounter=null,e.healingSurgeUsedHeroId=null,e.healingSurgeHpRestored=null,e.showActionSurgePrompt=!1,e.turnState.currentHeroIndex=(e.turnState.currentHeroIndex+1)%e.heroTokens.length,e.turnState.currentHeroIndex===0&&(e.turnState.turnNumber+=1),e.turnState.currentPhase="hero-phase",e.heroTurnActions={...Wn};const t=e.heroTokens[e.turnState.currentHeroIndex]?.heroId;if(t){const n=e.heroHp.findIndex(a=>a.heroId===t);if(n!==-1){const a=e.heroHp[n];if(Cu(a,e.partyResources)){const r=ft.find(o=>o.id===t);r||console.warn(`Hero not found in AVAILABLE_HEROES for ID: ${t}`);const s=r?.name??"A hero";e.defeatReason=`${s} fell with no healing surges remaining.`,e.currentScreen="defeat";return}cs(a,e.partyResources)&&(e.showActionSurgePrompt=!0)}}},dismissMonsterCard:e=>{e.recentlySpawnedMonsterId=null},dismissEncounterCard:e=>{if(e.drawnEncounter){const t=e.heroTokens[e.turnState.currentHeroIndex]?.heroId;t&&(e.heroHp=Zu(e.drawnEncounter,e.heroHp,t),e.heroHp.every(a=>a.currentHp<=0)&&(e.defeatReason=`The party was overwhelmed by ${e.drawnEncounter.name}.`,e.currentScreen="defeat")),e.encounterDeck=Yu(e.encounterDeck,e.drawnEncounter.id),e.drawnEncounter=null}},cancelEncounterCard:e=>{if(e.drawnEncounter&&Gu(e.partyResources)){const t=Ku(e.drawnEncounter,e.partyResources,e.encounterDeck);e.partyResources=t.resources,e.encounterDeck=t.encounterDeck,e.drawnEncounter=null}},setAttackResult:(e,t)=>{if(e.turnState.currentPhase!=="hero-phase"||!e.heroTurnActions.canAttack)return;const{result:n,targetInstanceId:a,attackName:r}=t.payload;e.attackTargetId=a,e.attackName=r,e.defeatedMonsterXp=null,e.defeatedMonsterName=null,e.leveledUpHeroId=null,e.levelUpOldStats=null;const s=e.heroTokens[e.turnState.currentHeroIndex]?.heroId,o=e.heroHp.find(l=>l.heroId===s),c=n.isHit&&o?Hu(o.level,n.roll,n.damage):n.damage;if(e.attackResult={...n,damage:c},n.isHit&&c>0){const l=e.monsters.find(u=>u.instanceId===a);if(l&&(l.currentHp-=c,l.currentHp<=0)){const u=ur(l.monsterId);u||console.warn(`Monster definition not found for ID: ${l.monsterId}`);const f=u?.xp??0;e.partyResources.xp+=f,e.defeatedMonsterXp=f,e.defeatedMonsterName=u?.name??l.monsterId,e.monsters=e.monsters.filter(m=>m.instanceId!==a),e.monsterDeck=xu(e.monsterDeck,l.monsterId),e.scenario.monstersDefeated+=1,e.scenario.monstersDefeated>=e.scenario.monstersToDefeat&&(e.currentScreen="victory")}}if(o&&s&&Eu(o,n.roll,e.partyResources)){e.levelUpOldStats={...o};const l=Pu(o,e.partyResources),u=e.heroHp.findIndex(f=>f.heroId===s);u!==-1&&(e.heroHp[u]=l.heroState),e.partyResources=l.resources,e.leveledUpHeroId=s}e.heroTurnActions=Bn(e.heroTurnActions,"attack")},dismissAttackResult:e=>{e.attackResult=null,e.attackTargetId=null,e.attackName=null},dismissDefeatNotification:e=>{e.defeatedMonsterXp=null,e.defeatedMonsterName=null},dismissLevelUpNotification:e=>{e.leveledUpHeroId=null,e.levelUpOldStats=null},startMultiAttack:(e,t)=>{if(e.turnState.currentPhase!=="hero-phase"||!e.heroTurnActions.canAttack)return;const{cardId:n,totalAttacks:a,sameTarget:r,maxTargets:s,targetInstanceId:o}=t.payload;e.multiAttackState={cardId:n,totalAttacks:a,attacksCompleted:0,targetInstanceId:o||null,sameTarget:r,maxTargets:s}},recordMultiAttackHit:e=>{e.multiAttackState&&(e.multiAttackState.attacksCompleted+=1,e.multiAttackState.attacksCompleted>=e.multiAttackState.totalAttacks&&(e.multiAttackState=null,e.heroTurnActions=Bn(e.heroTurnActions,"attack")))},clearMultiAttack:e=>{e.multiAttackState&&(e.multiAttackState.attacksCompleted>0&&(e.heroTurnActions=Bn(e.heroTurnActions,"attack")),e.multiAttackState=null)},startMoveAttack:(e,t)=>{if(e.turnState.currentPhase!=="hero-phase"||!e.heroTurnActions.canAttack)return;const n=e.heroTokens[e.turnState.currentHeroIndex]?.heroId,a=e.heroTokens.find(r=>r.heroId===n);a&&(e.pendingMoveAttack={cardId:t.payload.cardId,movementCompleted:!1,startPosition:{...a.position}})},completeMoveAttackMovement:e=>{e.pendingMoveAttack&&(e.pendingMoveAttack.movementCompleted=!0)},clearMoveAttack:e=>{e.pendingMoveAttack=null},setMonsters:(e,t)=>{e.monsters=t.payload},activateNextMonster:(e,t)=>{if(e.turnState.currentPhase!=="villain-phase")return;const n=e.heroTokens[e.turnState.currentHeroIndex]?.heroId;if(!n)return;const a=e.monsters.filter(u=>u.controllerId===n);if(e.villainPhaseMonsterIndex>=a.length)return;const r=a[e.villainPhaseMonsterIndex];if(!r)return;const s={},o={};for(const u of e.heroHp)s[u.heroId]=u.currentHp;for(const u of e.heroTokens){const f=ft.find(m=>m.id===u.heroId);f&&(o[u.heroId]=f.ac)}const c=t.payload?.randomFn??Math.random,l=Fu(r,e.heroTokens,s,o,e.monsters,e.dungeon,c);if(l.type==="move"){const u=e.monsters.find(f=>f.instanceId===r.instanceId);if(u){const f=qu(l.destination,e.dungeon);if(f){const m=Lu(l.destination,f,e.dungeon);m&&(u.position=m,u.tileId=f)}}e.monsterMoveActionId=r.instanceId}else if(l.type==="attack"&&(e.monsterAttackResult=l.result,e.monsterAttackTargetId=l.targetId,e.monsterAttackerId=r.instanceId,l.result.isHit&&l.result.damage>0)){const u=e.heroHp.find(f=>f.heroId===l.targetId);u&&(u.currentHp=Math.max(0,u.currentHp-l.result.damage),e.heroHp.every(m=>m.currentHp<=0)&&(e.currentScreen="defeat"))}e.villainPhaseMonsterIndex+=1},dismissMonsterAttackResult:e=>{e.monsterAttackResult=null,e.monsterAttackTargetId=null,e.monsterAttackerId=null},dismissMonsterMoveAction:e=>{e.monsterMoveActionId=null},dismissHealingSurgeNotification:e=>{e.healingSurgeUsedHeroId=null,e.healingSurgeHpRestored=null},useVoluntaryActionSurge:e=>{if(e.turnState.currentPhase!=="hero-phase"||!e.showActionSurgePrompt)return;const t=e.heroTokens[e.turnState.currentHeroIndex]?.heroId;if(!t)return;const n=e.heroHp.findIndex(s=>s.heroId===t);if(n===-1)return;const a=e.heroHp[n];if(!cs(a,e.partyResources))return;const r=Mu(a,e.partyResources);e.heroHp[n]=r.heroState,e.partyResources=r.resources,e.healingSurgeUsedHeroId=t,e.healingSurgeHpRestored=r.heroState.currentHp,e.showActionSurgePrompt=!1},skipActionSurge:e=>{if(!e.showActionSurgePrompt)return;const t=e.heroTokens[e.turnState.currentHeroIndex]?.heroId;if(t){const n=e.heroHp.find(a=>a.heroId===t);if(n&&n.currentHp===0){const r=ft.find(s=>s.id===t)?.name??"A hero";e.defeatReason=`${r} chose not to use a healing surge while at 0 HP.`,e.currentScreen="defeat"}}e.showActionSurgePrompt=!1},setHeroHp:(e,t)=>{const{heroId:n,hp:a}=t.payload,r=e.heroHp.find(s=>s.heroId===n);r&&(r.currentHp=Math.max(0,a))},setPartyResources:(e,t)=>{const{xp:n,healingSurges:a}=t.payload;n!==void 0&&(e.partyResources.xp=n),a!==void 0&&(e.partyResources.healingSurges=a)}}}),{startGame:nd,setHeroPosition:Sv,showMovement:ds,hideMovement:ad,moveHero:rd,resetGame:dr,endHeroPhase:fs,endExplorationPhase:sd,endVillainPhase:vs,dismissMonsterCard:id,dismissEncounterCard:od,cancelEncounterCard:ld,setAttackResult:cd,dismissAttackResult:ud,dismissDefeatNotification:dd,setMonsters:Iv,activateNextMonster:fd,dismissMonsterAttackResult:vd,dismissMonsterMoveAction:hd,dismissHealingSurgeNotification:pd,setHeroHp:Cv,dismissLevelUpNotification:md,setPartyResources:Mv,useVoluntaryActionSurge:gd,skipActionSurge:_d,startMultiAttack:yd,recordMultiAttackHit:wd,clearMultiAttack:kd,startMoveAttack:xd,completeMoveAttackMovement:Av,clearMoveAttack:Ev}=Ci.actions,bd=Ci.reducer,X=yc({reducer:{heroes:eu,game:bd}});typeof window<"u"&&(window.__REDUX_STORE__=X);function qe(e){const t="/Ashardalon/",n=e.startsWith("/")?e.slice(1):e;return(t.endsWith("/")?t:t+"/")+n}function ua(e){switch(e){case"top":return 180;case"left":return 90;case"right":return-90;case"bottom":default:return 0}}var Td=E('<span class="status-complete svelte-4rkta9">â Selection Complete</span>'),Sd=E('<span class="status-incomplete svelte-4rkta9"> </span>'),Id=E("<span> </span>"),Cd=E('<div class="card-stats svelte-4rkta9"><span> </span> <!></div>'),Md=E('<div class="power-card custom-ability svelte-4rkta9" data-testid="custom-ability-card"><div class="card-header svelte-4rkta9"><span class="card-name svelte-4rkta9"> </span> <span class="card-type svelte-4rkta9"> </span></div> <p class="card-description svelte-4rkta9"> </p> <p class="card-rule svelte-4rkta9"> </p> <!></div>'),Ad=E('<button><div class="card-header svelte-4rkta9"><span class="card-name svelte-4rkta9"> </span> <span class="card-type svelte-4rkta9"> </span></div> <p class="card-description svelte-4rkta9"> </p> <p class="card-rule svelte-4rkta9"> </p></button>'),Ed=E("<span> </span>"),Pd=E('<div class="card-stats svelte-4rkta9"><span> </span> <!></div>'),Hd=E('<button><div class="card-header svelte-4rkta9"><span class="card-name svelte-4rkta9"> </span> <span class="card-type svelte-4rkta9"> </span></div> <p class="card-description svelte-4rkta9"> </p> <p class="card-rule svelte-4rkta9"> </p> <!></button>'),Dd=E("<span> </span>"),Rd=E('<div class="card-stats svelte-4rkta9"><span> </span> <!></div>'),Od=E('<button><div class="card-header svelte-4rkta9"><span class="card-name svelte-4rkta9"> </span> <span class="card-type svelte-4rkta9"> </span></div> <p class="card-description svelte-4rkta9"> </p> <p class="card-rule svelte-4rkta9"> </p> <!></button>'),zd=E('<div class="power-card-selection svelte-4rkta9" data-testid="power-card-selection"><div class="modal-overlay svelte-4rkta9" role="button" tabindex="-1" aria-label="Close modal"></div> <div class="modal-content svelte-4rkta9"><div class="modal-header svelte-4rkta9"><h2 class="svelte-4rkta9"> </h2> <button class="close-button svelte-4rkta9" data-testid="close-power-selection">Ã</button></div> <div class="selection-status svelte-4rkta9" data-testid="selection-status"><!></div> <div class="card-sections svelte-4rkta9"><div class="card-section svelte-4rkta9"><h3 class="svelte-4rkta9">Custom Ability (Automatic)</h3> <div class="card-grid svelte-4rkta9"><!></div></div> <div class="card-section svelte-4rkta9"><h3 class="svelte-4rkta9">Utility Power (Select 1)</h3> <div class="card-grid svelte-4rkta9" data-testid="utility-cards"></div></div> <div class="card-section svelte-4rkta9"><h3 class="svelte-4rkta9">At-Will Powers (Select 2)</h3> <div class="card-grid svelte-4rkta9" data-testid="atwill-cards"></div></div> <div class="card-section svelte-4rkta9"><h3 class="svelte-4rkta9">Daily Power (Select 1)</h3> <div class="card-grid svelte-4rkta9" data-testid="daily-cards"></div></div></div> <div class="modal-footer svelte-4rkta9"><button class="done-button svelte-4rkta9" data-testid="done-power-selection">Done</button></div></div></div>');function jd(e,t){Oe(t,!0);let n=Vt(t,"edge",3,"bottom");const a=Q(()=>Lc(t.hero.heroClass)),r=Q(()=>qc(t.hero.heroClass)),s=Q(()=>Uc(t.hero.heroClass)),o=Q(()=>wi[t.hero.id]),c=Q(()=>i(o)?Gt(i(o)):null),l=Q(()=>t.selection.utility!==null&&t.selection.atWills.length===2&&t.selection.daily!==null);function u(b){X.dispatch(Kc({heroId:t.hero.id,cardId:b}))}function f(b){X.dispatch(Qc({heroId:t.hero.id,cardId:b}))}function m(b){X.dispatch(Zc({heroId:t.hero.id,cardId:b}))}function g(b){return t.selection.utility===b}function _(b){return t.selection.atWills.includes(b)}function A(b){return t.selection.daily===b}function L(b){return t.selection.atWills.includes(b)||t.selection.atWills.length<2}var x=zd(),k=d(x);k.__click=function(...b){t.onClose?.apply(this,b)},k.__keydown=b=>b.key==="Escape"&&t.onClose();var D=h(k,2),I=d(D),P=d(I),K=d(P),q=h(P,2);q.__click=function(...b){t.onClose?.apply(this,b)};var W=h(I,2),G=d(W);{var Z=b=>{var M=Td();S(b,M)},re=b=>{var M=Sd(),Y=d(M);B(()=>w(Y,`Select: 1 Utility (${t.selection.utility?"â":"â"}), 
          2 At-Wills (${t.selection.atWills.length??""}/2), 
          1 Daily (${t.selection.daily?"â":"â"})`)),S(b,M)};j(G,b=>{i(l)?b(Z):b(re,!1)})}var ue=h(W,2),N=d(ue),ke=h(d(N),2),$=d(ke);{var oe=b=>{var M=Md(),Y=d(M),de=d(Y),fe=d(de),he=h(de,2),xe=d(he),pe=h(Y,2),_e=d(pe),ve=h(pe,2),Me=d(ve),be=h(ve,2);{var je=Ae=>{var wt=Cd(),me=d(wt),Ee=d(me),$e=h(me,2);{var ht=Pe=>{var pt=Id(),et=d(pt);B(()=>w(et,`Damage: ${i(c).damage??""}`)),S(Pe,pt)};j($e,Pe=>{i(c).damage!==void 0&&Pe(ht)})}B(()=>w(Ee,`Attack: +${i(c).attackBonus??""}`)),S(Ae,wt)};j(be,Ae=>{i(c).attackBonus!==void 0&&Ae(je)})}B(()=>{w(fe,i(c).name),w(xe,i(c).type),w(_e,i(c).description),w(Me,i(c).rule)}),S(b,M)};j($,b=>{i(c)&&b(oe)})}var ie=h(N,2),J=h(d(ie),2);Re(J,21,()=>i(s),b=>b.id,(b,M)=>{var Y=Ad();let de;Y.__click=()=>u(i(M).id);var fe=d(Y),he=d(fe),xe=d(he),pe=h(he,2),_e=d(pe),ve=h(fe,2),Me=d(ve),be=h(ve,2),je=d(be);B(Ae=>{de=De(Y,1,"power-card svelte-4rkta9",null,de,Ae),z(Y,"data-testid",`utility-card-${i(M).id??""}`),w(xe,i(M).name),w(_e,i(M).type),w(Me,i(M).description),w(je,i(M).rule)},[()=>({selected:g(i(M).id)})]),S(b,Y)});var se=h(ie,2),U=h(d(se),2);Re(U,21,()=>i(a),b=>b.id,(b,M)=>{var Y=Hd();let de;Y.__click=()=>f(i(M).id);var fe=d(Y),he=d(fe),xe=d(he),pe=h(he,2),_e=d(pe),ve=h(fe,2),Me=d(ve),be=h(ve,2),je=d(be),Ae=h(be,2);{var wt=me=>{var Ee=Pd(),$e=d(Ee),ht=d($e),Pe=h($e,2);{var pt=et=>{var kt=Ed(),Bt=d(kt);B(()=>w(Bt,`Damage: ${i(M).damage??""}`)),S(et,kt)};j(Pe,et=>{i(M).damage!==void 0&&et(pt)})}B(()=>w(ht,`Attack: +${i(M).attackBonus??""}`)),S(me,Ee)};j(Ae,me=>{i(M).attackBonus!==void 0&&me(wt)})}B((me,Ee)=>{de=De(Y,1,"power-card svelte-4rkta9",null,de,me),Y.disabled=Ee,z(Y,"data-testid",`atwill-card-${i(M).id??""}`),w(xe,i(M).name),w(_e,i(M).type),w(Me,i(M).description),w(je,i(M).rule)},[()=>({selected:_(i(M).id),disabled:!L(i(M).id)}),()=>!L(i(M).id)]),S(b,Y)});var H=h(se,2),C=h(d(H),2);Re(C,21,()=>i(r),b=>b.id,(b,M)=>{var Y=Od();let de;Y.__click=()=>m(i(M).id);var fe=d(Y),he=d(fe),xe=d(he),pe=h(he,2),_e=d(pe),ve=h(fe,2),Me=d(ve),be=h(ve,2),je=d(be),Ae=h(be,2);{var wt=me=>{var Ee=Rd(),$e=d(Ee),ht=d($e),Pe=h($e,2);{var pt=et=>{var kt=Dd(),Bt=d(kt);B(()=>w(Bt,`Damage: ${i(M).damage??""}`)),S(et,kt)};j(Pe,et=>{i(M).damage!==void 0&&et(pt)})}B(()=>w(ht,`Attack: +${i(M).attackBonus??""}`)),S(me,Ee)};j(Ae,me=>{i(M).attackBonus!==void 0&&me(wt)})}B(me=>{de=De(Y,1,"power-card svelte-4rkta9",null,de,me),z(Y,"data-testid",`daily-card-${i(M).id??""}`),w(xe,i(M).name),w(_e,i(M).type),w(Me,i(M).description),w(je,i(M).rule)},[()=>({selected:A(i(M).id)})]),S(b,Y)});var O=h(ue,2),ae=d(O);ae.__click=function(...b){t.onClose?.apply(this,b)},B(b=>{dt(D,`transform: rotate(${b??""}deg);`),w(K,`Select Power Cards for ${t.hero.name??""}`),ae.disabled=!i(l)},[()=>ua(n())]),S(e,x),ze()}Je(["click","keydown"]);var Nd=E('<button><img class="hero-image svelte-1rwnzlz"/> <div class="hero-info svelte-1rwnzlz"><span class="hero-name svelte-1rwnzlz" data-testid="hero-name"> </span> <span class="hero-class svelte-1rwnzlz"> </span></div></button>'),Bd=E('<button><img class="hero-image svelte-1rwnzlz"/> <div class="hero-info svelte-1rwnzlz"><span class="hero-name svelte-1rwnzlz" data-testid="hero-name"> </span> <span class="hero-class svelte-1rwnzlz"> </span></div></button>'),Fd=E('<span class="power-status complete svelte-1rwnzlz">â Powers Selected</span>'),Ld=E('<span class="power-status incomplete svelte-1rwnzlz">Select Powers</span>'),qd=E('<button><img class="selected-hero-image svelte-1rwnzlz"/> <div class="selected-hero-info svelte-1rwnzlz"><span class="selected-hero-name svelte-1rwnzlz"> </span> <!></div></button>'),Ud=E('<div class="selected-heroes svelte-1rwnzlz" data-testid="selected-heroes-list"></div>'),Wd=E('<button><img class="hero-image svelte-1rwnzlz"/> <div class="hero-info svelte-1rwnzlz"><span class="hero-name svelte-1rwnzlz" data-testid="hero-name"> </span> <span class="hero-class svelte-1rwnzlz"> </span></div></button>'),Yd=E('<button><img class="hero-image svelte-1rwnzlz"/> <div class="hero-info svelte-1rwnzlz"><span class="hero-name svelte-1rwnzlz" data-testid="hero-name"> </span> <span class="hero-class svelte-1rwnzlz"> </span></div></button>'),Vd=E('<div class="character-select svelte-1rwnzlz" data-testid="character-select"><div class="edge-zone edge-top svelte-1rwnzlz" data-testid="edge-top"><div class="hero-row svelte-1rwnzlz" data-testid="hero-grid"></div></div> <div class="middle-section svelte-1rwnzlz"><div class="edge-zone edge-left svelte-1rwnzlz" data-testid="edge-left"><div class="hero-column svelte-1rwnzlz"></div></div> <div class="center-zone svelte-1rwnzlz" data-testid="center-zone"><h1 class="svelte-1rwnzlz">Select Your Heroes</h1> <p class="instructions svelte-1rwnzlz">Choose 1-5 heroes for your adventure</p> <p class="instructions svelte-1rwnzlz">Tap a hero from your edge of the table</p> <div class="selection-info svelte-1rwnzlz"><span data-testid="selected-count"> </span></div> <!> <button class="start-button svelte-1rwnzlz" data-testid="start-game-button">Start Adventure</button></div> <div class="edge-zone edge-right svelte-1rwnzlz" data-testid="edge-right"><div class="hero-column svelte-1rwnzlz"></div></div></div> <div class="edge-zone edge-bottom svelte-1rwnzlz" data-testid="edge-bottom"><div class="hero-row svelte-1rwnzlz"></div></div></div> <!>',1);function Xd(e,t){Oe(t,!0);let n=V(Ie([])),a=V(Ie([])),r=V(Ie({})),s=V(Ie({})),o=V(null);Et(()=>{const H=X.subscribe(()=>{const O=X.getState();T(n,O.heroes.selectedHeroes,!0),T(a,O.heroes.availableHeroes,!0),T(r,O.heroes.heroEdgeMap,!0),T(s,O.heroes.powerCardSelections,!0)}),C=X.getState();return T(n,C.heroes.selectedHeroes,!0),T(a,C.heroes.availableHeroes,!0),T(r,C.heroes.heroEdgeMap,!0),T(s,C.heroes.powerCardSelections,!0),H});function c(H,C){return i(r)[H]===C}function l(H,C){const O=i(r)[H];return O!==void 0&&O!==C}function u(H,C){X.dispatch(Gc({heroId:H,edge:C}))}function f(){i(n).length>0&&g()&&(X.dispatch(Jc()),X.dispatch(nd({heroIds:i(n).map(H=>H.id)})))}function m(H){const C=i(s)[H];return C?C.utility!==null&&C.atWills.length===2&&C.daily!==null:!1}function g(){return i(n).every(H=>m(H.id))}function _(){return i(n).length>=1&&i(n).length<=5&&g()}function A(H){T(o,H,!0)}function L(){T(o,null)}var x=Vd(),k=Ce(x),D=d(k),I=d(D);Re(I,21,()=>i(a),H=>H.id,(H,C)=>{var O=Nd();let ae;O.__click=()=>u(i(C).id,"top");var b=d(O),M=h(b,2),Y=d(M),de=d(Y),fe=h(Y,2),he=d(fe);B((xe,pe,_e)=>{ae=De(O,1,"hero-card svelte-1rwnzlz",null,ae,xe),z(O,"data-testid",`hero-${i(C).id??""}-top`),O.disabled=pe,z(b,"src",_e),z(b,"alt",i(C).name),w(de,i(C).name),w(he,i(C).heroClass)},[()=>({selected:c(i(C).id,"top"),unavailable:l(i(C).id,"top")}),()=>l(i(C).id,"top"),()=>qe(i(C).imagePath)]),S(H,O)});var P=h(D,2),K=d(P),q=d(K);Re(q,21,()=>i(a),H=>H.id,(H,C)=>{var O=Bd();let ae;O.__click=()=>u(i(C).id,"left");var b=d(O),M=h(b,2),Y=d(M),de=d(Y),fe=h(Y,2),he=d(fe);B((xe,pe,_e)=>{ae=De(O,1,"hero-card svelte-1rwnzlz",null,ae,xe),z(O,"data-testid",`hero-${i(C).id??""}-left`),O.disabled=pe,z(b,"src",_e),z(b,"alt",i(C).name),w(de,i(C).name),w(he,i(C).heroClass)},[()=>({selected:c(i(C).id,"left"),unavailable:l(i(C).id,"left")}),()=>l(i(C).id,"left"),()=>qe(i(C).imagePath)]),S(H,O)});var W=h(K,2),G=h(d(W),6),Z=d(G),re=d(Z),ue=h(G,2);{var N=H=>{var C=Ud();Re(C,21,()=>i(n),O=>O.id,(O,ae)=>{var b=qd();let M;b.__click=()=>A(i(ae));var Y=d(b),de=h(Y,2),fe=d(de),he=d(fe),xe=h(fe,2);{var pe=ve=>{var Me=Fd();S(ve,Me)},_e=ve=>{var Me=Ld();S(ve,Me)};j(xe,ve=>{m(i(ae).id)?ve(pe):ve(_e,!1)})}B((ve,Me)=>{M=De(b,1,"selected-hero-item svelte-1rwnzlz",null,M,ve),z(b,"data-testid",`select-powers-${i(ae).id??""}`),z(Y,"src",Me),z(Y,"alt",i(ae).name),w(he,i(ae).name)},[()=>({complete:m(i(ae).id)}),()=>qe(i(ae).imagePath)]),S(O,b)}),S(H,C)};j(ue,H=>{i(n).length>0&&H(N)})}var ke=h(ue,2);ke.__click=f;var $=h(W,2),oe=d($);Re(oe,21,()=>i(a),H=>H.id,(H,C)=>{var O=Wd();let ae;O.__click=()=>u(i(C).id,"right");var b=d(O),M=h(b,2),Y=d(M),de=d(Y),fe=h(Y,2),he=d(fe);B((xe,pe,_e)=>{ae=De(O,1,"hero-card svelte-1rwnzlz",null,ae,xe),z(O,"data-testid",`hero-${i(C).id??""}-right`),O.disabled=pe,z(b,"src",_e),z(b,"alt",i(C).name),w(de,i(C).name),w(he,i(C).heroClass)},[()=>({selected:c(i(C).id,"right"),unavailable:l(i(C).id,"right")}),()=>l(i(C).id,"right"),()=>qe(i(C).imagePath)]),S(H,O)});var ie=h(P,2),J=d(ie);Re(J,21,()=>i(a),H=>H.id,(H,C)=>{var O=Yd();let ae;O.__click=()=>u(i(C).id,"bottom");var b=d(O),M=h(b,2),Y=d(M),de=d(Y),fe=h(Y,2),he=d(fe);B((xe,pe,_e)=>{ae=De(O,1,"hero-card svelte-1rwnzlz",null,ae,xe),z(O,"data-testid",`hero-${i(C).id??""}`),O.disabled=pe,z(b,"src",_e),z(b,"alt",i(C).name),w(de,i(C).name),w(he,i(C).heroClass)},[()=>({selected:c(i(C).id,"bottom"),unavailable:l(i(C).id,"bottom")}),()=>l(i(C).id,"bottom"),()=>qe(i(C).imagePath)]),S(H,O)});var se=h(k,2);{var U=H=>{jd(H,{get hero(){return i(o)},get selection(){return i(s)[i(o).id]},onClose:L,get edge(){return i(r)[i(o).id]}})};j(se,H=>{i(o)&&H(U)})}B(H=>{w(re,`${i(n).length??""} heroes selected`),ke.disabled=H},[()=>!_()]),S(e,x),ze()}Je(["click"]);var Gd=E('<button class="move-square svelte-ehd1hj" data-testid="move-square"><span class="sr-only svelte-ehd1hj"> </span></button>'),Kd=E('<div class="movement-overlay svelte-ehd1hj" data-testid="movement-overlay"></div>');function Qd(e,t){Oe(t,!0);function n(s){const o=t.tileOffsetX+s.x*t.cellSize,c=t.tileOffsetY+s.y*t.cellSize;return`left: ${o}px; top: ${c}px; width: ${t.cellSize}px; height: ${t.cellSize}px;`}function a(s,o){s.stopPropagation(),t.onSquareClick(o)}var r=Kd();Re(r,21,()=>t.validMoveSquares,s=>`${s.x},${s.y}`,(s,o)=>{var c=Gd();c.__click=f=>a(f,i(o));var l=d(c),u=d(l);B(f=>{z(c,"data-position-x",i(o).x),z(c,"data-position-y",i(o).y),dt(c,f),w(u,`Move to (${i(o).x??""}, ${i(o).y??""})`)},[()=>n(i(o))]),S(s,c)}),S(e,r),ze()}Je(["click"]);var Zd=E('<div class="tile-deck-counter svelte-9649r" data-testid="tile-deck-counter"><span class="deck-icon svelte-9649r">ð¦</span> <span class="deck-count svelte-9649r" data-testid="tile-deck-count"> </span> <span class="deck-label svelte-9649r">tiles</span></div>');function Jd(e,t){var n=Zd(),a=h(d(n),2),r=d(a);B(()=>w(r,t.tileCount)),S(e,n)}var $d=E('<div class="unexplored-edge svelte-12eown4" data-testid="unexplored-edge"><span class="question-mark svelte-12eown4">?</span></div>');function ef(e,t){Oe(t,!0);const a=(()=>{const c=t.cellSize*1.5,l=36;switch(t.direction){case"north":return{left:`${t.tileWidth/2-c/2}px`,top:`${l-8/2}px`,width:`${c}px`,height:"8px"};case"south":return{left:`${t.tileWidth/2-c/2}px`,bottom:`${l-8/2}px`,width:`${c}px`,height:"8px"};case"east":let u;return t.subTileId==="start-tile-north"?u=t.tileHeight/4-c/2:t.subTileId==="start-tile-south"?u=3*t.tileHeight/4-c/2:u=t.tileHeight/2-c/2,{right:`${l-8/2}px`,top:`${u}px`,width:"8px",height:`${c}px`};case"west":let f;return t.subTileId==="start-tile-north"?f=t.tileHeight/4-c/2:t.subTileId==="start-tile-south"?f=3*t.tileHeight/4-c/2:f=t.tileHeight/2-c/2,{left:`${l-8/2}px`,top:`${f}px`,width:"8px",height:`${c}px`}}})(),r=Object.entries(a).map(([o,c])=>`${o}: ${c}`).join("; ");var s=$d();B(()=>{z(s,"data-direction",t.direction),dt(s,r)}),S(e,s),ze()}var tf=E('<div class="monster-token svelte-1g5ysl" data-testid="monster-token"><img class="token-image svelte-1g5ysl"/> <span class="token-label svelte-1g5ysl"> </span></div>');function nf(e,t){Oe(t,!0);const n=Q(()=>Dn.find(c=>c.id===t.monster.monsterId)),a=Q(()=>()=>{const c=t.cellSize/2,l=t.tilePixelOffset.x+t.tileOffsetX+t.monster.position.x*t.cellSize+c,u=t.tilePixelOffset.y+t.tileOffsetY+t.monster.position.y*t.cellSize+c;return`left: ${l}px; top: ${u}px;`});var r=Le(),s=Ce(r);{var o=c=>{var l=tf(),u=d(l),f=h(u,2),m=d(f);B((g,_)=>{z(l,"data-monster-id",t.monster.instanceId),dt(l,g),z(u,"src",_),z(u,"alt",i(n).name),w(m,i(n).name)},[()=>i(a)(),()=>qe(i(n).imagePath)]),S(c,l)};j(s,c=>{i(n)&&c(o)})}S(e,r),ze()}var af=E('<div class="monster-card-overlay svelte-at5lsg" role="dialog" aria-modal="true" aria-label="Monster spawned" tabindex="0" data-testid="monster-card-overlay"><div class="monster-card svelte-at5lsg" role="article" data-testid="monster-card"><div class="card-header svelte-at5lsg"><h3 class="monster-name svelte-at5lsg" data-testid="monster-name"> </h3> <button class="dismiss-button svelte-at5lsg" aria-label="Dismiss monster card" data-testid="dismiss-monster-card">â</button></div> <div class="card-image svelte-at5lsg"><img class="monster-image svelte-at5lsg"/></div> <div class="card-stats svelte-at5lsg"><div class="stat svelte-at5lsg"><span class="stat-label svelte-at5lsg">AC</span> <span class="stat-value svelte-at5lsg" data-testid="monster-ac"> </span></div> <div class="stat svelte-at5lsg"><span class="stat-label svelte-at5lsg">HP</span> <span class="stat-value svelte-at5lsg" data-testid="monster-hp"> </span></div> <div class="stat svelte-at5lsg"><span class="stat-label svelte-at5lsg">XP</span> <span class="stat-value svelte-at5lsg" data-testid="monster-xp"> </span></div></div> <p class="card-hint svelte-at5lsg">Click anywhere to dismiss</p></div></div>');function rf(e,t){Oe(t,!0);let n=Vt(t,"edge",3,"bottom");const a=Q(()=>Dn.find(u=>u.id===t.monsterId));function r(){t.onDismiss&&t.onDismiss()}function s(u){(u.key==="Escape"||u.key==="Enter"||u.key===" ")&&(u.preventDefault(),r())}var o=Le(),c=Ce(o);{var l=u=>{var f=af();f.__click=r,f.__keydown=s;var m=d(f);m.__click=N=>N.stopPropagation(),m.__keydown=N=>N.stopPropagation();var g=d(m),_=d(g),A=d(_),L=h(_,2);L.__click=r;var x=h(g,2),k=d(x),D=h(x,2),I=d(D),P=h(d(I),2),K=d(P),q=h(I,2),W=h(d(q),2),G=d(W),Z=h(q,2),re=h(d(Z),2),ue=d(re);B((N,ke)=>{dt(m,`transform: rotate(${N??""}deg);`),w(A,i(a).name),z(k,"src",ke),z(k,"alt",i(a).name),w(K,i(a).ac),w(G,i(a).hp),w(ue,i(a).xp)},[()=>ua(n()),()=>qe(i(a).imagePath)]),S(u,f)};j(c,u=>{i(a)&&u(l)})}S(e,o),ze()}Je(["click","keydown"]);var sf=E('<div class="encounter-card-overlay svelte-1i2wtj7" role="dialog" aria-modal="true" aria-label="Encounter card drawn" tabindex="0" data-testid="encounter-card-overlay"><div class="encounter-card svelte-1i2wtj7" role="article" data-testid="encounter-card"><div class="card-header svelte-1i2wtj7"><span class="type-badge svelte-1i2wtj7" data-testid="encounter-type"> </span> <button class="dismiss-button svelte-1i2wtj7" aria-label="Dismiss encounter card" data-testid="dismiss-encounter-card">â</button></div> <h3 class="encounter-name svelte-1i2wtj7" data-testid="encounter-name"> </h3> <div class="card-image svelte-1i2wtj7"><img class="encounter-image svelte-1i2wtj7"/></div> <div class="card-description svelte-1i2wtj7" data-testid="encounter-description"> </div> <div class="effect-summary svelte-1i2wtj7" data-testid="encounter-effect"><span class="effect-label svelte-1i2wtj7">Effect:</span> <span class="effect-value svelte-1i2wtj7"> </span></div> <div class="button-row svelte-1i2wtj7"><button class="cancel-button svelte-1i2wtj7" data-testid="encounter-cancel">Cancel (5 XP)</button> <button class="accept-button svelte-1i2wtj7" data-testid="encounter-continue">Accept</button></div> <p class="card-hint svelte-1i2wtj7">Press Enter to accept or use buttons above</p></div></div>');function of(e,t){Oe(t,!0);let n=Vt(t,"partyXp",3,0),a=Vt(t,"edge",3,"bottom"),r=Q(()=>n()>=ir);function s(){t.onDismiss&&t.onDismiss()}function o(){t.onCancel&&i(r)&&t.onCancel()}function c(N){(N.key==="Escape"||N.key==="Enter"||N.key===" ")&&(N.preventDefault(),s())}function l(N){switch(N){case"event":return"â¡";case"trap":return"â ï¸";case"hazard":return"â ï¸";case"curse":return"ð®";case"environment":return"ð«ï¸";default:return"â"}}function u(N){switch(N.type){case"damage":return N.target==="active-hero"?`Active hero takes ${N.amount} damage`:`All heroes take ${N.amount} damage`;case"environment":return"Environment effect (not implemented)";case"curse":return`Curse (${N.duration} turns) (not implemented)`;case"trap":return`Trap - DC ${N.disableDC} to disable (not implemented)`;case"hazard":return`Hazard - AC ${N.ac}, ${N.damage} damage (not implemented)`;default:return"Unknown effect"}}var f=sf();f.__click=s,f.__keydown=c;var m=d(f);m.__click=N=>N.stopPropagation(),m.__keydown=N=>N.stopPropagation();var g=d(m),_=d(g),A=d(_),L=h(_,2);L.__click=s;var x=h(g,2),k=d(x),D=h(x,2),I=d(D),P=h(D,2),K=d(P),q=h(P,2),W=h(d(q),2),G=d(W),Z=h(q,2),re=d(Z);re.__click=o;var ue=h(re,2);ue.__click=s,B((N,ke,$,oe,ie)=>{dt(m,`transform: rotate(${N??""}deg);`),w(A,`${ke??""} ${$??""}`),w(k,t.encounter.name),z(I,"src",oe),z(I,"alt",t.encounter.name),w(K,t.encounter.description),w(G,ie),re.disabled=!i(r),z(re,"title",i(r)?"Spend 5 XP to cancel this encounter":"Not enough XP (need 5)")},[()=>ua(a()),()=>l(t.encounter.type),()=>t.encounter.type.toUpperCase(),()=>qe(t.encounter.imagePath),()=>u(t.encounter.effect)]),Al("error",I,N=>{const ke=N.target;ke&&t.encounter&&(ke.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100"><rect fill="%23333" width="100" height="100"/><text x="50" y="50" fill="%23fff" text-anchor="middle" dominant-baseline="central" font-size="40">'+l(t.encounter.type)+"</text></svg>")}),S(e,f),ze()}Je(["click","keydown"]);function Fn(e){const t=e.rule.toLowerCase(),n={originalRule:e.rule},a=lf(t);a&&(n.attack=a);const r=cf(t);r&&(n.movement=r);const s=uf(t);s.length>0&&(n.hitEffects=s);const o=df(t);o.length>0&&(n.missEffects=o);const c=ff(t);c.length>0&&(n.hitOrMissEffects=c);const l=vf(t,n);return l&&(n.unparsed=!0,n.unparsedReason=l),n}function lf(e){let t=1,n=1,a="adjacent",r=0,s=!1;const o=e.match(/attack\s+(?:one\s+)?(?:adjacent\s+)?monster\s+(twice|three times|four times)/);if(o){const f=o[1];t=f==="twice"?2:f==="three times"?3:4,s=!0}const c=e.match(/attack\s+(two|three|four)\s+times/);if(c){const f=c[1];t=f==="two"?2:f==="three"?3:4}const l=e.match(/attack\s+(?:up\s+to\s+)?(one\s+or\s+two|two|three|four)\s+(?:adjacent\s+)?monsters?/);if(l){const f=l[1];f==="one or two"||f==="two"?n=2:f==="three"?n=3:f==="four"&&(n=4),s=!1}const u=e.match(/attack\s+up\s+to\s+(two|three|four)\s+monsters?/);if(u){const f=u[1];n=f==="two"?2:f==="three"?3:4,s=!1}if(e.includes("attack each monster")&&(n=-1,s=!1),e.includes("within 1 tile")?(a="within-tiles",r=1):e.includes("within 2 tiles")?(a="within-tiles",r=2):e.includes("within 3 tiles")?(a="within-tiles",r=3):(e.includes("on your tile")||e.includes("on that tile"))&&(a="tile",r=0),!!e.includes("attack"))return{attackCount:t,maxTargets:n,targetType:a,range:r,sameTarget:s}}function cf(e){if(e.includes("move up to your speed, then attack")||e.includes("move up to your speed. then attack"))return{moveFirst:!0,moveDistance:-1,moveOptional:!0};if(e.includes("move your speed")&&(e.indexOf("move your speed")<e.indexOf("attack")||!e.includes("attack")))return{moveFirst:!0,moveDistance:-1,moveOptional:!1};e.includes("after the attack")&&e.includes("move")}function uf(e){const t=[],n=e.match(/if\s+you\s+hit[^.]*regain\s+(\d+)\s+hit\s+points?/);n&&t.push({type:"heal",amount:parseInt(n[1],10)});const a=e.match(/if\s+you\s+hit[^.]*deal\s+\+(\d+)\s+damage/);a&&t.push({type:"extra-damage",amount:parseInt(a[1],10)});const r=e.match(/if\s+you\s+hit\s+and\s+([^,]+),\s+deal\s+\+(\d+)\s+damage/);return r&&t.push({type:"conditional-damage",condition:r[1],amount:parseInt(r[2],10)}),e.includes("if you hit")&&e.includes("move the monster")&&t.push({type:"move-monster"}),t}function df(e){const t=[];return e.includes("if you miss")&&e.includes("do not flip")&&t.push({type:"no-flip"}),e.includes("if the attack misses, do not flip")&&t.push({type:"no-flip"}),t}function ff(e){const t=[],n=e.match(/hit\s+or\s+miss[:\s]*([^.]+)/);if(n){const a=n[1],r=a.match(/regain\s+(\d+)\s+hit\s+points?/);r&&t.push({type:"heal",amount:parseInt(r[1],10)});const s=a.match(/gains?\s+a?\s*\+(\d+)\s+bonus\s+to\s+ac/);if(s&&t.push({type:"ac-bonus",amount:parseInt(s[1],10)}),a.includes("hero")&&a.includes("move")){const o=a.match(/moves?\s+(\d+)\s+squares?/);t.push({type:"ally-move",amount:o?parseInt(o[1],10):void 0})}a.includes("place")&&a.includes("monster")&&t.push({type:"move-monster"})}return t}function vf(e,t){const n=[{pattern:/place\s+\d+\s+\w+\s+tokens?/,reason:"Token placement mechanics"},{pattern:/instead\s+of\s+moving/,reason:"Movement substitution mechanics"},{pattern:/during\s+your\s+exploration\s+phase/,reason:"Exploration phase effects"},{pattern:/until\s+the\s+start\s+of/,reason:"Duration-based effects"},{pattern:/pass\s+that\s+monster's\s+card/,reason:"Monster control transfer"},{pattern:/swap\s+positions/,reason:"Position swapping mechanics"},{pattern:/place\s+your\s+hero/,reason:"Hero teleportation/placement"},{pattern:/use\s+an?\s+at-will\s+power\s+immediately/,reason:"Chained power usage"},{pattern:/condition\s+on\s+that\s+hero/,reason:"Condition removal mechanics"},{pattern:/disable\s+check/,reason:"Trap disable mechanics"},{pattern:/reroll/,reason:"Reroll mechanics"},{pattern:/cancel\s+the\s+encounter/,reason:"Encounter cancellation"}];for(const{pattern:a,reason:r}of n)if(a.test(e)){if(!t.attack||t.attack.attackCount===1&&t.attack.maxTargets===1)continue;return r}}function hf(e){return e.attack?e.attack.attackCount>1||e.attack.maxTargets>1||e.attack.maxTargets===-1:!1}function xa(e){return e.movement?.moveFirst===!0}function pf(e){const t=[];if(e.movement?.moveFirst&&(e.movement.moveOptional?t.push("Move up to your speed"):t.push("Move your speed")),e.attack){const{attackCount:n,maxTargets:a,targetType:r,range:s,sameTarget:o}=e.attack;let c="";n>1&&o?c=`Attack ${n===2?"twice":n===3?"three times":"four times"}`:a===-1?c="Attack all monsters":a>1?c=`Attack up to ${a} monsters`:c="Attack one monster",r==="adjacent"?c+=" (adjacent)":r==="within-tiles"?c+=` (within ${s} tile${s>1?"s":""})`:r==="tile"&&(c+=" (on tile)"),t.push(c)}if(e.hitEffects&&e.hitEffects.length>0)for(const n of e.hitEffects)n.type==="heal"?t.push(`On hit: Regain ${n.amount} HP`):n.type==="extra-damage"&&t.push(`On hit: +${n.amount} damage`);if(e.hitOrMissEffects&&e.hitOrMissEffects.length>0)for(const n of e.hitOrMissEffects)n.type==="heal"?t.push(`Hit or miss: Regain ${n.amount} HP`):n.type==="ac-bonus"&&t.push(`Hit or miss: +${n.amount} AC`);return t.join(", then ")}var mf=E('<span class="panel-title svelte-77qxlp"> </span>'),gf=E('<span class="panel-title svelte-77qxlp">Move First, Then Attack</span>'),_f=E('<span class="panel-title svelte-77qxlp">Select Attack Power</span>'),yf=E('<div class="multi-attack-info svelte-77qxlp" data-testid="multi-attack-info"><span class="multi-attack-card svelte-77qxlp"> </span> <span class="multi-attack-progress svelte-77qxlp"> </span></div>'),wf=E('<span class="special-badge svelte-77qxlp"> </span>'),kf=E('<div class="card-effect svelte-77qxlp"> </div>'),xf=E('<button><div class="card-header svelte-77qxlp"><span class="card-name svelte-77qxlp"> </span> <div class="card-badges svelte-77qxlp"><!> <span class="card-type-badge svelte-77qxlp"> </span></div></div> <div class="card-stats svelte-77qxlp"><span class="attack-bonus svelte-77qxlp"> </span> <span class="damage svelte-77qxlp"> </span></div> <!></button>'),bf=E('<div class="card-list svelte-77qxlp" data-testid="attack-card-list"></div>'),Tf=E("<span> </span>"),Sf=E("<span> </span>"),If=E('<span class="attack-multiplier svelte-77qxlp"> </span>'),Cf=E('<button class="attack-button svelte-77qxlp"> <!></button>'),Mf=E('<div class="target-selection svelte-77qxlp" data-testid="target-selection"><div class="target-header svelte-77qxlp"><!></div> <div class="target-list svelte-77qxlp"></div></div>'),Af=E('<div class="select-card-hint svelte-77qxlp" data-testid="select-card-hint">Select a power card above to attack</div>'),Ef=E('<div class="power-card-attack-panel svelte-77qxlp" data-testid="power-card-attack-panel"><div class="panel-header svelte-77qxlp"><!></div> <!> <!> <!></div>');function Pf(e,t){Oe(t,!0);let n=Vt(t,"multiAttackState",3,null),a=Vt(t,"pendingMoveAttack",3,null),r=Vt(t,"canMove",3,!0),s=V(null);const o=Q(()=>()=>{const k=[];for(const D of t.heroPowerCards.cardStates){if(D.isFlipped)continue;const I=Gt(D.cardId);if(I&&I.attackBonus!==void 0){const P=Fn(I);k.push({card:I,state:D,parsed:P})}}return k});function c(k){return Dn.find(I=>I.id===k)?.name||"Unknown"}function l(k){T(s,i(s)===k?null:k,!0)}function u(k){if(i(s)===null)return;const D=Gt(i(s));if(!D)return;const I=Fn(D);if(xa(I)&&t.onStartMoveAttack&&!a()){t.onStartMoveAttack(i(s)),T(s,null);return}if(hf(I)&&I.attack&&t.onStartMultiAttack){t.onStartMultiAttack(i(s),I.attack.attackCount>1?I.attack.attackCount:1,I.attack.sameTarget,I.attack.maxTargets,I.attack.sameTarget?k:void 0),t.onAttackWithCard(i(s),k),I.attack.sameTarget||T(s,null);return}t.onAttackWithCard(i(s),k),T(s,null)}function f(k){switch(k){case"at-will":return"At-Will";case"daily":return"Daily";case"utility":return"Utility";default:return k}}function m(k){switch(k){case"at-will":return"card-atwill";case"daily":return"card-daily";case"utility":return"card-utility";default:return""}}function g(k){return xa(k)?"Move+Attack":k.attack?.attackCount===2?"x2":k.attack?.attackCount===4?"x4":k.attack?.maxTargets===2?"2 targets":k.attack?.maxTargets===-1?"All targets":null}function _(k){const D=Gt(k);if(!D)return!1;const I=Fn(D);return xa(I)?r()&&!a():!0}var A=Le(),L=Ce(A);{var x=k=>{var D=Ef(),I=d(D),P=d(I);{var K=$=>{var oe=mf(),ie=d(oe);B(()=>w(ie,`Multi-Attack: ${n().attacksCompleted+1}/${n().totalAttacks??""}`)),S($,oe)},q=$=>{var oe=Le(),ie=Ce(oe);{var J=U=>{var H=gf();S(U,H)},se=U=>{var H=_f();S(U,H)};j(ie,U=>{a()&&!a().movementCompleted?U(J):U(se,!1)},!0)}S($,oe)};j(P,$=>{n()?$(K):$(q,!1)})}var W=h(I,2);{var G=$=>{const oe=Q(()=>Gt(n().cardId));var ie=yf(),J=d(ie),se=d(J),U=h(J,2),H=d(U);B(()=>{w(se,i(oe)?.name),w(H,`Attack ${n().attacksCompleted+1} of ${n().totalAttacks??""}`)}),S($,ie)};j(W,$=>{n()&&$(G)})}var Z=h(W,2);{var re=$=>{var oe=bf();Re(oe,21,()=>i(o)(),({card:ie,state:J,parsed:se})=>ie.id,(ie,J)=>{let se=()=>i(J).card,U=()=>i(J).parsed;const H=Q(()=>g(U())),C=Q(()=>_(se().id));var O=xf();let ae;O.__click=()=>i(C)&&l(se().id);var b=d(O),M=d(b),Y=d(M),de=h(M,2),fe=d(de);{var he=me=>{var Ee=wf(),$e=d(Ee);B(()=>{z(Ee,"data-testid",`special-badge-${se().id??""}`),w($e,i(H))}),S(me,Ee)};j(fe,me=>{i(H)&&me(he)})}var xe=h(fe,2),pe=d(xe),_e=h(b,2),ve=d(_e),Me=d(ve),be=h(ve,2),je=d(be),Ae=h(_e,2);{var wt=me=>{var Ee=kf(),$e=d(Ee);B(ht=>{z(Ee,"data-testid",`card-effect-${se().id??""}`),w($e,ht)},[()=>pf(U())]),S(me,Ee)};j(Ae,me=>{U().attack&&(U().attack.attackCount>1||U().attack.maxTargets>1)&&me(wt)})}B((me,Ee)=>{ae=De(O,1,`power-card-option ${me??""}`,"svelte-77qxlp",ae,{selected:i(s)===se().id,disabled:!i(C)}),z(O,"data-testid",`attack-card-${se().id??""}`),z(O,"data-card-type",se().type),O.disabled=!i(C),w(Y,se().name),w(pe,Ee),w(Me,`+${se().attackBonus??""}`),w(je,`${se().damage??""} dmg`)},[()=>m(se().type),()=>f(se().type)]),S(ie,O)}),S($,oe)};j(Z,$=>{n()||$(re)})}var ue=h(Z,2);{var N=$=>{const oe=Q(()=>n()?.cardId??i(s)),ie=Q(()=>i(oe)?Gt(i(oe)):null),J=Q(()=>i(ie)?Fn(i(ie)):null);var se=Mf(),U=d(se),H=d(U);{var C=b=>{var M=Tf(),Y=d(M);B(()=>w(Y,`Attack ${n().attacksCompleted+1}/${n().totalAttacks??""} with ${i(ie)?.name??""}`)),S(b,M)},O=b=>{var M=Sf(),Y=d(M);B(()=>w(Y,`Attack with ${i(ie)?.name??""}`)),S(b,M)};j(H,b=>{n()?b(C):b(O,!1)})}var ae=h(U,2);Re(ae,21,()=>t.adjacentMonsters,b=>b.instanceId,(b,M)=>{const Y=Q(()=>!n()?.sameTarget||n().targetInstanceId===i(M).instanceId||n().attacksCompleted===0);var de=Le(),fe=Ce(de);{var he=xe=>{var pe=Cf();pe.__click=()=>u(i(M).instanceId);var _e=d(pe),ve=h(_e);{var Me=be=>{var je=If(),Ae=d(je);B(()=>w(Ae,`Ã${i(J).attack.attackCount??""}`)),S(be,je)};j(ve,be=>{i(J)?.attack?.attackCount&&i(J).attack.attackCount>1&&i(J).attack.sameTarget&&be(Me)})}B((be,je)=>{z(pe,"data-testid",`attack-target-${i(M).instanceId??""}`),z(pe,"aria-label",`Attack ${be??""} with ${i(ie)?.name??""}`),w(_e,`Attack ${je??""} `)},[()=>c(i(M).monsterId),()=>c(i(M).monsterId)]),S(xe,pe)};j(fe,xe=>{i(Y)&&xe(he)})}S(b,de)}),S($,se)},ke=$=>{var oe=Le(),ie=Ce(oe);{var J=se=>{var U=Af();S(se,U)};j(ie,se=>{n()||se(J)},!0)}S($,oe)};j(ue,$=>{i(s)!==null||n()?$(N):$(ke,!1)})}S(k,D)};j(L,k=>{t.adjacentMonsters.length>0&&i(o)().length>0&&k(x)})}S(e,A),ze()}Je(["click"]);var Hf=E('<span class="result-text critical svelte-1jt2qdd" data-testid="result-text">âï¸ CRITICAL HIT!</span>'),Df=E('<span class="result-text hit svelte-1jt2qdd" data-testid="result-text">â HIT!</span>'),Rf=E('<span class="result-text miss svelte-1jt2qdd" data-testid="result-text">â MISS!</span>'),Of=E('<div class="damage-info svelte-1jt2qdd" data-testid="damage-info"><span class="damage-value svelte-1jt2qdd"> </span> <span class="damage-label svelte-1jt2qdd"> </span></div>'),zf=E('<div class="combat-result-overlay svelte-1jt2qdd" role="dialog" aria-modal="true" aria-label="Combat result" tabindex="0" data-testid="combat-result-overlay"><div role="document" data-testid="combat-result"><div class="result-header svelte-1jt2qdd"><h3 class="attacker-info svelte-1jt2qdd" data-testid="attacker-info"> </h3> <button class="dismiss-button svelte-1jt2qdd" aria-label="Dismiss combat result" data-testid="dismiss-combat-result">â</button></div> <div class="dice-roll-section svelte-1jt2qdd"><div class="dice-container svelte-1jt2qdd"><span class="d20-icon svelte-1jt2qdd" aria-label="D20 die">D20</span> <span class="roll-value svelte-1jt2qdd" data-testid="roll-value"> </span></div> <div class="roll-breakdown svelte-1jt2qdd"><div class="breakdown-row svelte-1jt2qdd"><span class="breakdown-label svelte-1jt2qdd">Roll:</span> <span class="breakdown-value svelte-1jt2qdd" data-testid="dice-roll"> </span></div> <div class="breakdown-row svelte-1jt2qdd"><span class="breakdown-label svelte-1jt2qdd">+ Bonus:</span> <span class="breakdown-value svelte-1jt2qdd" data-testid="attack-bonus"> </span></div> <div class="breakdown-divider svelte-1jt2qdd"></div> <div class="breakdown-row total svelte-1jt2qdd"><span class="breakdown-label svelte-1jt2qdd">Total:</span> <span class="breakdown-value svelte-1jt2qdd" data-testid="attack-total"> </span></div> <div class="breakdown-row target svelte-1jt2qdd"><span class="breakdown-label svelte-1jt2qdd">vs AC:</span> <span class="breakdown-value svelte-1jt2qdd" data-testid="target-ac"> </span></div></div></div> <div class="result-section svelte-1jt2qdd"><!> <!></div> <p class="dismiss-hint svelte-1jt2qdd">Click anywhere to dismiss</p></div></div>');function hs(e,t){Oe(t,!0);let n=Vt(t,"edge",3,"bottom");function a(){t.onDismiss&&t.onDismiss()}function r(U){(U.key==="Escape"||U.key==="Enter"||U.key===" ")&&(U.preventDefault(),a())}var s=zf();s.__click=a,s.__keydown=r;var o=d(s);let c;o.__click=U=>U.stopPropagation(),o.__keydown=U=>U.stopPropagation();var l=d(o),u=d(l),f=d(u),m=h(u,2);m.__click=a;var g=h(l,2),_=d(g),A=h(d(_),2),L=d(A),x=h(_,2),k=d(x),D=h(d(k),2),I=d(D),P=h(k,2),K=h(d(P),2),q=d(K),W=h(P,4),G=h(d(W),2),Z=d(G),re=h(W,2),ue=h(d(re),2),N=d(ue),ke=h(g,2),$=d(ke);{var oe=U=>{var H=Hf();S(U,H)},ie=U=>{var H=Le(),C=Ce(H);{var O=b=>{var M=Df();S(b,M)},ae=b=>{var M=Rf();S(b,M)};j(C,b=>{t.result.isHit?b(O):b(ae,!1)},!0)}S(U,H)};j($,U=>{t.result.isCritical?U(oe):U(ie,!1)})}var J=h($,2);{var se=U=>{var H=Of(),C=d(H),O=d(C),ae=h(C,2),b=d(ae);B(()=>{w(O,t.result.damage),w(b,`damage to ${t.targetName??""}`)}),S(U,H)};j(J,U=>{t.result.isHit&&U(se)})}B(U=>{c=De(o,1,"combat-result svelte-1jt2qdd",null,c,{hit:t.result.isHit,miss:!t.result.isHit,critical:t.result.isCritical}),dt(o,`transform: rotate(${U??""}deg);`),w(f,`${t.attackerName??""} attacks with ${t.attackName??""}!`),w(L,t.result.roll),w(I,t.result.roll),w(q,t.result.attackBonus),w(Z,t.result.total),w(N,t.result.targetAC)},[()=>ua(n())]),S(e,s),ze()}Je(["click","keydown"]);var jf=E('<div class="monster-move-overlay svelte-18np0et" role="dialog" aria-modal="true" aria-label="Monster move result" tabindex="0" data-testid="monster-move-overlay"><div class="monster-move-card svelte-18np0et" role="document" data-testid="monster-move-card"><div class="move-header svelte-18np0et"><h3 class="monster-name svelte-18np0et" data-testid="monster-name"> </h3> <button class="dismiss-button svelte-18np0et" aria-label="Dismiss monster move result" data-testid="dismiss-monster-move">â</button></div> <div class="move-content svelte-18np0et"><span class="move-icon svelte-18np0et">ð</span> <p class="move-text svelte-18np0et" data-testid="move-text">Moved but could not attack</p></div> <p class="dismiss-hint svelte-18np0et">Click anywhere to continue</p></div></div>');function Nf(e,t){Oe(t,!0);function n(){t.onDismiss&&t.onDismiss()}function a(f){(f.key==="Escape"||f.key==="Enter"||f.key===" ")&&(f.preventDefault(),n())}var r=jf();r.__click=n,r.__keydown=a;var s=d(r);s.__click=f=>f.stopPropagation(),s.__keydown=f=>f.stopPropagation();var o=d(s),c=d(o),l=d(c),u=h(c,2);u.__click=n,B(()=>w(l,t.monsterName)),S(e,r),ze()}Je(["click","keydown"]);var Bf=E('<div class="xp-counter svelte-1ymh8ps" data-testid="xp-counter"><span class="xp-icon svelte-1ymh8ps" aria-label="Experience Points">â­</span> <span class="xp-label svelte-1ymh8ps">XP:</span> <span class="xp-value svelte-1ymh8ps" data-testid="xp-value"> </span></div>');function Ff(e,t){var n=Bf(),a=h(d(n),4),r=d(a);B(()=>w(r,t.xp)),S(e,n)}var Lf=E('<div class="healing-surge-counter svelte-121e3gw" data-testid="healing-surge-counter"><span class="surge-icon svelte-121e3gw" aria-label="Healing Surges">â¤ï¸</span> <span class="surge-label svelte-121e3gw">Surges:</span> <span class="surge-value svelte-121e3gw" data-testid="surge-value"> </span></div>');function qf(e,t){var n=Lf(),a=h(d(n),4),r=d(a);B(()=>w(r,t.surges)),S(e,n)}var Uf=E('<div class="defeat-overlay svelte-1h38uhv" role="dialog" aria-modal="true" aria-label="Monster defeated notification" tabindex="0" data-testid="defeat-notification-overlay"><div class="defeat-notification svelte-1h38uhv" role="dialog" aria-labelledby="defeat-title" tabindex="-1" data-testid="defeat-notification"><div class="defeat-header svelte-1h38uhv"><span class="defeat-icon svelte-1h38uhv">ð</span> <h3 class="defeat-title svelte-1h38uhv" id="defeat-title" data-testid="defeat-title"> </h3> <button class="dismiss-button svelte-1h38uhv" aria-label="Dismiss notification" data-testid="dismiss-defeat-notification">â</button></div> <div class="xp-gain-section svelte-1h38uhv" data-testid="xp-gain-section"><span class="xp-icon svelte-1h38uhv">â­</span> <span class="xp-amount svelte-1h38uhv" data-testid="xp-amount"> </span></div> <p class="dismiss-hint svelte-1h38uhv">Click anywhere to dismiss</p></div></div>');function Wf(e,t){Oe(t,!0);function n(){t.onDismiss&&t.onDismiss()}function a(_){(_.key==="Escape"||_.key==="Enter"||_.key===" ")&&(_.preventDefault(),n())}var r=Uf();r.__click=n,r.__keydown=a;var s=d(r);s.__click=_=>_.stopPropagation(),s.__keydown=_=>_.stopPropagation();var o=d(s),c=h(d(o),2),l=d(c),u=h(c,2);u.__click=n;var f=h(o,2),m=h(d(f),2),g=d(m);B(()=>{w(l,`${t.monsterName??""} Defeated!`),w(g,`+${t.xpGained??""} XP`)}),S(e,r),ze()}Je(["click","keydown"]);var Yf=E('<div class="hero-section svelte-da0ogt"><img class="hero-avatar svelte-da0ogt"/> <div class="hero-level-info svelte-da0ogt"><span class="hero-name svelte-da0ogt" data-testid="level-up-hero-name"> </span> <span class="level-badge svelte-da0ogt" data-testid="level-badge"> </span></div></div>'),Vf=E('<div class="level-up-overlay svelte-da0ogt" role="dialog" aria-modal="true" aria-label="Level up notification" tabindex="0" data-testid="level-up-overlay"><div class="level-up-notification svelte-da0ogt" role="dialog" aria-labelledby="level-up-title" tabindex="-1" data-testid="level-up-notification"><div class="level-up-header svelte-da0ogt"><span class="level-up-icon svelte-da0ogt">â¨</span> <h3 class="level-up-title svelte-da0ogt" id="level-up-title" data-testid="level-up-title">LEVEL UP!</h3> <span class="level-up-icon svelte-da0ogt">â¨</span> <button class="dismiss-button svelte-da0ogt" aria-label="Dismiss notification" data-testid="dismiss-level-up">â</button></div> <!> <div class="stats-section svelte-da0ogt" data-testid="stats-section"><div class="stat-change svelte-da0ogt"><span class="stat-label svelte-da0ogt">HP</span> <span class="stat-old svelte-da0ogt" data-testid="old-hp"> </span> <span class="stat-arrow svelte-da0ogt">â</span> <span class="stat-new svelte-da0ogt" data-testid="new-hp"> </span></div> <div class="stat-change svelte-da0ogt"><span class="stat-label svelte-da0ogt">AC</span> <span class="stat-old svelte-da0ogt" data-testid="old-ac"> </span> <span class="stat-arrow svelte-da0ogt">â</span> <span class="stat-new svelte-da0ogt" data-testid="new-ac"> </span></div> <div class="stat-change svelte-da0ogt"><span class="stat-label svelte-da0ogt">Surge</span> <span class="stat-old svelte-da0ogt" data-testid="old-surge"> </span> <span class="stat-arrow svelte-da0ogt">â</span> <span class="stat-new svelte-da0ogt" data-testid="new-surge"> </span></div> <div class="stat-change svelte-da0ogt"><span class="stat-label svelte-da0ogt">Attack</span> <span class="stat-old svelte-da0ogt" data-testid="old-attack"> </span> <span class="stat-arrow svelte-da0ogt">â</span> <span class="stat-new svelte-da0ogt" data-testid="new-attack"> </span></div></div> <div class="xp-spent-section svelte-da0ogt" data-testid="xp-spent-section"><span class="xp-icon svelte-da0ogt">â­</span> <span class="xp-text svelte-da0ogt">5 XP spent</span></div> <div class="critical-bonus-section svelte-da0ogt" data-testid="critical-bonus"><span class="bonus-text svelte-da0ogt">âï¸ Critical attacks now deal +1 damage!</span></div> <button class="continue-button svelte-da0ogt" data-testid="continue-button">Continue</button> <p class="dismiss-hint svelte-da0ogt">Click anywhere to dismiss</p></div></div>');function Xf(e,t){Oe(t,!0);const n=ft.find(J=>J.id===t.heroId);function a(){t.onDismiss&&t.onDismiss()}function r(J){(J.key==="Escape"||J.key==="Enter"||J.key===" ")&&(J.preventDefault(),a())}var s=Vf();s.__click=a,s.__keydown=r;var o=d(s);o.__click=J=>J.stopPropagation(),o.__keydown=J=>{(J.key==="Escape"||J.key==="Enter"||J.key===" ")&&J.stopPropagation()};var c=d(o),l=h(d(c),6);l.__click=a;var u=h(c,2);{var f=J=>{var se=Yf(),U=d(se),H=h(U,2),C=d(H),O=d(C),ae=h(C,2),b=d(ae);B(M=>{z(U,"src",M),z(U,"alt",n.name),w(O,n.name),w(b,`Level ${t.newStats.level??""}`)},[()=>qe(n.imagePath)]),S(J,se)};j(u,J=>{n&&J(f)})}var m=h(u,2),g=d(m),_=h(d(g),2),A=d(_),L=h(_,4),x=d(L),k=h(g,2),D=h(d(k),2),I=d(D),P=h(D,4),K=d(P),q=h(k,2),W=h(d(q),2),G=d(W),Z=h(W,4),re=d(Z),ue=h(q,2),N=h(d(ue),2),ke=d(N),$=h(N,4),oe=d($),ie=h(m,6);ie.__click=a,B(()=>{w(A,t.oldStats.maxHp),w(x,t.newStats.maxHp),w(I,t.oldStats.ac),w(K,t.newStats.ac),w(G,t.oldStats.surgeValue),w(re,t.newStats.surgeValue),w(ke,`+${t.oldStats.attackBonus??""}`),w(oe,`+${t.newStats.attackBonus??""}`)}),S(e,s),ze()}Je(["click","keydown"]);var Gf=E('<div class="healing-surge-overlay svelte-1ugospu" data-testid="healing-surge-notification"><div class="healing-surge-card svelte-1ugospu"><h2 class="healing-title svelte-1ugospu" data-testid="healing-title">Healing Surge!</h2> <div class="hero-section svelte-1ugospu"><img class="hero-avatar svelte-1ugospu"/> <span class="hero-name svelte-1ugospu" data-testid="healed-hero-name"> </span></div> <div class="healing-message svelte-1ugospu"><span class="was-text svelte-1ugospu">was at 0 HP</span></div> <div class="hp-restored-section svelte-1ugospu" data-testid="hp-restored-section"><span class="hp-icon svelte-1ugospu">â¤ï¸</span> <span class="hp-value svelte-1ugospu"> </span> <span class="hp-text svelte-1ugospu">restored</span></div> <button class="continue-button svelte-1ugospu" data-testid="dismiss-healing-surge">Continue</button></div></div>');function Kf(e,t){Oe(t,!0);function n(A){return ft.find(L=>L.id===A)?.name??"Hero"}function a(A){return ft.find(L=>L.id===A)?.imagePath??""}var r=Gf(),s=d(r),o=h(d(s),2),c=d(o),l=h(c,2),u=d(l),f=h(o,4),m=h(d(f),2),g=d(m),_=h(f,2);_.__click=function(...A){t.onDismiss?.apply(this,A)},B((A,L,x)=>{z(c,"src",A),z(c,"alt",L),w(u,x),w(g,`+${t.hpRestored??""} HP`)},[()=>qe(a(t.heroId)),()=>n(t.heroId),()=>n(t.heroId)]),S(e,r),ze()}Je(["click"]);var Qf=E('<div class="action-surge-overlay svelte-y8yjxy" data-testid="action-surge-prompt"><div class="action-surge-card svelte-y8yjxy"><h2 class="action-surge-title svelte-y8yjxy" data-testid="action-surge-title">Use Healing Surge?</h2> <div class="hero-section svelte-y8yjxy"><img class="hero-avatar svelte-y8yjxy"/> <span class="hero-name svelte-y8yjxy" data-testid="action-surge-hero-name"> </span></div> <div class="hp-status hp-status-danger svelte-y8yjxy"><span class="hp-label svelte-y8yjxy">â ï¸ Hero is at 0 HP!</span></div> <div class="surge-info svelte-y8yjxy"><div class="surge-row svelte-y8yjxy"><span class="surge-icon svelte-y8yjxy">â¤ï¸</span> <span class="surge-text svelte-y8yjxy">Heal <strong data-testid="heal-amount" class="svelte-y8yjxy"> </strong></span></div> <div class="surge-row svelte-y8yjxy"><span class="surge-icon svelte-y8yjxy">â¡</span> <span class="surge-text svelte-y8yjxy">Surges remaining: <strong data-testid="surges-remaining" class="svelte-y8yjxy"> </strong></span></div></div> <p class="description warning-text svelte-y8yjxy">Skipping will result in defeat!</p> <div class="button-row svelte-y8yjxy"><button class="use-button svelte-y8yjxy" data-testid="use-action-surge-button">Use Surge</button> <button class="skip-button skip-danger svelte-y8yjxy" data-testid="skip-action-surge-button">Skip (Defeat)</button></div></div></div>');function Zf(e,t){Oe(t,!0);function n(W){return ft.find(G=>G.id===W)?.name??"Hero"}function a(W){return ft.find(G=>G.id===W)?.imagePath??""}function r(){return Math.min(t.surgeValue,t.maxHp)}var s=Qf(),o=d(s),c=h(d(o),2),l=d(c),u=h(l,2),f=d(u),m=h(c,4),g=d(m),_=h(d(g),2),A=h(d(_)),L=d(A),x=h(g,2),k=h(d(x),2),D=h(d(k)),I=d(D),P=h(m,4),K=d(P);K.__click=function(...W){t.onUse?.apply(this,W)};var q=h(K,2);q.__click=function(...W){t.onSkip?.apply(this,W)},B((W,G,Z,re)=>{z(l,"src",W),z(l,"alt",G),w(f,Z),w(L,`+${re??""} HP`),w(I,t.surgesToRemaining)},[()=>qe(a(t.heroId)),()=>n(t.heroId),()=>n(t.heroId),r]),S(e,s),ze()}Je(["click"]);var Jf=E('<span class="hero-level svelte-8w11tm" data-testid="hero-level">Level 2 â­</span>'),$f=E('<span class="turn-phase svelte-8w11tm" data-testid="turn-phase"> </span> <span class="turn-number svelte-8w11tm"> </span>',1),ev=E('<div><img class="player-avatar svelte-8w11tm"/> <div class="turn-details svelte-8w11tm"><span class="player-name svelte-8w11tm"> </span> <!> <!> <span class="hero-hp svelte-8w11tm" data-testid="hero-hp"> </span></div></div>'),tv=E('<span class="hero-level svelte-8w11tm" data-testid="hero-level">Level 2 â­</span>'),nv=E('<span class="turn-phase svelte-8w11tm"> </span> <span class="turn-number svelte-8w11tm"> </span>',1),av=E('<div><img class="player-avatar svelte-8w11tm"/> <div class="turn-details svelte-8w11tm"><span class="player-name svelte-8w11tm"> </span> <!> <!> <span class="hero-hp svelte-8w11tm"> </span></div></div>'),rv=E('<div><img class="tile-image svelte-8w11tm"/> <!></div>'),sv=E('<div class="movement-overlay-container svelte-8w11tm"><!></div>'),iv=E('<div data-testid="hero-token"><img class="token-image svelte-8w11tm"/> <span class="token-label svelte-8w11tm"> </span></div>'),ov=E('<span class="hero-level svelte-8w11tm" data-testid="hero-level">Level 2 â­</span>'),lv=E('<span class="turn-phase svelte-8w11tm"> </span> <span class="turn-number svelte-8w11tm"> </span>',1),cv=E('<div><img class="player-avatar svelte-8w11tm"/> <div class="turn-details svelte-8w11tm"><span class="player-name svelte-8w11tm"> </span> <!> <!> <span class="hero-hp svelte-8w11tm"> </span></div></div>'),uv=E('<span class="hero-level svelte-8w11tm" data-testid="hero-level">Level 2 â­</span>'),dv=E('<span class="turn-phase svelte-8w11tm" data-testid="turn-phase"> </span> <span class="turn-number svelte-8w11tm"> </span>',1),fv=E('<div><img class="player-avatar svelte-8w11tm"/> <div class="turn-details svelte-8w11tm"><span class="player-name svelte-8w11tm"> </span> <!> <!> <span class="hero-hp svelte-8w11tm" data-testid="hero-hp"> </span></div></div>'),vv=E('<div class="game-board svelte-8w11tm" data-testid="game-board"><div data-testid="player-zone-top"></div> <div class="middle-section svelte-8w11tm"><div data-testid="player-zone-left"></div> <div class="board-container svelte-8w11tm"><div class="dungeon-map svelte-8w11tm" data-testid="dungeon-map" role="button" tabindex="0"><!> <!> <!> <!></div> <div class="board-controls svelte-8w11tm"><div class="objective-display svelte-8w11tm" data-testid="objective-display"><span class="objective-label svelte-8w11tm">ð¯ Objective:</span> <span class="objective-text svelte-8w11tm"> </span> <span class="objective-progress svelte-8w11tm" data-testid="objective-progress"> </span></div> <!> <!> <!> <button class="end-phase-button svelte-8w11tm" data-testid="end-phase-button"> </button> <button class="reset-button svelte-8w11tm" data-testid="reset-button">â© Return to Character Select</button> <!></div></div> <div data-testid="player-zone-right"></div></div> <div data-testid="player-zone-bottom"></div> <!> <!> <!> <!> <!>  <!> <!> <!> <!></div>');function hv(e,t){Oe(t,!0);const n=140,a=4,r=8,s=4,o=n*a,c=n*r,l=n*s,u=140,f=.15,m=1,g=36,_=36,A=632,L=632,x=1195,k=3,D=0;let I=V(Ie([])),P=V(Ie([])),K=V(Ie({})),q=V(Ie({currentHeroIndex:0,currentPhase:"hero-phase",turnNumber:1,exploredThisTurn:!1})),W=V(Ie([])),G=V(!1),Z=V(Ie({tiles:[],unexploredEdges:[],tileDeck:[]})),re=V(Ie([])),ue=V(null),N=V(null),ke=V(null),$=V(Ie([])),oe=V(null),ie=V(null),J=V(null),se=V(0),U=V(null),H=V(Ie({actionsTaken:[],canMove:!0,canAttack:!0})),C=V(Ie({monstersDefeated:0,monstersToDefeat:2,objective:"Defeat 2 monsters"})),O=V(Ie({xp:0,healingSurges:2})),ae=V(null),b=V(null),M=V(null),Y=V(null),de=V(null),fe=V(null),he=V(null),xe=V(1),pe=V(Ie({})),_e=V(null),ve=V(null),Me=V(!1),be=V(null),je=V(null),Ae=Q(()=>wt(i(Z)));Et(()=>{const p=X.subscribe(()=>{const y=X.getState();T(I,y.game.heroTokens,!0),T(P,y.heroes.selectedHeroes,!0),T(K,y.heroes.heroEdgeMap,!0),T(q,y.game.turnState,!0),T(W,y.game.validMoveSquares,!0),T(G,y.game.showingMovement,!0),T(Z,y.game.dungeon,!0),T(re,y.game.monsters,!0),T(ue,y.game.recentlySpawnedMonsterId,!0),T(N,y.game.attackResult,!0),T(ke,y.game.attackTargetId,!0),T($,y.game.heroHp,!0),T(oe,y.game.monsterAttackResult,!0),T(ie,y.game.monsterAttackTargetId,!0),T(J,y.game.monsterAttackerId,!0),T(se,y.game.villainPhaseMonsterIndex,!0),T(U,y.game.monsterMoveActionId,!0),T(H,y.game.heroTurnActions,!0),T(C,y.game.scenario,!0),T(O,y.game.partyResources,!0),T(ae,y.game.defeatedMonsterXp,!0),T(b,y.game.defeatedMonsterName,!0),T(M,y.game.leveledUpHeroId,!0),T(Y,y.game.levelUpOldStats,!0),T(de,y.game.healingSurgeUsedHeroId,!0),T(fe,y.game.healingSurgeHpRestored,!0),T(pe,y.heroes.heroPowerCards,!0),T(_e,y.game.attackName,!0),T(ve,y.game.drawnEncounter,!0),T(Me,y.game.showActionSurgePrompt,!0),T(be,y.game.multiAttackState,!0),T(je,y.game.pendingMoveAttack,!0)}),v=X.getState();return T(I,v.game.heroTokens,!0),T(P,v.heroes.selectedHeroes,!0),T(K,v.heroes.heroEdgeMap,!0),T(q,v.game.turnState,!0),T(W,v.game.validMoveSquares,!0),T(G,v.game.showingMovement,!0),T(Z,v.game.dungeon,!0),T(re,v.game.monsters,!0),T(ue,v.game.recentlySpawnedMonsterId,!0),T(N,v.game.attackResult,!0),T(ke,v.game.attackTargetId,!0),T($,v.game.heroHp,!0),T(oe,v.game.monsterAttackResult,!0),T(ie,v.game.monsterAttackTargetId,!0),T(J,v.game.monsterAttackerId,!0),T(se,v.game.villainPhaseMonsterIndex,!0),T(U,v.game.monsterMoveActionId,!0),T(H,v.game.heroTurnActions,!0),T(C,v.game.scenario,!0),T(O,v.game.partyResources,!0),T(ae,v.game.defeatedMonsterXp,!0),T(b,v.game.defeatedMonsterName,!0),T(M,v.game.leveledUpHeroId,!0),T(Y,v.game.levelUpOldStats,!0),T(de,v.game.healingSurgeUsedHeroId,!0),T(fe,v.game.healingSurgeHpRestored,!0),T(pe,v.heroes.heroPowerCards,!0),T(_e,v.game.attackName,!0),T(ve,v.game.drawnEncounter,!0),T(Me,v.game.showActionSurgePrompt,!0),T(be,v.game.multiAttackState,!0),T(je,v.game.pendingMoveAttack,!0),p}),Et(()=>{i(q).currentPhase==="hero-phase"&&$u(i(H))&&X.dispatch(fs())}),Et(()=>{if(i(q).currentPhase!=="hero-phase"||!i(H).canMove||i(G))return;const p=Pe();if(!p)return;const v=ht(p);v&&X.dispatch(ds({heroId:p,speed:v.speed}))}),Et(()=>{if(i(q).currentPhase!=="villain-phase"||i(oe)!==null||i(U)!==null||i(ve)!==null)return;const p=Mi();if(i(se)>=p.length){X.dispatch(vs());return}X.dispatch(fd({}))});function wt(p){if(p.tiles.length===0)return{minCol:0,maxCol:0,minRow:0,maxRow:0,width:A,height:x};let v=1/0,y=-1/0,R=1/0,F=-1/0;for(const Ne of p.tiles)v=Math.min(v,Ne.position.col),y=Math.max(y,Ne.position.col),R=Math.min(R,Ne.position.row),F=Math.max(F,Ne.position.row);const ee=y-v+1,ne=A+(ee-1)*o,ye=Math.max(0,-R),le=Math.max(0,F),Te=x+ye*l+le*l;return{minCol:v,maxCol:y,minRow:R,maxRow:F,width:Math.max(ne,A),height:Math.max(Te,x)}}function me(p,v){const y=(p.position.col-v.minCol)*o;let R=0;return p.position.row<0?R=(p.position.row-v.minRow)*l:p.position.row===0?R=Math.max(0,-v.minRow)*l-k:R=Math.max(0,-v.minRow)*l+c+(p.position.row-1)*l-k-D,{x:y,y:R}}function Ee(p){return p.tileType==="start"?"assets/StartTile.png":gi.find(y=>y.tileType===p.tileType)?.imagePath||"assets/Tile_Black_x2_01.png"}function $e(p){return p.tileType==="start"?{width:A,height:x}:{width:A,height:L}}Et(()=>{if(i(he)){const p=()=>{const y=i(he);if(!y)return;const R=y.clientWidth-u,F=y.clientHeight-u,ee=i(Ae),ne=R/ee.width,ye=F/ee.height,le=Math.min(ne,ye,m);T(xe,Math.max(le,f),!0)};p();const v=new ResizeObserver(p);return v.observe(i(he)),()=>v.disconnect()}});function ht(p){return i(P).find(v=>v.id===p)}function Pe(){return i(I)[i(q).currentHeroIndex]?.heroId}function pt(p){switch(p){case"hero-phase":return"Hero Phase";case"exploration-phase":return"Exploration Phase";case"villain-phase":return"Villain Phase"}}function et(p){return i($).find(y=>y.heroId===p)?.currentHp??0}function kt(p){return i($).find(y=>y.heroId===p)?.maxHp??0}function Bt(p){return i($).find(y=>y.heroId===p)?.level??1}function Mi(){const p=Pe();return p?i(re).filter(v=>v.controllerId===p):[]}function Ai(){X.dispatch(dr())}function Ei(p,v){const y=n/2,R=v.x+g+p.x*n+y,F=v.y+_+p.y*n+y;return`left: ${R}px; top: ${F}px;`}function Rn(){const p=Pe();if(p&&i(K)[p])return i(K)[p];const v=i(q).currentHeroIndex%4;return["bottom","right","top","left"][v]}function Ft(p){return i(P).filter(v=>i(K)[v.id]===p)}function We(p){return Pe()===p}function Pi(p){const v=i(K)[p];if(!v)return 0;switch(v){case"bottom":return 0;case"top":return 180;case"left":return 90;case"right":return-90;default:return 0}}function fr(p){if(i(q).currentPhase!=="hero-phase")return;const v=Pe();if(!v)return;const y=ht(v);y&&(i(G)?X.dispatch(ad()):X.dispatch(ds({heroId:v,speed:y.speed})))}function Hi(p){const v=Pe();v&&X.dispatch(rd({heroId:v,position:p}))}function Di(p){(p.key==="Enter"||p.key===" ")&&(p.preventDefault(),fr())}function Ri(){switch(i(q).currentPhase){case"hero-phase":X.dispatch(fs());break;case"exploration-phase":X.dispatch(sd());break;case"villain-phase":X.dispatch(vs());break}}function Oi(){switch(i(q).currentPhase){case"hero-phase":return"End Hero Phase";case"exploration-phase":return"End Exploration";case"villain-phase":return"End Villain Phase"}}function zi(){X.dispatch(id())}function ji(p){const v=i(Z).tiles.find(y=>y.id===p);return v?me(v,i(Ae)):{x:0,y:0}}const da="start-tile";function Ni(){const p=Pe();if(!p)return da;const v=i(I).find(R=>R.heroId===p);return v?$t(v.position,i(Z))?.id??da:da}function Bi(){const p=Pe();if(!p)return[];const v=i(I).find(R=>R.heroId===p);if(!v)return[];const y=Ni();return Ou(v.position,i(re),y,i(Z))}function Fi(p){return ft.find(v=>v.id===p)}const Li=1;function qi(p,v){const y=Pe();if(!y)return;const R=Gt(p);if(!R||R.attackBonus===void 0)return;const F=i(re).find(Te=>Te.instanceId===v);if(!F)return;const ee=Du(F.monsterId);if(ee===void 0)return;const ne={name:R.name,attackBonus:R.attackBonus,damage:R.damage??Li},ye=Au(ne,ee);X.dispatch(cd({result:ye,targetInstanceId:v,attackName:R.name}));const le=i(be)&&i(be).attacksCompleted>0;R.type==="daily"&&!le&&X.dispatch($c({heroId:y,cardId:p}))}function Ui(){if(i(be)){const p=i(re).some(v=>v.instanceId===i(ke));X.dispatch(wd()),!p&&i(be).sameTarget&&X.dispatch(kd())}X.dispatch(ud())}function Wi(p,v,y,R,F){X.dispatch(yd({cardId:p,totalAttacks:v,sameTarget:y,maxTargets:R,targetInstanceId:F}))}function Yi(p){X.dispatch(xd({cardId:p}))}function fa(p){return Dn.find(y=>y.id===p)?.name||"Monster"}function Vi(){if(i(ke))return i(re).find(p=>p.instanceId===i(ke))}function Xi(){X.dispatch(vd())}function Gi(){X.dispatch(hd())}function Ki(){return i(ie)&&ft.find(v=>v.id===i(ie))?.name||"Hero"}function Qi(){if(!i(J))return"Monster";const p=i(re).find(v=>v.instanceId===i(J));return p?fa(p.monsterId):"Monster"}function Zi(){if(!i(U))return"Monster";const p=i(re).find(v=>v.instanceId===i(U));return p?fa(p.monsterId):"Monster"}function Ji(){X.dispatch(dd())}function $i(){X.dispatch(md())}function eo(){X.dispatch(pd())}function to(){X.dispatch(od())}function no(){X.dispatch(ld())}function ao(){X.dispatch(gd())}function ro(){X.dispatch(_d())}function so(){if(i(M))return i($).find(p=>p.heroId===i(M))}var vr=vv(),va=d(vr);let hr;Re(va,21,()=>Ft("top"),p=>p.id,(p,v)=>{var y=ev();let R;var F=d(y),ee=h(F,2),ne=d(ee),ye=d(ne),le=h(ne,2);{var Te=te=>{var ge=Jf();S(te,ge)};j(le,te=>{Bt(i(v).id)===2&&te(Te)})}var Ne=h(le,2);{var rt=te=>{var ge=$f(),He=Ce(ge),Be=d(He),Ge=h(He,2),Ke=d(Ge);B(Xt=>{w(Be,Xt),w(Ke,`Turn ${i(q).turnNumber??""}`)},[()=>pt(i(q).currentPhase)]),S(te,ge)};j(Ne,te=>{We(i(v).id)&&te(rt)})}var xt=h(Ne,2),mt=d(xt);B((te,ge,He,Be,Ge,Ke)=>{R=De(y,1,"player-info svelte-8w11tm",null,R,te),z(y,"data-testid",ge),z(F,"src",He),z(F,"alt",i(v).name),w(ye,Be),w(mt,`HP: ${Ge??""}/${Ke??""}`)},[()=>({"active-player":We(i(v).id)}),()=>We(i(v).id)?"turn-indicator":`player-dashboard-${i(v).id}`,()=>qe(i(v).imagePath),()=>We(i(v).id)?`${i(v).name}'s Turn`:i(v).name,()=>et(i(v).id),()=>kt(i(v).id)]),S(p,y)});var pr=h(va,2),ha=d(pr);let mr;Re(ha,21,()=>Ft("left"),p=>p.id,(p,v)=>{var y=av();let R;var F=d(y),ee=h(F,2),ne=d(ee),ye=d(ne),le=h(ne,2);{var Te=te=>{var ge=tv();S(te,ge)};j(le,te=>{Bt(i(v).id)===2&&te(Te)})}var Ne=h(le,2);{var rt=te=>{var ge=nv(),He=Ce(ge),Be=d(He),Ge=h(He,2),Ke=d(Ge);B(Xt=>{w(Be,Xt),w(Ke,`Turn ${i(q).turnNumber??""}`)},[()=>pt(i(q).currentPhase)]),S(te,ge)};j(Ne,te=>{We(i(v).id)&&te(rt)})}var xt=h(Ne,2),mt=d(xt);B((te,ge,He,Be,Ge,Ke)=>{R=De(y,1,"player-info svelte-8w11tm",null,R,te),z(y,"data-testid",ge),z(F,"src",He),z(F,"alt",i(v).name),w(ye,Be),w(mt,`HP: ${Ge??""}/${Ke??""}`)},[()=>({"active-player":We(i(v).id)}),()=>We(i(v).id)?"turn-indicator":`player-dashboard-${i(v).id}`,()=>qe(i(v).imagePath),()=>We(i(v).id)?`${i(v).name}'s Turn`:i(v).name,()=>et(i(v).id),()=>kt(i(v).id)]),S(p,y)});var pa=h(ha,2),nn=d(pa);nn.__click=fr,nn.__keydown=Di;var gr=d(nn);Re(gr,17,()=>i(Z).tiles,p=>p.id,(p,v)=>{const y=Q(()=>me(i(v),i(Ae))),R=Q(()=>$e(i(v)));var F=rv();let ee;var ne=d(F),ye=h(ne,2);Re(ye,17,()=>i(Z).unexploredEdges.filter(le=>le.tileId===i(v).id),le=>`${le.direction}-${le.subTileId||"default"}`,(le,Te)=>{ef(le,{get direction(){return i(Te).direction},cellSize:n,get tileWidth(){return i(R).width},get tileHeight(){return i(R).height},get subTileId(){return i(Te).subTileId}})}),B(le=>{ee=De(F,1,"placed-tile svelte-8w11tm",null,ee,{"start-tile":i(v).tileType==="start"}),z(F,"data-testid",i(v).tileType==="start"?"start-tile":"dungeon-tile"),z(F,"data-tile-id",i(v).id),dt(F,`left: ${i(y).x??""}px; top: ${i(y).y??""}px; width: ${i(R).width??""}px; height: ${i(R).height??""}px;`),z(ne,"src",le),z(ne,"alt",i(v).tileType),dt(ne,i(v).rotation!==0?`transform: rotate(${i(v).rotation}deg);`:"")},[()=>qe(Ee(i(v)))]),S(p,F)});var _r=h(gr,2);{var io=p=>{const v=Q(()=>i(Z).tiles.find(ee=>ee.tileType==="start"));var y=Le(),R=Ce(y);{var F=ee=>{const ne=Q(()=>me(i(v),i(Ae))),ye=Q(()=>$e(i(v)));var le=sv(),Te=d(le);Qd(Te,{get validMoveSquares(){return i(W)},tileOffsetX:g,tileOffsetY:_,cellSize:n,onSquareClick:Hi}),B(()=>dt(le,`left: ${i(ne).x??""}px; top: ${i(ne).y??""}px; width: ${i(ye).width??""}px; height: ${i(ye).height??""}px;`)),S(ee,le)};j(R,ee=>{i(v)&&ee(F)})}S(p,y)};j(_r,p=>{i(G)&&i(W).length>0&&p(io)})}var yr=h(_r,2);Re(yr,17,()=>i(I),p=>p.heroId,(p,v)=>{const y=Q(()=>ht(i(v).heroId)),R=Q(()=>i(v).heroId===Pe()),F=Q(()=>i(Z).tiles.find(Te=>Te.tileType==="start")),ee=Q(()=>Pi(i(v).heroId));var ne=Le(),ye=Ce(ne);{var le=Te=>{const Ne=Q(()=>me(i(F),i(Ae)));var rt=iv();let xt;var mt=d(rt),te=h(mt,2),ge=d(te);B((He,Be)=>{xt=De(rt,1,"hero-token svelte-8w11tm",null,xt,{active:i(R)}),z(rt,"data-hero-id",i(v).heroId),dt(rt,`${He??""} --token-rotation: ${i(ee)??""}deg;`),z(mt,"src",Be),z(mt,"alt",i(y).name),w(ge,i(y).name)},[()=>Ei(i(v).position,i(Ne)),()=>qe(i(y).imagePath)]),S(Te,rt)};j(ye,Te=>{i(y)&&i(F)&&Te(le)})}S(p,ne)});var oo=h(yr,2);Re(oo,17,()=>i(re),p=>p.instanceId,(p,v)=>{{let y=Q(()=>ji(i(v).tileId));nf(p,{get monster(){return i(v)},cellSize:n,tileOffsetX:g,tileOffsetY:_,get tilePixelOffset(){return i(y)}})}});var lo=h(nn,2),wr=d(lo),kr=h(d(wr),2),co=d(kr),uo=h(kr,2),fo=d(uo),xr=h(wr,2);Ff(xr,{get xp(){return i(O).xp}});var br=h(xr,2);qf(br,{get surges(){return i(O).healingSurges}});var Tr=h(br,2);Jd(Tr,{get tileCount(){return i(Z).tileDeck.length}});var ma=h(Tr,2);ma.__click=Ri;var vo=d(ma),Sr=h(ma,2);Sr.__click=Ai;var ho=h(Sr,2);{var po=p=>{const v=Q(Pe),y=Q(()=>i(v)?i(pe)[i(v)]:void 0),R=Q(Bi);var F=Le(),ee=Ce(F);{var ne=ye=>{Pf(ye,{get heroPowerCards(){return i(y)},get adjacentMonsters(){return i(R)},onAttackWithCard:qi,get multiAttackState(){return i(be)},onStartMultiAttack:Wi,get pendingMoveAttack(){return i(je)},onStartMoveAttack:Yi,get canMove(){return i(H).canMove}})};j(ee,ye=>{i(y)&&i(R).length>0&&ye(ne)})}S(p,F)};j(ho,p=>{i(q).currentPhase==="hero-phase"&&(i(H).canAttack||i(be))&&p(po)})}Ul(pa,p=>T(he,p),()=>i(he));var Ir=h(pa,2);let Cr;Re(Ir,21,()=>Ft("right"),p=>p.id,(p,v)=>{var y=cv();let R;var F=d(y),ee=h(F,2),ne=d(ee),ye=d(ne),le=h(ne,2);{var Te=te=>{var ge=ov();S(te,ge)};j(le,te=>{Bt(i(v).id)===2&&te(Te)})}var Ne=h(le,2);{var rt=te=>{var ge=lv(),He=Ce(ge),Be=d(He),Ge=h(He,2),Ke=d(Ge);B(Xt=>{w(Be,Xt),w(Ke,`Turn ${i(q).turnNumber??""}`)},[()=>pt(i(q).currentPhase)]),S(te,ge)};j(Ne,te=>{We(i(v).id)&&te(rt)})}var xt=h(Ne,2),mt=d(xt);B((te,ge,He,Be,Ge,Ke)=>{R=De(y,1,"player-info svelte-8w11tm",null,R,te),z(y,"data-testid",ge),z(F,"src",He),z(F,"alt",i(v).name),w(ye,Be),w(mt,`HP: ${Ge??""}/${Ke??""}`)},[()=>({"active-player":We(i(v).id)}),()=>We(i(v).id)?"turn-indicator":`player-dashboard-${i(v).id}`,()=>qe(i(v).imagePath),()=>We(i(v).id)?`${i(v).name}'s Turn`:i(v).name,()=>et(i(v).id),()=>kt(i(v).id)]),S(p,y)});var ga=h(pr,2);let Mr;Re(ga,21,()=>Ft("bottom"),p=>p.id,(p,v)=>{var y=fv();let R;var F=d(y),ee=h(F,2),ne=d(ee),ye=d(ne),le=h(ne,2);{var Te=te=>{var ge=uv();S(te,ge)};j(le,te=>{Bt(i(v).id)===2&&te(Te)})}var Ne=h(le,2);{var rt=te=>{var ge=dv(),He=Ce(ge),Be=d(He),Ge=h(He,2),Ke=d(Ge);B(Xt=>{w(Be,Xt),w(Ke,`Turn ${i(q).turnNumber??""}`)},[()=>pt(i(q).currentPhase)]),S(te,ge)};j(Ne,te=>{We(i(v).id)&&te(rt)})}var xt=h(Ne,2),mt=d(xt);B((te,ge,He,Be,Ge,Ke)=>{R=De(y,1,"player-info svelte-8w11tm",null,R,te),z(y,"data-testid",ge),z(F,"src",He),z(F,"alt",i(v).name),w(ye,Be),w(mt,`HP: ${Ge??""}/${Ke??""}`)},[()=>({"active-player":We(i(v).id)}),()=>We(i(v).id)?"turn-indicator":`player-dashboard-${i(v).id}`,()=>qe(i(v).imagePath),()=>We(i(v).id)?`${i(v).name}'s Turn`:i(v).name,()=>et(i(v).id),()=>kt(i(v).id)]),S(p,y)});var Ar=h(ga,2);{var mo=p=>{const v=Q(()=>i(re).find(ee=>ee.instanceId===i(ue)));var y=Le(),R=Ce(y);{var F=ee=>{{let ne=Q(Rn);rf(ee,{get monsterId(){return i(v).monsterId},onDismiss:zi,get edge(){return i(ne)}})}};j(R,ee=>{i(v)&&ee(F)})}S(p,y)};j(Ar,p=>{i(ue)&&p(mo)})}var Er=h(Ar,2);{var go=p=>{const v=Q(Pe),y=Q(()=>i(v)?Fi(i(v)):void 0),R=Q(Vi);var F=Le(),ee=Ce(F);{var ne=ye=>{{let le=Q(()=>i(R)?fa(i(R).monsterId):"Monster"),Te=Q(Rn);hs(ye,{get result(){return i(N)},get attackerName(){return i(y).name},get attackName(){return i(_e)},get targetName(){return i(le)},onDismiss:Ui,get edge(){return i(Te)}})}};j(ee,ye=>{i(y)&&i(_e)&&ye(ne)})}S(p,F)};j(Er,p=>{i(N)&&p(go)})}var Pr=h(Er,2);{var _o=p=>{{let v=Q(Qi),y=Q(Ki),R=Q(Rn);hs(p,{get result(){return i(oe)},get attackerName(){return i(v)},attackName:"Attack",get targetName(){return i(y)},onDismiss:Xi,get edge(){return i(R)}})}};j(Pr,p=>{i(oe)&&p(_o)})}var Hr=h(Pr,2);{var yo=p=>{{let v=Q(Zi);Nf(p,{get monsterName(){return i(v)},onDismiss:Gi})}};j(Hr,p=>{i(U)&&p(yo)})}var Dr=h(Hr,2);{var wo=p=>{Wf(p,{get monsterName(){return i(b)},get xpGained(){return i(ae)},onDismiss:Ji})};j(Dr,p=>{i(ae)!==null&&i(b)!==null&&p(wo)})}var Rr=h(Dr,2);{var ko=p=>{const v=Q(so);var y=Le(),R=Ce(y);{var F=ee=>{Xf(ee,{get heroId(){return i(M)},get oldStats(){return i(Y)},get newStats(){return i(v)},onDismiss:$i})};j(R,ee=>{i(v)&&ee(F)})}S(p,y)};j(Rr,p=>{i(M)&&i(Y)&&!i(N)&&!i(ae)&&p(ko)})}var Or=h(Rr,2);{var xo=p=>{Kf(p,{get heroId(){return i(de)},get hpRestored(){return i(fe)},onDismiss:eo})};j(Or,p=>{i(de)&&i(fe)!==null&&p(xo)})}var zr=h(Or,2);{var bo=p=>{{let v=Q(Rn);of(p,{get encounter(){return i(ve)},get partyXp(){return i(O).xp},onDismiss:to,onCancel:no,get edge(){return i(v)}})}};j(zr,p=>{i(ve)&&p(bo)})}var To=h(zr,2);{var So=p=>{const v=Q(Pe),y=Q(()=>i(v)?i($).find(ne=>ne.heroId===i(v)):void 0);var R=Le(),F=Ce(R);{var ee=ne=>{Zf(ne,{get heroId(){return i(v)},get maxHp(){return i(y).maxHp},get surgeValue(){return i(y).surgeValue},get surgesToRemaining(){return i(O).healingSurges},onUse:ao,onSkip:ro})};j(F,ne=>{i(v)&&i(y)&&ne(ee)})}S(p,R)};j(To,p=>{i(Me)&&p(So)})}B((p,v,y,R,F)=>{hr=De(va,1,"edge-zone edge-top svelte-8w11tm",null,hr,p),mr=De(ha,1,"edge-zone edge-left svelte-8w11tm",null,mr,v),dt(nn,`transform: scale(${i(xe)??""}); width: ${i(Ae).width??""}px; height: ${i(Ae).height??""}px;`),z(nn,"aria-label",i(G)?"Click to hide movement options":"Click to show movement options for current hero"),w(co,i(C).objective),w(fo,`${i(C).monstersDefeated??""} / ${i(C).monstersToDefeat??""} defeated`),w(vo,y),Cr=De(Ir,1,"edge-zone edge-right svelte-8w11tm",null,Cr,R),Mr=De(ga,1,"edge-zone edge-bottom svelte-8w11tm",null,Mr,F)},[()=>({"has-players":Ft("top").length>0}),()=>({"has-players":Ft("left").length>0}),Oi,()=>({"has-players":Ft("right").length>0}),()=>({"has-players":Ft("bottom").length>0})]),S(e,vr),ze()}Je(["click","keydown"]);var pv=E('<div class="victory-screen svelte-12ok9q2" data-testid="victory-screen"><div class="victory-content svelte-12ok9q2"><div class="victory-icon svelte-12ok9q2">ð</div> <h1 class="victory-title svelte-12ok9q2">Victory!</h1> <p class="victory-message svelte-12ok9q2"> </p> <div class="victory-objective svelte-12ok9q2"><span class="objective-label svelte-12ok9q2">Objective Complete:</span> <span class="objective-text svelte-12ok9q2"> </span></div> <button class="return-button svelte-12ok9q2" data-testid="return-to-menu-button">Return to Character Select</button></div></div>');function mv(e,t){Oe(t,!0);let n=V(Ie({monstersDefeated:0,monstersToDefeat:2,objective:"Defeat 2 monsters"}));Et(()=>{const g=X.subscribe(()=>{const A=X.getState();T(n,A.game.scenario,!0)}),_=X.getState();return T(n,_.game.scenario,!0),g});function a(){X.dispatch(dr())}var r=pv(),s=d(r),o=h(d(s),4),c=d(o),l=h(o,2),u=h(d(l),2),f=d(u),m=h(l,2);m.__click=a,B(()=>{w(c,`You have defeated ${i(n).monstersDefeated??""} monsters and completed the objective!`),w(f,i(n).objective)}),S(e,r),ze()}Je(["click"]);var gv=E('<div class="defeat-screen svelte-1jz2vy1" data-testid="defeat-screen"><div class="defeat-content svelte-1jz2vy1"><div class="defeat-icon svelte-1jz2vy1">ð</div> <h1 class="defeat-title svelte-1jz2vy1">Defeat</h1> <p class="defeat-message svelte-1jz2vy1" data-testid="defeat-message"><!></p> <div class="defeat-progress svelte-1jz2vy1"><span class="progress-label svelte-1jz2vy1">Progress:</span> <span class="progress-text svelte-1jz2vy1" data-testid="defeat-progress"> </span></div> <div class="defeat-objective svelte-1jz2vy1"><span class="objective-label svelte-1jz2vy1">Objective:</span> <span class="objective-text svelte-1jz2vy1"> </span></div> <button class="new-game-button svelte-1jz2vy1" data-testid="new-game-button">New Game</button></div></div>');function _v(e,t){Oe(t,!0);let n=V(Ie({monstersDefeated:0,monstersToDefeat:2,objective:"Defeat 2 monsters"})),a=V(null);Et(()=>{const D=X.subscribe(()=>{const P=X.getState();T(n,P.game.scenario,!0),T(a,P.game.defeatReason,!0)}),I=X.getState();return T(n,I.game.scenario,!0),T(a,I.game.defeatReason,!0),D});function r(){X.dispatch(dr())}var s=gv(),o=d(s),c=h(d(o),4),l=d(c);{var u=D=>{var I=Wr();B(()=>w(I,i(a))),S(D,I)},f=D=>{var I=Wr("Your party has been eliminated before completing the objective.");S(D,I)};j(l,D=>{i(a)?D(u):D(f,!1)})}var m=h(c,2),g=h(d(m),2),_=d(g),A=h(m,2),L=h(d(A),2),x=d(L),k=h(A,2);k.__click=r,B(()=>{w(_,`${i(n).monstersDefeated??""} / ${i(n).monstersToDefeat??""} monsters defeated`),w(x,i(n).objective)}),S(e,s),ze()}Je(["click"]);var yv=E('<main class="svelte-1n46o8q"><!></main>');function wv(e,t){Oe(t,!0);let n=V("character-select");Et(()=>{const c=X.subscribe(()=>{const u=X.getState();T(n,u.game.currentScreen,!0)}),l=X.getState();return T(n,l.game.currentScreen,!0),c});var a=yv(),r=d(a);{var s=c=>{Xd(c,{})},o=c=>{var l=Le(),u=Ce(l);{var f=g=>{hv(g,{})},m=g=>{var _=Le(),A=Ce(_);{var L=k=>{mv(k,{})},x=k=>{var D=Le(),I=Ce(D);{var P=K=>{_v(K,{})};j(I,K=>{i(n)==="defeat"&&K(P)},!0)}S(k,D)};j(A,k=>{i(n)==="victory"?k(L):k(x,!1)},!0)}S(g,_)};j(u,g=>{i(n)==="game-board"?g(f):g(m,!1)},!0)}S(c,l)};j(r,c=>{i(n)==="character-select"?c(s):c(o,!1)})}S(e,a),ze()}Dl(wv,{target:document.getElementById("app")});
