(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}})();const no="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(no);const ts=1,ns=2,rs=4,ro=8,ao=16,so=1,io=2,De=Symbol(),oo="http://www.w3.org/1999/xhtml",gr=!1;var as=Array.isArray,lo=Array.prototype.indexOf,zr=Array.from,co=Object.defineProperty,vn=Object.getOwnPropertyDescriptor,uo=Object.getOwnPropertyDescriptors,fo=Object.prototype,vo=Array.prototype,ss=Object.getPrototypeOf,Ta=Object.isExtensible;function ho(e){for(var t=0;t<e.length;t++)e[t]()}function is(){var e,t,n=new Promise((r,a)=>{e=r,t=a});return{promise:n,resolve:e,reject:t}}const Ee=2,Or=4,Nr=8,po=1<<24,Pt=16,Ht=32,Gt=64,Qn=128,ft=512,Re=1024,Xe=2048,At=4096,$e=8192,Nt=16384,jr=32768,tn=65536,Ma=1<<17,os=1<<18,ln=1<<19,mo=1<<20,Wt=32768,_r=1<<21,Br=1<<22,jt=1<<23,Rn=Symbol("$state"),go=Symbol(""),Jt=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function _o(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function yo(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function wo(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function ko(e){throw new Error("https://svelte.dev/e/effect_orphan")}function bo(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function xo(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function So(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Io(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function To(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}function Mo(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function ls(e){return e===this.v}function Co(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function cs(e){return!Co(e,this.v)}let Eo=!1,st=null;function nn(e){st=e}function Pe(e,t=!1,n){st={p:st,i:!1,c:null,e:null,s:e,x:null,l:null}}function He(e){var t=st,n=t.e;if(n!==null){t.e=null;for(var r of n)xs(r)}return t.i=!0,st=t.p,{}}function ds(){return!0}let $t=[];function Po(){var e=$t;$t=[],ho(e)}function bn(e){if($t.length===0){var t=$t;queueMicrotask(()=>{t===$t&&Po()})}$t.push(e)}function us(e){var t=ie;if(t===null)return $.f|=jt,e;if((t.f&jr)===0){if((t.f&Qn)===0)throw e;t.b.error(e)}else rn(e,t)}function rn(e,t){for(;t!==null;){if((t.f&Qn)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e}const En=new Set;let ve=null,at=null,ht=[],Lr=null,yr=!1;class pt{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#r=0;#n=0;#l=null;#s=[];#a=[];skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(t){ht=[],this.apply();var n={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const r of t)this.#i(r,n);this.is_fork||this.#d(),this.is_deferred()?(this.#o(n.effects),this.#o(n.render_effects),this.#o(n.block_effects)):(ve=null,Ca(n.render_effects),Ca(n.effects),this.#l?.resolve()),at=null}#i(t,n){t.f^=Re;for(var r=t.first;r!==null;){var a=r.f,s=(a&(Ht|Gt))!==0,o=s&&(a&Re)!==0,c=o||(a&$e)!==0||this.skipped_effects.has(r);if((r.f&Qn)!==0&&r.b?.is_pending()&&(n={parent:n,effect:r,effects:[],render_effects:[],block_effects:[]}),!c&&r.fn!==null){s?r.f^=Re:(a&Or)!==0?n.effects.push(r):Sn(r)&&((r.f&Pt)!==0&&n.block_effects.push(r),gn(r));var l=r.first;if(l!==null){r=l;continue}}var d=r.parent;for(r=r.next;r===null&&d!==null;)d===n.effect&&(this.#o(n.effects),this.#o(n.render_effects),this.#o(n.block_effects),n=n.parent),r=d.next,d=d.parent}}#o(t){for(const n of t)((n.f&Xe)!==0?this.#s:this.#a).push(n),this.#c(n.deps),ze(n,Re)}#c(t){if(t!==null)for(const n of t)(n.f&Ee)===0||(n.f&Wt)===0||(n.f^=Wt,this.#c(n.deps))}capture(t,n){this.previous.has(t)||this.previous.set(t,n),(t.f&jt)===0&&(this.current.set(t,t.v),at?.set(t,t.v))}activate(){ve=this,this.apply()}deactivate(){ve===this&&(ve=null,at=null)}flush(){if(this.activate(),ht.length>0){if(Ho(),ve!==null&&ve!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#t)t(this);this.#t.clear()}#d(){if(this.#n===0){for(const t of this.#e)t();this.#e.clear()}this.#r===0&&this.#u()}#u(){if(En.size>1){this.previous.clear();var t=at,n=!0,r={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const s of En){if(s===this){n=!1;continue}const o=[];for(const[l,d]of this.current){if(s.current.has(l))if(n&&d!==s.current.get(l))s.current.set(l,d);else continue;o.push(l)}if(o.length===0)continue;const c=[...s.current.keys()].filter(l=>!this.current.has(l));if(c.length>0){var a=ht;ht=[];const l=new Set,d=new Map;for(const f of o)fs(f,c,l,d);if(ht.length>0){ve=s,s.apply();for(const f of ht)s.#i(f,r);s.deactivate()}ht=a}}ve=null,at=t}this.committed=!0,En.delete(this)}increment(t){this.#r+=1,t&&(this.#n+=1)}decrement(t){this.#r-=1,t&&(this.#n-=1),this.revive()}revive(){for(const t of this.#s)ze(t,Xe),Yt(t);for(const t of this.#a)ze(t,At),Yt(t);this.#s=[],this.#a=[],this.flush()}oncommit(t){this.#e.add(t)}ondiscard(t){this.#t.add(t)}settled(){return(this.#l??=is()).promise}static ensure(){if(ve===null){const t=ve=new pt;En.add(ve),pt.enqueue(()=>{ve===t&&t.flush()})}return ve}static enqueue(t){bn(t)}apply(){}}function Ho(){var e=Lt;yr=!0;var t=null;try{var n=0;for(Ln(!0);ht.length>0;){var r=pt.ensure();if(n++>1e3){var a,s;Ao()}r.process(ht),Bt.clear()}}finally{yr=!1,Ln(e),Lr=null}}function Ao(){try{bo()}catch(e){rn(e,Lr)}}let bt=null;function Ca(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if((r.f&(Nt|$e))===0&&Sn(r)&&(bt=new Set,gn(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?Ms(r):r.fn=null),bt?.size>0)){Bt.clear();for(const a of bt){if((a.f&(Nt|$e))!==0)continue;const s=[a];let o=a.parent;for(;o!==null;)bt.has(o)&&(bt.delete(o),s.push(o)),o=o.parent;for(let c=s.length-1;c>=0;c--){const l=s[c];(l.f&(Nt|$e))===0&&gn(l)}}bt.clear()}}bt=null}}function fs(e,t,n,r){if(!n.has(e)&&(n.add(e),e.reactions!==null))for(const a of e.reactions){const s=a.f;(s&Ee)!==0?fs(a,t,n,r):(s&(Br|Pt))!==0&&(s&Xe)===0&&vs(a,t,r)&&(ze(a,Xe),Yt(a))}}function vs(e,t,n){const r=n.get(e);if(r!==void 0)return r;if(e.deps!==null)for(const a of e.deps){if(t.includes(a))return!0;if((a.f&Ee)!==0&&vs(a,t,n))return n.set(a,!0),!0}return n.set(e,!1),!1}function Yt(e){for(var t=Lr=e;t.parent!==null;){t=t.parent;var n=t.f;if(yr&&t===ie&&(n&Pt)!==0&&(n&os)===0)return;if((n&(Gt|Ht))!==0){if((n&Re)===0)return;t.f^=Re}}ht.push(t)}function Do(e){let t=0,n=Vt(0),r;return()=>{pn()&&(i(n),Ss(()=>(t===0&&(r=js(()=>e(()=>hn(n)))),t+=1,()=>{bn(()=>{t-=1,t===0&&(r?.(),r=void 0,hn(n))})})))}}var Ro=tn|ln|Qn;function zo(e,t,n){new Oo(e,t,n)}class Oo{parent;#e=!1;#t;#r=null;#n;#l;#s;#a=null;#i=null;#o=null;#c=null;#d=null;#u=0;#f=0;#h=!1;#v=null;#y=Do(()=>(this.#v=Vt(this.#u),()=>{this.#v=null}));constructor(t,n,r){this.#t=t,this.#n=n,this.#l=r,this.parent=ie.b,this.#e=!!this.#n.pending,this.#s=qr(()=>{ie.b=this;{var a=this.#g();try{this.#a=rt(()=>r(a))}catch(s){this.error(s)}this.#f>0?this.#m():this.#e=!1}return()=>{this.#d?.remove()}},Ro)}#w(){try{this.#a=rt(()=>this.#l(this.#t))}catch(t){this.error(t)}this.#e=!1}#k(){const t=this.#n.pending;t&&(this.#i=rt(()=>t(this.#t)),pt.enqueue(()=>{var n=this.#g();this.#a=this.#p(()=>(pt.ensure(),rt(()=>this.#l(n)))),this.#f>0?this.#m():(en(this.#i,()=>{this.#i=null}),this.#e=!1)}))}#g(){var t=this.#t;return this.#e&&(this.#d=Ct(),this.#t.before(this.#d),t=this.#d),t}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#p(t){var n=ie,r=$,a=st;gt(this.#s),Ve(this.#s),nn(this.#s.ctx);try{return t()}catch(s){return us(s),null}finally{gt(n),Ve(r),nn(a)}}#m(){const t=this.#n.pending;this.#a!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#d),Ps(this.#a,this.#c)),this.#i===null&&(this.#i=rt(()=>t(this.#t)))}#_(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#_(t);return}this.#f+=t,this.#f===0&&(this.#e=!1,this.#i&&en(this.#i,()=>{this.#i=null}),this.#c&&(this.#t.before(this.#c),this.#c=null))}update_pending_count(t){this.#_(t),this.#u+=t,this.#v&&an(this.#v,this.#u)}get_effect_pending(){return this.#y(),i(this.#v)}error(t){var n=this.#n.onerror;let r=this.#n.failed;if(this.#h||!n&&!r)throw t;this.#a&&(Ge(this.#a),this.#a=null),this.#i&&(Ge(this.#i),this.#i=null),this.#o&&(Ge(this.#o),this.#o=null);var a=!1,s=!1;const o=()=>{if(a){Mo();return}a=!0,s&&To(),pt.ensure(),this.#u=0,this.#o!==null&&en(this.#o,()=>{this.#o=null}),this.#e=this.has_pending_snippet(),this.#a=this.#p(()=>(this.#h=!1,rt(()=>this.#l(this.#t)))),this.#f>0?this.#m():this.#e=!1};var c=$;try{Ve(null),s=!0,n?.(t,o),s=!1}catch(l){rn(l,this.#s&&this.#s.parent)}finally{Ve(c)}r&&bn(()=>{this.#o=this.#p(()=>{pt.ensure(),this.#h=!0;try{return rt(()=>{r(this.#t,()=>t,()=>o)})}catch(l){return rn(l,this.#s.parent),null}finally{this.#h=!1}})})}}function No(e,t,n){for(var r=[],a=t.length,s=0;s<a;s++)Wr(t[s].e,r,!0);Cs(r,()=>{var o=r.length===0&&n!==null;if(o){var c=n,l=c.parentNode;Xo(l),l.append(c),e.items.clear(),dt(e,t[0].prev,t[a-1].next)}for(var d=0;d<a;d++){var f=t[d];o||(e.items.delete(f.k),dt(e,f.prev,f.next)),Ge(f.e,!o)}e.first===t[0]&&(e.first=t[0].prev)})}function Ye(e,t,n,r,a,s=null){var o=e,c=new Map,l=null,d=(t&rs)!==0,f=(t&ts)!==0,m=(t&ns)!==0;if(d){var g=e;o=g.appendChild(Ct())}var _=null,S=qo(()=>{var P=n();return as(P)?P:P==null?[]:zr(P)}),A,w=!0;function C(){jo(E,A,o,t,r),_!==null&&(A.length===0?(_.fragment?(o.before(_.fragment),_.fragment=null):Yr(_.effect),O.first=_.effect):en(_.effect,()=>{_=null}))}var O=qr(()=>{A=i(S);for(var P=A.length,q=new Set,N=ve,Z=null,V=ks(),K=0;K<P;K+=1){var ae=A[K],te=r(ae,K),oe=w?null:c.get(te);oe?(f&&an(oe.v,ae),m?an(oe.i,K):oe.i=K,V&&N.skipped_effects.delete(oe.e)):(oe=Bo(w?o:null,Z,ae,te,K,a,t,n),w&&(oe.o=!0,Z===null?l=oe:Z.next=oe,Z=oe),c.set(te,oe)),q.add(te)}if(P===0&&s&&!_)if(w)_={fragment:null,effect:rt(()=>s(o))};else{var xe=document.createDocumentFragment(),Se=Ct();xe.append(Se),_={fragment:xe,effect:rt(()=>s(Se))}}if(!w)if(V){for(const[Ae,Fe]of c)q.has(Ae)||N.skipped_effects.add(Fe.e);N.oncommit(C),N.ondiscard(()=>{})}else C();i(S)}),E={effect:O,items:c,first:l};w=!1}function jo(e,t,n,r,a){var s=(r&ro)!==0,o=t.length,c=e.items,l=e.first,d,f=null,m,g=[],_=[],S,A,w,C;if(s)for(C=0;C<o;C+=1)S=t[C],A=a(S,C),w=c.get(A),w.o&&(w.a?.measure(),(m??=new Set).add(w));for(C=0;C<o;C+=1){if(S=t[C],A=a(S,C),w=c.get(A),e.first??=w,!w.o){w.o=!0;var O=f?f.next:l;dt(e,f,w),dt(e,w,O),vr(w,O,n),f=w,g=[],_=[],l=f.next;continue}if((w.e.f&$e)!==0&&(Yr(w.e),s&&(w.a?.unfix(),(m??=new Set).delete(w))),w!==l){if(d!==void 0&&d.has(w)){if(g.length<_.length){var E=_[0],P;f=E.prev;var q=g[0],N=g[g.length-1];for(P=0;P<g.length;P+=1)vr(g[P],E,n);for(P=0;P<_.length;P+=1)d.delete(_[P]);dt(e,q.prev,N.next),dt(e,f,q),dt(e,N,E),l=E,f=N,C-=1,g=[],_=[]}else d.delete(w),vr(w,l,n),dt(e,w.prev,w.next),dt(e,w,f===null?e.first:f.next),dt(e,f,w),f=w;continue}for(g=[],_=[];l!==null&&l.k!==A;)(l.e.f&$e)===0&&(d??=new Set).add(l),_.push(l),l=l.next;if(l===null)continue;w=l}g.push(w),f=w,l=w.next}let Z=c.size>o;if(l!==null||d!==void 0){for(var V=d===void 0?[]:zr(d);l!==null;)(l.e.f&$e)===0&&V.push(l),l=l.next;var K=V.length;if(Z=c.size-K>o,K>0){var ae=(r&rs)!==0&&o===0?n:null;if(s){for(C=0;C<K;C+=1)V[C].a?.measure();for(C=0;C<K;C+=1)V[C].a?.fix()}No(e,V,ae)}}if(Z)for(const te of c.values())te.o||(dt(e,f,te),f=te);e.effect.last=f&&f.e,s&&bn(()=>{if(m!==void 0)for(w of m)w.a?.apply()})}function Bo(e,t,n,r,a,s,o,c){var l=(o&ts)!==0,d=(o&ao)===0,f=l?d?Yo(n,!1,!1):Vt(n):n,m=(o&ns)===0?a:Vt(a),g={i:m,v:f,k:r,a:null,e:null,o:!1,prev:t,next:null};try{if(e===null){var _=document.createDocumentFragment();_.append(e=Ct())}return g.e=rt(()=>s(e,f,m,c)),t!==null&&(t.next=g),g}finally{}}function vr(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,a=t?t.e.nodes_start:n,s=e.e.nodes_start;s!==null&&s!==r;){var o=xn(s);a.before(s),s=o}}function dt(e,t,n){t===null?(e.first=n,e.effect.first=n&&n.e):(t.e.next&&(t.e.next.prev=null),t.next=n,t.e.next=n&&n.e),n!==null&&(n.e.prev&&(n.e.prev.next=null),n.prev=t,n.e.prev=t&&t.e)}function Lo(e,t,n,r){const a=Fr;if(n.length===0&&e.length===0){r(t.map(a));return}var s=ve,o=ie,c=Fo();function l(){Promise.all(n.map(d=>Uo(d))).then(d=>{c();try{r([...t.map(a),...d])}catch(f){(o.f&Nt)===0&&rn(f,o)}s?.deactivate(),jn()}).catch(d=>{rn(d,o)})}e.length>0?Promise.all(e).then(()=>{c();try{return l()}finally{s?.deactivate(),jn()}}):l()}function Fo(){var e=ie,t=$,n=st,r=ve;return function(s=!0){gt(e),Ve(t),nn(n),s&&r?.activate()}}function jn(){gt(null),Ve(null),nn(null)}function Fr(e){var t=Ee|Xe,n=$!==null&&($.f&Ee)!==0?$:null;return ie!==null&&(ie.f|=ln),{ctx:st,deps:null,effects:null,equals:ls,f:t,fn:e,reactions:null,rv:0,v:De,wv:0,parent:n??ie,ac:null}}function Uo(e,t){let n=ie;n===null&&_o();var r=n.b,a=void 0,s=Vt(De),o=!$,c=new Map;return el(()=>{var l=is();a=l.promise;try{Promise.resolve(e()).then(l.resolve,l.reject).then(()=>{d===ve&&d.committed&&d.deactivate(),jn()})}catch(g){l.reject(g),jn()}var d=ve;if(o){var f=!r.is_pending();r.update_pending_count(1),d.increment(f),c.get(d)?.reject(Jt),c.delete(d),c.set(d,l)}const m=(g,_=void 0)=>{if(d.activate(),_)_!==Jt&&(s.f|=jt,an(s,_));else{(s.f&jt)!==0&&(s.f^=jt),an(s,g);for(const[S,A]of c){if(c.delete(S),S===d)break;A.reject(Jt)}}o&&(r.update_pending_count(-1),d.decrement(f))};l.promise.then(m,g=>m(null,g||"unknown"))}),Zo(()=>{for(const l of c.values())l.reject(Jt)}),new Promise(l=>{function d(f){function m(){f===a?l(s):d(a)}f.then(m,m)}d(a)})}function G(e){const t=Fr(e);return Hs(t),t}function qo(e){const t=Fr(e);return t.equals=cs,t}function hs(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)Ge(t[n])}}function Wo(e){for(var t=e.parent;t!==null;){if((t.f&Ee)===0)return(t.f&Nt)===0?t:null;t=t.parent}return null}function Ur(e){var t,n=ie;gt(Wo(e));try{e.f&=~Wt,hs(e),t=zs(e)}finally{gt(n)}return t}function ps(e){var t=Ur(e);if(e.equals(t)||(ve?.is_fork||(e.v=t),e.wv=Ds()),!cn)if(at!==null)(pn()||ve?.is_fork)&&at.set(e,t);else{var n=(e.f&ft)===0?At:Re;ze(e,n)}}let wr=new Set;const Bt=new Map;let ms=!1;function Vt(e,t){var n={f:0,v:e,reactions:null,equals:ls,rv:0,wv:0};return n}function F(e,t){const n=Vt(e);return Hs(n),n}function Yo(e,t=!1,n=!0){const r=Vt(e);return t||(r.equals=cs),r}function x(e,t,n=!1){$!==null&&(!mt||($.f&Ma)!==0)&&ds()&&($.f&(Ee|Pt|Br|Ma))!==0&&!It?.includes(e)&&Io();let r=n?me(t):t;return an(e,r)}function an(e,t){if(!e.equals(t)){var n=e.v;cn?Bt.set(e,t):Bt.set(e,n),e.v=t;var r=pt.ensure();r.capture(e,n),(e.f&Ee)!==0&&((e.f&Xe)!==0&&Ur(e),ze(e,(e.f&ft)!==0?Re:At)),e.wv=Ds(),gs(e,Xe),ie!==null&&(ie.f&Re)!==0&&(ie.f&(Ht|Gt))===0&&(nt===null?rl([e]):nt.push(e)),!r.is_fork&&wr.size>0&&!ms&&Vo()}return t}function Vo(){ms=!1;var e=Lt;Ln(!0);const t=Array.from(wr);try{for(const n of t)(n.f&Re)!==0&&ze(n,At),Sn(n)&&gn(n)}finally{Ln(e)}wr.clear()}function hn(e){x(e,e.v+1)}function gs(e,t){var n=e.reactions;if(n!==null)for(var r=n.length,a=0;a<r;a++){var s=n[a],o=s.f,c=(o&Xe)===0;if(c&&ze(s,t),(o&Ee)!==0){var l=s;at?.delete(l),(o&Wt)===0&&(o&ft&&(s.f|=Wt),gs(l,At))}else c&&((o&Pt)!==0&&bt!==null&&bt.add(s),Yt(s))}}function me(e){if(typeof e!="object"||e===null||Rn in e)return e;const t=ss(e);if(t!==fo&&t!==vo)return e;var n=new Map,r=as(e),a=F(0),s=qt,o=c=>{if(qt===s)return c();var l=$,d=qt;Ve(null),Ha(s);var f=c();return Ve(l),Ha(d),f};return r&&n.set("length",F(e.length)),new Proxy(e,{defineProperty(c,l,d){(!("value"in d)||d.configurable===!1||d.enumerable===!1||d.writable===!1)&&xo();var f=n.get(l);return f===void 0?f=o(()=>{var m=F(d.value);return n.set(l,m),m}):x(f,d.value,!0),!0},deleteProperty(c,l){var d=n.get(l);if(d===void 0){if(l in c){const f=o(()=>F(De));n.set(l,f),hn(a)}}else x(d,De),hn(a);return!0},get(c,l,d){if(l===Rn)return e;var f=n.get(l),m=l in c;if(f===void 0&&(!m||vn(c,l)?.writable)&&(f=o(()=>{var _=me(m?c[l]:De),S=F(_);return S}),n.set(l,f)),f!==void 0){var g=i(f);return g===De?void 0:g}return Reflect.get(c,l,d)},getOwnPropertyDescriptor(c,l){var d=Reflect.getOwnPropertyDescriptor(c,l);if(d&&"value"in d){var f=n.get(l);f&&(d.value=i(f))}else if(d===void 0){var m=n.get(l),g=m?.v;if(m!==void 0&&g!==De)return{enumerable:!0,configurable:!0,value:g,writable:!0}}return d},has(c,l){if(l===Rn)return!0;var d=n.get(l),f=d!==void 0&&d.v!==De||Reflect.has(c,l);if(d!==void 0||ie!==null&&(!f||vn(c,l)?.writable)){d===void 0&&(d=o(()=>{var g=f?me(c[l]):De,_=F(g);return _}),n.set(l,d));var m=i(d);if(m===De)return!1}return f},set(c,l,d,f){var m=n.get(l),g=l in c;if(r&&l==="length")for(var _=d;_<m.v;_+=1){var S=n.get(_+"");S!==void 0?x(S,De):_ in c&&(S=o(()=>F(De)),n.set(_+"",S))}if(m===void 0)(!g||vn(c,l)?.writable)&&(m=o(()=>F(void 0)),x(m,me(d)),n.set(l,m));else{g=m.v!==De;var A=o(()=>me(d));x(m,A)}var w=Reflect.getOwnPropertyDescriptor(c,l);if(w?.set&&w.set.call(f,d),!g){if(r&&typeof l=="string"){var C=n.get("length"),O=Number(l);Number.isInteger(O)&&O>=C.v&&x(C,O+1)}hn(a)}return!0},ownKeys(c){i(a);var l=Reflect.ownKeys(c).filter(m=>{var g=n.get(m);return g===void 0||g.v!==De});for(var[d,f]of n)f.v!==De&&!(d in c)&&l.push(d);return l},setPrototypeOf(){So()}})}var Ea,_s,ys,ws;function Go(){if(Ea===void 0){Ea=window,_s=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;ys=vn(t,"firstChild").get,ws=vn(t,"nextSibling").get,Ta(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Ta(n)&&(n.__t=void 0)}}function Ct(e=""){return document.createTextNode(e)}function Bn(e){return ys.call(e)}function xn(e){return ws.call(e)}function u(e,t){return Bn(e)}function be(e,t=!1){{var n=Bn(e);return n instanceof Comment&&n.data===""?xn(n):n}}function v(e,t=1,n=!1){let r=e;for(;t--;)r=xn(r);return r}function Xo(e){e.textContent=""}function ks(){return!1}function bs(e){var t=$,n=ie;Ve(null),gt(null);try{return e()}finally{Ve(t),gt(n)}}function Ko(e){ie===null&&($===null&&ko(),wo()),cn&&yo()}function Qo(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function Dt(e,t,n){var r=ie;r!==null&&(r.f&$e)!==0&&(e|=$e);var a={ctx:st,deps:null,nodes_start:null,nodes_end:null,f:e|Xe|ft,first:null,fn:t,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{gn(a),a.f|=jr}catch(c){throw Ge(a),c}else t!==null&&Yt(a);var s=a;if(n&&s.deps===null&&s.teardown===null&&s.nodes_start===null&&s.first===s.last&&(s.f&ln)===0&&(s=s.first,(e&Pt)!==0&&(e&tn)!==0&&s!==null&&(s.f|=tn)),s!==null&&(s.parent=r,r!==null&&Qo(s,r),$!==null&&($.f&Ee)!==0&&(e&Gt)===0)){var o=$;(o.effects??=[]).push(s)}return a}function pn(){return $!==null&&!mt}function Zo(e){const t=Dt(Nr,null,!1);return ze(t,Re),t.teardown=e,t}function St(e){Ko();var t=ie.f,n=!$&&(t&Ht)!==0&&(t&jr)===0;if(n){var r=st;(r.e??=[]).push(e)}else return xs(e)}function xs(e){return Dt(Or|mo,e,!1)}function Jo(e){pt.ensure();const t=Dt(Gt|ln,e,!0);return(n={})=>new Promise(r=>{n.outro?en(t,()=>{Ge(t),r(void 0)}):(Ge(t),r(void 0))})}function $o(e){return Dt(Or,e,!1)}function el(e){return Dt(Br|ln,e,!0)}function Ss(e,t=0){return Dt(Nr|t,e,!0)}function U(e,t=[],n=[],r=[]){Lo(r,t,n,a=>{Dt(Nr,()=>e(...a.map(i)),!0)})}function qr(e,t=0){var n=Dt(Pt|t,e,!0);return n}function rt(e){return Dt(Ht|ln,e,!0)}function Is(e){var t=e.teardown;if(t!==null){const n=cn,r=$;Pa(!0),Ve(null);try{t.call(null)}finally{Pa(n),Ve(r)}}}function Ts(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const a=n.ac;a!==null&&bs(()=>{a.abort(Jt)});var r=n.next;(n.f&Gt)!==0?n.parent=null:Ge(n,t),n=r}}function tl(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&Ht)===0&&Ge(t),t=n}}function Ge(e,t=!0){var n=!1;(t||(e.f&os)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(nl(e.nodes_start,e.nodes_end),n=!0),Ts(e,t&&!n),Fn(e,0),ze(e,Nt);var r=e.transitions;if(r!==null)for(const s of r)s.stop();Is(e);var a=e.parent;a!==null&&a.first!==null&&Ms(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function nl(e,t){for(;e!==null;){var n=e===t?null:xn(e);e.remove(),e=n}}function Ms(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function en(e,t,n=!0){var r=[];Wr(e,r,!0),Cs(r,()=>{n&&Ge(e),t&&t()})}function Cs(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var a of e)a.out(r)}else t()}function Wr(e,t,n){if((e.f&$e)===0){if(e.f^=$e,e.transitions!==null)for(const o of e.transitions)(o.is_global||n)&&t.push(o);for(var r=e.first;r!==null;){var a=r.next,s=(r.f&tn)!==0||(r.f&Ht)!==0&&(e.f&Pt)!==0;Wr(r,t,s?n:!1),r=a}}}function Yr(e){Es(e,!0)}function Es(e,t){if((e.f&$e)!==0){e.f^=$e,(e.f&Re)===0&&(ze(e,Xe),Yt(e));for(var n=e.first;n!==null;){var r=n.next,a=(n.f&tn)!==0||(n.f&Ht)!==0;Es(n,a?t:!1),n=r}if(e.transitions!==null)for(const s of e.transitions)(s.is_global||t)&&s.in()}}function Ps(e,t){for(var n=e.nodes_start,r=e.nodes_end;n!==null;){var a=n===r?null:xn(n);t.append(n),n=a}}let Lt=!1;function Ln(e){Lt=e}let cn=!1;function Pa(e){cn=e}let $=null,mt=!1;function Ve(e){$=e}let ie=null;function gt(e){ie=e}let It=null;function Hs(e){$!==null&&(It===null?It=[e]:It.push(e))}let Ne=null,Ze=0,nt=null;function rl(e){nt=e}let As=1,mn=0,qt=mn;function Ha(e){qt=e}function Ds(){return++As}function Sn(e){var t=e.f;if((t&Xe)!==0)return!0;if(t&Ee&&(e.f&=~Wt),(t&At)!==0){var n=e.deps;if(n!==null)for(var r=n.length,a=0;a<r;a++){var s=n[a];if(Sn(s)&&ps(s),s.wv>e.wv)return!0}(t&ft)!==0&&at===null&&ze(e,Re)}return!1}function Rs(e,t,n=!0){var r=e.reactions;if(r!==null&&!It?.includes(e))for(var a=0;a<r.length;a++){var s=r[a];(s.f&Ee)!==0?Rs(s,t,!1):t===s&&(n?ze(s,Xe):(s.f&Re)!==0&&ze(s,At),Yt(s))}}function zs(e){var t=Ne,n=Ze,r=nt,a=$,s=It,o=st,c=mt,l=qt,d=e.f;Ne=null,Ze=0,nt=null,$=(d&(Ht|Gt))===0?e:null,It=null,nn(e.ctx),mt=!1,qt=++mn,e.ac!==null&&(bs(()=>{e.ac.abort(Jt)}),e.ac=null);try{e.f|=_r;var f=e.fn,m=f(),g=e.deps;if(Ne!==null){var _;if(Fn(e,Ze),g!==null&&Ze>0)for(g.length=Ze+Ne.length,_=0;_<Ne.length;_++)g[Ze+_]=Ne[_];else e.deps=g=Ne;if(Lt&&pn()&&(e.f&ft)!==0)for(_=Ze;_<g.length;_++)(g[_].reactions??=[]).push(e)}else g!==null&&Ze<g.length&&(Fn(e,Ze),g.length=Ze);if(ds()&&nt!==null&&!mt&&g!==null&&(e.f&(Ee|At|Xe))===0)for(_=0;_<nt.length;_++)Rs(nt[_],e);return a!==null&&a!==e&&(mn++,nt!==null&&(r===null?r=nt:r.push(...nt))),(e.f&jt)!==0&&(e.f^=jt),m}catch(S){return us(S)}finally{e.f^=_r,Ne=t,Ze=n,nt=r,$=a,It=s,nn(o),mt=c,qt=l}}function al(e,t){let n=t.reactions;if(n!==null){var r=lo.call(n,e);if(r!==-1){var a=n.length-1;a===0?n=t.reactions=null:(n[r]=n[a],n.pop())}}n===null&&(t.f&Ee)!==0&&(Ne===null||!Ne.includes(t))&&(ze(t,At),(t.f&ft)!==0&&(t.f^=ft,t.f&=~Wt),hs(t),Fn(t,0))}function Fn(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)al(e,n[r])}function gn(e){var t=e.f;if((t&Nt)===0){ze(e,Re);var n=ie,r=Lt;ie=e,Lt=!0;try{(t&(Pt|po))!==0?tl(e):Ts(e),Is(e);var a=zs(e);e.teardown=typeof a=="function"?a:null,e.wv=As;var s;gr&&Eo&&(e.f&Xe)!==0&&e.deps}finally{Lt=r,ie=n}}}function i(e){var t=e.f,n=(t&Ee)!==0;if($!==null&&!mt){var r=ie!==null&&(ie.f&Nt)!==0;if(!r&&!It?.includes(e)){var a=$.deps;if(($.f&_r)!==0)e.rv<mn&&(e.rv=mn,Ne===null&&a!==null&&a[Ze]===e?Ze++:Ne===null?Ne=[e]:Ne.includes(e)||Ne.push(e));else{($.deps??=[]).push(e);var s=e.reactions;s===null?e.reactions=[$]:s.includes($)||s.push($)}}}if(cn){if(Bt.has(e))return Bt.get(e);if(n){var o=e,c=o.v;return((o.f&Re)===0&&o.reactions!==null||Ns(o))&&(c=Ur(o)),Bt.set(o,c),c}}else n&&(!at?.has(e)||ve?.is_fork&&!pn())&&(o=e,Sn(o)&&ps(o),Lt&&pn()&&(o.f&ft)===0&&Os(o));if(at?.has(e))return at.get(e);if((e.f&jt)!==0)throw e.v;return e.v}function Os(e){if(e.deps!==null){e.f^=ft;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&Ee)!==0&&(t.f&ft)===0&&Os(t)}}function Ns(e){if(e.v===De)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(Bt.has(t)||(t.f&Ee)!==0&&Ns(t))return!0;return!1}function js(e){var t=mt;try{return mt=!0,e()}finally{mt=t}}const sl=-7169;function ze(e,t){e.f=e.f&sl|t}const Bs=new Set,kr=new Set;function et(e){for(var t=0;t<e.length;t++)Bs.add(e[t]);for(var n of kr)n(e)}let Aa=null;function Pn(e){var t=this,n=t.ownerDocument,r=e.type,a=e.composedPath?.()||[],s=a[0]||e.target;Aa=e;var o=0,c=Aa===e&&e.__root;if(c){var l=a.indexOf(c);if(l!==-1&&(t===document||t===window)){e.__root=t;return}var d=a.indexOf(t);if(d===-1)return;l<=d&&(o=l)}if(s=a[o]||e.target,s!==t){co(e,"currentTarget",{configurable:!0,get(){return s||n}});var f=$,m=ie;Ve(null),gt(null);try{for(var g,_=[];s!==null;){var S=s.assignedSlot||s.parentNode||s.host||null;try{var A=s["__"+r];A!=null&&(!s.disabled||e.target===s)&&A.call(s,e)}catch(w){g?_.push(w):g=w}if(e.cancelBubble||S===t||S===null)break;s=S}if(g){for(let w of _)queueMicrotask(()=>{throw w});throw g}}finally{e.__root=t,delete e.currentTarget,Ve(f),gt(m)}}}function il(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Un(e,t){var n=ie;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function D(e,t){var n=(t&so)!==0,r=(t&io)!==0,a,s=!e.startsWith("<!>");return()=>{a===void 0&&(a=il(s?e:"<!>"+e),n||(a=Bn(a)));var o=r||_s?document.importNode(a,!0):a.cloneNode(!0);if(n){var c=Bn(o),l=o.lastChild;Un(c,l)}else Un(o,o);return o}}function Da(e=""){{var t=Ct(e+"");return Un(t,t),t}}function Ce(){var e=document.createDocumentFragment(),t=document.createComment(""),n=Ct();return e.append(t,n),Un(t,n),e}function T(e,t){e!==null&&e.before(t)}const ol=["touchstart","touchmove"];function ll(e){return ol.includes(e)}function k(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function cl(e,t){return dl(e,t)}const Kt=new Map;function dl(e,{target:t,anchor:n,props:r={},events:a,context:s,intro:o=!0}){Go();var c=new Set,l=m=>{for(var g=0;g<m.length;g++){var _=m[g];if(!c.has(_)){c.add(_);var S=ll(_);t.addEventListener(_,Pn,{passive:S});var A=Kt.get(_);A===void 0?(document.addEventListener(_,Pn,{passive:S}),Kt.set(_,1)):Kt.set(_,A+1)}}};l(zr(Bs)),kr.add(l);var d=void 0,f=Jo(()=>{var m=n??t.appendChild(Ct());return zo(m,{pending:()=>{}},g=>{if(s){Pe({});var _=st;_.c=s}a&&(r.$$events=a),d=e(g,r)||{},s&&He()}),()=>{for(var g of c){t.removeEventListener(g,Pn);var _=Kt.get(g);--_===0?(document.removeEventListener(g,Pn),Kt.delete(g)):Kt.set(g,_)}kr.delete(l),m!==n&&m.parentNode?.removeChild(m)}});return ul.set(d,f),d}let ul=new WeakMap;class fl{anchor;#e=new Map;#t=new Map;#r=new Map;#n=new Set;#l=!0;constructor(t,n=!0){this.anchor=t,this.#l=n}#s=()=>{var t=ve;if(this.#e.has(t)){var n=this.#e.get(t),r=this.#t.get(n);if(r)Yr(r),this.#n.delete(n);else{var a=this.#r.get(n);a&&(this.#t.set(n,a.effect),this.#r.delete(n),a.fragment.lastChild.remove(),this.anchor.before(a.fragment),r=a.effect)}for(const[s,o]of this.#e){if(this.#e.delete(s),s===t)break;const c=this.#r.get(o);c&&(Ge(c.effect),this.#r.delete(o))}for(const[s,o]of this.#t){if(s===n||this.#n.has(s))continue;const c=()=>{if(Array.from(this.#e.values()).includes(s)){var d=document.createDocumentFragment();Ps(o,d),d.append(Ct()),this.#r.set(s,{effect:o,fragment:d})}else Ge(o);this.#n.delete(s),this.#t.delete(s)};this.#l||!r?(this.#n.add(s),en(o,c,!1)):c()}}};#a=t=>{this.#e.delete(t);const n=Array.from(this.#e.values());for(const[r,a]of this.#r)n.includes(r)||(Ge(a.effect),this.#r.delete(r))};ensure(t,n){var r=ve,a=ks();if(n&&!this.#t.has(t)&&!this.#r.has(t))if(a){var s=document.createDocumentFragment(),o=Ct();s.append(o),this.#r.set(t,{effect:rt(()=>n(o)),fragment:s})}else this.#t.set(t,rt(()=>n(this.anchor)));if(this.#e.set(r,t),a){for(const[c,l]of this.#t)c===t?r.skipped_effects.delete(l):r.skipped_effects.add(l);for(const[c,l]of this.#r)c===t?r.skipped_effects.delete(l.effect):r.skipped_effects.add(l.effect);r.oncommit(this.#s),r.ondiscard(this.#a)}else this.#s()}}function j(e,t,n=!1){var r=new fl(e),a=n?tn:0;function s(o,c){r.ensure(o,c)}qr(()=>{var o=!1;t((c,l=!0)=>{o=!0,s(l,c)}),o||s(!1,null)},a)}const Ra=[...` 	
\r\fÂ \v\uFEFF`];function vl(e,t,n){var r=e==null?"":""+e;if(n){for(var a in n)if(n[a])r=r?r+" "+a:a;else if(r.length)for(var s=a.length,o=0;(o=r.indexOf(a,o))>=0;){var c=o+s;(o===0||Ra.includes(r[o-1]))&&(c===r.length||Ra.includes(r[c]))?r=(o===0?"":r.substring(0,o))+r.substring(c+1):o=c}}return r===""?null:r}function hl(e,t){return e==null?null:String(e)}function je(e,t,n,r,a,s){var o=e.__className;if(o!==n||o===void 0){var c=vl(n,r,s);c==null?e.removeAttribute("class"):e.className=c,e.__className=n}else if(s&&a!==s)for(var l in s){var d=!!s[l];(a==null||d!==!!a[l])&&e.classList.toggle(l,d)}return s}function Ot(e,t,n,r){var a=e.__style;if(a!==t){var s=hl(t);s==null?e.removeAttribute("style"):e.style.cssText=s,e.__style=t}return r}const pl=Symbol("is custom element"),ml=Symbol("is html");function B(e,t,n,r){var a=gl(e);a[t]!==(a[t]=n)&&(t==="loading"&&(e[go]=n),n==null?e.removeAttribute(t):typeof n!="string"&&_l(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function gl(e){return e.__attributes??={[pl]:e.nodeName.includes("-"),[ml]:e.namespaceURI===oo}}var za=new Map;function _l(e){var t=e.getAttribute("is")||e.nodeName,n=za.get(t);if(n)return n;za.set(t,n=[]);for(var r,a=e,s=Element.prototype;s!==a;){r=uo(a);for(var o in r)r[o].set&&n.push(o);a=ss(a)}return n}function Oa(e,t){return e===t||e?.[Rn]===t}function yl(e={},t,n,r){return $o(()=>{var a,s;return Ss(()=>{a=s,s=[],js(()=>{e!==n(...s)&&(t(e,...s),a&&Oa(n(...a),e)&&t(null,...a))})}),()=>{bn(()=>{s&&Oa(n(...s),e)&&t(null,...s)})}}),e}function Me(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var wl=typeof Symbol=="function"&&Symbol.observable||"@@observable",Na=wl,hr=()=>Math.random().toString(36).substring(7).split("").join("."),kl={INIT:`@@redux/INIT${hr()}`,REPLACE:`@@redux/REPLACE${hr()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${hr()}`},qn=kl;function Vr(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Ls(e,t,n){if(typeof e!="function")throw new Error(Me(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Me(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Me(1));return n(Ls)(e,t)}let r=e,a=t,s=new Map,o=s,c=0,l=!1;function d(){o===s&&(o=new Map,s.forEach((w,C)=>{o.set(C,w)}))}function f(){if(l)throw new Error(Me(3));return a}function m(w){if(typeof w!="function")throw new Error(Me(4));if(l)throw new Error(Me(5));let C=!0;d();const O=c++;return o.set(O,w),function(){if(C){if(l)throw new Error(Me(6));C=!1,d(),o.delete(O),s=null}}}function g(w){if(!Vr(w))throw new Error(Me(7));if(typeof w.type>"u")throw new Error(Me(8));if(typeof w.type!="string")throw new Error(Me(17));if(l)throw new Error(Me(9));try{l=!0,a=r(a,w)}finally{l=!1}return(s=o).forEach(O=>{O()}),w}function _(w){if(typeof w!="function")throw new Error(Me(10));r=w,g({type:qn.REPLACE})}function S(){const w=m;return{subscribe(C){if(typeof C!="object"||C===null)throw new Error(Me(11));function O(){const P=C;P.next&&P.next(f())}return O(),{unsubscribe:w(O)}},[Na](){return this}}}return g({type:qn.INIT}),{dispatch:g,subscribe:m,getState:f,replaceReducer:_,[Na]:S}}function bl(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:qn.INIT})>"u")throw new Error(Me(12));if(typeof n(void 0,{type:qn.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Me(13))})}function xl(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let a;try{bl(n)}catch(s){a=s}return function(o={},c){if(a)throw a;let l=!1;const d={};for(let f=0;f<r.length;f++){const m=r[f],g=n[m],_=o[m],S=g(_,c);if(typeof S>"u")throw c&&c.type,new Error(Me(14));d[m]=S,l=l||S!==_}return l=l||r.length!==Object.keys(o).length,l?d:o}}function Wn(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function Sl(...e){return t=>(n,r)=>{const a=t(n,r);let s=()=>{throw new Error(Me(15))};const o={getState:a.getState,dispatch:(l,...d)=>s(l,...d)},c=e.map(l=>l(o));return s=Wn(...c)(a.dispatch),{...a,dispatch:s}}}function Il(e){return Vr(e)&&"type"in e&&typeof e.type=="string"}var Fs=Symbol.for("immer-nothing"),ja=Symbol.for("immer-draftable"),Le=Symbol.for("immer-state");function ut(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Je=Object,sn=Je.getPrototypeOf,Yn="constructor",Zn="prototype",br="configurable",Vn="enumerable",zn="writable",_n="value",Et=e=>!!e&&!!e[Le];function _t(e){return e?Us(e)||Jn(e)||!!e[ja]||!!e[Yn]?.[ja]||$n(e)||er(e):!1}var Tl=Je[Zn][Yn].toString(),Ba=new WeakMap;function Us(e){if(!e||!Gr(e))return!1;const t=sn(e);if(t===null||t===Je[Zn])return!0;const n=Je.hasOwnProperty.call(t,Yn)&&t[Yn];if(n===Object)return!0;if(!Zt(n))return!1;let r=Ba.get(n);return r===void 0&&(r=Function.toString.call(n),Ba.set(n,r)),r===Tl}function In(e,t,n=!0){Tn(e)===0?(n?Reflect.ownKeys(e):Je.keys(e)).forEach(a=>{t(a,e[a],e)}):e.forEach((r,a)=>t(a,r,e))}function Tn(e){const t=e[Le];return t?t.type_:Jn(e)?1:$n(e)?2:er(e)?3:0}var La=(e,t,n=Tn(e))=>n===2?e.has(t):Je[Zn].hasOwnProperty.call(e,t),xr=(e,t,n=Tn(e))=>n===2?e.get(t):e[t],Gn=(e,t,n,r=Tn(e))=>{r===2?e.set(t,n):r===3?e.add(n):e[t]=n};function Ml(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var Jn=Array.isArray,$n=e=>e instanceof Map,er=e=>e instanceof Set,Gr=e=>typeof e=="object",Zt=e=>typeof e=="function",pr=e=>typeof e=="boolean",xt=e=>e.copy_||e.base_,Xr=e=>e.modified_?e.copy_:e.base_;function Sr(e,t){if($n(e))return new Map(e);if(er(e))return new Set(e);if(Jn(e))return Array[Zn].slice.call(e);const n=Us(e);if(t===!0||t==="class_only"&&!n){const r=Je.getOwnPropertyDescriptors(e);delete r[Le];let a=Reflect.ownKeys(r);for(let s=0;s<a.length;s++){const o=a[s],c=r[o];c[zn]===!1&&(c[zn]=!0,c[br]=!0),(c.get||c.set)&&(r[o]={[br]:!0,[zn]:!0,[Vn]:c[Vn],[_n]:e[o]})}return Je.create(sn(e),r)}else{const r=sn(e);if(r!==null&&n)return{...e};const a=Je.create(r);return Je.assign(a,e)}}function Kr(e,t=!1){return tr(e)||Et(e)||(Tn(e)>1&&Je.defineProperties(e,{set:Hn,add:Hn,clear:Hn,delete:Hn}),Je.freeze(e),t&&In(e,(n,r)=>{Kr(r,!0)},!1)),e}function Cl(){ut(2)}var Hn={[_n]:Cl};function tr(e){return e===null||!Gr(e)?!0:Je.isFrozen(e)}var Xn="MapSet",Ir="Patches",qs={};function on(e){const t=qs[e];return t||ut(0,e),t}var El=e=>!!qs[e],yn,Ws=()=>yn,Pl=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:El(Xn)?on(Xn):void 0});function Fa(e,t){t&&(e.patchPlugin_=on(Ir),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Tr(e){Mr(e),e.drafts_.forEach(Hl),e.drafts_=null}function Mr(e){e===yn&&(yn=e.parent_)}var Ua=e=>yn=Pl(yn,e);function Hl(e){const t=e[Le];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function qa(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];if(e!==void 0&&e!==n){n[Le].modified_&&(Tr(t),ut(4)),_t(e)&&(e=Wa(t,e));const{patchPlugin_:a}=t;a&&a.generateReplacementPatches_(n[Le].base_,e,t)}else e=Wa(t,n);return Al(t,e,!0),Tr(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Fs?e:void 0}function Wa(e,t){if(tr(t))return t;const n=t[Le];if(!n)return Qr(t,e.handledSet_,e);if(!nr(n,e))return t;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(e);Gs(n,e)}return n.copy_}function Al(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Kr(t,n)}function Ys(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var nr=(e,t)=>e.scope_===t,Dl=[];function Vs(e,t,n,r){const a=xt(e),s=e.type_;if(r!==void 0&&xr(a,r,s)===t){Gn(a,r,n,s);return}if(!e.draftLocations_){const c=e.draftLocations_=new Map;In(a,(l,d)=>{if(Et(d)){const f=c.get(d)||[];f.push(l),c.set(d,f)}})}const o=e.draftLocations_.get(t)??Dl;for(const c of o)Gn(a,c,n,s)}function Rl(e,t,n){e.callbacks_.push(function(a){const s=t;if(!s||!nr(s,a))return;a.mapSetPlugin_?.fixSetContents(s);const o=Xr(s);Vs(e,s.draft_??s,o,n),Gs(s,a)})}function Gs(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||(e.assigned_?.size??0)>0)){const{patchPlugin_:r}=t;if(r){const a=r.getPath(e);a&&r.generatePatches_(e,a,t)}Ys(e)}}function zl(e,t,n){const{scope_:r}=e;if(Et(n)){const a=n[Le];nr(a,r)&&a.callbacks_.push(function(){On(e);const o=Xr(a);Vs(e,n,o,t)})}else _t(n)&&e.callbacks_.push(function(){const s=xt(e);xr(s,t,e.type_)===n&&r.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&Qr(xr(e.copy_,t,e.type_),r.handledSet_,r)})}function Qr(e,t,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||Et(e)||t.has(e)||!_t(e)||tr(e)||(t.add(e),In(e,(r,a)=>{if(Et(a)){const s=a[Le];if(nr(s,n)){const o=Xr(s);Gn(e,r,o,e.type_),Ys(s)}}else _t(a)&&Qr(a,t,n)})),e}function Ol(e,t){const n=Jn(e),r={type_:n?1:0,scope_:t?t.scope_:Ws(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let a=r,s=Zr;n&&(a=[r],s=wn);const{revoke:o,proxy:c}=Proxy.revocable(a,s);return r.draft_=c,r.revoke_=o,[c,r]}var Zr={get(e,t){if(t===Le)return e;const n=xt(e);if(!La(n,t,e.type_))return Nl(e,n,t);const r=n[t];if(e.finalized_||!_t(r))return r;if(r===mr(e.base_,t)){On(e);const a=e.type_===1?+t:t,s=Er(e.scope_,r,e,a);return e.copy_[a]=s}return r},has(e,t){return t in xt(e)},ownKeys(e){return Reflect.ownKeys(xt(e))},set(e,t,n){const r=Xs(xt(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const a=mr(xt(e),t),s=a?.[Le];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_.set(t,!1),!0;if(Ml(n,a)&&(n!==void 0||La(e.base_,t,e.type_)))return!0;On(e),Cr(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_.set(t,!0),zl(e,t,n)),!0},deleteProperty(e,t){return On(e),mr(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),Cr(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=xt(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{[zn]:!0,[br]:e.type_!==1||t!=="length",[Vn]:r[Vn],[_n]:n[t]}},defineProperty(){ut(11)},getPrototypeOf(e){return sn(e.base_)},setPrototypeOf(){ut(12)}},wn={};In(Zr,(e,t)=>{wn[e]=function(){const n=arguments;return n[0]=n[0][0],t.apply(this,n)}});wn.deleteProperty=function(e,t){return wn.set.call(this,e,t,void 0)};wn.set=function(e,t,n){return Zr.set.call(this,e[0],t,n,e[0])};function mr(e,t){const n=e[Le];return(n?xt(n):e)[t]}function Nl(e,t,n){const r=Xs(t,n);return r?_n in r?r[_n]:r.get?.call(e.draft_):void 0}function Xs(e,t){if(!(t in e))return;let n=sn(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=sn(n)}}function Cr(e){e.modified_||(e.modified_=!0,e.parent_&&Cr(e.parent_))}function On(e){e.copy_||(e.assigned_=new Map,e.copy_=Sr(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var jl=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(t,n,r)=>{if(Zt(t)&&!Zt(n)){const s=n;n=t;const o=this;return function(l=s,...d){return o.produce(l,f=>n.call(this,f,...d))}}Zt(n)||ut(6),r!==void 0&&!Zt(r)&&ut(7);let a;if(_t(t)){const s=Ua(this),o=Er(s,t,void 0);let c=!0;try{a=n(o),c=!1}finally{c?Tr(s):Mr(s)}return Fa(s,r),qa(a,s)}else if(!t||!Gr(t)){if(a=n(t),a===void 0&&(a=t),a===Fs&&(a=void 0),this.autoFreeze_&&Kr(a,!0),r){const s=[],o=[];on(Ir).generateReplacementPatches_(t,a,{patches_:s,inversePatches_:o}),r(s,o)}return a}else ut(1,t)},this.produceWithPatches=(t,n)=>{if(Zt(t))return(o,...c)=>this.produceWithPatches(o,l=>t(l,...c));let r,a;return[this.produce(t,n,(o,c)=>{r=o,a=c}),r,a]},pr(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),pr(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),pr(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){_t(e)||ut(8),Et(e)&&(e=Bl(e));const t=Ua(this),n=Er(t,e,void 0);return n[Le].isManual_=!0,Mr(t),n}finishDraft(e,t){const n=e&&e[Le];(!n||!n.isManual_)&&ut(9);const{scope_:r}=n;return Fa(r,t),qa(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const a=t[n];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}n>-1&&(t=t.slice(n+1));const r=on(Ir).applyPatches_;return Et(e)?r(e,t):this.produce(e,a=>r(a,t))}};function Er(e,t,n,r){const[a,s]=$n(t)?on(Xn).proxyMap_(t,n):er(t)?on(Xn).proxySet_(t,n):Ol(t,n);return(n?.scope_??Ws()).drafts_.push(a),s.callbacks_=n?.callbacks_??[],s.key_=r,n&&r!==void 0?Rl(n,s,r):s.callbacks_.push(function(l){l.mapSetPlugin_?.fixSetContents(s);const{patchPlugin_:d}=l;s.modified_&&d&&d.generatePatches_(s,[],l)}),a}function Bl(e){return Et(e)||ut(10,e),Ks(e)}function Ks(e){if(!_t(e)||tr(e))return e;const t=e[Le];let n,r=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Sr(e,t.scope_.immer_.useStrictShallowCopy_),r=t.scope_.immer_.shouldUseStrictIteration()}else n=Sr(e,!0);return In(n,(a,s)=>{Gn(n,a,Ks(s))},r),t&&(t.finalized_=!1),n}var Ll=new jl,Qs=Ll.produce;function Zs(e){return({dispatch:n,getState:r})=>a=>s=>typeof s=="function"?s(n,r,e):a(s)}var Fl=Zs(),Ul=Zs,ql=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Wn:Wn.apply(null,arguments)};function Ya(e,t){function n(...r){if(t){let a=t(...r);if(!a)throw new Error(Tt(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>Il(r)&&r.type===e,n}var Js=class un extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,un.prototype)}static get[Symbol.species](){return un}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new un(...t[0].concat(this)):new un(...t.concat(this))}};function Va(e){return _t(e)?Qs(e,()=>{}):e}function An(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function Wl(e){return typeof e=="boolean"}var Yl=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:a=!0,actionCreatorCheck:s=!0}=t??{};let o=new Js;return n&&(Wl(n)?o.push(Fl):o.push(Ul(n.extraArgument))),o},Vl="RTK_autoBatch",Ga=e=>t=>{setTimeout(t,e)},Gl=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let a=!0,s=!1,o=!1;const c=new Set,l=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Ga(10):e.type==="callback"?e.queueNotification:Ga(e.timeout),d=()=>{o=!1,s&&(s=!1,c.forEach(f=>f()))};return Object.assign({},r,{subscribe(f){const m=()=>a&&f(),g=r.subscribe(m);return c.add(f),()=>{g(),c.delete(f)}},dispatch(f){try{return a=!f?.meta?.[Vl],s=!a,s&&(o||(o=!0,l(d))),r.dispatch(f)}finally{a=!0}}})},Xl=e=>function(n){const{autoBatch:r=!0}=n??{};let a=new Js(e);return r&&a.push(Gl(typeof r=="object"?r:void 0)),a};function Kl(e){const t=Yl(),{reducer:n=void 0,middleware:r,devTools:a=!0,preloadedState:s=void 0,enhancers:o=void 0}=e||{};let c;if(typeof n=="function")c=n;else if(Vr(n))c=xl(n);else throw new Error(Tt(1));let l;typeof r=="function"?l=r(t):l=t();let d=Wn;a&&(d=ql({trace:!1,...typeof a=="object"&&a}));const f=Sl(...l),m=Xl(f);let g=typeof o=="function"?o(m):m();const _=d(...g);return Ls(c,s,_)}function $s(e){const t={},n=[];let r;const a={addCase(s,o){const c=typeof s=="string"?s:s.type;if(!c)throw new Error(Tt(28));if(c in t)throw new Error(Tt(29));return t[c]=o,a},addAsyncThunk(s,o){return o.pending&&(t[s.pending.type]=o.pending),o.rejected&&(t[s.rejected.type]=o.rejected),o.fulfilled&&(t[s.fulfilled.type]=o.fulfilled),o.settled&&n.push({matcher:s.settled,reducer:o.settled}),a},addMatcher(s,o){return n.push({matcher:s,reducer:o}),a},addDefaultCase(s){return r=s,a}};return e(a),[t,n,r]}function Ql(e){return typeof e=="function"}function Zl(e,t){let[n,r,a]=$s(t),s;if(Ql(e))s=()=>Va(e());else{const c=Va(e);s=()=>c}function o(c=s(),l){let d=[n[l.type],...r.filter(({matcher:f})=>f(l)).map(({reducer:f})=>f)];return d.filter(f=>!!f).length===0&&(d=[a]),d.reduce((f,m)=>{if(m)if(Et(f)){const _=m(f,l);return _===void 0?f:_}else{if(_t(f))return Qs(f,g=>m(g,l));{const g=m(f,l);if(g===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return g}}return f},c)}return o.getInitialState=s,o}var Jl=Symbol.for("rtk-slice-createasyncthunk");function $l(e,t){return`${e}/${t}`}function ec({creators:e}={}){const t=e?.asyncThunk?.[Jl];return function(r){const{name:a,reducerPath:s=a}=r;if(!a)throw new Error(Tt(11));const o=(typeof r.reducers=="function"?r.reducers(nc()):r.reducers)||{},c=Object.keys(o),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(E,P){const q=typeof E=="string"?E:E.type;if(!q)throw new Error(Tt(12));if(q in l.sliceCaseReducersByType)throw new Error(Tt(13));return l.sliceCaseReducersByType[q]=P,d},addMatcher(E,P){return l.sliceMatchers.push({matcher:E,reducer:P}),d},exposeAction(E,P){return l.actionCreators[E]=P,d},exposeCaseReducer(E,P){return l.sliceCaseReducersByName[E]=P,d}};c.forEach(E=>{const P=o[E],q={reducerName:E,type:$l(a,E),createNotation:typeof r.reducers=="function"};ac(P)?ic(q,P,d,t):rc(q,P,d)});function f(){const[E={},P=[],q=void 0]=typeof r.extraReducers=="function"?$s(r.extraReducers):[r.extraReducers],N={...E,...l.sliceCaseReducersByType};return Zl(r.initialState,Z=>{for(let V in N)Z.addCase(V,N[V]);for(let V of l.sliceMatchers)Z.addMatcher(V.matcher,V.reducer);for(let V of P)Z.addMatcher(V.matcher,V.reducer);q&&Z.addDefaultCase(q)})}const m=E=>E,g=new Map,_=new WeakMap;let S;function A(E,P){return S||(S=f()),S(E,P)}function w(){return S||(S=f()),S.getInitialState()}function C(E,P=!1){function q(Z){let V=Z[E];return typeof V>"u"&&P&&(V=An(_,q,w)),V}function N(Z=m){const V=An(g,P,()=>new WeakMap);return An(V,Z,()=>{const K={};for(const[ae,te]of Object.entries(r.selectors??{}))K[ae]=tc(te,Z,()=>An(_,Z,w),P);return K})}return{reducerPath:E,getSelectors:N,get selectors(){return N(q)},selectSlice:q}}const O={name:a,reducer:A,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:w,...C(s),injectInto(E,{reducerPath:P,...q}={}){const N=P??s;return E.inject({reducerPath:N,reducer:A},q),{...O,...C(N,!0)}}};return O}}function tc(e,t,n,r){function a(s,...o){let c=t(s);return typeof c>"u"&&r&&(c=n()),e(c,...o)}return a.unwrapped=e,a}var ei=ec();function nc(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function rc({type:e,reducerName:t,createNotation:n},r,a){let s,o;if("reducer"in r){if(n&&!sc(r))throw new Error(Tt(17));s=r.reducer,o=r.prepare}else s=r;a.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?Ya(e,o):Ya(e))}function ac(e){return e._reducerDefinitionType==="asyncThunk"}function sc(e){return e._reducerDefinitionType==="reducerWithPrepare"}function ic({type:e,reducerName:t},n,r,a){if(!a)throw new Error(Tt(18));const{payloadCreator:s,fulfilled:o,pending:c,rejected:l,settled:d,options:f}=n,m=a(e,s,f);r.exposeAction(t,m),o&&r.addCase(m.fulfilled,o),c&&r.addCase(m.pending,c),l&&r.addCase(m.rejected,l),d&&r.addMatcher(m.settled,d),r.exposeCaseReducer(t,{fulfilled:o||Dn,pending:c||Dn,rejected:l||Dn,settled:d||Dn})}function Dn(){}function Tt(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}const ti={quinn:{level1:{level:1,hp:8,maxHp:8,ac:17,surgeValue:4,attackBonus:6,damage:2},level2:{level:2,hp:10,maxHp:10,ac:18,surgeValue:5,attackBonus:7,damage:2}},vistra:{level1:{level:1,hp:10,maxHp:10,ac:18,surgeValue:5,attackBonus:8,damage:2},level2:{level:2,hp:12,maxHp:12,ac:19,surgeValue:6,attackBonus:9,damage:2}},keyleth:{level1:{level:1,hp:10,maxHp:10,ac:18,surgeValue:5,attackBonus:7,damage:2},level2:{level:2,hp:12,maxHp:12,ac:19,surgeValue:6,attackBonus:8,damage:2}},tarak:{level1:{level:1,hp:8,maxHp:8,ac:17,surgeValue:4,attackBonus:7,damage:2},level2:{level:2,hp:10,maxHp:10,ac:18,surgeValue:5,attackBonus:8,damage:2}},haskan:{level1:{level:1,hp:6,maxHp:6,ac:14,surgeValue:3,attackBonus:4,damage:1},level2:{level:2,hp:8,maxHp:8,ac:15,surgeValue:4,attackBonus:5,damage:1}}},ni=5,oc={kobold:{attackBonus:5,damage:1},snake:{attackBonus:4,damage:1},cultist:{attackBonus:5,damage:1}},Mn=[{id:"kobold",name:"Kobold Dragonshield",ac:14,hp:1,maxHp:1,xp:1,imagePath:"assets/Monster_KoboldDragonshield.png"},{id:"snake",name:"Snake",ac:12,hp:1,maxHp:1,xp:1,imagePath:"assets/Monster_Snake.png"},{id:"cultist",name:"Cultist",ac:13,hp:2,maxHp:2,xp:1,imagePath:"assets/Monster_Cultist.png"}],lc=["kobold","kobold","kobold","snake","snake","snake","cultist","cultist","cultist"],Mt=[{id:"quinn",name:"Quinn",heroClass:"Cleric",imagePath:"assets/Hero_Cleric_Quinn.png",speed:5,attack:{name:"Mace",attackBonus:6,damage:2,range:1},hp:8,maxHp:8,ac:17},{id:"vistra",name:"Vistra",heroClass:"Fighter",imagePath:"assets/Hero_Fighter_Vistra.png",speed:5,attack:{name:"Warhammer",attackBonus:8,damage:2,range:1},hp:10,maxHp:10,ac:18},{id:"keyleth",name:"Keyleth",heroClass:"Paladin",imagePath:"assets/Hero_Paladin_Keyleth.png",speed:6,attack:{name:"Longsword",attackBonus:7,damage:2,range:1},hp:10,maxHp:10,ac:18},{id:"tarak",name:"Tarak",heroClass:"Rogue",imagePath:"assets/Hero_Rogue_Tarak.png",speed:6,attack:{name:"Short Sword",attackBonus:7,damage:2,range:1},hp:8,maxHp:8,ac:17},{id:"haskan",name:"Haskan",heroClass:"Wizard",imagePath:"assets/Hero_Wizard_Haskan.png",speed:6,attack:{name:"Quarterstaff",attackBonus:4,damage:1,range:1},hp:6,maxHp:6,ac:14}],cc=[{x:1,y:2},{x:2,y:2},{x:3,y:2},{x:3,y:3},{x:3,y:4},{x:1,y:5},{x:2,y:5},{x:3,y:5}],ri=[{tileType:"tile-2exit-a",imagePath:"assets/Tile_Black_x2_01.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-2exit-b",imagePath:"assets/Tile_Black_x2_02.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-2exit-c",imagePath:"assets/Tile_Black_x2_03.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-3exit-a",imagePath:"assets/Tile_Black_x3_01.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-3exit-b",imagePath:"assets/Tile_Black_x3_02.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-3exit-c",imagePath:"assets/Tile_Black_x3_03.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-4exit-a",imagePath:"assets/Tile_Black_x4_01.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-4exit-b",imagePath:"assets/Tile_Black_x4_02.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}}],dc=["tile-2exit-a","tile-2exit-b","tile-2exit-c","tile-3exit-a","tile-3exit-b","tile-3exit-c","tile-4exit-a","tile-4exit-b"],uc={id:"start-tile",tileType:"start",position:{col:0,row:0},rotation:0,edges:{north:"unexplored",south:"unexplored",east:"unexplored",west:"unexplored"}},ai=[{id:1,name:"Healing Hymn",type:"utility",heroClass:"Cleric",description:"You sing a soothing song that seals the wounds of you and your allies.",rule:`Use this power during your Hero Phase.
You and one other Hero on your tile regain 2 Hit Points.`,isCustomAbility:!0},{id:2,name:"Cleric's Shield",type:"at-will",heroClass:"Cleric",description:"You utter a minor defensive prayer as you strike your foe.",rule:`Attack one adjacent Monster.
Hit or Miss: Choose 1 Hero on your tile. That Hero gains a +2 bonus to AC until you use this power again.`,attackBonus:6,damage:1},{id:3,name:"Righteous Advance",type:"at-will",heroClass:"Cleric",description:"Your attack grants your ally time to advance.",rule:`Attack one adjacent Monster.
Hit or Miss: One Hero on your tile moves 2 squares.`,attackBonus:6,damage:1},{id:4,name:"Sacred Flame",type:"at-will",heroClass:"Cleric",description:"Sacred light shines from above, searing a single enemy with holy radiance.",rule:`Attack one Monster within 1 tile of you.
If you hit, choose yourself or one Hero on your tile. That Hero gains 1 Hit Point.`,attackBonus:6,damage:1},{id:5,name:"Blade Barrier",type:"daily",heroClass:"Cleric",description:"You conjure a wall of whirling blades to cut apart advancing foes.",rule:`Choose a tile within 2 tiles of you. Place five Blade Barrier tokens on five different squares on that tile.
When a Monster is placed on a square with a Blade Barrier token, remove that token and deal 1 damage to the Monster.`},{id:6,name:"Cause Fear",type:"daily",heroClass:"Cleric",description:"Your holy symbol ignites with divine light, slamming your foes with uncontrollable terror.",rule:`Choose a tile within 1 tile of you. Each ally on that tile adjacent to a Monster can make an At-Will attack with a +2 bonus to the Attack roll.
After the attacks, place each Monster remaining on a tile within 2 tiles of you.`},{id:7,name:"Wrathful Thunder",type:"daily",heroClass:"Cleric",description:"When you strike, a shattering thunderclap fills the room.",rule:`Attack one adjacent Monster.
After the attack, choose one Monster on your tile. Pass that Monster's card to the player on your right. That player now controls the Monster.`,attackBonus:6,damage:3},{id:8,name:"Astral Refuge",type:"utility",heroClass:"Cleric",description:"You send an ally to a safe refuge in the Astral Sea for a short time.",rule:`Use this power at the start of any Villain Phase.
Choose one Hero within 2 tiles of you. Remove that Hero from the tile. At the start of that player's next Hero Phase, that player places the Hero on any tile.`},{id:9,name:"Command",type:"utility",heroClass:"Cleric",description:"You utter a single word that your foe must obey.",rule:`Use this power during your Hero Phase.
Choose one Monster on your tile. Place that Monster on a tile within 2 tiles of you.`},{id:10,name:"Perseverance",type:"utility",heroClass:"Cleric",description:"A house does not stand with just a single wall.",rule:`Use this power when any player draws an Encounter Card.
The cost to cancel the Encounter Card is reduced by the number of Heroes on your tile, including your own Hero.`},{id:11,name:"Dwarven Resilience",type:"utility",heroClass:"Dwarf",description:"Your dwarven heritage grants you uncommonly strong health.",rule:`Use this power during your Hero Phase instead of moving.
You regain 4 Hit Points.`,isCustomAbility:!0},{id:12,name:"Charge",type:"at-will",heroClass:"Fighter",description:"You rush into combat.",rule:"Move up to your speed, then attack one adjacent Monster.",attackBonus:8,damage:1},{id:13,name:"Reaping Strike",type:"at-will",heroClass:"Fighter",description:"You punctuate your scything attacks with wicked jabs and small cutting blows that slip through your enemy's defenses.",rule:"Attack one adjacent Monster twice.",attackBonus:4,damage:1},{id:14,name:"Sure Strike",type:"at-will",heroClass:"Fighter",description:"You trade power for precision.",rule:"Attack one adjacent Monster.",attackBonus:11,damage:1},{id:15,name:"Comeback Strike",type:"daily",heroClass:"Fighter",description:"A timely strike gives you the strength to fight on.",rule:`Attack one adjacent Monster.
If you hit, you regain 2 hit points.
If you miss, do not flip this card over.`,attackBonus:7,damage:2},{id:16,name:"Into the Fray",type:"daily",heroClass:"Fighter",description:"You unleash a fierce battle cry as you leap boldly into battle.",rule:"Place your Hero adjacent to any Hero within 2 tiles of you. Attack one adjacent Monster.",attackBonus:7,damage:3},{id:17,name:"Taunting Advance",type:"daily",heroClass:"Fighter",description:"You rush forward and call forth your enemy.",rule:"Move your speed. Then choose a Monster within 2 tiles of you. Place that Monster adjacent to your Hero and attack it.",attackBonus:8,damage:3},{id:18,name:"Inspiring Advice",type:"utility",heroClass:"Fighter",description:"You encourage your teammate to fight on.",rule:`Use when a Hero misses a Monster with an attack.
The Hero rerolls the attack.
If the attack misses, do not flip this card over.`},{id:19,name:"One for the Team",type:"utility",heroClass:"Fighter",description:"You protect your ally from the hazards of the dungeon.",rule:`Use when any player draws an Encounter Card.
Resolve the Encounter Card as if you drew it.`},{id:20,name:"To Arms!",type:"utility",heroClass:"Fighter",description:"You rally your companions to meet your foe head on.",rule:`Use when a new Monster is placed on a tile.
You and one Hero on your tile can move your speed.`},{id:21,name:"Lay On Hands",type:"utility",heroClass:"Paladin",description:"Your divine touch instantly heals wounds.",rule:"One adjacent Hero regains 2 hit points.",isCustomAbility:!0},{id:22,name:"Divine Challenge",type:"at-will",heroClass:"Paladin",description:"You boldly confront a nearby enemy.",rule:`Choose one Monster within 1 tile of you. Place that Monster adjacent to your Hero.
Attack one adjacent Monster.`,attackBonus:8,damage:1},{id:23,name:"Holy Strike",type:"at-will",heroClass:"Paladin",description:"You strike an enemy, igniting it with holy light.",rule:`Attack one adjacent Monster.
If you started your Hero Phase adjacent to the Monster, deal +1 damage if you hit.`,attackBonus:8,damage:1},{id:24,name:"Valiant Strike",type:"at-will",heroClass:"Paladin",description:"The odds against you add strength to your attack.",rule:`Attack one adjacent Monster.
When making this attack, you get a +1 bonus to attack for each Monster adjacent to your Hero.`,attackBonus:8,damage:1},{id:25,name:"Arcing Strike",type:"daily",heroClass:"Paladin",description:"You swing your weapon in a wide arc.",rule:"Attack one or two adjacent Monsters.",attackBonus:9,damage:3},{id:26,name:"Benign Transposition",type:"daily",heroClass:"Paladin",description:"You call upon divine power to switch places with an ally to strike a foe.",rule:`Choose 1 Hero within 2 tiles of you. You swap positions with that Hero.
After swapping positions, attack one adjacent Monster.`,attackBonus:8,damage:3},{id:27,name:"Righteous Smite",type:"daily",heroClass:"Paladin",description:"Your righteous attack fills your party with preternatural resolve.",rule:`Attack one adjacent Monster.
Hit or Miss: All Heroes on your tile regain 1 Hit Point.`,attackBonus:9,damage:3},{id:28,name:"Bravery",type:"utility",heroClass:"Paladin",description:"Your bravery gives you the power to fight on.",rule:`Use when a Monster within 1 tile of you activates during any player's Villain Phase.
Place your Hero adjacent to that Monster. You regain 1 hit point.`},{id:29,name:"Noble Shield",type:"utility",heroClass:"Paladin",description:"You quickly throw up your shield, protecting your friends from harm at your expense.",rule:`Use when a Monster targets you and at least one additional Hero with the same attack.
You are the only target of the attack, but the attack roll against you is automatically a 20 and cannot be rerolled.`},{id:30,name:"Virtue's Touch",type:"utility",heroClass:"Paladin",description:"Your gentle touch removes affliction.",rule:"Choose one adjacent Hero. End one condition on that Hero."},{id:31,name:"Furious Assault",type:"utility",heroClass:"Half-Orc",description:"Your wrath burns inside you, giving strength to your next attack.",rule:`Use this power when you hit a Monster with an attack.
The Monster takes +1 damage.`,isCustomAbility:!0},{id:32,name:"Distracting Jab",type:"at-will",heroClass:"Rogue",description:"You escape the clutches of your foe as it reacts to your attack.",rule:`Attack one adjacent Monster.
If you hit, move the Monster 1 square.
After the attack, move your speed.`,attackBonus:7,damage:1},{id:33,name:"Lucky Strike",type:"at-will",heroClass:"Rogue",description:"They fall for it if you're lucky, and then they fall.",rule:`Attack one Monster within 1 tile of you.
If you hit and your attack roll is an even number, deal +1 damage.`,attackBonus:7,damage:1},{id:34,name:"Positioning Shot",type:"at-will",heroClass:"Rogue",description:"To avoid your vicious attack, your enemy leaps exactly where you want it to be.",rule:`Attack one Monster within 2 tiles of you.
Hit or Miss: Place that Monster on any square on your tile or on an adjacent tile.`,attackBonus:7,damage:1},{id:35,name:"Acrobatic Onslaught",type:"daily",heroClass:"Rogue",description:"After a quick strike, you leap through the air, lining up your next target.",rule:`Attack one adjacent Monster.
Hit or Miss: Place your Hero on any tile within 2 tiles of where you started, and then use an At-Will power immediately.`,attackBonus:7,damage:2},{id:36,name:"King's Castle",type:"daily",heroClass:"Rogue",description:"It's hard to get the little guy when he's behind an ally who can crush plate armor in his teeth.",rule:`Swap positions with one Hero within 1 tile of you.
Attack 1 Monster within 2 tiles of you.`,attackBonus:7,damage:3},{id:37,name:"Tornado Strike",type:"daily",heroClass:"Rogue",description:"Your weapon becomes a blur as you make swift, sweeping attacks.",rule:`Attack four times. Each attack can be against any Monster on your tile.
After the attacks, place your Hero on any square on your tile.`,attackBonus:7,damage:1},{id:38,name:"Distant Diversion",type:"utility",heroClass:"Rogue",description:"The monster turns to investigate the sound of a thrown pebble.",rule:`Choose one Monster within 3 tiles of you.
Place that Monster onto an adjacent tile.`},{id:39,name:"Practiced Evasion",type:"utility",heroClass:"Rogue",description:"A quick flip and quicker fingers disables the trap.",rule:`Use this power when you are hit by an attack from a Trap or Event Attack Encounter Card.
The attack misses. If the attack was from a Trap Encounter Card, you get a free Disable check against that Trap.`},{id:40,name:"Tumbling Escape",type:"utility",heroClass:"Rogue",description:"You nimbly roll out of harm's way.",rule:`Use this power when a Monster hits you with an attack.
The attack misses. Place your Hero on any tile within 1 tile of where you started.`},{id:41,name:"Hurled Breath",type:"daily",heroClass:"Dragonborn",description:"You hurl your draconic breath, engulfing your foes a short distance away.",rule:`Choose a tile within 2 tiles of you. Attack each Monster on that tile.
This attack does not count as an attack action.`,attackBonus:5,damage:1,isCustomAbility:!0},{id:42,name:"Arc Lightning",type:"at-will",heroClass:"Wizard",description:"Lightning leaps from your outstretched hands, blasting your foes.",rule:"Attack up to two Monsters. Each monster can be on your tile or any tile within 1 tile of you.",attackBonus:7,damage:1},{id:43,name:"Hypnotism",type:"at-will",heroClass:"Wizard",description:"Your enemy's mouth goes slack as your magic takes control.",rule:"Choose a Monster within 1 tile of you. Move that Monster 1 tile. If it ends adjacent to another Monster, make an attack against the second Monster.",attackBonus:9,damage:1},{id:44,name:"Ray of Frost",type:"at-will",heroClass:"Wizard",description:"A blistering ray of white frost streaks to your target, slowing its reactions.",rule:"Attack one Monster on your tile or on any tile within 2 tiles of you.",attackBonus:7,damage:1},{id:45,name:"Flaming Sphere",type:"daily",heroClass:"Wizard",description:"You conjure a rolling ball of fire and control where it goes.",rule:`Place 3 Flaming Sphere tokens in a stack on any square within 1 tile of you.
Instead of moving during your Hero phase, you can move the Flaming Sphere stack 1 tile.
At the end of your Hero Phase, you can remove 1 Flaming Sphere token and deal 1 damage to each Monster on that tile.`},{id:46,name:"Shock Sphere",type:"daily",heroClass:"Wizard",description:"You hurl a crackling orb of lightning, engulfing your foes in its electric embrace.",rule:"Choose a tile within 2 tiles of you. Attack each Monster on that tile.",attackBonus:9,damage:2},{id:47,name:"Spectral Ram",type:"daily",heroClass:"Wizard",description:"You bash your foe with arcane force that sends it reeling.",rule:`Attack one Monster within 2 tiles of you.
Hit or Miss: Place the Monster onto any tile within 2 tiles of where it started.`,attackBonus:9,damage:3},{id:48,name:"Invisibility",type:"utility",heroClass:"Wizard",description:"You vanish from sight.",rule:`Use this power during your Hero Phase.
Until the start of your next Hero Phase, you do not count as the closest Hero for any Monster's tactics.
Monster attacks that attack every Hero on a tile still attack you.`},{id:49,name:"Mirror Image",type:"utility",heroClass:"Wizard",description:"You create three duplicate images of yourself.",rule:`Use this power during your Hero Phase.
Place 3 Mirror Image tokens on your Hero Card.
For each Mirror Image token on your Hero Card, you gain +2 AC. Whenever a Monster misses you with an attack, remove 1 Mirror Image token.`},{id:50,name:"Wizard Eye",type:"utility",heroClass:"Wizard",description:"You see through a magical hovering eye, allowing you to explore from a distance.",rule:`Use this power during your Hero Phase.
Place the Wizard Eye token on a tile within 1 tile of you.
Instead of moving during your Hero Phase, you can move the Wizard Eye marker 1 tile.
During your Exploration Phase, you can explore as if your Hero was on any unexplored edge on the Wizard Eye's tile.`}],si={quinn:1,vistra:11,tarak:31,keyleth:21,haskan:41};function Jr(e){const n={Cleric:["Cleric"],Fighter:["Fighter","Dwarf"],Paladin:["Paladin"],Rogue:["Rogue","Half-Orc"],Wizard:["Wizard","Dragonborn"]}[e]||[];return ai.filter(r=>n.includes(r.heroClass))}function fc(e){return Jr(e).filter(t=>t.type==="at-will")}function vc(e){return Jr(e).filter(t=>t.type==="daily")}function hc(e){return Jr(e).filter(t=>t.type==="utility"&&!t.isCustomAbility)}function pc(e){return ai.find(t=>t.id===e)}function mc(e,t,n,r,a){const s=[t,n,...r,a];return{heroId:e,customAbility:t,utility:n,atWills:r,daily:a,cardStates:s.map(o=>({cardId:o,isFlipped:!1}))}}function gc(e,t){return{...e,cardStates:e.cardStates.map(n=>n.cardId===t?{...n,isFlipped:!0}:n)}}function _c(e,t){return{...e,dailyLevel2:t,cardStates:[...e.cardStates,{cardId:t,isFlipped:!1}]}}const yc={availableHeroes:Mt,selectedHeroes:[],heroEdgeMap:{},powerCardSelections:{},heroPowerCards:{}},ii=ei({name:"heroes",initialState:yc,reducers:{toggleHeroSelection:(e,t)=>{const n=t.payload,r=e.selectedHeroes.findIndex(a=>a.id===n);if(r>=0)e.selectedHeroes.splice(r,1),delete e.heroEdgeMap[n],delete e.powerCardSelections[n];else if(e.selectedHeroes.length<5){const a=e.availableHeroes.find(s=>s.id===n);a&&(e.selectedHeroes.push(a),e.powerCardSelections[n]={heroId:n,utility:null,atWills:[],daily:null})}},selectHeroFromEdge:(e,t)=>{const{heroId:n,edge:r}=t.payload,a=e.selectedHeroes.findIndex(s=>s.id===n);if(a>=0)e.heroEdgeMap[n]===r&&(e.selectedHeroes.splice(a,1),delete e.heroEdgeMap[n],delete e.powerCardSelections[n]);else if(e.selectedHeroes.length<5){const s=e.availableHeroes.find(o=>o.id===n);s&&(e.selectedHeroes.push(s),e.heroEdgeMap[n]=r,e.powerCardSelections[n]={heroId:n,utility:null,atWills:[],daily:null})}},clearSelection:e=>{e.selectedHeroes=[],e.heroEdgeMap={},e.powerCardSelections={},e.heroPowerCards={}},selectUtilityCard:(e,t)=>{const{heroId:n,cardId:r}=t.payload,a=e.powerCardSelections[n];a&&(a.utility=a.utility===r?null:r)},toggleAtWillCard:(e,t)=>{const{heroId:n,cardId:r}=t.payload,a=e.powerCardSelections[n];if(a){const s=a.atWills.indexOf(r);s>=0?a.atWills.splice(s,1):a.atWills.length<2&&a.atWills.push(r)}},selectDailyCard:(e,t)=>{const{heroId:n,cardId:r}=t.payload,a=e.powerCardSelections[n];a&&(a.daily=a.daily===r?null:r)},finalizePowerCardSelections:e=>{e.heroPowerCards={};for(const t of e.selectedHeroes){const n=e.powerCardSelections[t.id],r=si[t.id];n&&r&&n.utility&&n.daily&&n.atWills.length===2?e.heroPowerCards[t.id]=mc(t.id,r,n.utility,n.atWills,n.daily):console.warn(`Hero ${t.id} has incomplete power card selection, skipping`)}},usePowerCard:(e,t)=>{const{heroId:n,cardId:r}=t.payload,a=e.heroPowerCards[n];a&&(e.heroPowerCards[n]=gc(a,r))},addLevel2Daily:(e,t)=>{const{heroId:n,cardId:r}=t.payload,a=e.heroPowerCards[n];a&&(e.heroPowerCards[n]=_c(a,r))}}}),{toggleHeroSelection:$u,selectHeroFromEdge:wc,clearSelection:ef,selectUtilityCard:kc,toggleAtWillCard:bc,selectDailyCard:xc,finalizePowerCardSelections:Sc,usePowerCard:tf,addLevel2Daily:nf}=ii.actions,Ic=ii.reducer,fn={minX:1,maxX:3,minY:0,maxY:7,staircase:[{x:1,y:3},{x:2,y:3},{x:1,y:4},{x:2,y:4}]},Qt=4,Tc=4,Mc=8;function Cn(e){const{col:t,row:n}=e.position;if(e.tileType==="start")return{minX:0,maxX:3,minY:0,maxY:7};let r,a;return t>0?r=Tc+(t-1)*Qt:t<0?r=t*Qt:r=0,n>0?a=Mc+(n-1)*Qt:n<0?a=n*Qt:a=0,{minX:r,maxX:r+Qt-1,minY:a,maxY:a+Qt-1}}function kn(e,t){for(const n of t.tiles){const r=Cn(n);if(e.x>=r.minX&&e.x<=r.maxX&&e.y>=r.minY&&e.y<=r.maxY)return n}return null}function Cc(e){return e.x>=fn.minX&&e.x<=fn.maxX&&e.y>=fn.minY&&e.y<=fn.maxY}function oi(e){return fn.staircase.some(t=>t.x===e.x&&t.y===e.y)}function Ec(e,t){return Cc(e)&&!oi(e)}function Pc(e,t,n){return t.some(r=>r.position.x===e.x&&r.position.y===e.y&&r.heroId!==n)}function Hc(e,t,n,r){const a=Cn(r),s=r.tileType==="start"?1:a.minX,o=e.y===a.minY,c=e.y===a.maxY,l=e.x===a.maxX,d=e.x===s,f=n<0?"north":n>0?"south":null,m=t<0?"west":t>0?"east":null;if(!f||!m)return!1;let g=!1,_=!1;return f==="north"&&o&&r.edges.north==="wall"&&(g=!0),f==="south"&&c&&r.edges.south==="wall"&&(g=!0),m==="east"&&l&&r.edges.east==="wall"&&(_=!0),m==="west"&&d&&r.edges.west==="wall"&&(_=!0),g&&_}function Ac(e,t,n,r){const a=r.x-n.x,s=r.y-n.y;if(a!==0&&s!==0)return!1;let o,c;return s<0?(o="north",c="south"):s>0?(o="south",c="north"):a>0?(o="east",c="west"):(o="west",c="east"),!(e.edges[o]!=="open"||t.edges[c]!=="open")}function $r(e,t){const n=[],r=[{dx:0,dy:-1,cardinal:!0},{dx:0,dy:1,cardinal:!0},{dx:-1,dy:0,cardinal:!0},{dx:1,dy:0,cardinal:!0},{dx:-1,dy:-1,cardinal:!1},{dx:1,dy:-1,cardinal:!1},{dx:-1,dy:1,cardinal:!1},{dx:1,dy:1,cardinal:!1}];if(!t){for(const s of r){const o={x:e.x+s.dx,y:e.y+s.dy};Ec(o)&&n.push(o)}return n}const a=kn(e,t);if(!a)return n;for(const s of r){const o={x:e.x+s.dx,y:e.y+s.dy},c=kn(o,t);if(c&&!(c.tileType==="start"&&(oi(o)||o.x<1))){if(a.id===c.id){if(!s.cardinal&&Hc(e,s.dx,s.dy,a))continue;n.push(o);continue}s.cardinal&&Ac(a,c,e,o)&&n.push(o)}}return n}function Dc(e,t,n,r,a){const s=[],o=new Set,c=[{pos:e,distance:0}];for(o.add(`${e.x},${e.y}`);c.length>0;){const l=c.shift();if(!l)break;if(l.distance>0&&!Pc(l.pos,n,r)&&s.push(l.pos),l.distance<t){const d=$r(l.pos,a);for(const f of d){const m=`${f.x},${f.y}`;o.has(m)||(o.add(m),c.push({pos:f,distance:l.distance+1}))}}}return s}function Rc(e,t){return t.some(n=>n.x===e.x&&n.y===e.y)}const zc={north:[{x:1,y:0},{x:2,y:0},{x:3,y:0}],south:[{x:1,y:7},{x:2,y:7},{x:3,y:7}],east:[{x:3,y:0},{x:3,y:1},{x:3,y:2},{x:3,y:5},{x:3,y:6},{x:3,y:7}],west:[{x:1,y:0},{x:1,y:1},{x:1,y:2},{x:1,y:5},{x:1,y:6},{x:1,y:7}]};function Oc(e,t){return zc[t].some(r=>r.x===e.x&&r.y===e.y)}function ea(e){return{north:"south",south:"north",east:"west",west:"east"}[e]}function Nc(e,t){const n=t.tiles.find(r=>r.id==="start-tile");if(!n)return null;for(const r of t.unexploredEdges)if(r.tileId===n.id&&Oc(e.position,r.direction))return r;return null}function jc(e,t){const{col:n,row:r}=e.position;switch(t){case"north":return{col:n,row:r-1};case"south":return{col:n,row:r+1};case"east":return{col:n+1,row:r};case"west":return{col:n-1,row:r}}}function Bc(e){const t=ea(e);return{south:0,west:90,north:180,east:270}[t]}function Lc(e){return ri.find(t=>t.tileType===e)}function Fc(e,t,n){const r=n.tiles.find(f=>f.id===e.tileId);if(!r)return null;const a=jc(r,e.direction),s=Bc(e.direction);if(!Lc(t))return null;const c=`tile-${n.tiles.length}`,d={north:"unexplored",south:"unexplored",east:"unexplored",west:"unexplored",[ea(e.direction)]:"open"};return{id:c,tileType:t,position:a,rotation:s,edges:d}}function Pr(){return{tiles:[{...uc}],unexploredEdges:[{tileId:"start-tile",direction:"north"},{tileId:"start-tile",direction:"south"},{tileId:"start-tile",direction:"east"},{tileId:"start-tile",direction:"west"}],tileDeck:[]}}function Uc(e,t=Math.random){const n=[...e];for(let r=n.length-1;r>0;r--){const a=Math.floor(t()*(r+1));[n[r],n[a]]=[n[a],n[r]]}return n}function qc(e,t=Math.random){return Uc(e,t)}function Wc(e){if(e.length===0)return{drawnTile:null,remainingDeck:[]};const[t,...n]=e;return{drawnTile:t,remainingDeck:n}}function Yc(e,t,n){const r=e.unexploredEdges.filter(l=>!(l.tileId===t.tileId&&l.direction===t.direction)),a=ea(t.direction),o=["north","south","east","west"].filter(l=>l!==a&&n.edges[l]==="unexplored").map(l=>({tileId:n.id,direction:l}));return{tiles:[...e.tiles.map(l=>l.id===t.tileId?{...l,edges:{...l.edges,[t.direction]:"open"}}:l),n],unexploredEdges:[...r,...o],tileDeck:e.tileDeck}}function li(e,t=Math.random){const n=[...e];for(let r=n.length-1;r>0;r--){const a=Math.floor(t()*(r+1));[n[r],n[a]]=[n[a],n[r]]}return n}function Vc(e=Math.random){return{drawPile:li([...lc],e),discardPile:[]}}function Gc(e,t=Math.random){if(e.drawPile.length===0){if(e.discardPile.length===0)return{monster:null,deck:e};const a=li(e.discardPile,t);return{monster:a[0],deck:{drawPile:a.slice(1),discardPile:[]}}}const[n,...r]=e.drawPile;return{monster:n,deck:{drawPile:r,discardPile:e.discardPile}}}function Xc(e,t){return{drawPile:e.drawPile,discardPile:[...e.discardPile,t]}}function ta(e){return Mn.find(t=>t.id===e)}function Kc(e,t,n,r,a){const s=ta(e);return s?{monsterId:e,instanceId:`${e}-${a}`,position:t,currentHp:s.hp,controllerId:n,tileId:r}:null}const Qc=4,Xa=Math.floor(Qc/2);function Zc(){return{x:Xa,y:Xa}}function Jc(e,t){return e.currentHp===0&&t.healingSurges>0}function $c(e,t){return e.currentHp===0&&t.healingSurges===0}function ed(e,t){const n=e.surgeValue;return{heroState:{...e,currentHp:Math.min(n,e.maxHp)},resources:{...t,healingSurges:t.healingSurges-1}}}function ci(e=Math.random){return Math.floor(e()*20)+1}function td(e,t,n=Math.random){const r=ci(n),a=r+e.attackBonus,s=r===20||a>=t,o=r===20;return{roll:r,attackBonus:e.attackBonus,total:a,targetAC:t,isHit:s,damage:s?e.damage:0,isCritical:o}}function nd(e,t,n){return e.level===1&&t===20&&n.xp>=ni}function rd(e,t){const n=ti[e.heroId];if(!n)return console.warn(`Hero levels not found for heroId: ${e.heroId}. Level up skipped.`),{heroState:e,resources:t};const r=n.level2,a=e.maxHp-e.currentHp;return{heroState:{...e,level:2,maxHp:r.maxHp,currentHp:Math.max(1,r.maxHp-a),ac:r.ac,surgeValue:r.surgeValue,attackBonus:r.attackBonus},resources:{...t,xp:t.xp-ni}}}function ad(e,t,n){return t===20&&e===2?n+1:n}function Hr(e,t){const n=Math.abs(e.x-t.x),r=Math.abs(e.y-t.y);return n<=1&&r<=1&&(n>0||r>0)}function sd(e){return ta(e)?.ac}function id(e,t){const n=t.tiles.find(a=>a.id===e.tileId);if(!n)return null;const r=Cn(n);return{x:r.minX+e.position.x,y:r.minY+e.position.y}}function od(e,t,n,r){return r?kn(e,r)?t.filter(s=>{const o=id(s,r);return o?Hr(e,o):!1}):[]:t.filter(s=>s.tileId===n&&Hr(e,s.position))}function Kn(e,t){const n=t.tiles.find(a=>a.id===e.tileId);if(!n)return null;const r=Cn(n);return{x:r.minX+e.position.x,y:r.minY+e.position.y}}function Ka(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function ld(e,t,n,r){const a=Kn(e,r);if(!a)return null;const s=t.filter(d=>{const f=n[d.heroId];return f!==void 0&&f>0});if(s.length===0)return null;const o=new Set,c=[{pos:a,distance:0}];o.add(`${a.x},${a.y}`);let l=null;for(;c.length>0;){const d=c.shift();for(const m of s)m.position.x===d.pos.x&&m.position.y===d.pos.y&&(!l||d.distance<l.distance)&&(l={hero:m,distance:d.distance});if(l&&l.distance<d.distance)break;const f=$r(d.pos,r);for(const m of f){const g=`${m.x},${m.y}`;o.has(g)||(o.add(g),c.push({pos:m,distance:d.distance+1}))}}return l}function cd(e,t,n,r){const a=Kn(e,r);if(!a)return null;const s=t.filter(o=>{const c=n[o.heroId];return c!==void 0&&c>0});for(const o of s)if(Hr(a,o.position))return o;return null}function dd(e,t,n,r,a){const s=Kn(e,a);if(!s)return null;const c=$r(s,a).filter(f=>{if(n.some(g=>g.position.x===f.x&&g.position.y===f.y))return!1;for(const g of r){if(g.instanceId===e.instanceId)continue;const _=Kn(g,a);if(_&&_.x===f.x&&_.y===f.y)return!1}return!0});if(c.length===0)return null;let l=c[0],d=Ka(l,t);for(const f of c){const m=Ka(f,t);m<d&&(d=m,l=f)}return l}function ud(e,t,n=Math.random){const r=oc[e];if(!r)return{roll:1,attackBonus:0,total:1,targetAC:t,isHit:!1,damage:0,isCritical:!1};const a=ci(n),s=a+r.attackBonus,o=a===20||s>=t,c=a===20;return{roll:a,attackBonus:r.attackBonus,total:s,targetAC:t,isHit:o,damage:o?r.damage:0,isCritical:c}}function fd(e,t,n,r,a,s,o=Math.random){const c=cd(e,t,n,s);if(c){const f=r[c.heroId]??10,m=ud(e.monsterId,f,o);return{type:"attack",targetId:c.heroId,result:m}}const l=ld(e,t,n,s);if(!l)return{type:"none"};const d=dd(e,l.hero.position,t,a,s);return d?{type:"move",destination:d}:{type:"none"}}function vd(e,t,n){const r=n.tiles.find(s=>s.id===t);if(!r)return null;const a=Cn(r);return{x:e.x-a.minX,y:e.y-a.minY}}function hd(e,t){return kn(e,t)?.id??null}const Ar={currentHeroIndex:0,currentPhase:"hero-phase",turnNumber:1},Nn={actionsTaken:[],canMove:!0,canAttack:!0},Dr={monstersDefeated:0,monstersToDefeat:2,objective:"Defeat 2 monsters"},Rr={xp:0,healingSurges:2},pd={currentScreen:"character-select",heroTokens:[],turnState:{...Ar},validMoveSquares:[],showingMovement:!1,dungeon:Pr(),monsterDeck:{drawPile:[],discardPile:[]},monsters:[],monsterInstanceCounter:0,recentlySpawnedMonsterId:null,attackResult:null,attackTargetId:null,heroHp:[],monsterAttackResult:null,monsterAttackTargetId:null,monsterAttackerId:null,villainPhaseMonsterIndex:0,monsterMoveActionId:null,heroTurnActions:{...Nn},scenario:{...Dr},partyResources:{...Rr},defeatedMonsterXp:null,defeatedMonsterName:null,leveledUpHeroId:null,levelUpOldStats:null,healingSurgeUsedHeroId:null,healingSurgeHpRestored:null,defeatReason:null};function Qa(e,t){const n=[...e.actionsTaken,t],r=n.filter(c=>c==="move").length,a=n.filter(c=>c==="attack").length,s=a===0,o=r<2&&!(r===1&&a===1);return{actionsTaken:n,canMove:o,canAttack:s}}function md(e){const{actionsTaken:t}=e,n=t.filter(a=>a==="move").length,r=t.filter(a=>a==="attack").length;return n>=1&&r>=1||n>=2}function gd(e){let t=e;return()=>(t=t*1103515245+12345&2147483647,t/2147483647)}function _d(e,t=Math.random){const n=[...e];for(let r=n.length-1;r>0;r--){const a=Math.floor(t()*(r+1));[n[r],n[a]]=[n[a],n[r]]}return n}const di=ei({name:"game",initialState:pd,reducers:{startGame:(e,t)=>{const{heroIds:n,positions:r,seed:a}=t.payload;if(n.length===0||n.length>5)return;const s=a??Date.now();e.randomSeed=s;let o;const c=gd(s);r?o=r:o=_d(cc,c).slice(0,5),e.heroTokens=n.map((d,f)=>({heroId:d,position:o[f]})),e.turnState={...Ar},e.validMoveSquares=[],e.showingMovement=!1;const l=Pr();l.tileDeck=qc([...dc],c),e.dungeon=l,e.monsterDeck=Vc(c),e.monsters=[],e.monsterInstanceCounter=0,e.recentlySpawnedMonsterId=null,e.attackResult=null,e.attackTargetId=null,e.heroHp=n.map(d=>{const f=ti[d];f||console.warn(`Hero levels not found for ${d}, using defaults`);const m=f?.level1,g=Mt.find(C=>C.id===d),_=m?.hp??g?.hp??8,S=m?.ac??g?.ac??17,A=m?.surgeValue??4,w=m?.attackBonus??g?.attack?.attackBonus??6;return{heroId:d,currentHp:_,maxHp:_,level:1,ac:S,surgeValue:A,attackBonus:w}}),e.monsterAttackResult=null,e.monsterAttackTargetId=null,e.monsterAttackerId=null,e.villainPhaseMonsterIndex=0,e.heroTurnActions={...Nn},e.scenario={...Dr},e.partyResources={...Rr},e.defeatedMonsterXp=null,e.defeatedMonsterName=null,e.leveledUpHeroId=null,e.levelUpOldStats=null,e.currentScreen="game-board"},setHeroPosition:(e,t)=>{const n=e.heroTokens.find(r=>r.heroId===t.payload.heroId);n&&(n.position=t.payload.position)},showMovement:(e,t)=>{if(e.turnState.currentPhase!=="hero-phase"||!e.heroTurnActions.canMove)return;const{heroId:n,speed:r}=t.payload,a=e.heroTokens.find(s=>s.heroId===n);a&&(e.validMoveSquares=Dc(a.position,r,e.heroTokens,n,e.dungeon),e.showingMovement=!0)},hideMovement:e=>{e.validMoveSquares=[],e.showingMovement=!1},moveHero:(e,t)=>{const{heroId:n,position:r}=t.payload;if(e.turnState.currentPhase!=="hero-phase"||!e.heroTurnActions.canMove||!Rc(r,e.validMoveSquares))return;const a=e.heroTokens.find(s=>s.heroId===n);a&&(a.position=r,e.validMoveSquares=[],e.showingMovement=!1,e.heroTurnActions=Qa(e.heroTurnActions,"move"))},resetGame:e=>{e.currentScreen="character-select",e.heroTokens=[],e.turnState={...Ar},e.randomSeed=void 0,e.validMoveSquares=[],e.showingMovement=!1,e.dungeon=Pr(),e.monsterDeck={drawPile:[],discardPile:[]},e.monsters=[],e.monsterInstanceCounter=0,e.recentlySpawnedMonsterId=null,e.attackResult=null,e.attackTargetId=null,e.heroHp=[],e.monsterAttackResult=null,e.monsterAttackTargetId=null,e.monsterAttackerId=null,e.villainPhaseMonsterIndex=0,e.monsterMoveActionId=null,e.heroTurnActions={...Nn},e.scenario={...Dr},e.partyResources={...Rr},e.defeatedMonsterXp=null,e.defeatedMonsterName=null,e.leveledUpHeroId=null,e.levelUpOldStats=null,e.healingSurgeUsedHeroId=null,e.healingSurgeHpRestored=null,e.defeatReason=null},endHeroPhase:e=>{if(e.turnState.currentPhase!=="hero-phase")return;e.recentlySpawnedMonsterId=null;const t=e.heroTokens[e.turnState.currentHeroIndex];if(!t)return;const n=Nc(t,e.dungeon);if(n&&e.dungeon.tileDeck.length>0){const{drawnTile:r,remainingDeck:a}=Wc(e.dungeon.tileDeck);if(r){const s=Fc(n,r,e.dungeon);if(s){e.dungeon=Yc(e.dungeon,n,s),e.dungeon.tileDeck=a;const{monster:o,deck:c}=Gc(e.monsterDeck);if(o){const l=Zc(),d=Kc(o,l,t.heroId,s.id,e.monsterInstanceCounter);d&&(e.monsters.push(d),e.monsterInstanceCounter+=1,e.recentlySpawnedMonsterId=d.instanceId),e.monsterDeck=c}}}}e.turnState.currentPhase="exploration-phase"},endExplorationPhase:e=>{e.turnState.currentPhase==="exploration-phase"&&(e.turnState.currentPhase="villain-phase",e.villainPhaseMonsterIndex=0,e.monsterAttackResult=null,e.monsterAttackTargetId=null,e.monsterAttackerId=null,e.monsterMoveActionId=null)},endVillainPhase:e=>{if(e.turnState.currentPhase!=="villain-phase")return;e.villainPhaseMonsterIndex=0,e.monsterAttackResult=null,e.monsterAttackTargetId=null,e.monsterAttackerId=null,e.monsterMoveActionId=null,e.healingSurgeUsedHeroId=null,e.healingSurgeHpRestored=null,e.turnState.currentHeroIndex=(e.turnState.currentHeroIndex+1)%e.heroTokens.length,e.turnState.currentHeroIndex===0&&(e.turnState.turnNumber+=1),e.turnState.currentPhase="hero-phase",e.heroTurnActions={...Nn};const t=e.heroTokens[e.turnState.currentHeroIndex]?.heroId;if(t){const n=e.heroHp.findIndex(r=>r.heroId===t);if(n!==-1){const r=e.heroHp[n];if($c(r,e.partyResources)){const a=Mt.find(o=>o.id===t);a||console.warn(`Hero not found in AVAILABLE_HEROES for ID: ${t}`);const s=a?.name??"A hero";e.defeatReason=`${s} fell with no healing surges remaining.`,e.currentScreen="defeat";return}if(Jc(r,e.partyResources)){const a=ed(r,e.partyResources);e.heroHp[n]=a.heroState,e.partyResources=a.resources,e.healingSurgeUsedHeroId=t,e.healingSurgeHpRestored=r.surgeValue}}}},dismissMonsterCard:e=>{e.recentlySpawnedMonsterId=null},setAttackResult:(e,t)=>{if(e.turnState.currentPhase!=="hero-phase"||!e.heroTurnActions.canAttack)return;const{result:n,targetInstanceId:r}=t.payload;e.attackTargetId=r,e.defeatedMonsterXp=null,e.defeatedMonsterName=null,e.leveledUpHeroId=null,e.levelUpOldStats=null;const a=e.heroTokens[e.turnState.currentHeroIndex]?.heroId,s=e.heroHp.find(c=>c.heroId===a),o=n.isHit&&s?ad(s.level,n.roll,n.damage):n.damage;if(e.attackResult={...n,damage:o},n.isHit&&o>0){const c=e.monsters.find(l=>l.instanceId===r);if(c&&(c.currentHp-=o,c.currentHp<=0)){const l=ta(c.monsterId);l||console.warn(`Monster definition not found for ID: ${c.monsterId}`);const d=l?.xp??0;e.partyResources.xp+=d,e.defeatedMonsterXp=d,e.defeatedMonsterName=l?.name??c.monsterId,e.monsters=e.monsters.filter(f=>f.instanceId!==r),e.monsterDeck=Xc(e.monsterDeck,c.monsterId),e.scenario.monstersDefeated+=1,e.scenario.monstersDefeated>=e.scenario.monstersToDefeat&&(e.currentScreen="victory")}}if(s&&a&&nd(s,n.roll,e.partyResources)){e.levelUpOldStats={...s};const c=rd(s,e.partyResources),l=e.heroHp.findIndex(d=>d.heroId===a);l!==-1&&(e.heroHp[l]=c.heroState),e.partyResources=c.resources,e.leveledUpHeroId=a}e.heroTurnActions=Qa(e.heroTurnActions,"attack")},dismissAttackResult:e=>{e.attackResult=null,e.attackTargetId=null},dismissDefeatNotification:e=>{e.defeatedMonsterXp=null,e.defeatedMonsterName=null},dismissLevelUpNotification:e=>{e.leveledUpHeroId=null,e.levelUpOldStats=null},setMonsters:(e,t)=>{e.monsters=t.payload},activateNextMonster:(e,t)=>{if(e.turnState.currentPhase!=="villain-phase")return;const n=e.heroTokens[e.turnState.currentHeroIndex]?.heroId;if(!n)return;const r=e.monsters.filter(d=>d.controllerId===n);if(e.villainPhaseMonsterIndex>=r.length)return;const a=r[e.villainPhaseMonsterIndex];if(!a)return;const s={},o={};for(const d of e.heroHp)s[d.heroId]=d.currentHp;for(const d of e.heroTokens){const f=Mt.find(m=>m.id===d.heroId);f&&(o[d.heroId]=f.ac)}const c=t.payload?.randomFn??Math.random,l=fd(a,e.heroTokens,s,o,e.monsters,e.dungeon,c);if(l.type==="move"){const d=e.monsters.find(f=>f.instanceId===a.instanceId);if(d){const f=hd(l.destination,e.dungeon);if(f){const m=vd(l.destination,f,e.dungeon);m&&(d.position=m,d.tileId=f)}}e.monsterMoveActionId=a.instanceId}else if(l.type==="attack"&&(e.monsterAttackResult=l.result,e.monsterAttackTargetId=l.targetId,e.monsterAttackerId=a.instanceId,l.result.isHit&&l.result.damage>0)){const d=e.heroHp.find(f=>f.heroId===l.targetId);d&&(d.currentHp=Math.max(0,d.currentHp-l.result.damage),e.heroHp.every(m=>m.currentHp<=0)&&(e.currentScreen="defeat"))}e.villainPhaseMonsterIndex+=1},dismissMonsterAttackResult:e=>{e.monsterAttackResult=null,e.monsterAttackTargetId=null,e.monsterAttackerId=null},dismissMonsterMoveAction:e=>{e.monsterMoveActionId=null},dismissHealingSurgeNotification:e=>{e.healingSurgeUsedHeroId=null,e.healingSurgeHpRestored=null},setHeroHp:(e,t)=>{const{heroId:n,hp:r}=t.payload,a=e.heroHp.find(s=>s.heroId===n);a&&(a.currentHp=Math.max(0,r))},setPartyResources:(e,t)=>{const{xp:n,healingSurges:r}=t.payload;n!==void 0&&(e.partyResources.xp=n),r!==void 0&&(e.partyResources.healingSurges=r)}}}),{startGame:yd,setHeroPosition:rf,showMovement:Za,hideMovement:wd,moveHero:kd,resetGame:na,endHeroPhase:Ja,endExplorationPhase:bd,endVillainPhase:$a,dismissMonsterCard:xd,setAttackResult:Sd,dismissAttackResult:Id,dismissDefeatNotification:Td,setMonsters:af,activateNextMonster:Md,dismissMonsterAttackResult:Cd,dismissMonsterMoveAction:Ed,dismissHealingSurgeNotification:Pd,setHeroHp:sf,dismissLevelUpNotification:Hd,setPartyResources:of}=di.actions,Ad=di.reducer,Y=Kl({reducer:{heroes:Ic,game:Ad}});typeof window<"u"&&(window.__REDUX_STORE__=Y);function Be(e){const t="/Ashardalon/",n=e.startsWith("/")?e.slice(1):e;return(t.endsWith("/")?t:t+"/")+n}var Dd=D('<span class="status-complete svelte-4rkta9">â Selection Complete</span>'),Rd=D('<span class="status-incomplete svelte-4rkta9"> </span>'),zd=D("<span> </span>"),Od=D('<div class="card-stats svelte-4rkta9"><span> </span> <!></div>'),Nd=D('<div class="power-card custom-ability svelte-4rkta9" data-testid="custom-ability-card"><div class="card-header svelte-4rkta9"><span class="card-name svelte-4rkta9"> </span> <span class="card-type svelte-4rkta9"> </span></div> <p class="card-description svelte-4rkta9"> </p> <p class="card-rule svelte-4rkta9"> </p> <!></div>'),jd=D('<button><div class="card-header svelte-4rkta9"><span class="card-name svelte-4rkta9"> </span> <span class="card-type svelte-4rkta9"> </span></div> <p class="card-description svelte-4rkta9"> </p> <p class="card-rule svelte-4rkta9"> </p></button>'),Bd=D("<span> </span>"),Ld=D('<div class="card-stats svelte-4rkta9"><span> </span> <!></div>'),Fd=D('<button><div class="card-header svelte-4rkta9"><span class="card-name svelte-4rkta9"> </span> <span class="card-type svelte-4rkta9"> </span></div> <p class="card-description svelte-4rkta9"> </p> <p class="card-rule svelte-4rkta9"> </p> <!></button>'),Ud=D("<span> </span>"),qd=D('<div class="card-stats svelte-4rkta9"><span> </span> <!></div>'),Wd=D('<button><div class="card-header svelte-4rkta9"><span class="card-name svelte-4rkta9"> </span> <span class="card-type svelte-4rkta9"> </span></div> <p class="card-description svelte-4rkta9"> </p> <p class="card-rule svelte-4rkta9"> </p> <!></button>'),Yd=D('<div class="power-card-selection svelte-4rkta9" data-testid="power-card-selection"><div class="modal-overlay svelte-4rkta9" role="button" tabindex="-1" aria-label="Close modal"></div> <div class="modal-content svelte-4rkta9"><div class="modal-header svelte-4rkta9"><h2 class="svelte-4rkta9"> </h2> <button class="close-button svelte-4rkta9" data-testid="close-power-selection">Ã</button></div> <div class="selection-status svelte-4rkta9" data-testid="selection-status"><!></div> <div class="card-sections svelte-4rkta9"><div class="card-section svelte-4rkta9"><h3 class="svelte-4rkta9">Custom Ability (Automatic)</h3> <div class="card-grid svelte-4rkta9"><!></div></div> <div class="card-section svelte-4rkta9"><h3 class="svelte-4rkta9">Utility Power (Select 1)</h3> <div class="card-grid svelte-4rkta9" data-testid="utility-cards"></div></div> <div class="card-section svelte-4rkta9"><h3 class="svelte-4rkta9">At-Will Powers (Select 2)</h3> <div class="card-grid svelte-4rkta9" data-testid="atwill-cards"></div></div> <div class="card-section svelte-4rkta9"><h3 class="svelte-4rkta9">Daily Power (Select 1)</h3> <div class="card-grid svelte-4rkta9" data-testid="daily-cards"></div></div></div> <div class="modal-footer svelte-4rkta9"><button class="done-button svelte-4rkta9" data-testid="done-power-selection">Done</button></div></div></div>');function Vd(e,t){Pe(t,!0);const n=G(()=>fc(t.hero.heroClass)),r=G(()=>vc(t.hero.heroClass)),a=G(()=>hc(t.hero.heroClass)),s=G(()=>si[t.hero.id]),o=G(()=>i(s)?pc(i(s)):null),c=G(()=>t.selection.utility!==null&&t.selection.atWills.length===2&&t.selection.daily!==null);function l(b){Y.dispatch(kc({heroId:t.hero.id,cardId:b}))}function d(b){Y.dispatch(bc({heroId:t.hero.id,cardId:b}))}function f(b){Y.dispatch(xc({heroId:t.hero.id,cardId:b}))}function m(b){return t.selection.utility===b}function g(b){return t.selection.atWills.includes(b)}function _(b){return t.selection.daily===b}function S(b){return t.selection.atWills.includes(b)||t.selection.atWills.length<2}var A=Yd(),w=u(A);w.__click=function(...b){t.onClose?.apply(this,b)},w.__keydown=b=>b.key==="Escape"&&t.onClose();var C=v(w,2),O=u(C),E=u(O),P=u(E),q=v(E,2);q.__click=function(...b){t.onClose?.apply(this,b)};var N=v(O,2),Z=u(N);{var V=b=>{var I=Dd();T(b,I)},K=b=>{var I=Rd(),W=u(I);U(()=>k(W,`Select: 1 Utility (${t.selection.utility?"â":"â"}), 
          2 At-Wills (${t.selection.atWills.length??""}/2), 
          1 Daily (${t.selection.daily?"â":"â"})`)),T(b,I)};j(Z,b=>{i(c)?b(V):b(K,!1)})}var ae=v(N,2),te=u(ae),oe=v(u(te),2),xe=u(oe);{var Se=b=>{var I=Nd(),W=u(I),ee=u(W),ce=u(ee),le=v(ee,2),ue=u(le),ge=v(W,2),de=u(ge),fe=v(ge,2),_e=u(fe),Ie=v(fe,2);{var vt=Te=>{var pe=Od(),ye=u(pe),Ue=u(ye),tt=v(ye,2);{var Rt=yt=>{var zt=zd(),it=u(zt);U(()=>k(it,`Damage: ${i(o).damage??""}`)),T(yt,zt)};j(tt,yt=>{i(o).damage!==void 0&&yt(Rt)})}U(()=>k(Ue,`Attack: +${i(o).attackBonus??""}`)),T(Te,pe)};j(Ie,Te=>{i(o).attackBonus!==void 0&&Te(vt)})}U(()=>{k(ce,i(o).name),k(ue,i(o).type),k(de,i(o).description),k(_e,i(o).rule)}),T(b,I)};j(xe,b=>{i(o)&&b(Se)})}var Ae=v(te,2),Fe=v(u(Ae),2);Ye(Fe,21,()=>i(a),b=>b.id,(b,I)=>{var W=jd();let ee;W.__click=()=>l(i(I).id);var ce=u(W),le=u(ce),ue=u(le),ge=v(le,2),de=u(ge),fe=v(ce,2),_e=u(fe),Ie=v(fe,2),vt=u(Ie);U(Te=>{ee=je(W,1,"power-card svelte-4rkta9",null,ee,Te),B(W,"data-testid",`utility-card-${i(I).id??""}`),k(ue,i(I).name),k(de,i(I).type),k(_e,i(I).description),k(vt,i(I).rule)},[()=>({selected:m(i(I).id)})]),T(b,W)});var se=v(Ae,2),ne=v(u(se),2);Ye(ne,21,()=>i(n),b=>b.id,(b,I)=>{var W=Fd();let ee;W.__click=()=>d(i(I).id);var ce=u(W),le=u(ce),ue=u(le),ge=v(le,2),de=u(ge),fe=v(ce,2),_e=u(fe),Ie=v(fe,2),vt=u(Ie),Te=v(Ie,2);{var pe=ye=>{var Ue=Ld(),tt=u(Ue),Rt=u(tt),yt=v(tt,2);{var zt=it=>{var qe=Bd(),dn=u(qe);U(()=>k(dn,`Damage: ${i(I).damage??""}`)),T(it,qe)};j(yt,it=>{i(I).damage!==void 0&&it(zt)})}U(()=>k(Rt,`Attack: +${i(I).attackBonus??""}`)),T(ye,Ue)};j(Te,ye=>{i(I).attackBonus!==void 0&&ye(pe)})}U((ye,Ue)=>{ee=je(W,1,"power-card svelte-4rkta9",null,ee,ye),W.disabled=Ue,B(W,"data-testid",`atwill-card-${i(I).id??""}`),k(ue,i(I).name),k(de,i(I).type),k(_e,i(I).description),k(vt,i(I).rule)},[()=>({selected:g(i(I).id),disabled:!S(i(I).id)}),()=>!S(i(I).id)]),T(b,W)});var he=v(se,2),H=v(u(he),2);Ye(H,21,()=>i(r),b=>b.id,(b,I)=>{var W=Wd();let ee;W.__click=()=>f(i(I).id);var ce=u(W),le=u(ce),ue=u(le),ge=v(le,2),de=u(ge),fe=v(ce,2),_e=u(fe),Ie=v(fe,2),vt=u(Ie),Te=v(Ie,2);{var pe=ye=>{var Ue=qd(),tt=u(Ue),Rt=u(tt),yt=v(tt,2);{var zt=it=>{var qe=Ud(),dn=u(qe);U(()=>k(dn,`Damage: ${i(I).damage??""}`)),T(it,qe)};j(yt,it=>{i(I).damage!==void 0&&it(zt)})}U(()=>k(Rt,`Attack: +${i(I).attackBonus??""}`)),T(ye,Ue)};j(Te,ye=>{i(I).attackBonus!==void 0&&ye(pe)})}U(ye=>{ee=je(W,1,"power-card svelte-4rkta9",null,ee,ye),B(W,"data-testid",`daily-card-${i(I).id??""}`),k(ue,i(I).name),k(de,i(I).type),k(_e,i(I).description),k(vt,i(I).rule)},[()=>({selected:_(i(I).id)})]),T(b,W)});var M=v(ae,2),R=u(M);R.__click=function(...b){t.onClose?.apply(this,b)},U(()=>{k(P,`Select Power Cards for ${t.hero.name??""}`),R.disabled=!i(c)}),T(e,A),He()}et(["click","keydown"]);var Gd=D('<button><img class="hero-image svelte-1rwnzlz"/> <div class="hero-info svelte-1rwnzlz"><span class="hero-name svelte-1rwnzlz" data-testid="hero-name"> </span> <span class="hero-class svelte-1rwnzlz"> </span></div></button>'),Xd=D('<button><img class="hero-image svelte-1rwnzlz"/> <div class="hero-info svelte-1rwnzlz"><span class="hero-name svelte-1rwnzlz" data-testid="hero-name"> </span> <span class="hero-class svelte-1rwnzlz"> </span></div></button>'),Kd=D('<span class="power-status complete svelte-1rwnzlz">â Powers Selected</span>'),Qd=D('<span class="power-status incomplete svelte-1rwnzlz">Select Powers</span>'),Zd=D('<button><img class="selected-hero-image svelte-1rwnzlz"/> <div class="selected-hero-info svelte-1rwnzlz"><span class="selected-hero-name svelte-1rwnzlz"> </span> <!></div></button>'),Jd=D('<div class="selected-heroes svelte-1rwnzlz" data-testid="selected-heroes-list"></div>'),$d=D('<button><img class="hero-image svelte-1rwnzlz"/> <div class="hero-info svelte-1rwnzlz"><span class="hero-name svelte-1rwnzlz" data-testid="hero-name"> </span> <span class="hero-class svelte-1rwnzlz"> </span></div></button>'),eu=D('<button><img class="hero-image svelte-1rwnzlz"/> <div class="hero-info svelte-1rwnzlz"><span class="hero-name svelte-1rwnzlz" data-testid="hero-name"> </span> <span class="hero-class svelte-1rwnzlz"> </span></div></button>'),tu=D('<div class="character-select svelte-1rwnzlz" data-testid="character-select"><div class="edge-zone edge-top svelte-1rwnzlz" data-testid="edge-top"><div class="hero-row svelte-1rwnzlz" data-testid="hero-grid"></div></div> <div class="middle-section svelte-1rwnzlz"><div class="edge-zone edge-left svelte-1rwnzlz" data-testid="edge-left"><div class="hero-column svelte-1rwnzlz"></div></div> <div class="center-zone svelte-1rwnzlz" data-testid="center-zone"><h1 class="svelte-1rwnzlz">Select Your Heroes</h1> <p class="instructions svelte-1rwnzlz">Choose 1-5 heroes for your adventure</p> <p class="instructions svelte-1rwnzlz">Tap a hero from your edge of the table</p> <div class="selection-info svelte-1rwnzlz"><span data-testid="selected-count"> </span></div> <!> <button class="start-button svelte-1rwnzlz" data-testid="start-game-button">Start Adventure</button></div> <div class="edge-zone edge-right svelte-1rwnzlz" data-testid="edge-right"><div class="hero-column svelte-1rwnzlz"></div></div></div> <div class="edge-zone edge-bottom svelte-1rwnzlz" data-testid="edge-bottom"><div class="hero-row svelte-1rwnzlz"></div></div></div> <!>',1);function nu(e,t){Pe(t,!0);let n=F(me([])),r=F(me([])),a=F(me({})),s=F(me({})),o=F(null);St(()=>{const H=Y.subscribe(()=>{const R=Y.getState();x(n,R.heroes.selectedHeroes,!0),x(r,R.heroes.availableHeroes,!0),x(a,R.heroes.heroEdgeMap,!0),x(s,R.heroes.powerCardSelections,!0)}),M=Y.getState();return x(n,M.heroes.selectedHeroes,!0),x(r,M.heroes.availableHeroes,!0),x(a,M.heroes.heroEdgeMap,!0),x(s,M.heroes.powerCardSelections,!0),H});function c(H,M){return i(a)[H]===M}function l(H,M){const R=i(a)[H];return R!==void 0&&R!==M}function d(H,M){Y.dispatch(wc({heroId:H,edge:M}))}function f(){i(n).length>0&&g()&&(Y.dispatch(Sc()),Y.dispatch(yd({heroIds:i(n).map(H=>H.id)})))}function m(H){const M=i(s)[H];return M?M.utility!==null&&M.atWills.length===2&&M.daily!==null:!1}function g(){return i(n).every(H=>m(H.id))}function _(){return i(n).length>=1&&i(n).length<=5&&g()}function S(H){x(o,H,!0)}function A(){x(o,null)}var w=tu(),C=be(w),O=u(C),E=u(O);Ye(E,21,()=>i(r),H=>H.id,(H,M)=>{var R=Gd();let b;R.__click=()=>d(i(M).id,"top");var I=u(R),W=v(I,2),ee=u(W),ce=u(ee),le=v(ee,2),ue=u(le);U((ge,de,fe)=>{b=je(R,1,"hero-card svelte-1rwnzlz",null,b,ge),B(R,"data-testid",`hero-${i(M).id??""}-top`),R.disabled=de,B(I,"src",fe),B(I,"alt",i(M).name),k(ce,i(M).name),k(ue,i(M).heroClass)},[()=>({selected:c(i(M).id,"top"),unavailable:l(i(M).id,"top")}),()=>l(i(M).id,"top"),()=>Be(i(M).imagePath)]),T(H,R)});var P=v(O,2),q=u(P),N=u(q);Ye(N,21,()=>i(r),H=>H.id,(H,M)=>{var R=Xd();let b;R.__click=()=>d(i(M).id,"left");var I=u(R),W=v(I,2),ee=u(W),ce=u(ee),le=v(ee,2),ue=u(le);U((ge,de,fe)=>{b=je(R,1,"hero-card svelte-1rwnzlz",null,b,ge),B(R,"data-testid",`hero-${i(M).id??""}-left`),R.disabled=de,B(I,"src",fe),B(I,"alt",i(M).name),k(ce,i(M).name),k(ue,i(M).heroClass)},[()=>({selected:c(i(M).id,"left"),unavailable:l(i(M).id,"left")}),()=>l(i(M).id,"left"),()=>Be(i(M).imagePath)]),T(H,R)});var Z=v(q,2),V=v(u(Z),6),K=u(V),ae=u(K),te=v(V,2);{var oe=H=>{var M=Jd();Ye(M,21,()=>i(n),R=>R.id,(R,b)=>{var I=Zd();let W;I.__click=()=>S(i(b));var ee=u(I),ce=v(ee,2),le=u(ce),ue=u(le),ge=v(le,2);{var de=_e=>{var Ie=Kd();T(_e,Ie)},fe=_e=>{var Ie=Qd();T(_e,Ie)};j(ge,_e=>{m(i(b).id)?_e(de):_e(fe,!1)})}U((_e,Ie)=>{W=je(I,1,"selected-hero-item svelte-1rwnzlz",null,W,_e),B(I,"data-testid",`select-powers-${i(b).id??""}`),B(ee,"src",Ie),B(ee,"alt",i(b).name),k(ue,i(b).name)},[()=>({complete:m(i(b).id)}),()=>Be(i(b).imagePath)]),T(R,I)}),T(H,M)};j(te,H=>{i(n).length>0&&H(oe)})}var xe=v(te,2);xe.__click=f;var Se=v(Z,2),Ae=u(Se);Ye(Ae,21,()=>i(r),H=>H.id,(H,M)=>{var R=$d();let b;R.__click=()=>d(i(M).id,"right");var I=u(R),W=v(I,2),ee=u(W),ce=u(ee),le=v(ee,2),ue=u(le);U((ge,de,fe)=>{b=je(R,1,"hero-card svelte-1rwnzlz",null,b,ge),B(R,"data-testid",`hero-${i(M).id??""}-right`),R.disabled=de,B(I,"src",fe),B(I,"alt",i(M).name),k(ce,i(M).name),k(ue,i(M).heroClass)},[()=>({selected:c(i(M).id,"right"),unavailable:l(i(M).id,"right")}),()=>l(i(M).id,"right"),()=>Be(i(M).imagePath)]),T(H,R)});var Fe=v(P,2),se=u(Fe);Ye(se,21,()=>i(r),H=>H.id,(H,M)=>{var R=eu();let b;R.__click=()=>d(i(M).id,"bottom");var I=u(R),W=v(I,2),ee=u(W),ce=u(ee),le=v(ee,2),ue=u(le);U((ge,de,fe)=>{b=je(R,1,"hero-card svelte-1rwnzlz",null,b,ge),B(R,"data-testid",`hero-${i(M).id??""}`),R.disabled=de,B(I,"src",fe),B(I,"alt",i(M).name),k(ce,i(M).name),k(ue,i(M).heroClass)},[()=>({selected:c(i(M).id,"bottom"),unavailable:l(i(M).id,"bottom")}),()=>l(i(M).id,"bottom"),()=>Be(i(M).imagePath)]),T(H,R)});var ne=v(C,2);{var he=H=>{Vd(H,{get hero(){return i(o)},get selection(){return i(s)[i(o).id]},onClose:A})};j(ne,H=>{i(o)&&H(he)})}U(H=>{k(ae,`${i(n).length??""} heroes selected`),xe.disabled=H},[()=>!_()]),T(e,w),He()}et(["click"]);var ru=D('<button class="move-square svelte-ehd1hj" data-testid="move-square"><span class="sr-only svelte-ehd1hj"> </span></button>'),au=D('<div class="movement-overlay svelte-ehd1hj" data-testid="movement-overlay"></div>');function su(e,t){Pe(t,!0);function n(s){const o=t.tileOffsetX+s.x*t.cellSize,c=t.tileOffsetY+s.y*t.cellSize;return`left: ${o}px; top: ${c}px; width: ${t.cellSize}px; height: ${t.cellSize}px;`}function r(s,o){s.stopPropagation(),t.onSquareClick(o)}var a=au();Ye(a,21,()=>t.validMoveSquares,s=>`${s.x},${s.y}`,(s,o)=>{var c=ru();c.__click=f=>r(f,i(o));var l=u(c),d=u(l);U(f=>{B(c,"data-position-x",i(o).x),B(c,"data-position-y",i(o).y),Ot(c,f),k(d,`Move to (${i(o).x??""}, ${i(o).y??""})`)},[()=>n(i(o))]),T(s,c)}),T(e,a),He()}et(["click"]);var iu=D('<div class="tile-deck-counter svelte-9649r" data-testid="tile-deck-counter"><span class="deck-icon svelte-9649r">ð¦</span> <span class="deck-count svelte-9649r" data-testid="tile-deck-count"> </span> <span class="deck-label svelte-9649r">tiles</span></div>');function ou(e,t){var n=iu(),r=v(u(n),2),a=u(r);U(()=>k(a,t.tileCount)),T(e,n)}var lu=D('<div class="unexplored-edge svelte-12eown4" data-testid="unexplored-edge"><span class="question-mark svelte-12eown4">?</span></div>');function cu(e,t){Pe(t,!0);const r=(()=>{const c=t.cellSize*1.5,l=36;switch(t.direction){case"north":return{left:`${t.tileWidth/2-c/2}px`,top:`${l-8/2}px`,width:`${c}px`,height:"8px"};case"south":return{left:`${t.tileWidth/2-c/2}px`,bottom:`${l-8/2}px`,width:`${c}px`,height:"8px"};case"east":return{right:`${l-8/2}px`,top:`${t.tileHeight/2-c/2}px`,width:"8px",height:`${c}px`};case"west":return{left:`${l-8/2}px`,top:`${t.tileHeight/2-c/2}px`,width:"8px",height:`${c}px`}}})(),a=Object.entries(r).map(([o,c])=>`${o}: ${c}`).join("; ");var s=lu();U(()=>{B(s,"data-direction",t.direction),Ot(s,a)}),T(e,s),He()}var du=D('<div class="monster-token svelte-1g5ysl" data-testid="monster-token"><img class="token-image svelte-1g5ysl"/> <span class="token-label svelte-1g5ysl"> </span></div>');function uu(e,t){Pe(t,!0);const n=G(()=>Mn.find(c=>c.id===t.monster.monsterId)),r=G(()=>()=>{const c=t.cellSize/2,l=t.tilePixelOffset.x+t.tileOffsetX+t.monster.position.x*t.cellSize+c,d=t.tilePixelOffset.y+t.tileOffsetY+t.monster.position.y*t.cellSize+c;return`left: ${l}px; top: ${d}px;`});var a=Ce(),s=be(a);{var o=c=>{var l=du(),d=u(l),f=v(d,2),m=u(f);U((g,_)=>{B(l,"data-monster-id",t.monster.instanceId),Ot(l,g),B(d,"src",_),B(d,"alt",i(n).name),k(m,i(n).name)},[()=>i(r)(),()=>Be(i(n).imagePath)]),T(c,l)};j(s,c=>{i(n)&&c(o)})}T(e,a),He()}var fu=D('<div class="monster-card-overlay svelte-at5lsg" role="dialog" aria-modal="true" aria-label="Monster spawned" tabindex="0" data-testid="monster-card-overlay"><div class="monster-card svelte-at5lsg" role="article" data-testid="monster-card"><div class="card-header svelte-at5lsg"><h3 class="monster-name svelte-at5lsg" data-testid="monster-name"> </h3> <button class="dismiss-button svelte-at5lsg" aria-label="Dismiss monster card" data-testid="dismiss-monster-card">â</button></div> <div class="card-image svelte-at5lsg"><img class="monster-image svelte-at5lsg"/></div> <div class="card-stats svelte-at5lsg"><div class="stat svelte-at5lsg"><span class="stat-label svelte-at5lsg">AC</span> <span class="stat-value svelte-at5lsg" data-testid="monster-ac"> </span></div> <div class="stat svelte-at5lsg"><span class="stat-label svelte-at5lsg">HP</span> <span class="stat-value svelte-at5lsg" data-testid="monster-hp"> </span></div> <div class="stat svelte-at5lsg"><span class="stat-label svelte-at5lsg">XP</span> <span class="stat-value svelte-at5lsg" data-testid="monster-xp"> </span></div></div> <p class="card-hint svelte-at5lsg">Click anywhere to dismiss</p></div></div>');function vu(e,t){Pe(t,!0);const n=G(()=>Mn.find(l=>l.id===t.monsterId));function r(){t.onDismiss&&t.onDismiss()}function a(l){(l.key==="Escape"||l.key==="Enter"||l.key===" ")&&(l.preventDefault(),r())}var s=Ce(),o=be(s);{var c=l=>{var d=fu();d.__click=r,d.__keydown=a;var f=u(d);f.__click=te=>te.stopPropagation(),f.__keydown=te=>te.stopPropagation();var m=u(f),g=u(m),_=u(g),S=v(g,2);S.__click=r;var A=v(m,2),w=u(A),C=v(A,2),O=u(C),E=v(u(O),2),P=u(E),q=v(O,2),N=v(u(q),2),Z=u(N),V=v(q,2),K=v(u(V),2),ae=u(K);U(te=>{k(_,i(n).name),B(w,"src",te),B(w,"alt",i(n).name),k(P,i(n).ac),k(Z,i(n).hp),k(ae,i(n).xp)},[()=>Be(i(n).imagePath)]),T(l,d)};j(o,l=>{i(n)&&l(c)})}T(e,s),He()}et(["click","keydown"]);var hu=D('<button class="attack-button svelte-1ea4ae8" data-testid="attack-button"> </button>'),pu=D('<div class="attack-panel svelte-1ea4ae8" data-testid="attack-panel"><div class="attack-header svelte-1ea4ae8"><span class="attack-label svelte-1ea4ae8"> </span> <span class="attack-stats svelte-1ea4ae8"> </span></div> <div class="attack-targets svelte-1ea4ae8"></div></div>');function mu(e,t){Pe(t,!0);function n(c){return Mn.find(d=>d.id===c)?.name||"Unknown"}function r(c){t.onAttack(c)}var a=Ce(),s=be(a);{var o=c=>{var l=pu(),d=u(l),f=u(d),m=u(f),g=v(f,2),_=u(g),S=v(d,2);Ye(S,21,()=>t.adjacentMonsters,A=>A.instanceId,(A,w)=>{var C=hu();C.__click=()=>r(i(w).instanceId);var O=u(C);U((E,P)=>{B(C,"data-target-id",i(w).instanceId),B(C,"aria-label",`Attack ${E??""}`),k(O,`Attack ${P??""}`)},[()=>n(i(w).monsterId),()=>n(i(w).monsterId)]),T(A,C)}),U(()=>{k(m,`Attack with ${t.heroAttack.name??""}`),k(_,`+${t.heroAttack.attackBonus??""} / ${t.heroAttack.damage??""} dmg`)}),T(c,l)};j(s,c=>{t.adjacentMonsters.length>0&&c(o)})}T(e,a),He()}et(["click"]);var gu=D('<span class="result-text critical svelte-1jt2qdd" data-testid="result-text">âï¸ CRITICAL HIT!</span>'),_u=D('<span class="result-text hit svelte-1jt2qdd" data-testid="result-text">â HIT!</span>'),yu=D('<span class="result-text miss svelte-1jt2qdd" data-testid="result-text">â MISS!</span>'),wu=D('<div class="damage-info svelte-1jt2qdd" data-testid="damage-info"><span class="damage-value svelte-1jt2qdd"> </span> <span class="damage-label svelte-1jt2qdd"> </span></div>'),ku=D('<div class="combat-result-overlay svelte-1jt2qdd" role="dialog" aria-modal="true" aria-label="Combat result" tabindex="0" data-testid="combat-result-overlay"><div role="document" data-testid="combat-result"><div class="result-header svelte-1jt2qdd"><h3 class="attacker-info svelte-1jt2qdd" data-testid="attacker-info"> </h3> <button class="dismiss-button svelte-1jt2qdd" aria-label="Dismiss combat result" data-testid="dismiss-combat-result">â</button></div> <div class="dice-roll-section svelte-1jt2qdd"><div class="dice-container svelte-1jt2qdd"><span class="d20-icon svelte-1jt2qdd" aria-label="D20 die">D20</span> <span class="roll-value svelte-1jt2qdd" data-testid="roll-value"> </span></div> <div class="roll-breakdown svelte-1jt2qdd"><div class="breakdown-row svelte-1jt2qdd"><span class="breakdown-label svelte-1jt2qdd">Roll:</span> <span class="breakdown-value svelte-1jt2qdd" data-testid="dice-roll"> </span></div> <div class="breakdown-row svelte-1jt2qdd"><span class="breakdown-label svelte-1jt2qdd">+ Bonus:</span> <span class="breakdown-value svelte-1jt2qdd" data-testid="attack-bonus"> </span></div> <div class="breakdown-divider svelte-1jt2qdd"></div> <div class="breakdown-row total svelte-1jt2qdd"><span class="breakdown-label svelte-1jt2qdd">Total:</span> <span class="breakdown-value svelte-1jt2qdd" data-testid="attack-total"> </span></div> <div class="breakdown-row target svelte-1jt2qdd"><span class="breakdown-label svelte-1jt2qdd">vs AC:</span> <span class="breakdown-value svelte-1jt2qdd" data-testid="target-ac"> </span></div></div></div> <div class="result-section svelte-1jt2qdd"><!> <!></div> <p class="dismiss-hint svelte-1jt2qdd">Click anywhere to dismiss</p></div></div>');function es(e,t){Pe(t,!0);function n(){t.onDismiss&&t.onDismiss()}function r(ne){(ne.key==="Escape"||ne.key==="Enter"||ne.key===" ")&&(ne.preventDefault(),n())}var a=ku();a.__click=n,a.__keydown=r;var s=u(a);let o;s.__click=ne=>ne.stopPropagation(),s.__keydown=ne=>ne.stopPropagation();var c=u(s),l=u(c),d=u(l),f=v(l,2);f.__click=n;var m=v(c,2),g=u(m),_=v(u(g),2),S=u(_),A=v(g,2),w=u(A),C=v(u(w),2),O=u(C),E=v(w,2),P=v(u(E),2),q=u(P),N=v(E,4),Z=v(u(N),2),V=u(Z),K=v(N,2),ae=v(u(K),2),te=u(ae),oe=v(m,2),xe=u(oe);{var Se=ne=>{var he=gu();T(ne,he)},Ae=ne=>{var he=Ce(),H=be(he);{var M=b=>{var I=_u();T(b,I)},R=b=>{var I=yu();T(b,I)};j(H,b=>{t.result.isHit?b(M):b(R,!1)},!0)}T(ne,he)};j(xe,ne=>{t.result.isCritical?ne(Se):ne(Ae,!1)})}var Fe=v(xe,2);{var se=ne=>{var he=wu(),H=u(he),M=u(H),R=v(H,2),b=u(R);U(()=>{k(M,t.result.damage),k(b,`damage to ${t.targetName??""}`)}),T(ne,he)};j(Fe,ne=>{t.result.isHit&&ne(se)})}U(()=>{o=je(s,1,"combat-result svelte-1jt2qdd",null,o,{hit:t.result.isHit,miss:!t.result.isHit,critical:t.result.isCritical}),k(d,`${t.attackerName??""} attacks with ${t.attackName??""}!`),k(S,t.result.roll),k(O,t.result.roll),k(q,t.result.attackBonus),k(V,t.result.total),k(te,t.result.targetAC)}),T(e,a),He()}et(["click","keydown"]);var bu=D('<div class="monster-move-overlay svelte-18np0et" role="dialog" aria-modal="true" aria-label="Monster move result" tabindex="0" data-testid="monster-move-overlay"><div class="monster-move-card svelte-18np0et" role="document" data-testid="monster-move-card"><div class="move-header svelte-18np0et"><h3 class="monster-name svelte-18np0et" data-testid="monster-name"> </h3> <button class="dismiss-button svelte-18np0et" aria-label="Dismiss monster move result" data-testid="dismiss-monster-move">â</button></div> <div class="move-content svelte-18np0et"><span class="move-icon svelte-18np0et">ð</span> <p class="move-text svelte-18np0et" data-testid="move-text">Moved but could not attack</p></div> <p class="dismiss-hint svelte-18np0et">Click anywhere to continue</p></div></div>');function xu(e,t){Pe(t,!0);function n(){t.onDismiss&&t.onDismiss()}function r(f){(f.key==="Escape"||f.key==="Enter"||f.key===" ")&&(f.preventDefault(),n())}var a=bu();a.__click=n,a.__keydown=r;var s=u(a);s.__click=f=>f.stopPropagation(),s.__keydown=f=>f.stopPropagation();var o=u(s),c=u(o),l=u(c),d=v(c,2);d.__click=n,U(()=>k(l,t.monsterName)),T(e,a),He()}et(["click","keydown"]);var Su=D('<div class="xp-counter svelte-1ymh8ps" data-testid="xp-counter"><span class="xp-icon svelte-1ymh8ps" aria-label="Experience Points">â­</span> <span class="xp-label svelte-1ymh8ps">XP:</span> <span class="xp-value svelte-1ymh8ps" data-testid="xp-value"> </span></div>');function Iu(e,t){var n=Su(),r=v(u(n),4),a=u(r);U(()=>k(a,t.xp)),T(e,n)}var Tu=D('<div class="healing-surge-counter svelte-121e3gw" data-testid="healing-surge-counter"><span class="surge-icon svelte-121e3gw" aria-label="Healing Surges">â¤ï¸</span> <span class="surge-label svelte-121e3gw">Surges:</span> <span class="surge-value svelte-121e3gw" data-testid="surge-value"> </span></div>');function Mu(e,t){var n=Tu(),r=v(u(n),4),a=u(r);U(()=>k(a,t.surges)),T(e,n)}var Cu=D('<div class="defeat-overlay svelte-1h38uhv" role="dialog" aria-modal="true" aria-label="Monster defeated notification" tabindex="0" data-testid="defeat-notification-overlay"><div class="defeat-notification svelte-1h38uhv" role="dialog" aria-labelledby="defeat-title" tabindex="-1" data-testid="defeat-notification"><div class="defeat-header svelte-1h38uhv"><span class="defeat-icon svelte-1h38uhv">ð</span> <h3 class="defeat-title svelte-1h38uhv" id="defeat-title" data-testid="defeat-title"> </h3> <button class="dismiss-button svelte-1h38uhv" aria-label="Dismiss notification" data-testid="dismiss-defeat-notification">â</button></div> <div class="xp-gain-section svelte-1h38uhv" data-testid="xp-gain-section"><span class="xp-icon svelte-1h38uhv">â­</span> <span class="xp-amount svelte-1h38uhv" data-testid="xp-amount"> </span></div> <p class="dismiss-hint svelte-1h38uhv">Click anywhere to dismiss</p></div></div>');function Eu(e,t){Pe(t,!0);function n(){t.onDismiss&&t.onDismiss()}function r(_){(_.key==="Escape"||_.key==="Enter"||_.key===" ")&&(_.preventDefault(),n())}var a=Cu();a.__click=n,a.__keydown=r;var s=u(a);s.__click=_=>_.stopPropagation(),s.__keydown=_=>_.stopPropagation();var o=u(s),c=v(u(o),2),l=u(c),d=v(c,2);d.__click=n;var f=v(o,2),m=v(u(f),2),g=u(m);U(()=>{k(l,`${t.monsterName??""} Defeated!`),k(g,`+${t.xpGained??""} XP`)}),T(e,a),He()}et(["click","keydown"]);var Pu=D('<div class="hero-section svelte-da0ogt"><img class="hero-avatar svelte-da0ogt"/> <div class="hero-level-info svelte-da0ogt"><span class="hero-name svelte-da0ogt" data-testid="level-up-hero-name"> </span> <span class="level-badge svelte-da0ogt" data-testid="level-badge"> </span></div></div>'),Hu=D('<div class="level-up-overlay svelte-da0ogt" role="dialog" aria-modal="true" aria-label="Level up notification" tabindex="0" data-testid="level-up-overlay"><div class="level-up-notification svelte-da0ogt" role="dialog" aria-labelledby="level-up-title" tabindex="-1" data-testid="level-up-notification"><div class="level-up-header svelte-da0ogt"><span class="level-up-icon svelte-da0ogt">â¨</span> <h3 class="level-up-title svelte-da0ogt" id="level-up-title" data-testid="level-up-title">LEVEL UP!</h3> <span class="level-up-icon svelte-da0ogt">â¨</span> <button class="dismiss-button svelte-da0ogt" aria-label="Dismiss notification" data-testid="dismiss-level-up">â</button></div> <!> <div class="stats-section svelte-da0ogt" data-testid="stats-section"><div class="stat-change svelte-da0ogt"><span class="stat-label svelte-da0ogt">HP</span> <span class="stat-old svelte-da0ogt" data-testid="old-hp"> </span> <span class="stat-arrow svelte-da0ogt">â</span> <span class="stat-new svelte-da0ogt" data-testid="new-hp"> </span></div> <div class="stat-change svelte-da0ogt"><span class="stat-label svelte-da0ogt">AC</span> <span class="stat-old svelte-da0ogt" data-testid="old-ac"> </span> <span class="stat-arrow svelte-da0ogt">â</span> <span class="stat-new svelte-da0ogt" data-testid="new-ac"> </span></div> <div class="stat-change svelte-da0ogt"><span class="stat-label svelte-da0ogt">Surge</span> <span class="stat-old svelte-da0ogt" data-testid="old-surge"> </span> <span class="stat-arrow svelte-da0ogt">â</span> <span class="stat-new svelte-da0ogt" data-testid="new-surge"> </span></div> <div class="stat-change svelte-da0ogt"><span class="stat-label svelte-da0ogt">Attack</span> <span class="stat-old svelte-da0ogt" data-testid="old-attack"> </span> <span class="stat-arrow svelte-da0ogt">â</span> <span class="stat-new svelte-da0ogt" data-testid="new-attack"> </span></div></div> <div class="xp-spent-section svelte-da0ogt" data-testid="xp-spent-section"><span class="xp-icon svelte-da0ogt">â­</span> <span class="xp-text svelte-da0ogt">5 XP spent</span></div> <div class="critical-bonus-section svelte-da0ogt" data-testid="critical-bonus"><span class="bonus-text svelte-da0ogt">âï¸ Critical attacks now deal +1 damage!</span></div> <button class="continue-button svelte-da0ogt" data-testid="continue-button">Continue</button> <p class="dismiss-hint svelte-da0ogt">Click anywhere to dismiss</p></div></div>');function Au(e,t){Pe(t,!0);const n=Mt.find(se=>se.id===t.heroId);function r(){t.onDismiss&&t.onDismiss()}function a(se){(se.key==="Escape"||se.key==="Enter"||se.key===" ")&&(se.preventDefault(),r())}var s=Hu();s.__click=r,s.__keydown=a;var o=u(s);o.__click=se=>se.stopPropagation(),o.__keydown=se=>{(se.key==="Escape"||se.key==="Enter"||se.key===" ")&&se.stopPropagation()};var c=u(o),l=v(u(c),6);l.__click=r;var d=v(c,2);{var f=se=>{var ne=Pu(),he=u(ne),H=v(he,2),M=u(H),R=u(M),b=v(M,2),I=u(b);U(W=>{B(he,"src",W),B(he,"alt",n.name),k(R,n.name),k(I,`Level ${t.newStats.level??""}`)},[()=>Be(n.imagePath)]),T(se,ne)};j(d,se=>{n&&se(f)})}var m=v(d,2),g=u(m),_=v(u(g),2),S=u(_),A=v(_,4),w=u(A),C=v(g,2),O=v(u(C),2),E=u(O),P=v(O,4),q=u(P),N=v(C,2),Z=v(u(N),2),V=u(Z),K=v(Z,4),ae=u(K),te=v(N,2),oe=v(u(te),2),xe=u(oe),Se=v(oe,4),Ae=u(Se),Fe=v(m,6);Fe.__click=r,U(()=>{k(S,t.oldStats.maxHp),k(w,t.newStats.maxHp),k(E,t.oldStats.ac),k(q,t.newStats.ac),k(V,t.oldStats.surgeValue),k(ae,t.newStats.surgeValue),k(xe,`+${t.oldStats.attackBonus??""}`),k(Ae,`+${t.newStats.attackBonus??""}`)}),T(e,s),He()}et(["click","keydown"]);var Du=D('<div class="healing-surge-overlay svelte-1ugospu" data-testid="healing-surge-notification"><div class="healing-surge-card svelte-1ugospu"><h2 class="healing-title svelte-1ugospu" data-testid="healing-title">Healing Surge!</h2> <div class="hero-section svelte-1ugospu"><img class="hero-avatar svelte-1ugospu"/> <span class="hero-name svelte-1ugospu" data-testid="healed-hero-name"> </span></div> <div class="healing-message svelte-1ugospu"><span class="was-text svelte-1ugospu">was at 0 HP</span></div> <div class="hp-restored-section svelte-1ugospu" data-testid="hp-restored-section"><span class="hp-icon svelte-1ugospu">â¤ï¸</span> <span class="hp-value svelte-1ugospu"> </span> <span class="hp-text svelte-1ugospu">restored</span></div> <button class="continue-button svelte-1ugospu" data-testid="dismiss-healing-surge">Continue</button></div></div>');function Ru(e,t){Pe(t,!0);function n(S){return Mt.find(A=>A.id===S)?.name??"Hero"}function r(S){return Mt.find(A=>A.id===S)?.imagePath??""}var a=Du(),s=u(a),o=v(u(s),2),c=u(o),l=v(c,2),d=u(l),f=v(o,4),m=v(u(f),2),g=u(m),_=v(f,2);_.__click=function(...S){t.onDismiss?.apply(this,S)},U((S,A,w)=>{B(c,"src",S),B(c,"alt",A),k(d,w),k(g,`+${t.hpRestored??""} HP`)},[()=>Be(r(t.heroId)),()=>n(t.heroId),()=>n(t.heroId)]),T(e,a),He()}et(["click"]);var zu=D('<span class="hero-level svelte-8w11tm" data-testid="hero-level">Level 2 â­</span>'),Ou=D('<div class="player-info svelte-8w11tm" data-testid="turn-indicator"><img class="player-avatar svelte-8w11tm"/> <div class="turn-details svelte-8w11tm"><span class="player-name svelte-8w11tm"> </span> <!> <span class="turn-phase svelte-8w11tm" data-testid="turn-phase"> </span> <span class="turn-number svelte-8w11tm"> </span> <span class="hero-hp svelte-8w11tm" data-testid="hero-hp"> </span></div></div>'),Nu=D('<div class="player-info svelte-8w11tm"><img class="player-avatar svelte-8w11tm"/> <div class="turn-details svelte-8w11tm"><span class="player-name svelte-8w11tm"> </span> <span class="turn-phase svelte-8w11tm"> </span> <span class="turn-number svelte-8w11tm"> </span> <span class="hero-hp svelte-8w11tm"> </span></div></div>'),ju=D('<div><img class="tile-image svelte-8w11tm"/> <!></div>'),Bu=D('<div class="movement-overlay-container svelte-8w11tm"><!></div>'),Lu=D('<div data-testid="hero-token"><img class="token-image svelte-8w11tm"/> <span class="token-label svelte-8w11tm"> </span></div>'),Fu=D('<div class="player-info svelte-8w11tm"><img class="player-avatar svelte-8w11tm"/> <div class="turn-details svelte-8w11tm"><span class="player-name svelte-8w11tm"> </span> <span class="turn-phase svelte-8w11tm"> </span> <span class="turn-number svelte-8w11tm"> </span> <span class="hero-hp svelte-8w11tm"> </span></div></div>'),Uu=D('<span class="hero-level svelte-8w11tm" data-testid="hero-level">Level 2 â­</span>'),qu=D('<div class="player-info svelte-8w11tm" data-testid="turn-indicator"><img class="player-avatar svelte-8w11tm"/> <div class="turn-details svelte-8w11tm"><span class="player-name svelte-8w11tm"> </span> <!> <span class="turn-phase svelte-8w11tm" data-testid="turn-phase"> </span> <span class="turn-number svelte-8w11tm"> </span> <span class="hero-hp svelte-8w11tm" data-testid="hero-hp"> </span></div></div>'),Wu=D('<div class="game-board svelte-8w11tm" data-testid="game-board"><div data-testid="player-zone-top"><!></div> <div class="middle-section svelte-8w11tm"><div data-testid="player-zone-left"><!></div> <div class="board-container svelte-8w11tm"><div class="dungeon-map svelte-8w11tm" data-testid="dungeon-map" role="button" tabindex="0"><!> <!> <!> <!></div> <div class="board-controls svelte-8w11tm"><div class="objective-display svelte-8w11tm" data-testid="objective-display"><span class="objective-label svelte-8w11tm">ð¯ Objective:</span> <span class="objective-text svelte-8w11tm"> </span> <span class="objective-progress svelte-8w11tm" data-testid="objective-progress"> </span></div> <!> <!> <!> <button class="end-phase-button svelte-8w11tm" data-testid="end-phase-button"> </button> <button class="reset-button svelte-8w11tm" data-testid="reset-button">â© Return to Character Select</button> <!></div></div> <div data-testid="player-zone-right"><!></div></div> <div data-testid="player-zone-bottom"><!></div> <!> <!> <!> <!> <!>  <!> <!></div>');function Yu(e,t){Pe(t,!0);const n=140,r=4,a=8,s=4,o=n*r,c=n*a,l=n*s,d=140,f=.15,m=1,g=36,_=36,S=632,A=632,w=1195,C=3,O=0;let E=F(me([])),P=F(me([])),q=F(me({})),N=F(me({currentHeroIndex:0,currentPhase:"hero-phase",turnNumber:1})),Z=F(me([])),V=F(!1),K=F(me({tiles:[],unexploredEdges:[],tileDeck:[]})),ae=F(me([])),te=F(null),oe=F(null),xe=F(null),Se=F(me([])),Ae=F(null),Fe=F(null),se=F(null),ne=F(0),he=F(null),H=F(me({actionsTaken:[],canMove:!0,canAttack:!0})),M=F(me({monstersDefeated:0,monstersToDefeat:2,objective:"Defeat 2 monsters"})),R=F(me({xp:0,healingSurges:2})),b=F(null),I=F(null),W=F(null),ee=F(null),ce=F(null),le=F(null),ue=F(null),ge=F(1),de=G(()=>fe(i(K)));St(()=>{const p=Y.subscribe(()=>{const y=Y.getState();x(E,y.game.heroTokens,!0),x(P,y.heroes.selectedHeroes,!0),x(q,y.heroes.heroEdgeMap,!0),x(N,y.game.turnState,!0),x(Z,y.game.validMoveSquares,!0),x(V,y.game.showingMovement,!0),x(K,y.game.dungeon,!0),x(ae,y.game.monsters,!0),x(te,y.game.recentlySpawnedMonsterId,!0),x(oe,y.game.attackResult,!0),x(xe,y.game.attackTargetId,!0),x(Se,y.game.heroHp,!0),x(Ae,y.game.monsterAttackResult,!0),x(Fe,y.game.monsterAttackTargetId,!0),x(se,y.game.monsterAttackerId,!0),x(ne,y.game.villainPhaseMonsterIndex,!0),x(he,y.game.monsterMoveActionId,!0),x(H,y.game.heroTurnActions,!0),x(M,y.game.scenario,!0),x(R,y.game.partyResources,!0),x(b,y.game.defeatedMonsterXp,!0),x(I,y.game.defeatedMonsterName,!0),x(W,y.game.leveledUpHeroId,!0),x(ee,y.game.levelUpOldStats,!0),x(ce,y.game.healingSurgeUsedHeroId,!0),x(le,y.game.healingSurgeHpRestored,!0)}),h=Y.getState();return x(E,h.game.heroTokens,!0),x(P,h.heroes.selectedHeroes,!0),x(q,h.heroes.heroEdgeMap,!0),x(N,h.game.turnState,!0),x(Z,h.game.validMoveSquares,!0),x(V,h.game.showingMovement,!0),x(K,h.game.dungeon,!0),x(ae,h.game.monsters,!0),x(te,h.game.recentlySpawnedMonsterId,!0),x(oe,h.game.attackResult,!0),x(xe,h.game.attackTargetId,!0),x(Se,h.game.heroHp,!0),x(Ae,h.game.monsterAttackResult,!0),x(Fe,h.game.monsterAttackTargetId,!0),x(se,h.game.monsterAttackerId,!0),x(ne,h.game.villainPhaseMonsterIndex,!0),x(he,h.game.monsterMoveActionId,!0),x(H,h.game.heroTurnActions,!0),x(M,h.game.scenario,!0),x(R,h.game.partyResources,!0),x(b,h.game.defeatedMonsterXp,!0),x(I,h.game.defeatedMonsterName,!0),x(W,h.game.leveledUpHeroId,!0),x(ee,h.game.levelUpOldStats,!0),x(ce,h.game.healingSurgeUsedHeroId,!0),x(le,h.game.healingSurgeHpRestored,!0),p}),St(()=>{i(N).currentPhase==="hero-phase"&&md(i(H))&&Y.dispatch(Ja())}),St(()=>{if(i(N).currentPhase!=="hero-phase"||!i(H).canMove||i(V))return;const p=pe();if(!p)return;const h=Te(p);h&&Y.dispatch(Za({heroId:p,speed:h.speed}))}),St(()=>{if(i(N).currentPhase!=="villain-phase"||i(Ae)!==null||i(he)!==null)return;const p=yt();if(i(ne)>=p.length){Y.dispatch($a());return}Y.dispatch(Md({}))});function fe(p){if(p.tiles.length===0)return{minCol:0,maxCol:0,minRow:0,maxRow:0,width:S,height:w};let h=1/0,y=-1/0,z=1/0,L=-1/0;for(const ke of p.tiles)h=Math.min(h,ke.position.col),y=Math.max(y,ke.position.col),z=Math.min(z,ke.position.row),L=Math.max(L,ke.position.row);const X=y-h+1,Q=S+(X-1)*o,re=Math.max(0,-z),J=Math.max(0,L),we=w+re*l+J*l;return{minCol:h,maxCol:y,minRow:z,maxRow:L,width:Math.max(Q,S),height:Math.max(we,w)}}function _e(p,h){const y=(p.position.col-h.minCol)*o;let z=0;return p.position.row<0?z=(p.position.row-h.minRow)*l:p.position.row===0?z=Math.max(0,-h.minRow)*l-C:z=Math.max(0,-h.minRow)*l+c+(p.position.row-1)*l-C-O,{x:y,y:z}}function Ie(p){return p.tileType==="start"?"assets/StartTile.png":ri.find(y=>y.tileType===p.tileType)?.imagePath||"assets/Tile_Black_x2_01.png"}function vt(p){return p.tileType==="start"?{width:S,height:w}:{width:S,height:A}}St(()=>{if(i(ue)){const p=()=>{const y=i(ue);if(!y)return;const z=y.clientWidth-d,L=y.clientHeight-d,X=i(de),Q=z/X.width,re=L/X.height,J=Math.min(Q,re,m);x(ge,Math.max(J,f),!0)};p();const h=new ResizeObserver(p);return h.observe(i(ue)),()=>h.disconnect()}});function Te(p){return i(P).find(h=>h.id===p)}function pe(){return i(E)[i(N).currentHeroIndex]?.heroId}function ye(p){switch(p){case"hero-phase":return"Hero Phase";case"exploration-phase":return"Exploration Phase";case"villain-phase":return"Villain Phase"}}function Ue(p){return i(Se).find(y=>y.heroId===p)?.currentHp??0}function tt(p){return i(Se).find(y=>y.heroId===p)?.maxHp??0}function Rt(p){return i(Se).find(y=>y.heroId===p)?.level??1}function yt(){const p=pe();return p?i(ae).filter(h=>h.controllerId===p):[]}function zt(){Y.dispatch(na())}function it(p,h){const y=n/2,z=h.x+g+p.x*n+y,L=h.y+_+p.y*n+y;return`left: ${z}px; top: ${L}px;`}function qe(){const p=pe();if(p&&i(q)[p])return i(q)[p];const h=i(N).currentHeroIndex%4;return["bottom","right","top","left"][h]}function dn(p){const h=i(q)[p];if(!h)return 0;switch(h){case"bottom":return 0;case"top":return 180;case"left":return 90;case"right":return-90;default:return 0}}function ra(p){if(i(N).currentPhase!=="hero-phase")return;const h=pe();if(!h)return;const y=Te(h);y&&(i(V)?Y.dispatch(wd()):Y.dispatch(Za({heroId:h,speed:y.speed})))}function ui(p){const h=pe();h&&Y.dispatch(kd({heroId:h,position:p}))}function fi(p){(p.key==="Enter"||p.key===" ")&&(p.preventDefault(),ra())}function vi(){switch(i(N).currentPhase){case"hero-phase":Y.dispatch(Ja());break;case"exploration-phase":Y.dispatch(bd());break;case"villain-phase":Y.dispatch($a());break}}function hi(){switch(i(N).currentPhase){case"hero-phase":return"End Hero Phase";case"exploration-phase":return"End Exploration";case"villain-phase":return"End Villain Phase"}}function pi(){Y.dispatch(xd())}function mi(p){const h=i(K).tiles.find(y=>y.id===p);return h?_e(h,i(de)):{x:0,y:0}}const rr="start-tile";function gi(){const p=pe();if(!p)return rr;const h=i(E).find(z=>z.heroId===p);return h?kn(h.position,i(K))?.id??rr:rr}function _i(){const p=pe();if(!p)return[];const h=i(E).find(z=>z.heroId===p);if(!h)return[];const y=gi();return od(h.position,i(ae),y,i(K))}function ar(p){return Mt.find(h=>h.id===p)}function yi(p){const h=pe();if(!h)return;const y=ar(h);if(!y)return;const z=i(ae).find(Q=>Q.instanceId===p);if(!z)return;const L=sd(z.monsterId);if(L===void 0)return;const X=td(y.attack,L);Y.dispatch(Sd({result:X,targetInstanceId:p}))}function wi(){Y.dispatch(Id())}function sr(p){return Mn.find(y=>y.id===p)?.name||"Monster"}function ki(){if(i(xe))return i(ae).find(p=>p.instanceId===i(xe))}function bi(){Y.dispatch(Cd())}function xi(){Y.dispatch(Ed())}function Si(){return i(Fe)&&Mt.find(h=>h.id===i(Fe))?.name||"Hero"}function Ii(){if(!i(se))return"Monster";const p=i(ae).find(h=>h.instanceId===i(se));return p?sr(p.monsterId):"Monster"}function Ti(){if(!i(he))return"Monster";const p=i(ae).find(h=>h.instanceId===i(he));return p?sr(p.monsterId):"Monster"}function Mi(){Y.dispatch(Td())}function Ci(){Y.dispatch(Hd())}function Ei(){Y.dispatch(Pd())}function Pi(){if(i(W))return i(Se).find(p=>p.heroId===i(W))}var aa=Wu(),ir=u(aa);let sa;var Hi=u(ir);{var Ai=p=>{const h=G(pe),y=G(()=>i(h)?Te(i(h)):void 0);var z=Ce(),L=be(z);{var X=Q=>{var re=Ou(),J=u(re),we=v(J,2),ke=u(we),Ke=u(ke),We=v(ke,2);{var ot=Oe=>{var ct=zu();T(Oe,ct)};j(We,Oe=>{Rt(i(h))===2&&Oe(ot)})}var Qe=v(We,2),wt=u(Qe),lt=v(Qe,2),kt=u(lt),Ft=v(lt,2),Ut=u(Ft);U((Oe,ct,ur,fr)=>{B(J,"src",Oe),B(J,"alt",i(y).name),k(Ke,`${i(y).name??""}'s Turn`),k(wt,ct),k(kt,`Turn ${i(N).turnNumber??""}`),k(Ut,`HP: ${ur??""}/${fr??""}`)},[()=>Be(i(y).imagePath),()=>ye(i(N).currentPhase),()=>Ue(i(h)),()=>tt(i(h))]),T(Q,re)};j(L,Q=>{i(y)&&i(h)&&Q(X)})}T(p,z)};j(Hi,p=>{qe()==="top"&&p(Ai)})}var ia=v(ir,2),or=u(ia);let oa;var Di=u(or);{var Ri=p=>{const h=G(pe),y=G(()=>i(h)?Te(i(h)):void 0);var z=Ce(),L=be(z);{var X=Q=>{var re=Nu(),J=u(re),we=v(J,2),ke=u(we),Ke=u(ke),We=v(ke,2),ot=u(We),Qe=v(We,2),wt=u(Qe),lt=v(Qe,2),kt=u(lt);U((Ft,Ut,Oe,ct)=>{B(J,"src",Ft),B(J,"alt",i(y).name),k(Ke,`${i(y).name??""}'s Turn`),k(ot,Ut),k(wt,`Turn ${i(N).turnNumber??""}`),k(kt,`HP: ${Oe??""}/${ct??""}`)},[()=>Be(i(y).imagePath),()=>ye(i(N).currentPhase),()=>Ue(i(h)),()=>tt(i(h))]),T(Q,re)};j(L,Q=>{i(y)&&i(h)&&Q(X)})}T(p,z)};j(Di,p=>{qe()==="left"&&p(Ri)})}var lr=v(or,2),Xt=u(lr);Xt.__click=ra,Xt.__keydown=fi;var la=u(Xt);Ye(la,17,()=>i(K).tiles,p=>p.id,(p,h)=>{const y=G(()=>_e(i(h),i(de))),z=G(()=>vt(i(h)));var L=ju();let X;var Q=u(L),re=v(Q,2);Ye(re,17,()=>i(K).unexploredEdges.filter(J=>J.tileId===i(h).id),J=>J.direction,(J,we)=>{cu(J,{get direction(){return i(we).direction},cellSize:n,get tileWidth(){return i(z).width},get tileHeight(){return i(z).height}})}),U(J=>{X=je(L,1,"placed-tile svelte-8w11tm",null,X,{"start-tile":i(h).tileType==="start"}),B(L,"data-testid",i(h).tileType==="start"?"start-tile":"dungeon-tile"),B(L,"data-tile-id",i(h).id),Ot(L,`left: ${i(y).x??""}px; top: ${i(y).y??""}px; width: ${i(z).width??""}px; height: ${i(z).height??""}px;`),B(Q,"src",J),B(Q,"alt",i(h).tileType),Ot(Q,i(h).rotation!==0?`transform: rotate(${i(h).rotation}deg);`:"")},[()=>Be(Ie(i(h)))]),T(p,L)});var ca=v(la,2);{var zi=p=>{const h=G(()=>i(K).tiles.find(X=>X.tileType==="start"));var y=Ce(),z=be(y);{var L=X=>{const Q=G(()=>_e(i(h),i(de))),re=G(()=>vt(i(h)));var J=Bu(),we=u(J);su(we,{get validMoveSquares(){return i(Z)},tileOffsetX:g,tileOffsetY:_,cellSize:n,onSquareClick:ui}),U(()=>Ot(J,`left: ${i(Q).x??""}px; top: ${i(Q).y??""}px; width: ${i(re).width??""}px; height: ${i(re).height??""}px;`)),T(X,J)};j(z,X=>{i(h)&&X(L)})}T(p,y)};j(ca,p=>{i(V)&&i(Z).length>0&&p(zi)})}var da=v(ca,2);Ye(da,17,()=>i(E),p=>p.heroId,(p,h)=>{const y=G(()=>Te(i(h).heroId)),z=G(()=>i(h).heroId===pe()),L=G(()=>i(K).tiles.find(we=>we.tileType==="start")),X=G(()=>dn(i(h).heroId));var Q=Ce(),re=be(Q);{var J=we=>{const ke=G(()=>_e(i(L),i(de)));var Ke=Lu();let We;var ot=u(Ke),Qe=v(ot,2),wt=u(Qe);U((lt,kt)=>{We=je(Ke,1,"hero-token svelte-8w11tm",null,We,{active:i(z)}),B(Ke,"data-hero-id",i(h).heroId),Ot(Ke,`${lt??""} --token-rotation: ${i(X)??""}deg;`),B(ot,"src",kt),B(ot,"alt",i(y).name),k(wt,i(y).name)},[()=>it(i(h).position,i(ke)),()=>Be(i(y).imagePath)]),T(we,Ke)};j(re,we=>{i(y)&&i(L)&&we(J)})}T(p,Q)});var Oi=v(da,2);Ye(Oi,17,()=>i(ae),p=>p.instanceId,(p,h)=>{{let y=G(()=>mi(i(h).tileId));uu(p,{get monster(){return i(h)},cellSize:n,tileOffsetX:g,tileOffsetY:_,get tilePixelOffset(){return i(y)}})}});var Ni=v(Xt,2),ua=u(Ni),fa=v(u(ua),2),ji=u(fa),Bi=v(fa,2),Li=u(Bi),va=v(ua,2);Iu(va,{get xp(){return i(R).xp}});var ha=v(va,2);Mu(ha,{get surges(){return i(R).healingSurges}});var pa=v(ha,2);ou(pa,{get tileCount(){return i(K).tileDeck.length}});var cr=v(pa,2);cr.__click=vi;var Fi=u(cr),ma=v(cr,2);ma.__click=zt;var Ui=v(ma,2);{var qi=p=>{const h=G(pe),y=G(()=>i(h)?ar(i(h)):void 0),z=G(_i);var L=Ce(),X=be(L);{var Q=re=>{mu(re,{get adjacentMonsters(){return i(z)},get heroAttack(){return i(y).attack},onAttack:yi})};j(X,re=>{i(y)&&i(z).length>0&&re(Q)})}T(p,L)};j(Ui,p=>{i(N).currentPhase==="hero-phase"&&i(H).canAttack&&p(qi)})}yl(lr,p=>x(ue,p),()=>i(ue));var ga=v(lr,2);let _a;var Wi=u(ga);{var Yi=p=>{const h=G(pe),y=G(()=>i(h)?Te(i(h)):void 0);var z=Ce(),L=be(z);{var X=Q=>{var re=Fu(),J=u(re),we=v(J,2),ke=u(we),Ke=u(ke),We=v(ke,2),ot=u(We),Qe=v(We,2),wt=u(Qe),lt=v(Qe,2),kt=u(lt);U((Ft,Ut,Oe,ct)=>{B(J,"src",Ft),B(J,"alt",i(y).name),k(Ke,`${i(y).name??""}'s Turn`),k(ot,Ut),k(wt,`Turn ${i(N).turnNumber??""}`),k(kt,`HP: ${Oe??""}/${ct??""}`)},[()=>Be(i(y).imagePath),()=>ye(i(N).currentPhase),()=>Ue(i(h)),()=>tt(i(h))]),T(Q,re)};j(L,Q=>{i(y)&&i(h)&&Q(X)})}T(p,z)};j(Wi,p=>{qe()==="right"&&p(Yi)})}var dr=v(ia,2);let ya;var Vi=u(dr);{var Gi=p=>{const h=G(pe),y=G(()=>i(h)?Te(i(h)):void 0);var z=Ce(),L=be(z);{var X=Q=>{var re=qu(),J=u(re),we=v(J,2),ke=u(we),Ke=u(ke),We=v(ke,2);{var ot=Oe=>{var ct=Uu();T(Oe,ct)};j(We,Oe=>{Rt(i(h))===2&&Oe(ot)})}var Qe=v(We,2),wt=u(Qe),lt=v(Qe,2),kt=u(lt),Ft=v(lt,2),Ut=u(Ft);U((Oe,ct,ur,fr)=>{B(J,"src",Oe),B(J,"alt",i(y).name),k(Ke,`${i(y).name??""}'s Turn`),k(wt,ct),k(kt,`Turn ${i(N).turnNumber??""}`),k(Ut,`HP: ${ur??""}/${fr??""}`)},[()=>Be(i(y).imagePath),()=>ye(i(N).currentPhase),()=>Ue(i(h)),()=>tt(i(h))]),T(Q,re)};j(L,Q=>{i(y)&&i(h)&&Q(X)})}T(p,z)};j(Vi,p=>{qe()==="bottom"&&p(Gi)})}var wa=v(dr,2);{var Xi=p=>{const h=G(()=>i(ae).find(X=>X.instanceId===i(te)));var y=Ce(),z=be(y);{var L=X=>{vu(X,{get monsterId(){return i(h).monsterId},onDismiss:pi})};j(z,X=>{i(h)&&X(L)})}T(p,y)};j(wa,p=>{i(te)&&p(Xi)})}var ka=v(wa,2);{var Ki=p=>{const h=G(pe),y=G(()=>i(h)?ar(i(h)):void 0),z=G(ki);var L=Ce(),X=be(L);{var Q=re=>{{let J=G(()=>i(z)?sr(i(z).monsterId):"Monster");es(re,{get result(){return i(oe)},get attackerName(){return i(y).name},get attackName(){return i(y).attack.name},get targetName(){return i(J)},onDismiss:wi})}};j(X,re=>{i(y)&&re(Q)})}T(p,L)};j(ka,p=>{i(oe)&&p(Ki)})}var ba=v(ka,2);{var Qi=p=>{{let h=G(Ii),y=G(Si);es(p,{get result(){return i(Ae)},get attackerName(){return i(h)},attackName:"Attack",get targetName(){return i(y)},onDismiss:bi})}};j(ba,p=>{i(Ae)&&p(Qi)})}var xa=v(ba,2);{var Zi=p=>{{let h=G(Ti);xu(p,{get monsterName(){return i(h)},onDismiss:xi})}};j(xa,p=>{i(he)&&p(Zi)})}var Sa=v(xa,2);{var Ji=p=>{Eu(p,{get monsterName(){return i(I)},get xpGained(){return i(b)},onDismiss:Mi})};j(Sa,p=>{i(b)!==null&&i(I)!==null&&p(Ji)})}var Ia=v(Sa,2);{var $i=p=>{const h=G(Pi);var y=Ce(),z=be(y);{var L=X=>{Au(X,{get heroId(){return i(W)},get oldStats(){return i(ee)},get newStats(){return i(h)},onDismiss:Ci})};j(z,X=>{i(h)&&X(L)})}T(p,y)};j(Ia,p=>{i(W)&&i(ee)&&!i(oe)&&!i(b)&&p($i)})}var eo=v(Ia,2);{var to=p=>{Ru(p,{get heroId(){return i(ce)},get hpRestored(){return i(le)},onDismiss:Ei})};j(eo,p=>{i(ce)&&i(le)!==null&&p(to)})}U((p,h,y,z,L)=>{sa=je(ir,1,"edge-zone edge-top svelte-8w11tm",null,sa,p),oa=je(or,1,"edge-zone edge-left svelte-8w11tm",null,oa,h),Ot(Xt,`transform: scale(${i(ge)??""}); width: ${i(de).width??""}px; height: ${i(de).height??""}px;`),B(Xt,"aria-label",i(V)?"Click to hide movement options":"Click to show movement options for current hero"),k(ji,i(M).objective),k(Li,`${i(M).monstersDefeated??""} / ${i(M).monstersToDefeat??""} defeated`),k(Fi,y),_a=je(ga,1,"edge-zone edge-right svelte-8w11tm",null,_a,z),ya=je(dr,1,"edge-zone edge-bottom svelte-8w11tm",null,ya,L)},[()=>({"active-edge":qe()==="top"}),()=>({"active-edge":qe()==="left"}),hi,()=>({"active-edge":qe()==="right"}),()=>({"active-edge":qe()==="bottom"})]),T(e,aa),He()}et(["click","keydown"]);var Vu=D('<div class="victory-screen svelte-12ok9q2" data-testid="victory-screen"><div class="victory-content svelte-12ok9q2"><div class="victory-icon svelte-12ok9q2">ð</div> <h1 class="victory-title svelte-12ok9q2">Victory!</h1> <p class="victory-message svelte-12ok9q2"> </p> <div class="victory-objective svelte-12ok9q2"><span class="objective-label svelte-12ok9q2">Objective Complete:</span> <span class="objective-text svelte-12ok9q2"> </span></div> <button class="return-button svelte-12ok9q2" data-testid="return-to-menu-button">Return to Character Select</button></div></div>');function Gu(e,t){Pe(t,!0);let n=F(me({monstersDefeated:0,monstersToDefeat:2,objective:"Defeat 2 monsters"}));St(()=>{const g=Y.subscribe(()=>{const S=Y.getState();x(n,S.game.scenario,!0)}),_=Y.getState();return x(n,_.game.scenario,!0),g});function r(){Y.dispatch(na())}var a=Vu(),s=u(a),o=v(u(s),4),c=u(o),l=v(o,2),d=v(u(l),2),f=u(d),m=v(l,2);m.__click=r,U(()=>{k(c,`You have defeated ${i(n).monstersDefeated??""} monsters and completed the objective!`),k(f,i(n).objective)}),T(e,a),He()}et(["click"]);var Xu=D('<div class="defeat-screen svelte-1jz2vy1" data-testid="defeat-screen"><div class="defeat-content svelte-1jz2vy1"><div class="defeat-icon svelte-1jz2vy1">ð</div> <h1 class="defeat-title svelte-1jz2vy1">Defeat</h1> <p class="defeat-message svelte-1jz2vy1" data-testid="defeat-message"><!></p> <div class="defeat-progress svelte-1jz2vy1"><span class="progress-label svelte-1jz2vy1">Progress:</span> <span class="progress-text svelte-1jz2vy1" data-testid="defeat-progress"> </span></div> <div class="defeat-objective svelte-1jz2vy1"><span class="objective-label svelte-1jz2vy1">Objective:</span> <span class="objective-text svelte-1jz2vy1"> </span></div> <button class="new-game-button svelte-1jz2vy1" data-testid="new-game-button">New Game</button></div></div>');function Ku(e,t){Pe(t,!0);let n=F(me({monstersDefeated:0,monstersToDefeat:2,objective:"Defeat 2 monsters"})),r=F(null);St(()=>{const O=Y.subscribe(()=>{const P=Y.getState();x(n,P.game.scenario,!0),x(r,P.game.defeatReason,!0)}),E=Y.getState();return x(n,E.game.scenario,!0),x(r,E.game.defeatReason,!0),O});function a(){Y.dispatch(na())}var s=Xu(),o=u(s),c=v(u(o),4),l=u(c);{var d=O=>{var E=Da();U(()=>k(E,i(r))),T(O,E)},f=O=>{var E=Da("Your party has been eliminated before completing the objective.");T(O,E)};j(l,O=>{i(r)?O(d):O(f,!1)})}var m=v(c,2),g=v(u(m),2),_=u(g),S=v(m,2),A=v(u(S),2),w=u(A),C=v(S,2);C.__click=a,U(()=>{k(_,`${i(n).monstersDefeated??""} / ${i(n).monstersToDefeat??""} monsters defeated`),k(w,i(n).objective)}),T(e,s),He()}et(["click"]);var Qu=D('<main class="svelte-1n46o8q"><!></main>');function Zu(e,t){Pe(t,!0);let n=F("character-select");St(()=>{const c=Y.subscribe(()=>{const d=Y.getState();x(n,d.game.currentScreen,!0)}),l=Y.getState();return x(n,l.game.currentScreen,!0),c});var r=Qu(),a=u(r);{var s=c=>{nu(c,{})},o=c=>{var l=Ce(),d=be(l);{var f=g=>{Yu(g,{})},m=g=>{var _=Ce(),S=be(_);{var A=C=>{Gu(C,{})},w=C=>{var O=Ce(),E=be(O);{var P=q=>{Ku(q,{})};j(E,q=>{i(n)==="defeat"&&q(P)},!0)}T(C,O)};j(S,C=>{i(n)==="victory"?C(A):C(w,!1)},!0)}T(g,_)};j(d,g=>{i(n)==="game-board"?g(f):g(m,!1)},!0)}T(c,l)};j(a,c=>{i(n)==="character-select"?c(s):c(o,!1)})}T(e,r),He()}cl(Zu,{target:document.getElementById("app")});
