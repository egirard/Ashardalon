(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const za="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(za);const Os=1,Ns=2,js=4,Oa=8,Na=16,ja=2,ve=Symbol(),Fa="http://www.w3.org/1999/xhtml",er=!1;var Fs=Array.isArray,La=Array.prototype.indexOf,gr=Array.from,qa=Object.defineProperty,Vt=Object.getOwnPropertyDescriptor,Ba=Object.getOwnPropertyDescriptors,Ua=Object.prototype,Xa=Array.prototype,Ls=Object.getPrototypeOf,ls=Object.isExtensible;function Ga(e){for(var t=0;t<e.length;t++)e[t]()}function qs(){var e,t,n=new Promise((r,s)=>{e=r,t=s});return{promise:n,resolve:e,reject:t}}const de=2,yr=4,wr=8,Ya=1<<24,at=16,ot=32,Pt=64,zn=128,Ue=512,_e=1024,Ie=2048,lt=4096,He=8192,vt=16384,xr=32768,Nt=65536,cs=1<<17,Bs=1<<18,Ut=1<<19,Wa=1<<20,Et=32768,tr=1<<21,br=1<<22,ht=1<<23,xn=Symbol("$state"),Va=Symbol(""),Rt=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Ka(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function $a(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Qa(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Za(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Ja(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function eo(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function to(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function no(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function ro(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}function so(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Us(e){return e===this.v}function io(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Xs(e){return!io(e,this.v)}let ao=!1,je=null;function jt(e){je=e}function Ee(e,t=!1,n){je={p:je,i:!1,c:null,e:null,s:e,x:null,l:null}}function Me(e){var t=je,n=t.e;if(n!==null){t.e=null;for(var r of n)si(r)}return t.i=!0,je=t.p,{}}function Gs(){return!0}let zt=[];function oo(){var e=zt;zt=[],Ga(e)}function sn(e){if(zt.length===0){var t=zt;queueMicrotask(()=>{t===zt&&oo()})}zt.push(e)}function Ys(e){var t=Z;if(t===null)return G.f|=ht,e;if((t.f&xr)===0){if((t.f&zn)===0)throw e;t.b.error(e)}else Ft(e,t)}function Ft(e,t){for(;t!==null;){if((t.f&zn)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e}const _n=new Set;let te=null,Ne=null,Xe=[],kr=null,nr=!1;class Ge{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#r=0;#n=0;#l=null;#i=[];#s=[];skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(t){Xe=[],this.apply();var n={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const r of t)this.#a(r,n);this.is_fork||this.#u(),this.is_deferred()?(this.#o(n.effects),this.#o(n.render_effects),this.#o(n.block_effects)):(te=null,us(n.render_effects),us(n.effects),this.#l?.resolve()),Ne=null}#a(t,n){t.f^=_e;for(var r=t.first;r!==null;){var s=r.f,i=(s&(ot|Pt))!==0,a=i&&(s&_e)!==0,l=a||(s&He)!==0||this.skipped_effects.has(r);if((r.f&zn)!==0&&r.b?.is_pending()&&(n={parent:n,effect:r,effects:[],render_effects:[],block_effects:[]}),!l&&r.fn!==null){i?r.f^=_e:(s&yr)!==0?n.effects.push(r):on(r)&&((r.f&at)!==0&&n.block_effects.push(r),Zt(r));var o=r.first;if(o!==null){r=o;continue}}var u=r.parent;for(r=r.next;r===null&&u!==null;)u===n.effect&&(this.#o(n.effects),this.#o(n.render_effects),this.#o(n.block_effects),n=n.parent),r=u.next,u=u.parent}}#o(t){for(const n of t)((n.f&Ie)!==0?this.#i:this.#s).push(n),this.#c(n.deps),me(n,_e)}#c(t){if(t!==null)for(const n of t)(n.f&de)===0||(n.f&Et)===0||(n.f^=Et,this.#c(n.deps))}capture(t,n){this.previous.has(t)||this.previous.set(t,n),(t.f&ht)===0&&(this.current.set(t,t.v),Ne?.set(t,t.v))}activate(){te=this,this.apply()}deactivate(){te===this&&(te=null,Ne=null)}flush(){if(this.activate(),Xe.length>0){if(lo(),te!==null&&te!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#t)t(this);this.#t.clear()}#u(){if(this.#n===0){for(const t of this.#e)t();this.#e.clear()}this.#r===0&&this.#d()}#d(){if(_n.size>1){this.previous.clear();var t=Ne,n=!0,r={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const i of _n){if(i===this){n=!1;continue}const a=[];for(const[o,u]of this.current){if(i.current.has(o))if(n&&u!==i.current.get(o))i.current.set(o,u);else continue;a.push(o)}if(a.length===0)continue;const l=[...i.current.keys()].filter(o=>!this.current.has(o));if(l.length>0){var s=Xe;Xe=[];const o=new Set,u=new Map;for(const d of a)Ws(d,l,o,u);if(Xe.length>0){te=i,i.apply();for(const d of Xe)i.#a(d,r);i.deactivate()}Xe=s}}te=null,Ne=t}this.committed=!0,_n.delete(this)}increment(t){this.#r+=1,t&&(this.#n+=1)}decrement(t){this.#r-=1,t&&(this.#n-=1),this.revive()}revive(){for(const t of this.#i)me(t,Ie),Mt(t);for(const t of this.#s)me(t,lt),Mt(t);this.#i=[],this.#s=[],this.flush()}oncommit(t){this.#e.add(t)}ondiscard(t){this.#t.add(t)}settled(){return(this.#l??=qs()).promise}static ensure(){if(te===null){const t=te=new Ge;_n.add(te),Ge.enqueue(()=>{te===t&&t.flush()})}return te}static enqueue(t){sn(t)}apply(){}}function lo(){var e=_t;nr=!0;var t=null;try{var n=0;for(En(!0);Xe.length>0;){var r=Ge.ensure();if(n++>1e3){var s,i;co()}r.process(Xe),pt.clear()}}finally{nr=!1,En(e),kr=null}}function co(){try{Ja()}catch(e){Ft(e,kr)}}let et=null;function us(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if((r.f&(vt|He))===0&&on(r)&&(et=new Set,Zt(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?li(r):r.fn=null),et?.size>0)){pt.clear();for(const s of et){if((s.f&(vt|He))!==0)continue;const i=[s];let a=s.parent;for(;a!==null;)et.has(a)&&(et.delete(a),i.push(a)),a=a.parent;for(let l=i.length-1;l>=0;l--){const o=i[l];(o.f&(vt|He))===0&&Zt(o)}}et.clear()}}et=null}}function Ws(e,t,n,r){if(!n.has(e)&&(n.add(e),e.reactions!==null))for(const s of e.reactions){const i=s.f;(i&de)!==0?Ws(s,t,n,r):(i&(br|at))!==0&&(i&Ie)===0&&Vs(s,t,r)&&(me(s,Ie),Mt(s))}}function Vs(e,t,n){const r=n.get(e);if(r!==void 0)return r;if(e.deps!==null)for(const s of e.deps){if(t.includes(s))return!0;if((s.f&de)!==0&&Vs(s,t,n))return n.set(s,!0),!0}return n.set(e,!1),!1}function Mt(e){for(var t=kr=e;t.parent!==null;){t=t.parent;var n=t.f;if(nr&&t===Z&&(n&at)!==0&&(n&Bs)===0)return;if((n&(Pt|ot))!==0){if((n&_e)===0)return;t.f^=_e}}Xe.push(t)}function uo(e){let t=0,n=St(0),r;return()=>{$t()&&(c(n),ii(()=>(t===0&&(r=yi(()=>e(()=>Kt(n)))),t+=1,()=>{sn(()=>{t-=1,t===0&&(r?.(),r=void 0,Kt(n))})})))}}var fo=Nt|Ut|zn;function vo(e,t,n){new ho(e,t,n)}class ho{parent;#e=!1;#t;#r=null;#n;#l;#i;#s=null;#a=null;#o=null;#c=null;#u=null;#d=0;#f=0;#h=!1;#v=null;#y=uo(()=>(this.#v=St(this.#d),()=>{this.#v=null}));constructor(t,n,r){this.#t=t,this.#n=n,this.#l=r,this.parent=Z.b,this.#e=!!this.#n.pending,this.#i=Mr(()=>{Z.b=this;{var s=this.#m();try{this.#s=ze(()=>r(s))}catch(i){this.error(i)}this.#f>0?this.#_():this.#e=!1}return()=>{this.#u?.remove()}},fo)}#w(){try{this.#s=ze(()=>this.#l(this.#t))}catch(t){this.error(t)}this.#e=!1}#x(){const t=this.#n.pending;t&&(this.#a=ze(()=>t(this.#t)),Ge.enqueue(()=>{var n=this.#m();this.#s=this.#p(()=>(Ge.ensure(),ze(()=>this.#l(n)))),this.#f>0?this.#_():(Ot(this.#a,()=>{this.#a=null}),this.#e=!1)}))}#m(){var t=this.#t;return this.#e&&(this.#u=mt(),this.#t.before(this.#u),t=this.#u),t}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#p(t){var n=Z,r=G,s=je;Ve(this.#i),ke(this.#i),jt(this.#i.ctx);try{return t()}catch(i){return Ys(i),null}finally{Ve(n),ke(r),jt(s)}}#_(){const t=this.#n.pending;this.#s!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#u),di(this.#s,this.#c)),this.#a===null&&(this.#a=ze(()=>t(this.#t)))}#g(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#g(t);return}this.#f+=t,this.#f===0&&(this.#e=!1,this.#a&&Ot(this.#a,()=>{this.#a=null}),this.#c&&(this.#t.before(this.#c),this.#c=null))}update_pending_count(t){this.#g(t),this.#d+=t,this.#v&&Lt(this.#v,this.#d)}get_effect_pending(){return this.#y(),c(this.#v)}error(t){var n=this.#n.onerror;let r=this.#n.failed;if(this.#h||!n&&!r)throw t;this.#s&&(Te(this.#s),this.#s=null),this.#a&&(Te(this.#a),this.#a=null),this.#o&&(Te(this.#o),this.#o=null);var s=!1,i=!1;const a=()=>{if(s){so();return}s=!0,i&&ro(),Ge.ensure(),this.#d=0,this.#o!==null&&Ot(this.#o,()=>{this.#o=null}),this.#e=this.has_pending_snippet(),this.#s=this.#p(()=>(this.#h=!1,ze(()=>this.#l(this.#t)))),this.#f>0?this.#_():this.#e=!1};var l=G;try{ke(null),i=!0,n?.(t,a),i=!1}catch(o){Ft(o,this.#i&&this.#i.parent)}finally{ke(l)}r&&sn(()=>{this.#o=this.#p(()=>{Ge.ensure(),this.#h=!0;try{return ze(()=>{r(this.#t,()=>t,()=>a)})}catch(o){return Ft(o,this.#i.parent),null}finally{this.#h=!1}})})}}function po(e,t,n){for(var r=[],s=t.length,i=0;i<s;i++)Sr(t[i].e,r,!0);ci(r,()=>{var a=r.length===0&&n!==null;if(a){var l=n,o=l.parentNode;Eo(o),o.append(l),e.items.clear(),Le(e,t[0].prev,t[s-1].next)}for(var u=0;u<s;u++){var d=t[u];a||(e.items.delete(d.k),Le(e,d.prev,d.next)),Te(d.e,!a)}e.first===t[0]&&(e.first=t[0].prev)})}function Ye(e,t,n,r,s,i=null){var a=e,l=new Map,o=null,u=(t&js)!==0,d=(t&Os)!==0,p=(t&Ns)!==0;if(u){var _=e;a=_.appendChild(mt())}var m=null,T=xo(()=>{var M=n();return Fs(M)?M:M==null?[]:gr(M)}),R,w=!0;function k(){_o(P,R,a,t,r),m!==null&&(R.length===0?(m.fragment?(a.before(m.fragment),m.fragment=null):Pr(m.effect),U.first=m.effect):Ot(m.effect,()=>{m=null}))}var U=Mr(()=>{R=c(T);for(var M=R.length,z=new Set,C=te,Q=null,F=ni(),I=0;I<M;I+=1){var x=R[I],E=r(x,I),V=w?null:l.get(E);V?(d&&Lt(V.v,x),p?Lt(V.i,I):V.i=I,F&&C.skipped_effects.delete(V.e)):(V=mo(w?a:null,Q,x,E,I,s,t,n),w&&(V.o=!0,Q===null?o=V:Q.next=V,Q=V),l.set(E,V)),z.add(E)}if(M===0&&i&&!m)if(w)m={fragment:null,effect:ze(()=>i(a))};else{var ee=document.createDocumentFragment(),le=mt();ee.append(le),m={fragment:ee,effect:ze(()=>i(le))}}if(!w)if(F){for(const[re,fe]of l)z.has(re)||C.skipped_effects.add(fe.e);C.oncommit(k),C.ondiscard(()=>{})}else k();c(T)}),P={effect:U,items:l,first:o};w=!1}function _o(e,t,n,r,s){var i=(r&Oa)!==0,a=t.length,l=e.items,o=e.first,u,d=null,p,_=[],m=[],T,R,w,k;if(i)for(k=0;k<a;k+=1)T=t[k],R=s(T,k),w=l.get(R),w.o&&(w.a?.measure(),(p??=new Set).add(w));for(k=0;k<a;k+=1){if(T=t[k],R=s(T,k),w=l.get(R),e.first??=w,!w.o){w.o=!0;var U=d?d.next:o;Le(e,d,w),Le(e,w,U),$n(w,U,n),d=w,_=[],m=[],o=d.next;continue}if((w.e.f&He)!==0&&(Pr(w.e),i&&(w.a?.unfix(),(p??=new Set).delete(w))),w!==o){if(u!==void 0&&u.has(w)){if(_.length<m.length){var P=m[0],M;d=P.prev;var z=_[0],C=_[_.length-1];for(M=0;M<_.length;M+=1)$n(_[M],P,n);for(M=0;M<m.length;M+=1)u.delete(m[M]);Le(e,z.prev,C.next),Le(e,d,z),Le(e,C,P),o=P,d=C,k-=1,_=[],m=[]}else u.delete(w),$n(w,o,n),Le(e,w.prev,w.next),Le(e,w,d===null?e.first:d.next),Le(e,d,w),d=w;continue}for(_=[],m=[];o!==null&&o.k!==R;)(o.e.f&He)===0&&(u??=new Set).add(o),m.push(o),o=o.next;if(o===null)continue;w=o}_.push(w),d=w,o=w.next}let Q=l.size>a;if(o!==null||u!==void 0){for(var F=u===void 0?[]:gr(u);o!==null;)(o.e.f&He)===0&&F.push(o),o=o.next;var I=F.length;if(Q=l.size-I>a,I>0){var x=(r&js)!==0&&a===0?n:null;if(i){for(k=0;k<I;k+=1)F[k].a?.measure();for(k=0;k<I;k+=1)F[k].a?.fix()}po(e,F,x)}}if(Q)for(const E of l.values())E.o||(Le(e,d,E),d=E);e.effect.last=d&&d.e,i&&sn(()=>{if(p!==void 0)for(w of p)w.a?.apply()})}function mo(e,t,n,r,s,i,a,l){var o=(a&Os)!==0,u=(a&Na)===0,d=o?u?ko(n,!1,!1):St(n):n,p=(a&Ns)===0?s:St(s),_={i:p,v:d,k:r,a:null,e:null,o:!1,prev:t,next:null};try{if(e===null){var m=document.createDocumentFragment();m.append(e=mt())}return _.e=ze(()=>i(e,d,p,l)),t!==null&&(t.next=_),_}finally{}}function $n(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,s=t?t.e.nodes_start:n,i=e.e.nodes_start;i!==null&&i!==r;){var a=an(i);s.before(i),i=a}}function Le(e,t,n){t===null?(e.first=n,e.effect.first=n&&n.e):(t.e.next&&(t.e.next.prev=null),t.next=n,t.e.next=n&&n.e),n!==null&&(n.e.prev&&(n.e.prev.next=null),n.prev=t,n.e.prev=t&&t.e)}function go(e,t,n,r){const s=Tr;if(n.length===0&&e.length===0){r(t.map(s));return}var i=te,a=Z,l=yo();function o(){Promise.all(n.map(u=>wo(u))).then(u=>{l();try{r([...t.map(s),...u])}catch(d){(a.f&vt)===0&&Ft(d,a)}i?.deactivate(),In()}).catch(u=>{Ft(u,a)})}e.length>0?Promise.all(e).then(()=>{l();try{return o()}finally{i?.deactivate(),In()}}):o()}function yo(){var e=Z,t=G,n=je,r=te;return function(i=!0){Ve(e),ke(t),jt(n),i&&r?.activate()}}function In(){Ve(null),ke(null),jt(null)}function Tr(e){var t=de|Ie,n=G!==null&&(G.f&de)!==0?G:null;return Z!==null&&(Z.f|=Ut),{ctx:je,deps:null,effects:null,equals:Us,f:t,fn:e,reactions:null,rv:0,v:ve,wv:0,parent:n??Z,ac:null}}function wo(e,t){let n=Z;n===null&&Ka();var r=n.b,s=void 0,i=St(ve),a=!G,l=new Map;return Co(()=>{var o=qs();s=o.promise;try{Promise.resolve(e()).then(o.resolve,o.reject).then(()=>{u===te&&u.committed&&u.deactivate(),In()})}catch(_){o.reject(_),In()}var u=te;if(a){var d=!r.is_pending();r.update_pending_count(1),u.increment(d),l.get(u)?.reject(Rt),l.delete(u),l.set(u,o)}const p=(_,m=void 0)=>{if(u.activate(),m)m!==Rt&&(i.f|=ht,Lt(i,m));else{(i.f&ht)!==0&&(i.f^=ht),Lt(i,_);for(const[T,R]of l){if(l.delete(T),T===u)break;R.reject(Rt)}}a&&(r.update_pending_count(-1),u.decrement(d))};o.promise.then(p,_=>p(null,_||"unknown"))}),Po(()=>{for(const o of l.values())o.reject(Rt)}),new Promise(o=>{function u(d){function p(){d===s?o(i):u(s)}d.then(p,p)}u(s)})}function X(e){const t=Tr(e);return fi(t),t}function xo(e){const t=Tr(e);return t.equals=Xs,t}function Ks(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)Te(t[n])}}function bo(e){for(var t=e.parent;t!==null;){if((t.f&de)===0)return(t.f&vt)===0?t:null;t=t.parent}return null}function Ir(e){var t,n=Z;Ve(bo(e));try{e.f&=~Et,Ks(e),t=_i(e)}finally{Ve(n)}return t}function $s(e){var t=Ir(e);if(e.equals(t)||(te?.is_fork||(e.v=t),e.wv=hi()),!Xt)if(Ne!==null)($t()||te?.is_fork)&&Ne.set(e,t);else{var n=(e.f&Ue)===0?lt:_e;me(e,n)}}let rr=new Set;const pt=new Map;let Qs=!1;function St(e,t){var n={f:0,v:e,reactions:null,equals:Us,rv:0,wv:0};return n}function O(e,t){const n=St(e);return fi(n),n}function ko(e,t=!1,n=!0){const r=St(e);return t||(r.equals=Xs),r}function b(e,t,n=!1){G!==null&&(!We||(G.f&cs)!==0)&&Gs()&&(G.f&(de|at|br|cs))!==0&&!rt?.includes(e)&&no();let r=n?se(t):t;return Lt(e,r)}function Lt(e,t){if(!e.equals(t)){var n=e.v;Xt?pt.set(e,t):pt.set(e,n),e.v=t;var r=Ge.ensure();r.capture(e,n),(e.f&de)!==0&&((e.f&Ie)!==0&&Ir(e),me(e,(e.f&Ue)!==0?_e:lt)),e.wv=hi(),Zs(e,Ie),Z!==null&&(Z.f&_e)!==0&&(Z.f&(ot|Pt))===0&&(Re===null?zo([e]):Re.push(e)),!r.is_fork&&rr.size>0&&!Qs&&To()}return t}function To(){Qs=!1;var e=_t;En(!0);const t=Array.from(rr);try{for(const n of t)(n.f&_e)!==0&&me(n,lt),on(n)&&Zt(n)}finally{En(e)}rr.clear()}function Kt(e){b(e,e.v+1)}function Zs(e,t){var n=e.reactions;if(n!==null)for(var r=n.length,s=0;s<r;s++){var i=n[s],a=i.f,l=(a&Ie)===0;if(l&&me(i,t),(a&de)!==0){var o=i;Ne?.delete(o),(a&Et)===0&&(a&Ue&&(i.f|=Et),Zs(o,lt))}else l&&((a&at)!==0&&et!==null&&et.add(i),Mt(i))}}function se(e){if(typeof e!="object"||e===null||xn in e)return e;const t=Ls(e);if(t!==Ua&&t!==Xa)return e;var n=new Map,r=Fs(e),s=O(0),i=It,a=l=>{if(It===i)return l();var o=G,u=It;ke(null),vs(i);var d=l();return ke(o),vs(u),d};return r&&n.set("length",O(e.length)),new Proxy(e,{defineProperty(l,o,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&eo();var d=n.get(o);return d===void 0?d=a(()=>{var p=O(u.value);return n.set(o,p),p}):b(d,u.value,!0),!0},deleteProperty(l,o){var u=n.get(o);if(u===void 0){if(o in l){const d=a(()=>O(ve));n.set(o,d),Kt(s)}}else b(u,ve),Kt(s);return!0},get(l,o,u){if(o===xn)return e;var d=n.get(o),p=o in l;if(d===void 0&&(!p||Vt(l,o)?.writable)&&(d=a(()=>{var m=se(p?l[o]:ve),T=O(m);return T}),n.set(o,d)),d!==void 0){var _=c(d);return _===ve?void 0:_}return Reflect.get(l,o,u)},getOwnPropertyDescriptor(l,o){var u=Reflect.getOwnPropertyDescriptor(l,o);if(u&&"value"in u){var d=n.get(o);d&&(u.value=c(d))}else if(u===void 0){var p=n.get(o),_=p?.v;if(p!==void 0&&_!==ve)return{enumerable:!0,configurable:!0,value:_,writable:!0}}return u},has(l,o){if(o===xn)return!0;var u=n.get(o),d=u!==void 0&&u.v!==ve||Reflect.has(l,o);if(u!==void 0||Z!==null&&(!d||Vt(l,o)?.writable)){u===void 0&&(u=a(()=>{var _=d?se(l[o]):ve,m=O(_);return m}),n.set(o,u));var p=c(u);if(p===ve)return!1}return d},set(l,o,u,d){var p=n.get(o),_=o in l;if(r&&o==="length")for(var m=u;m<p.v;m+=1){var T=n.get(m+"");T!==void 0?b(T,ve):m in l&&(T=a(()=>O(ve)),n.set(m+"",T))}if(p===void 0)(!_||Vt(l,o)?.writable)&&(p=a(()=>O(void 0)),b(p,se(u)),n.set(o,p));else{_=p.v!==ve;var R=a(()=>se(u));b(p,R)}var w=Reflect.getOwnPropertyDescriptor(l,o);if(w?.set&&w.set.call(d,u),!_){if(r&&typeof o=="string"){var k=n.get("length"),U=Number(o);Number.isInteger(U)&&U>=k.v&&b(k,U+1)}Kt(s)}return!0},ownKeys(l){c(s);var o=Reflect.ownKeys(l).filter(p=>{var _=n.get(p);return _===void 0||_.v!==ve});for(var[u,d]of n)d.v!==ve&&!(u in l)&&o.push(u);return o},setPrototypeOf(){to()}})}var ds,Js,ei,ti;function Io(){if(ds===void 0){ds=window,Js=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;ei=Vt(t,"firstChild").get,ti=Vt(t,"nextSibling").get,ls(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),ls(n)&&(n.__t=void 0)}}function mt(e=""){return document.createTextNode(e)}function Er(e){return ei.call(e)}function an(e){return ti.call(e)}function h(e,t){return Er(e)}function he(e,t=!1){{var n=Er(e);return n instanceof Comment&&n.data===""?an(n):n}}function y(e,t=1,n=!1){let r=e;for(;t--;)r=an(r);return r}function Eo(e){e.textContent=""}function ni(){return!1}function ri(e){var t=G,n=Z;ke(null),Ve(null);try{return e()}finally{ke(t),Ve(n)}}function Mo(e){Z===null&&(G===null&&Za(),Qa()),Xt&&$a()}function So(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function ct(e,t,n){var r=Z;r!==null&&(r.f&He)!==0&&(e|=He);var s={ctx:je,deps:null,nodes_start:null,nodes_end:null,f:e|Ie|Ue,first:null,fn:t,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{Zt(s),s.f|=xr}catch(l){throw Te(s),l}else t!==null&&Mt(s);var i=s;if(n&&i.deps===null&&i.teardown===null&&i.nodes_start===null&&i.first===i.last&&(i.f&Ut)===0&&(i=i.first,(e&at)!==0&&(e&Nt)!==0&&i!==null&&(i.f|=Nt)),i!==null&&(i.parent=r,r!==null&&So(i,r),G!==null&&(G.f&de)!==0&&(e&Pt)===0)){var a=G;(a.effects??=[]).push(i)}return s}function $t(){return G!==null&&!We}function Po(e){const t=ct(wr,null,!1);return me(t,_e),t.teardown=e,t}function nt(e){Mo();var t=Z.f,n=!G&&(t&ot)!==0&&(t&xr)===0;if(n){var r=je;(r.e??=[]).push(e)}else return si(e)}function si(e){return ct(yr|Wa,e,!1)}function Ao(e){Ge.ensure();const t=ct(Pt|Ut,e,!0);return(n={})=>new Promise(r=>{n.outro?Ot(t,()=>{Te(t),r(void 0)}):(Te(t),r(void 0))})}function Do(e){return ct(yr,e,!1)}function Co(e){return ct(br|Ut,e,!0)}function ii(e,t=0){return ct(wr|t,e,!0)}function J(e,t=[],n=[],r=[]){go(r,t,n,s=>{ct(wr,()=>e(...s.map(c)),!0)})}function Mr(e,t=0){var n=ct(at|t,e,!0);return n}function ze(e){return ct(ot|Ut,e,!0)}function ai(e){var t=e.teardown;if(t!==null){const n=Xt,r=G;fs(!0),ke(null);try{t.call(null)}finally{fs(n),ke(r)}}}function oi(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const s=n.ac;s!==null&&ri(()=>{s.abort(Rt)});var r=n.next;(n.f&Pt)!==0?n.parent=null:Te(n,t),n=r}}function Ho(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&ot)===0&&Te(t),t=n}}function Te(e,t=!0){var n=!1;(t||(e.f&Bs)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(Ro(e.nodes_start,e.nodes_end),n=!0),oi(e,t&&!n),Mn(e,0),me(e,vt);var r=e.transitions;if(r!==null)for(const i of r)i.stop();ai(e);var s=e.parent;s!==null&&s.first!==null&&li(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function Ro(e,t){for(;e!==null;){var n=e===t?null:an(e);e.remove(),e=n}}function li(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function Ot(e,t,n=!0){var r=[];Sr(e,r,!0),ci(r,()=>{n&&Te(e),t&&t()})}function ci(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var s of e)s.out(r)}else t()}function Sr(e,t,n){if((e.f&He)===0){if(e.f^=He,e.transitions!==null)for(const a of e.transitions)(a.is_global||n)&&t.push(a);for(var r=e.first;r!==null;){var s=r.next,i=(r.f&Nt)!==0||(r.f&ot)!==0&&(e.f&at)!==0;Sr(r,t,i?n:!1),r=s}}}function Pr(e){ui(e,!0)}function ui(e,t){if((e.f&He)!==0){e.f^=He,(e.f&_e)===0&&(me(e,Ie),Mt(e));for(var n=e.first;n!==null;){var r=n.next,s=(n.f&Nt)!==0||(n.f&ot)!==0;ui(n,s?t:!1),n=r}if(e.transitions!==null)for(const i of e.transitions)(i.is_global||t)&&i.in()}}function di(e,t){for(var n=e.nodes_start,r=e.nodes_end;n!==null;){var s=n===r?null:an(n);t.append(n),n=s}}let _t=!1;function En(e){_t=e}let Xt=!1;function fs(e){Xt=e}let G=null,We=!1;function ke(e){G=e}let Z=null;function Ve(e){Z=e}let rt=null;function fi(e){G!==null&&(rt===null?rt=[e]:rt.push(e))}let ye=null,De=0,Re=null;function zo(e){Re=e}let vi=1,Qt=0,It=Qt;function vs(e){It=e}function hi(){return++vi}function on(e){var t=e.f;if((t&Ie)!==0)return!0;if(t&de&&(e.f&=~Et),(t&lt)!==0){var n=e.deps;if(n!==null)for(var r=n.length,s=0;s<r;s++){var i=n[s];if(on(i)&&$s(i),i.wv>e.wv)return!0}(t&Ue)!==0&&Ne===null&&me(e,_e)}return!1}function pi(e,t,n=!0){var r=e.reactions;if(r!==null&&!rt?.includes(e))for(var s=0;s<r.length;s++){var i=r[s];(i.f&de)!==0?pi(i,t,!1):t===i&&(n?me(i,Ie):(i.f&_e)!==0&&me(i,lt),Mt(i))}}function _i(e){var t=ye,n=De,r=Re,s=G,i=rt,a=je,l=We,o=It,u=e.f;ye=null,De=0,Re=null,G=(u&(ot|Pt))===0?e:null,rt=null,jt(e.ctx),We=!1,It=++Qt,e.ac!==null&&(ri(()=>{e.ac.abort(Rt)}),e.ac=null);try{e.f|=tr;var d=e.fn,p=d(),_=e.deps;if(ye!==null){var m;if(Mn(e,De),_!==null&&De>0)for(_.length=De+ye.length,m=0;m<ye.length;m++)_[De+m]=ye[m];else e.deps=_=ye;if(_t&&$t()&&(e.f&Ue)!==0)for(m=De;m<_.length;m++)(_[m].reactions??=[]).push(e)}else _!==null&&De<_.length&&(Mn(e,De),_.length=De);if(Gs()&&Re!==null&&!We&&_!==null&&(e.f&(de|lt|Ie))===0)for(m=0;m<Re.length;m++)pi(Re[m],e);return s!==null&&s!==e&&(Qt++,Re!==null&&(r===null?r=Re:r.push(...Re))),(e.f&ht)!==0&&(e.f^=ht),p}catch(T){return Ys(T)}finally{e.f^=tr,ye=t,De=n,Re=r,G=s,rt=i,jt(a),We=l,It=o}}function Oo(e,t){let n=t.reactions;if(n!==null){var r=La.call(n,e);if(r!==-1){var s=n.length-1;s===0?n=t.reactions=null:(n[r]=n[s],n.pop())}}n===null&&(t.f&de)!==0&&(ye===null||!ye.includes(t))&&(me(t,lt),(t.f&Ue)!==0&&(t.f^=Ue,t.f&=~Et),Ks(t),Mn(t,0))}function Mn(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)Oo(e,n[r])}function Zt(e){var t=e.f;if((t&vt)===0){me(e,_e);var n=Z,r=_t;Z=e,_t=!0;try{(t&(at|Ya))!==0?Ho(e):oi(e),ai(e);var s=_i(e);e.teardown=typeof s=="function"?s:null,e.wv=vi;var i;er&&ao&&(e.f&Ie)!==0&&e.deps}finally{_t=r,Z=n}}}function c(e){var t=e.f,n=(t&de)!==0;if(G!==null&&!We){var r=Z!==null&&(Z.f&vt)!==0;if(!r&&!rt?.includes(e)){var s=G.deps;if((G.f&tr)!==0)e.rv<Qt&&(e.rv=Qt,ye===null&&s!==null&&s[De]===e?De++:ye===null?ye=[e]:ye.includes(e)||ye.push(e));else{(G.deps??=[]).push(e);var i=e.reactions;i===null?e.reactions=[G]:i.includes(G)||i.push(G)}}}if(Xt){if(pt.has(e))return pt.get(e);if(n){var a=e,l=a.v;return((a.f&_e)===0&&a.reactions!==null||gi(a))&&(l=Ir(a)),pt.set(a,l),l}}else n&&(!Ne?.has(e)||te?.is_fork&&!$t())&&(a=e,on(a)&&$s(a),_t&&$t()&&(a.f&Ue)===0&&mi(a));if(Ne?.has(e))return Ne.get(e);if((e.f&ht)!==0)throw e.v;return e.v}function mi(e){if(e.deps!==null){e.f^=Ue;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&de)!==0&&(t.f&Ue)===0&&mi(t)}}function gi(e){if(e.v===ve)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(pt.has(t)||(t.f&de)!==0&&gi(t))return!0;return!1}function yi(e){var t=We;try{return We=!0,e()}finally{We=t}}const No=-7169;function me(e,t){e.f=e.f&No|t}const wi=new Set,sr=new Set;function $e(e){for(var t=0;t<e.length;t++)wi.add(e[t]);for(var n of sr)n(e)}let hs=null;function mn(e){var t=this,n=t.ownerDocument,r=e.type,s=e.composedPath?.()||[],i=s[0]||e.target;hs=e;var a=0,l=hs===e&&e.__root;if(l){var o=s.indexOf(l);if(o!==-1&&(t===document||t===window)){e.__root=t;return}var u=s.indexOf(t);if(u===-1)return;o<=u&&(a=o)}if(i=s[a]||e.target,i!==t){qa(e,"currentTarget",{configurable:!0,get(){return i||n}});var d=G,p=Z;ke(null),Ve(null);try{for(var _,m=[];i!==null;){var T=i.assignedSlot||i.parentNode||i.host||null;try{var R=i["__"+r];R!=null&&(!i.disabled||e.target===i)&&R.call(i,e)}catch(w){_?m.push(w):_=w}if(e.cancelBubble||T===t||T===null)break;i=T}if(_){for(let w of m)queueMicrotask(()=>{throw w});throw _}}finally{e.__root=t,delete e.currentTarget,ke(d),Ve(p)}}}function jo(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function xi(e,t){var n=Z;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function Y(e,t){var n=(t&ja)!==0,r,s=!e.startsWith("<!>");return()=>{r===void 0&&(r=jo(s?e:"<!>"+e),r=Er(r));var i=n||Js?document.importNode(r,!0):r.cloneNode(!0);return xi(i,i),i}}function pe(){var e=document.createDocumentFragment(),t=document.createComment(""),n=mt();return e.append(t,n),xi(t,n),e}function D(e,t){e!==null&&e.before(t)}const Fo=["touchstart","touchmove"];function Lo(e){return Fo.includes(e)}function S(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function qo(e,t){return Bo(e,t)}const Dt=new Map;function Bo(e,{target:t,anchor:n,props:r={},events:s,context:i,intro:a=!0}){Io();var l=new Set,o=p=>{for(var _=0;_<p.length;_++){var m=p[_];if(!l.has(m)){l.add(m);var T=Lo(m);t.addEventListener(m,mn,{passive:T});var R=Dt.get(m);R===void 0?(document.addEventListener(m,mn,{passive:T}),Dt.set(m,1)):Dt.set(m,R+1)}}};o(gr(wi)),sr.add(o);var u=void 0,d=Ao(()=>{var p=n??t.appendChild(mt());return vo(p,{pending:()=>{}},_=>{if(i){Ee({});var m=je;m.c=i}s&&(r.$$events=s),u=e(_,r)||{},i&&Me()}),()=>{for(var _ of l){t.removeEventListener(_,mn);var m=Dt.get(_);--m===0?(document.removeEventListener(_,mn),Dt.delete(_)):Dt.set(_,m)}sr.delete(o),p!==n&&p.parentNode?.removeChild(p)}});return Uo.set(u,d),u}let Uo=new WeakMap;class Xo{anchor;#e=new Map;#t=new Map;#r=new Map;#n=new Set;#l=!0;constructor(t,n=!0){this.anchor=t,this.#l=n}#i=()=>{var t=te;if(this.#e.has(t)){var n=this.#e.get(t),r=this.#t.get(n);if(r)Pr(r),this.#n.delete(n);else{var s=this.#r.get(n);s&&(this.#t.set(n,s.effect),this.#r.delete(n),s.fragment.lastChild.remove(),this.anchor.before(s.fragment),r=s.effect)}for(const[i,a]of this.#e){if(this.#e.delete(i),i===t)break;const l=this.#r.get(a);l&&(Te(l.effect),this.#r.delete(a))}for(const[i,a]of this.#t){if(i===n||this.#n.has(i))continue;const l=()=>{if(Array.from(this.#e.values()).includes(i)){var u=document.createDocumentFragment();di(a,u),u.append(mt()),this.#r.set(i,{effect:a,fragment:u})}else Te(a);this.#n.delete(i),this.#t.delete(i)};this.#l||!r?(this.#n.add(i),Ot(a,l,!1)):l()}}};#s=t=>{this.#e.delete(t);const n=Array.from(this.#e.values());for(const[r,s]of this.#r)n.includes(r)||(Te(s.effect),this.#r.delete(r))};ensure(t,n){var r=te,s=ni();if(n&&!this.#t.has(t)&&!this.#r.has(t))if(s){var i=document.createDocumentFragment(),a=mt();i.append(a),this.#r.set(t,{effect:ze(()=>n(a)),fragment:i})}else this.#t.set(t,ze(()=>n(this.anchor)));if(this.#e.set(r,t),s){for(const[l,o]of this.#t)l===t?r.skipped_effects.delete(o):r.skipped_effects.add(o);for(const[l,o]of this.#r)l===t?r.skipped_effects.delete(o.effect):r.skipped_effects.add(o.effect);r.oncommit(this.#i),r.ondiscard(this.#s)}else this.#i()}}function $(e,t,n=!1){var r=new Xo(e),s=n?Nt:0;function i(a,l){r.ensure(a,l)}Mr(()=>{var a=!1;t((l,o=!0)=>{a=!0,i(o,l)}),a||i(!1,null)},s)}const ps=[...` 	
\r\fÂ \v\uFEFF`];function Go(e,t,n){var r=e==null?"":""+e;if(n){for(var s in n)if(n[s])r=r?r+" "+s:s;else if(r.length)for(var i=s.length,a=0;(a=r.indexOf(s,a))>=0;){var l=a+i;(a===0||ps.includes(r[a-1]))&&(l===r.length||ps.includes(r[l]))?r=(a===0?"":r.substring(0,a))+r.substring(l+1):a=l}}return r===""?null:r}function Yo(e,t){return e==null?null:String(e)}function qe(e,t,n,r,s,i){var a=e.__className;if(a!==n||a===void 0){var l=Go(n,r,i);l==null?e.removeAttribute("class"):e.className=l,e.__className=n}else if(i&&s!==i)for(var o in i){var u=!!i[o];(s==null||u!==!!s[o])&&e.classList.toggle(o,u)}return i}function ft(e,t,n,r){var s=e.__style;if(s!==t){var i=Yo(t);i==null?e.removeAttribute("style"):e.style.cssText=i,e.__style=t}return r}const Wo=Symbol("is custom element"),Vo=Symbol("is html");function N(e,t,n,r){var s=Ko(e);s[t]!==(s[t]=n)&&(t==="loading"&&(e[Va]=n),n==null?e.removeAttribute(t):typeof n!="string"&&$o(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function Ko(e){return e.__attributes??={[Wo]:e.nodeName.includes("-"),[Vo]:e.namespaceURI===Fa}}var _s=new Map;function $o(e){var t=e.getAttribute("is")||e.nodeName,n=_s.get(t);if(n)return n;_s.set(t,n=[]);for(var r,s=e,i=Element.prototype;i!==s;){r=Ba(s);for(var a in r)r[a].set&&n.push(a);s=Ls(s)}return n}function ms(e,t){return e===t||e?.[xn]===t}function Qo(e={},t,n,r){return Do(()=>{var s,i;return ii(()=>{s=i,i=[],yi(()=>{e!==n(...i)&&(t(e,...i),s&&ms(n(...s),e)&&t(null,...s))})}),()=>{sn(()=>{i&&ms(n(...i),e)&&t(null,...i)})}}),e}function ue(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Zo=typeof Symbol=="function"&&Symbol.observable||"@@observable",gs=Zo,Qn=()=>Math.random().toString(36).substring(7).split("").join("."),Jo={INIT:`@@redux/INIT${Qn()}`,REPLACE:`@@redux/REPLACE${Qn()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Qn()}`},Sn=Jo;function Ar(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function bi(e,t,n){if(typeof e!="function")throw new Error(ue(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(ue(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(ue(1));return n(bi)(e,t)}let r=e,s=t,i=new Map,a=i,l=0,o=!1;function u(){a===i&&(a=new Map,i.forEach((w,k)=>{a.set(k,w)}))}function d(){if(o)throw new Error(ue(3));return s}function p(w){if(typeof w!="function")throw new Error(ue(4));if(o)throw new Error(ue(5));let k=!0;u();const U=l++;return a.set(U,w),function(){if(k){if(o)throw new Error(ue(6));k=!1,u(),a.delete(U),i=null}}}function _(w){if(!Ar(w))throw new Error(ue(7));if(typeof w.type>"u")throw new Error(ue(8));if(typeof w.type!="string")throw new Error(ue(17));if(o)throw new Error(ue(9));try{o=!0,s=r(s,w)}finally{o=!1}return(i=a).forEach(U=>{U()}),w}function m(w){if(typeof w!="function")throw new Error(ue(10));r=w,_({type:Sn.REPLACE})}function T(){const w=p;return{subscribe(k){if(typeof k!="object"||k===null)throw new Error(ue(11));function U(){const M=k;M.next&&M.next(d())}return U(),{unsubscribe:w(U)}},[gs](){return this}}}return _({type:Sn.INIT}),{dispatch:_,subscribe:p,getState:d,replaceReducer:m,[gs]:T}}function el(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:Sn.INIT})>"u")throw new Error(ue(12));if(typeof n(void 0,{type:Sn.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ue(13))})}function tl(e){const t=Object.keys(e),n={};for(let i=0;i<t.length;i++){const a=t[i];typeof e[a]=="function"&&(n[a]=e[a])}const r=Object.keys(n);let s;try{el(n)}catch(i){s=i}return function(a={},l){if(s)throw s;let o=!1;const u={};for(let d=0;d<r.length;d++){const p=r[d],_=n[p],m=a[p],T=_(m,l);if(typeof T>"u")throw l&&l.type,new Error(ue(14));u[p]=T,o=o||T!==m}return o=o||r.length!==Object.keys(a).length,o?u:a}}function Pn(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function nl(...e){return t=>(n,r)=>{const s=t(n,r);let i=()=>{throw new Error(ue(15))};const a={getState:s.getState,dispatch:(o,...u)=>i(o,...u)},l=e.map(o=>o(a));return i=Pn(...l)(s.dispatch),{...s,dispatch:i}}}function rl(e){return Ar(e)&&"type"in e&&typeof e.type=="string"}var ki=Symbol.for("immer-nothing"),ys=Symbol.for("immer-draftable"),we=Symbol.for("immer-state");function Be(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Ce=Object,qt=Ce.getPrototypeOf,An="constructor",On="prototype",ir="configurable",Dn="enumerable",bn="writable",Jt="value",it=e=>!!e&&!!e[we];function Ke(e){return e?Ti(e)||Nn(e)||!!e[ys]||!!e[An]?.[ys]||jn(e)||Fn(e):!1}var sl=Ce[On][An].toString(),ws=new WeakMap;function Ti(e){if(!e||!Dr(e))return!1;const t=qt(e);if(t===null||t===Ce[On])return!0;const n=Ce.hasOwnProperty.call(t,An)&&t[An];if(n===Object)return!0;if(!Ht(n))return!1;let r=ws.get(n);return r===void 0&&(r=Function.toString.call(n),ws.set(n,r)),r===sl}function ln(e,t,n=!0){cn(e)===0?(n?Reflect.ownKeys(e):Ce.keys(e)).forEach(s=>{t(s,e[s],e)}):e.forEach((r,s)=>t(s,r,e))}function cn(e){const t=e[we];return t?t.type_:Nn(e)?1:jn(e)?2:Fn(e)?3:0}var xs=(e,t,n=cn(e))=>n===2?e.has(t):Ce[On].hasOwnProperty.call(e,t),ar=(e,t,n=cn(e))=>n===2?e.get(t):e[t],Cn=(e,t,n,r=cn(e))=>{r===2?e.set(t,n):r===3?e.add(n):e[t]=n};function il(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var Nn=Array.isArray,jn=e=>e instanceof Map,Fn=e=>e instanceof Set,Dr=e=>typeof e=="object",Ht=e=>typeof e=="function",Zn=e=>typeof e=="boolean",tt=e=>e.copy_||e.base_,Cr=e=>e.modified_?e.copy_:e.base_;function or(e,t){if(jn(e))return new Map(e);if(Fn(e))return new Set(e);if(Nn(e))return Array[On].slice.call(e);const n=Ti(e);if(t===!0||t==="class_only"&&!n){const r=Ce.getOwnPropertyDescriptors(e);delete r[we];let s=Reflect.ownKeys(r);for(let i=0;i<s.length;i++){const a=s[i],l=r[a];l[bn]===!1&&(l[bn]=!0,l[ir]=!0),(l.get||l.set)&&(r[a]={[ir]:!0,[bn]:!0,[Dn]:l[Dn],[Jt]:e[a]})}return Ce.create(qt(e),r)}else{const r=qt(e);if(r!==null&&n)return{...e};const s=Ce.create(r);return Ce.assign(s,e)}}function Hr(e,t=!1){return Ln(e)||it(e)||(cn(e)>1&&Ce.defineProperties(e,{set:gn,add:gn,clear:gn,delete:gn}),Ce.freeze(e),t&&ln(e,(n,r)=>{Hr(r,!0)},!1)),e}function al(){Be(2)}var gn={[Jt]:al};function Ln(e){return e===null||!Dr(e)?!0:Ce.isFrozen(e)}var Hn="MapSet",lr="Patches",Ii={};function Bt(e){const t=Ii[e];return t||Be(0,e),t}var ol=e=>!!Ii[e],en,Ei=()=>en,ll=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:ol(Hn)?Bt(Hn):void 0});function bs(e,t){t&&(e.patchPlugin_=Bt(lr),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function cr(e){ur(e),e.drafts_.forEach(cl),e.drafts_=null}function ur(e){e===en&&(en=e.parent_)}var ks=e=>en=ll(en,e);function cl(e){const t=e[we];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Ts(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];if(e!==void 0&&e!==n){n[we].modified_&&(cr(t),Be(4)),Ke(e)&&(e=Is(t,e));const{patchPlugin_:s}=t;s&&s.generateReplacementPatches_(n[we].base_,e,t)}else e=Is(t,n);return ul(t,e,!0),cr(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==ki?e:void 0}function Is(e,t){if(Ln(t))return t;const n=t[we];if(!n)return Rr(t,e.handledSet_,e);if(!qn(n,e))return t;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(e);Pi(n,e)}return n.copy_}function ul(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Hr(t,n)}function Mi(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var qn=(e,t)=>e.scope_===t,dl=[];function Si(e,t,n,r){const s=tt(e),i=e.type_;if(r!==void 0&&ar(s,r,i)===t){Cn(s,r,n,i);return}if(!e.draftLocations_){const l=e.draftLocations_=new Map;ln(s,(o,u)=>{if(it(u)){const d=l.get(u)||[];d.push(o),l.set(u,d)}})}const a=e.draftLocations_.get(t)??dl;for(const l of a)Cn(s,l,n,i)}function fl(e,t,n){e.callbacks_.push(function(s){const i=t;if(!i||!qn(i,s))return;s.mapSetPlugin_?.fixSetContents(i);const a=Cr(i);Si(e,i.draft_??i,a,n),Pi(i,s)})}function Pi(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||(e.assigned_?.size??0)>0)){const{patchPlugin_:r}=t;if(r){const s=r.getPath(e);s&&r.generatePatches_(e,s,t)}Mi(e)}}function vl(e,t,n){const{scope_:r}=e;if(it(n)){const s=n[we];qn(s,r)&&s.callbacks_.push(function(){kn(e);const a=Cr(s);Si(e,n,a,t)})}else Ke(n)&&e.callbacks_.push(function(){const i=tt(e);ar(i,t,e.type_)===n&&r.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&Rr(ar(e.copy_,t,e.type_),r.handledSet_,r)})}function Rr(e,t,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||it(e)||t.has(e)||!Ke(e)||Ln(e)||(t.add(e),ln(e,(r,s)=>{if(it(s)){const i=s[we];if(qn(i,n)){const a=Cr(i);Cn(e,r,a,e.type_),Mi(i)}}else Ke(s)&&Rr(s,t,n)})),e}function hl(e,t){const n=Nn(e),r={type_:n?1:0,scope_:t?t.scope_:Ei(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let s=r,i=zr;n&&(s=[r],i=tn);const{revoke:a,proxy:l}=Proxy.revocable(s,i);return r.draft_=l,r.revoke_=a,[l,r]}var zr={get(e,t){if(t===we)return e;const n=tt(e);if(!xs(n,t,e.type_))return pl(e,n,t);const r=n[t];if(e.finalized_||!Ke(r))return r;if(r===Jn(e.base_,t)){kn(e);const s=e.type_===1?+t:t,i=fr(e.scope_,r,e,s);return e.copy_[s]=i}return r},has(e,t){return t in tt(e)},ownKeys(e){return Reflect.ownKeys(tt(e))},set(e,t,n){const r=Ai(tt(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const s=Jn(tt(e),t),i=s?.[we];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_.set(t,!1),!0;if(il(n,s)&&(n!==void 0||xs(e.base_,t,e.type_)))return!0;kn(e),dr(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_.set(t,!0),vl(e,t,n)),!0},deleteProperty(e,t){return kn(e),Jn(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),dr(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=tt(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{[bn]:!0,[ir]:e.type_!==1||t!=="length",[Dn]:r[Dn],[Jt]:n[t]}},defineProperty(){Be(11)},getPrototypeOf(e){return qt(e.base_)},setPrototypeOf(){Be(12)}},tn={};ln(zr,(e,t)=>{tn[e]=function(){const n=arguments;return n[0]=n[0][0],t.apply(this,n)}});tn.deleteProperty=function(e,t){return tn.set.call(this,e,t,void 0)};tn.set=function(e,t,n){return zr.set.call(this,e[0],t,n,e[0])};function Jn(e,t){const n=e[we];return(n?tt(n):e)[t]}function pl(e,t,n){const r=Ai(t,n);return r?Jt in r?r[Jt]:r.get?.call(e.draft_):void 0}function Ai(e,t){if(!(t in e))return;let n=qt(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=qt(n)}}function dr(e){e.modified_||(e.modified_=!0,e.parent_&&dr(e.parent_))}function kn(e){e.copy_||(e.assigned_=new Map,e.copy_=or(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var _l=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(t,n,r)=>{if(Ht(t)&&!Ht(n)){const i=n;n=t;const a=this;return function(o=i,...u){return a.produce(o,d=>n.call(this,d,...u))}}Ht(n)||Be(6),r!==void 0&&!Ht(r)&&Be(7);let s;if(Ke(t)){const i=ks(this),a=fr(i,t,void 0);let l=!0;try{s=n(a),l=!1}finally{l?cr(i):ur(i)}return bs(i,r),Ts(s,i)}else if(!t||!Dr(t)){if(s=n(t),s===void 0&&(s=t),s===ki&&(s=void 0),this.autoFreeze_&&Hr(s,!0),r){const i=[],a=[];Bt(lr).generateReplacementPatches_(t,s,{patches_:i,inversePatches_:a}),r(i,a)}return s}else Be(1,t)},this.produceWithPatches=(t,n)=>{if(Ht(t))return(a,...l)=>this.produceWithPatches(a,o=>t(o,...l));let r,s;return[this.produce(t,n,(a,l)=>{r=a,s=l}),r,s]},Zn(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),Zn(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),Zn(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Ke(e)||Be(8),it(e)&&(e=ml(e));const t=ks(this),n=fr(t,e,void 0);return n[we].isManual_=!0,ur(t),n}finishDraft(e,t){const n=e&&e[we];(!n||!n.isManual_)&&Be(9);const{scope_:r}=n;return bs(r,t),Ts(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const s=t[n];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}n>-1&&(t=t.slice(n+1));const r=Bt(lr).applyPatches_;return it(e)?r(e,t):this.produce(e,s=>r(s,t))}};function fr(e,t,n,r){const[s,i]=jn(t)?Bt(Hn).proxyMap_(t,n):Fn(t)?Bt(Hn).proxySet_(t,n):hl(t,n);return(n?.scope_??Ei()).drafts_.push(s),i.callbacks_=n?.callbacks_??[],i.key_=r,n&&r!==void 0?fl(n,i,r):i.callbacks_.push(function(o){o.mapSetPlugin_?.fixSetContents(i);const{patchPlugin_:u}=o;i.modified_&&u&&u.generatePatches_(i,[],o)}),s}function ml(e){return it(e)||Be(10,e),Di(e)}function Di(e){if(!Ke(e)||Ln(e))return e;const t=e[we];let n,r=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=or(e,t.scope_.immer_.useStrictShallowCopy_),r=t.scope_.immer_.shouldUseStrictIteration()}else n=or(e,!0);return ln(n,(s,i)=>{Cn(n,s,Di(i))},r),t&&(t.finalized_=!1),n}var gl=new _l,Ci=gl.produce;function Hi(e){return({dispatch:n,getState:r})=>s=>i=>typeof i=="function"?i(n,r,e):s(i)}var yl=Hi(),wl=Hi,xl=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Pn:Pn.apply(null,arguments)};function Es(e,t){function n(...r){if(t){let s=t(...r);if(!s)throw new Error(st(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>rl(r)&&r.type===e,n}var Ri=class Yt extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Yt.prototype)}static get[Symbol.species](){return Yt}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Yt(...t[0].concat(this)):new Yt(...t.concat(this))}};function Ms(e){return Ke(e)?Ci(e,()=>{}):e}function yn(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function bl(e){return typeof e=="boolean"}var kl=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:s=!0,actionCreatorCheck:i=!0}=t??{};let a=new Ri;return n&&(bl(n)?a.push(yl):a.push(wl(n.extraArgument))),a},Tl="RTK_autoBatch",Ss=e=>t=>{setTimeout(t,e)},Il=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let s=!0,i=!1,a=!1;const l=new Set,o=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Ss(10):e.type==="callback"?e.queueNotification:Ss(e.timeout),u=()=>{a=!1,i&&(i=!1,l.forEach(d=>d()))};return Object.assign({},r,{subscribe(d){const p=()=>s&&d(),_=r.subscribe(p);return l.add(d),()=>{_(),l.delete(d)}},dispatch(d){try{return s=!d?.meta?.[Tl],i=!s,i&&(a||(a=!0,o(u))),r.dispatch(d)}finally{s=!0}}})},El=e=>function(n){const{autoBatch:r=!0}=n??{};let s=new Ri(e);return r&&s.push(Il(typeof r=="object"?r:void 0)),s};function Ml(e){const t=kl(),{reducer:n=void 0,middleware:r,devTools:s=!0,preloadedState:i=void 0,enhancers:a=void 0}=e||{};let l;if(typeof n=="function")l=n;else if(Ar(n))l=tl(n);else throw new Error(st(1));let o;typeof r=="function"?o=r(t):o=t();let u=Pn;s&&(u=xl({trace:!1,...typeof s=="object"&&s}));const d=nl(...o),p=El(d);let _=typeof a=="function"?a(p):p();const m=u(..._);return bi(l,i,m)}function zi(e){const t={},n=[];let r;const s={addCase(i,a){const l=typeof i=="string"?i:i.type;if(!l)throw new Error(st(28));if(l in t)throw new Error(st(29));return t[l]=a,s},addAsyncThunk(i,a){return a.pending&&(t[i.pending.type]=a.pending),a.rejected&&(t[i.rejected.type]=a.rejected),a.fulfilled&&(t[i.fulfilled.type]=a.fulfilled),a.settled&&n.push({matcher:i.settled,reducer:a.settled}),s},addMatcher(i,a){return n.push({matcher:i,reducer:a}),s},addDefaultCase(i){return r=i,s}};return e(s),[t,n,r]}function Sl(e){return typeof e=="function"}function Pl(e,t){let[n,r,s]=zi(t),i;if(Sl(e))i=()=>Ms(e());else{const l=Ms(e);i=()=>l}function a(l=i(),o){let u=[n[o.type],...r.filter(({matcher:d})=>d(o)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[s]),u.reduce((d,p)=>{if(p)if(it(d)){const m=p(d,o);return m===void 0?d:m}else{if(Ke(d))return Ci(d,_=>p(_,o));{const _=p(d,o);if(_===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return _}}return d},l)}return a.getInitialState=i,a}var Al=Symbol.for("rtk-slice-createasyncthunk");function Dl(e,t){return`${e}/${t}`}function Cl({creators:e}={}){const t=e?.asyncThunk?.[Al];return function(r){const{name:s,reducerPath:i=s}=r;if(!s)throw new Error(st(11));const a=(typeof r.reducers=="function"?r.reducers(Rl()):r.reducers)||{},l=Object.keys(a),o={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(P,M){const z=typeof P=="string"?P:P.type;if(!z)throw new Error(st(12));if(z in o.sliceCaseReducersByType)throw new Error(st(13));return o.sliceCaseReducersByType[z]=M,u},addMatcher(P,M){return o.sliceMatchers.push({matcher:P,reducer:M}),u},exposeAction(P,M){return o.actionCreators[P]=M,u},exposeCaseReducer(P,M){return o.sliceCaseReducersByName[P]=M,u}};l.forEach(P=>{const M=a[P],z={reducerName:P,type:Dl(s,P),createNotation:typeof r.reducers=="function"};Ol(M)?jl(z,M,u,t):zl(z,M,u)});function d(){const[P={},M=[],z=void 0]=typeof r.extraReducers=="function"?zi(r.extraReducers):[r.extraReducers],C={...P,...o.sliceCaseReducersByType};return Pl(r.initialState,Q=>{for(let F in C)Q.addCase(F,C[F]);for(let F of o.sliceMatchers)Q.addMatcher(F.matcher,F.reducer);for(let F of M)Q.addMatcher(F.matcher,F.reducer);z&&Q.addDefaultCase(z)})}const p=P=>P,_=new Map,m=new WeakMap;let T;function R(P,M){return T||(T=d()),T(P,M)}function w(){return T||(T=d()),T.getInitialState()}function k(P,M=!1){function z(Q){let F=Q[P];return typeof F>"u"&&M&&(F=yn(m,z,w)),F}function C(Q=p){const F=yn(_,M,()=>new WeakMap);return yn(F,Q,()=>{const I={};for(const[x,E]of Object.entries(r.selectors??{}))I[x]=Hl(E,Q,()=>yn(m,Q,w),M);return I})}return{reducerPath:P,getSelectors:C,get selectors(){return C(z)},selectSlice:z}}const U={name:s,reducer:R,actions:o.actionCreators,caseReducers:o.sliceCaseReducersByName,getInitialState:w,...k(i),injectInto(P,{reducerPath:M,...z}={}){const C=M??i;return P.inject({reducerPath:C,reducer:R},z),{...U,...k(C,!0)}}};return U}}function Hl(e,t,n,r){function s(i,...a){let l=t(i);return typeof l>"u"&&r&&(l=n()),e(l,...a)}return s.unwrapped=e,s}var Oi=Cl();function Rl(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function zl({type:e,reducerName:t,createNotation:n},r,s){let i,a;if("reducer"in r){if(n&&!Nl(r))throw new Error(st(17));i=r.reducer,a=r.prepare}else i=r;s.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,a?Es(e,a):Es(e))}function Ol(e){return e._reducerDefinitionType==="asyncThunk"}function Nl(e){return e._reducerDefinitionType==="reducerWithPrepare"}function jl({type:e,reducerName:t},n,r,s){if(!s)throw new Error(st(18));const{payloadCreator:i,fulfilled:a,pending:l,rejected:o,settled:u,options:d}=n,p=s(e,i,d);r.exposeAction(t,p),a&&r.addCase(p.fulfilled,a),l&&r.addCase(p.pending,l),o&&r.addCase(p.rejected,o),u&&r.addMatcher(p.settled,u),r.exposeCaseReducer(t,{fulfilled:a||wn,pending:l||wn,rejected:o||wn,settled:u||wn})}function wn(){}function st(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}const Fl={kobold:{attackBonus:5,damage:1},snake:{attackBonus:4,damage:1},cultist:{attackBonus:5,damage:1}},un=[{id:"kobold",name:"Kobold Dragonshield",ac:14,hp:1,maxHp:1,xp:1,imagePath:"assets/Monster_KoboldDragonshield.png"},{id:"snake",name:"Snake",ac:12,hp:1,maxHp:1,xp:1,imagePath:"assets/Monster_Snake.png"},{id:"cultist",name:"Cultist",ac:13,hp:2,maxHp:2,xp:1,imagePath:"assets/Monster_Cultist.png"}],Ll=["kobold","kobold","kobold","snake","snake","snake","cultist","cultist","cultist"],nn=[{id:"quinn",name:"Quinn",heroClass:"Cleric",imagePath:"assets/Hero_Cleric_Quinn.png",speed:5,attack:{name:"Mace",attackBonus:6,damage:2,range:1},hp:8,maxHp:8,ac:17},{id:"vistra",name:"Vistra",heroClass:"Fighter",imagePath:"assets/Hero_Fighter_Vistra.png",speed:5,attack:{name:"Warhammer",attackBonus:8,damage:2,range:1},hp:10,maxHp:10,ac:18},{id:"keyleth",name:"Keyleth",heroClass:"Paladin",imagePath:"assets/Hero_Paladin_Keyleth.png",speed:6,attack:{name:"Longsword",attackBonus:7,damage:2,range:1},hp:10,maxHp:10,ac:18},{id:"tarak",name:"Tarak",heroClass:"Rogue",imagePath:"assets/Hero_Rogue_Tarak.png",speed:6,attack:{name:"Short Sword",attackBonus:7,damage:2,range:1},hp:8,maxHp:8,ac:17},{id:"haskan",name:"Haskan",heroClass:"Wizard",imagePath:"assets/Hero_Wizard_Haskan.png",speed:6,attack:{name:"Quarterstaff",attackBonus:4,damage:1,range:1},hp:6,maxHp:6,ac:14}],ql=[{x:1,y:2},{x:2,y:2},{x:3,y:2},{x:3,y:3},{x:3,y:4},{x:1,y:5},{x:2,y:5},{x:3,y:5}],Ni=[{tileType:"tile-2exit-a",imagePath:"assets/Tile_Black_x2_01.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-2exit-b",imagePath:"assets/Tile_Black_x2_02.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-2exit-c",imagePath:"assets/Tile_Black_x2_03.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-3exit-a",imagePath:"assets/Tile_Black_x3_01.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-3exit-b",imagePath:"assets/Tile_Black_x3_02.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-3exit-c",imagePath:"assets/Tile_Black_x3_03.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-4exit-a",imagePath:"assets/Tile_Black_x4_01.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-4exit-b",imagePath:"assets/Tile_Black_x4_02.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}}],Bl=["tile-2exit-a","tile-2exit-b","tile-2exit-c","tile-3exit-a","tile-3exit-b","tile-3exit-c","tile-4exit-a","tile-4exit-b"],Ul={id:"start-tile",tileType:"start",position:{col:0,row:0},rotation:0,edges:{north:"unexplored",south:"unexplored",east:"unexplored",west:"unexplored"}},Xl={availableHeroes:nn,selectedHeroes:[],heroEdgeMap:{}},ji=Oi({name:"heroes",initialState:Xl,reducers:{toggleHeroSelection:(e,t)=>{const n=t.payload,r=e.selectedHeroes.findIndex(s=>s.id===n);if(r>=0)e.selectedHeroes.splice(r,1),delete e.heroEdgeMap[n];else if(e.selectedHeroes.length<5){const s=e.availableHeroes.find(i=>i.id===n);s&&e.selectedHeroes.push(s)}},selectHeroFromEdge:(e,t)=>{const{heroId:n,edge:r}=t.payload,s=e.selectedHeroes.findIndex(i=>i.id===n);if(s>=0)e.heroEdgeMap[n]===r&&(e.selectedHeroes.splice(s,1),delete e.heroEdgeMap[n]);else if(e.selectedHeroes.length<5){const i=e.availableHeroes.find(a=>a.id===n);i&&(e.selectedHeroes.push(i),e.heroEdgeMap[n]=r)}},clearSelection:e=>{e.selectedHeroes=[],e.heroEdgeMap={}}}}),{toggleHeroSelection:Fu,selectHeroFromEdge:Gl,clearSelection:Lu}=ji.actions,Yl=ji.reducer,Wt={minX:1,maxX:3,minY:0,maxY:7,staircase:[{x:1,y:3},{x:2,y:3},{x:1,y:4},{x:2,y:4}]},Ct=4,Wl=4,Vl=8;function dn(e){const{col:t,row:n}=e.position;if(e.tileType==="start")return{minX:0,maxX:3,minY:0,maxY:7};let r,s;return t>0?r=Wl+(t-1)*Ct:t<0?r=t*Ct:r=0,n>0?s=Vl+(n-1)*Ct:n<0?s=n*Ct:s=0,{minX:r,maxX:r+Ct-1,minY:s,maxY:s+Ct-1}}function rn(e,t){for(const n of t.tiles){const r=dn(n);if(e.x>=r.minX&&e.x<=r.maxX&&e.y>=r.minY&&e.y<=r.maxY)return n}return null}function Kl(e){return e.x>=Wt.minX&&e.x<=Wt.maxX&&e.y>=Wt.minY&&e.y<=Wt.maxY}function Fi(e){return Wt.staircase.some(t=>t.x===e.x&&t.y===e.y)}function $l(e,t){return Kl(e)&&!Fi(e)}function Ql(e,t,n){return t.some(r=>r.position.x===e.x&&r.position.y===e.y&&r.heroId!==n)}function Zl(e,t,n,r){const s=dn(r),i=r.tileType==="start"?1:s.minX,a=e.y===s.minY,l=e.y===s.maxY,o=e.x===s.maxX,u=e.x===i,d=n<0?"north":n>0?"south":null,p=t<0?"west":t>0?"east":null;if(!d||!p)return!1;let _=!1,m=!1;return d==="north"&&a&&r.edges.north==="wall"&&(_=!0),d==="south"&&l&&r.edges.south==="wall"&&(_=!0),p==="east"&&o&&r.edges.east==="wall"&&(m=!0),p==="west"&&u&&r.edges.west==="wall"&&(m=!0),_&&m}function Jl(e,t,n,r){const s=r.x-n.x,i=r.y-n.y;if(s!==0&&i!==0)return!1;let a,l;return i<0?(a="north",l="south"):i>0?(a="south",l="north"):s>0?(a="east",l="west"):(a="west",l="east"),!(e.edges[a]!=="open"||t.edges[l]!=="open")}function Or(e,t){const n=[],r=[{dx:0,dy:-1,cardinal:!0},{dx:0,dy:1,cardinal:!0},{dx:-1,dy:0,cardinal:!0},{dx:1,dy:0,cardinal:!0},{dx:-1,dy:-1,cardinal:!1},{dx:1,dy:-1,cardinal:!1},{dx:-1,dy:1,cardinal:!1},{dx:1,dy:1,cardinal:!1}];if(!t){for(const i of r){const a={x:e.x+i.dx,y:e.y+i.dy};$l(a)&&n.push(a)}return n}const s=rn(e,t);if(!s)return n;for(const i of r){const a={x:e.x+i.dx,y:e.y+i.dy},l=rn(a,t);if(l&&!(l.tileType==="start"&&(Fi(a)||a.x<1))){if(s.id===l.id){if(!i.cardinal&&Zl(e,i.dx,i.dy,s))continue;n.push(a);continue}i.cardinal&&Jl(s,l,e,a)&&n.push(a)}}return n}function ec(e,t,n,r,s){const i=[],a=new Set,l=[{pos:e,distance:0}];for(a.add(`${e.x},${e.y}`);l.length>0;){const o=l.shift();if(!o)break;if(o.distance>0&&!Ql(o.pos,n,r)&&i.push(o.pos),o.distance<t){const u=Or(o.pos,s);for(const d of u){const p=`${d.x},${d.y}`;a.has(p)||(a.add(p),l.push({pos:d,distance:o.distance+1}))}}}return i}function tc(e,t){return t.some(n=>n.x===e.x&&n.y===e.y)}const nc={north:[{x:1,y:0},{x:2,y:0},{x:3,y:0}],south:[{x:1,y:7},{x:2,y:7},{x:3,y:7}],east:[{x:3,y:0},{x:3,y:1},{x:3,y:2},{x:3,y:5},{x:3,y:6},{x:3,y:7}],west:[{x:1,y:0},{x:1,y:1},{x:1,y:2},{x:1,y:5},{x:1,y:6},{x:1,y:7}]};function rc(e,t){return nc[t].some(r=>r.x===e.x&&r.y===e.y)}function Nr(e){return{north:"south",south:"north",east:"west",west:"east"}[e]}function sc(e,t){const n=t.tiles.find(r=>r.id==="start-tile");if(!n)return null;for(const r of t.unexploredEdges)if(r.tileId===n.id&&rc(e.position,r.direction))return r;return null}function ic(e,t){const{col:n,row:r}=e.position;switch(t){case"north":return{col:n,row:r-1};case"south":return{col:n,row:r+1};case"east":return{col:n+1,row:r};case"west":return{col:n-1,row:r}}}function ac(e){const t=Nr(e);return{south:0,west:90,north:180,east:270}[t]}function oc(e){return Ni.find(t=>t.tileType===e)}function lc(e,t,n){const r=n.tiles.find(d=>d.id===e.tileId);if(!r)return null;const s=ic(r,e.direction),i=ac(e.direction);if(!oc(t))return null;const l=`tile-${n.tiles.length}`,u={north:"unexplored",south:"unexplored",east:"unexplored",west:"unexplored",[Nr(e.direction)]:"open"};return{id:l,tileType:t,position:s,rotation:i,edges:u}}function vr(){return{tiles:[{...Ul}],unexploredEdges:[{tileId:"start-tile",direction:"north"},{tileId:"start-tile",direction:"south"},{tileId:"start-tile",direction:"east"},{tileId:"start-tile",direction:"west"}],tileDeck:[]}}function cc(e,t=Math.random){const n=[...e];for(let r=n.length-1;r>0;r--){const s=Math.floor(t()*(r+1));[n[r],n[s]]=[n[s],n[r]]}return n}function uc(e,t=Math.random){return cc(e,t)}function dc(e){if(e.length===0)return{drawnTile:null,remainingDeck:[]};const[t,...n]=e;return{drawnTile:t,remainingDeck:n}}function fc(e,t,n){const r=e.unexploredEdges.filter(o=>!(o.tileId===t.tileId&&o.direction===t.direction)),s=Nr(t.direction),a=["north","south","east","west"].filter(o=>o!==s&&n.edges[o]==="unexplored").map(o=>({tileId:n.id,direction:o}));return{tiles:[...e.tiles.map(o=>o.id===t.tileId?{...o,edges:{...o.edges,[t.direction]:"open"}}:o),n],unexploredEdges:[...r,...a],tileDeck:e.tileDeck}}function Li(e,t=Math.random){const n=[...e];for(let r=n.length-1;r>0;r--){const s=Math.floor(t()*(r+1));[n[r],n[s]]=[n[s],n[r]]}return n}function vc(e=Math.random){return{drawPile:Li([...Ll],e),discardPile:[]}}function hc(e,t=Math.random){if(e.drawPile.length===0){if(e.discardPile.length===0)return{monster:null,deck:e};const s=Li(e.discardPile,t);return{monster:s[0],deck:{drawPile:s.slice(1),discardPile:[]}}}const[n,...r]=e.drawPile;return{monster:n,deck:{drawPile:r,discardPile:e.discardPile}}}function pc(e,t){return{drawPile:e.drawPile,discardPile:[...e.discardPile,t]}}function jr(e){return un.find(t=>t.id===e)}function _c(e,t,n,r,s){const i=jr(e);return i?{monsterId:e,instanceId:`${e}-${s}`,position:t,currentHp:i.hp,controllerId:n,tileId:r}:null}const mc=4,Ps=Math.floor(mc/2);function gc(){return{x:Ps,y:Ps}}function qi(e=Math.random){return Math.floor(e()*20)+1}function yc(e,t,n=Math.random){const r=qi(n),s=r+e.attackBonus,i=r===20||s>=t,a=r===20;return{roll:r,attackBonus:e.attackBonus,total:s,targetAC:t,isHit:i,damage:i?e.damage:0,isCritical:a}}function hr(e,t){const n=Math.abs(e.x-t.x),r=Math.abs(e.y-t.y);return n<=1&&r<=1&&(n>0||r>0)}function wc(e){return jr(e)?.ac}function xc(e,t){const n=t.tiles.find(s=>s.id===e.tileId);if(!n)return null;const r=dn(n);return{x:r.minX+e.position.x,y:r.minY+e.position.y}}function bc(e,t,n,r){return r?rn(e,r)?t.filter(i=>{const a=xc(i,r);return a?hr(e,a):!1}):[]:t.filter(i=>i.tileId===n&&hr(e,i.position))}function Rn(e,t){const n=t.tiles.find(s=>s.id===e.tileId);if(!n)return null;const r=dn(n);return{x:r.minX+e.position.x,y:r.minY+e.position.y}}function As(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function kc(e,t,n,r){const s=Rn(e,r);if(!s)return null;const i=t.filter(u=>{const d=n[u.heroId];return d!==void 0&&d>0});if(i.length===0)return null;const a=new Set,l=[{pos:s,distance:0}];a.add(`${s.x},${s.y}`);let o=null;for(;l.length>0;){const u=l.shift();for(const p of i)p.position.x===u.pos.x&&p.position.y===u.pos.y&&(!o||u.distance<o.distance)&&(o={hero:p,distance:u.distance});if(o&&o.distance<u.distance)break;const d=Or(u.pos,r);for(const p of d){const _=`${p.x},${p.y}`;a.has(_)||(a.add(_),l.push({pos:p,distance:u.distance+1}))}}return o}function Tc(e,t,n,r){const s=Rn(e,r);if(!s)return null;const i=t.filter(a=>{const l=n[a.heroId];return l!==void 0&&l>0});for(const a of i)if(hr(s,a.position))return a;return null}function Ic(e,t,n,r,s){const i=Rn(e,s);if(!i)return null;const l=Or(i,s).filter(d=>{if(n.some(_=>_.position.x===d.x&&_.position.y===d.y))return!1;for(const _ of r){if(_.instanceId===e.instanceId)continue;const m=Rn(_,s);if(m&&m.x===d.x&&m.y===d.y)return!1}return!0});if(l.length===0)return null;let o=l[0],u=As(o,t);for(const d of l){const p=As(d,t);p<u&&(u=p,o=d)}return o}function Ec(e,t,n=Math.random){const r=Fl[e];if(!r)return{roll:1,attackBonus:0,total:1,targetAC:t,isHit:!1,damage:0,isCritical:!1};const s=qi(n),i=s+r.attackBonus,a=s===20||i>=t,l=s===20;return{roll:s,attackBonus:r.attackBonus,total:i,targetAC:t,isHit:a,damage:a?r.damage:0,isCritical:l}}function Mc(e,t,n,r,s,i,a=Math.random){const l=Tc(e,t,n,i);if(l){const d=r[l.heroId]??10,p=Ec(e.monsterId,d,a);return{type:"attack",targetId:l.heroId,result:p}}const o=kc(e,t,n,i);if(!o)return{type:"none"};const u=Ic(e,o.hero.position,t,s,i);return u?{type:"move",destination:u}:{type:"none"}}function Sc(e,t,n){const r=n.tiles.find(i=>i.id===t);if(!r)return null;const s=dn(r);return{x:e.x-s.minX,y:e.y-s.minY}}function Pc(e,t){return rn(e,t)?.id??null}const pr={currentHeroIndex:0,currentPhase:"hero-phase",turnNumber:1},Tn={actionsTaken:[],canMove:!0,canAttack:!0},_r={monstersDefeated:0,monstersToDefeat:2,objective:"Defeat 2 monsters"},mr={xp:0,healingSurges:2},Ac={currentScreen:"character-select",heroTokens:[],turnState:{...pr},validMoveSquares:[],showingMovement:!1,dungeon:vr(),monsterDeck:{drawPile:[],discardPile:[]},monsters:[],monsterInstanceCounter:0,recentlySpawnedMonsterId:null,attackResult:null,attackTargetId:null,heroHp:[],monsterAttackResult:null,monsterAttackTargetId:null,monsterAttackerId:null,villainPhaseMonsterIndex:0,monsterMoveActionId:null,heroTurnActions:{...Tn},scenario:{..._r},partyResources:{...mr},defeatedMonsterXp:null,defeatedMonsterName:null};function Ds(e,t){const n=[...e.actionsTaken,t],r=n.filter(l=>l==="move").length,s=n.filter(l=>l==="attack").length,i=s===0,a=r<2&&!(r===1&&s===1);return{actionsTaken:n,canMove:a,canAttack:i}}function Dc(e){const{actionsTaken:t}=e,n=t.filter(s=>s==="move").length,r=t.filter(s=>s==="attack").length;return n>=1&&r>=1||n>=2}function Cc(e){let t=e;return()=>(t=t*1103515245+12345&2147483647,t/2147483647)}function Hc(e,t=Math.random){const n=[...e];for(let r=n.length-1;r>0;r--){const s=Math.floor(t()*(r+1));[n[r],n[s]]=[n[s],n[r]]}return n}const Bi=Oi({name:"game",initialState:Ac,reducers:{startGame:(e,t)=>{const{heroIds:n,positions:r,seed:s}=t.payload;if(n.length===0||n.length>5)return;const i=s??Date.now();e.randomSeed=i;let a;const l=Cc(i);r?a=r:a=Hc(ql,l).slice(0,5),e.heroTokens=n.map((u,d)=>({heroId:u,position:a[d]})),e.turnState={...pr},e.validMoveSquares=[],e.showingMovement=!1;const o=vr();o.tileDeck=uc([...Bl],l),e.dungeon=o,e.monsterDeck=vc(l),e.monsters=[],e.monsterInstanceCounter=0,e.recentlySpawnedMonsterId=null,e.attackResult=null,e.attackTargetId=null,e.heroHp=n.map(u=>{const d=nn.find(p=>p.id===u);return{heroId:u,currentHp:d?.hp??8,maxHp:d?.maxHp??8}}),e.monsterAttackResult=null,e.monsterAttackTargetId=null,e.monsterAttackerId=null,e.villainPhaseMonsterIndex=0,e.heroTurnActions={...Tn},e.scenario={..._r},e.partyResources={...mr},e.defeatedMonsterXp=null,e.defeatedMonsterName=null,e.currentScreen="game-board"},setHeroPosition:(e,t)=>{const n=e.heroTokens.find(r=>r.heroId===t.payload.heroId);n&&(n.position=t.payload.position)},showMovement:(e,t)=>{if(e.turnState.currentPhase!=="hero-phase"||!e.heroTurnActions.canMove)return;const{heroId:n,speed:r}=t.payload,s=e.heroTokens.find(i=>i.heroId===n);s&&(e.validMoveSquares=ec(s.position,r,e.heroTokens,n,e.dungeon),e.showingMovement=!0)},hideMovement:e=>{e.validMoveSquares=[],e.showingMovement=!1},moveHero:(e,t)=>{const{heroId:n,position:r}=t.payload;if(e.turnState.currentPhase!=="hero-phase"||!e.heroTurnActions.canMove||!tc(r,e.validMoveSquares))return;const s=e.heroTokens.find(i=>i.heroId===n);s&&(s.position=r,e.validMoveSquares=[],e.showingMovement=!1,e.heroTurnActions=Ds(e.heroTurnActions,"move"))},resetGame:e=>{e.currentScreen="character-select",e.heroTokens=[],e.turnState={...pr},e.randomSeed=void 0,e.validMoveSquares=[],e.showingMovement=!1,e.dungeon=vr(),e.monsterDeck={drawPile:[],discardPile:[]},e.monsters=[],e.monsterInstanceCounter=0,e.recentlySpawnedMonsterId=null,e.attackResult=null,e.attackTargetId=null,e.heroHp=[],e.monsterAttackResult=null,e.monsterAttackTargetId=null,e.monsterAttackerId=null,e.villainPhaseMonsterIndex=0,e.monsterMoveActionId=null,e.heroTurnActions={...Tn},e.scenario={..._r},e.partyResources={...mr},e.defeatedMonsterXp=null,e.defeatedMonsterName=null},endHeroPhase:e=>{if(e.turnState.currentPhase!=="hero-phase")return;e.recentlySpawnedMonsterId=null;const t=e.heroTokens[e.turnState.currentHeroIndex];if(!t)return;const n=sc(t,e.dungeon);if(n&&e.dungeon.tileDeck.length>0){const{drawnTile:r,remainingDeck:s}=dc(e.dungeon.tileDeck);if(r){const i=lc(n,r,e.dungeon);if(i){e.dungeon=fc(e.dungeon,n,i),e.dungeon.tileDeck=s;const{monster:a,deck:l}=hc(e.monsterDeck);if(a){const o=gc(),u=_c(a,o,t.heroId,i.id,e.monsterInstanceCounter);u&&(e.monsters.push(u),e.monsterInstanceCounter+=1,e.recentlySpawnedMonsterId=u.instanceId),e.monsterDeck=l}}}}e.turnState.currentPhase="exploration-phase"},endExplorationPhase:e=>{e.turnState.currentPhase==="exploration-phase"&&(e.turnState.currentPhase="villain-phase",e.villainPhaseMonsterIndex=0,e.monsterAttackResult=null,e.monsterAttackTargetId=null,e.monsterAttackerId=null,e.monsterMoveActionId=null)},endVillainPhase:e=>{e.turnState.currentPhase==="villain-phase"&&(e.villainPhaseMonsterIndex=0,e.monsterAttackResult=null,e.monsterAttackTargetId=null,e.monsterAttackerId=null,e.monsterMoveActionId=null,e.turnState.currentHeroIndex=(e.turnState.currentHeroIndex+1)%e.heroTokens.length,e.turnState.currentHeroIndex===0&&(e.turnState.turnNumber+=1),e.turnState.currentPhase="hero-phase",e.heroTurnActions={...Tn})},dismissMonsterCard:e=>{e.recentlySpawnedMonsterId=null},setAttackResult:(e,t)=>{if(e.turnState.currentPhase!=="hero-phase"||!e.heroTurnActions.canAttack)return;const{result:n,targetInstanceId:r}=t.payload;if(e.attackResult=n,e.attackTargetId=r,e.defeatedMonsterXp=null,e.defeatedMonsterName=null,n.isHit&&n.damage>0){const s=e.monsters.find(i=>i.instanceId===r);if(s&&(s.currentHp-=n.damage,s.currentHp<=0)){const i=jr(s.monsterId);i||console.warn(`Monster definition not found for ID: ${s.monsterId}`);const a=i?.xp??0;e.partyResources.xp+=a,e.defeatedMonsterXp=a,e.defeatedMonsterName=i?.name??s.monsterId,e.monsters=e.monsters.filter(l=>l.instanceId!==r),e.monsterDeck=pc(e.monsterDeck,s.monsterId),e.scenario.monstersDefeated+=1,e.scenario.monstersDefeated>=e.scenario.monstersToDefeat&&(e.currentScreen="victory")}}e.heroTurnActions=Ds(e.heroTurnActions,"attack")},dismissAttackResult:e=>{e.attackResult=null,e.attackTargetId=null},dismissDefeatNotification:e=>{e.defeatedMonsterXp=null,e.defeatedMonsterName=null},setMonsters:(e,t)=>{e.monsters=t.payload},activateNextMonster:(e,t)=>{if(e.turnState.currentPhase!=="villain-phase")return;const n=e.heroTokens[e.turnState.currentHeroIndex]?.heroId;if(!n)return;const r=e.monsters.filter(u=>u.controllerId===n);if(e.villainPhaseMonsterIndex>=r.length)return;const s=r[e.villainPhaseMonsterIndex];if(!s)return;const i={},a={};for(const u of e.heroHp)i[u.heroId]=u.currentHp;for(const u of e.heroTokens){const d=nn.find(p=>p.id===u.heroId);d&&(a[u.heroId]=d.ac)}const l=t.payload?.randomFn??Math.random,o=Mc(s,e.heroTokens,i,a,e.monsters,e.dungeon,l);if(o.type==="move"){const u=e.monsters.find(d=>d.instanceId===s.instanceId);if(u){const d=Pc(o.destination,e.dungeon);if(d){const p=Sc(o.destination,d,e.dungeon);p&&(u.position=p,u.tileId=d)}}e.monsterMoveActionId=s.instanceId}else if(o.type==="attack"&&(e.monsterAttackResult=o.result,e.monsterAttackTargetId=o.targetId,e.monsterAttackerId=s.instanceId,o.result.isHit&&o.result.damage>0)){const u=e.heroHp.find(d=>d.heroId===o.targetId);u&&(u.currentHp=Math.max(0,u.currentHp-o.result.damage),e.heroHp.every(p=>p.currentHp<=0)&&(e.currentScreen="defeat"))}e.villainPhaseMonsterIndex+=1},dismissMonsterAttackResult:e=>{e.monsterAttackResult=null,e.monsterAttackTargetId=null,e.monsterAttackerId=null},dismissMonsterMoveAction:e=>{e.monsterMoveActionId=null},setHeroHp:(e,t)=>{const{heroId:n,hp:r}=t.payload,s=e.heroHp.find(i=>i.heroId===n);s&&(s.currentHp=Math.max(0,r))}}}),{startGame:Rc,setHeroPosition:qu,showMovement:Cs,hideMovement:zc,moveHero:Oc,resetGame:Fr,endHeroPhase:Hs,endExplorationPhase:Nc,endVillainPhase:Rs,dismissMonsterCard:jc,setAttackResult:Fc,dismissAttackResult:Lc,dismissDefeatNotification:qc,setMonsters:Bu,activateNextMonster:Bc,dismissMonsterAttackResult:Uc,dismissMonsterMoveAction:Xc,setHeroHp:Uu}=Bi.actions,Gc=Bi.reducer,j=Ml({reducer:{heroes:Yl,game:Gc}});typeof window<"u"&&(window.__REDUX_STORE__=j);function Oe(e){const t="/Ashardalon/",n=e.startsWith("/")?e.slice(1):e;return(t.endsWith("/")?t:t+"/")+n}var Yc=Y('<button><img class="hero-image svelte-1rwnzlz"/> <div class="hero-info svelte-1rwnzlz"><span class="hero-name svelte-1rwnzlz" data-testid="hero-name"> </span> <span class="hero-class svelte-1rwnzlz"> </span></div></button>'),Wc=Y('<button><img class="hero-image svelte-1rwnzlz"/> <div class="hero-info svelte-1rwnzlz"><span class="hero-name svelte-1rwnzlz" data-testid="hero-name"> </span> <span class="hero-class svelte-1rwnzlz"> </span></div></button>'),Vc=Y('<button><img class="hero-image svelte-1rwnzlz"/> <div class="hero-info svelte-1rwnzlz"><span class="hero-name svelte-1rwnzlz" data-testid="hero-name"> </span> <span class="hero-class svelte-1rwnzlz"> </span></div></button>'),Kc=Y('<button><img class="hero-image svelte-1rwnzlz"/> <div class="hero-info svelte-1rwnzlz"><span class="hero-name svelte-1rwnzlz" data-testid="hero-name"> </span> <span class="hero-class svelte-1rwnzlz"> </span></div></button>'),$c=Y('<div class="character-select svelte-1rwnzlz" data-testid="character-select"><div class="edge-zone edge-top svelte-1rwnzlz" data-testid="edge-top"><div class="hero-row svelte-1rwnzlz" data-testid="hero-grid"></div></div> <div class="middle-section svelte-1rwnzlz"><div class="edge-zone edge-left svelte-1rwnzlz" data-testid="edge-left"><div class="hero-column svelte-1rwnzlz"></div></div> <div class="center-zone svelte-1rwnzlz" data-testid="center-zone"><h1 class="svelte-1rwnzlz">Select Your Heroes</h1> <p class="instructions svelte-1rwnzlz">Choose 1-5 heroes for your adventure</p> <p class="instructions svelte-1rwnzlz">Tap a hero from your edge of the table</p> <div class="selection-info svelte-1rwnzlz"><span data-testid="selected-count"> </span></div> <button class="start-button svelte-1rwnzlz" data-testid="start-game-button">Start Adventure</button></div> <div class="edge-zone edge-right svelte-1rwnzlz" data-testid="edge-right"><div class="hero-column svelte-1rwnzlz"></div></div></div> <div class="edge-zone edge-bottom svelte-1rwnzlz" data-testid="edge-bottom"><div class="hero-row svelte-1rwnzlz"></div></div></div>');function Qc(e,t){Ee(t,!0);let n=O(se([])),r=O(se([])),s=O(se({}));nt(()=>{const I=j.subscribe(()=>{const E=j.getState();b(n,E.heroes.selectedHeroes,!0),b(r,E.heroes.availableHeroes,!0),b(s,E.heroes.heroEdgeMap,!0)}),x=j.getState();return b(n,x.heroes.selectedHeroes,!0),b(r,x.heroes.availableHeroes,!0),b(s,x.heroes.heroEdgeMap,!0),I});function i(I,x){return c(s)[I]===x}function a(I,x){const E=c(s)[I];return E!==void 0&&E!==x}function l(I,x){j.dispatch(Gl({heroId:I,edge:x}))}function o(){c(n).length>0&&j.dispatch(Rc({heroIds:c(n).map(I=>I.id)}))}function u(){return c(n).length>=1&&c(n).length<=5}var d=$c(),p=h(d),_=h(p);Ye(_,21,()=>c(r),I=>I.id,(I,x)=>{var E=Yc();let V;E.__click=()=>l(c(x).id,"top");var ee=h(E),le=y(ee,2),re=h(le),fe=h(re),xe=y(re,2),W=h(xe);J((ne,ae,ce)=>{V=qe(E,1,"hero-card svelte-1rwnzlz",null,V,ne),N(E,"data-testid",`hero-${c(x).id??""}-top`),E.disabled=ae,N(ee,"src",ce),N(ee,"alt",c(x).name),S(fe,c(x).name),S(W,c(x).heroClass)},[()=>({selected:i(c(x).id,"top"),unavailable:a(c(x).id,"top")}),()=>a(c(x).id,"top"),()=>Oe(c(x).imagePath)]),D(I,E)});var m=y(p,2),T=h(m),R=h(T);Ye(R,21,()=>c(r),I=>I.id,(I,x)=>{var E=Wc();let V;E.__click=()=>l(c(x).id,"left");var ee=h(E),le=y(ee,2),re=h(le),fe=h(re),xe=y(re,2),W=h(xe);J((ne,ae,ce)=>{V=qe(E,1,"hero-card svelte-1rwnzlz",null,V,ne),N(E,"data-testid",`hero-${c(x).id??""}-left`),E.disabled=ae,N(ee,"src",ce),N(ee,"alt",c(x).name),S(fe,c(x).name),S(W,c(x).heroClass)},[()=>({selected:i(c(x).id,"left"),unavailable:a(c(x).id,"left")}),()=>a(c(x).id,"left"),()=>Oe(c(x).imagePath)]),D(I,E)});var w=y(T,2),k=y(h(w),6),U=h(k),P=h(U),M=y(k,2);M.__click=o;var z=y(w,2),C=h(z);Ye(C,21,()=>c(r),I=>I.id,(I,x)=>{var E=Vc();let V;E.__click=()=>l(c(x).id,"right");var ee=h(E),le=y(ee,2),re=h(le),fe=h(re),xe=y(re,2),W=h(xe);J((ne,ae,ce)=>{V=qe(E,1,"hero-card svelte-1rwnzlz",null,V,ne),N(E,"data-testid",`hero-${c(x).id??""}-right`),E.disabled=ae,N(ee,"src",ce),N(ee,"alt",c(x).name),S(fe,c(x).name),S(W,c(x).heroClass)},[()=>({selected:i(c(x).id,"right"),unavailable:a(c(x).id,"right")}),()=>a(c(x).id,"right"),()=>Oe(c(x).imagePath)]),D(I,E)});var Q=y(m,2),F=h(Q);Ye(F,21,()=>c(r),I=>I.id,(I,x)=>{var E=Kc();let V;E.__click=()=>l(c(x).id,"bottom");var ee=h(E),le=y(ee,2),re=h(le),fe=h(re),xe=y(re,2),W=h(xe);J((ne,ae,ce)=>{V=qe(E,1,"hero-card svelte-1rwnzlz",null,V,ne),N(E,"data-testid",`hero-${c(x).id??""}`),E.disabled=ae,N(ee,"src",ce),N(ee,"alt",c(x).name),S(fe,c(x).name),S(W,c(x).heroClass)},[()=>({selected:i(c(x).id,"bottom"),unavailable:a(c(x).id,"bottom")}),()=>a(c(x).id,"bottom"),()=>Oe(c(x).imagePath)]),D(I,E)}),J(I=>{S(P,`${c(n).length??""} heroes selected`),M.disabled=I},[()=>!u()]),D(e,d),Me()}$e(["click"]);var Zc=Y('<button class="move-square svelte-ehd1hj" data-testid="move-square"><span class="sr-only svelte-ehd1hj"> </span></button>'),Jc=Y('<div class="movement-overlay svelte-ehd1hj" data-testid="movement-overlay"></div>');function eu(e,t){Ee(t,!0);function n(i){const a=t.tileOffsetX+i.x*t.cellSize,l=t.tileOffsetY+i.y*t.cellSize;return`left: ${a}px; top: ${l}px; width: ${t.cellSize}px; height: ${t.cellSize}px;`}function r(i,a){i.stopPropagation(),t.onSquareClick(a)}var s=Jc();Ye(s,21,()=>t.validMoveSquares,i=>`${i.x},${i.y}`,(i,a)=>{var l=Zc();l.__click=d=>r(d,c(a));var o=h(l),u=h(o);J(d=>{N(l,"data-position-x",c(a).x),N(l,"data-position-y",c(a).y),ft(l,d),S(u,`Move to (${c(a).x??""}, ${c(a).y??""})`)},[()=>n(c(a))]),D(i,l)}),D(e,s),Me()}$e(["click"]);var tu=Y('<div class="tile-deck-counter svelte-9649r" data-testid="tile-deck-counter"><span class="deck-icon svelte-9649r">ð¦</span> <span class="deck-count svelte-9649r" data-testid="tile-deck-count"> </span> <span class="deck-label svelte-9649r">tiles</span></div>');function nu(e,t){var n=tu(),r=y(h(n),2),s=h(r);J(()=>S(s,t.tileCount)),D(e,n)}var ru=Y('<div class="unexplored-edge svelte-12eown4" data-testid="unexplored-edge"><span class="question-mark svelte-12eown4">?</span></div>');function su(e,t){Ee(t,!0);const r=(()=>{const l=t.cellSize*1.5,o=36;switch(t.direction){case"north":return{left:`${t.tileWidth/2-l/2}px`,top:`${o-8/2}px`,width:`${l}px`,height:"8px"};case"south":return{left:`${t.tileWidth/2-l/2}px`,bottom:`${o-8/2}px`,width:`${l}px`,height:"8px"};case"east":return{right:`${o-8/2}px`,top:`${t.tileHeight/2-l/2}px`,width:"8px",height:`${l}px`};case"west":return{left:`${o-8/2}px`,top:`${t.tileHeight/2-l/2}px`,width:"8px",height:`${l}px`}}})(),s=Object.entries(r).map(([a,l])=>`${a}: ${l}`).join("; ");var i=ru();J(()=>{N(i,"data-direction",t.direction),ft(i,s)}),D(e,i),Me()}var iu=Y('<div class="monster-token svelte-1g5ysl" data-testid="monster-token"><img class="token-image svelte-1g5ysl"/> <span class="token-label svelte-1g5ysl"> </span></div>');function au(e,t){Ee(t,!0);const n=X(()=>un.find(l=>l.id===t.monster.monsterId)),r=X(()=>()=>{const l=t.cellSize/2,o=t.tilePixelOffset.x+t.tileOffsetX+t.monster.position.x*t.cellSize+l,u=t.tilePixelOffset.y+t.tileOffsetY+t.monster.position.y*t.cellSize+l;return`left: ${o}px; top: ${u}px;`});var s=pe(),i=he(s);{var a=l=>{var o=iu(),u=h(o),d=y(u,2),p=h(d);J((_,m)=>{N(o,"data-monster-id",t.monster.instanceId),ft(o,_),N(u,"src",m),N(u,"alt",c(n).name),S(p,c(n).name)},[()=>c(r)(),()=>Oe(c(n).imagePath)]),D(l,o)};$(i,l=>{c(n)&&l(a)})}D(e,s),Me()}var ou=Y('<div class="monster-card-overlay svelte-at5lsg" role="dialog" aria-modal="true" aria-label="Monster spawned" tabindex="0" data-testid="monster-card-overlay"><div class="monster-card svelte-at5lsg" role="article" data-testid="monster-card"><div class="card-header svelte-at5lsg"><h3 class="monster-name svelte-at5lsg" data-testid="monster-name"> </h3> <button class="dismiss-button svelte-at5lsg" aria-label="Dismiss monster card" data-testid="dismiss-monster-card">â</button></div> <div class="card-image svelte-at5lsg"><img class="monster-image svelte-at5lsg"/></div> <div class="card-stats svelte-at5lsg"><div class="stat svelte-at5lsg"><span class="stat-label svelte-at5lsg">AC</span> <span class="stat-value svelte-at5lsg" data-testid="monster-ac"> </span></div> <div class="stat svelte-at5lsg"><span class="stat-label svelte-at5lsg">HP</span> <span class="stat-value svelte-at5lsg" data-testid="monster-hp"> </span></div> <div class="stat svelte-at5lsg"><span class="stat-label svelte-at5lsg">XP</span> <span class="stat-value svelte-at5lsg" data-testid="monster-xp"> </span></div></div> <p class="card-hint svelte-at5lsg">Click anywhere to dismiss</p></div></div>');function lu(e,t){Ee(t,!0);const n=X(()=>un.find(o=>o.id===t.monsterId));function r(){t.onDismiss&&t.onDismiss()}function s(o){(o.key==="Escape"||o.key==="Enter"||o.key===" ")&&(o.preventDefault(),r())}var i=pe(),a=he(i);{var l=o=>{var u=ou();u.__click=r,u.__keydown=s;var d=h(u);d.__click=E=>E.stopPropagation(),d.__keydown=E=>E.stopPropagation();var p=h(d),_=h(p),m=h(_),T=y(_,2);T.__click=r;var R=y(p,2),w=h(R),k=y(R,2),U=h(k),P=y(h(U),2),M=h(P),z=y(U,2),C=y(h(z),2),Q=h(C),F=y(z,2),I=y(h(F),2),x=h(I);J(E=>{S(m,c(n).name),N(w,"src",E),N(w,"alt",c(n).name),S(M,c(n).ac),S(Q,c(n).hp),S(x,c(n).xp)},[()=>Oe(c(n).imagePath)]),D(o,u)};$(a,o=>{c(n)&&o(l)})}D(e,i),Me()}$e(["click","keydown"]);var cu=Y('<button class="attack-button svelte-1ea4ae8" data-testid="attack-button"> </button>'),uu=Y('<div class="attack-panel svelte-1ea4ae8" data-testid="attack-panel"><div class="attack-header svelte-1ea4ae8"><span class="attack-label svelte-1ea4ae8"> </span> <span class="attack-stats svelte-1ea4ae8"> </span></div> <div class="attack-targets svelte-1ea4ae8"></div></div>');function du(e,t){Ee(t,!0);function n(l){return un.find(u=>u.id===l)?.name||"Unknown"}function r(l){t.onAttack(l)}var s=pe(),i=he(s);{var a=l=>{var o=uu(),u=h(o),d=h(u),p=h(d),_=y(d,2),m=h(_),T=y(u,2);Ye(T,21,()=>t.adjacentMonsters,R=>R.instanceId,(R,w)=>{var k=cu();k.__click=()=>r(c(w).instanceId);var U=h(k);J((P,M)=>{N(k,"data-target-id",c(w).instanceId),N(k,"aria-label",`Attack ${P??""}`),S(U,`Attack ${M??""}`)},[()=>n(c(w).monsterId),()=>n(c(w).monsterId)]),D(R,k)}),J(()=>{S(p,`Attack with ${t.heroAttack.name??""}`),S(m,`+${t.heroAttack.attackBonus??""} / ${t.heroAttack.damage??""} dmg`)}),D(l,o)};$(i,l=>{t.adjacentMonsters.length>0&&l(a)})}D(e,s),Me()}$e(["click"]);var fu=Y('<span class="result-text critical svelte-1jt2qdd" data-testid="result-text">âï¸ CRITICAL HIT!</span>'),vu=Y('<span class="result-text hit svelte-1jt2qdd" data-testid="result-text">â HIT!</span>'),hu=Y('<span class="result-text miss svelte-1jt2qdd" data-testid="result-text">â MISS!</span>'),pu=Y('<div class="damage-info svelte-1jt2qdd" data-testid="damage-info"><span class="damage-value svelte-1jt2qdd"> </span> <span class="damage-label svelte-1jt2qdd"> </span></div>'),_u=Y('<div class="combat-result-overlay svelte-1jt2qdd" role="dialog" aria-modal="true" aria-label="Combat result" tabindex="0" data-testid="combat-result-overlay"><div role="document" data-testid="combat-result"><div class="result-header svelte-1jt2qdd"><h3 class="attacker-info svelte-1jt2qdd" data-testid="attacker-info"> </h3> <button class="dismiss-button svelte-1jt2qdd" aria-label="Dismiss combat result" data-testid="dismiss-combat-result">â</button></div> <div class="dice-roll-section svelte-1jt2qdd"><div class="dice-container svelte-1jt2qdd"><span class="d20-icon svelte-1jt2qdd" aria-label="D20 die">D20</span> <span class="roll-value svelte-1jt2qdd" data-testid="roll-value"> </span></div> <div class="roll-breakdown svelte-1jt2qdd"><div class="breakdown-row svelte-1jt2qdd"><span class="breakdown-label svelte-1jt2qdd">Roll:</span> <span class="breakdown-value svelte-1jt2qdd" data-testid="dice-roll"> </span></div> <div class="breakdown-row svelte-1jt2qdd"><span class="breakdown-label svelte-1jt2qdd">+ Bonus:</span> <span class="breakdown-value svelte-1jt2qdd" data-testid="attack-bonus"> </span></div> <div class="breakdown-divider svelte-1jt2qdd"></div> <div class="breakdown-row total svelte-1jt2qdd"><span class="breakdown-label svelte-1jt2qdd">Total:</span> <span class="breakdown-value svelte-1jt2qdd" data-testid="attack-total"> </span></div> <div class="breakdown-row target svelte-1jt2qdd"><span class="breakdown-label svelte-1jt2qdd">vs AC:</span> <span class="breakdown-value svelte-1jt2qdd" data-testid="target-ac"> </span></div></div></div> <div class="result-section svelte-1jt2qdd"><!> <!></div> <p class="dismiss-hint svelte-1jt2qdd">Click anywhere to dismiss</p></div></div>');function zs(e,t){Ee(t,!0);function n(){t.onDismiss&&t.onDismiss()}function r(W){(W.key==="Escape"||W.key==="Enter"||W.key===" ")&&(W.preventDefault(),n())}var s=_u();s.__click=n,s.__keydown=r;var i=h(s);let a;i.__click=W=>W.stopPropagation(),i.__keydown=W=>W.stopPropagation();var l=h(i),o=h(l),u=h(o),d=y(o,2);d.__click=n;var p=y(l,2),_=h(p),m=y(h(_),2),T=h(m),R=y(_,2),w=h(R),k=y(h(w),2),U=h(k),P=y(w,2),M=y(h(P),2),z=h(M),C=y(P,4),Q=y(h(C),2),F=h(Q),I=y(C,2),x=y(h(I),2),E=h(x),V=y(p,2),ee=h(V);{var le=W=>{var ne=fu();D(W,ne)},re=W=>{var ne=pe(),ae=he(ne);{var ce=Se=>{var ut=vu();D(Se,ut)},gt=Se=>{var ut=hu();D(Se,ut)};$(ae,Se=>{t.result.isHit?Se(ce):Se(gt,!1)},!0)}D(W,ne)};$(ee,W=>{t.result.isCritical?W(le):W(re,!1)})}var fe=y(ee,2);{var xe=W=>{var ne=pu(),ae=h(ne),ce=h(ae),gt=y(ae,2),Se=h(gt);J(()=>{S(ce,t.result.damage),S(Se,`damage to ${t.targetName??""}`)}),D(W,ne)};$(fe,W=>{t.result.isHit&&W(xe)})}J(()=>{a=qe(i,1,"combat-result svelte-1jt2qdd",null,a,{hit:t.result.isHit,miss:!t.result.isHit,critical:t.result.isCritical}),S(u,`${t.attackerName??""} attacks with ${t.attackName??""}!`),S(T,t.result.roll),S(U,t.result.roll),S(z,t.result.attackBonus),S(F,t.result.total),S(E,t.result.targetAC)}),D(e,s),Me()}$e(["click","keydown"]);var mu=Y('<div class="monster-move-overlay svelte-18np0et" role="dialog" aria-modal="true" aria-label="Monster move result" tabindex="0" data-testid="monster-move-overlay"><div class="monster-move-card svelte-18np0et" role="document" data-testid="monster-move-card"><div class="move-header svelte-18np0et"><h3 class="monster-name svelte-18np0et" data-testid="monster-name"> </h3> <button class="dismiss-button svelte-18np0et" aria-label="Dismiss monster move result" data-testid="dismiss-monster-move">â</button></div> <div class="move-content svelte-18np0et"><span class="move-icon svelte-18np0et">ð</span> <p class="move-text svelte-18np0et" data-testid="move-text">Moved but could not attack</p></div> <p class="dismiss-hint svelte-18np0et">Click anywhere to continue</p></div></div>');function gu(e,t){Ee(t,!0);function n(){t.onDismiss&&t.onDismiss()}function r(d){(d.key==="Escape"||d.key==="Enter"||d.key===" ")&&(d.preventDefault(),n())}var s=mu();s.__click=n,s.__keydown=r;var i=h(s);i.__click=d=>d.stopPropagation(),i.__keydown=d=>d.stopPropagation();var a=h(i),l=h(a),o=h(l),u=y(l,2);u.__click=n,J(()=>S(o,t.monsterName)),D(e,s),Me()}$e(["click","keydown"]);var yu=Y('<div class="xp-counter svelte-1ymh8ps" data-testid="xp-counter"><span class="xp-icon svelte-1ymh8ps" aria-label="Experience Points">â­</span> <span class="xp-label svelte-1ymh8ps">XP:</span> <span class="xp-value svelte-1ymh8ps" data-testid="xp-value"> </span></div>');function wu(e,t){var n=yu(),r=y(h(n),4),s=h(r);J(()=>S(s,t.xp)),D(e,n)}var xu=Y('<div class="defeat-overlay svelte-1h38uhv" role="dialog" aria-modal="true" aria-label="Monster defeated notification" tabindex="0" data-testid="defeat-notification-overlay"><div class="defeat-notification svelte-1h38uhv" role="dialog" aria-labelledby="defeat-title" tabindex="-1" data-testid="defeat-notification"><div class="defeat-header svelte-1h38uhv"><span class="defeat-icon svelte-1h38uhv">ð</span> <h3 class="defeat-title svelte-1h38uhv" id="defeat-title" data-testid="defeat-title"> </h3> <button class="dismiss-button svelte-1h38uhv" aria-label="Dismiss notification" data-testid="dismiss-defeat-notification">â</button></div> <div class="xp-gain-section svelte-1h38uhv" data-testid="xp-gain-section"><span class="xp-icon svelte-1h38uhv">â­</span> <span class="xp-amount svelte-1h38uhv" data-testid="xp-amount"> </span></div> <p class="dismiss-hint svelte-1h38uhv">Click anywhere to dismiss</p></div></div>');function bu(e,t){Ee(t,!0);function n(){t.onDismiss&&t.onDismiss()}function r(m){(m.key==="Escape"||m.key==="Enter"||m.key===" ")&&(m.preventDefault(),n())}var s=xu();s.__click=n,s.__keydown=r;var i=h(s);i.__click=m=>m.stopPropagation(),i.__keydown=m=>m.stopPropagation();var a=h(i),l=y(h(a),2),o=h(l),u=y(l,2);u.__click=n;var d=y(a,2),p=y(h(d),2),_=h(p);J(()=>{S(o,`${t.monsterName??""} Defeated!`),S(_,`+${t.xpGained??""} XP`)}),D(e,s),Me()}$e(["click","keydown"]);var ku=Y('<div class="player-info svelte-8w11tm" data-testid="turn-indicator"><img class="player-avatar svelte-8w11tm"/> <div class="turn-details svelte-8w11tm"><span class="player-name svelte-8w11tm"> </span> <span class="turn-phase svelte-8w11tm" data-testid="turn-phase"> </span> <span class="turn-number svelte-8w11tm"> </span> <span class="hero-hp svelte-8w11tm" data-testid="hero-hp"> </span></div></div>'),Tu=Y('<div class="player-info svelte-8w11tm"><img class="player-avatar svelte-8w11tm"/> <div class="turn-details svelte-8w11tm"><span class="player-name svelte-8w11tm"> </span> <span class="turn-phase svelte-8w11tm"> </span> <span class="turn-number svelte-8w11tm"> </span> <span class="hero-hp svelte-8w11tm"> </span></div></div>'),Iu=Y('<div><img class="tile-image svelte-8w11tm"/> <!></div>'),Eu=Y('<div class="movement-overlay-container svelte-8w11tm"><!></div>'),Mu=Y('<div data-testid="hero-token"><img class="token-image svelte-8w11tm"/> <span class="token-label svelte-8w11tm"> </span></div>'),Su=Y('<div class="player-info svelte-8w11tm"><img class="player-avatar svelte-8w11tm"/> <div class="turn-details svelte-8w11tm"><span class="player-name svelte-8w11tm"> </span> <span class="turn-phase svelte-8w11tm"> </span> <span class="turn-number svelte-8w11tm"> </span> <span class="hero-hp svelte-8w11tm"> </span></div></div>'),Pu=Y('<div class="player-info svelte-8w11tm" data-testid="turn-indicator"><img class="player-avatar svelte-8w11tm"/> <div class="turn-details svelte-8w11tm"><span class="player-name svelte-8w11tm"> </span> <span class="turn-phase svelte-8w11tm" data-testid="turn-phase"> </span> <span class="turn-number svelte-8w11tm"> </span> <span class="hero-hp svelte-8w11tm" data-testid="hero-hp"> </span></div></div>'),Au=Y('<div class="game-board svelte-8w11tm" data-testid="game-board"><div data-testid="player-zone-top"><!></div> <div class="middle-section svelte-8w11tm"><div data-testid="player-zone-left"><!></div> <div class="board-container svelte-8w11tm"><div class="dungeon-map svelte-8w11tm" data-testid="dungeon-map" role="button" tabindex="0"><!> <!> <!> <!></div> <div class="board-controls svelte-8w11tm"><div class="objective-display svelte-8w11tm" data-testid="objective-display"><span class="objective-label svelte-8w11tm">ð¯ Objective:</span> <span class="objective-text svelte-8w11tm"> </span> <span class="objective-progress svelte-8w11tm" data-testid="objective-progress"> </span></div> <!> <!> <button class="end-phase-button svelte-8w11tm" data-testid="end-phase-button"> </button> <button class="reset-button svelte-8w11tm" data-testid="reset-button">â© Return to Character Select</button> <!></div></div> <div data-testid="player-zone-right"><!></div></div> <div data-testid="player-zone-bottom"><!></div> <!> <!> <!> <!> <!></div>');function Du(e,t){Ee(t,!0);const n=140,r=4,s=8,i=4,a=n*r,l=n*s,o=n*i,u=140,d=.15,p=1,_=36,m=36,T=632,R=632,w=1195,k=3,U=0;let P=O(se([])),M=O(se([])),z=O(se({})),C=O(se({currentHeroIndex:0,currentPhase:"hero-phase",turnNumber:1})),Q=O(se([])),F=O(!1),I=O(se({tiles:[],unexploredEdges:[],tileDeck:[]})),x=O(se([])),E=O(null),V=O(null),ee=O(null),le=O(se([])),re=O(null),fe=O(null),xe=O(null),W=O(0),ne=O(null),ae=O(se({actionsTaken:[],canMove:!0,canAttack:!0})),ce=O(se({monstersDefeated:0,monstersToDefeat:2,objective:"Defeat 2 monsters"})),gt=O(se({xp:0,healingSurges:2})),Se=O(null),ut=O(null),Gt=O(null),Lr=O(1),yt=X(()=>Ui(c(I)));nt(()=>{const v=j.subscribe(()=>{const g=j.getState();b(P,g.game.heroTokens,!0),b(M,g.heroes.selectedHeroes,!0),b(z,g.heroes.heroEdgeMap,!0),b(C,g.game.turnState,!0),b(Q,g.game.validMoveSquares,!0),b(F,g.game.showingMovement,!0),b(I,g.game.dungeon,!0),b(x,g.game.monsters,!0),b(E,g.game.recentlySpawnedMonsterId,!0),b(V,g.game.attackResult,!0),b(ee,g.game.attackTargetId,!0),b(le,g.game.heroHp,!0),b(re,g.game.monsterAttackResult,!0),b(fe,g.game.monsterAttackTargetId,!0),b(xe,g.game.monsterAttackerId,!0),b(W,g.game.villainPhaseMonsterIndex,!0),b(ne,g.game.monsterMoveActionId,!0),b(ae,g.game.heroTurnActions,!0),b(ce,g.game.scenario,!0),b(gt,g.game.partyResources,!0),b(Se,g.game.defeatedMonsterXp,!0),b(ut,g.game.defeatedMonsterName,!0)}),f=j.getState();return b(P,f.game.heroTokens,!0),b(M,f.heroes.selectedHeroes,!0),b(z,f.heroes.heroEdgeMap,!0),b(C,f.game.turnState,!0),b(Q,f.game.validMoveSquares,!0),b(F,f.game.showingMovement,!0),b(I,f.game.dungeon,!0),b(x,f.game.monsters,!0),b(E,f.game.recentlySpawnedMonsterId,!0),b(V,f.game.attackResult,!0),b(ee,f.game.attackTargetId,!0),b(le,f.game.heroHp,!0),b(re,f.game.monsterAttackResult,!0),b(fe,f.game.monsterAttackTargetId,!0),b(xe,f.game.monsterAttackerId,!0),b(W,f.game.villainPhaseMonsterIndex,!0),b(ne,f.game.monsterMoveActionId,!0),b(ae,f.game.heroTurnActions,!0),b(ce,f.game.scenario,!0),b(gt,f.game.partyResources,!0),b(Se,f.game.defeatedMonsterXp,!0),b(ut,f.game.defeatedMonsterName,!0),v}),nt(()=>{c(C).currentPhase==="hero-phase"&&Dc(c(ae))&&j.dispatch(Hs())}),nt(()=>{if(c(C).currentPhase!=="hero-phase"||!c(ae).canMove||c(F))return;const v=ge();if(!v)return;const f=wt(v);f&&j.dispatch(Cs({heroId:v,speed:f.speed}))}),nt(()=>{if(c(C).currentPhase!=="villain-phase"||c(re)!==null||c(ne)!==null)return;const v=Gi();if(c(W)>=v.length){j.dispatch(Rs());return}j.dispatch(Bc({}))});function Ui(v){if(v.tiles.length===0)return{minCol:0,maxCol:0,minRow:0,maxRow:0,width:T,height:w};let f=1/0,g=-1/0,A=1/0,H=-1/0;for(const oe of v.tiles)f=Math.min(f,oe.position.col),g=Math.max(g,oe.position.col),A=Math.min(A,oe.position.row),H=Math.max(H,oe.position.row);const q=g-f+1,L=T+(q-1)*a,K=Math.max(0,-A),B=Math.max(0,H),ie=w+K*o+B*o;return{minCol:f,maxCol:g,minRow:A,maxRow:H,width:Math.max(L,T),height:Math.max(ie,w)}}function fn(v,f){const g=(v.position.col-f.minCol)*a;let A=0;return v.position.row<0?A=(v.position.row-f.minRow)*o:v.position.row===0?A=Math.max(0,-f.minRow)*o-k:A=Math.max(0,-f.minRow)*o+l+(v.position.row-1)*o-k-U,{x:g,y:A}}function Xi(v){return v.tileType==="start"?"assets/StartTile.png":Ni.find(g=>g.tileType===v.tileType)?.imagePath||"assets/Tile_Black_x2_01.png"}function qr(v){return v.tileType==="start"?{width:T,height:w}:{width:T,height:R}}nt(()=>{if(c(Gt)){const v=()=>{const g=c(Gt);if(!g)return;const A=g.clientWidth-u,H=g.clientHeight-u,q=c(yt),L=A/q.width,K=H/q.height,B=Math.min(L,K,p);b(Lr,Math.max(B,d),!0)};v();const f=new ResizeObserver(v);return f.observe(c(Gt)),()=>f.disconnect()}});function wt(v){return c(M).find(f=>f.id===v)}function ge(){return c(P)[c(C).currentHeroIndex]?.heroId}function vn(v){switch(v){case"hero-phase":return"Hero Phase";case"exploration-phase":return"Exploration Phase";case"villain-phase":return"Villain Phase"}}function hn(v){return c(le).find(g=>g.heroId===v)?.currentHp??0}function pn(v){return c(le).find(g=>g.heroId===v)?.maxHp??0}function Gi(){const v=ge();return v?c(x).filter(f=>f.controllerId===v):[]}function Yi(){j.dispatch(Fr())}function Wi(v,f){const g=n/2,A=f.x+_+v.x*n+g,H=f.y+m+v.y*n+g;return`left: ${A}px; top: ${H}px;`}function dt(){const v=ge();if(v&&c(z)[v])return c(z)[v];const f=c(C).currentHeroIndex%4;return["bottom","right","top","left"][f]}function Vi(v){const f=c(z)[v];if(!f)return 0;switch(f){case"bottom":return 0;case"top":return 180;case"left":return 90;case"right":return-90;default:return 0}}function Br(v){if(c(C).currentPhase!=="hero-phase")return;const f=ge();if(!f)return;const g=wt(f);g&&(c(F)?j.dispatch(zc()):j.dispatch(Cs({heroId:f,speed:g.speed})))}function Ki(v){const f=ge();f&&j.dispatch(Oc({heroId:f,position:v}))}function $i(v){(v.key==="Enter"||v.key===" ")&&(v.preventDefault(),Br())}function Qi(){switch(c(C).currentPhase){case"hero-phase":j.dispatch(Hs());break;case"exploration-phase":j.dispatch(Nc());break;case"villain-phase":j.dispatch(Rs());break}}function Zi(){switch(c(C).currentPhase){case"hero-phase":return"End Hero Phase";case"exploration-phase":return"End Exploration";case"villain-phase":return"End Villain Phase"}}function Ji(){j.dispatch(jc())}function ea(v){const f=c(I).tiles.find(g=>g.id===v);return f?fn(f,c(yt)):{x:0,y:0}}const Bn="start-tile";function ta(){const v=ge();if(!v)return Bn;const f=c(P).find(A=>A.heroId===v);return f?rn(f.position,c(I))?.id??Bn:Bn}function na(){const v=ge();if(!v)return[];const f=c(P).find(A=>A.heroId===v);if(!f)return[];const g=ta();return bc(f.position,c(x),g,c(I))}function Un(v){return nn.find(f=>f.id===v)}function ra(v){const f=ge();if(!f)return;const g=Un(f);if(!g)return;const A=c(x).find(L=>L.instanceId===v);if(!A)return;const H=wc(A.monsterId);if(H===void 0)return;const q=yc(g.attack,H);j.dispatch(Fc({result:q,targetInstanceId:v}))}function sa(){j.dispatch(Lc())}function Xn(v){return un.find(g=>g.id===v)?.name||"Monster"}function ia(){if(c(ee))return c(x).find(v=>v.instanceId===c(ee))}function aa(){j.dispatch(Uc())}function oa(){j.dispatch(Xc())}function la(){return c(fe)&&nn.find(f=>f.id===c(fe))?.name||"Hero"}function ca(){if(!c(xe))return"Monster";const v=c(x).find(f=>f.instanceId===c(xe));return v?Xn(v.monsterId):"Monster"}function ua(){if(!c(ne))return"Monster";const v=c(x).find(f=>f.instanceId===c(ne));return v?Xn(v.monsterId):"Monster"}function da(){j.dispatch(qc())}var Ur=Au(),Gn=h(Ur);let Xr;var fa=h(Gn);{var va=v=>{const f=X(ge),g=X(()=>c(f)?wt(c(f)):void 0);var A=pe(),H=he(A);{var q=L=>{var K=ku(),B=h(K),ie=y(B,2),oe=h(ie),Pe=h(oe),be=y(oe,2),Fe=h(be),Ae=y(be,2),Qe=h(Ae),Ze=y(Ae,2),Je=h(Ze);J((xt,bt,kt,Tt)=>{N(B,"src",xt),N(B,"alt",c(g).name),S(Pe,`${c(g).name??""}'s Turn`),S(Fe,bt),S(Qe,`Turn ${c(C).turnNumber??""}`),S(Je,`HP: ${kt??""}/${Tt??""}`)},[()=>Oe(c(g).imagePath),()=>vn(c(C).currentPhase),()=>hn(c(f)),()=>pn(c(f))]),D(L,K)};$(H,L=>{c(g)&&c(f)&&L(q)})}D(v,A)};$(fa,v=>{dt()==="top"&&v(va)})}var Gr=y(Gn,2),Yn=h(Gr);let Yr;var ha=h(Yn);{var pa=v=>{const f=X(ge),g=X(()=>c(f)?wt(c(f)):void 0);var A=pe(),H=he(A);{var q=L=>{var K=Tu(),B=h(K),ie=y(B,2),oe=h(ie),Pe=h(oe),be=y(oe,2),Fe=h(be),Ae=y(be,2),Qe=h(Ae),Ze=y(Ae,2),Je=h(Ze);J((xt,bt,kt,Tt)=>{N(B,"src",xt),N(B,"alt",c(g).name),S(Pe,`${c(g).name??""}'s Turn`),S(Fe,bt),S(Qe,`Turn ${c(C).turnNumber??""}`),S(Je,`HP: ${kt??""}/${Tt??""}`)},[()=>Oe(c(g).imagePath),()=>vn(c(C).currentPhase),()=>hn(c(f)),()=>pn(c(f))]),D(L,K)};$(H,L=>{c(g)&&c(f)&&L(q)})}D(v,A)};$(ha,v=>{dt()==="left"&&v(pa)})}var Wn=y(Yn,2),At=h(Wn);At.__click=Br,At.__keydown=$i;var Wr=h(At);Ye(Wr,17,()=>c(I).tiles,v=>v.id,(v,f)=>{const g=X(()=>fn(c(f),c(yt))),A=X(()=>qr(c(f)));var H=Iu();let q;var L=h(H),K=y(L,2);Ye(K,17,()=>c(I).unexploredEdges.filter(B=>B.tileId===c(f).id),B=>B.direction,(B,ie)=>{su(B,{get direction(){return c(ie).direction},cellSize:n,get tileWidth(){return c(A).width},get tileHeight(){return c(A).height}})}),J(B=>{q=qe(H,1,"placed-tile svelte-8w11tm",null,q,{"start-tile":c(f).tileType==="start"}),N(H,"data-testid",c(f).tileType==="start"?"start-tile":"dungeon-tile"),N(H,"data-tile-id",c(f).id),ft(H,`left: ${c(g).x??""}px; top: ${c(g).y??""}px; width: ${c(A).width??""}px; height: ${c(A).height??""}px;`),N(L,"src",B),N(L,"alt",c(f).tileType),ft(L,c(f).rotation!==0?`transform: rotate(${c(f).rotation}deg);`:"")},[()=>Oe(Xi(c(f)))]),D(v,H)});var Vr=y(Wr,2);{var _a=v=>{const f=X(()=>c(I).tiles.find(q=>q.tileType==="start"));var g=pe(),A=he(g);{var H=q=>{const L=X(()=>fn(c(f),c(yt))),K=X(()=>qr(c(f)));var B=Eu(),ie=h(B);eu(ie,{get validMoveSquares(){return c(Q)},tileOffsetX:_,tileOffsetY:m,cellSize:n,onSquareClick:Ki}),J(()=>ft(B,`left: ${c(L).x??""}px; top: ${c(L).y??""}px; width: ${c(K).width??""}px; height: ${c(K).height??""}px;`)),D(q,B)};$(A,q=>{c(f)&&q(H)})}D(v,g)};$(Vr,v=>{c(F)&&c(Q).length>0&&v(_a)})}var Kr=y(Vr,2);Ye(Kr,17,()=>c(P),v=>v.heroId,(v,f)=>{const g=X(()=>wt(c(f).heroId)),A=X(()=>c(f).heroId===ge()),H=X(()=>c(I).tiles.find(ie=>ie.tileType==="start")),q=X(()=>Vi(c(f).heroId));var L=pe(),K=he(L);{var B=ie=>{const oe=X(()=>fn(c(H),c(yt)));var Pe=Mu();let be;var Fe=h(Pe),Ae=y(Fe,2),Qe=h(Ae);J((Ze,Je)=>{be=qe(Pe,1,"hero-token svelte-8w11tm",null,be,{active:c(A)}),N(Pe,"data-hero-id",c(f).heroId),ft(Pe,`${Ze??""} --token-rotation: ${c(q)??""}deg;`),N(Fe,"src",Je),N(Fe,"alt",c(g).name),S(Qe,c(g).name)},[()=>Wi(c(f).position,c(oe)),()=>Oe(c(g).imagePath)]),D(ie,Pe)};$(K,ie=>{c(g)&&c(H)&&ie(B)})}D(v,L)});var ma=y(Kr,2);Ye(ma,17,()=>c(x),v=>v.instanceId,(v,f)=>{{let g=X(()=>ea(c(f).tileId));au(v,{get monster(){return c(f)},cellSize:n,tileOffsetX:_,tileOffsetY:m,get tilePixelOffset(){return c(g)}})}});var ga=y(At,2),$r=h(ga),Qr=y(h($r),2),ya=h(Qr),wa=y(Qr,2),xa=h(wa),Zr=y($r,2);wu(Zr,{get xp(){return c(gt).xp}});var Jr=y(Zr,2);nu(Jr,{get tileCount(){return c(I).tileDeck.length}});var Vn=y(Jr,2);Vn.__click=Qi;var ba=h(Vn),es=y(Vn,2);es.__click=Yi;var ka=y(es,2);{var Ta=v=>{const f=X(ge),g=X(()=>c(f)?Un(c(f)):void 0),A=X(na);var H=pe(),q=he(H);{var L=K=>{du(K,{get adjacentMonsters(){return c(A)},get heroAttack(){return c(g).attack},onAttack:ra})};$(q,K=>{c(g)&&c(A).length>0&&K(L)})}D(v,H)};$(ka,v=>{c(C).currentPhase==="hero-phase"&&c(ae).canAttack&&v(Ta)})}Qo(Wn,v=>b(Gt,v),()=>c(Gt));var ts=y(Wn,2);let ns;var Ia=h(ts);{var Ea=v=>{const f=X(ge),g=X(()=>c(f)?wt(c(f)):void 0);var A=pe(),H=he(A);{var q=L=>{var K=Su(),B=h(K),ie=y(B,2),oe=h(ie),Pe=h(oe),be=y(oe,2),Fe=h(be),Ae=y(be,2),Qe=h(Ae),Ze=y(Ae,2),Je=h(Ze);J((xt,bt,kt,Tt)=>{N(B,"src",xt),N(B,"alt",c(g).name),S(Pe,`${c(g).name??""}'s Turn`),S(Fe,bt),S(Qe,`Turn ${c(C).turnNumber??""}`),S(Je,`HP: ${kt??""}/${Tt??""}`)},[()=>Oe(c(g).imagePath),()=>vn(c(C).currentPhase),()=>hn(c(f)),()=>pn(c(f))]),D(L,K)};$(H,L=>{c(g)&&c(f)&&L(q)})}D(v,A)};$(Ia,v=>{dt()==="right"&&v(Ea)})}var Kn=y(Gr,2);let rs;var Ma=h(Kn);{var Sa=v=>{const f=X(ge),g=X(()=>c(f)?wt(c(f)):void 0);var A=pe(),H=he(A);{var q=L=>{var K=Pu(),B=h(K),ie=y(B,2),oe=h(ie),Pe=h(oe),be=y(oe,2),Fe=h(be),Ae=y(be,2),Qe=h(Ae),Ze=y(Ae,2),Je=h(Ze);J((xt,bt,kt,Tt)=>{N(B,"src",xt),N(B,"alt",c(g).name),S(Pe,`${c(g).name??""}'s Turn`),S(Fe,bt),S(Qe,`Turn ${c(C).turnNumber??""}`),S(Je,`HP: ${kt??""}/${Tt??""}`)},[()=>Oe(c(g).imagePath),()=>vn(c(C).currentPhase),()=>hn(c(f)),()=>pn(c(f))]),D(L,K)};$(H,L=>{c(g)&&c(f)&&L(q)})}D(v,A)};$(Ma,v=>{dt()==="bottom"&&v(Sa)})}var ss=y(Kn,2);{var Pa=v=>{const f=X(()=>c(x).find(q=>q.instanceId===c(E)));var g=pe(),A=he(g);{var H=q=>{lu(q,{get monsterId(){return c(f).monsterId},onDismiss:Ji})};$(A,q=>{c(f)&&q(H)})}D(v,g)};$(ss,v=>{c(E)&&v(Pa)})}var is=y(ss,2);{var Aa=v=>{const f=X(ge),g=X(()=>c(f)?Un(c(f)):void 0),A=X(ia);var H=pe(),q=he(H);{var L=K=>{{let B=X(()=>c(A)?Xn(c(A).monsterId):"Monster");zs(K,{get result(){return c(V)},get attackerName(){return c(g).name},get attackName(){return c(g).attack.name},get targetName(){return c(B)},onDismiss:sa})}};$(q,K=>{c(g)&&K(L)})}D(v,H)};$(is,v=>{c(V)&&v(Aa)})}var as=y(is,2);{var Da=v=>{{let f=X(ca),g=X(la);zs(v,{get result(){return c(re)},get attackerName(){return c(f)},attackName:"Attack",get targetName(){return c(g)},onDismiss:aa})}};$(as,v=>{c(re)&&v(Da)})}var os=y(as,2);{var Ca=v=>{{let f=X(ua);gu(v,{get monsterName(){return c(f)},onDismiss:oa})}};$(os,v=>{c(ne)&&v(Ca)})}var Ha=y(os,2);{var Ra=v=>{bu(v,{get monsterName(){return c(ut)},get xpGained(){return c(Se)},onDismiss:da})};$(Ha,v=>{c(Se)!==null&&c(ut)!==null&&v(Ra)})}J((v,f,g,A,H)=>{Xr=qe(Gn,1,"edge-zone edge-top svelte-8w11tm",null,Xr,v),Yr=qe(Yn,1,"edge-zone edge-left svelte-8w11tm",null,Yr,f),ft(At,`transform: scale(${c(Lr)??""}); width: ${c(yt).width??""}px; height: ${c(yt).height??""}px;`),N(At,"aria-label",c(F)?"Click to hide movement options":"Click to show movement options for current hero"),S(ya,c(ce).objective),S(xa,`${c(ce).monstersDefeated??""} / ${c(ce).monstersToDefeat??""} defeated`),S(ba,g),ns=qe(ts,1,"edge-zone edge-right svelte-8w11tm",null,ns,A),rs=qe(Kn,1,"edge-zone edge-bottom svelte-8w11tm",null,rs,H)},[()=>({"active-edge":dt()==="top"}),()=>({"active-edge":dt()==="left"}),Zi,()=>({"active-edge":dt()==="right"}),()=>({"active-edge":dt()==="bottom"})]),D(e,Ur),Me()}$e(["click","keydown"]);var Cu=Y('<div class="victory-screen svelte-12ok9q2" data-testid="victory-screen"><div class="victory-content svelte-12ok9q2"><div class="victory-icon svelte-12ok9q2">ð</div> <h1 class="victory-title svelte-12ok9q2">Victory!</h1> <p class="victory-message svelte-12ok9q2"> </p> <div class="victory-objective svelte-12ok9q2"><span class="objective-label svelte-12ok9q2">Objective Complete:</span> <span class="objective-text svelte-12ok9q2"> </span></div> <button class="return-button svelte-12ok9q2" data-testid="return-to-menu-button">Return to Character Select</button></div></div>');function Hu(e,t){Ee(t,!0);let n=O(se({monstersDefeated:0,monstersToDefeat:2,objective:"Defeat 2 monsters"}));nt(()=>{const _=j.subscribe(()=>{const T=j.getState();b(n,T.game.scenario,!0)}),m=j.getState();return b(n,m.game.scenario,!0),_});function r(){j.dispatch(Fr())}var s=Cu(),i=h(s),a=y(h(i),4),l=h(a),o=y(a,2),u=y(h(o),2),d=h(u),p=y(o,2);p.__click=r,J(()=>{S(l,`You have defeated ${c(n).monstersDefeated??""} monsters and completed the objective!`),S(d,c(n).objective)}),D(e,s),Me()}$e(["click"]);var Ru=Y('<div class="defeat-screen svelte-1jz2vy1" data-testid="defeat-screen"><div class="defeat-content svelte-1jz2vy1"><div class="defeat-icon svelte-1jz2vy1">ð</div> <h1 class="defeat-title svelte-1jz2vy1">Defeat</h1> <p class="defeat-message svelte-1jz2vy1">Your party has been eliminated before completing the objective.</p> <div class="defeat-progress svelte-1jz2vy1"><span class="progress-label svelte-1jz2vy1">Progress:</span> <span class="progress-text svelte-1jz2vy1"> </span></div> <div class="defeat-objective svelte-1jz2vy1"><span class="objective-label svelte-1jz2vy1">Objective:</span> <span class="objective-text svelte-1jz2vy1"> </span></div> <button class="return-button svelte-1jz2vy1" data-testid="return-to-menu-button">Return to Character Select</button></div></div>');function zu(e,t){Ee(t,!0);let n=O(se({monstersDefeated:0,monstersToDefeat:2,objective:"Defeat 2 monsters"}));nt(()=>{const m=j.subscribe(()=>{const R=j.getState();b(n,R.game.scenario,!0)}),T=j.getState();return b(n,T.game.scenario,!0),m});function r(){j.dispatch(Fr())}var s=Ru(),i=h(s),a=y(h(i),6),l=y(h(a),2),o=h(l),u=y(a,2),d=y(h(u),2),p=h(d),_=y(u,2);_.__click=r,J(()=>{S(o,`${c(n).monstersDefeated??""} / ${c(n).monstersToDefeat??""} monsters defeated`),S(p,c(n).objective)}),D(e,s),Me()}$e(["click"]);var Ou=Y('<main class="svelte-1n46o8q"><!></main>');function Nu(e,t){Ee(t,!0);let n=O("character-select");nt(()=>{const l=j.subscribe(()=>{const u=j.getState();b(n,u.game.currentScreen,!0)}),o=j.getState();return b(n,o.game.currentScreen,!0),l});var r=Ou(),s=h(r);{var i=l=>{Qc(l,{})},a=l=>{var o=pe(),u=he(o);{var d=_=>{Du(_,{})},p=_=>{var m=pe(),T=he(m);{var R=k=>{Hu(k,{})},w=k=>{var U=pe(),P=he(U);{var M=z=>{zu(z,{})};$(P,z=>{c(n)==="defeat"&&z(M)},!0)}D(k,U)};$(T,k=>{c(n)==="victory"?k(R):k(w,!1)},!0)}D(_,m)};$(u,_=>{c(n)==="game-board"?_(d):_(p,!1)},!0)}D(l,o)};$(s,l=>{c(n)==="character-select"?l(i):l(a,!1)})}D(e,r),Me()}qo(Nu,{target:document.getElementById("app")});
