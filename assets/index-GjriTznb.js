(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}})();const po="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(po);const as=1,ss=2,is=4,mo=8,go=16,_o=1,yo=2,Re=Symbol(),wo="http://www.w3.org/1999/xhtml",_r=!1;var os=Array.isArray,ko=Array.prototype.indexOf,Or=Array.from,bo=Object.defineProperty,mn=Object.getOwnPropertyDescriptor,xo=Object.getOwnPropertyDescriptors,To=Object.prototype,So=Array.prototype,ls=Object.getPrototypeOf,Pa=Object.isExtensible;function Io(e){for(var t=0;t<e.length;t++)e[t]()}function cs(){var e,t,n=new Promise((r,a)=>{e=r,t=a});return{promise:n,resolve:e,reject:t}}const Ae=2,Nr=4,jr=8,Co=1<<24,Mt=16,Ht=32,Xt=64,Jn=128,ft=512,Ne=1024,Ge=2048,At=4096,$e=8192,Nt=16384,Br=32768,nn=65536,Ma=1<<17,ds=1<<18,cn=1<<19,Eo=1<<20,Yt=32768,yr=1<<21,Fr=1<<22,jt=1<<23,zn=Symbol("$state"),Po=Symbol(""),$t=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Mo(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Ho(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Ao(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Do(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Ro(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function zo(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Oo(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function No(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function jo(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}function Bo(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function us(e){return e===this.v}function Fo(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function fs(e){return!Fo(e,this.v)}let Lo=!1,st=null;function rn(e){st=e}function Ie(e,t=!1,n){st={p:st,i:!1,c:null,e:null,s:e,x:null,l:null}}function Ce(e){var t=st,n=t.e;if(n!==null){t.e=null;for(var r of n)Is(r)}return t.i=!0,st=t.p,{}}function vs(){return!0}let en=[];function qo(){var e=en;en=[],Io(e)}function dn(e){if(en.length===0){var t=en;queueMicrotask(()=>{t===en&&qo()})}en.push(e)}function hs(e){var t=oe;if(t===null)return te.f|=jt,e;if((t.f&Br)===0){if((t.f&Jn)===0)throw e;t.b.error(e)}else an(e,t)}function an(e,t){for(;t!==null;){if((t.f&Jn)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e}const Hn=new Set;let he=null,at=null,ht=[],Lr=null,wr=!1;class pt{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#r=0;#n=0;#l=null;#s=[];#a=[];skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(t){ht=[],this.apply();var n={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const r of t)this.#i(r,n);this.is_fork||this.#d(),this.is_deferred()?(this.#o(n.effects),this.#o(n.render_effects),this.#o(n.block_effects)):(he=null,Ha(n.render_effects),Ha(n.effects),this.#l?.resolve()),at=null}#i(t,n){t.f^=Ne;for(var r=t.first;r!==null;){var a=r.f,s=(a&(Ht|Xt))!==0,o=s&&(a&Ne)!==0,c=o||(a&$e)!==0||this.skipped_effects.has(r);if((r.f&Jn)!==0&&r.b?.is_pending()&&(n={parent:n,effect:r,effects:[],render_effects:[],block_effects:[]}),!c&&r.fn!==null){s?r.f^=Ne:(a&Nr)!==0?n.effects.push(r):In(r)&&((r.f&Mt)!==0&&n.block_effects.push(r),wn(r));var l=r.first;if(l!==null){r=l;continue}}var d=r.parent;for(r=r.next;r===null&&d!==null;)d===n.effect&&(this.#o(n.effects),this.#o(n.render_effects),this.#o(n.block_effects),n=n.parent),r=d.next,d=d.parent}}#o(t){for(const n of t)((n.f&Ge)!==0?this.#s:this.#a).push(n),this.#c(n.deps),je(n,Ne)}#c(t){if(t!==null)for(const n of t)(n.f&Ae)===0||(n.f&Yt)===0||(n.f^=Yt,this.#c(n.deps))}capture(t,n){this.previous.has(t)||this.previous.set(t,n),(t.f&jt)===0&&(this.current.set(t,t.v),at?.set(t,t.v))}activate(){he=this,this.apply()}deactivate(){he===this&&(he=null,at=null)}flush(){if(this.activate(),ht.length>0){if(Uo(),he!==null&&he!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#t)t(this);this.#t.clear()}#d(){if(this.#n===0){for(const t of this.#e)t();this.#e.clear()}this.#r===0&&this.#u()}#u(){if(Hn.size>1){this.previous.clear();var t=at,n=!0,r={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const s of Hn){if(s===this){n=!1;continue}const o=[];for(const[l,d]of this.current){if(s.current.has(l))if(n&&d!==s.current.get(l))s.current.set(l,d);else continue;o.push(l)}if(o.length===0)continue;const c=[...s.current.keys()].filter(l=>!this.current.has(l));if(c.length>0){var a=ht;ht=[];const l=new Set,d=new Map;for(const f of o)ps(f,c,l,d);if(ht.length>0){he=s,s.apply();for(const f of ht)s.#i(f,r);s.deactivate()}ht=a}}he=null,at=t}this.committed=!0,Hn.delete(this)}increment(t){this.#r+=1,t&&(this.#n+=1)}decrement(t){this.#r-=1,t&&(this.#n-=1),this.revive()}revive(){for(const t of this.#s)je(t,Ge),Vt(t);for(const t of this.#a)je(t,At),Vt(t);this.#s=[],this.#a=[],this.flush()}oncommit(t){this.#e.add(t)}ondiscard(t){this.#t.add(t)}settled(){return(this.#l??=cs()).promise}static ensure(){if(he===null){const t=he=new pt;Hn.add(he),pt.enqueue(()=>{he===t&&t.flush()})}return he}static enqueue(t){dn(t)}apply(){}}function Uo(){var e=Ft;wr=!0;var t=null;try{var n=0;for(Ln(!0);ht.length>0;){var r=pt.ensure();if(n++>1e3){var a,s;Wo()}r.process(ht),Bt.clear()}}finally{wr=!1,Ln(e),Lr=null}}function Wo(){try{Ro()}catch(e){an(e,Lr)}}let bt=null;function Ha(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if((r.f&(Nt|$e))===0&&In(r)&&(bt=new Set,wn(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?Ms(r):r.fn=null),bt?.size>0)){Bt.clear();for(const a of bt){if((a.f&(Nt|$e))!==0)continue;const s=[a];let o=a.parent;for(;o!==null;)bt.has(o)&&(bt.delete(o),s.push(o)),o=o.parent;for(let c=s.length-1;c>=0;c--){const l=s[c];(l.f&(Nt|$e))===0&&wn(l)}}bt.clear()}}bt=null}}function ps(e,t,n,r){if(!n.has(e)&&(n.add(e),e.reactions!==null))for(const a of e.reactions){const s=a.f;(s&Ae)!==0?ps(a,t,n,r):(s&(Fr|Mt))!==0&&(s&Ge)===0&&ms(a,t,r)&&(je(a,Ge),Vt(a))}}function ms(e,t,n){const r=n.get(e);if(r!==void 0)return r;if(e.deps!==null)for(const a of e.deps){if(t.includes(a))return!0;if((a.f&Ae)!==0&&ms(a,t,n))return n.set(a,!0),!0}return n.set(e,!1),!1}function Vt(e){for(var t=Lr=e;t.parent!==null;){t=t.parent;var n=t.f;if(wr&&t===oe&&(n&Mt)!==0&&(n&ds)===0)return;if((n&(Xt|Ht))!==0){if((n&Ne)===0)return;t.f^=Ne}}ht.push(t)}function Yo(e){let t=0,n=Gt(0),r;return()=>{_n()&&(i(n),Cs(()=>(t===0&&(r=Ls(()=>e(()=>gn(n)))),t+=1,()=>{dn(()=>{t-=1,t===0&&(r?.(),r=void 0,gn(n))})})))}}var Vo=nn|cn|Jn;function Go(e,t,n){new Xo(e,t,n)}class Xo{parent;#e=!1;#t;#r=null;#n;#l;#s;#a=null;#i=null;#o=null;#c=null;#d=null;#u=0;#f=0;#h=!1;#v=null;#y=Yo(()=>(this.#v=Gt(this.#u),()=>{this.#v=null}));constructor(t,n,r){this.#t=t,this.#n=n,this.#l=r,this.parent=oe.b,this.#e=!!this.#n.pending,this.#s=Yr(()=>{oe.b=this;{var a=this.#g();try{this.#a=rt(()=>r(a))}catch(s){this.error(s)}this.#f>0?this.#m():this.#e=!1}return()=>{this.#d?.remove()}},Vo)}#w(){try{this.#a=rt(()=>this.#l(this.#t))}catch(t){this.error(t)}this.#e=!1}#k(){const t=this.#n.pending;t&&(this.#i=rt(()=>t(this.#t)),pt.enqueue(()=>{var n=this.#g();this.#a=this.#p(()=>(pt.ensure(),rt(()=>this.#l(n)))),this.#f>0?this.#m():(tn(this.#i,()=>{this.#i=null}),this.#e=!1)}))}#g(){var t=this.#t;return this.#e&&(this.#d=Et(),this.#t.before(this.#d),t=this.#d),t}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#p(t){var n=oe,r=te,a=st;gt(this.#s),Ye(this.#s),rn(this.#s.ctx);try{return t()}catch(s){return hs(s),null}finally{gt(n),Ye(r),rn(a)}}#m(){const t=this.#n.pending;this.#a!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#d),Ds(this.#a,this.#c)),this.#i===null&&(this.#i=rt(()=>t(this.#t)))}#_(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#_(t);return}this.#f+=t,this.#f===0&&(this.#e=!1,this.#i&&tn(this.#i,()=>{this.#i=null}),this.#c&&(this.#t.before(this.#c),this.#c=null))}update_pending_count(t){this.#_(t),this.#u+=t,this.#v&&sn(this.#v,this.#u)}get_effect_pending(){return this.#y(),i(this.#v)}error(t){var n=this.#n.onerror;let r=this.#n.failed;if(this.#h||!n&&!r)throw t;this.#a&&(Ve(this.#a),this.#a=null),this.#i&&(Ve(this.#i),this.#i=null),this.#o&&(Ve(this.#o),this.#o=null);var a=!1,s=!1;const o=()=>{if(a){Bo();return}a=!0,s&&jo(),pt.ensure(),this.#u=0,this.#o!==null&&tn(this.#o,()=>{this.#o=null}),this.#e=this.has_pending_snippet(),this.#a=this.#p(()=>(this.#h=!1,rt(()=>this.#l(this.#t)))),this.#f>0?this.#m():this.#e=!1};var c=te;try{Ye(null),s=!0,n?.(t,o),s=!1}catch(l){an(l,this.#s&&this.#s.parent)}finally{Ye(c)}r&&dn(()=>{this.#o=this.#p(()=>{pt.ensure(),this.#h=!0;try{return rt(()=>{r(this.#t,()=>t,()=>o)})}catch(l){return an(l,this.#s.parent),null}finally{this.#h=!1}})})}}function Ko(e,t,n){for(var r=[],a=t.length,s=0;s<a;s++)Vr(t[s].e,r,!0);Hs(r,()=>{var o=r.length===0&&n!==null;if(o){var c=n,l=c.parentNode;il(l),l.append(c),e.items.clear(),dt(e,t[0].prev,t[a-1].next)}for(var d=0;d<a;d++){var f=t[d];o||(e.items.delete(f.k),dt(e,f.prev,f.next)),Ve(f.e,!o)}e.first===t[0]&&(e.first=t[0].prev)})}function Le(e,t,n,r,a,s=null){var o=e,c=new Map,l=null,d=(t&is)!==0,f=(t&as)!==0,g=(t&ss)!==0;if(d){var h=e;o=h.appendChild(Et())}var _=null,x=tl(()=>{var C=n();return os(C)?C:C==null?[]:Or(C)}),z,k=!0;function H(){Qo(M,z,o,t,r),_!==null&&(z.length===0?(_.fragment?(o.before(_.fragment),_.fragment=null):Gr(_.effect),A.first=_.effect):tn(_.effect,()=>{_=null}))}var A=Yr(()=>{z=i(x);for(var C=z.length,N=new Set,S=he,W=null,q=Ts(),Y=0;Y<C;Y+=1){var $=z[Y],Z=r($,Y),ie=k?null:c.get(Z);ie?(f&&sn(ie.v,$),g?sn(ie.i,Y):ie.i=Y,q&&S.skipped_effects.delete(ie.e)):(ie=Zo(k?o:null,W,$,Z,Y,a,t,n),k&&(ie.o=!0,W===null?l=ie:W.next=ie,W=ie),c.set(Z,ie)),N.add(Z)}if(C===0&&s&&!_)if(k)_={fragment:null,effect:rt(()=>s(o))};else{var me=document.createDocumentFragment(),ye=Et();me.append(ye),_={fragment:me,effect:rt(()=>s(ye))}}if(!k)if(q){for(const[xe,De]of c)N.has(xe)||S.skipped_effects.add(De.e);S.oncommit(H),S.ondiscard(()=>{})}else H();i(x)}),M={effect:A,items:c,first:l};k=!1}function Qo(e,t,n,r,a){var s=(r&mo)!==0,o=t.length,c=e.items,l=e.first,d,f=null,g,h=[],_=[],x,z,k,H;if(s)for(H=0;H<o;H+=1)x=t[H],z=a(x,H),k=c.get(z),k.o&&(k.a?.measure(),(g??=new Set).add(k));for(H=0;H<o;H+=1){if(x=t[H],z=a(x,H),k=c.get(z),e.first??=k,!k.o){k.o=!0;var A=f?f.next:l;dt(e,f,k),dt(e,k,A),hr(k,A,n),f=k,h=[],_=[],l=f.next;continue}if((k.e.f&$e)!==0&&(Gr(k.e),s&&(k.a?.unfix(),(g??=new Set).delete(k))),k!==l){if(d!==void 0&&d.has(k)){if(h.length<_.length){var M=_[0],C;f=M.prev;var N=h[0],S=h[h.length-1];for(C=0;C<h.length;C+=1)hr(h[C],M,n);for(C=0;C<_.length;C+=1)d.delete(_[C]);dt(e,N.prev,S.next),dt(e,f,N),dt(e,S,M),l=M,f=S,H-=1,h=[],_=[]}else d.delete(k),hr(k,l,n),dt(e,k.prev,k.next),dt(e,k,f===null?e.first:f.next),dt(e,f,k),f=k;continue}for(h=[],_=[];l!==null&&l.k!==z;)(l.e.f&$e)===0&&(d??=new Set).add(l),_.push(l),l=l.next;if(l===null)continue;k=l}h.push(k),f=k,l=k.next}let W=c.size>o;if(l!==null||d!==void 0){for(var q=d===void 0?[]:Or(d);l!==null;)(l.e.f&$e)===0&&q.push(l),l=l.next;var Y=q.length;if(W=c.size-Y>o,Y>0){var $=(r&is)!==0&&o===0?n:null;if(s){for(H=0;H<Y;H+=1)q[H].a?.measure();for(H=0;H<Y;H+=1)q[H].a?.fix()}Ko(e,q,$)}}if(W)for(const Z of c.values())Z.o||(dt(e,f,Z),f=Z);e.effect.last=f&&f.e,s&&dn(()=>{if(g!==void 0)for(k of g)k.a?.apply()})}function Zo(e,t,n,r,a,s,o,c){var l=(o&as)!==0,d=(o&go)===0,f=l?d?rl(n,!1,!1):Gt(n):n,g=(o&ss)===0?a:Gt(a),h={i:g,v:f,k:r,a:null,e:null,o:!1,prev:t,next:null};try{if(e===null){var _=document.createDocumentFragment();_.append(e=Et())}return h.e=rt(()=>s(e,f,g,c)),t!==null&&(t.next=h),h}finally{}}function hr(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,a=t?t.e.nodes_start:n,s=e.e.nodes_start;s!==null&&s!==r;){var o=Sn(s);a.before(s),s=o}}function dt(e,t,n){t===null?(e.first=n,e.effect.first=n&&n.e):(t.e.next&&(t.e.next.prev=null),t.next=n,t.e.next=n&&n.e),n!==null&&(n.e.prev&&(n.e.prev.next=null),n.prev=t,n.e.prev=t&&t.e)}function Jo(e,t,n,r){const a=qr;if(n.length===0&&e.length===0){r(t.map(a));return}var s=he,o=oe,c=$o();function l(){Promise.all(n.map(d=>el(d))).then(d=>{c();try{r([...t.map(a),...d])}catch(f){(o.f&Nt)===0&&an(f,o)}s?.deactivate(),Bn()}).catch(d=>{an(d,o)})}e.length>0?Promise.all(e).then(()=>{c();try{return l()}finally{s?.deactivate(),Bn()}}):l()}function $o(){var e=oe,t=te,n=st,r=he;return function(s=!0){gt(e),Ye(t),rn(n),s&&r?.activate()}}function Bn(){gt(null),Ye(null),rn(null)}function qr(e){var t=Ae|Ge,n=te!==null&&(te.f&Ae)!==0?te:null;return oe!==null&&(oe.f|=cn),{ctx:st,deps:null,effects:null,equals:us,f:t,fn:e,reactions:null,rv:0,v:Re,wv:0,parent:n??oe,ac:null}}function el(e,t){let n=oe;n===null&&Mo();var r=n.b,a=void 0,s=Gt(Re),o=!te,c=new Map;return ul(()=>{var l=cs();a=l.promise;try{Promise.resolve(e()).then(l.resolve,l.reject).then(()=>{d===he&&d.committed&&d.deactivate(),Bn()})}catch(h){l.reject(h),Bn()}var d=he;if(o){var f=!r.is_pending();r.update_pending_count(1),d.increment(f),c.get(d)?.reject($t),c.delete(d),c.set(d,l)}const g=(h,_=void 0)=>{if(d.activate(),_)_!==$t&&(s.f|=jt,sn(s,_));else{(s.f&jt)!==0&&(s.f^=jt),sn(s,h);for(const[x,z]of c){if(c.delete(x),x===d)break;z.reject($t)}}o&&(r.update_pending_count(-1),d.decrement(f))};l.promise.then(g,h=>g(null,h||"unknown"))}),Ss(()=>{for(const l of c.values())l.reject($t)}),new Promise(l=>{function d(f){function g(){f===a?l(s):d(a)}f.then(g,g)}d(a)})}function K(e){const t=qr(e);return Rs(t),t}function tl(e){const t=qr(e);return t.equals=fs,t}function gs(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)Ve(t[n])}}function nl(e){for(var t=e.parent;t!==null;){if((t.f&Ae)===0)return(t.f&Nt)===0?t:null;t=t.parent}return null}function Ur(e){var t,n=oe;gt(nl(e));try{e.f&=~Yt,gs(e),t=js(e)}finally{gt(n)}return t}function _s(e){var t=Ur(e);if(e.equals(t)||(he?.is_fork||(e.v=t),e.wv=Os()),!un)if(at!==null)(_n()||he?.is_fork)&&at.set(e,t);else{var n=(e.f&ft)===0?At:Ne;je(e,n)}}let kr=new Set;const Bt=new Map;let ys=!1;function Gt(e,t){var n={f:0,v:e,reactions:null,equals:us,rv:0,wv:0};return n}function L(e,t){const n=Gt(e);return Rs(n),n}function rl(e,t=!1,n=!0){const r=Gt(e);return t||(r.equals=fs),r}function b(e,t,n=!1){te!==null&&(!mt||(te.f&Ma)!==0)&&vs()&&(te.f&(Ae|Mt|Fr|Ma))!==0&&!St?.includes(e)&&No();let r=n?pe(t):t;return sn(e,r)}function sn(e,t){if(!e.equals(t)){var n=e.v;un?Bt.set(e,t):Bt.set(e,n),e.v=t;var r=pt.ensure();r.capture(e,n),(e.f&Ae)!==0&&((e.f&Ge)!==0&&Ur(e),je(e,(e.f&ft)!==0?Ne:At)),e.wv=Os(),ws(e,Ge),oe!==null&&(oe.f&Ne)!==0&&(oe.f&(Ht|Xt))===0&&(nt===null?hl([e]):nt.push(e)),!r.is_fork&&kr.size>0&&!ys&&al()}return t}function al(){ys=!1;var e=Ft;Ln(!0);const t=Array.from(kr);try{for(const n of t)(n.f&Ne)!==0&&je(n,At),In(n)&&wn(n)}finally{Ln(e)}kr.clear()}function gn(e){b(e,e.v+1)}function ws(e,t){var n=e.reactions;if(n!==null)for(var r=n.length,a=0;a<r;a++){var s=n[a],o=s.f,c=(o&Ge)===0;if(c&&je(s,t),(o&Ae)!==0){var l=s;at?.delete(l),(o&Yt)===0&&(o&ft&&(s.f|=Yt),ws(l,At))}else c&&((o&Mt)!==0&&bt!==null&&bt.add(s),Vt(s))}}function pe(e){if(typeof e!="object"||e===null||zn in e)return e;const t=ls(e);if(t!==To&&t!==So)return e;var n=new Map,r=os(e),a=L(0),s=Wt,o=c=>{if(Wt===s)return c();var l=te,d=Wt;Ye(null),Ra(s);var f=c();return Ye(l),Ra(d),f};return r&&n.set("length",L(e.length)),new Proxy(e,{defineProperty(c,l,d){(!("value"in d)||d.configurable===!1||d.enumerable===!1||d.writable===!1)&&zo();var f=n.get(l);return f===void 0?f=o(()=>{var g=L(d.value);return n.set(l,g),g}):b(f,d.value,!0),!0},deleteProperty(c,l){var d=n.get(l);if(d===void 0){if(l in c){const f=o(()=>L(Re));n.set(l,f),gn(a)}}else b(d,Re),gn(a);return!0},get(c,l,d){if(l===zn)return e;var f=n.get(l),g=l in c;if(f===void 0&&(!g||mn(c,l)?.writable)&&(f=o(()=>{var _=pe(g?c[l]:Re),x=L(_);return x}),n.set(l,f)),f!==void 0){var h=i(f);return h===Re?void 0:h}return Reflect.get(c,l,d)},getOwnPropertyDescriptor(c,l){var d=Reflect.getOwnPropertyDescriptor(c,l);if(d&&"value"in d){var f=n.get(l);f&&(d.value=i(f))}else if(d===void 0){var g=n.get(l),h=g?.v;if(g!==void 0&&h!==Re)return{enumerable:!0,configurable:!0,value:h,writable:!0}}return d},has(c,l){if(l===zn)return!0;var d=n.get(l),f=d!==void 0&&d.v!==Re||Reflect.has(c,l);if(d!==void 0||oe!==null&&(!f||mn(c,l)?.writable)){d===void 0&&(d=o(()=>{var h=f?pe(c[l]):Re,_=L(h);return _}),n.set(l,d));var g=i(d);if(g===Re)return!1}return f},set(c,l,d,f){var g=n.get(l),h=l in c;if(r&&l==="length")for(var _=d;_<g.v;_+=1){var x=n.get(_+"");x!==void 0?b(x,Re):_ in c&&(x=o(()=>L(Re)),n.set(_+"",x))}if(g===void 0)(!h||mn(c,l)?.writable)&&(g=o(()=>L(void 0)),b(g,pe(d)),n.set(l,g));else{h=g.v!==Re;var z=o(()=>pe(d));b(g,z)}var k=Reflect.getOwnPropertyDescriptor(c,l);if(k?.set&&k.set.call(f,d),!h){if(r&&typeof l=="string"){var H=n.get("length"),A=Number(l);Number.isInteger(A)&&A>=H.v&&b(H,A+1)}gn(a)}return!0},ownKeys(c){i(a);var l=Reflect.ownKeys(c).filter(g=>{var h=n.get(g);return h===void 0||h.v!==Re});for(var[d,f]of n)f.v!==Re&&!(d in c)&&l.push(d);return l},setPrototypeOf(){Oo()}})}var Aa,ks,bs,xs;function sl(){if(Aa===void 0){Aa=window,ks=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;bs=mn(t,"firstChild").get,xs=mn(t,"nextSibling").get,Pa(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Pa(n)&&(n.__t=void 0)}}function Et(e=""){return document.createTextNode(e)}function Fn(e){return bs.call(e)}function Sn(e){return xs.call(e)}function u(e,t){return Fn(e)}function Se(e,t=!1){{var n=Fn(e);return n instanceof Comment&&n.data===""?Sn(n):n}}function v(e,t=1,n=!1){let r=e;for(;t--;)r=Sn(r);return r}function il(e){e.textContent=""}function Ts(){return!1}function Wr(e){var t=te,n=oe;Ye(null),gt(null);try{return e()}finally{Ye(t),gt(n)}}function ol(e){oe===null&&(te===null&&Do(),Ao()),un&&Ho()}function ll(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function Dt(e,t,n){var r=oe;r!==null&&(r.f&$e)!==0&&(e|=$e);var a={ctx:st,deps:null,nodes_start:null,nodes_end:null,f:e|Ge|ft,first:null,fn:t,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{wn(a),a.f|=Br}catch(c){throw Ve(a),c}else t!==null&&Vt(a);var s=a;if(n&&s.deps===null&&s.teardown===null&&s.nodes_start===null&&s.first===s.last&&(s.f&cn)===0&&(s=s.first,(e&Mt)!==0&&(e&nn)!==0&&s!==null&&(s.f|=nn)),s!==null&&(s.parent=r,r!==null&&ll(s,r),te!==null&&(te.f&Ae)!==0&&(e&Xt)===0)){var o=te;(o.effects??=[]).push(s)}return a}function _n(){return te!==null&&!mt}function Ss(e){const t=Dt(jr,null,!1);return je(t,Ne),t.teardown=e,t}function Tt(e){ol();var t=oe.f,n=!te&&(t&Ht)!==0&&(t&Br)===0;if(n){var r=st;(r.e??=[]).push(e)}else return Is(e)}function Is(e){return Dt(Nr|Eo,e,!1)}function cl(e){pt.ensure();const t=Dt(Xt|cn,e,!0);return(n={})=>new Promise(r=>{n.outro?tn(t,()=>{Ve(t),r(void 0)}):(Ve(t),r(void 0))})}function dl(e){return Dt(Nr,e,!1)}function ul(e){return Dt(Fr|cn,e,!0)}function Cs(e,t=0){return Dt(jr|t,e,!0)}function U(e,t=[],n=[],r=[]){Jo(r,t,n,a=>{Dt(jr,()=>e(...a.map(i)),!0)})}function Yr(e,t=0){var n=Dt(Mt|t,e,!0);return n}function rt(e){return Dt(Ht|cn,e,!0)}function Es(e){var t=e.teardown;if(t!==null){const n=un,r=te;Da(!0),Ye(null);try{t.call(null)}finally{Da(n),Ye(r)}}}function Ps(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const a=n.ac;a!==null&&Wr(()=>{a.abort($t)});var r=n.next;(n.f&Xt)!==0?n.parent=null:Ve(n,t),n=r}}function fl(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&Ht)===0&&Ve(t),t=n}}function Ve(e,t=!0){var n=!1;(t||(e.f&ds)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(vl(e.nodes_start,e.nodes_end),n=!0),Ps(e,t&&!n),qn(e,0),je(e,Nt);var r=e.transitions;if(r!==null)for(const s of r)s.stop();Es(e);var a=e.parent;a!==null&&a.first!==null&&Ms(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function vl(e,t){for(;e!==null;){var n=e===t?null:Sn(e);e.remove(),e=n}}function Ms(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function tn(e,t,n=!0){var r=[];Vr(e,r,!0),Hs(r,()=>{n&&Ve(e),t&&t()})}function Hs(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var a of e)a.out(r)}else t()}function Vr(e,t,n){if((e.f&$e)===0){if(e.f^=$e,e.transitions!==null)for(const o of e.transitions)(o.is_global||n)&&t.push(o);for(var r=e.first;r!==null;){var a=r.next,s=(r.f&nn)!==0||(r.f&Ht)!==0&&(e.f&Mt)!==0;Vr(r,t,s?n:!1),r=a}}}function Gr(e){As(e,!0)}function As(e,t){if((e.f&$e)!==0){e.f^=$e,(e.f&Ne)===0&&(je(e,Ge),Vt(e));for(var n=e.first;n!==null;){var r=n.next,a=(n.f&nn)!==0||(n.f&Ht)!==0;As(n,a?t:!1),n=r}if(e.transitions!==null)for(const s of e.transitions)(s.is_global||t)&&s.in()}}function Ds(e,t){for(var n=e.nodes_start,r=e.nodes_end;n!==null;){var a=n===r?null:Sn(n);t.append(n),n=a}}let Ft=!1;function Ln(e){Ft=e}let un=!1;function Da(e){un=e}let te=null,mt=!1;function Ye(e){te=e}let oe=null;function gt(e){oe=e}let St=null;function Rs(e){te!==null&&(St===null?St=[e]:St.push(e))}let Fe=null,Ze=0,nt=null;function hl(e){nt=e}let zs=1,yn=0,Wt=yn;function Ra(e){Wt=e}function Os(){return++zs}function In(e){var t=e.f;if((t&Ge)!==0)return!0;if(t&Ae&&(e.f&=~Yt),(t&At)!==0){var n=e.deps;if(n!==null)for(var r=n.length,a=0;a<r;a++){var s=n[a];if(In(s)&&_s(s),s.wv>e.wv)return!0}(t&ft)!==0&&at===null&&je(e,Ne)}return!1}function Ns(e,t,n=!0){var r=e.reactions;if(r!==null&&!St?.includes(e))for(var a=0;a<r.length;a++){var s=r[a];(s.f&Ae)!==0?Ns(s,t,!1):t===s&&(n?je(s,Ge):(s.f&Ne)!==0&&je(s,At),Vt(s))}}function js(e){var t=Fe,n=Ze,r=nt,a=te,s=St,o=st,c=mt,l=Wt,d=e.f;Fe=null,Ze=0,nt=null,te=(d&(Ht|Xt))===0?e:null,St=null,rn(e.ctx),mt=!1,Wt=++yn,e.ac!==null&&(Wr(()=>{e.ac.abort($t)}),e.ac=null);try{e.f|=yr;var f=e.fn,g=f(),h=e.deps;if(Fe!==null){var _;if(qn(e,Ze),h!==null&&Ze>0)for(h.length=Ze+Fe.length,_=0;_<Fe.length;_++)h[Ze+_]=Fe[_];else e.deps=h=Fe;if(Ft&&_n()&&(e.f&ft)!==0)for(_=Ze;_<h.length;_++)(h[_].reactions??=[]).push(e)}else h!==null&&Ze<h.length&&(qn(e,Ze),h.length=Ze);if(vs()&&nt!==null&&!mt&&h!==null&&(e.f&(Ae|At|Ge))===0)for(_=0;_<nt.length;_++)Ns(nt[_],e);return a!==null&&a!==e&&(yn++,nt!==null&&(r===null?r=nt:r.push(...nt))),(e.f&jt)!==0&&(e.f^=jt),g}catch(x){return hs(x)}finally{e.f^=yr,Fe=t,Ze=n,nt=r,te=a,St=s,rn(o),mt=c,Wt=l}}function pl(e,t){let n=t.reactions;if(n!==null){var r=ko.call(n,e);if(r!==-1){var a=n.length-1;a===0?n=t.reactions=null:(n[r]=n[a],n.pop())}}n===null&&(t.f&Ae)!==0&&(Fe===null||!Fe.includes(t))&&(je(t,At),(t.f&ft)!==0&&(t.f^=ft,t.f&=~Yt),gs(t),qn(t,0))}function qn(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)pl(e,n[r])}function wn(e){var t=e.f;if((t&Nt)===0){je(e,Ne);var n=oe,r=Ft;oe=e,Ft=!0;try{(t&(Mt|Co))!==0?fl(e):Ps(e),Es(e);var a=js(e);e.teardown=typeof a=="function"?a:null,e.wv=zs;var s;_r&&Lo&&(e.f&Ge)!==0&&e.deps}finally{Ft=r,oe=n}}}function i(e){var t=e.f,n=(t&Ae)!==0;if(te!==null&&!mt){var r=oe!==null&&(oe.f&Nt)!==0;if(!r&&!St?.includes(e)){var a=te.deps;if((te.f&yr)!==0)e.rv<yn&&(e.rv=yn,Fe===null&&a!==null&&a[Ze]===e?Ze++:Fe===null?Fe=[e]:Fe.includes(e)||Fe.push(e));else{(te.deps??=[]).push(e);var s=e.reactions;s===null?e.reactions=[te]:s.includes(te)||s.push(te)}}}if(un){if(Bt.has(e))return Bt.get(e);if(n){var o=e,c=o.v;return((o.f&Ne)===0&&o.reactions!==null||Fs(o))&&(c=Ur(o)),Bt.set(o,c),c}}else n&&(!at?.has(e)||he?.is_fork&&!_n())&&(o=e,In(o)&&_s(o),Ft&&_n()&&(o.f&ft)===0&&Bs(o));if(at?.has(e))return at.get(e);if((e.f&jt)!==0)throw e.v;return e.v}function Bs(e){if(e.deps!==null){e.f^=ft;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&Ae)!==0&&(t.f&ft)===0&&Bs(t)}}function Fs(e){if(e.v===Re)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(Bt.has(t)||(t.f&Ae)!==0&&Fs(t))return!0;return!1}function Ls(e){var t=mt;try{return mt=!0,e()}finally{mt=t}}const ml=-7169;function je(e,t){e.f=e.f&ml|t}const qs=new Set,br=new Set;function gl(e,t,n,r={}){function a(s){if(r.capture||vn.call(t,s),!s.cancelBubble)return Wr(()=>n?.call(this,s))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?dn(()=>{t.addEventListener(e,a,r)}):t.addEventListener(e,a,r),a}function _l(e,t,n,r,a){var s={capture:r,passive:a},o=gl(e,t,n,s);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&Ss(()=>{t.removeEventListener(e,o,s)})}function Xe(e){for(var t=0;t<e.length;t++)qs.add(e[t]);for(var n of br)n(e)}let za=null;function vn(e){var t=this,n=t.ownerDocument,r=e.type,a=e.composedPath?.()||[],s=a[0]||e.target;za=e;var o=0,c=za===e&&e.__root;if(c){var l=a.indexOf(c);if(l!==-1&&(t===document||t===window)){e.__root=t;return}var d=a.indexOf(t);if(d===-1)return;l<=d&&(o=l)}if(s=a[o]||e.target,s!==t){bo(e,"currentTarget",{configurable:!0,get(){return s||n}});var f=te,g=oe;Ye(null),gt(null);try{for(var h,_=[];s!==null;){var x=s.assignedSlot||s.parentNode||s.host||null;try{var z=s["__"+r];z!=null&&(!s.disabled||e.target===s)&&z.call(s,e)}catch(k){h?_.push(k):h=k}if(e.cancelBubble||x===t||x===null)break;s=x}if(h){for(let k of _)queueMicrotask(()=>{throw k});throw h}}finally{e.__root=t,delete e.currentTarget,Ye(f),gt(g)}}}function yl(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Un(e,t){var n=oe;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function D(e,t){var n=(t&_o)!==0,r=(t&yo)!==0,a,s=!e.startsWith("<!>");return()=>{a===void 0&&(a=yl(s?e:"<!>"+e),n||(a=Fn(a)));var o=r||ks?document.importNode(a,!0):a.cloneNode(!0);if(n){var c=Fn(o),l=o.lastChild;Un(c,l)}else Un(o,o);return o}}function Oa(e=""){{var t=Et(e+"");return Un(t,t),t}}function He(){var e=document.createDocumentFragment(),t=document.createComment(""),n=Et();return e.append(t,n),Un(t,n),e}function I(e,t){e!==null&&e.before(t)}const wl=["touchstart","touchmove"];function kl(e){return wl.includes(e)}function w(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function bl(e,t){return xl(e,t)}const Qt=new Map;function xl(e,{target:t,anchor:n,props:r={},events:a,context:s,intro:o=!0}){sl();var c=new Set,l=g=>{for(var h=0;h<g.length;h++){var _=g[h];if(!c.has(_)){c.add(_);var x=kl(_);t.addEventListener(_,vn,{passive:x});var z=Qt.get(_);z===void 0?(document.addEventListener(_,vn,{passive:x}),Qt.set(_,1)):Qt.set(_,z+1)}}};l(Or(qs)),br.add(l);var d=void 0,f=cl(()=>{var g=n??t.appendChild(Et());return Go(g,{pending:()=>{}},h=>{if(s){Ie({});var _=st;_.c=s}a&&(r.$$events=a),d=e(h,r)||{},s&&Ce()}),()=>{for(var h of c){t.removeEventListener(h,vn);var _=Qt.get(h);--_===0?(document.removeEventListener(h,vn),Qt.delete(h)):Qt.set(h,_)}br.delete(l),g!==n&&g.parentNode?.removeChild(g)}});return Tl.set(d,f),d}let Tl=new WeakMap;class Sl{anchor;#e=new Map;#t=new Map;#r=new Map;#n=new Set;#l=!0;constructor(t,n=!0){this.anchor=t,this.#l=n}#s=()=>{var t=he;if(this.#e.has(t)){var n=this.#e.get(t),r=this.#t.get(n);if(r)Gr(r),this.#n.delete(n);else{var a=this.#r.get(n);a&&(this.#t.set(n,a.effect),this.#r.delete(n),a.fragment.lastChild.remove(),this.anchor.before(a.fragment),r=a.effect)}for(const[s,o]of this.#e){if(this.#e.delete(s),s===t)break;const c=this.#r.get(o);c&&(Ve(c.effect),this.#r.delete(o))}for(const[s,o]of this.#t){if(s===n||this.#n.has(s))continue;const c=()=>{if(Array.from(this.#e.values()).includes(s)){var d=document.createDocumentFragment();Ds(o,d),d.append(Et()),this.#r.set(s,{effect:o,fragment:d})}else Ve(o);this.#n.delete(s),this.#t.delete(s)};this.#l||!r?(this.#n.add(s),tn(o,c,!1)):c()}}};#a=t=>{this.#e.delete(t);const n=Array.from(this.#e.values());for(const[r,a]of this.#r)n.includes(r)||(Ve(a.effect),this.#r.delete(r))};ensure(t,n){var r=he,a=Ts();if(n&&!this.#t.has(t)&&!this.#r.has(t))if(a){var s=document.createDocumentFragment(),o=Et();s.append(o),this.#r.set(t,{effect:rt(()=>n(o)),fragment:s})}else this.#t.set(t,rt(()=>n(this.anchor)));if(this.#e.set(r,t),a){for(const[c,l]of this.#t)c===t?r.skipped_effects.delete(l):r.skipped_effects.add(l);for(const[c,l]of this.#r)c===t?r.skipped_effects.delete(l.effect):r.skipped_effects.add(l.effect);r.oncommit(this.#s),r.ondiscard(this.#a)}else this.#s()}}function F(e,t,n=!1){var r=new Sl(e),a=n?nn:0;function s(o,c){r.ensure(o,c)}Yr(()=>{var o=!1;t((c,l=!0)=>{o=!0,s(l,c)}),o||s(!1,null)},a)}const Na=[...` 	
\r\fÂ \v\uFEFF`];function Il(e,t,n){var r=e==null?"":""+e;if(t&&(r=r?r+" "+t:t),n){for(var a in n)if(n[a])r=r?r+" "+a:a;else if(r.length)for(var s=a.length,o=0;(o=r.indexOf(a,o))>=0;){var c=o+s;(o===0||Na.includes(r[o-1]))&&(c===r.length||Na.includes(r[c]))?r=(o===0?"":r.substring(0,o))+r.substring(c+1):o=c}}return r===""?null:r}function Cl(e,t){return e==null?null:String(e)}function ze(e,t,n,r,a,s){var o=e.__className;if(o!==n||o===void 0){var c=Il(n,r,s);c==null?e.removeAttribute("class"):e.className=c,e.__className=n}else if(s&&a!==s)for(var l in s){var d=!!s[l];(a==null||d!==!!a[l])&&e.classList.toggle(l,d)}return s}function Ot(e,t,n,r){var a=e.__style;if(a!==t){var s=Cl(t);s==null?e.removeAttribute("style"):e.style.cssText=s,e.__style=t}return r}const El=Symbol("is custom element"),Pl=Symbol("is html");function B(e,t,n,r){var a=Ml(e);a[t]!==(a[t]=n)&&(t==="loading"&&(e[Po]=n),n==null?e.removeAttribute(t):typeof n!="string"&&Hl(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function Ml(e){return e.__attributes??={[El]:e.nodeName.includes("-"),[Pl]:e.namespaceURI===wo}}var ja=new Map;function Hl(e){var t=e.getAttribute("is")||e.nodeName,n=ja.get(t);if(n)return n;ja.set(t,n=[]);for(var r,a=e,s=Element.prototype;s!==a;){r=xo(a);for(var o in r)r[o].set&&n.push(o);a=ls(a)}return n}function Ba(e,t){return e===t||e?.[zn]===t}function Al(e={},t,n,r){return dl(()=>{var a,s;return Cs(()=>{a=s,s=[],Ls(()=>{e!==n(...s)&&(t(e,...s),a&&Ba(n(...a),e)&&t(null,...a))})}),()=>{dn(()=>{s&&Ba(n(...s),e)&&t(null,...s)})}}),e}function Me(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Dl=typeof Symbol=="function"&&Symbol.observable||"@@observable",Fa=Dl,pr=()=>Math.random().toString(36).substring(7).split("").join("."),Rl={INIT:`@@redux/INIT${pr()}`,REPLACE:`@@redux/REPLACE${pr()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${pr()}`},Wn=Rl;function Xr(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Us(e,t,n){if(typeof e!="function")throw new Error(Me(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Me(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Me(1));return n(Us)(e,t)}let r=e,a=t,s=new Map,o=s,c=0,l=!1;function d(){o===s&&(o=new Map,s.forEach((k,H)=>{o.set(H,k)}))}function f(){if(l)throw new Error(Me(3));return a}function g(k){if(typeof k!="function")throw new Error(Me(4));if(l)throw new Error(Me(5));let H=!0;d();const A=c++;return o.set(A,k),function(){if(H){if(l)throw new Error(Me(6));H=!1,d(),o.delete(A),s=null}}}function h(k){if(!Xr(k))throw new Error(Me(7));if(typeof k.type>"u")throw new Error(Me(8));if(typeof k.type!="string")throw new Error(Me(17));if(l)throw new Error(Me(9));try{l=!0,a=r(a,k)}finally{l=!1}return(s=o).forEach(A=>{A()}),k}function _(k){if(typeof k!="function")throw new Error(Me(10));r=k,h({type:Wn.REPLACE})}function x(){const k=g;return{subscribe(H){if(typeof H!="object"||H===null)throw new Error(Me(11));function A(){const C=H;C.next&&C.next(f())}return A(),{unsubscribe:k(A)}},[Fa](){return this}}}return h({type:Wn.INIT}),{dispatch:h,subscribe:g,getState:f,replaceReducer:_,[Fa]:x}}function zl(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:Wn.INIT})>"u")throw new Error(Me(12));if(typeof n(void 0,{type:Wn.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Me(13))})}function Ol(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let a;try{zl(n)}catch(s){a=s}return function(o={},c){if(a)throw a;let l=!1;const d={};for(let f=0;f<r.length;f++){const g=r[f],h=n[g],_=o[g],x=h(_,c);if(typeof x>"u")throw c&&c.type,new Error(Me(14));d[g]=x,l=l||x!==_}return l=l||r.length!==Object.keys(o).length,l?d:o}}function Yn(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function Nl(...e){return t=>(n,r)=>{const a=t(n,r);let s=()=>{throw new Error(Me(15))};const o={getState:a.getState,dispatch:(l,...d)=>s(l,...d)},c=e.map(l=>l(o));return s=Yn(...c)(a.dispatch),{...a,dispatch:s}}}function jl(e){return Xr(e)&&"type"in e&&typeof e.type=="string"}var Ws=Symbol.for("immer-nothing"),La=Symbol.for("immer-draftable"),qe=Symbol.for("immer-state");function ut(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Je=Object,on=Je.getPrototypeOf,Vn="constructor",$n="prototype",xr="configurable",Gn="enumerable",On="writable",kn="value",Pt=e=>!!e&&!!e[qe];function _t(e){return e?Ys(e)||er(e)||!!e[La]||!!e[Vn]?.[La]||tr(e)||nr(e):!1}var Bl=Je[$n][Vn].toString(),qa=new WeakMap;function Ys(e){if(!e||!Kr(e))return!1;const t=on(e);if(t===null||t===Je[$n])return!0;const n=Je.hasOwnProperty.call(t,Vn)&&t[Vn];if(n===Object)return!0;if(!Jt(n))return!1;let r=qa.get(n);return r===void 0&&(r=Function.toString.call(n),qa.set(n,r)),r===Bl}function Cn(e,t,n=!0){En(e)===0?(n?Reflect.ownKeys(e):Je.keys(e)).forEach(a=>{t(a,e[a],e)}):e.forEach((r,a)=>t(a,r,e))}function En(e){const t=e[qe];return t?t.type_:er(e)?1:tr(e)?2:nr(e)?3:0}var Ua=(e,t,n=En(e))=>n===2?e.has(t):Je[$n].hasOwnProperty.call(e,t),Tr=(e,t,n=En(e))=>n===2?e.get(t):e[t],Xn=(e,t,n,r=En(e))=>{r===2?e.set(t,n):r===3?e.add(n):e[t]=n};function Fl(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var er=Array.isArray,tr=e=>e instanceof Map,nr=e=>e instanceof Set,Kr=e=>typeof e=="object",Jt=e=>typeof e=="function",mr=e=>typeof e=="boolean",xt=e=>e.copy_||e.base_,Qr=e=>e.modified_?e.copy_:e.base_;function Sr(e,t){if(tr(e))return new Map(e);if(nr(e))return new Set(e);if(er(e))return Array[$n].slice.call(e);const n=Ys(e);if(t===!0||t==="class_only"&&!n){const r=Je.getOwnPropertyDescriptors(e);delete r[qe];let a=Reflect.ownKeys(r);for(let s=0;s<a.length;s++){const o=a[s],c=r[o];c[On]===!1&&(c[On]=!0,c[xr]=!0),(c.get||c.set)&&(r[o]={[xr]:!0,[On]:!0,[Gn]:c[Gn],[kn]:e[o]})}return Je.create(on(e),r)}else{const r=on(e);if(r!==null&&n)return{...e};const a=Je.create(r);return Je.assign(a,e)}}function Zr(e,t=!1){return rr(e)||Pt(e)||(En(e)>1&&Je.defineProperties(e,{set:An,add:An,clear:An,delete:An}),Je.freeze(e),t&&Cn(e,(n,r)=>{Zr(r,!0)},!1)),e}function Ll(){ut(2)}var An={[kn]:Ll};function rr(e){return e===null||!Kr(e)?!0:Je.isFrozen(e)}var Kn="MapSet",Ir="Patches",Vs={};function ln(e){const t=Vs[e];return t||ut(0,e),t}var ql=e=>!!Vs[e],bn,Gs=()=>bn,Ul=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:ql(Kn)?ln(Kn):void 0});function Wa(e,t){t&&(e.patchPlugin_=ln(Ir),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Cr(e){Er(e),e.drafts_.forEach(Wl),e.drafts_=null}function Er(e){e===bn&&(bn=e.parent_)}var Ya=e=>bn=Ul(bn,e);function Wl(e){const t=e[qe];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Va(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];if(e!==void 0&&e!==n){n[qe].modified_&&(Cr(t),ut(4)),_t(e)&&(e=Ga(t,e));const{patchPlugin_:a}=t;a&&a.generateReplacementPatches_(n[qe].base_,e,t)}else e=Ga(t,n);return Yl(t,e,!0),Cr(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Ws?e:void 0}function Ga(e,t){if(rr(t))return t;const n=t[qe];if(!n)return Jr(t,e.handledSet_,e);if(!ar(n,e))return t;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(e);Qs(n,e)}return n.copy_}function Yl(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Zr(t,n)}function Xs(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var ar=(e,t)=>e.scope_===t,Vl=[];function Ks(e,t,n,r){const a=xt(e),s=e.type_;if(r!==void 0&&Tr(a,r,s)===t){Xn(a,r,n,s);return}if(!e.draftLocations_){const c=e.draftLocations_=new Map;Cn(a,(l,d)=>{if(Pt(d)){const f=c.get(d)||[];f.push(l),c.set(d,f)}})}const o=e.draftLocations_.get(t)??Vl;for(const c of o)Xn(a,c,n,s)}function Gl(e,t,n){e.callbacks_.push(function(a){const s=t;if(!s||!ar(s,a))return;a.mapSetPlugin_?.fixSetContents(s);const o=Qr(s);Ks(e,s.draft_??s,o,n),Qs(s,a)})}function Qs(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||(e.assigned_?.size??0)>0)){const{patchPlugin_:r}=t;if(r){const a=r.getPath(e);a&&r.generatePatches_(e,a,t)}Xs(e)}}function Xl(e,t,n){const{scope_:r}=e;if(Pt(n)){const a=n[qe];ar(a,r)&&a.callbacks_.push(function(){Nn(e);const o=Qr(a);Ks(e,n,o,t)})}else _t(n)&&e.callbacks_.push(function(){const s=xt(e);Tr(s,t,e.type_)===n&&r.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&Jr(Tr(e.copy_,t,e.type_),r.handledSet_,r)})}function Jr(e,t,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||Pt(e)||t.has(e)||!_t(e)||rr(e)||(t.add(e),Cn(e,(r,a)=>{if(Pt(a)){const s=a[qe];if(ar(s,n)){const o=Qr(s);Xn(e,r,o,e.type_),Xs(s)}}else _t(a)&&Jr(a,t,n)})),e}function Kl(e,t){const n=er(e),r={type_:n?1:0,scope_:t?t.scope_:Gs(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let a=r,s=$r;n&&(a=[r],s=xn);const{revoke:o,proxy:c}=Proxy.revocable(a,s);return r.draft_=c,r.revoke_=o,[c,r]}var $r={get(e,t){if(t===qe)return e;const n=xt(e);if(!Ua(n,t,e.type_))return Ql(e,n,t);const r=n[t];if(e.finalized_||!_t(r))return r;if(r===gr(e.base_,t)){Nn(e);const a=e.type_===1?+t:t,s=Mr(e.scope_,r,e,a);return e.copy_[a]=s}return r},has(e,t){return t in xt(e)},ownKeys(e){return Reflect.ownKeys(xt(e))},set(e,t,n){const r=Zs(xt(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const a=gr(xt(e),t),s=a?.[qe];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_.set(t,!1),!0;if(Fl(n,a)&&(n!==void 0||Ua(e.base_,t,e.type_)))return!0;Nn(e),Pr(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_.set(t,!0),Xl(e,t,n)),!0},deleteProperty(e,t){return Nn(e),gr(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),Pr(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=xt(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{[On]:!0,[xr]:e.type_!==1||t!=="length",[Gn]:r[Gn],[kn]:n[t]}},defineProperty(){ut(11)},getPrototypeOf(e){return on(e.base_)},setPrototypeOf(){ut(12)}},xn={};Cn($r,(e,t)=>{xn[e]=function(){const n=arguments;return n[0]=n[0][0],t.apply(this,n)}});xn.deleteProperty=function(e,t){return xn.set.call(this,e,t,void 0)};xn.set=function(e,t,n){return $r.set.call(this,e[0],t,n,e[0])};function gr(e,t){const n=e[qe];return(n?xt(n):e)[t]}function Ql(e,t,n){const r=Zs(t,n);return r?kn in r?r[kn]:r.get?.call(e.draft_):void 0}function Zs(e,t){if(!(t in e))return;let n=on(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=on(n)}}function Pr(e){e.modified_||(e.modified_=!0,e.parent_&&Pr(e.parent_))}function Nn(e){e.copy_||(e.assigned_=new Map,e.copy_=Sr(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Zl=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(t,n,r)=>{if(Jt(t)&&!Jt(n)){const s=n;n=t;const o=this;return function(l=s,...d){return o.produce(l,f=>n.call(this,f,...d))}}Jt(n)||ut(6),r!==void 0&&!Jt(r)&&ut(7);let a;if(_t(t)){const s=Ya(this),o=Mr(s,t,void 0);let c=!0;try{a=n(o),c=!1}finally{c?Cr(s):Er(s)}return Wa(s,r),Va(a,s)}else if(!t||!Kr(t)){if(a=n(t),a===void 0&&(a=t),a===Ws&&(a=void 0),this.autoFreeze_&&Zr(a,!0),r){const s=[],o=[];ln(Ir).generateReplacementPatches_(t,a,{patches_:s,inversePatches_:o}),r(s,o)}return a}else ut(1,t)},this.produceWithPatches=(t,n)=>{if(Jt(t))return(o,...c)=>this.produceWithPatches(o,l=>t(l,...c));let r,a;return[this.produce(t,n,(o,c)=>{r=o,a=c}),r,a]},mr(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),mr(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),mr(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){_t(e)||ut(8),Pt(e)&&(e=Jl(e));const t=Ya(this),n=Mr(t,e,void 0);return n[qe].isManual_=!0,Er(t),n}finishDraft(e,t){const n=e&&e[qe];(!n||!n.isManual_)&&ut(9);const{scope_:r}=n;return Wa(r,t),Va(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const a=t[n];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}n>-1&&(t=t.slice(n+1));const r=ln(Ir).applyPatches_;return Pt(e)?r(e,t):this.produce(e,a=>r(a,t))}};function Mr(e,t,n,r){const[a,s]=tr(t)?ln(Kn).proxyMap_(t,n):nr(t)?ln(Kn).proxySet_(t,n):Kl(t,n);return(n?.scope_??Gs()).drafts_.push(a),s.callbacks_=n?.callbacks_??[],s.key_=r,n&&r!==void 0?Gl(n,s,r):s.callbacks_.push(function(l){l.mapSetPlugin_?.fixSetContents(s);const{patchPlugin_:d}=l;s.modified_&&d&&d.generatePatches_(s,[],l)}),a}function Jl(e){return Pt(e)||ut(10,e),Js(e)}function Js(e){if(!_t(e)||rr(e))return e;const t=e[qe];let n,r=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Sr(e,t.scope_.immer_.useStrictShallowCopy_),r=t.scope_.immer_.shouldUseStrictIteration()}else n=Sr(e,!0);return Cn(n,(a,s)=>{Xn(n,a,Js(s))},r),t&&(t.finalized_=!1),n}var $l=new Zl,$s=$l.produce;function ei(e){return({dispatch:n,getState:r})=>a=>s=>typeof s=="function"?s(n,r,e):a(s)}var ec=ei(),tc=ei,nc=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Yn:Yn.apply(null,arguments)};function Xa(e,t){function n(...r){if(t){let a=t(...r);if(!a)throw new Error(It(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>jl(r)&&r.type===e,n}var ti=class hn extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,hn.prototype)}static get[Symbol.species](){return hn}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new hn(...t[0].concat(this)):new hn(...t.concat(this))}};function Ka(e){return _t(e)?$s(e,()=>{}):e}function Dn(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function rc(e){return typeof e=="boolean"}var ac=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:a=!0,actionCreatorCheck:s=!0}=t??{};let o=new ti;return n&&(rc(n)?o.push(ec):o.push(tc(n.extraArgument))),o},sc="RTK_autoBatch",Qa=e=>t=>{setTimeout(t,e)},ic=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let a=!0,s=!1,o=!1;const c=new Set,l=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Qa(10):e.type==="callback"?e.queueNotification:Qa(e.timeout),d=()=>{o=!1,s&&(s=!1,c.forEach(f=>f()))};return Object.assign({},r,{subscribe(f){const g=()=>a&&f(),h=r.subscribe(g);return c.add(f),()=>{h(),c.delete(f)}},dispatch(f){try{return a=!f?.meta?.[sc],s=!a,s&&(o||(o=!0,l(d))),r.dispatch(f)}finally{a=!0}}})},oc=e=>function(n){const{autoBatch:r=!0}=n??{};let a=new ti(e);return r&&a.push(ic(typeof r=="object"?r:void 0)),a};function lc(e){const t=ac(),{reducer:n=void 0,middleware:r,devTools:a=!0,preloadedState:s=void 0,enhancers:o=void 0}=e||{};let c;if(typeof n=="function")c=n;else if(Xr(n))c=Ol(n);else throw new Error(It(1));let l;typeof r=="function"?l=r(t):l=t();let d=Yn;a&&(d=nc({trace:!1,...typeof a=="object"&&a}));const f=Nl(...l),g=oc(f);let h=typeof o=="function"?o(g):g();const _=d(...h);return Us(c,s,_)}function ni(e){const t={},n=[];let r;const a={addCase(s,o){const c=typeof s=="string"?s:s.type;if(!c)throw new Error(It(28));if(c in t)throw new Error(It(29));return t[c]=o,a},addAsyncThunk(s,o){return o.pending&&(t[s.pending.type]=o.pending),o.rejected&&(t[s.rejected.type]=o.rejected),o.fulfilled&&(t[s.fulfilled.type]=o.fulfilled),o.settled&&n.push({matcher:s.settled,reducer:o.settled}),a},addMatcher(s,o){return n.push({matcher:s,reducer:o}),a},addDefaultCase(s){return r=s,a}};return e(a),[t,n,r]}function cc(e){return typeof e=="function"}function dc(e,t){let[n,r,a]=ni(t),s;if(cc(e))s=()=>Ka(e());else{const c=Ka(e);s=()=>c}function o(c=s(),l){let d=[n[l.type],...r.filter(({matcher:f})=>f(l)).map(({reducer:f})=>f)];return d.filter(f=>!!f).length===0&&(d=[a]),d.reduce((f,g)=>{if(g)if(Pt(f)){const _=g(f,l);return _===void 0?f:_}else{if(_t(f))return $s(f,h=>g(h,l));{const h=g(f,l);if(h===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return f},c)}return o.getInitialState=s,o}var uc=Symbol.for("rtk-slice-createasyncthunk");function fc(e,t){return`${e}/${t}`}function vc({creators:e}={}){const t=e?.asyncThunk?.[uc];return function(r){const{name:a,reducerPath:s=a}=r;if(!a)throw new Error(It(11));const o=(typeof r.reducers=="function"?r.reducers(pc()):r.reducers)||{},c=Object.keys(o),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(M,C){const N=typeof M=="string"?M:M.type;if(!N)throw new Error(It(12));if(N in l.sliceCaseReducersByType)throw new Error(It(13));return l.sliceCaseReducersByType[N]=C,d},addMatcher(M,C){return l.sliceMatchers.push({matcher:M,reducer:C}),d},exposeAction(M,C){return l.actionCreators[M]=C,d},exposeCaseReducer(M,C){return l.sliceCaseReducersByName[M]=C,d}};c.forEach(M=>{const C=o[M],N={reducerName:M,type:fc(a,M),createNotation:typeof r.reducers=="function"};gc(C)?yc(N,C,d,t):mc(N,C,d)});function f(){const[M={},C=[],N=void 0]=typeof r.extraReducers=="function"?ni(r.extraReducers):[r.extraReducers],S={...M,...l.sliceCaseReducersByType};return dc(r.initialState,W=>{for(let q in S)W.addCase(q,S[q]);for(let q of l.sliceMatchers)W.addMatcher(q.matcher,q.reducer);for(let q of C)W.addMatcher(q.matcher,q.reducer);N&&W.addDefaultCase(N)})}const g=M=>M,h=new Map,_=new WeakMap;let x;function z(M,C){return x||(x=f()),x(M,C)}function k(){return x||(x=f()),x.getInitialState()}function H(M,C=!1){function N(W){let q=W[M];return typeof q>"u"&&C&&(q=Dn(_,N,k)),q}function S(W=g){const q=Dn(h,C,()=>new WeakMap);return Dn(q,W,()=>{const Y={};for(const[$,Z]of Object.entries(r.selectors??{}))Y[$]=hc(Z,W,()=>Dn(_,W,k),C);return Y})}return{reducerPath:M,getSelectors:S,get selectors(){return S(N)},selectSlice:N}}const A={name:a,reducer:z,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:k,...H(s),injectInto(M,{reducerPath:C,...N}={}){const S=C??s;return M.inject({reducerPath:S,reducer:z},N),{...A,...H(S,!0)}}};return A}}function hc(e,t,n,r){function a(s,...o){let c=t(s);return typeof c>"u"&&r&&(c=n()),e(c,...o)}return a.unwrapped=e,a}var ri=vc();function pc(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function mc({type:e,reducerName:t,createNotation:n},r,a){let s,o;if("reducer"in r){if(n&&!_c(r))throw new Error(It(17));s=r.reducer,o=r.prepare}else s=r;a.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?Xa(e,o):Xa(e))}function gc(e){return e._reducerDefinitionType==="asyncThunk"}function _c(e){return e._reducerDefinitionType==="reducerWithPrepare"}function yc({type:e,reducerName:t},n,r,a){if(!a)throw new Error(It(18));const{payloadCreator:s,fulfilled:o,pending:c,rejected:l,settled:d,options:f}=n,g=a(e,s,f);r.exposeAction(t,g),o&&r.addCase(g.fulfilled,o),c&&r.addCase(g.pending,c),l&&r.addCase(g.rejected,l),d&&r.addMatcher(g.settled,d),r.exposeCaseReducer(t,{fulfilled:o||Rn,pending:c||Rn,rejected:l||Rn,settled:d||Rn})}function Rn(){}function It(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}const ai={quinn:{level1:{level:1,hp:8,maxHp:8,ac:17,surgeValue:4,attackBonus:6,damage:2},level2:{level:2,hp:10,maxHp:10,ac:18,surgeValue:5,attackBonus:7,damage:2}},vistra:{level1:{level:1,hp:10,maxHp:10,ac:18,surgeValue:5,attackBonus:8,damage:2},level2:{level:2,hp:12,maxHp:12,ac:19,surgeValue:6,attackBonus:9,damage:2}},keyleth:{level1:{level:1,hp:10,maxHp:10,ac:18,surgeValue:5,attackBonus:7,damage:2},level2:{level:2,hp:12,maxHp:12,ac:19,surgeValue:6,attackBonus:8,damage:2}},tarak:{level1:{level:1,hp:8,maxHp:8,ac:17,surgeValue:4,attackBonus:7,damage:2},level2:{level:2,hp:10,maxHp:10,ac:18,surgeValue:5,attackBonus:8,damage:2}},haskan:{level1:{level:1,hp:6,maxHp:6,ac:14,surgeValue:3,attackBonus:4,damage:1},level2:{level:2,hp:8,maxHp:8,ac:15,surgeValue:4,attackBonus:5,damage:1}}},si=5,wc={kobold:{attackBonus:5,damage:1},snake:{attackBonus:4,damage:1},cultist:{attackBonus:5,damage:1}},Pn=[{id:"kobold",name:"Kobold Dragonshield",ac:14,hp:1,maxHp:1,xp:1,imagePath:"assets/Monster_KoboldDragonshield.png"},{id:"snake",name:"Snake",ac:12,hp:1,maxHp:1,xp:1,imagePath:"assets/Monster_Snake.png"},{id:"cultist",name:"Cultist",ac:13,hp:2,maxHp:2,xp:1,imagePath:"assets/Monster_Cultist.png"}],kc=["kobold","kobold","kobold","snake","snake","snake","cultist","cultist","cultist"],Ct=[{id:"quinn",name:"Quinn",heroClass:"Cleric",imagePath:"assets/Hero_Cleric_Quinn.png",speed:5,attack:{name:"Mace",attackBonus:6,damage:2,range:1},hp:8,maxHp:8,ac:17},{id:"vistra",name:"Vistra",heroClass:"Fighter",imagePath:"assets/Hero_Fighter_Vistra.png",speed:5,attack:{name:"Warhammer",attackBonus:8,damage:2,range:1},hp:10,maxHp:10,ac:18},{id:"keyleth",name:"Keyleth",heroClass:"Paladin",imagePath:"assets/Hero_Paladin_Keyleth.png",speed:6,attack:{name:"Longsword",attackBonus:7,damage:2,range:1},hp:10,maxHp:10,ac:18},{id:"tarak",name:"Tarak",heroClass:"Rogue",imagePath:"assets/Hero_Rogue_Tarak.png",speed:6,attack:{name:"Short Sword",attackBonus:7,damage:2,range:1},hp:8,maxHp:8,ac:17},{id:"haskan",name:"Haskan",heroClass:"Wizard",imagePath:"assets/Hero_Wizard_Haskan.png",speed:6,attack:{name:"Quarterstaff",attackBonus:4,damage:1,range:1},hp:6,maxHp:6,ac:14}],bc=[{x:1,y:2},{x:2,y:2},{x:3,y:2},{x:3,y:3},{x:3,y:4},{x:1,y:5},{x:2,y:5},{x:3,y:5}],ii=[{tileType:"tile-black-2exit-a",imagePath:"assets/Tile_Black_x2_01.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!0},{tileType:"tile-black-2exit-b",imagePath:"assets/Tile_Black_x2_02.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!0},{tileType:"tile-black-2exit-c",imagePath:"assets/Tile_Black_x2_03.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!0},{tileType:"tile-black-3exit-a",imagePath:"assets/Tile_Black_x3_01.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!0},{tileType:"tile-black-3exit-b",imagePath:"assets/Tile_Black_x3_02.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!0},{tileType:"tile-black-3exit-c",imagePath:"assets/Tile_Black_x3_03.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!0},{tileType:"tile-black-4exit-a",imagePath:"assets/Tile_Black_x4_01.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!0},{tileType:"tile-black-4exit-b",imagePath:"assets/Tile_Black_x4_02.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!0},{tileType:"tile-white-2exit-a",imagePath:"assets/Tile_White_x2_01.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!1},{tileType:"tile-white-2exit-b",imagePath:"assets/Tile_White_x2_02.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!1},{tileType:"tile-white-2exit-c",imagePath:"assets/Tile_White_x2_03.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!1},{tileType:"tile-white-2exit-d",imagePath:"assets/Tile_White_x2_04.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!1},{tileType:"tile-white-2exit-e",imagePath:"assets/Tile_White_x2_05.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!1},{tileType:"tile-white-3exit-a",imagePath:"assets/Tile_White_x3_01.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!1},{tileType:"tile-white-3exit-b",imagePath:"assets/Tile_White_x3_02.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!1},{tileType:"tile-white-3exit-c",imagePath:"assets/Tile_White_x3_03.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!1}],xc=["tile-black-2exit-a","tile-black-2exit-b","tile-black-2exit-c","tile-black-3exit-a","tile-black-3exit-b","tile-black-3exit-c","tile-black-4exit-a","tile-black-4exit-b","tile-white-2exit-a","tile-white-2exit-b","tile-white-2exit-c","tile-white-2exit-d","tile-white-2exit-e","tile-white-3exit-a","tile-white-3exit-b","tile-white-3exit-c"],Tc={id:"start-tile",tileType:"start",position:{col:0,row:0},rotation:0,edges:{north:"unexplored",south:"unexplored",east:"unexplored",west:"unexplored"}},Sc=[{id:"volcanic-spray",name:"Volcanic Spray",type:"event",description:"Hot volcanic spray erupts from a crack in the ground. The active hero takes 1 damage.",effect:{type:"damage",amount:1,target:"active-hero"},imagePath:"assets/Encounter_VolcanicSpray.png"},{id:"goblin-ambush",name:"Goblin Ambush",type:"event",description:"The active hero takes 1 damage.",effect:{type:"damage",amount:1,target:"active-hero"},imagePath:"assets/Encounter_GoblinAmbush.png"},{id:"dark-fog",name:"Dark Fog",type:"environment",description:"All heroes have -2 to attack rolls until the end of the next Hero Phase.",effect:{type:"environment"},imagePath:"assets/Encounter_DarkFog.png"},{id:"cave-in",name:"Cave-In",type:"event",description:"All heroes take 1 damage.",effect:{type:"damage",amount:1,target:"all-heroes"},imagePath:"assets/Encounter_CaveIn.png"},{id:"poisoned-dart-trap",name:"Poisoned Dart Trap",type:"trap",description:"The active hero takes 2 damage unless they succeed on a DC 12 Dexterity check.",effect:{type:"trap",disableDC:12},imagePath:"assets/Encounter_PoisonedDartTrap.png"}],Ic=["volcanic-spray","goblin-ambush","dark-fog","cave-in","poisoned-dart-trap"],oi=[{id:1,name:"Healing Hymn",type:"utility",heroClass:"Cleric",description:"You sing a soothing song that seals the wounds of you and your allies.",rule:`Use this power during your Hero Phase.
You and one other Hero on your tile regain 2 Hit Points.`,isCustomAbility:!0},{id:2,name:"Cleric's Shield",type:"at-will",heroClass:"Cleric",description:"You utter a minor defensive prayer as you strike your foe.",rule:`Attack one adjacent Monster.
Hit or Miss: Choose 1 Hero on your tile. That Hero gains a +2 bonus to AC until you use this power again.`,attackBonus:6,damage:1},{id:3,name:"Righteous Advance",type:"at-will",heroClass:"Cleric",description:"Your attack grants your ally time to advance.",rule:`Attack one adjacent Monster.
Hit or Miss: One Hero on your tile moves 2 squares.`,attackBonus:6,damage:1},{id:4,name:"Sacred Flame",type:"at-will",heroClass:"Cleric",description:"Sacred light shines from above, searing a single enemy with holy radiance.",rule:`Attack one Monster within 1 tile of you.
If you hit, choose yourself or one Hero on your tile. That Hero gains 1 Hit Point.`,attackBonus:6,damage:1},{id:5,name:"Blade Barrier",type:"daily",heroClass:"Cleric",description:"You conjure a wall of whirling blades to cut apart advancing foes.",rule:`Choose a tile within 2 tiles of you. Place five Blade Barrier tokens on five different squares on that tile.
When a Monster is placed on a square with a Blade Barrier token, remove that token and deal 1 damage to the Monster.`},{id:6,name:"Cause Fear",type:"daily",heroClass:"Cleric",description:"Your holy symbol ignites with divine light, slamming your foes with uncontrollable terror.",rule:`Choose a tile within 1 tile of you. Each ally on that tile adjacent to a Monster can make an At-Will attack with a +2 bonus to the Attack roll.
After the attacks, place each Monster remaining on a tile within 2 tiles of you.`},{id:7,name:"Wrathful Thunder",type:"daily",heroClass:"Cleric",description:"When you strike, a shattering thunderclap fills the room.",rule:`Attack one adjacent Monster.
After the attack, choose one Monster on your tile. Pass that Monster's card to the player on your right. That player now controls the Monster.`,attackBonus:6,damage:3},{id:8,name:"Astral Refuge",type:"utility",heroClass:"Cleric",description:"You send an ally to a safe refuge in the Astral Sea for a short time.",rule:`Use this power at the start of any Villain Phase.
Choose one Hero within 2 tiles of you. Remove that Hero from the tile. At the start of that player's next Hero Phase, that player places the Hero on any tile.`},{id:9,name:"Command",type:"utility",heroClass:"Cleric",description:"You utter a single word that your foe must obey.",rule:`Use this power during your Hero Phase.
Choose one Monster on your tile. Place that Monster on a tile within 2 tiles of you.`},{id:10,name:"Perseverance",type:"utility",heroClass:"Cleric",description:"A house does not stand with just a single wall.",rule:`Use this power when any player draws an Encounter Card.
The cost to cancel the Encounter Card is reduced by the number of Heroes on your tile, including your own Hero.`},{id:11,name:"Dwarven Resilience",type:"utility",heroClass:"Dwarf",description:"Your dwarven heritage grants you uncommonly strong health.",rule:`Use this power during your Hero Phase instead of moving.
You regain 4 Hit Points.`,isCustomAbility:!0},{id:12,name:"Charge",type:"at-will",heroClass:"Fighter",description:"You rush into combat.",rule:"Move up to your speed, then attack one adjacent Monster.",attackBonus:8,damage:1},{id:13,name:"Reaping Strike",type:"at-will",heroClass:"Fighter",description:"You punctuate your scything attacks with wicked jabs and small cutting blows that slip through your enemy's defenses.",rule:"Attack one adjacent Monster twice.",attackBonus:4,damage:1},{id:14,name:"Sure Strike",type:"at-will",heroClass:"Fighter",description:"You trade power for precision.",rule:"Attack one adjacent Monster.",attackBonus:11,damage:1},{id:15,name:"Comeback Strike",type:"daily",heroClass:"Fighter",description:"A timely strike gives you the strength to fight on.",rule:`Attack one adjacent Monster.
If you hit, you regain 2 hit points.
If you miss, do not flip this card over.`,attackBonus:7,damage:2},{id:16,name:"Into the Fray",type:"daily",heroClass:"Fighter",description:"You unleash a fierce battle cry as you leap boldly into battle.",rule:"Place your Hero adjacent to any Hero within 2 tiles of you. Attack one adjacent Monster.",attackBonus:7,damage:3},{id:17,name:"Taunting Advance",type:"daily",heroClass:"Fighter",description:"You rush forward and call forth your enemy.",rule:"Move your speed. Then choose a Monster within 2 tiles of you. Place that Monster adjacent to your Hero and attack it.",attackBonus:8,damage:3},{id:18,name:"Inspiring Advice",type:"utility",heroClass:"Fighter",description:"You encourage your teammate to fight on.",rule:`Use when a Hero misses a Monster with an attack.
The Hero rerolls the attack.
If the attack misses, do not flip this card over.`},{id:19,name:"One for the Team",type:"utility",heroClass:"Fighter",description:"You protect your ally from the hazards of the dungeon.",rule:`Use when any player draws an Encounter Card.
Resolve the Encounter Card as if you drew it.`},{id:20,name:"To Arms!",type:"utility",heroClass:"Fighter",description:"You rally your companions to meet your foe head on.",rule:`Use when a new Monster is placed on a tile.
You and one Hero on your tile can move your speed.`},{id:21,name:"Lay On Hands",type:"utility",heroClass:"Paladin",description:"Your divine touch instantly heals wounds.",rule:"One adjacent Hero regains 2 hit points.",isCustomAbility:!0},{id:22,name:"Divine Challenge",type:"at-will",heroClass:"Paladin",description:"You boldly confront a nearby enemy.",rule:`Choose one Monster within 1 tile of you. Place that Monster adjacent to your Hero.
Attack one adjacent Monster.`,attackBonus:8,damage:1},{id:23,name:"Holy Strike",type:"at-will",heroClass:"Paladin",description:"You strike an enemy, igniting it with holy light.",rule:`Attack one adjacent Monster.
If you started your Hero Phase adjacent to the Monster, deal +1 damage if you hit.`,attackBonus:8,damage:1},{id:24,name:"Valiant Strike",type:"at-will",heroClass:"Paladin",description:"The odds against you add strength to your attack.",rule:`Attack one adjacent Monster.
When making this attack, you get a +1 bonus to attack for each Monster adjacent to your Hero.`,attackBonus:8,damage:1},{id:25,name:"Arcing Strike",type:"daily",heroClass:"Paladin",description:"You swing your weapon in a wide arc.",rule:"Attack one or two adjacent Monsters.",attackBonus:9,damage:3},{id:26,name:"Benign Transposition",type:"daily",heroClass:"Paladin",description:"You call upon divine power to switch places with an ally to strike a foe.",rule:`Choose 1 Hero within 2 tiles of you. You swap positions with that Hero.
After swapping positions, attack one adjacent Monster.`,attackBonus:8,damage:3},{id:27,name:"Righteous Smite",type:"daily",heroClass:"Paladin",description:"Your righteous attack fills your party with preternatural resolve.",rule:`Attack one adjacent Monster.
Hit or Miss: All Heroes on your tile regain 1 Hit Point.`,attackBonus:9,damage:3},{id:28,name:"Bravery",type:"utility",heroClass:"Paladin",description:"Your bravery gives you the power to fight on.",rule:`Use when a Monster within 1 tile of you activates during any player's Villain Phase.
Place your Hero adjacent to that Monster. You regain 1 hit point.`},{id:29,name:"Noble Shield",type:"utility",heroClass:"Paladin",description:"You quickly throw up your shield, protecting your friends from harm at your expense.",rule:`Use when a Monster targets you and at least one additional Hero with the same attack.
You are the only target of the attack, but the attack roll against you is automatically a 20 and cannot be rerolled.`},{id:30,name:"Virtue's Touch",type:"utility",heroClass:"Paladin",description:"Your gentle touch removes affliction.",rule:"Choose one adjacent Hero. End one condition on that Hero."},{id:31,name:"Furious Assault",type:"utility",heroClass:"Half-Orc",description:"Your wrath burns inside you, giving strength to your next attack.",rule:`Use this power when you hit a Monster with an attack.
The Monster takes +1 damage.`,isCustomAbility:!0},{id:32,name:"Distracting Jab",type:"at-will",heroClass:"Rogue",description:"You escape the clutches of your foe as it reacts to your attack.",rule:`Attack one adjacent Monster.
If you hit, move the Monster 1 square.
After the attack, move your speed.`,attackBonus:7,damage:1},{id:33,name:"Lucky Strike",type:"at-will",heroClass:"Rogue",description:"They fall for it if you're lucky, and then they fall.",rule:`Attack one Monster within 1 tile of you.
If you hit and your attack roll is an even number, deal +1 damage.`,attackBonus:7,damage:1},{id:34,name:"Positioning Shot",type:"at-will",heroClass:"Rogue",description:"To avoid your vicious attack, your enemy leaps exactly where you want it to be.",rule:`Attack one Monster within 2 tiles of you.
Hit or Miss: Place that Monster on any square on your tile or on an adjacent tile.`,attackBonus:7,damage:1},{id:35,name:"Acrobatic Onslaught",type:"daily",heroClass:"Rogue",description:"After a quick strike, you leap through the air, lining up your next target.",rule:`Attack one adjacent Monster.
Hit or Miss: Place your Hero on any tile within 2 tiles of where you started, and then use an At-Will power immediately.`,attackBonus:7,damage:2},{id:36,name:"King's Castle",type:"daily",heroClass:"Rogue",description:"It's hard to get the little guy when he's behind an ally who can crush plate armor in his teeth.",rule:`Swap positions with one Hero within 1 tile of you.
Attack 1 Monster within 2 tiles of you.`,attackBonus:7,damage:3},{id:37,name:"Tornado Strike",type:"daily",heroClass:"Rogue",description:"Your weapon becomes a blur as you make swift, sweeping attacks.",rule:`Attack four times. Each attack can be against any Monster on your tile.
After the attacks, place your Hero on any square on your tile.`,attackBonus:7,damage:1},{id:38,name:"Distant Diversion",type:"utility",heroClass:"Rogue",description:"The monster turns to investigate the sound of a thrown pebble.",rule:`Choose one Monster within 3 tiles of you.
Place that Monster onto an adjacent tile.`},{id:39,name:"Practiced Evasion",type:"utility",heroClass:"Rogue",description:"A quick flip and quicker fingers disables the trap.",rule:`Use this power when you are hit by an attack from a Trap or Event Attack Encounter Card.
The attack misses. If the attack was from a Trap Encounter Card, you get a free Disable check against that Trap.`},{id:40,name:"Tumbling Escape",type:"utility",heroClass:"Rogue",description:"You nimbly roll out of harm's way.",rule:`Use this power when a Monster hits you with an attack.
The attack misses. Place your Hero on any tile within 1 tile of where you started.`},{id:41,name:"Hurled Breath",type:"daily",heroClass:"Dragonborn",description:"You hurl your draconic breath, engulfing your foes a short distance away.",rule:`Choose a tile within 2 tiles of you. Attack each Monster on that tile.
This attack does not count as an attack action.`,attackBonus:5,damage:1,isCustomAbility:!0},{id:42,name:"Arc Lightning",type:"at-will",heroClass:"Wizard",description:"Lightning leaps from your outstretched hands, blasting your foes.",rule:"Attack up to two Monsters. Each monster can be on your tile or any tile within 1 tile of you.",attackBonus:7,damage:1},{id:43,name:"Hypnotism",type:"at-will",heroClass:"Wizard",description:"Your enemy's mouth goes slack as your magic takes control.",rule:"Choose a Monster within 1 tile of you. Move that Monster 1 tile. If it ends adjacent to another Monster, make an attack against the second Monster.",attackBonus:9,damage:1},{id:44,name:"Ray of Frost",type:"at-will",heroClass:"Wizard",description:"A blistering ray of white frost streaks to your target, slowing its reactions.",rule:"Attack one Monster on your tile or on any tile within 2 tiles of you.",attackBonus:7,damage:1},{id:45,name:"Flaming Sphere",type:"daily",heroClass:"Wizard",description:"You conjure a rolling ball of fire and control where it goes.",rule:`Place 3 Flaming Sphere tokens in a stack on any square within 1 tile of you.
Instead of moving during your Hero phase, you can move the Flaming Sphere stack 1 tile.
At the end of your Hero Phase, you can remove 1 Flaming Sphere token and deal 1 damage to each Monster on that tile.`},{id:46,name:"Shock Sphere",type:"daily",heroClass:"Wizard",description:"You hurl a crackling orb of lightning, engulfing your foes in its electric embrace.",rule:"Choose a tile within 2 tiles of you. Attack each Monster on that tile.",attackBonus:9,damage:2},{id:47,name:"Spectral Ram",type:"daily",heroClass:"Wizard",description:"You bash your foe with arcane force that sends it reeling.",rule:`Attack one Monster within 2 tiles of you.
Hit or Miss: Place the Monster onto any tile within 2 tiles of where it started.`,attackBonus:9,damage:3},{id:48,name:"Invisibility",type:"utility",heroClass:"Wizard",description:"You vanish from sight.",rule:`Use this power during your Hero Phase.
Until the start of your next Hero Phase, you do not count as the closest Hero for any Monster's tactics.
Monster attacks that attack every Hero on a tile still attack you.`},{id:49,name:"Mirror Image",type:"utility",heroClass:"Wizard",description:"You create three duplicate images of yourself.",rule:`Use this power during your Hero Phase.
Place 3 Mirror Image tokens on your Hero Card.
For each Mirror Image token on your Hero Card, you gain +2 AC. Whenever a Monster misses you with an attack, remove 1 Mirror Image token.`},{id:50,name:"Wizard Eye",type:"utility",heroClass:"Wizard",description:"You see through a magical hovering eye, allowing you to explore from a distance.",rule:`Use this power during your Hero Phase.
Place the Wizard Eye token on a tile within 1 tile of you.
Instead of moving during your Hero Phase, you can move the Wizard Eye marker 1 tile.
During your Exploration Phase, you can explore as if your Hero was on any unexplored edge on the Wizard Eye's tile.`}],li={quinn:1,vistra:11,tarak:31,keyleth:21,haskan:41};function ea(e){const n={Cleric:["Cleric"],Fighter:["Fighter","Dwarf"],Paladin:["Paladin"],Rogue:["Rogue","Half-Orc"],Wizard:["Wizard","Dragonborn"]}[e]||[];return oi.filter(r=>n.includes(r.heroClass))}function Cc(e){return ea(e).filter(t=>t.type==="at-will")}function Ec(e){return ea(e).filter(t=>t.type==="daily")}function Pc(e){return ea(e).filter(t=>t.type==="utility"&&!t.isCustomAbility)}function Qn(e){return oi.find(t=>t.id===e)}function Mc(e,t,n,r,a){const s=[t,n,...r,a];return{heroId:e,customAbility:t,utility:n,atWills:r,daily:a,cardStates:s.map(o=>({cardId:o,isFlipped:!1}))}}function Hc(e,t){return{...e,cardStates:e.cardStates.map(n=>n.cardId===t?{...n,isFlipped:!0}:n)}}function Ac(e,t){return{...e,dailyLevel2:t,cardStates:[...e.cardStates,{cardId:t,isFlipped:!1}]}}const Dc={availableHeroes:Ct,selectedHeroes:[],heroEdgeMap:{},powerCardSelections:{},heroPowerCards:{}},ci=ri({name:"heroes",initialState:Dc,reducers:{toggleHeroSelection:(e,t)=>{const n=t.payload,r=e.selectedHeroes.findIndex(a=>a.id===n);if(r>=0)e.selectedHeroes.splice(r,1),delete e.heroEdgeMap[n],delete e.powerCardSelections[n];else if(e.selectedHeroes.length<5){const a=e.availableHeroes.find(s=>s.id===n);a&&(e.selectedHeroes.push(a),e.powerCardSelections[n]={heroId:n,utility:null,atWills:[],daily:null})}},selectHeroFromEdge:(e,t)=>{const{heroId:n,edge:r}=t.payload,a=e.selectedHeroes.findIndex(s=>s.id===n);if(a>=0)e.heroEdgeMap[n]===r&&(e.selectedHeroes.splice(a,1),delete e.heroEdgeMap[n],delete e.powerCardSelections[n]);else if(e.selectedHeroes.length<5){const s=e.availableHeroes.find(o=>o.id===n);s&&(e.selectedHeroes.push(s),e.heroEdgeMap[n]=r,e.powerCardSelections[n]={heroId:n,utility:null,atWills:[],daily:null})}},clearSelection:e=>{e.selectedHeroes=[],e.heroEdgeMap={},e.powerCardSelections={},e.heroPowerCards={}},selectUtilityCard:(e,t)=>{const{heroId:n,cardId:r}=t.payload,a=e.powerCardSelections[n];a&&(a.utility=a.utility===r?null:r)},toggleAtWillCard:(e,t)=>{const{heroId:n,cardId:r}=t.payload,a=e.powerCardSelections[n];if(a){const s=a.atWills.indexOf(r);s>=0?a.atWills.splice(s,1):a.atWills.length<2&&a.atWills.push(r)}},selectDailyCard:(e,t)=>{const{heroId:n,cardId:r}=t.payload,a=e.powerCardSelections[n];a&&(a.daily=a.daily===r?null:r)},finalizePowerCardSelections:e=>{e.heroPowerCards={};for(const t of e.selectedHeroes){const n=e.powerCardSelections[t.id],r=li[t.id];n&&r&&n.utility&&n.daily&&n.atWills.length===2?e.heroPowerCards[t.id]=Mc(t.id,r,n.utility,n.atWills,n.daily):console.warn(`Hero ${t.id} has incomplete power card selection, skipping`)}},usePowerCard:(e,t)=>{const{heroId:n,cardId:r}=t.payload,a=e.heroPowerCards[n];a&&(e.heroPowerCards[n]=Hc(a,r))},addLevel2Daily:(e,t)=>{const{heroId:n,cardId:r}=t.payload,a=e.heroPowerCards[n];a&&(e.heroPowerCards[n]=Ac(a,r))}}}),{toggleHeroSelection:Cf,selectHeroFromEdge:Rc,clearSelection:Ef,selectUtilityCard:zc,toggleAtWillCard:Oc,selectDailyCard:Nc,finalizePowerCardSelections:jc,usePowerCard:Bc,addLevel2Daily:Pf}=ci.actions,Fc=ci.reducer,pn={minX:1,maxX:3,minY:0,maxY:7,staircase:[{x:1,y:3},{x:2,y:3},{x:1,y:4},{x:2,y:4}]},Zt=4,Lc=4,qc=8;function Mn(e){const{col:t,row:n}=e.position;if(e.tileType==="start")return{minX:0,maxX:3,minY:0,maxY:7};let r,a;return t>0?r=Lc+(t-1)*Zt:t<0?r=t*Zt:r=0,n>0?a=qc+(n-1)*Zt:n<0?a=n*Zt:a=0,{minX:r,maxX:r+Zt-1,minY:a,maxY:a+Zt-1}}function Tn(e,t){for(const n of t.tiles){const r=Mn(n);if(e.x>=r.minX&&e.x<=r.maxX&&e.y>=r.minY&&e.y<=r.maxY)return n}return null}function Uc(e){return e.x>=pn.minX&&e.x<=pn.maxX&&e.y>=pn.minY&&e.y<=pn.maxY}function di(e){return pn.staircase.some(t=>t.x===e.x&&t.y===e.y)}function Wc(e,t){return Uc(e)&&!di(e)}function Yc(e,t,n){return t.some(r=>r.position.x===e.x&&r.position.y===e.y&&r.heroId!==n)}function Vc(e,t,n,r){const a=Mn(r),s=r.tileType==="start"?1:a.minX,o=e.y===a.minY,c=e.y===a.maxY,l=e.x===a.maxX,d=e.x===s,f=n<0?"north":n>0?"south":null,g=t<0?"west":t>0?"east":null;if(!f||!g)return!1;let h=!1,_=!1;return f==="north"&&o&&r.edges.north==="wall"&&(h=!0),f==="south"&&c&&r.edges.south==="wall"&&(h=!0),g==="east"&&l&&r.edges.east==="wall"&&(_=!0),g==="west"&&d&&r.edges.west==="wall"&&(_=!0),h&&_}function Gc(e,t,n,r){const a=r.x-n.x,s=r.y-n.y;if(a!==0&&s!==0)return!1;let o,c;return s<0?(o="north",c="south"):s>0?(o="south",c="north"):a>0?(o="east",c="west"):(o="west",c="east"),!(e.edges[o]!=="open"||t.edges[c]!=="open")}function ta(e,t){const n=[],r=[{dx:0,dy:-1,cardinal:!0},{dx:0,dy:1,cardinal:!0},{dx:-1,dy:0,cardinal:!0},{dx:1,dy:0,cardinal:!0},{dx:-1,dy:-1,cardinal:!1},{dx:1,dy:-1,cardinal:!1},{dx:-1,dy:1,cardinal:!1},{dx:1,dy:1,cardinal:!1}];if(!t){for(const s of r){const o={x:e.x+s.dx,y:e.y+s.dy};Wc(o)&&n.push(o)}return n}const a=Tn(e,t);if(!a)return n;for(const s of r){const o={x:e.x+s.dx,y:e.y+s.dy},c=Tn(o,t);if(c&&!(c.tileType==="start"&&(di(o)||o.x<1))){if(a.id===c.id){if(!s.cardinal&&Vc(e,s.dx,s.dy,a))continue;n.push(o);continue}s.cardinal&&Gc(a,c,e,o)&&n.push(o)}}return n}function Xc(e,t,n,r,a){const s=[],o=new Set,c=[{pos:e,distance:0}];for(o.add(`${e.x},${e.y}`);c.length>0;){const l=c.shift();if(!l)break;if(l.distance>0&&!Yc(l.pos,n,r)&&s.push(l.pos),l.distance<t){const d=ta(l.pos,a);for(const f of d){const g=`${f.x},${f.y}`;o.has(g)||(o.add(g),c.push({pos:f,distance:l.distance+1}))}}}return s}function Kc(e,t){return t.some(n=>n.x===e.x&&n.y===e.y)}const Qc={north:[{x:1,y:0},{x:2,y:0},{x:3,y:0}],south:[{x:1,y:7},{x:2,y:7},{x:3,y:7}],east:[{x:3,y:0},{x:3,y:1},{x:3,y:2},{x:3,y:5},{x:3,y:6},{x:3,y:7}],west:[{x:1,y:0},{x:1,y:1},{x:1,y:2},{x:1,y:5},{x:1,y:6},{x:1,y:7}]};function Zc(e,t){return Qc[t].some(r=>r.x===e.x&&r.y===e.y)}function na(e){return{north:"south",south:"north",east:"west",west:"east"}[e]}function Jc(e,t){const n=t.tiles.find(r=>r.id==="start-tile");if(!n)return null;for(const r of t.unexploredEdges)if(r.tileId===n.id&&Zc(e.position,r.direction))return r;return null}function $c(e,t){const{col:n,row:r}=e.position;switch(t){case"north":return{col:n,row:r-1};case"south":return{col:n,row:r+1};case"east":return{col:n+1,row:r};case"west":return{col:n-1,row:r}}}function ed(e){const t=na(e);return{south:0,west:90,north:180,east:270}[t]}function ui(e){return ii.find(t=>t.tileType===e)}function td(e,t,n){const r=n.tiles.find(f=>f.id===e.tileId);if(!r)return null;const a=$c(r,e.direction),s=ed(e.direction);if(!ui(t))return null;const c=`tile-${n.tiles.length}`,d={north:"unexplored",south:"unexplored",east:"unexplored",west:"unexplored",[na(e.direction)]:"open"};return{id:c,tileType:t,position:a,rotation:s,edges:d}}function Hr(){return{tiles:[{...Tc}],unexploredEdges:[{tileId:"start-tile",direction:"north"},{tileId:"start-tile",direction:"south"},{tileId:"start-tile",direction:"east"},{tileId:"start-tile",direction:"west"}],tileDeck:[]}}function nd(e,t=Math.random){const n=[...e];for(let r=n.length-1;r>0;r--){const a=Math.floor(t()*(r+1));[n[r],n[a]]=[n[a],n[r]]}return n}function rd(e,t=Math.random){return nd(e,t)}function ad(e){if(e.length===0)return{drawnTile:null,remainingDeck:[]};const[t,...n]=e;return{drawnTile:t,remainingDeck:n}}function sd(e,t,n){const r=e.unexploredEdges.filter(l=>!(l.tileId===t.tileId&&l.direction===t.direction)),a=na(t.direction),o=["north","south","east","west"].filter(l=>l!==a&&n.edges[l]==="unexplored").map(l=>({tileId:n.id,direction:l}));return{tiles:[...e.tiles.map(l=>l.id===t.tileId?{...l,edges:{...l.edges,[t.direction]:"open"}}:l),n],unexploredEdges:[...r,...o],tileDeck:e.tileDeck}}function fi(e,t=Math.random){const n=[...e];for(let r=n.length-1;r>0;r--){const a=Math.floor(t()*(r+1));[n[r],n[a]]=[n[a],n[r]]}return n}function id(e=Math.random){return{drawPile:fi([...kc],e),discardPile:[]}}function od(e,t=Math.random){if(e.drawPile.length===0){if(e.discardPile.length===0)return{monster:null,deck:e};const a=fi(e.discardPile,t);return{monster:a[0],deck:{drawPile:a.slice(1),discardPile:[]}}}const[n,...r]=e.drawPile;return{monster:n,deck:{drawPile:r,discardPile:e.discardPile}}}function ld(e,t){return{drawPile:e.drawPile,discardPile:[...e.discardPile,t]}}function ra(e){return Pn.find(t=>t.id===e)}function cd(e,t,n,r,a){const s=ra(e);return s?{monsterId:e,instanceId:`${e}-${a}`,position:t,currentHp:s.hp,controllerId:n,tileId:r}:null}const dd=4,Za=Math.floor(dd/2);function ud(){return{x:Za,y:Za}}function fd(e,t){return e.currentHp===0&&t.healingSurges>0}function vd(e,t){return e.currentHp===0&&t.healingSurges===0}function hd(e,t){const n=e.surgeValue;return{heroState:{...e,currentHp:Math.min(n,e.maxHp)},resources:{...t,healingSurges:t.healingSurges-1}}}function vi(e=Math.random){return Math.floor(e()*20)+1}function pd(e,t,n=Math.random){const r=vi(n),a=r+e.attackBonus,s=r===20||a>=t,o=r===20;return{roll:r,attackBonus:e.attackBonus,total:a,targetAC:t,isHit:s,damage:s?e.damage:0,isCritical:o}}function md(e,t,n){return e.level===1&&t===20&&n.xp>=si}function gd(e,t){const n=ai[e.heroId];if(!n)return console.warn(`Hero levels not found for heroId: ${e.heroId}. Level up skipped.`),{heroState:e,resources:t};const r=n.level2,a=e.maxHp-e.currentHp;return{heroState:{...e,level:2,maxHp:r.maxHp,currentHp:Math.max(1,r.maxHp-a),ac:r.ac,surgeValue:r.surgeValue,attackBonus:r.attackBonus},resources:{...t,xp:t.xp-si}}}function _d(e,t,n){return t===20&&e===2?n+1:n}function Ar(e,t){const n=Math.abs(e.x-t.x),r=Math.abs(e.y-t.y);return n<=1&&r<=1&&(n>0||r>0)}function yd(e){return ra(e)?.ac}function wd(e,t){const n=t.tiles.find(a=>a.id===e.tileId);if(!n)return null;const r=Mn(n);return{x:r.minX+e.position.x,y:r.minY+e.position.y}}function kd(e,t,n,r){return r?Tn(e,r)?t.filter(s=>{const o=wd(s,r);return o?Ar(e,o):!1}):[]:t.filter(s=>s.tileId===n&&Ar(e,s.position))}function Zn(e,t){const n=t.tiles.find(a=>a.id===e.tileId);if(!n)return null;const r=Mn(n);return{x:r.minX+e.position.x,y:r.minY+e.position.y}}function Ja(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function bd(e,t,n,r){const a=Zn(e,r);if(!a)return null;const s=t.filter(d=>{const f=n[d.heroId];return f!==void 0&&f>0});if(s.length===0)return null;const o=new Set,c=[{pos:a,distance:0}];o.add(`${a.x},${a.y}`);let l=null;for(;c.length>0;){const d=c.shift();for(const g of s)g.position.x===d.pos.x&&g.position.y===d.pos.y&&(!l||d.distance<l.distance)&&(l={hero:g,distance:d.distance});if(l&&l.distance<d.distance)break;const f=ta(d.pos,r);for(const g of f){const h=`${g.x},${g.y}`;o.has(h)||(o.add(h),c.push({pos:g,distance:d.distance+1}))}}return l}function xd(e,t,n,r){const a=Zn(e,r);if(!a)return null;const s=t.filter(o=>{const c=n[o.heroId];return c!==void 0&&c>0});for(const o of s)if(Ar(a,o.position))return o;return null}function Td(e,t,n,r,a){const s=Zn(e,a);if(!s)return null;const c=ta(s,a).filter(f=>{if(n.some(h=>h.position.x===f.x&&h.position.y===f.y))return!1;for(const h of r){if(h.instanceId===e.instanceId)continue;const _=Zn(h,a);if(_&&_.x===f.x&&_.y===f.y)return!1}return!0});if(c.length===0)return null;let l=c[0],d=Ja(l,t);for(const f of c){const g=Ja(f,t);g<d&&(d=g,l=f)}return l}function Sd(e,t,n=Math.random){const r=wc[e];if(!r)return{roll:1,attackBonus:0,total:1,targetAC:t,isHit:!1,damage:0,isCritical:!1};const a=vi(n),s=a+r.attackBonus,o=a===20||s>=t,c=a===20;return{roll:a,attackBonus:r.attackBonus,total:s,targetAC:t,isHit:o,damage:o?r.damage:0,isCritical:c}}function Id(e,t,n,r,a,s,o=Math.random){const c=xd(e,t,n,s);if(c){const f=r[c.heroId]??10,g=Sd(e.monsterId,f,o);return{type:"attack",targetId:c.heroId,result:g}}const l=bd(e,t,n,s);if(!l)return{type:"none"};const d=Td(e,l.hero.position,t,a,s);return d?{type:"move",destination:d}:{type:"none"}}function Cd(e,t,n){const r=n.tiles.find(s=>s.id===t);if(!r)return null;const a=Mn(r);return{x:e.x-a.minX,y:e.y-a.minY}}function Ed(e,t){return Tn(e,t)?.id??null}function hi(e,t=Math.random){const n=[...e];for(let r=n.length-1;r>0;r--){const a=Math.floor(t()*(r+1));[n[r],n[a]]=[n[a],n[r]]}return n}function Pd(e=Math.random){return{drawPile:hi([...Ic],e),discardPile:[]}}function Md(e,t=Math.random){if(e.drawPile.length===0){if(e.discardPile.length===0)return{encounterId:null,deck:e};const a=hi(e.discardPile,t);return{encounterId:a[0],deck:{drawPile:a.slice(1),discardPile:[]}}}const[n,...r]=e.drawPile;return{encounterId:n,deck:{drawPile:r,discardPile:e.discardPile}}}function Hd(e,t){return{drawPile:e.drawPile,discardPile:[...e.discardPile,t]}}function Ad(e){return Sc.find(t=>t.id===e)}function Dd(e){return!e.drewOnlyWhiteTilesThisTurn}function pi(e,t){return{...e,currentHp:Math.max(0,e.currentHp-t)}}function Rd(e,t){return e.map(n=>pi(n,t))}function zd(e,t,n){const r=e.effect;switch(r.type){case"damage":return r.target==="active-hero"?t.map(a=>a.heroId===n?pi(a,r.amount):a):Rd(t,r.amount);case"environment":return console.warn(`Environment effect '${e.name}' is not yet implemented`),t;case"curse":return console.warn(`Curse effect '${e.name}' is not yet implemented`),t;case"trap":return console.warn(`Trap effect '${e.name}' is not yet implemented`),t;case"hazard":return console.warn(`Hazard effect '${e.name}' is not yet implemented`),t;default:return t}}const Dr={currentHeroIndex:0,currentPhase:"hero-phase",turnNumber:1,exploredThisTurn:!1,drewOnlyWhiteTilesThisTurn:!1},jn={actionsTaken:[],canMove:!0,canAttack:!0},Rr={monstersDefeated:0,monstersToDefeat:2,objective:"Defeat 2 monsters"},zr={xp:0,healingSurges:2},Od={currentScreen:"character-select",heroTokens:[],turnState:{...Dr},validMoveSquares:[],showingMovement:!1,dungeon:Hr(),monsterDeck:{drawPile:[],discardPile:[]},monsters:[],monsterInstanceCounter:0,recentlySpawnedMonsterId:null,attackResult:null,attackTargetId:null,attackName:null,heroHp:[],monsterAttackResult:null,monsterAttackTargetId:null,monsterAttackerId:null,villainPhaseMonsterIndex:0,monsterMoveActionId:null,heroTurnActions:{...jn},scenario:{...Rr},partyResources:{...zr},defeatedMonsterXp:null,defeatedMonsterName:null,leveledUpHeroId:null,levelUpOldStats:null,healingSurgeUsedHeroId:null,healingSurgeHpRestored:null,defeatReason:null,encounterDeck:{drawPile:[],discardPile:[]},drawnEncounter:null};function $a(e,t){const n=[...e.actionsTaken,t],r=n.filter(c=>c==="move").length,a=n.filter(c=>c==="attack").length,s=a===0,o=r<2&&!(r===1&&a===1);return{actionsTaken:n,canMove:o,canAttack:s}}function Nd(e){const{actionsTaken:t}=e,n=t.filter(a=>a==="move").length,r=t.filter(a=>a==="attack").length;return n>=1&&r>=1||n>=2}function jd(e){let t=e;return()=>(t=t*1103515245+12345&2147483647,t/2147483647)}function Bd(e,t=Math.random){const n=[...e];for(let r=n.length-1;r>0;r--){const a=Math.floor(t()*(r+1));[n[r],n[a]]=[n[a],n[r]]}return n}const mi=ri({name:"game",initialState:Od,reducers:{startGame:(e,t)=>{const{heroIds:n,positions:r,seed:a}=t.payload;if(n.length===0||n.length>5)return;const s=a??Date.now();e.randomSeed=s;let o;const c=jd(s);r?o=r:o=Bd(bc,c).slice(0,5),e.heroTokens=n.map((d,f)=>({heroId:d,position:o[f]})),e.turnState={...Dr},e.validMoveSquares=[],e.showingMovement=!1;const l=Hr();l.tileDeck=rd([...xc],c),e.dungeon=l,e.monsterDeck=id(c),e.monsters=[],e.monsterInstanceCounter=0,e.recentlySpawnedMonsterId=null,e.attackResult=null,e.attackTargetId=null,e.attackName=null,e.heroHp=n.map(d=>{const f=ai[d];f||console.warn(`Hero levels not found for ${d}, using defaults`);const g=f?.level1,h=Ct.find(H=>H.id===d),_=g?.hp??h?.hp??8,x=g?.ac??h?.ac??17,z=g?.surgeValue??4,k=g?.attackBonus??h?.attack?.attackBonus??6;return{heroId:d,currentHp:_,maxHp:_,level:1,ac:x,surgeValue:z,attackBonus:k}}),e.monsterAttackResult=null,e.monsterAttackTargetId=null,e.monsterAttackerId=null,e.villainPhaseMonsterIndex=0,e.heroTurnActions={...jn},e.scenario={...Rr},e.partyResources={...zr},e.defeatedMonsterXp=null,e.defeatedMonsterName=null,e.leveledUpHeroId=null,e.levelUpOldStats=null,e.encounterDeck=Pd(c),e.drawnEncounter=null,e.currentScreen="game-board"},setHeroPosition:(e,t)=>{const n=e.heroTokens.find(r=>r.heroId===t.payload.heroId);n&&(n.position=t.payload.position)},showMovement:(e,t)=>{if(e.turnState.currentPhase!=="hero-phase"||!e.heroTurnActions.canMove)return;const{heroId:n,speed:r}=t.payload,a=e.heroTokens.find(s=>s.heroId===n);a&&(e.validMoveSquares=Xc(a.position,r,e.heroTokens,n,e.dungeon),e.showingMovement=!0)},hideMovement:e=>{e.validMoveSquares=[],e.showingMovement=!1},moveHero:(e,t)=>{const{heroId:n,position:r}=t.payload;if(e.turnState.currentPhase!=="hero-phase"||!e.heroTurnActions.canMove||!Kc(r,e.validMoveSquares))return;const a=e.heroTokens.find(s=>s.heroId===n);a&&(a.position=r,e.validMoveSquares=[],e.showingMovement=!1,e.heroTurnActions=$a(e.heroTurnActions,"move"))},resetGame:e=>{e.currentScreen="character-select",e.heroTokens=[],e.turnState={...Dr},e.randomSeed=void 0,e.validMoveSquares=[],e.showingMovement=!1,e.dungeon=Hr(),e.monsterDeck={drawPile:[],discardPile:[]},e.monsters=[],e.monsterInstanceCounter=0,e.recentlySpawnedMonsterId=null,e.attackResult=null,e.attackTargetId=null,e.attackName=null,e.heroHp=[],e.monsterAttackResult=null,e.monsterAttackTargetId=null,e.monsterAttackerId=null,e.villainPhaseMonsterIndex=0,e.monsterMoveActionId=null,e.heroTurnActions={...jn},e.scenario={...Rr},e.partyResources={...zr},e.defeatedMonsterXp=null,e.defeatedMonsterName=null,e.leveledUpHeroId=null,e.levelUpOldStats=null,e.healingSurgeUsedHeroId=null,e.healingSurgeHpRestored=null,e.defeatReason=null,e.encounterDeck={drawPile:[],discardPile:[]},e.drawnEncounter=null},endHeroPhase:e=>{if(e.turnState.currentPhase!=="hero-phase")return;e.recentlySpawnedMonsterId=null,e.turnState.exploredThisTurn=!1,e.turnState.drewOnlyWhiteTilesThisTurn=!1;const t=e.heroTokens[e.turnState.currentHeroIndex];if(!t)return;const n=Jc(t,e.dungeon);if(n&&e.dungeon.tileDeck.length>0){const{drawnTile:r,remainingDeck:a}=ad(e.dungeon.tileDeck);if(r){const s=td(n,r,e.dungeon);if(s){ui(r)?.isBlackTile??!0?e.turnState.drewOnlyWhiteTilesThisTurn=!1:e.turnState.exploredThisTurn||(e.turnState.drewOnlyWhiteTilesThisTurn=!0),e.turnState.exploredThisTurn=!0,e.dungeon=sd(e.dungeon,n,s),e.dungeon.tileDeck=a;const{monster:l,deck:d}=od(e.monsterDeck);if(l){const f=ud(),g=cd(l,f,t.heroId,s.id,e.monsterInstanceCounter);g&&(e.monsters.push(g),e.monsterInstanceCounter+=1,e.recentlySpawnedMonsterId=g.instanceId),e.monsterDeck=d}}}}e.turnState.currentPhase="exploration-phase"},endExplorationPhase:e=>{if(e.turnState.currentPhase==="exploration-phase"&&(e.turnState.currentPhase="villain-phase",e.villainPhaseMonsterIndex=0,e.monsterAttackResult=null,e.monsterAttackTargetId=null,e.monsterAttackerId=null,e.monsterMoveActionId=null,Dd(e.turnState))){const{encounterId:t,deck:n}=Md(e.encounterDeck);if(e.encounterDeck=n,t){const r=Ad(t);r&&(e.drawnEncounter=r)}}},endVillainPhase:e=>{if(e.turnState.currentPhase!=="villain-phase")return;e.villainPhaseMonsterIndex=0,e.monsterAttackResult=null,e.monsterAttackTargetId=null,e.monsterAttackerId=null,e.monsterMoveActionId=null,e.drawnEncounter=null,e.healingSurgeUsedHeroId=null,e.healingSurgeHpRestored=null,e.turnState.currentHeroIndex=(e.turnState.currentHeroIndex+1)%e.heroTokens.length,e.turnState.currentHeroIndex===0&&(e.turnState.turnNumber+=1),e.turnState.currentPhase="hero-phase",e.heroTurnActions={...jn};const t=e.heroTokens[e.turnState.currentHeroIndex]?.heroId;if(t){const n=e.heroHp.findIndex(r=>r.heroId===t);if(n!==-1){const r=e.heroHp[n];if(vd(r,e.partyResources)){const a=Ct.find(o=>o.id===t);a||console.warn(`Hero not found in AVAILABLE_HEROES for ID: ${t}`);const s=a?.name??"A hero";e.defeatReason=`${s} fell with no healing surges remaining.`,e.currentScreen="defeat";return}if(fd(r,e.partyResources)){const a=hd(r,e.partyResources);e.heroHp[n]=a.heroState,e.partyResources=a.resources,e.healingSurgeUsedHeroId=t,e.healingSurgeHpRestored=r.surgeValue}}}},dismissMonsterCard:e=>{e.recentlySpawnedMonsterId=null},dismissEncounterCard:e=>{if(e.drawnEncounter){const t=e.heroTokens[e.turnState.currentHeroIndex]?.heroId;t&&(e.heroHp=zd(e.drawnEncounter,e.heroHp,t),e.heroHp.every(r=>r.currentHp<=0)&&(e.defeatReason=`The party was overwhelmed by ${e.drawnEncounter.name}.`,e.currentScreen="defeat")),e.encounterDeck=Hd(e.encounterDeck,e.drawnEncounter.id),e.drawnEncounter=null}},setAttackResult:(e,t)=>{if(e.turnState.currentPhase!=="hero-phase"||!e.heroTurnActions.canAttack)return;const{result:n,targetInstanceId:r,attackName:a}=t.payload;e.attackTargetId=r,e.attackName=a,e.defeatedMonsterXp=null,e.defeatedMonsterName=null,e.leveledUpHeroId=null,e.levelUpOldStats=null;const s=e.heroTokens[e.turnState.currentHeroIndex]?.heroId,o=e.heroHp.find(l=>l.heroId===s),c=n.isHit&&o?_d(o.level,n.roll,n.damage):n.damage;if(e.attackResult={...n,damage:c},n.isHit&&c>0){const l=e.monsters.find(d=>d.instanceId===r);if(l&&(l.currentHp-=c,l.currentHp<=0)){const d=ra(l.monsterId);d||console.warn(`Monster definition not found for ID: ${l.monsterId}`);const f=d?.xp??0;e.partyResources.xp+=f,e.defeatedMonsterXp=f,e.defeatedMonsterName=d?.name??l.monsterId,e.monsters=e.monsters.filter(g=>g.instanceId!==r),e.monsterDeck=ld(e.monsterDeck,l.monsterId),e.scenario.monstersDefeated+=1,e.scenario.monstersDefeated>=e.scenario.monstersToDefeat&&(e.currentScreen="victory")}}if(o&&s&&md(o,n.roll,e.partyResources)){e.levelUpOldStats={...o};const l=gd(o,e.partyResources),d=e.heroHp.findIndex(f=>f.heroId===s);d!==-1&&(e.heroHp[d]=l.heroState),e.partyResources=l.resources,e.leveledUpHeroId=s}e.heroTurnActions=$a(e.heroTurnActions,"attack")},dismissAttackResult:e=>{e.attackResult=null,e.attackTargetId=null,e.attackName=null},dismissDefeatNotification:e=>{e.defeatedMonsterXp=null,e.defeatedMonsterName=null},dismissLevelUpNotification:e=>{e.leveledUpHeroId=null,e.levelUpOldStats=null},setMonsters:(e,t)=>{e.monsters=t.payload},activateNextMonster:(e,t)=>{if(e.turnState.currentPhase!=="villain-phase")return;const n=e.heroTokens[e.turnState.currentHeroIndex]?.heroId;if(!n)return;const r=e.monsters.filter(d=>d.controllerId===n);if(e.villainPhaseMonsterIndex>=r.length)return;const a=r[e.villainPhaseMonsterIndex];if(!a)return;const s={},o={};for(const d of e.heroHp)s[d.heroId]=d.currentHp;for(const d of e.heroTokens){const f=Ct.find(g=>g.id===d.heroId);f&&(o[d.heroId]=f.ac)}const c=t.payload?.randomFn??Math.random,l=Id(a,e.heroTokens,s,o,e.monsters,e.dungeon,c);if(l.type==="move"){const d=e.monsters.find(f=>f.instanceId===a.instanceId);if(d){const f=Ed(l.destination,e.dungeon);if(f){const g=Cd(l.destination,f,e.dungeon);g&&(d.position=g,d.tileId=f)}}e.monsterMoveActionId=a.instanceId}else if(l.type==="attack"&&(e.monsterAttackResult=l.result,e.monsterAttackTargetId=l.targetId,e.monsterAttackerId=a.instanceId,l.result.isHit&&l.result.damage>0)){const d=e.heroHp.find(f=>f.heroId===l.targetId);d&&(d.currentHp=Math.max(0,d.currentHp-l.result.damage),e.heroHp.every(g=>g.currentHp<=0)&&(e.currentScreen="defeat"))}e.villainPhaseMonsterIndex+=1},dismissMonsterAttackResult:e=>{e.monsterAttackResult=null,e.monsterAttackTargetId=null,e.monsterAttackerId=null},dismissMonsterMoveAction:e=>{e.monsterMoveActionId=null},dismissHealingSurgeNotification:e=>{e.healingSurgeUsedHeroId=null,e.healingSurgeHpRestored=null},setHeroHp:(e,t)=>{const{heroId:n,hp:r}=t.payload,a=e.heroHp.find(s=>s.heroId===n);a&&(a.currentHp=Math.max(0,r))},setPartyResources:(e,t)=>{const{xp:n,healingSurges:r}=t.payload;n!==void 0&&(e.partyResources.xp=n),r!==void 0&&(e.partyResources.healingSurges=r)}}}),{startGame:Fd,setHeroPosition:Mf,showMovement:es,hideMovement:Ld,moveHero:qd,resetGame:aa,endHeroPhase:ts,endExplorationPhase:Ud,endVillainPhase:ns,dismissMonsterCard:Wd,dismissEncounterCard:Yd,setAttackResult:Vd,dismissAttackResult:Gd,dismissDefeatNotification:Xd,setMonsters:Hf,activateNextMonster:Kd,dismissMonsterAttackResult:Qd,dismissMonsterMoveAction:Zd,dismissHealingSurgeNotification:Jd,setHeroHp:Af,dismissLevelUpNotification:$d,setPartyResources:Df}=mi.actions,eu=mi.reducer,G=lc({reducer:{heroes:Fc,game:eu}});typeof window<"u"&&(window.__REDUX_STORE__=G);function Oe(e){const t="/Ashardalon/",n=e.startsWith("/")?e.slice(1):e;return(t.endsWith("/")?t:t+"/")+n}var tu=D('<span class="status-complete svelte-4rkta9">â Selection Complete</span>'),nu=D('<span class="status-incomplete svelte-4rkta9"> </span>'),ru=D("<span> </span>"),au=D('<div class="card-stats svelte-4rkta9"><span> </span> <!></div>'),su=D('<div class="power-card custom-ability svelte-4rkta9" data-testid="custom-ability-card"><div class="card-header svelte-4rkta9"><span class="card-name svelte-4rkta9"> </span> <span class="card-type svelte-4rkta9"> </span></div> <p class="card-description svelte-4rkta9"> </p> <p class="card-rule svelte-4rkta9"> </p> <!></div>'),iu=D('<button><div class="card-header svelte-4rkta9"><span class="card-name svelte-4rkta9"> </span> <span class="card-type svelte-4rkta9"> </span></div> <p class="card-description svelte-4rkta9"> </p> <p class="card-rule svelte-4rkta9"> </p></button>'),ou=D("<span> </span>"),lu=D('<div class="card-stats svelte-4rkta9"><span> </span> <!></div>'),cu=D('<button><div class="card-header svelte-4rkta9"><span class="card-name svelte-4rkta9"> </span> <span class="card-type svelte-4rkta9"> </span></div> <p class="card-description svelte-4rkta9"> </p> <p class="card-rule svelte-4rkta9"> </p> <!></button>'),du=D("<span> </span>"),uu=D('<div class="card-stats svelte-4rkta9"><span> </span> <!></div>'),fu=D('<button><div class="card-header svelte-4rkta9"><span class="card-name svelte-4rkta9"> </span> <span class="card-type svelte-4rkta9"> </span></div> <p class="card-description svelte-4rkta9"> </p> <p class="card-rule svelte-4rkta9"> </p> <!></button>'),vu=D('<div class="power-card-selection svelte-4rkta9" data-testid="power-card-selection"><div class="modal-overlay svelte-4rkta9" role="button" tabindex="-1" aria-label="Close modal"></div> <div class="modal-content svelte-4rkta9"><div class="modal-header svelte-4rkta9"><h2 class="svelte-4rkta9"> </h2> <button class="close-button svelte-4rkta9" data-testid="close-power-selection">Ã</button></div> <div class="selection-status svelte-4rkta9" data-testid="selection-status"><!></div> <div class="card-sections svelte-4rkta9"><div class="card-section svelte-4rkta9"><h3 class="svelte-4rkta9">Custom Ability (Automatic)</h3> <div class="card-grid svelte-4rkta9"><!></div></div> <div class="card-section svelte-4rkta9"><h3 class="svelte-4rkta9">Utility Power (Select 1)</h3> <div class="card-grid svelte-4rkta9" data-testid="utility-cards"></div></div> <div class="card-section svelte-4rkta9"><h3 class="svelte-4rkta9">At-Will Powers (Select 2)</h3> <div class="card-grid svelte-4rkta9" data-testid="atwill-cards"></div></div> <div class="card-section svelte-4rkta9"><h3 class="svelte-4rkta9">Daily Power (Select 1)</h3> <div class="card-grid svelte-4rkta9" data-testid="daily-cards"></div></div></div> <div class="modal-footer svelte-4rkta9"><button class="done-button svelte-4rkta9" data-testid="done-power-selection">Done</button></div></div></div>');function hu(e,t){Ie(t,!0);const n=K(()=>Cc(t.hero.heroClass)),r=K(()=>Ec(t.hero.heroClass)),a=K(()=>Pc(t.hero.heroClass)),s=K(()=>li[t.hero.id]),o=K(()=>i(s)?Qn(i(s)):null),c=K(()=>t.selection.utility!==null&&t.selection.atWills.length===2&&t.selection.daily!==null);function l(T){G.dispatch(zc({heroId:t.hero.id,cardId:T}))}function d(T){G.dispatch(Oc({heroId:t.hero.id,cardId:T}))}function f(T){G.dispatch(Nc({heroId:t.hero.id,cardId:T}))}function g(T){return t.selection.utility===T}function h(T){return t.selection.atWills.includes(T)}function _(T){return t.selection.daily===T}function x(T){return t.selection.atWills.includes(T)||t.selection.atWills.length<2}var z=vu(),k=u(z);k.__click=function(...T){t.onClose?.apply(this,T)},k.__keydown=T=>T.key==="Escape"&&t.onClose();var H=v(k,2),A=u(H),M=u(A),C=u(M),N=v(M,2);N.__click=function(...T){t.onClose?.apply(this,T)};var S=v(A,2),W=u(S);{var q=T=>{var E=tu();I(T,E)},Y=T=>{var E=nu(),X=u(E);U(()=>w(X,`Select: 1 Utility (${t.selection.utility?"â":"â"}), 
          2 At-Wills (${t.selection.atWills.length??""}/2), 
          1 Daily (${t.selection.daily?"â":"â"})`)),I(T,E)};F(W,T=>{i(c)?T(q):T(Y,!1)})}var $=v(S,2),Z=u($),ie=v(u(Z),2),me=u(ie);{var ye=T=>{var E=su(),X=u(E),re=u(X),de=u(re),le=v(re,2),ue=u(le),we=v(X,2),ke=u(we),ce=v(we,2),_e=u(ce),fe=v(ce,2);{var yt=Ue=>{var Rt=au(),Ee=u(Rt),Pe=u(Ee),ve=v(Ee,2);{var vt=et=>{var it=ru(),tt=u(it);U(()=>w(tt,`Damage: ${i(o).damage??""}`)),I(et,it)};F(ve,et=>{i(o).damage!==void 0&&et(vt)})}U(()=>w(Pe,`Attack: +${i(o).attackBonus??""}`)),I(Ue,Rt)};F(fe,Ue=>{i(o).attackBonus!==void 0&&Ue(yt)})}U(()=>{w(de,i(o).name),w(ue,i(o).type),w(ke,i(o).description),w(_e,i(o).rule)}),I(T,E)};F(me,T=>{i(o)&&T(ye)})}var xe=v(Z,2),De=v(u(xe),2);Le(De,21,()=>i(a),T=>T.id,(T,E)=>{var X=iu();let re;X.__click=()=>l(i(E).id);var de=u(X),le=u(de),ue=u(le),we=v(le,2),ke=u(we),ce=v(de,2),_e=u(ce),fe=v(ce,2),yt=u(fe);U(Ue=>{re=ze(X,1,"power-card svelte-4rkta9",null,re,Ue),B(X,"data-testid",`utility-card-${i(E).id??""}`),w(ue,i(E).name),w(ke,i(E).type),w(_e,i(E).description),w(yt,i(E).rule)},[()=>({selected:g(i(E).id)})]),I(T,X)});var se=v(xe,2),ne=v(u(se),2);Le(ne,21,()=>i(n),T=>T.id,(T,E)=>{var X=cu();let re;X.__click=()=>d(i(E).id);var de=u(X),le=u(de),ue=u(le),we=v(le,2),ke=u(we),ce=v(de,2),_e=u(ce),fe=v(ce,2),yt=u(fe),Ue=v(fe,2);{var Rt=Ee=>{var Pe=lu(),ve=u(Pe),vt=u(ve),et=v(ve,2);{var it=tt=>{var Lt=ou(),fn=u(Lt);U(()=>w(fn,`Damage: ${i(E).damage??""}`)),I(tt,Lt)};F(et,tt=>{i(E).damage!==void 0&&tt(it)})}U(()=>w(vt,`Attack: +${i(E).attackBonus??""}`)),I(Ee,Pe)};F(Ue,Ee=>{i(E).attackBonus!==void 0&&Ee(Rt)})}U((Ee,Pe)=>{re=ze(X,1,"power-card svelte-4rkta9",null,re,Ee),X.disabled=Pe,B(X,"data-testid",`atwill-card-${i(E).id??""}`),w(ue,i(E).name),w(ke,i(E).type),w(_e,i(E).description),w(yt,i(E).rule)},[()=>({selected:h(i(E).id),disabled:!x(i(E).id)}),()=>!x(i(E).id)]),I(T,X)});var ge=v(se,2),O=v(u(ge),2);Le(O,21,()=>i(r),T=>T.id,(T,E)=>{var X=fu();let re;X.__click=()=>f(i(E).id);var de=u(X),le=u(de),ue=u(le),we=v(le,2),ke=u(we),ce=v(de,2),_e=u(ce),fe=v(ce,2),yt=u(fe),Ue=v(fe,2);{var Rt=Ee=>{var Pe=uu(),ve=u(Pe),vt=u(ve),et=v(ve,2);{var it=tt=>{var Lt=du(),fn=u(Lt);U(()=>w(fn,`Damage: ${i(E).damage??""}`)),I(tt,Lt)};F(et,tt=>{i(E).damage!==void 0&&tt(it)})}U(()=>w(vt,`Attack: +${i(E).attackBonus??""}`)),I(Ee,Pe)};F(Ue,Ee=>{i(E).attackBonus!==void 0&&Ee(Rt)})}U(Ee=>{re=ze(X,1,"power-card svelte-4rkta9",null,re,Ee),B(X,"data-testid",`daily-card-${i(E).id??""}`),w(ue,i(E).name),w(ke,i(E).type),w(_e,i(E).description),w(yt,i(E).rule)},[()=>({selected:_(i(E).id)})]),I(T,X)});var P=v($,2),j=u(P);j.__click=function(...T){t.onClose?.apply(this,T)},U(()=>{w(C,`Select Power Cards for ${t.hero.name??""}`),j.disabled=!i(c)}),I(e,z),Ce()}Xe(["click","keydown"]);var pu=D('<button><img class="hero-image svelte-1rwnzlz"/> <div class="hero-info svelte-1rwnzlz"><span class="hero-name svelte-1rwnzlz" data-testid="hero-name"> </span> <span class="hero-class svelte-1rwnzlz"> </span></div></button>'),mu=D('<button><img class="hero-image svelte-1rwnzlz"/> <div class="hero-info svelte-1rwnzlz"><span class="hero-name svelte-1rwnzlz" data-testid="hero-name"> </span> <span class="hero-class svelte-1rwnzlz"> </span></div></button>'),gu=D('<span class="power-status complete svelte-1rwnzlz">â Powers Selected</span>'),_u=D('<span class="power-status incomplete svelte-1rwnzlz">Select Powers</span>'),yu=D('<button><img class="selected-hero-image svelte-1rwnzlz"/> <div class="selected-hero-info svelte-1rwnzlz"><span class="selected-hero-name svelte-1rwnzlz"> </span> <!></div></button>'),wu=D('<div class="selected-heroes svelte-1rwnzlz" data-testid="selected-heroes-list"></div>'),ku=D('<button><img class="hero-image svelte-1rwnzlz"/> <div class="hero-info svelte-1rwnzlz"><span class="hero-name svelte-1rwnzlz" data-testid="hero-name"> </span> <span class="hero-class svelte-1rwnzlz"> </span></div></button>'),bu=D('<button><img class="hero-image svelte-1rwnzlz"/> <div class="hero-info svelte-1rwnzlz"><span class="hero-name svelte-1rwnzlz" data-testid="hero-name"> </span> <span class="hero-class svelte-1rwnzlz"> </span></div></button>'),xu=D('<div class="character-select svelte-1rwnzlz" data-testid="character-select"><div class="edge-zone edge-top svelte-1rwnzlz" data-testid="edge-top"><div class="hero-row svelte-1rwnzlz" data-testid="hero-grid"></div></div> <div class="middle-section svelte-1rwnzlz"><div class="edge-zone edge-left svelte-1rwnzlz" data-testid="edge-left"><div class="hero-column svelte-1rwnzlz"></div></div> <div class="center-zone svelte-1rwnzlz" data-testid="center-zone"><h1 class="svelte-1rwnzlz">Select Your Heroes</h1> <p class="instructions svelte-1rwnzlz">Choose 1-5 heroes for your adventure</p> <p class="instructions svelte-1rwnzlz">Tap a hero from your edge of the table</p> <div class="selection-info svelte-1rwnzlz"><span data-testid="selected-count"> </span></div> <!> <button class="start-button svelte-1rwnzlz" data-testid="start-game-button">Start Adventure</button></div> <div class="edge-zone edge-right svelte-1rwnzlz" data-testid="edge-right"><div class="hero-column svelte-1rwnzlz"></div></div></div> <div class="edge-zone edge-bottom svelte-1rwnzlz" data-testid="edge-bottom"><div class="hero-row svelte-1rwnzlz"></div></div></div> <!>',1);function Tu(e,t){Ie(t,!0);let n=L(pe([])),r=L(pe([])),a=L(pe({})),s=L(pe({})),o=L(null);Tt(()=>{const O=G.subscribe(()=>{const j=G.getState();b(n,j.heroes.selectedHeroes,!0),b(r,j.heroes.availableHeroes,!0),b(a,j.heroes.heroEdgeMap,!0),b(s,j.heroes.powerCardSelections,!0)}),P=G.getState();return b(n,P.heroes.selectedHeroes,!0),b(r,P.heroes.availableHeroes,!0),b(a,P.heroes.heroEdgeMap,!0),b(s,P.heroes.powerCardSelections,!0),O});function c(O,P){return i(a)[O]===P}function l(O,P){const j=i(a)[O];return j!==void 0&&j!==P}function d(O,P){G.dispatch(Rc({heroId:O,edge:P}))}function f(){i(n).length>0&&h()&&(G.dispatch(jc()),G.dispatch(Fd({heroIds:i(n).map(O=>O.id)})))}function g(O){const P=i(s)[O];return P?P.utility!==null&&P.atWills.length===2&&P.daily!==null:!1}function h(){return i(n).every(O=>g(O.id))}function _(){return i(n).length>=1&&i(n).length<=5&&h()}function x(O){b(o,O,!0)}function z(){b(o,null)}var k=xu(),H=Se(k),A=u(H),M=u(A);Le(M,21,()=>i(r),O=>O.id,(O,P)=>{var j=pu();let T;j.__click=()=>d(i(P).id,"top");var E=u(j),X=v(E,2),re=u(X),de=u(re),le=v(re,2),ue=u(le);U((we,ke,ce)=>{T=ze(j,1,"hero-card svelte-1rwnzlz",null,T,we),B(j,"data-testid",`hero-${i(P).id??""}-top`),j.disabled=ke,B(E,"src",ce),B(E,"alt",i(P).name),w(de,i(P).name),w(ue,i(P).heroClass)},[()=>({selected:c(i(P).id,"top"),unavailable:l(i(P).id,"top")}),()=>l(i(P).id,"top"),()=>Oe(i(P).imagePath)]),I(O,j)});var C=v(A,2),N=u(C),S=u(N);Le(S,21,()=>i(r),O=>O.id,(O,P)=>{var j=mu();let T;j.__click=()=>d(i(P).id,"left");var E=u(j),X=v(E,2),re=u(X),de=u(re),le=v(re,2),ue=u(le);U((we,ke,ce)=>{T=ze(j,1,"hero-card svelte-1rwnzlz",null,T,we),B(j,"data-testid",`hero-${i(P).id??""}-left`),j.disabled=ke,B(E,"src",ce),B(E,"alt",i(P).name),w(de,i(P).name),w(ue,i(P).heroClass)},[()=>({selected:c(i(P).id,"left"),unavailable:l(i(P).id,"left")}),()=>l(i(P).id,"left"),()=>Oe(i(P).imagePath)]),I(O,j)});var W=v(N,2),q=v(u(W),6),Y=u(q),$=u(Y),Z=v(q,2);{var ie=O=>{var P=wu();Le(P,21,()=>i(n),j=>j.id,(j,T)=>{var E=yu();let X;E.__click=()=>x(i(T));var re=u(E),de=v(re,2),le=u(de),ue=u(le),we=v(le,2);{var ke=_e=>{var fe=gu();I(_e,fe)},ce=_e=>{var fe=_u();I(_e,fe)};F(we,_e=>{g(i(T).id)?_e(ke):_e(ce,!1)})}U((_e,fe)=>{X=ze(E,1,"selected-hero-item svelte-1rwnzlz",null,X,_e),B(E,"data-testid",`select-powers-${i(T).id??""}`),B(re,"src",fe),B(re,"alt",i(T).name),w(ue,i(T).name)},[()=>({complete:g(i(T).id)}),()=>Oe(i(T).imagePath)]),I(j,E)}),I(O,P)};F(Z,O=>{i(n).length>0&&O(ie)})}var me=v(Z,2);me.__click=f;var ye=v(W,2),xe=u(ye);Le(xe,21,()=>i(r),O=>O.id,(O,P)=>{var j=ku();let T;j.__click=()=>d(i(P).id,"right");var E=u(j),X=v(E,2),re=u(X),de=u(re),le=v(re,2),ue=u(le);U((we,ke,ce)=>{T=ze(j,1,"hero-card svelte-1rwnzlz",null,T,we),B(j,"data-testid",`hero-${i(P).id??""}-right`),j.disabled=ke,B(E,"src",ce),B(E,"alt",i(P).name),w(de,i(P).name),w(ue,i(P).heroClass)},[()=>({selected:c(i(P).id,"right"),unavailable:l(i(P).id,"right")}),()=>l(i(P).id,"right"),()=>Oe(i(P).imagePath)]),I(O,j)});var De=v(C,2),se=u(De);Le(se,21,()=>i(r),O=>O.id,(O,P)=>{var j=bu();let T;j.__click=()=>d(i(P).id,"bottom");var E=u(j),X=v(E,2),re=u(X),de=u(re),le=v(re,2),ue=u(le);U((we,ke,ce)=>{T=ze(j,1,"hero-card svelte-1rwnzlz",null,T,we),B(j,"data-testid",`hero-${i(P).id??""}`),j.disabled=ke,B(E,"src",ce),B(E,"alt",i(P).name),w(de,i(P).name),w(ue,i(P).heroClass)},[()=>({selected:c(i(P).id,"bottom"),unavailable:l(i(P).id,"bottom")}),()=>l(i(P).id,"bottom"),()=>Oe(i(P).imagePath)]),I(O,j)});var ne=v(H,2);{var ge=O=>{hu(O,{get hero(){return i(o)},get selection(){return i(s)[i(o).id]},onClose:z})};F(ne,O=>{i(o)&&O(ge)})}U(O=>{w($,`${i(n).length??""} heroes selected`),me.disabled=O},[()=>!_()]),I(e,k),Ce()}Xe(["click"]);var Su=D('<button class="move-square svelte-ehd1hj" data-testid="move-square"><span class="sr-only svelte-ehd1hj"> </span></button>'),Iu=D('<div class="movement-overlay svelte-ehd1hj" data-testid="movement-overlay"></div>');function Cu(e,t){Ie(t,!0);function n(s){const o=t.tileOffsetX+s.x*t.cellSize,c=t.tileOffsetY+s.y*t.cellSize;return`left: ${o}px; top: ${c}px; width: ${t.cellSize}px; height: ${t.cellSize}px;`}function r(s,o){s.stopPropagation(),t.onSquareClick(o)}var a=Iu();Le(a,21,()=>t.validMoveSquares,s=>`${s.x},${s.y}`,(s,o)=>{var c=Su();c.__click=f=>r(f,i(o));var l=u(c),d=u(l);U(f=>{B(c,"data-position-x",i(o).x),B(c,"data-position-y",i(o).y),Ot(c,f),w(d,`Move to (${i(o).x??""}, ${i(o).y??""})`)},[()=>n(i(o))]),I(s,c)}),I(e,a),Ce()}Xe(["click"]);var Eu=D('<div class="tile-deck-counter svelte-9649r" data-testid="tile-deck-counter"><span class="deck-icon svelte-9649r">ð¦</span> <span class="deck-count svelte-9649r" data-testid="tile-deck-count"> </span> <span class="deck-label svelte-9649r">tiles</span></div>');function Pu(e,t){var n=Eu(),r=v(u(n),2),a=u(r);U(()=>w(a,t.tileCount)),I(e,n)}var Mu=D('<div class="unexplored-edge svelte-12eown4" data-testid="unexplored-edge"><span class="question-mark svelte-12eown4">?</span></div>');function Hu(e,t){Ie(t,!0);const r=(()=>{const c=t.cellSize*1.5,l=36;switch(t.direction){case"north":return{left:`${t.tileWidth/2-c/2}px`,top:`${l-8/2}px`,width:`${c}px`,height:"8px"};case"south":return{left:`${t.tileWidth/2-c/2}px`,bottom:`${l-8/2}px`,width:`${c}px`,height:"8px"};case"east":return{right:`${l-8/2}px`,top:`${t.tileHeight/2-c/2}px`,width:"8px",height:`${c}px`};case"west":return{left:`${l-8/2}px`,top:`${t.tileHeight/2-c/2}px`,width:"8px",height:`${c}px`}}})(),a=Object.entries(r).map(([o,c])=>`${o}: ${c}`).join("; ");var s=Mu();U(()=>{B(s,"data-direction",t.direction),Ot(s,a)}),I(e,s),Ce()}var Au=D('<div class="monster-token svelte-1g5ysl" data-testid="monster-token"><img class="token-image svelte-1g5ysl"/> <span class="token-label svelte-1g5ysl"> </span></div>');function Du(e,t){Ie(t,!0);const n=K(()=>Pn.find(c=>c.id===t.monster.monsterId)),r=K(()=>()=>{const c=t.cellSize/2,l=t.tilePixelOffset.x+t.tileOffsetX+t.monster.position.x*t.cellSize+c,d=t.tilePixelOffset.y+t.tileOffsetY+t.monster.position.y*t.cellSize+c;return`left: ${l}px; top: ${d}px;`});var a=He(),s=Se(a);{var o=c=>{var l=Au(),d=u(l),f=v(d,2),g=u(f);U((h,_)=>{B(l,"data-monster-id",t.monster.instanceId),Ot(l,h),B(d,"src",_),B(d,"alt",i(n).name),w(g,i(n).name)},[()=>i(r)(),()=>Oe(i(n).imagePath)]),I(c,l)};F(s,c=>{i(n)&&c(o)})}I(e,a),Ce()}var Ru=D('<div class="monster-card-overlay svelte-at5lsg" role="dialog" aria-modal="true" aria-label="Monster spawned" tabindex="0" data-testid="monster-card-overlay"><div class="monster-card svelte-at5lsg" role="article" data-testid="monster-card"><div class="card-header svelte-at5lsg"><h3 class="monster-name svelte-at5lsg" data-testid="monster-name"> </h3> <button class="dismiss-button svelte-at5lsg" aria-label="Dismiss monster card" data-testid="dismiss-monster-card">â</button></div> <div class="card-image svelte-at5lsg"><img class="monster-image svelte-at5lsg"/></div> <div class="card-stats svelte-at5lsg"><div class="stat svelte-at5lsg"><span class="stat-label svelte-at5lsg">AC</span> <span class="stat-value svelte-at5lsg" data-testid="monster-ac"> </span></div> <div class="stat svelte-at5lsg"><span class="stat-label svelte-at5lsg">HP</span> <span class="stat-value svelte-at5lsg" data-testid="monster-hp"> </span></div> <div class="stat svelte-at5lsg"><span class="stat-label svelte-at5lsg">XP</span> <span class="stat-value svelte-at5lsg" data-testid="monster-xp"> </span></div></div> <p class="card-hint svelte-at5lsg">Click anywhere to dismiss</p></div></div>');function zu(e,t){Ie(t,!0);const n=K(()=>Pn.find(l=>l.id===t.monsterId));function r(){t.onDismiss&&t.onDismiss()}function a(l){(l.key==="Escape"||l.key==="Enter"||l.key===" ")&&(l.preventDefault(),r())}var s=He(),o=Se(s);{var c=l=>{var d=Ru();d.__click=r,d.__keydown=a;var f=u(d);f.__click=Z=>Z.stopPropagation(),f.__keydown=Z=>Z.stopPropagation();var g=u(f),h=u(g),_=u(h),x=v(h,2);x.__click=r;var z=v(g,2),k=u(z),H=v(z,2),A=u(H),M=v(u(A),2),C=u(M),N=v(A,2),S=v(u(N),2),W=u(S),q=v(N,2),Y=v(u(q),2),$=u(Y);U(Z=>{w(_,i(n).name),B(k,"src",Z),B(k,"alt",i(n).name),w(C,i(n).ac),w(W,i(n).hp),w($,i(n).xp)},[()=>Oe(i(n).imagePath)]),I(l,d)};F(o,l=>{i(n)&&l(c)})}I(e,s),Ce()}Xe(["click","keydown"]);var Ou=D('<div class="encounter-card-overlay svelte-1i2wtj7" role="dialog" aria-modal="true" aria-label="Encounter card drawn" tabindex="0" data-testid="encounter-card-overlay"><div class="encounter-card svelte-1i2wtj7" role="article" data-testid="encounter-card"><div class="card-header svelte-1i2wtj7"><span class="type-badge svelte-1i2wtj7" data-testid="encounter-type"> </span> <button class="dismiss-button svelte-1i2wtj7" aria-label="Dismiss encounter card" data-testid="dismiss-encounter-card">â</button></div> <h3 class="encounter-name svelte-1i2wtj7" data-testid="encounter-name"> </h3> <div class="card-image svelte-1i2wtj7"><img class="encounter-image svelte-1i2wtj7"/></div> <div class="card-description svelte-1i2wtj7" data-testid="encounter-description"> </div> <div class="effect-summary svelte-1i2wtj7" data-testid="encounter-effect"><span class="effect-label svelte-1i2wtj7">Effect:</span> <span class="effect-value svelte-1i2wtj7"> </span></div> <button class="continue-button svelte-1i2wtj7" data-testid="encounter-continue">Continue</button> <p class="card-hint svelte-1i2wtj7">Click anywhere or press Enter to continue</p></div></div>');function Nu(e,t){Ie(t,!0);function n(){t.onDismiss&&t.onDismiss()}function r(S){(S.key==="Escape"||S.key==="Enter"||S.key===" ")&&(S.preventDefault(),n())}function a(S){switch(S){case"event":return"â¡";case"trap":return"â ï¸";case"hazard":return"â ï¸";case"curse":return"ð®";case"environment":return"ð«ï¸";default:return"â"}}function s(S){switch(S.type){case"damage":return S.target==="active-hero"?`Active hero takes ${S.amount} damage`:`All heroes take ${S.amount} damage`;case"environment":return"Environment effect (not implemented)";case"curse":return`Curse (${S.duration} turns) (not implemented)`;case"trap":return`Trap - DC ${S.disableDC} to disable (not implemented)`;case"hazard":return`Hazard - AC ${S.ac}, ${S.damage} damage (not implemented)`;default:return"Unknown effect"}}var o=Ou();o.__click=n,o.__keydown=r;var c=u(o);c.__click=S=>S.stopPropagation(),c.__keydown=S=>S.stopPropagation();var l=u(c),d=u(l),f=u(d),g=v(d,2);g.__click=n;var h=v(l,2),_=u(h),x=v(h,2),z=u(x),k=v(x,2),H=u(k),A=v(k,2),M=v(u(A),2),C=u(M),N=v(A,2);N.__click=n,U((S,W,q,Y)=>{w(f,`${S??""} ${W??""}`),w(_,t.encounter.name),B(z,"src",q),B(z,"alt",t.encounter.name),w(H,t.encounter.description),w(C,Y)},[()=>a(t.encounter.type),()=>t.encounter.type.toUpperCase(),()=>Oe(t.encounter.imagePath),()=>s(t.encounter.effect)]),_l("error",z,S=>{const W=S.target;W&&t.encounter&&(W.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100"><rect fill="%23333" width="100" height="100"/><text x="50" y="50" fill="%23fff" text-anchor="middle" dominant-baseline="central" font-size="40">'+a(t.encounter.type)+"</text></svg>")}),I(e,o),Ce()}Xe(["click","keydown"]);var ju=D('<button><div class="card-header svelte-77qxlp"><span class="card-name svelte-77qxlp"> </span> <span class="card-type-badge svelte-77qxlp"> </span></div> <div class="card-stats svelte-77qxlp"><span class="attack-bonus svelte-77qxlp"> </span> <span class="damage svelte-77qxlp"> </span></div></button>'),Bu=D('<button class="attack-button svelte-77qxlp"> </button>'),Fu=D('<div class="target-selection svelte-77qxlp" data-testid="target-selection"><div class="target-header svelte-77qxlp"><span> </span></div> <div class="target-list svelte-77qxlp"></div></div>'),Lu=D('<div class="select-card-hint svelte-77qxlp" data-testid="select-card-hint">Select a power card above to attack</div>'),qu=D('<div class="power-card-attack-panel svelte-77qxlp" data-testid="power-card-attack-panel"><div class="panel-header svelte-77qxlp"><span class="panel-title svelte-77qxlp">Select Attack Power</span></div> <div class="card-list svelte-77qxlp" data-testid="attack-card-list"></div> <!></div>');function Uu(e,t){Ie(t,!0);let n=L(null);const r=K(()=>()=>{const h=[];for(const _ of t.heroPowerCards.cardStates){if(_.isFlipped)continue;const x=Qn(_.cardId);x&&x.attackBonus!==void 0&&h.push({card:x,state:_})}return h});function a(h){return Pn.find(x=>x.id===h)?.name||"Unknown"}function s(h){b(n,i(n)===h?null:h,!0)}function o(h){i(n)!==null&&(t.onAttackWithCard(i(n),h),b(n,null))}function c(h){switch(h){case"at-will":return"At-Will";case"daily":return"Daily";case"utility":return"Utility";default:return h}}function l(h){switch(h){case"at-will":return"card-atwill";case"daily":return"card-daily";case"utility":return"card-utility";default:return""}}var d=He(),f=Se(d);{var g=h=>{var _=qu(),x=v(u(_),2);Le(x,21,()=>i(r)(),({card:A,state:M})=>A.id,(A,M)=>{let C=()=>i(M).card;var N=ju();let S;N.__click=()=>s(C().id);var W=u(N),q=u(W),Y=u(q),$=v(q,2),Z=u($),ie=v(W,2),me=u(ie),ye=u(me),xe=v(me,2),De=u(xe);U((se,ne)=>{S=ze(N,1,`power-card-option ${se??""}`,"svelte-77qxlp",S,{selected:i(n)===C().id}),B(N,"data-testid",`attack-card-${C().id??""}`),B(N,"data-card-type",C().type),w(Y,C().name),w(Z,ne),w(ye,`+${C().attackBonus??""}`),w(De,`${C().damage??""} dmg`)},[()=>l(C().type),()=>c(C().type)]),I(A,N)});var z=v(x,2);{var k=A=>{const M=K(()=>Qn(i(n)));var C=Fu(),N=u(C),S=u(N),W=u(S),q=v(N,2);Le(q,21,()=>t.adjacentMonsters,Y=>Y.instanceId,(Y,$)=>{var Z=Bu();Z.__click=()=>o(i($).instanceId);var ie=u(Z);U((me,ye)=>{B(Z,"data-testid",`attack-target-${i($).instanceId??""}`),B(Z,"aria-label",`Attack ${me??""} with ${i(M)?.name??""}`),w(ie,`Attack ${ye??""}`)},[()=>a(i($).monsterId),()=>a(i($).monsterId)]),I(Y,Z)}),U(()=>w(W,`Attack with ${i(M)?.name??""}`)),I(A,C)},H=A=>{var M=Lu();I(A,M)};F(z,A=>{i(n)!==null?A(k):A(H,!1)})}I(h,_)};F(f,h=>{t.adjacentMonsters.length>0&&i(r)().length>0&&h(g)})}I(e,d),Ce()}Xe(["click"]);var Wu=D('<span class="result-text critical svelte-1jt2qdd" data-testid="result-text">âï¸ CRITICAL HIT!</span>'),Yu=D('<span class="result-text hit svelte-1jt2qdd" data-testid="result-text">â HIT!</span>'),Vu=D('<span class="result-text miss svelte-1jt2qdd" data-testid="result-text">â MISS!</span>'),Gu=D('<div class="damage-info svelte-1jt2qdd" data-testid="damage-info"><span class="damage-value svelte-1jt2qdd"> </span> <span class="damage-label svelte-1jt2qdd"> </span></div>'),Xu=D('<div class="combat-result-overlay svelte-1jt2qdd" role="dialog" aria-modal="true" aria-label="Combat result" tabindex="0" data-testid="combat-result-overlay"><div role="document" data-testid="combat-result"><div class="result-header svelte-1jt2qdd"><h3 class="attacker-info svelte-1jt2qdd" data-testid="attacker-info"> </h3> <button class="dismiss-button svelte-1jt2qdd" aria-label="Dismiss combat result" data-testid="dismiss-combat-result">â</button></div> <div class="dice-roll-section svelte-1jt2qdd"><div class="dice-container svelte-1jt2qdd"><span class="d20-icon svelte-1jt2qdd" aria-label="D20 die">D20</span> <span class="roll-value svelte-1jt2qdd" data-testid="roll-value"> </span></div> <div class="roll-breakdown svelte-1jt2qdd"><div class="breakdown-row svelte-1jt2qdd"><span class="breakdown-label svelte-1jt2qdd">Roll:</span> <span class="breakdown-value svelte-1jt2qdd" data-testid="dice-roll"> </span></div> <div class="breakdown-row svelte-1jt2qdd"><span class="breakdown-label svelte-1jt2qdd">+ Bonus:</span> <span class="breakdown-value svelte-1jt2qdd" data-testid="attack-bonus"> </span></div> <div class="breakdown-divider svelte-1jt2qdd"></div> <div class="breakdown-row total svelte-1jt2qdd"><span class="breakdown-label svelte-1jt2qdd">Total:</span> <span class="breakdown-value svelte-1jt2qdd" data-testid="attack-total"> </span></div> <div class="breakdown-row target svelte-1jt2qdd"><span class="breakdown-label svelte-1jt2qdd">vs AC:</span> <span class="breakdown-value svelte-1jt2qdd" data-testid="target-ac"> </span></div></div></div> <div class="result-section svelte-1jt2qdd"><!> <!></div> <p class="dismiss-hint svelte-1jt2qdd">Click anywhere to dismiss</p></div></div>');function rs(e,t){Ie(t,!0);function n(){t.onDismiss&&t.onDismiss()}function r(ne){(ne.key==="Escape"||ne.key==="Enter"||ne.key===" ")&&(ne.preventDefault(),n())}var a=Xu();a.__click=n,a.__keydown=r;var s=u(a);let o;s.__click=ne=>ne.stopPropagation(),s.__keydown=ne=>ne.stopPropagation();var c=u(s),l=u(c),d=u(l),f=v(l,2);f.__click=n;var g=v(c,2),h=u(g),_=v(u(h),2),x=u(_),z=v(h,2),k=u(z),H=v(u(k),2),A=u(H),M=v(k,2),C=v(u(M),2),N=u(C),S=v(M,4),W=v(u(S),2),q=u(W),Y=v(S,2),$=v(u(Y),2),Z=u($),ie=v(g,2),me=u(ie);{var ye=ne=>{var ge=Wu();I(ne,ge)},xe=ne=>{var ge=He(),O=Se(ge);{var P=T=>{var E=Yu();I(T,E)},j=T=>{var E=Vu();I(T,E)};F(O,T=>{t.result.isHit?T(P):T(j,!1)},!0)}I(ne,ge)};F(me,ne=>{t.result.isCritical?ne(ye):ne(xe,!1)})}var De=v(me,2);{var se=ne=>{var ge=Gu(),O=u(ge),P=u(O),j=v(O,2),T=u(j);U(()=>{w(P,t.result.damage),w(T,`damage to ${t.targetName??""}`)}),I(ne,ge)};F(De,ne=>{t.result.isHit&&ne(se)})}U(()=>{o=ze(s,1,"combat-result svelte-1jt2qdd",null,o,{hit:t.result.isHit,miss:!t.result.isHit,critical:t.result.isCritical}),w(d,`${t.attackerName??""} attacks with ${t.attackName??""}!`),w(x,t.result.roll),w(A,t.result.roll),w(N,t.result.attackBonus),w(q,t.result.total),w(Z,t.result.targetAC)}),I(e,a),Ce()}Xe(["click","keydown"]);var Ku=D('<div class="monster-move-overlay svelte-18np0et" role="dialog" aria-modal="true" aria-label="Monster move result" tabindex="0" data-testid="monster-move-overlay"><div class="monster-move-card svelte-18np0et" role="document" data-testid="monster-move-card"><div class="move-header svelte-18np0et"><h3 class="monster-name svelte-18np0et" data-testid="monster-name"> </h3> <button class="dismiss-button svelte-18np0et" aria-label="Dismiss monster move result" data-testid="dismiss-monster-move">â</button></div> <div class="move-content svelte-18np0et"><span class="move-icon svelte-18np0et">ð</span> <p class="move-text svelte-18np0et" data-testid="move-text">Moved but could not attack</p></div> <p class="dismiss-hint svelte-18np0et">Click anywhere to continue</p></div></div>');function Qu(e,t){Ie(t,!0);function n(){t.onDismiss&&t.onDismiss()}function r(f){(f.key==="Escape"||f.key==="Enter"||f.key===" ")&&(f.preventDefault(),n())}var a=Ku();a.__click=n,a.__keydown=r;var s=u(a);s.__click=f=>f.stopPropagation(),s.__keydown=f=>f.stopPropagation();var o=u(s),c=u(o),l=u(c),d=v(c,2);d.__click=n,U(()=>w(l,t.monsterName)),I(e,a),Ce()}Xe(["click","keydown"]);var Zu=D('<div class="xp-counter svelte-1ymh8ps" data-testid="xp-counter"><span class="xp-icon svelte-1ymh8ps" aria-label="Experience Points">â­</span> <span class="xp-label svelte-1ymh8ps">XP:</span> <span class="xp-value svelte-1ymh8ps" data-testid="xp-value"> </span></div>');function Ju(e,t){var n=Zu(),r=v(u(n),4),a=u(r);U(()=>w(a,t.xp)),I(e,n)}var $u=D('<div class="healing-surge-counter svelte-121e3gw" data-testid="healing-surge-counter"><span class="surge-icon svelte-121e3gw" aria-label="Healing Surges">â¤ï¸</span> <span class="surge-label svelte-121e3gw">Surges:</span> <span class="surge-value svelte-121e3gw" data-testid="surge-value"> </span></div>');function ef(e,t){var n=$u(),r=v(u(n),4),a=u(r);U(()=>w(a,t.surges)),I(e,n)}var tf=D('<div class="defeat-overlay svelte-1h38uhv" role="dialog" aria-modal="true" aria-label="Monster defeated notification" tabindex="0" data-testid="defeat-notification-overlay"><div class="defeat-notification svelte-1h38uhv" role="dialog" aria-labelledby="defeat-title" tabindex="-1" data-testid="defeat-notification"><div class="defeat-header svelte-1h38uhv"><span class="defeat-icon svelte-1h38uhv">ð</span> <h3 class="defeat-title svelte-1h38uhv" id="defeat-title" data-testid="defeat-title"> </h3> <button class="dismiss-button svelte-1h38uhv" aria-label="Dismiss notification" data-testid="dismiss-defeat-notification">â</button></div> <div class="xp-gain-section svelte-1h38uhv" data-testid="xp-gain-section"><span class="xp-icon svelte-1h38uhv">â­</span> <span class="xp-amount svelte-1h38uhv" data-testid="xp-amount"> </span></div> <p class="dismiss-hint svelte-1h38uhv">Click anywhere to dismiss</p></div></div>');function nf(e,t){Ie(t,!0);function n(){t.onDismiss&&t.onDismiss()}function r(_){(_.key==="Escape"||_.key==="Enter"||_.key===" ")&&(_.preventDefault(),n())}var a=tf();a.__click=n,a.__keydown=r;var s=u(a);s.__click=_=>_.stopPropagation(),s.__keydown=_=>_.stopPropagation();var o=u(s),c=v(u(o),2),l=u(c),d=v(c,2);d.__click=n;var f=v(o,2),g=v(u(f),2),h=u(g);U(()=>{w(l,`${t.monsterName??""} Defeated!`),w(h,`+${t.xpGained??""} XP`)}),I(e,a),Ce()}Xe(["click","keydown"]);var rf=D('<div class="hero-section svelte-da0ogt"><img class="hero-avatar svelte-da0ogt"/> <div class="hero-level-info svelte-da0ogt"><span class="hero-name svelte-da0ogt" data-testid="level-up-hero-name"> </span> <span class="level-badge svelte-da0ogt" data-testid="level-badge"> </span></div></div>'),af=D('<div class="level-up-overlay svelte-da0ogt" role="dialog" aria-modal="true" aria-label="Level up notification" tabindex="0" data-testid="level-up-overlay"><div class="level-up-notification svelte-da0ogt" role="dialog" aria-labelledby="level-up-title" tabindex="-1" data-testid="level-up-notification"><div class="level-up-header svelte-da0ogt"><span class="level-up-icon svelte-da0ogt">â¨</span> <h3 class="level-up-title svelte-da0ogt" id="level-up-title" data-testid="level-up-title">LEVEL UP!</h3> <span class="level-up-icon svelte-da0ogt">â¨</span> <button class="dismiss-button svelte-da0ogt" aria-label="Dismiss notification" data-testid="dismiss-level-up">â</button></div> <!> <div class="stats-section svelte-da0ogt" data-testid="stats-section"><div class="stat-change svelte-da0ogt"><span class="stat-label svelte-da0ogt">HP</span> <span class="stat-old svelte-da0ogt" data-testid="old-hp"> </span> <span class="stat-arrow svelte-da0ogt">â</span> <span class="stat-new svelte-da0ogt" data-testid="new-hp"> </span></div> <div class="stat-change svelte-da0ogt"><span class="stat-label svelte-da0ogt">AC</span> <span class="stat-old svelte-da0ogt" data-testid="old-ac"> </span> <span class="stat-arrow svelte-da0ogt">â</span> <span class="stat-new svelte-da0ogt" data-testid="new-ac"> </span></div> <div class="stat-change svelte-da0ogt"><span class="stat-label svelte-da0ogt">Surge</span> <span class="stat-old svelte-da0ogt" data-testid="old-surge"> </span> <span class="stat-arrow svelte-da0ogt">â</span> <span class="stat-new svelte-da0ogt" data-testid="new-surge"> </span></div> <div class="stat-change svelte-da0ogt"><span class="stat-label svelte-da0ogt">Attack</span> <span class="stat-old svelte-da0ogt" data-testid="old-attack"> </span> <span class="stat-arrow svelte-da0ogt">â</span> <span class="stat-new svelte-da0ogt" data-testid="new-attack"> </span></div></div> <div class="xp-spent-section svelte-da0ogt" data-testid="xp-spent-section"><span class="xp-icon svelte-da0ogt">â­</span> <span class="xp-text svelte-da0ogt">5 XP spent</span></div> <div class="critical-bonus-section svelte-da0ogt" data-testid="critical-bonus"><span class="bonus-text svelte-da0ogt">âï¸ Critical attacks now deal +1 damage!</span></div> <button class="continue-button svelte-da0ogt" data-testid="continue-button">Continue</button> <p class="dismiss-hint svelte-da0ogt">Click anywhere to dismiss</p></div></div>');function sf(e,t){Ie(t,!0);const n=Ct.find(se=>se.id===t.heroId);function r(){t.onDismiss&&t.onDismiss()}function a(se){(se.key==="Escape"||se.key==="Enter"||se.key===" ")&&(se.preventDefault(),r())}var s=af();s.__click=r,s.__keydown=a;var o=u(s);o.__click=se=>se.stopPropagation(),o.__keydown=se=>{(se.key==="Escape"||se.key==="Enter"||se.key===" ")&&se.stopPropagation()};var c=u(o),l=v(u(c),6);l.__click=r;var d=v(c,2);{var f=se=>{var ne=rf(),ge=u(ne),O=v(ge,2),P=u(O),j=u(P),T=v(P,2),E=u(T);U(X=>{B(ge,"src",X),B(ge,"alt",n.name),w(j,n.name),w(E,`Level ${t.newStats.level??""}`)},[()=>Oe(n.imagePath)]),I(se,ne)};F(d,se=>{n&&se(f)})}var g=v(d,2),h=u(g),_=v(u(h),2),x=u(_),z=v(_,4),k=u(z),H=v(h,2),A=v(u(H),2),M=u(A),C=v(A,4),N=u(C),S=v(H,2),W=v(u(S),2),q=u(W),Y=v(W,4),$=u(Y),Z=v(S,2),ie=v(u(Z),2),me=u(ie),ye=v(ie,4),xe=u(ye),De=v(g,6);De.__click=r,U(()=>{w(x,t.oldStats.maxHp),w(k,t.newStats.maxHp),w(M,t.oldStats.ac),w(N,t.newStats.ac),w(q,t.oldStats.surgeValue),w($,t.newStats.surgeValue),w(me,`+${t.oldStats.attackBonus??""}`),w(xe,`+${t.newStats.attackBonus??""}`)}),I(e,s),Ce()}Xe(["click","keydown"]);var of=D('<div class="healing-surge-overlay svelte-1ugospu" data-testid="healing-surge-notification"><div class="healing-surge-card svelte-1ugospu"><h2 class="healing-title svelte-1ugospu" data-testid="healing-title">Healing Surge!</h2> <div class="hero-section svelte-1ugospu"><img class="hero-avatar svelte-1ugospu"/> <span class="hero-name svelte-1ugospu" data-testid="healed-hero-name"> </span></div> <div class="healing-message svelte-1ugospu"><span class="was-text svelte-1ugospu">was at 0 HP</span></div> <div class="hp-restored-section svelte-1ugospu" data-testid="hp-restored-section"><span class="hp-icon svelte-1ugospu">â¤ï¸</span> <span class="hp-value svelte-1ugospu"> </span> <span class="hp-text svelte-1ugospu">restored</span></div> <button class="continue-button svelte-1ugospu" data-testid="dismiss-healing-surge">Continue</button></div></div>');function lf(e,t){Ie(t,!0);function n(x){return Ct.find(z=>z.id===x)?.name??"Hero"}function r(x){return Ct.find(z=>z.id===x)?.imagePath??""}var a=of(),s=u(a),o=v(u(s),2),c=u(o),l=v(c,2),d=u(l),f=v(o,4),g=v(u(f),2),h=u(g),_=v(f,2);_.__click=function(...x){t.onDismiss?.apply(this,x)},U((x,z,k)=>{B(c,"src",x),B(c,"alt",z),w(d,k),w(h,`+${t.hpRestored??""} HP`)},[()=>Oe(r(t.heroId)),()=>n(t.heroId),()=>n(t.heroId)]),I(e,a),Ce()}Xe(["click"]);var cf=D('<span class="hero-level svelte-8w11tm" data-testid="hero-level">Level 2 â­</span>'),df=D('<div class="player-info svelte-8w11tm" data-testid="turn-indicator"><img class="player-avatar svelte-8w11tm"/> <div class="turn-details svelte-8w11tm"><span class="player-name svelte-8w11tm"> </span> <!> <span class="turn-phase svelte-8w11tm" data-testid="turn-phase"> </span> <span class="turn-number svelte-8w11tm"> </span> <span class="hero-hp svelte-8w11tm" data-testid="hero-hp"> </span></div></div>'),uf=D('<div class="player-info svelte-8w11tm"><img class="player-avatar svelte-8w11tm"/> <div class="turn-details svelte-8w11tm"><span class="player-name svelte-8w11tm"> </span> <span class="turn-phase svelte-8w11tm"> </span> <span class="turn-number svelte-8w11tm"> </span> <span class="hero-hp svelte-8w11tm"> </span></div></div>'),ff=D('<div><img class="tile-image svelte-8w11tm"/> <!></div>'),vf=D('<div class="movement-overlay-container svelte-8w11tm"><!></div>'),hf=D('<div data-testid="hero-token"><img class="token-image svelte-8w11tm"/> <span class="token-label svelte-8w11tm"> </span></div>'),pf=D('<div class="player-info svelte-8w11tm"><img class="player-avatar svelte-8w11tm"/> <div class="turn-details svelte-8w11tm"><span class="player-name svelte-8w11tm"> </span> <span class="turn-phase svelte-8w11tm"> </span> <span class="turn-number svelte-8w11tm"> </span> <span class="hero-hp svelte-8w11tm"> </span></div></div>'),mf=D('<span class="hero-level svelte-8w11tm" data-testid="hero-level">Level 2 â­</span>'),gf=D('<div class="player-info svelte-8w11tm" data-testid="turn-indicator"><img class="player-avatar svelte-8w11tm"/> <div class="turn-details svelte-8w11tm"><span class="player-name svelte-8w11tm"> </span> <!> <span class="turn-phase svelte-8w11tm" data-testid="turn-phase"> </span> <span class="turn-number svelte-8w11tm"> </span> <span class="hero-hp svelte-8w11tm" data-testid="hero-hp"> </span></div></div>'),_f=D('<div class="game-board svelte-8w11tm" data-testid="game-board"><div data-testid="player-zone-top"><!></div> <div class="middle-section svelte-8w11tm"><div data-testid="player-zone-left"><!></div> <div class="board-container svelte-8w11tm"><div class="dungeon-map svelte-8w11tm" data-testid="dungeon-map" role="button" tabindex="0"><!> <!> <!> <!></div> <div class="board-controls svelte-8w11tm"><div class="objective-display svelte-8w11tm" data-testid="objective-display"><span class="objective-label svelte-8w11tm">ð¯ Objective:</span> <span class="objective-text svelte-8w11tm"> </span> <span class="objective-progress svelte-8w11tm" data-testid="objective-progress"> </span></div> <!> <!> <!> <button class="end-phase-button svelte-8w11tm" data-testid="end-phase-button"> </button> <button class="reset-button svelte-8w11tm" data-testid="reset-button">â© Return to Character Select</button> <!></div></div> <div data-testid="player-zone-right"><!></div></div> <div data-testid="player-zone-bottom"><!></div> <!> <!> <!> <!> <!>  <!> <!> <!></div>');function yf(e,t){Ie(t,!0);const n=140,r=4,a=8,s=4,o=n*r,c=n*a,l=n*s,d=140,f=.15,g=1,h=36,_=36,x=632,z=632,k=1195,H=3,A=0;let M=L(pe([])),C=L(pe([])),N=L(pe({})),S=L(pe({currentHeroIndex:0,currentPhase:"hero-phase",turnNumber:1,exploredThisTurn:!1})),W=L(pe([])),q=L(!1),Y=L(pe({tiles:[],unexploredEdges:[],tileDeck:[]})),$=L(pe([])),Z=L(null),ie=L(null),me=L(null),ye=L(pe([])),xe=L(null),De=L(null),se=L(null),ne=L(0),ge=L(null),O=L(pe({actionsTaken:[],canMove:!0,canAttack:!0})),P=L(pe({monstersDefeated:0,monstersToDefeat:2,objective:"Defeat 2 monsters"})),j=L(pe({xp:0,healingSurges:2})),T=L(null),E=L(null),X=L(null),re=L(null),de=L(null),le=L(null),ue=L(null),we=L(1),ke=L(pe({})),ce=L(null),_e=L(null),fe=K(()=>yt(i(Y)));Tt(()=>{const m=G.subscribe(()=>{const y=G.getState();b(M,y.game.heroTokens,!0),b(C,y.heroes.selectedHeroes,!0),b(N,y.heroes.heroEdgeMap,!0),b(S,y.game.turnState,!0),b(W,y.game.validMoveSquares,!0),b(q,y.game.showingMovement,!0),b(Y,y.game.dungeon,!0),b($,y.game.monsters,!0),b(Z,y.game.recentlySpawnedMonsterId,!0),b(ie,y.game.attackResult,!0),b(me,y.game.attackTargetId,!0),b(ye,y.game.heroHp,!0),b(xe,y.game.monsterAttackResult,!0),b(De,y.game.monsterAttackTargetId,!0),b(se,y.game.monsterAttackerId,!0),b(ne,y.game.villainPhaseMonsterIndex,!0),b(ge,y.game.monsterMoveActionId,!0),b(O,y.game.heroTurnActions,!0),b(P,y.game.scenario,!0),b(j,y.game.partyResources,!0),b(T,y.game.defeatedMonsterXp,!0),b(E,y.game.defeatedMonsterName,!0),b(X,y.game.leveledUpHeroId,!0),b(re,y.game.levelUpOldStats,!0),b(de,y.game.healingSurgeUsedHeroId,!0),b(le,y.game.healingSurgeHpRestored,!0),b(ke,y.heroes.heroPowerCards,!0),b(ce,y.game.attackName,!0),b(_e,y.game.drawnEncounter,!0)}),p=G.getState();return b(M,p.game.heroTokens,!0),b(C,p.heroes.selectedHeroes,!0),b(N,p.heroes.heroEdgeMap,!0),b(S,p.game.turnState,!0),b(W,p.game.validMoveSquares,!0),b(q,p.game.showingMovement,!0),b(Y,p.game.dungeon,!0),b($,p.game.monsters,!0),b(Z,p.game.recentlySpawnedMonsterId,!0),b(ie,p.game.attackResult,!0),b(me,p.game.attackTargetId,!0),b(ye,p.game.heroHp,!0),b(xe,p.game.monsterAttackResult,!0),b(De,p.game.monsterAttackTargetId,!0),b(se,p.game.monsterAttackerId,!0),b(ne,p.game.villainPhaseMonsterIndex,!0),b(ge,p.game.monsterMoveActionId,!0),b(O,p.game.heroTurnActions,!0),b(P,p.game.scenario,!0),b(j,p.game.partyResources,!0),b(T,p.game.defeatedMonsterXp,!0),b(E,p.game.defeatedMonsterName,!0),b(X,p.game.leveledUpHeroId,!0),b(re,p.game.levelUpOldStats,!0),b(de,p.game.healingSurgeUsedHeroId,!0),b(le,p.game.healingSurgeHpRestored,!0),b(ke,p.heroes.heroPowerCards,!0),b(ce,p.game.attackName,!0),b(_e,p.game.drawnEncounter,!0),m}),Tt(()=>{i(S).currentPhase==="hero-phase"&&Nd(i(O))&&G.dispatch(ts())}),Tt(()=>{if(i(S).currentPhase!=="hero-phase"||!i(O).canMove||i(q))return;const m=ve();if(!m)return;const p=Pe(m);p&&G.dispatch(es({heroId:m,speed:p.speed}))}),Tt(()=>{if(i(S).currentPhase!=="villain-phase"||i(xe)!==null||i(ge)!==null||i(_e)!==null)return;const m=Lt();if(i(ne)>=m.length){G.dispatch(ns());return}G.dispatch(Kd({}))});function yt(m){if(m.tiles.length===0)return{minCol:0,maxCol:0,minRow:0,maxRow:0,width:x,height:k};let p=1/0,y=-1/0,R=1/0,V=-1/0;for(const Te of m.tiles)p=Math.min(p,Te.position.col),y=Math.max(y,Te.position.col),R=Math.min(R,Te.position.row),V=Math.max(V,Te.position.row);const Q=y-p+1,ee=x+(Q-1)*o,ae=Math.max(0,-R),J=Math.max(0,V),be=k+ae*l+J*l;return{minCol:p,maxCol:y,minRow:R,maxRow:V,width:Math.max(ee,x),height:Math.max(be,k)}}function Ue(m,p){const y=(m.position.col-p.minCol)*o;let R=0;return m.position.row<0?R=(m.position.row-p.minRow)*l:m.position.row===0?R=Math.max(0,-p.minRow)*l-H:R=Math.max(0,-p.minRow)*l+c+(m.position.row-1)*l-H-A,{x:y,y:R}}function Rt(m){return m.tileType==="start"?"assets/StartTile.png":ii.find(y=>y.tileType===m.tileType)?.imagePath||"assets/Tile_Black_x2_01.png"}function Ee(m){return m.tileType==="start"?{width:x,height:k}:{width:x,height:z}}Tt(()=>{if(i(ue)){const m=()=>{const y=i(ue);if(!y)return;const R=y.clientWidth-d,V=y.clientHeight-d,Q=i(fe),ee=R/Q.width,ae=V/Q.height,J=Math.min(ee,ae,g);b(we,Math.max(J,f),!0)};m();const p=new ResizeObserver(m);return p.observe(i(ue)),()=>p.disconnect()}});function Pe(m){return i(C).find(p=>p.id===m)}function ve(){return i(M)[i(S).currentHeroIndex]?.heroId}function vt(m){switch(m){case"hero-phase":return"Hero Phase";case"exploration-phase":return"Exploration Phase";case"villain-phase":return"Villain Phase"}}function et(m){return i(ye).find(y=>y.heroId===m)?.currentHp??0}function it(m){return i(ye).find(y=>y.heroId===m)?.maxHp??0}function tt(m){return i(ye).find(y=>y.heroId===m)?.level??1}function Lt(){const m=ve();return m?i($).filter(p=>p.controllerId===m):[]}function fn(){G.dispatch(aa())}function gi(m,p){const y=n/2,R=p.x+h+m.x*n+y,V=p.y+_+m.y*n+y;return`left: ${R}px; top: ${V}px;`}function zt(){const m=ve();if(m&&i(N)[m])return i(N)[m];const p=i(S).currentHeroIndex%4;return["bottom","right","top","left"][p]}function _i(m){const p=i(N)[m];if(!p)return 0;switch(p){case"bottom":return 0;case"top":return 180;case"left":return 90;case"right":return-90;default:return 0}}function sa(m){if(i(S).currentPhase!=="hero-phase")return;const p=ve();if(!p)return;const y=Pe(p);y&&(i(q)?G.dispatch(Ld()):G.dispatch(es({heroId:p,speed:y.speed})))}function yi(m){const p=ve();p&&G.dispatch(qd({heroId:p,position:m}))}function wi(m){(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),sa())}function ki(){switch(i(S).currentPhase){case"hero-phase":G.dispatch(ts());break;case"exploration-phase":G.dispatch(Ud());break;case"villain-phase":G.dispatch(ns());break}}function bi(){switch(i(S).currentPhase){case"hero-phase":return"End Hero Phase";case"exploration-phase":return"End Exploration";case"villain-phase":return"End Villain Phase"}}function xi(){G.dispatch(Wd())}function Ti(m){const p=i(Y).tiles.find(y=>y.id===m);return p?Ue(p,i(fe)):{x:0,y:0}}const sr="start-tile";function Si(){const m=ve();if(!m)return sr;const p=i(M).find(R=>R.heroId===m);return p?Tn(p.position,i(Y))?.id??sr:sr}function Ii(){const m=ve();if(!m)return[];const p=i(M).find(R=>R.heroId===m);if(!p)return[];const y=Si();return kd(p.position,i($),y,i(Y))}function Ci(m){return Ct.find(p=>p.id===m)}const Ei=1;function Pi(m,p){const y=ve();if(!y)return;const R=Qn(m);if(!R||R.attackBonus===void 0)return;const V=i($).find(J=>J.instanceId===p);if(!V)return;const Q=yd(V.monsterId);if(Q===void 0)return;const ee={name:R.name,attackBonus:R.attackBonus,damage:R.damage??Ei},ae=pd(ee,Q);G.dispatch(Vd({result:ae,targetInstanceId:p,attackName:R.name})),R.type==="daily"&&G.dispatch(Bc({heroId:y,cardId:m}))}function Mi(){G.dispatch(Gd())}function ir(m){return Pn.find(y=>y.id===m)?.name||"Monster"}function Hi(){if(i(me))return i($).find(m=>m.instanceId===i(me))}function Ai(){G.dispatch(Qd())}function Di(){G.dispatch(Zd())}function Ri(){return i(De)&&Ct.find(p=>p.id===i(De))?.name||"Hero"}function zi(){if(!i(se))return"Monster";const m=i($).find(p=>p.instanceId===i(se));return m?ir(m.monsterId):"Monster"}function Oi(){if(!i(ge))return"Monster";const m=i($).find(p=>p.instanceId===i(ge));return m?ir(m.monsterId):"Monster"}function Ni(){G.dispatch(Xd())}function ji(){G.dispatch($d())}function Bi(){G.dispatch(Jd())}function Fi(){G.dispatch(Yd())}function Li(){if(i(X))return i(ye).find(m=>m.heroId===i(X))}var ia=_f(),or=u(ia);let oa;var qi=u(or);{var Ui=m=>{const p=K(ve),y=K(()=>i(p)?Pe(i(p)):void 0);var R=He(),V=Se(R);{var Q=ee=>{var ae=df(),J=u(ae),be=v(J,2),Te=u(be),Ke=u(Te),We=v(Te,2);{var ot=Be=>{var ct=cf();I(Be,ct)};F(We,Be=>{tt(i(p))===2&&Be(ot)})}var Qe=v(We,2),wt=u(Qe),lt=v(Qe,2),kt=u(lt),qt=v(lt,2),Ut=u(qt);U((Be,ct,fr,vr)=>{B(J,"src",Be),B(J,"alt",i(y).name),w(Ke,`${i(y).name??""}'s Turn`),w(wt,ct),w(kt,`Turn ${i(S).turnNumber??""}`),w(Ut,`HP: ${fr??""}/${vr??""}`)},[()=>Oe(i(y).imagePath),()=>vt(i(S).currentPhase),()=>et(i(p)),()=>it(i(p))]),I(ee,ae)};F(V,ee=>{i(y)&&i(p)&&ee(Q)})}I(m,R)};F(qi,m=>{zt()==="top"&&m(Ui)})}var la=v(or,2),lr=u(la);let ca;var Wi=u(lr);{var Yi=m=>{const p=K(ve),y=K(()=>i(p)?Pe(i(p)):void 0);var R=He(),V=Se(R);{var Q=ee=>{var ae=uf(),J=u(ae),be=v(J,2),Te=u(be),Ke=u(Te),We=v(Te,2),ot=u(We),Qe=v(We,2),wt=u(Qe),lt=v(Qe,2),kt=u(lt);U((qt,Ut,Be,ct)=>{B(J,"src",qt),B(J,"alt",i(y).name),w(Ke,`${i(y).name??""}'s Turn`),w(ot,Ut),w(wt,`Turn ${i(S).turnNumber??""}`),w(kt,`HP: ${Be??""}/${ct??""}`)},[()=>Oe(i(y).imagePath),()=>vt(i(S).currentPhase),()=>et(i(p)),()=>it(i(p))]),I(ee,ae)};F(V,ee=>{i(y)&&i(p)&&ee(Q)})}I(m,R)};F(Wi,m=>{zt()==="left"&&m(Yi)})}var cr=v(lr,2),Kt=u(cr);Kt.__click=sa,Kt.__keydown=wi;var da=u(Kt);Le(da,17,()=>i(Y).tiles,m=>m.id,(m,p)=>{const y=K(()=>Ue(i(p),i(fe))),R=K(()=>Ee(i(p)));var V=ff();let Q;var ee=u(V),ae=v(ee,2);Le(ae,17,()=>i(Y).unexploredEdges.filter(J=>J.tileId===i(p).id),J=>J.direction,(J,be)=>{Hu(J,{get direction(){return i(be).direction},cellSize:n,get tileWidth(){return i(R).width},get tileHeight(){return i(R).height}})}),U(J=>{Q=ze(V,1,"placed-tile svelte-8w11tm",null,Q,{"start-tile":i(p).tileType==="start"}),B(V,"data-testid",i(p).tileType==="start"?"start-tile":"dungeon-tile"),B(V,"data-tile-id",i(p).id),Ot(V,`left: ${i(y).x??""}px; top: ${i(y).y??""}px; width: ${i(R).width??""}px; height: ${i(R).height??""}px;`),B(ee,"src",J),B(ee,"alt",i(p).tileType),Ot(ee,i(p).rotation!==0?`transform: rotate(${i(p).rotation}deg);`:"")},[()=>Oe(Rt(i(p)))]),I(m,V)});var ua=v(da,2);{var Vi=m=>{const p=K(()=>i(Y).tiles.find(Q=>Q.tileType==="start"));var y=He(),R=Se(y);{var V=Q=>{const ee=K(()=>Ue(i(p),i(fe))),ae=K(()=>Ee(i(p)));var J=vf(),be=u(J);Cu(be,{get validMoveSquares(){return i(W)},tileOffsetX:h,tileOffsetY:_,cellSize:n,onSquareClick:yi}),U(()=>Ot(J,`left: ${i(ee).x??""}px; top: ${i(ee).y??""}px; width: ${i(ae).width??""}px; height: ${i(ae).height??""}px;`)),I(Q,J)};F(R,Q=>{i(p)&&Q(V)})}I(m,y)};F(ua,m=>{i(q)&&i(W).length>0&&m(Vi)})}var fa=v(ua,2);Le(fa,17,()=>i(M),m=>m.heroId,(m,p)=>{const y=K(()=>Pe(i(p).heroId)),R=K(()=>i(p).heroId===ve()),V=K(()=>i(Y).tiles.find(be=>be.tileType==="start")),Q=K(()=>_i(i(p).heroId));var ee=He(),ae=Se(ee);{var J=be=>{const Te=K(()=>Ue(i(V),i(fe)));var Ke=hf();let We;var ot=u(Ke),Qe=v(ot,2),wt=u(Qe);U((lt,kt)=>{We=ze(Ke,1,"hero-token svelte-8w11tm",null,We,{active:i(R)}),B(Ke,"data-hero-id",i(p).heroId),Ot(Ke,`${lt??""} --token-rotation: ${i(Q)??""}deg;`),B(ot,"src",kt),B(ot,"alt",i(y).name),w(wt,i(y).name)},[()=>gi(i(p).position,i(Te)),()=>Oe(i(y).imagePath)]),I(be,Ke)};F(ae,be=>{i(y)&&i(V)&&be(J)})}I(m,ee)});var Gi=v(fa,2);Le(Gi,17,()=>i($),m=>m.instanceId,(m,p)=>{{let y=K(()=>Ti(i(p).tileId));Du(m,{get monster(){return i(p)},cellSize:n,tileOffsetX:h,tileOffsetY:_,get tilePixelOffset(){return i(y)}})}});var Xi=v(Kt,2),va=u(Xi),ha=v(u(va),2),Ki=u(ha),Qi=v(ha,2),Zi=u(Qi),pa=v(va,2);Ju(pa,{get xp(){return i(j).xp}});var ma=v(pa,2);ef(ma,{get surges(){return i(j).healingSurges}});var ga=v(ma,2);Pu(ga,{get tileCount(){return i(Y).tileDeck.length}});var dr=v(ga,2);dr.__click=ki;var Ji=u(dr),_a=v(dr,2);_a.__click=fn;var $i=v(_a,2);{var eo=m=>{const p=K(ve),y=K(()=>i(p)?i(ke)[i(p)]:void 0),R=K(Ii);var V=He(),Q=Se(V);{var ee=ae=>{Uu(ae,{get heroPowerCards(){return i(y)},get adjacentMonsters(){return i(R)},onAttackWithCard:Pi})};F(Q,ae=>{i(y)&&i(R).length>0&&ae(ee)})}I(m,V)};F($i,m=>{i(S).currentPhase==="hero-phase"&&i(O).canAttack&&m(eo)})}Al(cr,m=>b(ue,m),()=>i(ue));var ya=v(cr,2);let wa;var to=u(ya);{var no=m=>{const p=K(ve),y=K(()=>i(p)?Pe(i(p)):void 0);var R=He(),V=Se(R);{var Q=ee=>{var ae=pf(),J=u(ae),be=v(J,2),Te=u(be),Ke=u(Te),We=v(Te,2),ot=u(We),Qe=v(We,2),wt=u(Qe),lt=v(Qe,2),kt=u(lt);U((qt,Ut,Be,ct)=>{B(J,"src",qt),B(J,"alt",i(y).name),w(Ke,`${i(y).name??""}'s Turn`),w(ot,Ut),w(wt,`Turn ${i(S).turnNumber??""}`),w(kt,`HP: ${Be??""}/${ct??""}`)},[()=>Oe(i(y).imagePath),()=>vt(i(S).currentPhase),()=>et(i(p)),()=>it(i(p))]),I(ee,ae)};F(V,ee=>{i(y)&&i(p)&&ee(Q)})}I(m,R)};F(to,m=>{zt()==="right"&&m(no)})}var ur=v(la,2);let ka;var ro=u(ur);{var ao=m=>{const p=K(ve),y=K(()=>i(p)?Pe(i(p)):void 0);var R=He(),V=Se(R);{var Q=ee=>{var ae=gf(),J=u(ae),be=v(J,2),Te=u(be),Ke=u(Te),We=v(Te,2);{var ot=Be=>{var ct=mf();I(Be,ct)};F(We,Be=>{tt(i(p))===2&&Be(ot)})}var Qe=v(We,2),wt=u(Qe),lt=v(Qe,2),kt=u(lt),qt=v(lt,2),Ut=u(qt);U((Be,ct,fr,vr)=>{B(J,"src",Be),B(J,"alt",i(y).name),w(Ke,`${i(y).name??""}'s Turn`),w(wt,ct),w(kt,`Turn ${i(S).turnNumber??""}`),w(Ut,`HP: ${fr??""}/${vr??""}`)},[()=>Oe(i(y).imagePath),()=>vt(i(S).currentPhase),()=>et(i(p)),()=>it(i(p))]),I(ee,ae)};F(V,ee=>{i(y)&&i(p)&&ee(Q)})}I(m,R)};F(ro,m=>{zt()==="bottom"&&m(ao)})}var ba=v(ur,2);{var so=m=>{const p=K(()=>i($).find(Q=>Q.instanceId===i(Z)));var y=He(),R=Se(y);{var V=Q=>{zu(Q,{get monsterId(){return i(p).monsterId},onDismiss:xi})};F(R,Q=>{i(p)&&Q(V)})}I(m,y)};F(ba,m=>{i(Z)&&m(so)})}var xa=v(ba,2);{var io=m=>{const p=K(ve),y=K(()=>i(p)?Ci(i(p)):void 0),R=K(Hi);var V=He(),Q=Se(V);{var ee=ae=>{{let J=K(()=>i(R)?ir(i(R).monsterId):"Monster");rs(ae,{get result(){return i(ie)},get attackerName(){return i(y).name},get attackName(){return i(ce)},get targetName(){return i(J)},onDismiss:Mi})}};F(Q,ae=>{i(y)&&i(ce)&&ae(ee)})}I(m,V)};F(xa,m=>{i(ie)&&m(io)})}var Ta=v(xa,2);{var oo=m=>{{let p=K(zi),y=K(Ri);rs(m,{get result(){return i(xe)},get attackerName(){return i(p)},attackName:"Attack",get targetName(){return i(y)},onDismiss:Ai})}};F(Ta,m=>{i(xe)&&m(oo)})}var Sa=v(Ta,2);{var lo=m=>{{let p=K(Oi);Qu(m,{get monsterName(){return i(p)},onDismiss:Di})}};F(Sa,m=>{i(ge)&&m(lo)})}var Ia=v(Sa,2);{var co=m=>{nf(m,{get monsterName(){return i(E)},get xpGained(){return i(T)},onDismiss:Ni})};F(Ia,m=>{i(T)!==null&&i(E)!==null&&m(co)})}var Ca=v(Ia,2);{var uo=m=>{const p=K(Li);var y=He(),R=Se(y);{var V=Q=>{sf(Q,{get heroId(){return i(X)},get oldStats(){return i(re)},get newStats(){return i(p)},onDismiss:ji})};F(R,Q=>{i(p)&&Q(V)})}I(m,y)};F(Ca,m=>{i(X)&&i(re)&&!i(ie)&&!i(T)&&m(uo)})}var Ea=v(Ca,2);{var fo=m=>{lf(m,{get heroId(){return i(de)},get hpRestored(){return i(le)},onDismiss:Bi})};F(Ea,m=>{i(de)&&i(le)!==null&&m(fo)})}var vo=v(Ea,2);{var ho=m=>{Nu(m,{get encounter(){return i(_e)},onDismiss:Fi})};F(vo,m=>{i(_e)&&m(ho)})}U((m,p,y,R,V)=>{oa=ze(or,1,"edge-zone edge-top svelte-8w11tm",null,oa,m),ca=ze(lr,1,"edge-zone edge-left svelte-8w11tm",null,ca,p),Ot(Kt,`transform: scale(${i(we)??""}); width: ${i(fe).width??""}px; height: ${i(fe).height??""}px;`),B(Kt,"aria-label",i(q)?"Click to hide movement options":"Click to show movement options for current hero"),w(Ki,i(P).objective),w(Zi,`${i(P).monstersDefeated??""} / ${i(P).monstersToDefeat??""} defeated`),w(Ji,y),wa=ze(ya,1,"edge-zone edge-right svelte-8w11tm",null,wa,R),ka=ze(ur,1,"edge-zone edge-bottom svelte-8w11tm",null,ka,V)},[()=>({"active-edge":zt()==="top"}),()=>({"active-edge":zt()==="left"}),bi,()=>({"active-edge":zt()==="right"}),()=>({"active-edge":zt()==="bottom"})]),I(e,ia),Ce()}Xe(["click","keydown"]);var wf=D('<div class="victory-screen svelte-12ok9q2" data-testid="victory-screen"><div class="victory-content svelte-12ok9q2"><div class="victory-icon svelte-12ok9q2">ð</div> <h1 class="victory-title svelte-12ok9q2">Victory!</h1> <p class="victory-message svelte-12ok9q2"> </p> <div class="victory-objective svelte-12ok9q2"><span class="objective-label svelte-12ok9q2">Objective Complete:</span> <span class="objective-text svelte-12ok9q2"> </span></div> <button class="return-button svelte-12ok9q2" data-testid="return-to-menu-button">Return to Character Select</button></div></div>');function kf(e,t){Ie(t,!0);let n=L(pe({monstersDefeated:0,monstersToDefeat:2,objective:"Defeat 2 monsters"}));Tt(()=>{const h=G.subscribe(()=>{const x=G.getState();b(n,x.game.scenario,!0)}),_=G.getState();return b(n,_.game.scenario,!0),h});function r(){G.dispatch(aa())}var a=wf(),s=u(a),o=v(u(s),4),c=u(o),l=v(o,2),d=v(u(l),2),f=u(d),g=v(l,2);g.__click=r,U(()=>{w(c,`You have defeated ${i(n).monstersDefeated??""} monsters and completed the objective!`),w(f,i(n).objective)}),I(e,a),Ce()}Xe(["click"]);var bf=D('<div class="defeat-screen svelte-1jz2vy1" data-testid="defeat-screen"><div class="defeat-content svelte-1jz2vy1"><div class="defeat-icon svelte-1jz2vy1">ð</div> <h1 class="defeat-title svelte-1jz2vy1">Defeat</h1> <p class="defeat-message svelte-1jz2vy1" data-testid="defeat-message"><!></p> <div class="defeat-progress svelte-1jz2vy1"><span class="progress-label svelte-1jz2vy1">Progress:</span> <span class="progress-text svelte-1jz2vy1" data-testid="defeat-progress"> </span></div> <div class="defeat-objective svelte-1jz2vy1"><span class="objective-label svelte-1jz2vy1">Objective:</span> <span class="objective-text svelte-1jz2vy1"> </span></div> <button class="new-game-button svelte-1jz2vy1" data-testid="new-game-button">New Game</button></div></div>');function xf(e,t){Ie(t,!0);let n=L(pe({monstersDefeated:0,monstersToDefeat:2,objective:"Defeat 2 monsters"})),r=L(null);Tt(()=>{const A=G.subscribe(()=>{const C=G.getState();b(n,C.game.scenario,!0),b(r,C.game.defeatReason,!0)}),M=G.getState();return b(n,M.game.scenario,!0),b(r,M.game.defeatReason,!0),A});function a(){G.dispatch(aa())}var s=bf(),o=u(s),c=v(u(o),4),l=u(c);{var d=A=>{var M=Oa();U(()=>w(M,i(r))),I(A,M)},f=A=>{var M=Oa("Your party has been eliminated before completing the objective.");I(A,M)};F(l,A=>{i(r)?A(d):A(f,!1)})}var g=v(c,2),h=v(u(g),2),_=u(h),x=v(g,2),z=v(u(x),2),k=u(z),H=v(x,2);H.__click=a,U(()=>{w(_,`${i(n).monstersDefeated??""} / ${i(n).monstersToDefeat??""} monsters defeated`),w(k,i(n).objective)}),I(e,s),Ce()}Xe(["click"]);var Tf=D('<main class="svelte-1n46o8q"><!></main>');function Sf(e,t){Ie(t,!0);let n=L("character-select");Tt(()=>{const c=G.subscribe(()=>{const d=G.getState();b(n,d.game.currentScreen,!0)}),l=G.getState();return b(n,l.game.currentScreen,!0),c});var r=Tf(),a=u(r);{var s=c=>{Tu(c,{})},o=c=>{var l=He(),d=Se(l);{var f=h=>{yf(h,{})},g=h=>{var _=He(),x=Se(_);{var z=H=>{kf(H,{})},k=H=>{var A=He(),M=Se(A);{var C=N=>{xf(N,{})};F(M,N=>{i(n)==="defeat"&&N(C)},!0)}I(H,A)};F(x,H=>{i(n)==="victory"?H(z):H(k,!1)},!0)}I(h,_)};F(d,h=>{i(n)==="game-board"?h(f):h(g,!1)},!0)}I(c,l)};F(a,c=>{i(n)==="character-select"?c(s):c(o,!1)})}I(e,r),Ce()}bl(Sf,{target:document.getElementById("app")});
