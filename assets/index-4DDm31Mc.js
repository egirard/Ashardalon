(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}})();const bo="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(bo);const os=1,ls=2,cs=4,To=8,So=16,Io=1,Co=2,Re=Symbol(),Eo="http://www.w3.org/1999/xhtml",_r=!1;var ds=Array.isArray,Po=Array.prototype.indexOf,jr=Array.from,Mo=Object.defineProperty,mn=Object.getOwnPropertyDescriptor,Ho=Object.getOwnPropertyDescriptors,Ao=Object.prototype,Do=Array.prototype,us=Object.getPrototypeOf,Ha=Object.isExtensible;function Ro(e){for(var t=0;t<e.length;t++)e[t]()}function fs(){var e,t,n=new Promise((r,a)=>{e=r,t=a});return{promise:n,resolve:e,reject:t}}const He=2,Or=4,Nr=8,zo=1<<24,Ht=16,At=32,Gt=64,Jn=128,mt=512,je=1024,Ke=2048,Dt=4096,et=8192,Nt=16384,Br=32768,nn=65536,Aa=1<<17,vs=1<<18,cn=1<<19,jo=1<<20,Yt=32768,yr=1<<21,Lr=1<<22,Bt=1<<23,zn=Symbol("$state"),Oo=Symbol(""),$t=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function No(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Bo(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Lo(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Fo(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Uo(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function qo(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Wo(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Yo(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Vo(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}function Xo(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function hs(e){return e===this.v}function Go(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function ps(e){return!Go(e,this.v)}let Ko=!1,ot=null;function rn(e){ot=e}function Te(e,t=!1,n){ot={p:ot,i:!1,c:null,e:null,s:e,x:null,l:null}}function Se(e){var t=ot,n=t.e;if(n!==null){t.e=null;for(var r of n)Ps(r)}return t.i=!0,ot=t.p,{}}function ms(){return!0}let en=[];function Qo(){var e=en;en=[],Ro(e)}function dn(e){if(en.length===0){var t=en;queueMicrotask(()=>{t===en&&Qo()})}en.push(e)}function gs(e){var t=oe;if(t===null)return ne.f|=Bt,e;if((t.f&Br)===0){if((t.f&Jn)===0)throw e;t.b.error(e)}else an(e,t)}function an(e,t){for(;t!==null;){if((t.f&Jn)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e}const Hn=new Set;let he=null,st=null,gt=[],Fr=null,wr=!1;class _t{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#r=0;#n=0;#l=null;#s=[];#a=[];skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(t){gt=[],this.apply();var n={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const r of t)this.#i(r,n);this.is_fork||this.#d(),this.is_deferred()?(this.#o(n.effects),this.#o(n.render_effects),this.#o(n.block_effects)):(he=null,Da(n.render_effects),Da(n.effects),this.#l?.resolve()),st=null}#i(t,n){t.f^=je;for(var r=t.first;r!==null;){var a=r.f,s=(a&(At|Gt))!==0,o=s&&(a&je)!==0,c=o||(a&et)!==0||this.skipped_effects.has(r);if((r.f&Jn)!==0&&r.b?.is_pending()&&(n={parent:n,effect:r,effects:[],render_effects:[],block_effects:[]}),!c&&r.fn!==null){s?r.f^=je:(a&Or)!==0?n.effects.push(r):In(r)&&((r.f&Ht)!==0&&n.block_effects.push(r),wn(r));var l=r.first;if(l!==null){r=l;continue}}var d=r.parent;for(r=r.next;r===null&&d!==null;)d===n.effect&&(this.#o(n.effects),this.#o(n.render_effects),this.#o(n.block_effects),n=n.parent),r=d.next,d=d.parent}}#o(t){for(const n of t)((n.f&Ke)!==0?this.#s:this.#a).push(n),this.#c(n.deps),Oe(n,je)}#c(t){if(t!==null)for(const n of t)(n.f&He)===0||(n.f&Yt)===0||(n.f^=Yt,this.#c(n.deps))}capture(t,n){this.previous.has(t)||this.previous.set(t,n),(t.f&Bt)===0&&(this.current.set(t,t.v),st?.set(t,t.v))}activate(){he=this,this.apply()}deactivate(){he===this&&(he=null,st=null)}flush(){if(this.activate(),gt.length>0){if(Zo(),he!==null&&he!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#t)t(this);this.#t.clear()}#d(){if(this.#n===0){for(const t of this.#e)t();this.#e.clear()}this.#r===0&&this.#u()}#u(){if(Hn.size>1){this.previous.clear();var t=st,n=!0,r={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const s of Hn){if(s===this){n=!1;continue}const o=[];for(const[l,d]of this.current){if(s.current.has(l))if(n&&d!==s.current.get(l))s.current.set(l,d);else continue;o.push(l)}if(o.length===0)continue;const c=[...s.current.keys()].filter(l=>!this.current.has(l));if(c.length>0){var a=gt;gt=[];const l=new Set,d=new Map;for(const f of o)_s(f,c,l,d);if(gt.length>0){he=s,s.apply();for(const f of gt)s.#i(f,r);s.deactivate()}gt=a}}he=null,st=t}this.committed=!0,Hn.delete(this)}increment(t){this.#r+=1,t&&(this.#n+=1)}decrement(t){this.#r-=1,t&&(this.#n-=1),this.revive()}revive(){for(const t of this.#s)Oe(t,Ke),Vt(t);for(const t of this.#a)Oe(t,Dt),Vt(t);this.#s=[],this.#a=[],this.flush()}oncommit(t){this.#e.add(t)}ondiscard(t){this.#t.add(t)}settled(){return(this.#l??=fs()).promise}static ensure(){if(he===null){const t=he=new _t;Hn.add(he),_t.enqueue(()=>{he===t&&t.flush()})}return he}static enqueue(t){dn(t)}apply(){}}function Zo(){var e=Ft;wr=!0;var t=null;try{var n=0;for(Fn(!0);gt.length>0;){var r=_t.ensure();if(n++>1e3){var a,s;Jo()}r.process(gt),Lt.clear()}}finally{wr=!1,Fn(e),Fr=null}}function Jo(){try{Uo()}catch(e){an(e,Fr)}}let Tt=null;function Da(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if((r.f&(Nt|et))===0&&In(r)&&(Tt=new Set,wn(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?Ds(r):r.fn=null),Tt?.size>0)){Lt.clear();for(const a of Tt){if((a.f&(Nt|et))!==0)continue;const s=[a];let o=a.parent;for(;o!==null;)Tt.has(o)&&(Tt.delete(o),s.push(o)),o=o.parent;for(let c=s.length-1;c>=0;c--){const l=s[c];(l.f&(Nt|et))===0&&wn(l)}}Tt.clear()}}Tt=null}}function _s(e,t,n,r){if(!n.has(e)&&(n.add(e),e.reactions!==null))for(const a of e.reactions){const s=a.f;(s&He)!==0?_s(a,t,n,r):(s&(Lr|Ht))!==0&&(s&Ke)===0&&ys(a,t,r)&&(Oe(a,Ke),Vt(a))}}function ys(e,t,n){const r=n.get(e);if(r!==void 0)return r;if(e.deps!==null)for(const a of e.deps){if(t.includes(a))return!0;if((a.f&He)!==0&&ys(a,t,n))return n.set(a,!0),!0}return n.set(e,!1),!1}function Vt(e){for(var t=Fr=e;t.parent!==null;){t=t.parent;var n=t.f;if(wr&&t===oe&&(n&Ht)!==0&&(n&vs)===0)return;if((n&(Gt|At))!==0){if((n&je)===0)return;t.f^=je}}gt.push(t)}function $o(e){let t=0,n=Xt(0),r;return()=>{_n()&&(i(n),Ms(()=>(t===0&&(r=Ws(()=>e(()=>gn(n)))),t+=1,()=>{dn(()=>{t-=1,t===0&&(r?.(),r=void 0,gn(n))})})))}}var el=nn|cn|Jn;function tl(e,t,n){new nl(e,t,n)}class nl{parent;#e=!1;#t;#r=null;#n;#l;#s;#a=null;#i=null;#o=null;#c=null;#d=null;#u=0;#f=0;#h=!1;#v=null;#y=$o(()=>(this.#v=Xt(this.#u),()=>{this.#v=null}));constructor(t,n,r){this.#t=t,this.#n=n,this.#l=r,this.parent=oe.b,this.#e=!!this.#n.pending,this.#s=Yr(()=>{oe.b=this;{var a=this.#g();try{this.#a=at(()=>r(a))}catch(s){this.error(s)}this.#f>0?this.#m():this.#e=!1}return()=>{this.#d?.remove()}},el)}#w(){try{this.#a=at(()=>this.#l(this.#t))}catch(t){this.error(t)}this.#e=!1}#k(){const t=this.#n.pending;t&&(this.#i=at(()=>t(this.#t)),_t.enqueue(()=>{var n=this.#g();this.#a=this.#p(()=>(_t.ensure(),at(()=>this.#l(n)))),this.#f>0?this.#m():(tn(this.#i,()=>{this.#i=null}),this.#e=!1)}))}#g(){var t=this.#t;return this.#e&&(this.#d=Pt(),this.#t.before(this.#d),t=this.#d),t}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#p(t){var n=oe,r=ne,a=ot;wt(this.#s),Xe(this.#s),rn(this.#s.ctx);try{return t()}catch(s){return gs(s),null}finally{wt(n),Xe(r),rn(a)}}#m(){const t=this.#n.pending;this.#a!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#d),js(this.#a,this.#c)),this.#i===null&&(this.#i=at(()=>t(this.#t)))}#_(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#_(t);return}this.#f+=t,this.#f===0&&(this.#e=!1,this.#i&&tn(this.#i,()=>{this.#i=null}),this.#c&&(this.#t.before(this.#c),this.#c=null))}update_pending_count(t){this.#_(t),this.#u+=t,this.#v&&sn(this.#v,this.#u)}get_effect_pending(){return this.#y(),i(this.#v)}error(t){var n=this.#n.onerror;let r=this.#n.failed;if(this.#h||!n&&!r)throw t;this.#a&&(Ge(this.#a),this.#a=null),this.#i&&(Ge(this.#i),this.#i=null),this.#o&&(Ge(this.#o),this.#o=null);var a=!1,s=!1;const o=()=>{if(a){Xo();return}a=!0,s&&Vo(),_t.ensure(),this.#u=0,this.#o!==null&&tn(this.#o,()=>{this.#o=null}),this.#e=this.has_pending_snippet(),this.#a=this.#p(()=>(this.#h=!1,at(()=>this.#l(this.#t)))),this.#f>0?this.#m():this.#e=!1};var c=ne;try{Xe(null),s=!0,n?.(t,o),s=!1}catch(l){an(l,this.#s&&this.#s.parent)}finally{Xe(c)}r&&dn(()=>{this.#o=this.#p(()=>{_t.ensure(),this.#h=!0;try{return at(()=>{r(this.#t,()=>t,()=>o)})}catch(l){return an(l,this.#s.parent),null}finally{this.#h=!1}})})}}function rl(e,t,n){for(var r=[],a=t.length,s=0;s<a;s++)Vr(t[s].e,r,!0);Rs(r,()=>{var o=r.length===0&&n!==null;if(o){var c=n,l=c.parentNode;hl(l),l.append(c),e.items.clear(),ht(e,t[0].prev,t[a-1].next)}for(var d=0;d<a;d++){var f=t[d];o||(e.items.delete(f.k),ht(e,f.prev,f.next)),Ge(f.e,!o)}e.first===t[0]&&(e.first=t[0].prev)})}function Ue(e,t,n,r,a,s=null){var o=e,c=new Map,l=null,d=(t&cs)!==0,f=(t&os)!==0,g=(t&ls)!==0;if(d){var p=e;o=p.appendChild(Pt())}var _=null,b=cl(()=>{var I=n();return ds(I)?I:I==null?[]:jr(I)}),O,k=!0;function M(){al(C,O,o,t,r),_!==null&&(O.length===0?(_.fragment?(o.before(_.fragment),_.fragment=null):Xr(_.effect),H.first=_.effect):tn(_.effect,()=>{_=null}))}var H=Yr(()=>{O=i(b);for(var I=O.length,z=new Set,j=he,U=null,F=Cs(),W=0;W<I;W+=1){var $=O[W],A=r($,W),te=k?null:c.get(A);te?(f&&sn(te.v,$),g?sn(te.i,W):te.i=W,F&&j.skipped_effects.delete(te.e)):(te=sl(k?o:null,U,$,A,W,a,t,n),k&&(te.o=!0,U===null?l=te:U.next=te,U=te),c.set(A,te)),z.add(A)}if(I===0&&s&&!_)if(k)_={fragment:null,effect:at(()=>s(o))};else{var ue=document.createDocumentFragment(),fe=Pt();ue.append(fe),_={fragment:ue,effect:at(()=>s(fe))}}if(!k)if(F){for(const[Ie,Ae]of c)z.has(Ie)||j.skipped_effects.add(Ae.e);j.oncommit(M),j.ondiscard(()=>{})}else M();i(b)}),C={effect:H,items:c,first:l};k=!1}function al(e,t,n,r,a){var s=(r&To)!==0,o=t.length,c=e.items,l=e.first,d,f=null,g,p=[],_=[],b,O,k,M;if(s)for(M=0;M<o;M+=1)b=t[M],O=a(b,M),k=c.get(O),k.o&&(k.a?.measure(),(g??=new Set).add(k));for(M=0;M<o;M+=1){if(b=t[M],O=a(b,M),k=c.get(O),e.first??=k,!k.o){k.o=!0;var H=f?f.next:l;ht(e,f,k),ht(e,k,H),hr(k,H,n),f=k,p=[],_=[],l=f.next;continue}if((k.e.f&et)!==0&&(Xr(k.e),s&&(k.a?.unfix(),(g??=new Set).delete(k))),k!==l){if(d!==void 0&&d.has(k)){if(p.length<_.length){var C=_[0],I;f=C.prev;var z=p[0],j=p[p.length-1];for(I=0;I<p.length;I+=1)hr(p[I],C,n);for(I=0;I<_.length;I+=1)d.delete(_[I]);ht(e,z.prev,j.next),ht(e,f,z),ht(e,j,C),l=C,f=j,M-=1,p=[],_=[]}else d.delete(k),hr(k,l,n),ht(e,k.prev,k.next),ht(e,k,f===null?e.first:f.next),ht(e,f,k),f=k;continue}for(p=[],_=[];l!==null&&l.k!==O;)(l.e.f&et)===0&&(d??=new Set).add(l),_.push(l),l=l.next;if(l===null)continue;k=l}p.push(k),f=k,l=k.next}let U=c.size>o;if(l!==null||d!==void 0){for(var F=d===void 0?[]:jr(d);l!==null;)(l.e.f&et)===0&&F.push(l),l=l.next;var W=F.length;if(U=c.size-W>o,W>0){var $=(r&cs)!==0&&o===0?n:null;if(s){for(M=0;M<W;M+=1)F[M].a?.measure();for(M=0;M<W;M+=1)F[M].a?.fix()}rl(e,F,$)}}if(U)for(const A of c.values())A.o||(ht(e,f,A),f=A);e.effect.last=f&&f.e,s&&dn(()=>{if(g!==void 0)for(k of g)k.a?.apply()})}function sl(e,t,n,r,a,s,o,c){var l=(o&os)!==0,d=(o&So)===0,f=l?d?ul(n,!1,!1):Xt(n):n,g=(o&ls)===0?a:Xt(a),p={i:g,v:f,k:r,a:null,e:null,o:!1,prev:t,next:null};try{if(e===null){var _=document.createDocumentFragment();_.append(e=Pt())}return p.e=at(()=>s(e,f,g,c)),t!==null&&(t.next=p),p}finally{}}function hr(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,a=t?t.e.nodes_start:n,s=e.e.nodes_start;s!==null&&s!==r;){var o=Sn(s);a.before(s),s=o}}function ht(e,t,n){t===null?(e.first=n,e.effect.first=n&&n.e):(t.e.next&&(t.e.next.prev=null),t.next=n,t.e.next=n&&n.e),n!==null&&(n.e.prev&&(n.e.prev.next=null),n.prev=t,n.e.prev=t&&t.e)}function il(e,t,n,r){const a=Ur;if(n.length===0&&e.length===0){r(t.map(a));return}var s=he,o=oe,c=ol();function l(){Promise.all(n.map(d=>ll(d))).then(d=>{c();try{r([...t.map(a),...d])}catch(f){(o.f&Nt)===0&&an(f,o)}s?.deactivate(),Bn()}).catch(d=>{an(d,o)})}e.length>0?Promise.all(e).then(()=>{c();try{return l()}finally{s?.deactivate(),Bn()}}):l()}function ol(){var e=oe,t=ne,n=ot,r=he;return function(s=!0){wt(e),Xe(t),rn(n),s&&r?.activate()}}function Bn(){wt(null),Xe(null),rn(null)}function Ur(e){var t=He|Ke,n=ne!==null&&(ne.f&He)!==0?ne:null;return oe!==null&&(oe.f|=cn),{ctx:ot,deps:null,effects:null,equals:hs,f:t,fn:e,reactions:null,rv:0,v:Re,wv:0,parent:n??oe,ac:null}}function ll(e,t){let n=oe;n===null&&No();var r=n.b,a=void 0,s=Xt(Re),o=!ne,c=new Map;return yl(()=>{var l=fs();a=l.promise;try{Promise.resolve(e()).then(l.resolve,l.reject).then(()=>{d===he&&d.committed&&d.deactivate(),Bn()})}catch(p){l.reject(p),Bn()}var d=he;if(o){var f=!r.is_pending();r.update_pending_count(1),d.increment(f),c.get(d)?.reject($t),c.delete(d),c.set(d,l)}const g=(p,_=void 0)=>{if(d.activate(),_)_!==$t&&(s.f|=Bt,sn(s,_));else{(s.f&Bt)!==0&&(s.f^=Bt),sn(s,p);for(const[b,O]of c){if(c.delete(b),b===d)break;O.reject($t)}}o&&(r.update_pending_count(-1),d.decrement(f))};l.promise.then(g,p=>g(null,p||"unknown"))}),Es(()=>{for(const l of c.values())l.reject($t)}),new Promise(l=>{function d(f){function g(){f===a?l(s):d(a)}f.then(g,g)}d(a)})}function K(e){const t=Ur(e);return Os(t),t}function cl(e){const t=Ur(e);return t.equals=ps,t}function ws(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)Ge(t[n])}}function dl(e){for(var t=e.parent;t!==null;){if((t.f&He)===0)return(t.f&Nt)===0?t:null;t=t.parent}return null}function qr(e){var t,n=oe;wt(dl(e));try{e.f&=~Yt,ws(e),t=Fs(e)}finally{wt(n)}return t}function ks(e){var t=qr(e);if(e.equals(t)||(he?.is_fork||(e.v=t),e.wv=Bs()),!un)if(st!==null)(_n()||he?.is_fork)&&st.set(e,t);else{var n=(e.f&mt)===0?Dt:je;Oe(e,n)}}let kr=new Set;const Lt=new Map;let xs=!1;function Xt(e,t){var n={f:0,v:e,reactions:null,equals:hs,rv:0,wv:0};return n}function Y(e,t){const n=Xt(e);return Os(n),n}function ul(e,t=!1,n=!0){const r=Xt(e);return t||(r.equals=ps),r}function x(e,t,n=!1){ne!==null&&(!yt||(ne.f&Aa)!==0)&&ms()&&(ne.f&(He|Ht|Lr|Aa))!==0&&!Ct?.includes(e)&&Yo();let r=n?pe(t):t;return sn(e,r)}function sn(e,t){if(!e.equals(t)){var n=e.v;un?Lt.set(e,t):Lt.set(e,n),e.v=t;var r=_t.ensure();r.capture(e,n),(e.f&He)!==0&&((e.f&Ke)!==0&&qr(e),Oe(e,(e.f&mt)!==0?je:Dt)),e.wv=Bs(),bs(e,Ke),oe!==null&&(oe.f&je)!==0&&(oe.f&(At|Gt))===0&&(rt===null?xl([e]):rt.push(e)),!r.is_fork&&kr.size>0&&!xs&&fl()}return t}function fl(){xs=!1;var e=Ft;Fn(!0);const t=Array.from(kr);try{for(const n of t)(n.f&je)!==0&&Oe(n,Dt),In(n)&&wn(n)}finally{Fn(e)}kr.clear()}function gn(e){x(e,e.v+1)}function bs(e,t){var n=e.reactions;if(n!==null)for(var r=n.length,a=0;a<r;a++){var s=n[a],o=s.f,c=(o&Ke)===0;if(c&&Oe(s,t),(o&He)!==0){var l=s;st?.delete(l),(o&Yt)===0&&(o&mt&&(s.f|=Yt),bs(l,Dt))}else c&&((o&Ht)!==0&&Tt!==null&&Tt.add(s),Vt(s))}}function pe(e){if(typeof e!="object"||e===null||zn in e)return e;const t=us(e);if(t!==Ao&&t!==Do)return e;var n=new Map,r=ds(e),a=Y(0),s=Wt,o=c=>{if(Wt===s)return c();var l=ne,d=Wt;Xe(null),ja(s);var f=c();return Xe(l),ja(d),f};return r&&n.set("length",Y(e.length)),new Proxy(e,{defineProperty(c,l,d){(!("value"in d)||d.configurable===!1||d.enumerable===!1||d.writable===!1)&&qo();var f=n.get(l);return f===void 0?f=o(()=>{var g=Y(d.value);return n.set(l,g),g}):x(f,d.value,!0),!0},deleteProperty(c,l){var d=n.get(l);if(d===void 0){if(l in c){const f=o(()=>Y(Re));n.set(l,f),gn(a)}}else x(d,Re),gn(a);return!0},get(c,l,d){if(l===zn)return e;var f=n.get(l),g=l in c;if(f===void 0&&(!g||mn(c,l)?.writable)&&(f=o(()=>{var _=pe(g?c[l]:Re),b=Y(_);return b}),n.set(l,f)),f!==void 0){var p=i(f);return p===Re?void 0:p}return Reflect.get(c,l,d)},getOwnPropertyDescriptor(c,l){var d=Reflect.getOwnPropertyDescriptor(c,l);if(d&&"value"in d){var f=n.get(l);f&&(d.value=i(f))}else if(d===void 0){var g=n.get(l),p=g?.v;if(g!==void 0&&p!==Re)return{enumerable:!0,configurable:!0,value:p,writable:!0}}return d},has(c,l){if(l===zn)return!0;var d=n.get(l),f=d!==void 0&&d.v!==Re||Reflect.has(c,l);if(d!==void 0||oe!==null&&(!f||mn(c,l)?.writable)){d===void 0&&(d=o(()=>{var p=f?pe(c[l]):Re,_=Y(p);return _}),n.set(l,d));var g=i(d);if(g===Re)return!1}return f},set(c,l,d,f){var g=n.get(l),p=l in c;if(r&&l==="length")for(var _=d;_<g.v;_+=1){var b=n.get(_+"");b!==void 0?x(b,Re):_ in c&&(b=o(()=>Y(Re)),n.set(_+"",b))}if(g===void 0)(!p||mn(c,l)?.writable)&&(g=o(()=>Y(void 0)),x(g,pe(d)),n.set(l,g));else{p=g.v!==Re;var O=o(()=>pe(d));x(g,O)}var k=Reflect.getOwnPropertyDescriptor(c,l);if(k?.set&&k.set.call(f,d),!p){if(r&&typeof l=="string"){var M=n.get("length"),H=Number(l);Number.isInteger(H)&&H>=M.v&&x(M,H+1)}gn(a)}return!0},ownKeys(c){i(a);var l=Reflect.ownKeys(c).filter(g=>{var p=n.get(g);return p===void 0||p.v!==Re});for(var[d,f]of n)f.v!==Re&&!(d in c)&&l.push(d);return l},setPrototypeOf(){Wo()}})}var Ra,Ts,Ss,Is;function vl(){if(Ra===void 0){Ra=window,Ts=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;Ss=mn(t,"firstChild").get,Is=mn(t,"nextSibling").get,Ha(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Ha(n)&&(n.__t=void 0)}}function Pt(e=""){return document.createTextNode(e)}function Ln(e){return Ss.call(e)}function Sn(e){return Is.call(e)}function u(e,t){return Ln(e)}function be(e,t=!1){{var n=Ln(e);return n instanceof Comment&&n.data===""?Sn(n):n}}function v(e,t=1,n=!1){let r=e;for(;t--;)r=Sn(r);return r}function hl(e){e.textContent=""}function Cs(){return!1}function Wr(e){var t=ne,n=oe;Xe(null),wt(null);try{return e()}finally{Xe(t),wt(n)}}function pl(e){oe===null&&(ne===null&&Fo(),Lo()),un&&Bo()}function ml(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function Rt(e,t,n){var r=oe;r!==null&&(r.f&et)!==0&&(e|=et);var a={ctx:ot,deps:null,nodes_start:null,nodes_end:null,f:e|Ke|mt,first:null,fn:t,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{wn(a),a.f|=Br}catch(c){throw Ge(a),c}else t!==null&&Vt(a);var s=a;if(n&&s.deps===null&&s.teardown===null&&s.nodes_start===null&&s.first===s.last&&(s.f&cn)===0&&(s=s.first,(e&Ht)!==0&&(e&nn)!==0&&s!==null&&(s.f|=nn)),s!==null&&(s.parent=r,r!==null&&ml(s,r),ne!==null&&(ne.f&He)!==0&&(e&Gt)===0)){var o=ne;(o.effects??=[]).push(s)}return a}function _n(){return ne!==null&&!yt}function Es(e){const t=Rt(Nr,null,!1);return Oe(t,je),t.teardown=e,t}function It(e){pl();var t=oe.f,n=!ne&&(t&At)!==0&&(t&Br)===0;if(n){var r=ot;(r.e??=[]).push(e)}else return Ps(e)}function Ps(e){return Rt(Or|jo,e,!1)}function gl(e){_t.ensure();const t=Rt(Gt|cn,e,!0);return(n={})=>new Promise(r=>{n.outro?tn(t,()=>{Ge(t),r(void 0)}):(Ge(t),r(void 0))})}function _l(e){return Rt(Or,e,!1)}function yl(e){return Rt(Lr|cn,e,!0)}function Ms(e,t=0){return Rt(Nr|t,e,!0)}function X(e,t=[],n=[],r=[]){il(r,t,n,a=>{Rt(Nr,()=>e(...a.map(i)),!0)})}function Yr(e,t=0){var n=Rt(Ht|t,e,!0);return n}function at(e){return Rt(At|cn,e,!0)}function Hs(e){var t=e.teardown;if(t!==null){const n=un,r=ne;za(!0),Xe(null);try{t.call(null)}finally{za(n),Xe(r)}}}function As(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const a=n.ac;a!==null&&Wr(()=>{a.abort($t)});var r=n.next;(n.f&Gt)!==0?n.parent=null:Ge(n,t),n=r}}function wl(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&At)===0&&Ge(t),t=n}}function Ge(e,t=!0){var n=!1;(t||(e.f&vs)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(kl(e.nodes_start,e.nodes_end),n=!0),As(e,t&&!n),Un(e,0),Oe(e,Nt);var r=e.transitions;if(r!==null)for(const s of r)s.stop();Hs(e);var a=e.parent;a!==null&&a.first!==null&&Ds(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function kl(e,t){for(;e!==null;){var n=e===t?null:Sn(e);e.remove(),e=n}}function Ds(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function tn(e,t,n=!0){var r=[];Vr(e,r,!0),Rs(r,()=>{n&&Ge(e),t&&t()})}function Rs(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var a of e)a.out(r)}else t()}function Vr(e,t,n){if((e.f&et)===0){if(e.f^=et,e.transitions!==null)for(const o of e.transitions)(o.is_global||n)&&t.push(o);for(var r=e.first;r!==null;){var a=r.next,s=(r.f&nn)!==0||(r.f&At)!==0&&(e.f&Ht)!==0;Vr(r,t,s?n:!1),r=a}}}function Xr(e){zs(e,!0)}function zs(e,t){if((e.f&et)!==0){e.f^=et,(e.f&je)===0&&(Oe(e,Ke),Vt(e));for(var n=e.first;n!==null;){var r=n.next,a=(n.f&nn)!==0||(n.f&At)!==0;zs(n,a?t:!1),n=r}if(e.transitions!==null)for(const s of e.transitions)(s.is_global||t)&&s.in()}}function js(e,t){for(var n=e.nodes_start,r=e.nodes_end;n!==null;){var a=n===r?null:Sn(n);t.append(n),n=a}}let Ft=!1;function Fn(e){Ft=e}let un=!1;function za(e){un=e}let ne=null,yt=!1;function Xe(e){ne=e}let oe=null;function wt(e){oe=e}let Ct=null;function Os(e){ne!==null&&(Ct===null?Ct=[e]:Ct.push(e))}let Fe=null,Je=0,rt=null;function xl(e){rt=e}let Ns=1,yn=0,Wt=yn;function ja(e){Wt=e}function Bs(){return++Ns}function In(e){var t=e.f;if((t&Ke)!==0)return!0;if(t&He&&(e.f&=~Yt),(t&Dt)!==0){var n=e.deps;if(n!==null)for(var r=n.length,a=0;a<r;a++){var s=n[a];if(In(s)&&ks(s),s.wv>e.wv)return!0}(t&mt)!==0&&st===null&&Oe(e,je)}return!1}function Ls(e,t,n=!0){var r=e.reactions;if(r!==null&&!Ct?.includes(e))for(var a=0;a<r.length;a++){var s=r[a];(s.f&He)!==0?Ls(s,t,!1):t===s&&(n?Oe(s,Ke):(s.f&je)!==0&&Oe(s,Dt),Vt(s))}}function Fs(e){var t=Fe,n=Je,r=rt,a=ne,s=Ct,o=ot,c=yt,l=Wt,d=e.f;Fe=null,Je=0,rt=null,ne=(d&(At|Gt))===0?e:null,Ct=null,rn(e.ctx),yt=!1,Wt=++yn,e.ac!==null&&(Wr(()=>{e.ac.abort($t)}),e.ac=null);try{e.f|=yr;var f=e.fn,g=f(),p=e.deps;if(Fe!==null){var _;if(Un(e,Je),p!==null&&Je>0)for(p.length=Je+Fe.length,_=0;_<Fe.length;_++)p[Je+_]=Fe[_];else e.deps=p=Fe;if(Ft&&_n()&&(e.f&mt)!==0)for(_=Je;_<p.length;_++)(p[_].reactions??=[]).push(e)}else p!==null&&Je<p.length&&(Un(e,Je),p.length=Je);if(ms()&&rt!==null&&!yt&&p!==null&&(e.f&(He|Dt|Ke))===0)for(_=0;_<rt.length;_++)Ls(rt[_],e);return a!==null&&a!==e&&(yn++,rt!==null&&(r===null?r=rt:r.push(...rt))),(e.f&Bt)!==0&&(e.f^=Bt),g}catch(b){return gs(b)}finally{e.f^=yr,Fe=t,Je=n,rt=r,ne=a,Ct=s,rn(o),yt=c,Wt=l}}function bl(e,t){let n=t.reactions;if(n!==null){var r=Po.call(n,e);if(r!==-1){var a=n.length-1;a===0?n=t.reactions=null:(n[r]=n[a],n.pop())}}n===null&&(t.f&He)!==0&&(Fe===null||!Fe.includes(t))&&(Oe(t,Dt),(t.f&mt)!==0&&(t.f^=mt,t.f&=~Yt),ws(t),Un(t,0))}function Un(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)bl(e,n[r])}function wn(e){var t=e.f;if((t&Nt)===0){Oe(e,je);var n=oe,r=Ft;oe=e,Ft=!0;try{(t&(Ht|zo))!==0?wl(e):As(e),Hs(e);var a=Fs(e);e.teardown=typeof a=="function"?a:null,e.wv=Ns;var s;_r&&Ko&&(e.f&Ke)!==0&&e.deps}finally{Ft=r,oe=n}}}function i(e){var t=e.f,n=(t&He)!==0;if(ne!==null&&!yt){var r=oe!==null&&(oe.f&Nt)!==0;if(!r&&!Ct?.includes(e)){var a=ne.deps;if((ne.f&yr)!==0)e.rv<yn&&(e.rv=yn,Fe===null&&a!==null&&a[Je]===e?Je++:Fe===null?Fe=[e]:Fe.includes(e)||Fe.push(e));else{(ne.deps??=[]).push(e);var s=e.reactions;s===null?e.reactions=[ne]:s.includes(ne)||s.push(ne)}}}if(un){if(Lt.has(e))return Lt.get(e);if(n){var o=e,c=o.v;return((o.f&je)===0&&o.reactions!==null||qs(o))&&(c=qr(o)),Lt.set(o,c),c}}else n&&(!st?.has(e)||he?.is_fork&&!_n())&&(o=e,In(o)&&ks(o),Ft&&_n()&&(o.f&mt)===0&&Us(o));if(st?.has(e))return st.get(e);if((e.f&Bt)!==0)throw e.v;return e.v}function Us(e){if(e.deps!==null){e.f^=mt;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&He)!==0&&(t.f&mt)===0&&Us(t)}}function qs(e){if(e.v===Re)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(Lt.has(t)||(t.f&He)!==0&&qs(t))return!0;return!1}function Ws(e){var t=yt;try{return yt=!0,e()}finally{yt=t}}const Tl=-7169;function Oe(e,t){e.f=e.f&Tl|t}const Ys=new Set,xr=new Set;function Sl(e,t,n,r={}){function a(s){if(r.capture||vn.call(t,s),!s.cancelBubble)return Wr(()=>n?.call(this,s))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?dn(()=>{t.addEventListener(e,a,r)}):t.addEventListener(e,a,r),a}function Il(e,t,n,r,a){var s={capture:r,passive:a},o=Sl(e,t,n,s);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&Es(()=>{t.removeEventListener(e,o,s)})}function We(e){for(var t=0;t<e.length;t++)Ys.add(e[t]);for(var n of xr)n(e)}let Oa=null;function vn(e){var t=this,n=t.ownerDocument,r=e.type,a=e.composedPath?.()||[],s=a[0]||e.target;Oa=e;var o=0,c=Oa===e&&e.__root;if(c){var l=a.indexOf(c);if(l!==-1&&(t===document||t===window)){e.__root=t;return}var d=a.indexOf(t);if(d===-1)return;l<=d&&(o=l)}if(s=a[o]||e.target,s!==t){Mo(e,"currentTarget",{configurable:!0,get(){return s||n}});var f=ne,g=oe;Xe(null),wt(null);try{for(var p,_=[];s!==null;){var b=s.assignedSlot||s.parentNode||s.host||null;try{var O=s["__"+r];O!=null&&(!s.disabled||e.target===s)&&O.call(s,e)}catch(k){p?_.push(k):p=k}if(e.cancelBubble||b===t||b===null)break;s=b}if(p){for(let k of _)queueMicrotask(()=>{throw k});throw p}}finally{e.__root=t,delete e.currentTarget,Xe(f),wt(g)}}}function Cl(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function qn(e,t){var n=oe;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function R(e,t){var n=(t&Io)!==0,r=(t&Co)!==0,a,s=!e.startsWith("<!>");return()=>{a===void 0&&(a=Cl(s?e:"<!>"+e),n||(a=Ln(a)));var o=r||Ts?document.importNode(a,!0):a.cloneNode(!0);if(n){var c=Ln(o),l=o.lastChild;qn(c,l)}else qn(o,o);return o}}function Na(e=""){{var t=Pt(e+"");return qn(t,t),t}}function Ee(){var e=document.createDocumentFragment(),t=document.createComment(""),n=Pt();return e.append(t,n),qn(t,n),e}function S(e,t){e!==null&&e.before(t)}const El=["touchstart","touchmove"];function Pl(e){return El.includes(e)}function w(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function Ml(e,t){return Hl(e,t)}const Qt=new Map;function Hl(e,{target:t,anchor:n,props:r={},events:a,context:s,intro:o=!0}){vl();var c=new Set,l=g=>{for(var p=0;p<g.length;p++){var _=g[p];if(!c.has(_)){c.add(_);var b=Pl(_);t.addEventListener(_,vn,{passive:b});var O=Qt.get(_);O===void 0?(document.addEventListener(_,vn,{passive:b}),Qt.set(_,1)):Qt.set(_,O+1)}}};l(jr(Ys)),xr.add(l);var d=void 0,f=gl(()=>{var g=n??t.appendChild(Pt());return tl(g,{pending:()=>{}},p=>{if(s){Te({});var _=ot;_.c=s}a&&(r.$$events=a),d=e(p,r)||{},s&&Se()}),()=>{for(var p of c){t.removeEventListener(p,vn);var _=Qt.get(p);--_===0?(document.removeEventListener(p,vn),Qt.delete(p)):Qt.set(p,_)}xr.delete(l),g!==n&&g.parentNode?.removeChild(g)}});return Al.set(d,f),d}let Al=new WeakMap;class Dl{anchor;#e=new Map;#t=new Map;#r=new Map;#n=new Set;#l=!0;constructor(t,n=!0){this.anchor=t,this.#l=n}#s=()=>{var t=he;if(this.#e.has(t)){var n=this.#e.get(t),r=this.#t.get(n);if(r)Xr(r),this.#n.delete(n);else{var a=this.#r.get(n);a&&(this.#t.set(n,a.effect),this.#r.delete(n),a.fragment.lastChild.remove(),this.anchor.before(a.fragment),r=a.effect)}for(const[s,o]of this.#e){if(this.#e.delete(s),s===t)break;const c=this.#r.get(o);c&&(Ge(c.effect),this.#r.delete(o))}for(const[s,o]of this.#t){if(s===n||this.#n.has(s))continue;const c=()=>{if(Array.from(this.#e.values()).includes(s)){var d=document.createDocumentFragment();js(o,d),d.append(Pt()),this.#r.set(s,{effect:o,fragment:d})}else Ge(o);this.#n.delete(s),this.#t.delete(s)};this.#l||!r?(this.#n.add(s),tn(o,c,!1)):c()}}};#a=t=>{this.#e.delete(t);const n=Array.from(this.#e.values());for(const[r,a]of this.#r)n.includes(r)||(Ge(a.effect),this.#r.delete(r))};ensure(t,n){var r=he,a=Cs();if(n&&!this.#t.has(t)&&!this.#r.has(t))if(a){var s=document.createDocumentFragment(),o=Pt();s.append(o),this.#r.set(t,{effect:at(()=>n(o)),fragment:s})}else this.#t.set(t,at(()=>n(this.anchor)));if(this.#e.set(r,t),a){for(const[c,l]of this.#t)c===t?r.skipped_effects.delete(l):r.skipped_effects.add(l);for(const[c,l]of this.#r)c===t?r.skipped_effects.delete(l.effect):r.skipped_effects.add(l.effect);r.oncommit(this.#s),r.ondiscard(this.#a)}else this.#s()}}function q(e,t,n=!1){var r=new Dl(e),a=n?nn:0;function s(o,c){r.ensure(o,c)}Yr(()=>{var o=!1;t((c,l=!0)=>{o=!0,s(l,c)}),o||s(!1,null)},a)}const Ba=[...` 	
\r\fÂ \v\uFEFF`];function Rl(e,t,n){var r=e==null?"":""+e;if(t&&(r=r?r+" "+t:t),n){for(var a in n)if(n[a])r=r?r+" "+a:a;else if(r.length)for(var s=a.length,o=0;(o=r.indexOf(a,o))>=0;){var c=o+s;(o===0||Ba.includes(r[o-1]))&&(c===r.length||Ba.includes(r[c]))?r=(o===0?"":r.substring(0,o))+r.substring(c+1):o=c}}return r===""?null:r}function zl(e,t){return e==null?null:String(e)}function ze(e,t,n,r,a,s){var o=e.__className;if(o!==n||o===void 0){var c=Rl(n,r,s);c==null?e.removeAttribute("class"):e.className=c,e.__className=n}else if(s&&a!==s)for(var l in s){var d=!!s[l];(a==null||d!==!!a[l])&&e.classList.toggle(l,d)}return s}function Ot(e,t,n,r){var a=e.__style;if(a!==t){var s=zl(t);s==null?e.removeAttribute("style"):e.style.cssText=s,e.__style=t}return r}const jl=Symbol("is custom element"),Ol=Symbol("is html");function L(e,t,n,r){var a=Nl(e);a[t]!==(a[t]=n)&&(t==="loading"&&(e[Oo]=n),n==null?e.removeAttribute(t):typeof n!="string"&&Bl(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function Nl(e){return e.__attributes??={[jl]:e.nodeName.includes("-"),[Ol]:e.namespaceURI===Eo}}var La=new Map;function Bl(e){var t=e.getAttribute("is")||e.nodeName,n=La.get(t);if(n)return n;La.set(t,n=[]);for(var r,a=e,s=Element.prototype;s!==a;){r=Ho(a);for(var o in r)r[o].set&&n.push(o);a=us(a)}return n}function Fa(e,t){return e===t||e?.[zn]===t}function Ll(e={},t,n,r){return _l(()=>{var a,s;return Ms(()=>{a=s,s=[],Ws(()=>{e!==n(...s)&&(t(e,...s),a&&Fa(n(...a),e)&&t(null,...a))})}),()=>{dn(()=>{s&&Fa(n(...s),e)&&t(null,...s)})}}),e}function Fl(e,t,n,r){var a=r,s=!0,o=()=>(s&&(s=!1,a=r),a),c;c=e[t],c===void 0&&r!==void 0&&(c=o());var l;return l=()=>{var d=e[t];return d===void 0?o():(s=!0,d)},l}function Pe(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Ul=typeof Symbol=="function"&&Symbol.observable||"@@observable",Ua=Ul,pr=()=>Math.random().toString(36).substring(7).split("").join("."),ql={INIT:`@@redux/INIT${pr()}`,REPLACE:`@@redux/REPLACE${pr()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${pr()}`},Wn=ql;function Gr(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Vs(e,t,n){if(typeof e!="function")throw new Error(Pe(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Pe(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Pe(1));return n(Vs)(e,t)}let r=e,a=t,s=new Map,o=s,c=0,l=!1;function d(){o===s&&(o=new Map,s.forEach((k,M)=>{o.set(M,k)}))}function f(){if(l)throw new Error(Pe(3));return a}function g(k){if(typeof k!="function")throw new Error(Pe(4));if(l)throw new Error(Pe(5));let M=!0;d();const H=c++;return o.set(H,k),function(){if(M){if(l)throw new Error(Pe(6));M=!1,d(),o.delete(H),s=null}}}function p(k){if(!Gr(k))throw new Error(Pe(7));if(typeof k.type>"u")throw new Error(Pe(8));if(typeof k.type!="string")throw new Error(Pe(17));if(l)throw new Error(Pe(9));try{l=!0,a=r(a,k)}finally{l=!1}return(s=o).forEach(H=>{H()}),k}function _(k){if(typeof k!="function")throw new Error(Pe(10));r=k,p({type:Wn.REPLACE})}function b(){const k=g;return{subscribe(M){if(typeof M!="object"||M===null)throw new Error(Pe(11));function H(){const I=M;I.next&&I.next(f())}return H(),{unsubscribe:k(H)}},[Ua](){return this}}}return p({type:Wn.INIT}),{dispatch:p,subscribe:g,getState:f,replaceReducer:_,[Ua]:b}}function Wl(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:Wn.INIT})>"u")throw new Error(Pe(12));if(typeof n(void 0,{type:Wn.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Pe(13))})}function Yl(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let a;try{Wl(n)}catch(s){a=s}return function(o={},c){if(a)throw a;let l=!1;const d={};for(let f=0;f<r.length;f++){const g=r[f],p=n[g],_=o[g],b=p(_,c);if(typeof b>"u")throw c&&c.type,new Error(Pe(14));d[g]=b,l=l||b!==_}return l=l||r.length!==Object.keys(o).length,l?d:o}}function Yn(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function Vl(...e){return t=>(n,r)=>{const a=t(n,r);let s=()=>{throw new Error(Pe(15))};const o={getState:a.getState,dispatch:(l,...d)=>s(l,...d)},c=e.map(l=>l(o));return s=Yn(...c)(a.dispatch),{...a,dispatch:s}}}function Xl(e){return Gr(e)&&"type"in e&&typeof e.type=="string"}var Xs=Symbol.for("immer-nothing"),qa=Symbol.for("immer-draftable"),qe=Symbol.for("immer-state");function pt(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var $e=Object,on=$e.getPrototypeOf,Vn="constructor",$n="prototype",br="configurable",Xn="enumerable",jn="writable",kn="value",Mt=e=>!!e&&!!e[qe];function kt(e){return e?Gs(e)||er(e)||!!e[qa]||!!e[Vn]?.[qa]||tr(e)||nr(e):!1}var Gl=$e[$n][Vn].toString(),Wa=new WeakMap;function Gs(e){if(!e||!Kr(e))return!1;const t=on(e);if(t===null||t===$e[$n])return!0;const n=$e.hasOwnProperty.call(t,Vn)&&t[Vn];if(n===Object)return!0;if(!Jt(n))return!1;let r=Wa.get(n);return r===void 0&&(r=Function.toString.call(n),Wa.set(n,r)),r===Gl}function Cn(e,t,n=!0){En(e)===0?(n?Reflect.ownKeys(e):$e.keys(e)).forEach(a=>{t(a,e[a],e)}):e.forEach((r,a)=>t(a,r,e))}function En(e){const t=e[qe];return t?t.type_:er(e)?1:tr(e)?2:nr(e)?3:0}var Ya=(e,t,n=En(e))=>n===2?e.has(t):$e[$n].hasOwnProperty.call(e,t),Tr=(e,t,n=En(e))=>n===2?e.get(t):e[t],Gn=(e,t,n,r=En(e))=>{r===2?e.set(t,n):r===3?e.add(n):e[t]=n};function Kl(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var er=Array.isArray,tr=e=>e instanceof Map,nr=e=>e instanceof Set,Kr=e=>typeof e=="object",Jt=e=>typeof e=="function",mr=e=>typeof e=="boolean",St=e=>e.copy_||e.base_,Qr=e=>e.modified_?e.copy_:e.base_;function Sr(e,t){if(tr(e))return new Map(e);if(nr(e))return new Set(e);if(er(e))return Array[$n].slice.call(e);const n=Gs(e);if(t===!0||t==="class_only"&&!n){const r=$e.getOwnPropertyDescriptors(e);delete r[qe];let a=Reflect.ownKeys(r);for(let s=0;s<a.length;s++){const o=a[s],c=r[o];c[jn]===!1&&(c[jn]=!0,c[br]=!0),(c.get||c.set)&&(r[o]={[br]:!0,[jn]:!0,[Xn]:c[Xn],[kn]:e[o]})}return $e.create(on(e),r)}else{const r=on(e);if(r!==null&&n)return{...e};const a=$e.create(r);return $e.assign(a,e)}}function Zr(e,t=!1){return rr(e)||Mt(e)||(En(e)>1&&$e.defineProperties(e,{set:An,add:An,clear:An,delete:An}),$e.freeze(e),t&&Cn(e,(n,r)=>{Zr(r,!0)},!1)),e}function Ql(){pt(2)}var An={[kn]:Ql};function rr(e){return e===null||!Kr(e)?!0:$e.isFrozen(e)}var Kn="MapSet",Ir="Patches",Ks={};function ln(e){const t=Ks[e];return t||pt(0,e),t}var Zl=e=>!!Ks[e],xn,Qs=()=>xn,Jl=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:Zl(Kn)?ln(Kn):void 0});function Va(e,t){t&&(e.patchPlugin_=ln(Ir),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Cr(e){Er(e),e.drafts_.forEach($l),e.drafts_=null}function Er(e){e===xn&&(xn=e.parent_)}var Xa=e=>xn=Jl(xn,e);function $l(e){const t=e[qe];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Ga(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];if(e!==void 0&&e!==n){n[qe].modified_&&(Cr(t),pt(4)),kt(e)&&(e=Ka(t,e));const{patchPlugin_:a}=t;a&&a.generateReplacementPatches_(n[qe].base_,e,t)}else e=Ka(t,n);return ec(t,e,!0),Cr(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Xs?e:void 0}function Ka(e,t){if(rr(t))return t;const n=t[qe];if(!n)return Jr(t,e.handledSet_,e);if(!ar(n,e))return t;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(e);$s(n,e)}return n.copy_}function ec(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Zr(t,n)}function Zs(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var ar=(e,t)=>e.scope_===t,tc=[];function Js(e,t,n,r){const a=St(e),s=e.type_;if(r!==void 0&&Tr(a,r,s)===t){Gn(a,r,n,s);return}if(!e.draftLocations_){const c=e.draftLocations_=new Map;Cn(a,(l,d)=>{if(Mt(d)){const f=c.get(d)||[];f.push(l),c.set(d,f)}})}const o=e.draftLocations_.get(t)??tc;for(const c of o)Gn(a,c,n,s)}function nc(e,t,n){e.callbacks_.push(function(a){const s=t;if(!s||!ar(s,a))return;a.mapSetPlugin_?.fixSetContents(s);const o=Qr(s);Js(e,s.draft_??s,o,n),$s(s,a)})}function $s(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||(e.assigned_?.size??0)>0)){const{patchPlugin_:r}=t;if(r){const a=r.getPath(e);a&&r.generatePatches_(e,a,t)}Zs(e)}}function rc(e,t,n){const{scope_:r}=e;if(Mt(n)){const a=n[qe];ar(a,r)&&a.callbacks_.push(function(){On(e);const o=Qr(a);Js(e,n,o,t)})}else kt(n)&&e.callbacks_.push(function(){const s=St(e);Tr(s,t,e.type_)===n&&r.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&Jr(Tr(e.copy_,t,e.type_),r.handledSet_,r)})}function Jr(e,t,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||Mt(e)||t.has(e)||!kt(e)||rr(e)||(t.add(e),Cn(e,(r,a)=>{if(Mt(a)){const s=a[qe];if(ar(s,n)){const o=Qr(s);Gn(e,r,o,e.type_),Zs(s)}}else kt(a)&&Jr(a,t,n)})),e}function ac(e,t){const n=er(e),r={type_:n?1:0,scope_:t?t.scope_:Qs(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let a=r,s=$r;n&&(a=[r],s=bn);const{revoke:o,proxy:c}=Proxy.revocable(a,s);return r.draft_=c,r.revoke_=o,[c,r]}var $r={get(e,t){if(t===qe)return e;const n=St(e);if(!Ya(n,t,e.type_))return sc(e,n,t);const r=n[t];if(e.finalized_||!kt(r))return r;if(r===gr(e.base_,t)){On(e);const a=e.type_===1?+t:t,s=Mr(e.scope_,r,e,a);return e.copy_[a]=s}return r},has(e,t){return t in St(e)},ownKeys(e){return Reflect.ownKeys(St(e))},set(e,t,n){const r=ei(St(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const a=gr(St(e),t),s=a?.[qe];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_.set(t,!1),!0;if(Kl(n,a)&&(n!==void 0||Ya(e.base_,t,e.type_)))return!0;On(e),Pr(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_.set(t,!0),rc(e,t,n)),!0},deleteProperty(e,t){return On(e),gr(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),Pr(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=St(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{[jn]:!0,[br]:e.type_!==1||t!=="length",[Xn]:r[Xn],[kn]:n[t]}},defineProperty(){pt(11)},getPrototypeOf(e){return on(e.base_)},setPrototypeOf(){pt(12)}},bn={};Cn($r,(e,t)=>{bn[e]=function(){const n=arguments;return n[0]=n[0][0],t.apply(this,n)}});bn.deleteProperty=function(e,t){return bn.set.call(this,e,t,void 0)};bn.set=function(e,t,n){return $r.set.call(this,e[0],t,n,e[0])};function gr(e,t){const n=e[qe];return(n?St(n):e)[t]}function sc(e,t,n){const r=ei(t,n);return r?kn in r?r[kn]:r.get?.call(e.draft_):void 0}function ei(e,t){if(!(t in e))return;let n=on(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=on(n)}}function Pr(e){e.modified_||(e.modified_=!0,e.parent_&&Pr(e.parent_))}function On(e){e.copy_||(e.assigned_=new Map,e.copy_=Sr(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var ic=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(t,n,r)=>{if(Jt(t)&&!Jt(n)){const s=n;n=t;const o=this;return function(l=s,...d){return o.produce(l,f=>n.call(this,f,...d))}}Jt(n)||pt(6),r!==void 0&&!Jt(r)&&pt(7);let a;if(kt(t)){const s=Xa(this),o=Mr(s,t,void 0);let c=!0;try{a=n(o),c=!1}finally{c?Cr(s):Er(s)}return Va(s,r),Ga(a,s)}else if(!t||!Kr(t)){if(a=n(t),a===void 0&&(a=t),a===Xs&&(a=void 0),this.autoFreeze_&&Zr(a,!0),r){const s=[],o=[];ln(Ir).generateReplacementPatches_(t,a,{patches_:s,inversePatches_:o}),r(s,o)}return a}else pt(1,t)},this.produceWithPatches=(t,n)=>{if(Jt(t))return(o,...c)=>this.produceWithPatches(o,l=>t(l,...c));let r,a;return[this.produce(t,n,(o,c)=>{r=o,a=c}),r,a]},mr(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),mr(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),mr(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){kt(e)||pt(8),Mt(e)&&(e=oc(e));const t=Xa(this),n=Mr(t,e,void 0);return n[qe].isManual_=!0,Er(t),n}finishDraft(e,t){const n=e&&e[qe];(!n||!n.isManual_)&&pt(9);const{scope_:r}=n;return Va(r,t),Ga(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const a=t[n];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}n>-1&&(t=t.slice(n+1));const r=ln(Ir).applyPatches_;return Mt(e)?r(e,t):this.produce(e,a=>r(a,t))}};function Mr(e,t,n,r){const[a,s]=tr(t)?ln(Kn).proxyMap_(t,n):nr(t)?ln(Kn).proxySet_(t,n):ac(t,n);return(n?.scope_??Qs()).drafts_.push(a),s.callbacks_=n?.callbacks_??[],s.key_=r,n&&r!==void 0?nc(n,s,r):s.callbacks_.push(function(l){l.mapSetPlugin_?.fixSetContents(s);const{patchPlugin_:d}=l;s.modified_&&d&&d.generatePatches_(s,[],l)}),a}function oc(e){return Mt(e)||pt(10,e),ti(e)}function ti(e){if(!kt(e)||rr(e))return e;const t=e[qe];let n,r=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Sr(e,t.scope_.immer_.useStrictShallowCopy_),r=t.scope_.immer_.shouldUseStrictIteration()}else n=Sr(e,!0);return Cn(n,(a,s)=>{Gn(n,a,ti(s))},r),t&&(t.finalized_=!1),n}var lc=new ic,ni=lc.produce;function ri(e){return({dispatch:n,getState:r})=>a=>s=>typeof s=="function"?s(n,r,e):a(s)}var cc=ri(),dc=ri,uc=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Yn:Yn.apply(null,arguments)};function Qa(e,t){function n(...r){if(t){let a=t(...r);if(!a)throw new Error(Et(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>Xl(r)&&r.type===e,n}var ai=class hn extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,hn.prototype)}static get[Symbol.species](){return hn}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new hn(...t[0].concat(this)):new hn(...t.concat(this))}};function Za(e){return kt(e)?ni(e,()=>{}):e}function Dn(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function fc(e){return typeof e=="boolean"}var vc=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:a=!0,actionCreatorCheck:s=!0}=t??{};let o=new ai;return n&&(fc(n)?o.push(cc):o.push(dc(n.extraArgument))),o},hc="RTK_autoBatch",Ja=e=>t=>{setTimeout(t,e)},pc=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let a=!0,s=!1,o=!1;const c=new Set,l=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Ja(10):e.type==="callback"?e.queueNotification:Ja(e.timeout),d=()=>{o=!1,s&&(s=!1,c.forEach(f=>f()))};return Object.assign({},r,{subscribe(f){const g=()=>a&&f(),p=r.subscribe(g);return c.add(f),()=>{p(),c.delete(f)}},dispatch(f){try{return a=!f?.meta?.[hc],s=!a,s&&(o||(o=!0,l(d))),r.dispatch(f)}finally{a=!0}}})},mc=e=>function(n){const{autoBatch:r=!0}=n??{};let a=new ai(e);return r&&a.push(pc(typeof r=="object"?r:void 0)),a};function gc(e){const t=vc(),{reducer:n=void 0,middleware:r,devTools:a=!0,preloadedState:s=void 0,enhancers:o=void 0}=e||{};let c;if(typeof n=="function")c=n;else if(Gr(n))c=Yl(n);else throw new Error(Et(1));let l;typeof r=="function"?l=r(t):l=t();let d=Yn;a&&(d=uc({trace:!1,...typeof a=="object"&&a}));const f=Vl(...l),g=mc(f);let p=typeof o=="function"?o(g):g();const _=d(...p);return Vs(c,s,_)}function si(e){const t={},n=[];let r;const a={addCase(s,o){const c=typeof s=="string"?s:s.type;if(!c)throw new Error(Et(28));if(c in t)throw new Error(Et(29));return t[c]=o,a},addAsyncThunk(s,o){return o.pending&&(t[s.pending.type]=o.pending),o.rejected&&(t[s.rejected.type]=o.rejected),o.fulfilled&&(t[s.fulfilled.type]=o.fulfilled),o.settled&&n.push({matcher:s.settled,reducer:o.settled}),a},addMatcher(s,o){return n.push({matcher:s,reducer:o}),a},addDefaultCase(s){return r=s,a}};return e(a),[t,n,r]}function _c(e){return typeof e=="function"}function yc(e,t){let[n,r,a]=si(t),s;if(_c(e))s=()=>Za(e());else{const c=Za(e);s=()=>c}function o(c=s(),l){let d=[n[l.type],...r.filter(({matcher:f})=>f(l)).map(({reducer:f})=>f)];return d.filter(f=>!!f).length===0&&(d=[a]),d.reduce((f,g)=>{if(g)if(Mt(f)){const _=g(f,l);return _===void 0?f:_}else{if(kt(f))return ni(f,p=>g(p,l));{const p=g(f,l);if(p===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return p}}return f},c)}return o.getInitialState=s,o}var wc=Symbol.for("rtk-slice-createasyncthunk");function kc(e,t){return`${e}/${t}`}function xc({creators:e}={}){const t=e?.asyncThunk?.[wc];return function(r){const{name:a,reducerPath:s=a}=r;if(!a)throw new Error(Et(11));const o=(typeof r.reducers=="function"?r.reducers(Tc()):r.reducers)||{},c=Object.keys(o),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(C,I){const z=typeof C=="string"?C:C.type;if(!z)throw new Error(Et(12));if(z in l.sliceCaseReducersByType)throw new Error(Et(13));return l.sliceCaseReducersByType[z]=I,d},addMatcher(C,I){return l.sliceMatchers.push({matcher:C,reducer:I}),d},exposeAction(C,I){return l.actionCreators[C]=I,d},exposeCaseReducer(C,I){return l.sliceCaseReducersByName[C]=I,d}};c.forEach(C=>{const I=o[C],z={reducerName:C,type:kc(a,C),createNotation:typeof r.reducers=="function"};Ic(I)?Ec(z,I,d,t):Sc(z,I,d)});function f(){const[C={},I=[],z=void 0]=typeof r.extraReducers=="function"?si(r.extraReducers):[r.extraReducers],j={...C,...l.sliceCaseReducersByType};return yc(r.initialState,U=>{for(let F in j)U.addCase(F,j[F]);for(let F of l.sliceMatchers)U.addMatcher(F.matcher,F.reducer);for(let F of I)U.addMatcher(F.matcher,F.reducer);z&&U.addDefaultCase(z)})}const g=C=>C,p=new Map,_=new WeakMap;let b;function O(C,I){return b||(b=f()),b(C,I)}function k(){return b||(b=f()),b.getInitialState()}function M(C,I=!1){function z(U){let F=U[C];return typeof F>"u"&&I&&(F=Dn(_,z,k)),F}function j(U=g){const F=Dn(p,I,()=>new WeakMap);return Dn(F,U,()=>{const W={};for(const[$,A]of Object.entries(r.selectors??{}))W[$]=bc(A,U,()=>Dn(_,U,k),I);return W})}return{reducerPath:C,getSelectors:j,get selectors(){return j(z)},selectSlice:z}}const H={name:a,reducer:O,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:k,...M(s),injectInto(C,{reducerPath:I,...z}={}){const j=I??s;return C.inject({reducerPath:j,reducer:O},z),{...H,...M(j,!0)}}};return H}}function bc(e,t,n,r){function a(s,...o){let c=t(s);return typeof c>"u"&&r&&(c=n()),e(c,...o)}return a.unwrapped=e,a}var ii=xc();function Tc(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function Sc({type:e,reducerName:t,createNotation:n},r,a){let s,o;if("reducer"in r){if(n&&!Cc(r))throw new Error(Et(17));s=r.reducer,o=r.prepare}else s=r;a.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?Qa(e,o):Qa(e))}function Ic(e){return e._reducerDefinitionType==="asyncThunk"}function Cc(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Ec({type:e,reducerName:t},n,r,a){if(!a)throw new Error(Et(18));const{payloadCreator:s,fulfilled:o,pending:c,rejected:l,settled:d,options:f}=n,g=a(e,s,f);r.exposeAction(t,g),o&&r.addCase(g.fulfilled,o),c&&r.addCase(g.pending,c),l&&r.addCase(g.rejected,l),d&&r.addMatcher(g.settled,d),r.exposeCaseReducer(t,{fulfilled:o||Rn,pending:c||Rn,rejected:l||Rn,settled:d||Rn})}function Rn(){}function Et(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}const oi={quinn:{level1:{level:1,hp:8,maxHp:8,ac:17,surgeValue:4,attackBonus:6,damage:2},level2:{level:2,hp:10,maxHp:10,ac:18,surgeValue:5,attackBonus:7,damage:2}},vistra:{level1:{level:1,hp:10,maxHp:10,ac:18,surgeValue:5,attackBonus:8,damage:2},level2:{level:2,hp:12,maxHp:12,ac:19,surgeValue:6,attackBonus:9,damage:2}},keyleth:{level1:{level:1,hp:10,maxHp:10,ac:18,surgeValue:5,attackBonus:7,damage:2},level2:{level:2,hp:12,maxHp:12,ac:19,surgeValue:6,attackBonus:8,damage:2}},tarak:{level1:{level:1,hp:8,maxHp:8,ac:17,surgeValue:4,attackBonus:7,damage:2},level2:{level:2,hp:10,maxHp:10,ac:18,surgeValue:5,attackBonus:8,damage:2}},haskan:{level1:{level:1,hp:6,maxHp:6,ac:14,surgeValue:3,attackBonus:4,damage:1},level2:{level:2,hp:8,maxHp:8,ac:15,surgeValue:4,attackBonus:5,damage:1}}},li=5,ea=5,Pc={kobold:{attackBonus:5,damage:1},snake:{attackBonus:4,damage:1},cultist:{attackBonus:5,damage:1}},Pn=[{id:"kobold",name:"Kobold Dragonshield",ac:14,hp:1,maxHp:1,xp:1,imagePath:"assets/Monster_KoboldDragonshield.png"},{id:"snake",name:"Snake",ac:12,hp:1,maxHp:1,xp:1,imagePath:"assets/Monster_Snake.png"},{id:"cultist",name:"Cultist",ac:13,hp:2,maxHp:2,xp:1,imagePath:"assets/Monster_Cultist.png"}],Mc=["kobold","kobold","kobold","snake","snake","snake","cultist","cultist","cultist"],it=[{id:"quinn",name:"Quinn",heroClass:"Cleric",imagePath:"assets/Hero_Cleric_Quinn.png",speed:5,attack:{name:"Mace",attackBonus:6,damage:2,range:1},hp:8,maxHp:8,ac:17},{id:"vistra",name:"Vistra",heroClass:"Fighter",imagePath:"assets/Hero_Fighter_Vistra.png",speed:5,attack:{name:"Warhammer",attackBonus:8,damage:2,range:1},hp:10,maxHp:10,ac:18},{id:"keyleth",name:"Keyleth",heroClass:"Paladin",imagePath:"assets/Hero_Paladin_Keyleth.png",speed:6,attack:{name:"Longsword",attackBonus:7,damage:2,range:1},hp:10,maxHp:10,ac:18},{id:"tarak",name:"Tarak",heroClass:"Rogue",imagePath:"assets/Hero_Rogue_Tarak.png",speed:6,attack:{name:"Short Sword",attackBonus:7,damage:2,range:1},hp:8,maxHp:8,ac:17},{id:"haskan",name:"Haskan",heroClass:"Wizard",imagePath:"assets/Hero_Wizard_Haskan.png",speed:6,attack:{name:"Quarterstaff",attackBonus:4,damage:1,range:1},hp:6,maxHp:6,ac:14}],Hc=[{x:1,y:2},{x:2,y:2},{x:3,y:2},{x:3,y:3},{x:3,y:4},{x:1,y:5},{x:2,y:5},{x:3,y:5}],ci=[{tileType:"tile-black-2exit-a",imagePath:"assets/Tile_Black_x2_01.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!0},{tileType:"tile-black-2exit-b",imagePath:"assets/Tile_Black_x2_02.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!0},{tileType:"tile-black-2exit-c",imagePath:"assets/Tile_Black_x2_03.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!0},{tileType:"tile-black-3exit-a",imagePath:"assets/Tile_Black_x3_01.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!0},{tileType:"tile-black-3exit-b",imagePath:"assets/Tile_Black_x3_02.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!0},{tileType:"tile-black-3exit-c",imagePath:"assets/Tile_Black_x3_03.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!0},{tileType:"tile-black-4exit-a",imagePath:"assets/Tile_Black_x4_01.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!0},{tileType:"tile-black-4exit-b",imagePath:"assets/Tile_Black_x4_02.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!0},{tileType:"tile-white-2exit-a",imagePath:"assets/Tile_White_x2_01.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!1},{tileType:"tile-white-2exit-b",imagePath:"assets/Tile_White_x2_02.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!1},{tileType:"tile-white-2exit-c",imagePath:"assets/Tile_White_x2_03.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!1},{tileType:"tile-white-2exit-d",imagePath:"assets/Tile_White_x2_04.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!1},{tileType:"tile-white-2exit-e",imagePath:"assets/Tile_White_x2_05.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!1},{tileType:"tile-white-3exit-a",imagePath:"assets/Tile_White_x3_01.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!1},{tileType:"tile-white-3exit-b",imagePath:"assets/Tile_White_x3_02.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!1},{tileType:"tile-white-3exit-c",imagePath:"assets/Tile_White_x3_03.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!1}],Ac=["tile-black-2exit-a","tile-black-2exit-b","tile-black-2exit-c","tile-black-3exit-a","tile-black-3exit-b","tile-black-3exit-c","tile-black-4exit-a","tile-black-4exit-b","tile-white-2exit-a","tile-white-2exit-b","tile-white-2exit-c","tile-white-2exit-d","tile-white-2exit-e","tile-white-3exit-a","tile-white-3exit-b","tile-white-3exit-c"],Dc={id:"start-tile",tileType:"start",position:{col:0,row:0},rotation:0,edges:{north:"unexplored",south:"unexplored",east:"unexplored",west:"unexplored"}},Rc=[{id:"volcanic-spray",name:"Volcanic Spray",type:"event",description:"Hot volcanic spray erupts from a crack in the ground. The active hero takes 1 damage.",effect:{type:"damage",amount:1,target:"active-hero"},imagePath:"assets/Encounter_VolcanicSpray.png"},{id:"goblin-ambush",name:"Goblin Ambush",type:"event",description:"The active hero takes 1 damage.",effect:{type:"damage",amount:1,target:"active-hero"},imagePath:"assets/Encounter_GoblinAmbush.png"},{id:"dark-fog",name:"Dark Fog",type:"environment",description:"All heroes have -2 to attack rolls until the end of the next Hero Phase.",effect:{type:"environment"},imagePath:"assets/Encounter_DarkFog.png"},{id:"cave-in",name:"Cave-In",type:"event",description:"All heroes take 1 damage.",effect:{type:"damage",amount:1,target:"all-heroes"},imagePath:"assets/Encounter_CaveIn.png"},{id:"poisoned-dart-trap",name:"Poisoned Dart Trap",type:"trap",description:"The active hero takes 2 damage unless they succeed on a DC 12 Dexterity check.",effect:{type:"trap",disableDC:12},imagePath:"assets/Encounter_PoisonedDartTrap.png"}],zc=["volcanic-spray","goblin-ambush","dark-fog","cave-in","poisoned-dart-trap"],di=[{id:1,name:"Healing Hymn",type:"utility",heroClass:"Cleric",description:"You sing a soothing song that seals the wounds of you and your allies.",rule:`Use this power during your Hero Phase.
You and one other Hero on your tile regain 2 Hit Points.`,isCustomAbility:!0},{id:2,name:"Cleric's Shield",type:"at-will",heroClass:"Cleric",description:"You utter a minor defensive prayer as you strike your foe.",rule:`Attack one adjacent Monster.
Hit or Miss: Choose 1 Hero on your tile. That Hero gains a +2 bonus to AC until you use this power again.`,attackBonus:6,damage:1},{id:3,name:"Righteous Advance",type:"at-will",heroClass:"Cleric",description:"Your attack grants your ally time to advance.",rule:`Attack one adjacent Monster.
Hit or Miss: One Hero on your tile moves 2 squares.`,attackBonus:6,damage:1},{id:4,name:"Sacred Flame",type:"at-will",heroClass:"Cleric",description:"Sacred light shines from above, searing a single enemy with holy radiance.",rule:`Attack one Monster within 1 tile of you.
If you hit, choose yourself or one Hero on your tile. That Hero gains 1 Hit Point.`,attackBonus:6,damage:1},{id:5,name:"Blade Barrier",type:"daily",heroClass:"Cleric",description:"You conjure a wall of whirling blades to cut apart advancing foes.",rule:`Choose a tile within 2 tiles of you. Place five Blade Barrier tokens on five different squares on that tile.
When a Monster is placed on a square with a Blade Barrier token, remove that token and deal 1 damage to the Monster.`},{id:6,name:"Cause Fear",type:"daily",heroClass:"Cleric",description:"Your holy symbol ignites with divine light, slamming your foes with uncontrollable terror.",rule:`Choose a tile within 1 tile of you. Each ally on that tile adjacent to a Monster can make an At-Will attack with a +2 bonus to the Attack roll.
After the attacks, place each Monster remaining on a tile within 2 tiles of you.`},{id:7,name:"Wrathful Thunder",type:"daily",heroClass:"Cleric",description:"When you strike, a shattering thunderclap fills the room.",rule:`Attack one adjacent Monster.
After the attack, choose one Monster on your tile. Pass that Monster's card to the player on your right. That player now controls the Monster.`,attackBonus:6,damage:3},{id:8,name:"Astral Refuge",type:"utility",heroClass:"Cleric",description:"You send an ally to a safe refuge in the Astral Sea for a short time.",rule:`Use this power at the start of any Villain Phase.
Choose one Hero within 2 tiles of you. Remove that Hero from the tile. At the start of that player's next Hero Phase, that player places the Hero on any tile.`},{id:9,name:"Command",type:"utility",heroClass:"Cleric",description:"You utter a single word that your foe must obey.",rule:`Use this power during your Hero Phase.
Choose one Monster on your tile. Place that Monster on a tile within 2 tiles of you.`},{id:10,name:"Perseverance",type:"utility",heroClass:"Cleric",description:"A house does not stand with just a single wall.",rule:`Use this power when any player draws an Encounter Card.
The cost to cancel the Encounter Card is reduced by the number of Heroes on your tile, including your own Hero.`},{id:11,name:"Dwarven Resilience",type:"utility",heroClass:"Dwarf",description:"Your dwarven heritage grants you uncommonly strong health.",rule:`Use this power during your Hero Phase instead of moving.
You regain 4 Hit Points.`,isCustomAbility:!0},{id:12,name:"Charge",type:"at-will",heroClass:"Fighter",description:"You rush into combat.",rule:"Move up to your speed, then attack one adjacent Monster.",attackBonus:8,damage:1},{id:13,name:"Reaping Strike",type:"at-will",heroClass:"Fighter",description:"You punctuate your scything attacks with wicked jabs and small cutting blows that slip through your enemy's defenses.",rule:"Attack one adjacent Monster twice.",attackBonus:4,damage:1},{id:14,name:"Sure Strike",type:"at-will",heroClass:"Fighter",description:"You trade power for precision.",rule:"Attack one adjacent Monster.",attackBonus:11,damage:1},{id:15,name:"Comeback Strike",type:"daily",heroClass:"Fighter",description:"A timely strike gives you the strength to fight on.",rule:`Attack one adjacent Monster.
If you hit, you regain 2 hit points.
If you miss, do not flip this card over.`,attackBonus:7,damage:2},{id:16,name:"Into the Fray",type:"daily",heroClass:"Fighter",description:"You unleash a fierce battle cry as you leap boldly into battle.",rule:"Place your Hero adjacent to any Hero within 2 tiles of you. Attack one adjacent Monster.",attackBonus:7,damage:3},{id:17,name:"Taunting Advance",type:"daily",heroClass:"Fighter",description:"You rush forward and call forth your enemy.",rule:"Move your speed. Then choose a Monster within 2 tiles of you. Place that Monster adjacent to your Hero and attack it.",attackBonus:8,damage:3},{id:18,name:"Inspiring Advice",type:"utility",heroClass:"Fighter",description:"You encourage your teammate to fight on.",rule:`Use when a Hero misses a Monster with an attack.
The Hero rerolls the attack.
If the attack misses, do not flip this card over.`},{id:19,name:"One for the Team",type:"utility",heroClass:"Fighter",description:"You protect your ally from the hazards of the dungeon.",rule:`Use when any player draws an Encounter Card.
Resolve the Encounter Card as if you drew it.`},{id:20,name:"To Arms!",type:"utility",heroClass:"Fighter",description:"You rally your companions to meet your foe head on.",rule:`Use when a new Monster is placed on a tile.
You and one Hero on your tile can move your speed.`},{id:21,name:"Lay On Hands",type:"utility",heroClass:"Paladin",description:"Your divine touch instantly heals wounds.",rule:"One adjacent Hero regains 2 hit points.",isCustomAbility:!0},{id:22,name:"Divine Challenge",type:"at-will",heroClass:"Paladin",description:"You boldly confront a nearby enemy.",rule:`Choose one Monster within 1 tile of you. Place that Monster adjacent to your Hero.
Attack one adjacent Monster.`,attackBonus:8,damage:1},{id:23,name:"Holy Strike",type:"at-will",heroClass:"Paladin",description:"You strike an enemy, igniting it with holy light.",rule:`Attack one adjacent Monster.
If you started your Hero Phase adjacent to the Monster, deal +1 damage if you hit.`,attackBonus:8,damage:1},{id:24,name:"Valiant Strike",type:"at-will",heroClass:"Paladin",description:"The odds against you add strength to your attack.",rule:`Attack one adjacent Monster.
When making this attack, you get a +1 bonus to attack for each Monster adjacent to your Hero.`,attackBonus:8,damage:1},{id:25,name:"Arcing Strike",type:"daily",heroClass:"Paladin",description:"You swing your weapon in a wide arc.",rule:"Attack one or two adjacent Monsters.",attackBonus:9,damage:3},{id:26,name:"Benign Transposition",type:"daily",heroClass:"Paladin",description:"You call upon divine power to switch places with an ally to strike a foe.",rule:`Choose 1 Hero within 2 tiles of you. You swap positions with that Hero.
After swapping positions, attack one adjacent Monster.`,attackBonus:8,damage:3},{id:27,name:"Righteous Smite",type:"daily",heroClass:"Paladin",description:"Your righteous attack fills your party with preternatural resolve.",rule:`Attack one adjacent Monster.
Hit or Miss: All Heroes on your tile regain 1 Hit Point.`,attackBonus:9,damage:3},{id:28,name:"Bravery",type:"utility",heroClass:"Paladin",description:"Your bravery gives you the power to fight on.",rule:`Use when a Monster within 1 tile of you activates during any player's Villain Phase.
Place your Hero adjacent to that Monster. You regain 1 hit point.`},{id:29,name:"Noble Shield",type:"utility",heroClass:"Paladin",description:"You quickly throw up your shield, protecting your friends from harm at your expense.",rule:`Use when a Monster targets you and at least one additional Hero with the same attack.
You are the only target of the attack, but the attack roll against you is automatically a 20 and cannot be rerolled.`},{id:30,name:"Virtue's Touch",type:"utility",heroClass:"Paladin",description:"Your gentle touch removes affliction.",rule:"Choose one adjacent Hero. End one condition on that Hero."},{id:31,name:"Furious Assault",type:"utility",heroClass:"Half-Orc",description:"Your wrath burns inside you, giving strength to your next attack.",rule:`Use this power when you hit a Monster with an attack.
The Monster takes +1 damage.`,isCustomAbility:!0},{id:32,name:"Distracting Jab",type:"at-will",heroClass:"Rogue",description:"You escape the clutches of your foe as it reacts to your attack.",rule:`Attack one adjacent Monster.
If you hit, move the Monster 1 square.
After the attack, move your speed.`,attackBonus:7,damage:1},{id:33,name:"Lucky Strike",type:"at-will",heroClass:"Rogue",description:"They fall for it if you're lucky, and then they fall.",rule:`Attack one Monster within 1 tile of you.
If you hit and your attack roll is an even number, deal +1 damage.`,attackBonus:7,damage:1},{id:34,name:"Positioning Shot",type:"at-will",heroClass:"Rogue",description:"To avoid your vicious attack, your enemy leaps exactly where you want it to be.",rule:`Attack one Monster within 2 tiles of you.
Hit or Miss: Place that Monster on any square on your tile or on an adjacent tile.`,attackBonus:7,damage:1},{id:35,name:"Acrobatic Onslaught",type:"daily",heroClass:"Rogue",description:"After a quick strike, you leap through the air, lining up your next target.",rule:`Attack one adjacent Monster.
Hit or Miss: Place your Hero on any tile within 2 tiles of where you started, and then use an At-Will power immediately.`,attackBonus:7,damage:2},{id:36,name:"King's Castle",type:"daily",heroClass:"Rogue",description:"It's hard to get the little guy when he's behind an ally who can crush plate armor in his teeth.",rule:`Swap positions with one Hero within 1 tile of you.
Attack 1 Monster within 2 tiles of you.`,attackBonus:7,damage:3},{id:37,name:"Tornado Strike",type:"daily",heroClass:"Rogue",description:"Your weapon becomes a blur as you make swift, sweeping attacks.",rule:`Attack four times. Each attack can be against any Monster on your tile.
After the attacks, place your Hero on any square on your tile.`,attackBonus:7,damage:1},{id:38,name:"Distant Diversion",type:"utility",heroClass:"Rogue",description:"The monster turns to investigate the sound of a thrown pebble.",rule:`Choose one Monster within 3 tiles of you.
Place that Monster onto an adjacent tile.`},{id:39,name:"Practiced Evasion",type:"utility",heroClass:"Rogue",description:"A quick flip and quicker fingers disables the trap.",rule:`Use this power when you are hit by an attack from a Trap or Event Attack Encounter Card.
The attack misses. If the attack was from a Trap Encounter Card, you get a free Disable check against that Trap.`},{id:40,name:"Tumbling Escape",type:"utility",heroClass:"Rogue",description:"You nimbly roll out of harm's way.",rule:`Use this power when a Monster hits you with an attack.
The attack misses. Place your Hero on any tile within 1 tile of where you started.`},{id:41,name:"Hurled Breath",type:"daily",heroClass:"Dragonborn",description:"You hurl your draconic breath, engulfing your foes a short distance away.",rule:`Choose a tile within 2 tiles of you. Attack each Monster on that tile.
This attack does not count as an attack action.`,attackBonus:5,damage:1,isCustomAbility:!0},{id:42,name:"Arc Lightning",type:"at-will",heroClass:"Wizard",description:"Lightning leaps from your outstretched hands, blasting your foes.",rule:"Attack up to two Monsters. Each monster can be on your tile or any tile within 1 tile of you.",attackBonus:7,damage:1},{id:43,name:"Hypnotism",type:"at-will",heroClass:"Wizard",description:"Your enemy's mouth goes slack as your magic takes control.",rule:"Choose a Monster within 1 tile of you. Move that Monster 1 tile. If it ends adjacent to another Monster, make an attack against the second Monster.",attackBonus:9,damage:1},{id:44,name:"Ray of Frost",type:"at-will",heroClass:"Wizard",description:"A blistering ray of white frost streaks to your target, slowing its reactions.",rule:"Attack one Monster on your tile or on any tile within 2 tiles of you.",attackBonus:7,damage:1},{id:45,name:"Flaming Sphere",type:"daily",heroClass:"Wizard",description:"You conjure a rolling ball of fire and control where it goes.",rule:`Place 3 Flaming Sphere tokens in a stack on any square within 1 tile of you.
Instead of moving during your Hero phase, you can move the Flaming Sphere stack 1 tile.
At the end of your Hero Phase, you can remove 1 Flaming Sphere token and deal 1 damage to each Monster on that tile.`},{id:46,name:"Shock Sphere",type:"daily",heroClass:"Wizard",description:"You hurl a crackling orb of lightning, engulfing your foes in its electric embrace.",rule:"Choose a tile within 2 tiles of you. Attack each Monster on that tile.",attackBonus:9,damage:2},{id:47,name:"Spectral Ram",type:"daily",heroClass:"Wizard",description:"You bash your foe with arcane force that sends it reeling.",rule:`Attack one Monster within 2 tiles of you.
Hit or Miss: Place the Monster onto any tile within 2 tiles of where it started.`,attackBonus:9,damage:3},{id:48,name:"Invisibility",type:"utility",heroClass:"Wizard",description:"You vanish from sight.",rule:`Use this power during your Hero Phase.
Until the start of your next Hero Phase, you do not count as the closest Hero for any Monster's tactics.
Monster attacks that attack every Hero on a tile still attack you.`},{id:49,name:"Mirror Image",type:"utility",heroClass:"Wizard",description:"You create three duplicate images of yourself.",rule:`Use this power during your Hero Phase.
Place 3 Mirror Image tokens on your Hero Card.
For each Mirror Image token on your Hero Card, you gain +2 AC. Whenever a Monster misses you with an attack, remove 1 Mirror Image token.`},{id:50,name:"Wizard Eye",type:"utility",heroClass:"Wizard",description:"You see through a magical hovering eye, allowing you to explore from a distance.",rule:`Use this power during your Hero Phase.
Place the Wizard Eye token on a tile within 1 tile of you.
Instead of moving during your Hero Phase, you can move the Wizard Eye marker 1 tile.
During your Exploration Phase, you can explore as if your Hero was on any unexplored edge on the Wizard Eye's tile.`}],ui={quinn:1,vistra:11,tarak:31,keyleth:21,haskan:41};function ta(e){const n={Cleric:["Cleric"],Fighter:["Fighter","Dwarf"],Paladin:["Paladin"],Rogue:["Rogue","Half-Orc"],Wizard:["Wizard","Dragonborn"]}[e]||[];return di.filter(r=>n.includes(r.heroClass))}function jc(e){return ta(e).filter(t=>t.type==="at-will")}function Oc(e){return ta(e).filter(t=>t.type==="daily")}function Nc(e){return ta(e).filter(t=>t.type==="utility"&&!t.isCustomAbility)}function Qn(e){return di.find(t=>t.id===e)}function Bc(e,t,n,r,a){const s=[t,n,...r,a];return{heroId:e,customAbility:t,utility:n,atWills:r,daily:a,cardStates:s.map(o=>({cardId:o,isFlipped:!1}))}}function Lc(e,t){return{...e,cardStates:e.cardStates.map(n=>n.cardId===t?{...n,isFlipped:!0}:n)}}function Fc(e,t){return{...e,dailyLevel2:t,cardStates:[...e.cardStates,{cardId:t,isFlipped:!1}]}}const Uc={availableHeroes:it,selectedHeroes:[],heroEdgeMap:{},powerCardSelections:{},heroPowerCards:{}},fi=ii({name:"heroes",initialState:Uc,reducers:{toggleHeroSelection:(e,t)=>{const n=t.payload,r=e.selectedHeroes.findIndex(a=>a.id===n);if(r>=0)e.selectedHeroes.splice(r,1),delete e.heroEdgeMap[n],delete e.powerCardSelections[n];else if(e.selectedHeroes.length<5){const a=e.availableHeroes.find(s=>s.id===n);a&&(e.selectedHeroes.push(a),e.powerCardSelections[n]={heroId:n,utility:null,atWills:[],daily:null})}},selectHeroFromEdge:(e,t)=>{const{heroId:n,edge:r}=t.payload,a=e.selectedHeroes.findIndex(s=>s.id===n);if(a>=0)e.heroEdgeMap[n]===r&&(e.selectedHeroes.splice(a,1),delete e.heroEdgeMap[n],delete e.powerCardSelections[n]);else if(e.selectedHeroes.length<5){const s=e.availableHeroes.find(o=>o.id===n);s&&(e.selectedHeroes.push(s),e.heroEdgeMap[n]=r,e.powerCardSelections[n]={heroId:n,utility:null,atWills:[],daily:null})}},clearSelection:e=>{e.selectedHeroes=[],e.heroEdgeMap={},e.powerCardSelections={},e.heroPowerCards={}},selectUtilityCard:(e,t)=>{const{heroId:n,cardId:r}=t.payload,a=e.powerCardSelections[n];a&&(a.utility=a.utility===r?null:r)},toggleAtWillCard:(e,t)=>{const{heroId:n,cardId:r}=t.payload,a=e.powerCardSelections[n];if(a){const s=a.atWills.indexOf(r);s>=0?a.atWills.splice(s,1):a.atWills.length<2&&a.atWills.push(r)}},selectDailyCard:(e,t)=>{const{heroId:n,cardId:r}=t.payload,a=e.powerCardSelections[n];a&&(a.daily=a.daily===r?null:r)},finalizePowerCardSelections:e=>{e.heroPowerCards={};for(const t of e.selectedHeroes){const n=e.powerCardSelections[t.id],r=ui[t.id];n&&r&&n.utility&&n.daily&&n.atWills.length===2?e.heroPowerCards[t.id]=Bc(t.id,r,n.utility,n.atWills,n.daily):console.warn(`Hero ${t.id} has incomplete power card selection, skipping`)}},usePowerCard:(e,t)=>{const{heroId:n,cardId:r}=t.payload,a=e.heroPowerCards[n];a&&(e.heroPowerCards[n]=Lc(a,r))},addLevel2Daily:(e,t)=>{const{heroId:n,cardId:r}=t.payload,a=e.heroPowerCards[n];a&&(e.heroPowerCards[n]=Fc(a,r))}}}),{toggleHeroSelection:Uf,selectHeroFromEdge:qc,clearSelection:qf,selectUtilityCard:Wc,toggleAtWillCard:Yc,selectDailyCard:Vc,finalizePowerCardSelections:Xc,usePowerCard:Gc,addLevel2Daily:Wf}=fi.actions,Kc=fi.reducer,pn={minX:1,maxX:3,minY:0,maxY:7,staircase:[{x:1,y:3},{x:2,y:3},{x:1,y:4},{x:2,y:4}]},Zt=4,Qc=4,Zc=8;function Mn(e){const{col:t,row:n}=e.position;if(e.tileType==="start")return{minX:0,maxX:3,minY:0,maxY:7};let r,a;return t>0?r=Qc+(t-1)*Zt:t<0?r=t*Zt:r=0,n>0?a=Zc+(n-1)*Zt:n<0?a=n*Zt:a=0,{minX:r,maxX:r+Zt-1,minY:a,maxY:a+Zt-1}}function Tn(e,t){for(const n of t.tiles){const r=Mn(n);if(e.x>=r.minX&&e.x<=r.maxX&&e.y>=r.minY&&e.y<=r.maxY)return n}return null}function Jc(e){return e.x>=pn.minX&&e.x<=pn.maxX&&e.y>=pn.minY&&e.y<=pn.maxY}function vi(e){return pn.staircase.some(t=>t.x===e.x&&t.y===e.y)}function $c(e,t){return Jc(e)&&!vi(e)}function ed(e,t,n){return t.some(r=>r.position.x===e.x&&r.position.y===e.y&&r.heroId!==n)}function td(e,t,n,r){const a=Mn(r),s=r.tileType==="start"?1:a.minX,o=e.y===a.minY,c=e.y===a.maxY,l=e.x===a.maxX,d=e.x===s,f=n<0?"north":n>0?"south":null,g=t<0?"west":t>0?"east":null;if(!f||!g)return!1;let p=!1,_=!1;return f==="north"&&o&&r.edges.north==="wall"&&(p=!0),f==="south"&&c&&r.edges.south==="wall"&&(p=!0),g==="east"&&l&&r.edges.east==="wall"&&(_=!0),g==="west"&&d&&r.edges.west==="wall"&&(_=!0),p&&_}function nd(e,t,n,r){const a=r.x-n.x,s=r.y-n.y;if(a!==0&&s!==0)return!1;let o,c;return s<0?(o="north",c="south"):s>0?(o="south",c="north"):a>0?(o="east",c="west"):(o="west",c="east"),!(e.edges[o]!=="open"||t.edges[c]!=="open")}function na(e,t){const n=[],r=[{dx:0,dy:-1,cardinal:!0},{dx:0,dy:1,cardinal:!0},{dx:-1,dy:0,cardinal:!0},{dx:1,dy:0,cardinal:!0},{dx:-1,dy:-1,cardinal:!1},{dx:1,dy:-1,cardinal:!1},{dx:-1,dy:1,cardinal:!1},{dx:1,dy:1,cardinal:!1}];if(!t){for(const s of r){const o={x:e.x+s.dx,y:e.y+s.dy};$c(o)&&n.push(o)}return n}const a=Tn(e,t);if(!a)return n;for(const s of r){const o={x:e.x+s.dx,y:e.y+s.dy},c=Tn(o,t);if(c&&!(c.tileType==="start"&&(vi(o)||o.x<1))){if(a.id===c.id){if(!s.cardinal&&td(e,s.dx,s.dy,a))continue;n.push(o);continue}s.cardinal&&nd(a,c,e,o)&&n.push(o)}}return n}function rd(e,t,n,r,a){const s=[],o=new Set,c=[{pos:e,distance:0}];for(o.add(`${e.x},${e.y}`);c.length>0;){const l=c.shift();if(!l)break;if(l.distance>0&&!ed(l.pos,n,r)&&s.push(l.pos),l.distance<t){const d=na(l.pos,a);for(const f of d){const g=`${f.x},${f.y}`;o.has(g)||(o.add(g),c.push({pos:f,distance:l.distance+1}))}}}return s}function ad(e,t){return t.some(n=>n.x===e.x&&n.y===e.y)}const sd={north:[{x:1,y:0},{x:2,y:0},{x:3,y:0}],south:[{x:1,y:7},{x:2,y:7},{x:3,y:7}],east:[{x:3,y:0},{x:3,y:1},{x:3,y:2},{x:3,y:5},{x:3,y:6},{x:3,y:7}],west:[{x:1,y:0},{x:1,y:1},{x:1,y:2},{x:1,y:5},{x:1,y:6},{x:1,y:7}]};function id(e,t){return sd[t].some(r=>r.x===e.x&&r.y===e.y)}function ra(e){return{north:"south",south:"north",east:"west",west:"east"}[e]}function od(e,t){const n=t.tiles.find(r=>r.id==="start-tile");if(!n)return null;for(const r of t.unexploredEdges)if(r.tileId===n.id&&id(e.position,r.direction))return r;return null}function ld(e,t){const{col:n,row:r}=e.position;switch(t){case"north":return{col:n,row:r-1};case"south":return{col:n,row:r+1};case"east":return{col:n+1,row:r};case"west":return{col:n-1,row:r}}}function cd(e){const t=ra(e);return{south:0,west:90,north:180,east:270}[t]}function hi(e){return ci.find(t=>t.tileType===e)}function dd(e,t,n){const r=n.tiles.find(f=>f.id===e.tileId);if(!r)return null;const a=ld(r,e.direction),s=cd(e.direction);if(!hi(t))return null;const c=`tile-${n.tiles.length}`,d={north:"unexplored",south:"unexplored",east:"unexplored",west:"unexplored",[ra(e.direction)]:"open"};return{id:c,tileType:t,position:a,rotation:s,edges:d}}function Hr(){return{tiles:[{...Dc}],unexploredEdges:[{tileId:"start-tile",direction:"north"},{tileId:"start-tile",direction:"south"},{tileId:"start-tile",direction:"east"},{tileId:"start-tile",direction:"west"}],tileDeck:[]}}function ud(e,t=Math.random){const n=[...e];for(let r=n.length-1;r>0;r--){const a=Math.floor(t()*(r+1));[n[r],n[a]]=[n[a],n[r]]}return n}function fd(e,t=Math.random){return ud(e,t)}function vd(e){if(e.length===0)return{drawnTile:null,remainingDeck:[]};const[t,...n]=e;return{drawnTile:t,remainingDeck:n}}function hd(e,t,n){const r=e.unexploredEdges.filter(l=>!(l.tileId===t.tileId&&l.direction===t.direction)),a=ra(t.direction),o=["north","south","east","west"].filter(l=>l!==a&&n.edges[l]==="unexplored").map(l=>({tileId:n.id,direction:l}));return{tiles:[...e.tiles.map(l=>l.id===t.tileId?{...l,edges:{...l.edges,[t.direction]:"open"}}:l),n],unexploredEdges:[...r,...o],tileDeck:e.tileDeck}}function pi(e,t=Math.random){const n=[...e];for(let r=n.length-1;r>0;r--){const a=Math.floor(t()*(r+1));[n[r],n[a]]=[n[a],n[r]]}return n}function pd(e=Math.random){return{drawPile:pi([...Mc],e),discardPile:[]}}function md(e,t=Math.random){if(e.drawPile.length===0){if(e.discardPile.length===0)return{monster:null,deck:e};const a=pi(e.discardPile,t);return{monster:a[0],deck:{drawPile:a.slice(1),discardPile:[]}}}const[n,...r]=e.drawPile;return{monster:n,deck:{drawPile:r,discardPile:e.discardPile}}}function gd(e,t){return{drawPile:e.drawPile,discardPile:[...e.discardPile,t]}}function aa(e){return Pn.find(t=>t.id===e)}function _d(e,t,n,r,a){const s=aa(e);return s?{monsterId:e,instanceId:`${e}-${a}`,position:t,currentHp:s.hp,controllerId:n,tileId:r}:null}const yd=4,$a=Math.floor(yd/2);function wd(){return{x:$a,y:$a}}function es(e,t){return e.currentHp===0&&t.healingSurges>0}function kd(e,t){return e.currentHp===0&&t.healingSurges===0}function xd(e,t){const n=e.surgeValue;return{heroState:{...e,currentHp:Math.min(n,e.maxHp)},resources:{...t,healingSurges:t.healingSurges-1}}}function mi(e=Math.random){return Math.floor(e()*20)+1}function bd(e,t,n=Math.random){const r=mi(n),a=r+e.attackBonus,s=r===20||a>=t,o=r===20;return{roll:r,attackBonus:e.attackBonus,total:a,targetAC:t,isHit:s,damage:s?e.damage:0,isCritical:o}}function Td(e,t,n){return e.level===1&&t===20&&n.xp>=li}function Sd(e,t){const n=oi[e.heroId];if(!n)return console.warn(`Hero levels not found for heroId: ${e.heroId}. Level up skipped.`),{heroState:e,resources:t};const r=n.level2,a=e.maxHp-e.currentHp;return{heroState:{...e,level:2,maxHp:r.maxHp,currentHp:Math.max(1,r.maxHp-a),ac:r.ac,surgeValue:r.surgeValue,attackBonus:r.attackBonus},resources:{...t,xp:t.xp-li}}}function Id(e,t,n){return t===20&&e===2?n+1:n}function Ar(e,t){const n=Math.abs(e.x-t.x),r=Math.abs(e.y-t.y);return n<=1&&r<=1&&(n>0||r>0)}function Cd(e){return aa(e)?.ac}function Ed(e,t){const n=t.tiles.find(a=>a.id===e.tileId);if(!n)return null;const r=Mn(n);return{x:r.minX+e.position.x,y:r.minY+e.position.y}}function Pd(e,t,n,r){return r?Tn(e,r)?t.filter(s=>{const o=Ed(s,r);return o?Ar(e,o):!1}):[]:t.filter(s=>s.tileId===n&&Ar(e,s.position))}function Zn(e,t){const n=t.tiles.find(a=>a.id===e.tileId);if(!n)return null;const r=Mn(n);return{x:r.minX+e.position.x,y:r.minY+e.position.y}}function ts(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function Md(e,t,n,r){const a=Zn(e,r);if(!a)return null;const s=t.filter(d=>{const f=n[d.heroId];return f!==void 0&&f>0});if(s.length===0)return null;const o=new Set,c=[{pos:a,distance:0}];o.add(`${a.x},${a.y}`);let l=null;for(;c.length>0;){const d=c.shift();for(const g of s)g.position.x===d.pos.x&&g.position.y===d.pos.y&&(!l||d.distance<l.distance)&&(l={hero:g,distance:d.distance});if(l&&l.distance<d.distance)break;const f=na(d.pos,r);for(const g of f){const p=`${g.x},${g.y}`;o.has(p)||(o.add(p),c.push({pos:g,distance:d.distance+1}))}}return l}function Hd(e,t,n,r){const a=Zn(e,r);if(!a)return null;const s=t.filter(o=>{const c=n[o.heroId];return c!==void 0&&c>0});for(const o of s)if(Ar(a,o.position))return o;return null}function Ad(e,t,n,r,a){const s=Zn(e,a);if(!s)return null;const c=na(s,a).filter(f=>{if(n.some(p=>p.position.x===f.x&&p.position.y===f.y))return!1;for(const p of r){if(p.instanceId===e.instanceId)continue;const _=Zn(p,a);if(_&&_.x===f.x&&_.y===f.y)return!1}return!0});if(c.length===0)return null;let l=c[0],d=ts(l,t);for(const f of c){const g=ts(f,t);g<d&&(d=g,l=f)}return l}function Dd(e,t,n=Math.random){const r=Pc[e];if(!r)return{roll:1,attackBonus:0,total:1,targetAC:t,isHit:!1,damage:0,isCritical:!1};const a=mi(n),s=a+r.attackBonus,o=a===20||s>=t,c=a===20;return{roll:a,attackBonus:r.attackBonus,total:s,targetAC:t,isHit:o,damage:o?r.damage:0,isCritical:c}}function Rd(e,t,n,r,a,s,o=Math.random){const c=Hd(e,t,n,s);if(c){const f=r[c.heroId]??10,g=Dd(e.monsterId,f,o);return{type:"attack",targetId:c.heroId,result:g}}const l=Md(e,t,n,s);if(!l)return{type:"none"};const d=Ad(e,l.hero.position,t,a,s);return d?{type:"move",destination:d}:{type:"none"}}function zd(e,t,n){const r=n.tiles.find(s=>s.id===t);if(!r)return null;const a=Mn(r);return{x:e.x-a.minX,y:e.y-a.minY}}function jd(e,t){return Tn(e,t)?.id??null}function gi(e,t=Math.random){const n=[...e];for(let r=n.length-1;r>0;r--){const a=Math.floor(t()*(r+1));[n[r],n[a]]=[n[a],n[r]]}return n}function Od(e=Math.random){return{drawPile:gi([...zc],e),discardPile:[]}}function Nd(e,t=Math.random){if(e.drawPile.length===0){if(e.discardPile.length===0)return{encounterId:null,deck:e};const a=gi(e.discardPile,t);return{encounterId:a[0],deck:{drawPile:a.slice(1),discardPile:[]}}}const[n,...r]=e.drawPile;return{encounterId:n,deck:{drawPile:r,discardPile:e.discardPile}}}function Bd(e,t){return{drawPile:e.drawPile,discardPile:[...e.discardPile,t]}}function Ld(e){return Rc.find(t=>t.id===e)}function Fd(e){return!e.drewOnlyWhiteTilesThisTurn}function Ud(e){return e.xp>=ea}function qd(e,t,n){return{resources:{...t,xp:t.xp-ea},encounterDeck:{...n,discardPile:[...n.discardPile,e.id]}}}function _i(e,t){return{...e,currentHp:Math.max(0,e.currentHp-t)}}function Wd(e,t){return e.map(n=>_i(n,t))}function Yd(e,t,n){const r=e.effect;switch(r.type){case"damage":return r.target==="active-hero"?t.map(a=>a.heroId===n?_i(a,r.amount):a):Wd(t,r.amount);case"environment":return console.warn(`Environment effect '${e.name}' is not yet implemented`),t;case"curse":return console.warn(`Curse effect '${e.name}' is not yet implemented`),t;case"trap":return console.warn(`Trap effect '${e.name}' is not yet implemented`),t;case"hazard":return console.warn(`Hazard effect '${e.name}' is not yet implemented`),t;default:return t}}const Dr={currentHeroIndex:0,currentPhase:"hero-phase",turnNumber:1,exploredThisTurn:!1,drewOnlyWhiteTilesThisTurn:!1},Nn={actionsTaken:[],canMove:!0,canAttack:!0},Rr={monstersDefeated:0,monstersToDefeat:2,objective:"Defeat 2 monsters"},zr={xp:0,healingSurges:2},Vd={currentScreen:"character-select",heroTokens:[],turnState:{...Dr},validMoveSquares:[],showingMovement:!1,dungeon:Hr(),monsterDeck:{drawPile:[],discardPile:[]},monsters:[],monsterInstanceCounter:0,recentlySpawnedMonsterId:null,attackResult:null,attackTargetId:null,attackName:null,heroHp:[],monsterAttackResult:null,monsterAttackTargetId:null,monsterAttackerId:null,villainPhaseMonsterIndex:0,monsterMoveActionId:null,heroTurnActions:{...Nn},scenario:{...Rr},partyResources:{...zr},defeatedMonsterXp:null,defeatedMonsterName:null,leveledUpHeroId:null,levelUpOldStats:null,healingSurgeUsedHeroId:null,healingSurgeHpRestored:null,defeatReason:null,encounterDeck:{drawPile:[],discardPile:[]},drawnEncounter:null,showActionSurgePrompt:!1};function ns(e,t){const n=[...e.actionsTaken,t],r=n.filter(c=>c==="move").length,a=n.filter(c=>c==="attack").length,s=a===0,o=r<2&&!(r===1&&a===1);return{actionsTaken:n,canMove:o,canAttack:s}}function Xd(e){const{actionsTaken:t}=e,n=t.filter(a=>a==="move").length,r=t.filter(a=>a==="attack").length;return n>=1&&r>=1||n>=2}function Gd(e){let t=e;return()=>(t=t*1103515245+12345&2147483647,t/2147483647)}function Kd(e,t=Math.random){const n=[...e];for(let r=n.length-1;r>0;r--){const a=Math.floor(t()*(r+1));[n[r],n[a]]=[n[a],n[r]]}return n}const yi=ii({name:"game",initialState:Vd,reducers:{startGame:(e,t)=>{const{heroIds:n,positions:r,seed:a}=t.payload;if(n.length===0||n.length>5)return;const s=a??Date.now();e.randomSeed=s;let o;const c=Gd(s);r?o=r:o=Kd(Hc,c).slice(0,5),e.heroTokens=n.map((d,f)=>({heroId:d,position:o[f]})),e.turnState={...Dr},e.validMoveSquares=[],e.showingMovement=!1;const l=Hr();l.tileDeck=fd([...Ac],c),e.dungeon=l,e.monsterDeck=pd(c),e.monsters=[],e.monsterInstanceCounter=0,e.recentlySpawnedMonsterId=null,e.attackResult=null,e.attackTargetId=null,e.attackName=null,e.heroHp=n.map(d=>{const f=oi[d];f||console.warn(`Hero levels not found for ${d}, using defaults`);const g=f?.level1,p=it.find(M=>M.id===d),_=g?.hp??p?.hp??8,b=g?.ac??p?.ac??17,O=g?.surgeValue??4,k=g?.attackBonus??p?.attack?.attackBonus??6;return{heroId:d,currentHp:_,maxHp:_,level:1,ac:b,surgeValue:O,attackBonus:k}}),e.monsterAttackResult=null,e.monsterAttackTargetId=null,e.monsterAttackerId=null,e.villainPhaseMonsterIndex=0,e.heroTurnActions={...Nn},e.scenario={...Rr},e.partyResources={...zr},e.defeatedMonsterXp=null,e.defeatedMonsterName=null,e.leveledUpHeroId=null,e.levelUpOldStats=null,e.encounterDeck=Od(c),e.drawnEncounter=null,e.currentScreen="game-board"},setHeroPosition:(e,t)=>{const n=e.heroTokens.find(r=>r.heroId===t.payload.heroId);n&&(n.position=t.payload.position)},showMovement:(e,t)=>{if(e.turnState.currentPhase!=="hero-phase"||!e.heroTurnActions.canMove)return;const{heroId:n,speed:r}=t.payload,a=e.heroTokens.find(s=>s.heroId===n);a&&(e.validMoveSquares=rd(a.position,r,e.heroTokens,n,e.dungeon),e.showingMovement=!0)},hideMovement:e=>{e.validMoveSquares=[],e.showingMovement=!1},moveHero:(e,t)=>{const{heroId:n,position:r}=t.payload;if(e.turnState.currentPhase!=="hero-phase"||!e.heroTurnActions.canMove||!ad(r,e.validMoveSquares))return;const a=e.heroTokens.find(s=>s.heroId===n);a&&(a.position=r,e.validMoveSquares=[],e.showingMovement=!1,e.heroTurnActions=ns(e.heroTurnActions,"move"))},resetGame:e=>{e.currentScreen="character-select",e.heroTokens=[],e.turnState={...Dr},e.randomSeed=void 0,e.validMoveSquares=[],e.showingMovement=!1,e.dungeon=Hr(),e.monsterDeck={drawPile:[],discardPile:[]},e.monsters=[],e.monsterInstanceCounter=0,e.recentlySpawnedMonsterId=null,e.attackResult=null,e.attackTargetId=null,e.attackName=null,e.heroHp=[],e.monsterAttackResult=null,e.monsterAttackTargetId=null,e.monsterAttackerId=null,e.villainPhaseMonsterIndex=0,e.monsterMoveActionId=null,e.heroTurnActions={...Nn},e.scenario={...Rr},e.partyResources={...zr},e.defeatedMonsterXp=null,e.defeatedMonsterName=null,e.leveledUpHeroId=null,e.levelUpOldStats=null,e.healingSurgeUsedHeroId=null,e.healingSurgeHpRestored=null,e.defeatReason=null,e.encounterDeck={drawPile:[],discardPile:[]},e.drawnEncounter=null,e.showActionSurgePrompt=!1},endHeroPhase:e=>{if(e.turnState.currentPhase!=="hero-phase")return;e.validMoveSquares=[],e.showingMovement=!1,e.recentlySpawnedMonsterId=null,e.turnState.exploredThisTurn=!1,e.turnState.drewOnlyWhiteTilesThisTurn=!1;const t=e.heroTokens[e.turnState.currentHeroIndex];if(!t)return;const n=od(t,e.dungeon);if(n&&e.dungeon.tileDeck.length>0){const{drawnTile:r,remainingDeck:a}=vd(e.dungeon.tileDeck);if(r){const s=dd(n,r,e.dungeon);if(s){hi(r)?.isBlackTile??!0?e.turnState.drewOnlyWhiteTilesThisTurn=!1:e.turnState.exploredThisTurn||(e.turnState.drewOnlyWhiteTilesThisTurn=!0),e.turnState.exploredThisTurn=!0,e.dungeon=hd(e.dungeon,n,s),e.dungeon.tileDeck=a;const{monster:l,deck:d}=md(e.monsterDeck);if(l){const f=wd(),g=_d(l,f,t.heroId,s.id,e.monsterInstanceCounter);g&&(e.monsters.push(g),e.monsterInstanceCounter+=1,e.recentlySpawnedMonsterId=g.instanceId),e.monsterDeck=d}}}}e.turnState.currentPhase="exploration-phase"},endExplorationPhase:e=>{if(e.turnState.currentPhase==="exploration-phase"&&(e.turnState.currentPhase="villain-phase",e.villainPhaseMonsterIndex=0,e.monsterAttackResult=null,e.monsterAttackTargetId=null,e.monsterAttackerId=null,e.monsterMoveActionId=null,Fd(e.turnState))){const{encounterId:t,deck:n}=Nd(e.encounterDeck);if(e.encounterDeck=n,t){const r=Ld(t);r&&(e.drawnEncounter=r)}}},endVillainPhase:e=>{if(e.turnState.currentPhase!=="villain-phase")return;e.villainPhaseMonsterIndex=0,e.monsterAttackResult=null,e.monsterAttackTargetId=null,e.monsterAttackerId=null,e.monsterMoveActionId=null,e.drawnEncounter=null,e.healingSurgeUsedHeroId=null,e.healingSurgeHpRestored=null,e.showActionSurgePrompt=!1,e.turnState.currentHeroIndex=(e.turnState.currentHeroIndex+1)%e.heroTokens.length,e.turnState.currentHeroIndex===0&&(e.turnState.turnNumber+=1),e.turnState.currentPhase="hero-phase",e.heroTurnActions={...Nn};const t=e.heroTokens[e.turnState.currentHeroIndex]?.heroId;if(t){const n=e.heroHp.findIndex(r=>r.heroId===t);if(n!==-1){const r=e.heroHp[n];if(kd(r,e.partyResources)){const a=it.find(o=>o.id===t);a||console.warn(`Hero not found in AVAILABLE_HEROES for ID: ${t}`);const s=a?.name??"A hero";e.defeatReason=`${s} fell with no healing surges remaining.`,e.currentScreen="defeat";return}es(r,e.partyResources)&&(e.showActionSurgePrompt=!0)}}},dismissMonsterCard:e=>{e.recentlySpawnedMonsterId=null},dismissEncounterCard:e=>{if(e.drawnEncounter){const t=e.heroTokens[e.turnState.currentHeroIndex]?.heroId;t&&(e.heroHp=Yd(e.drawnEncounter,e.heroHp,t),e.heroHp.every(r=>r.currentHp<=0)&&(e.defeatReason=`The party was overwhelmed by ${e.drawnEncounter.name}.`,e.currentScreen="defeat")),e.encounterDeck=Bd(e.encounterDeck,e.drawnEncounter.id),e.drawnEncounter=null}},cancelEncounterCard:e=>{if(e.drawnEncounter&&Ud(e.partyResources)){const t=qd(e.drawnEncounter,e.partyResources,e.encounterDeck);e.partyResources=t.resources,e.encounterDeck=t.encounterDeck,e.drawnEncounter=null}},setAttackResult:(e,t)=>{if(e.turnState.currentPhase!=="hero-phase"||!e.heroTurnActions.canAttack)return;const{result:n,targetInstanceId:r,attackName:a}=t.payload;e.attackTargetId=r,e.attackName=a,e.defeatedMonsterXp=null,e.defeatedMonsterName=null,e.leveledUpHeroId=null,e.levelUpOldStats=null;const s=e.heroTokens[e.turnState.currentHeroIndex]?.heroId,o=e.heroHp.find(l=>l.heroId===s),c=n.isHit&&o?Id(o.level,n.roll,n.damage):n.damage;if(e.attackResult={...n,damage:c},n.isHit&&c>0){const l=e.monsters.find(d=>d.instanceId===r);if(l&&(l.currentHp-=c,l.currentHp<=0)){const d=aa(l.monsterId);d||console.warn(`Monster definition not found for ID: ${l.monsterId}`);const f=d?.xp??0;e.partyResources.xp+=f,e.defeatedMonsterXp=f,e.defeatedMonsterName=d?.name??l.monsterId,e.monsters=e.monsters.filter(g=>g.instanceId!==r),e.monsterDeck=gd(e.monsterDeck,l.monsterId),e.scenario.monstersDefeated+=1,e.scenario.monstersDefeated>=e.scenario.monstersToDefeat&&(e.currentScreen="victory")}}if(o&&s&&Td(o,n.roll,e.partyResources)){e.levelUpOldStats={...o};const l=Sd(o,e.partyResources),d=e.heroHp.findIndex(f=>f.heroId===s);d!==-1&&(e.heroHp[d]=l.heroState),e.partyResources=l.resources,e.leveledUpHeroId=s}e.heroTurnActions=ns(e.heroTurnActions,"attack")},dismissAttackResult:e=>{e.attackResult=null,e.attackTargetId=null,e.attackName=null},dismissDefeatNotification:e=>{e.defeatedMonsterXp=null,e.defeatedMonsterName=null},dismissLevelUpNotification:e=>{e.leveledUpHeroId=null,e.levelUpOldStats=null},setMonsters:(e,t)=>{e.monsters=t.payload},activateNextMonster:(e,t)=>{if(e.turnState.currentPhase!=="villain-phase")return;const n=e.heroTokens[e.turnState.currentHeroIndex]?.heroId;if(!n)return;const r=e.monsters.filter(d=>d.controllerId===n);if(e.villainPhaseMonsterIndex>=r.length)return;const a=r[e.villainPhaseMonsterIndex];if(!a)return;const s={},o={};for(const d of e.heroHp)s[d.heroId]=d.currentHp;for(const d of e.heroTokens){const f=it.find(g=>g.id===d.heroId);f&&(o[d.heroId]=f.ac)}const c=t.payload?.randomFn??Math.random,l=Rd(a,e.heroTokens,s,o,e.monsters,e.dungeon,c);if(l.type==="move"){const d=e.monsters.find(f=>f.instanceId===a.instanceId);if(d){const f=jd(l.destination,e.dungeon);if(f){const g=zd(l.destination,f,e.dungeon);g&&(d.position=g,d.tileId=f)}}e.monsterMoveActionId=a.instanceId}else if(l.type==="attack"&&(e.monsterAttackResult=l.result,e.monsterAttackTargetId=l.targetId,e.monsterAttackerId=a.instanceId,l.result.isHit&&l.result.damage>0)){const d=e.heroHp.find(f=>f.heroId===l.targetId);d&&(d.currentHp=Math.max(0,d.currentHp-l.result.damage),e.heroHp.every(g=>g.currentHp<=0)&&(e.currentScreen="defeat"))}e.villainPhaseMonsterIndex+=1},dismissMonsterAttackResult:e=>{e.monsterAttackResult=null,e.monsterAttackTargetId=null,e.monsterAttackerId=null},dismissMonsterMoveAction:e=>{e.monsterMoveActionId=null},dismissHealingSurgeNotification:e=>{e.healingSurgeUsedHeroId=null,e.healingSurgeHpRestored=null},useVoluntaryActionSurge:e=>{if(e.turnState.currentPhase!=="hero-phase"||!e.showActionSurgePrompt)return;const t=e.heroTokens[e.turnState.currentHeroIndex]?.heroId;if(!t)return;const n=e.heroHp.findIndex(s=>s.heroId===t);if(n===-1)return;const r=e.heroHp[n];if(!es(r,e.partyResources))return;const a=xd(r,e.partyResources);e.heroHp[n]=a.heroState,e.partyResources=a.resources,e.healingSurgeUsedHeroId=t,e.healingSurgeHpRestored=a.heroState.currentHp,e.showActionSurgePrompt=!1},skipActionSurge:e=>{if(!e.showActionSurgePrompt)return;const t=e.heroTokens[e.turnState.currentHeroIndex]?.heroId;if(t){const n=e.heroHp.find(r=>r.heroId===t);if(n&&n.currentHp===0){const a=it.find(s=>s.id===t)?.name??"A hero";e.defeatReason=`${a} chose not to use a healing surge while at 0 HP.`,e.currentScreen="defeat"}}e.showActionSurgePrompt=!1},setHeroHp:(e,t)=>{const{heroId:n,hp:r}=t.payload,a=e.heroHp.find(s=>s.heroId===n);a&&(a.currentHp=Math.max(0,r))},setPartyResources:(e,t)=>{const{xp:n,healingSurges:r}=t.payload;n!==void 0&&(e.partyResources.xp=n),r!==void 0&&(e.partyResources.healingSurges=r)}}}),{startGame:Qd,setHeroPosition:Yf,showMovement:rs,hideMovement:Zd,moveHero:Jd,resetGame:sa,endHeroPhase:as,endExplorationPhase:$d,endVillainPhase:ss,dismissMonsterCard:eu,dismissEncounterCard:tu,cancelEncounterCard:nu,setAttackResult:ru,dismissAttackResult:au,dismissDefeatNotification:su,setMonsters:Vf,activateNextMonster:iu,dismissMonsterAttackResult:ou,dismissMonsterMoveAction:lu,dismissHealingSurgeNotification:cu,setHeroHp:Xf,dismissLevelUpNotification:du,setPartyResources:Gf,useVoluntaryActionSurge:uu,skipActionSurge:fu}=yi.actions,vu=yi.reducer,V=gc({reducer:{heroes:Kc,game:vu}});typeof window<"u"&&(window.__REDUX_STORE__=V);function Me(e){const t="/Ashardalon/",n=e.startsWith("/")?e.slice(1):e;return(t.endsWith("/")?t:t+"/")+n}var hu=R('<span class="status-complete svelte-4rkta9">â Selection Complete</span>'),pu=R('<span class="status-incomplete svelte-4rkta9"> </span>'),mu=R("<span> </span>"),gu=R('<div class="card-stats svelte-4rkta9"><span> </span> <!></div>'),_u=R('<div class="power-card custom-ability svelte-4rkta9" data-testid="custom-ability-card"><div class="card-header svelte-4rkta9"><span class="card-name svelte-4rkta9"> </span> <span class="card-type svelte-4rkta9"> </span></div> <p class="card-description svelte-4rkta9"> </p> <p class="card-rule svelte-4rkta9"> </p> <!></div>'),yu=R('<button><div class="card-header svelte-4rkta9"><span class="card-name svelte-4rkta9"> </span> <span class="card-type svelte-4rkta9"> </span></div> <p class="card-description svelte-4rkta9"> </p> <p class="card-rule svelte-4rkta9"> </p></button>'),wu=R("<span> </span>"),ku=R('<div class="card-stats svelte-4rkta9"><span> </span> <!></div>'),xu=R('<button><div class="card-header svelte-4rkta9"><span class="card-name svelte-4rkta9"> </span> <span class="card-type svelte-4rkta9"> </span></div> <p class="card-description svelte-4rkta9"> </p> <p class="card-rule svelte-4rkta9"> </p> <!></button>'),bu=R("<span> </span>"),Tu=R('<div class="card-stats svelte-4rkta9"><span> </span> <!></div>'),Su=R('<button><div class="card-header svelte-4rkta9"><span class="card-name svelte-4rkta9"> </span> <span class="card-type svelte-4rkta9"> </span></div> <p class="card-description svelte-4rkta9"> </p> <p class="card-rule svelte-4rkta9"> </p> <!></button>'),Iu=R('<div class="power-card-selection svelte-4rkta9" data-testid="power-card-selection"><div class="modal-overlay svelte-4rkta9" role="button" tabindex="-1" aria-label="Close modal"></div> <div class="modal-content svelte-4rkta9"><div class="modal-header svelte-4rkta9"><h2 class="svelte-4rkta9"> </h2> <button class="close-button svelte-4rkta9" data-testid="close-power-selection">Ã</button></div> <div class="selection-status svelte-4rkta9" data-testid="selection-status"><!></div> <div class="card-sections svelte-4rkta9"><div class="card-section svelte-4rkta9"><h3 class="svelte-4rkta9">Custom Ability (Automatic)</h3> <div class="card-grid svelte-4rkta9"><!></div></div> <div class="card-section svelte-4rkta9"><h3 class="svelte-4rkta9">Utility Power (Select 1)</h3> <div class="card-grid svelte-4rkta9" data-testid="utility-cards"></div></div> <div class="card-section svelte-4rkta9"><h3 class="svelte-4rkta9">At-Will Powers (Select 2)</h3> <div class="card-grid svelte-4rkta9" data-testid="atwill-cards"></div></div> <div class="card-section svelte-4rkta9"><h3 class="svelte-4rkta9">Daily Power (Select 1)</h3> <div class="card-grid svelte-4rkta9" data-testid="daily-cards"></div></div></div> <div class="modal-footer svelte-4rkta9"><button class="done-button svelte-4rkta9" data-testid="done-power-selection">Done</button></div></div></div>');function Cu(e,t){Te(t,!0);const n=K(()=>jc(t.hero.heroClass)),r=K(()=>Oc(t.hero.heroClass)),a=K(()=>Nc(t.hero.heroClass)),s=K(()=>ui[t.hero.id]),o=K(()=>i(s)?Qn(i(s)):null),c=K(()=>t.selection.utility!==null&&t.selection.atWills.length===2&&t.selection.daily!==null);function l(T){V.dispatch(Wc({heroId:t.hero.id,cardId:T}))}function d(T){V.dispatch(Yc({heroId:t.hero.id,cardId:T}))}function f(T){V.dispatch(Vc({heroId:t.hero.id,cardId:T}))}function g(T){return t.selection.utility===T}function p(T){return t.selection.atWills.includes(T)}function _(T){return t.selection.daily===T}function b(T){return t.selection.atWills.includes(T)||t.selection.atWills.length<2}var O=Iu(),k=u(O);k.__click=function(...T){t.onClose?.apply(this,T)},k.__keydown=T=>T.key==="Escape"&&t.onClose();var M=v(k,2),H=u(M),C=u(H),I=u(C),z=v(C,2);z.__click=function(...T){t.onClose?.apply(this,T)};var j=v(H,2),U=u(j);{var F=T=>{var E=hu();S(T,E)},W=T=>{var E=pu(),Q=u(E);X(()=>w(Q,`Select: 1 Utility (${t.selection.utility?"â":"â"}), 
          2 At-Wills (${t.selection.atWills.length??""}/2), 
          1 Daily (${t.selection.daily?"â":"â"})`)),S(T,E)};q(U,T=>{i(c)?T(F):T(W,!1)})}var $=v(j,2),A=u($),te=v(u(A),2),ue=u(te);{var fe=T=>{var E=_u(),Q=u(E),ae=u(Q),de=u(ae),le=v(ae,2),ve=u(le),ye=v(Q,2),we=u(ye),ce=v(ye,2),ge=u(ce),ke=v(ce,2);{var Ne=lt=>{var ct=gu(),De=u(ct),tt=u(De),Be=v(De,2);{var _e=nt=>{var dt=mu(),Ye=u(dt);X(()=>w(Ye,`Damage: ${i(o).damage??""}`)),S(nt,dt)};q(Be,nt=>{i(o).damage!==void 0&&nt(_e)})}X(()=>w(tt,`Attack: +${i(o).attackBonus??""}`)),S(lt,ct)};q(ke,lt=>{i(o).attackBonus!==void 0&&lt(Ne)})}X(()=>{w(de,i(o).name),w(ve,i(o).type),w(we,i(o).description),w(ge,i(o).rule)}),S(T,E)};q(ue,T=>{i(o)&&T(fe)})}var Ie=v(A,2),Ae=v(u(Ie),2);Ue(Ae,21,()=>i(a),T=>T.id,(T,E)=>{var Q=yu();let ae;Q.__click=()=>l(i(E).id);var de=u(Q),le=u(de),ve=u(le),ye=v(le,2),we=u(ye),ce=v(de,2),ge=u(ce),ke=v(ce,2),Ne=u(ke);X(lt=>{ae=ze(Q,1,"power-card svelte-4rkta9",null,ae,lt),L(Q,"data-testid",`utility-card-${i(E).id??""}`),w(ve,i(E).name),w(we,i(E).type),w(ge,i(E).description),w(Ne,i(E).rule)},[()=>({selected:g(i(E).id)})]),S(T,Q)});var ie=v(Ie,2),re=v(u(ie),2);Ue(re,21,()=>i(n),T=>T.id,(T,E)=>{var Q=xu();let ae;Q.__click=()=>d(i(E).id);var de=u(Q),le=u(de),ve=u(le),ye=v(le,2),we=u(ye),ce=v(de,2),ge=u(ce),ke=v(ce,2),Ne=u(ke),lt=v(ke,2);{var ct=De=>{var tt=ku(),Be=u(tt),_e=u(Be),nt=v(Be,2);{var dt=Ye=>{var zt=wu(),fn=u(zt);X(()=>w(fn,`Damage: ${i(E).damage??""}`)),S(Ye,zt)};q(nt,Ye=>{i(E).damage!==void 0&&Ye(dt)})}X(()=>w(_e,`Attack: +${i(E).attackBonus??""}`)),S(De,tt)};q(lt,De=>{i(E).attackBonus!==void 0&&De(ct)})}X((De,tt)=>{ae=ze(Q,1,"power-card svelte-4rkta9",null,ae,De),Q.disabled=tt,L(Q,"data-testid",`atwill-card-${i(E).id??""}`),w(ve,i(E).name),w(we,i(E).type),w(ge,i(E).description),w(Ne,i(E).rule)},[()=>({selected:p(i(E).id),disabled:!b(i(E).id)}),()=>!b(i(E).id)]),S(T,Q)});var me=v(ie,2),N=v(u(me),2);Ue(N,21,()=>i(r),T=>T.id,(T,E)=>{var Q=Su();let ae;Q.__click=()=>f(i(E).id);var de=u(Q),le=u(de),ve=u(le),ye=v(le,2),we=u(ye),ce=v(de,2),ge=u(ce),ke=v(ce,2),Ne=u(ke),lt=v(ke,2);{var ct=De=>{var tt=Tu(),Be=u(tt),_e=u(Be),nt=v(Be,2);{var dt=Ye=>{var zt=bu(),fn=u(zt);X(()=>w(fn,`Damage: ${i(E).damage??""}`)),S(Ye,zt)};q(nt,Ye=>{i(E).damage!==void 0&&Ye(dt)})}X(()=>w(_e,`Attack: +${i(E).attackBonus??""}`)),S(De,tt)};q(lt,De=>{i(E).attackBonus!==void 0&&De(ct)})}X(De=>{ae=ze(Q,1,"power-card svelte-4rkta9",null,ae,De),L(Q,"data-testid",`daily-card-${i(E).id??""}`),w(ve,i(E).name),w(we,i(E).type),w(ge,i(E).description),w(Ne,i(E).rule)},[()=>({selected:_(i(E).id)})]),S(T,Q)});var P=v($,2),B=u(P);B.__click=function(...T){t.onClose?.apply(this,T)},X(()=>{w(I,`Select Power Cards for ${t.hero.name??""}`),B.disabled=!i(c)}),S(e,O),Se()}We(["click","keydown"]);var Eu=R('<button><img class="hero-image svelte-1rwnzlz"/> <div class="hero-info svelte-1rwnzlz"><span class="hero-name svelte-1rwnzlz" data-testid="hero-name"> </span> <span class="hero-class svelte-1rwnzlz"> </span></div></button>'),Pu=R('<button><img class="hero-image svelte-1rwnzlz"/> <div class="hero-info svelte-1rwnzlz"><span class="hero-name svelte-1rwnzlz" data-testid="hero-name"> </span> <span class="hero-class svelte-1rwnzlz"> </span></div></button>'),Mu=R('<span class="power-status complete svelte-1rwnzlz">â Powers Selected</span>'),Hu=R('<span class="power-status incomplete svelte-1rwnzlz">Select Powers</span>'),Au=R('<button><img class="selected-hero-image svelte-1rwnzlz"/> <div class="selected-hero-info svelte-1rwnzlz"><span class="selected-hero-name svelte-1rwnzlz"> </span> <!></div></button>'),Du=R('<div class="selected-heroes svelte-1rwnzlz" data-testid="selected-heroes-list"></div>'),Ru=R('<button><img class="hero-image svelte-1rwnzlz"/> <div class="hero-info svelte-1rwnzlz"><span class="hero-name svelte-1rwnzlz" data-testid="hero-name"> </span> <span class="hero-class svelte-1rwnzlz"> </span></div></button>'),zu=R('<button><img class="hero-image svelte-1rwnzlz"/> <div class="hero-info svelte-1rwnzlz"><span class="hero-name svelte-1rwnzlz" data-testid="hero-name"> </span> <span class="hero-class svelte-1rwnzlz"> </span></div></button>'),ju=R('<div class="character-select svelte-1rwnzlz" data-testid="character-select"><div class="edge-zone edge-top svelte-1rwnzlz" data-testid="edge-top"><div class="hero-row svelte-1rwnzlz" data-testid="hero-grid"></div></div> <div class="middle-section svelte-1rwnzlz"><div class="edge-zone edge-left svelte-1rwnzlz" data-testid="edge-left"><div class="hero-column svelte-1rwnzlz"></div></div> <div class="center-zone svelte-1rwnzlz" data-testid="center-zone"><h1 class="svelte-1rwnzlz">Select Your Heroes</h1> <p class="instructions svelte-1rwnzlz">Choose 1-5 heroes for your adventure</p> <p class="instructions svelte-1rwnzlz">Tap a hero from your edge of the table</p> <div class="selection-info svelte-1rwnzlz"><span data-testid="selected-count"> </span></div> <!> <button class="start-button svelte-1rwnzlz" data-testid="start-game-button">Start Adventure</button></div> <div class="edge-zone edge-right svelte-1rwnzlz" data-testid="edge-right"><div class="hero-column svelte-1rwnzlz"></div></div></div> <div class="edge-zone edge-bottom svelte-1rwnzlz" data-testid="edge-bottom"><div class="hero-row svelte-1rwnzlz"></div></div></div> <!>',1);function Ou(e,t){Te(t,!0);let n=Y(pe([])),r=Y(pe([])),a=Y(pe({})),s=Y(pe({})),o=Y(null);It(()=>{const N=V.subscribe(()=>{const B=V.getState();x(n,B.heroes.selectedHeroes,!0),x(r,B.heroes.availableHeroes,!0),x(a,B.heroes.heroEdgeMap,!0),x(s,B.heroes.powerCardSelections,!0)}),P=V.getState();return x(n,P.heroes.selectedHeroes,!0),x(r,P.heroes.availableHeroes,!0),x(a,P.heroes.heroEdgeMap,!0),x(s,P.heroes.powerCardSelections,!0),N});function c(N,P){return i(a)[N]===P}function l(N,P){const B=i(a)[N];return B!==void 0&&B!==P}function d(N,P){V.dispatch(qc({heroId:N,edge:P}))}function f(){i(n).length>0&&p()&&(V.dispatch(Xc()),V.dispatch(Qd({heroIds:i(n).map(N=>N.id)})))}function g(N){const P=i(s)[N];return P?P.utility!==null&&P.atWills.length===2&&P.daily!==null:!1}function p(){return i(n).every(N=>g(N.id))}function _(){return i(n).length>=1&&i(n).length<=5&&p()}function b(N){x(o,N,!0)}function O(){x(o,null)}var k=ju(),M=be(k),H=u(M),C=u(H);Ue(C,21,()=>i(r),N=>N.id,(N,P)=>{var B=Eu();let T;B.__click=()=>d(i(P).id,"top");var E=u(B),Q=v(E,2),ae=u(Q),de=u(ae),le=v(ae,2),ve=u(le);X((ye,we,ce)=>{T=ze(B,1,"hero-card svelte-1rwnzlz",null,T,ye),L(B,"data-testid",`hero-${i(P).id??""}-top`),B.disabled=we,L(E,"src",ce),L(E,"alt",i(P).name),w(de,i(P).name),w(ve,i(P).heroClass)},[()=>({selected:c(i(P).id,"top"),unavailable:l(i(P).id,"top")}),()=>l(i(P).id,"top"),()=>Me(i(P).imagePath)]),S(N,B)});var I=v(H,2),z=u(I),j=u(z);Ue(j,21,()=>i(r),N=>N.id,(N,P)=>{var B=Pu();let T;B.__click=()=>d(i(P).id,"left");var E=u(B),Q=v(E,2),ae=u(Q),de=u(ae),le=v(ae,2),ve=u(le);X((ye,we,ce)=>{T=ze(B,1,"hero-card svelte-1rwnzlz",null,T,ye),L(B,"data-testid",`hero-${i(P).id??""}-left`),B.disabled=we,L(E,"src",ce),L(E,"alt",i(P).name),w(de,i(P).name),w(ve,i(P).heroClass)},[()=>({selected:c(i(P).id,"left"),unavailable:l(i(P).id,"left")}),()=>l(i(P).id,"left"),()=>Me(i(P).imagePath)]),S(N,B)});var U=v(z,2),F=v(u(U),6),W=u(F),$=u(W),A=v(F,2);{var te=N=>{var P=Du();Ue(P,21,()=>i(n),B=>B.id,(B,T)=>{var E=Au();let Q;E.__click=()=>b(i(T));var ae=u(E),de=v(ae,2),le=u(de),ve=u(le),ye=v(le,2);{var we=ge=>{var ke=Mu();S(ge,ke)},ce=ge=>{var ke=Hu();S(ge,ke)};q(ye,ge=>{g(i(T).id)?ge(we):ge(ce,!1)})}X((ge,ke)=>{Q=ze(E,1,"selected-hero-item svelte-1rwnzlz",null,Q,ge),L(E,"data-testid",`select-powers-${i(T).id??""}`),L(ae,"src",ke),L(ae,"alt",i(T).name),w(ve,i(T).name)},[()=>({complete:g(i(T).id)}),()=>Me(i(T).imagePath)]),S(B,E)}),S(N,P)};q(A,N=>{i(n).length>0&&N(te)})}var ue=v(A,2);ue.__click=f;var fe=v(U,2),Ie=u(fe);Ue(Ie,21,()=>i(r),N=>N.id,(N,P)=>{var B=Ru();let T;B.__click=()=>d(i(P).id,"right");var E=u(B),Q=v(E,2),ae=u(Q),de=u(ae),le=v(ae,2),ve=u(le);X((ye,we,ce)=>{T=ze(B,1,"hero-card svelte-1rwnzlz",null,T,ye),L(B,"data-testid",`hero-${i(P).id??""}-right`),B.disabled=we,L(E,"src",ce),L(E,"alt",i(P).name),w(de,i(P).name),w(ve,i(P).heroClass)},[()=>({selected:c(i(P).id,"right"),unavailable:l(i(P).id,"right")}),()=>l(i(P).id,"right"),()=>Me(i(P).imagePath)]),S(N,B)});var Ae=v(I,2),ie=u(Ae);Ue(ie,21,()=>i(r),N=>N.id,(N,P)=>{var B=zu();let T;B.__click=()=>d(i(P).id,"bottom");var E=u(B),Q=v(E,2),ae=u(Q),de=u(ae),le=v(ae,2),ve=u(le);X((ye,we,ce)=>{T=ze(B,1,"hero-card svelte-1rwnzlz",null,T,ye),L(B,"data-testid",`hero-${i(P).id??""}`),B.disabled=we,L(E,"src",ce),L(E,"alt",i(P).name),w(de,i(P).name),w(ve,i(P).heroClass)},[()=>({selected:c(i(P).id,"bottom"),unavailable:l(i(P).id,"bottom")}),()=>l(i(P).id,"bottom"),()=>Me(i(P).imagePath)]),S(N,B)});var re=v(M,2);{var me=N=>{Cu(N,{get hero(){return i(o)},get selection(){return i(s)[i(o).id]},onClose:O})};q(re,N=>{i(o)&&N(me)})}X(N=>{w($,`${i(n).length??""} heroes selected`),ue.disabled=N},[()=>!_()]),S(e,k),Se()}We(["click"]);var Nu=R('<button class="move-square svelte-ehd1hj" data-testid="move-square"><span class="sr-only svelte-ehd1hj"> </span></button>'),Bu=R('<div class="movement-overlay svelte-ehd1hj" data-testid="movement-overlay"></div>');function Lu(e,t){Te(t,!0);function n(s){const o=t.tileOffsetX+s.x*t.cellSize,c=t.tileOffsetY+s.y*t.cellSize;return`left: ${o}px; top: ${c}px; width: ${t.cellSize}px; height: ${t.cellSize}px;`}function r(s,o){s.stopPropagation(),t.onSquareClick(o)}var a=Bu();Ue(a,21,()=>t.validMoveSquares,s=>`${s.x},${s.y}`,(s,o)=>{var c=Nu();c.__click=f=>r(f,i(o));var l=u(c),d=u(l);X(f=>{L(c,"data-position-x",i(o).x),L(c,"data-position-y",i(o).y),Ot(c,f),w(d,`Move to (${i(o).x??""}, ${i(o).y??""})`)},[()=>n(i(o))]),S(s,c)}),S(e,a),Se()}We(["click"]);var Fu=R('<div class="tile-deck-counter svelte-9649r" data-testid="tile-deck-counter"><span class="deck-icon svelte-9649r">ð¦</span> <span class="deck-count svelte-9649r" data-testid="tile-deck-count"> </span> <span class="deck-label svelte-9649r">tiles</span></div>');function Uu(e,t){var n=Fu(),r=v(u(n),2),a=u(r);X(()=>w(a,t.tileCount)),S(e,n)}var qu=R('<div class="unexplored-edge svelte-12eown4" data-testid="unexplored-edge"><span class="question-mark svelte-12eown4">?</span></div>');function Wu(e,t){Te(t,!0);const r=(()=>{const c=t.cellSize*1.5,l=36;switch(t.direction){case"north":return{left:`${t.tileWidth/2-c/2}px`,top:`${l-8/2}px`,width:`${c}px`,height:"8px"};case"south":return{left:`${t.tileWidth/2-c/2}px`,bottom:`${l-8/2}px`,width:`${c}px`,height:"8px"};case"east":return{right:`${l-8/2}px`,top:`${t.tileHeight/2-c/2}px`,width:"8px",height:`${c}px`};case"west":return{left:`${l-8/2}px`,top:`${t.tileHeight/2-c/2}px`,width:"8px",height:`${c}px`}}})(),a=Object.entries(r).map(([o,c])=>`${o}: ${c}`).join("; ");var s=qu();X(()=>{L(s,"data-direction",t.direction),Ot(s,a)}),S(e,s),Se()}var Yu=R('<div class="monster-token svelte-1g5ysl" data-testid="monster-token"><img class="token-image svelte-1g5ysl"/> <span class="token-label svelte-1g5ysl"> </span></div>');function Vu(e,t){Te(t,!0);const n=K(()=>Pn.find(c=>c.id===t.monster.monsterId)),r=K(()=>()=>{const c=t.cellSize/2,l=t.tilePixelOffset.x+t.tileOffsetX+t.monster.position.x*t.cellSize+c,d=t.tilePixelOffset.y+t.tileOffsetY+t.monster.position.y*t.cellSize+c;return`left: ${l}px; top: ${d}px;`});var a=Ee(),s=be(a);{var o=c=>{var l=Yu(),d=u(l),f=v(d,2),g=u(f);X((p,_)=>{L(l,"data-monster-id",t.monster.instanceId),Ot(l,p),L(d,"src",_),L(d,"alt",i(n).name),w(g,i(n).name)},[()=>i(r)(),()=>Me(i(n).imagePath)]),S(c,l)};q(s,c=>{i(n)&&c(o)})}S(e,a),Se()}var Xu=R('<div class="monster-card-overlay svelte-at5lsg" role="dialog" aria-modal="true" aria-label="Monster spawned" tabindex="0" data-testid="monster-card-overlay"><div class="monster-card svelte-at5lsg" role="article" data-testid="monster-card"><div class="card-header svelte-at5lsg"><h3 class="monster-name svelte-at5lsg" data-testid="monster-name"> </h3> <button class="dismiss-button svelte-at5lsg" aria-label="Dismiss monster card" data-testid="dismiss-monster-card">â</button></div> <div class="card-image svelte-at5lsg"><img class="monster-image svelte-at5lsg"/></div> <div class="card-stats svelte-at5lsg"><div class="stat svelte-at5lsg"><span class="stat-label svelte-at5lsg">AC</span> <span class="stat-value svelte-at5lsg" data-testid="monster-ac"> </span></div> <div class="stat svelte-at5lsg"><span class="stat-label svelte-at5lsg">HP</span> <span class="stat-value svelte-at5lsg" data-testid="monster-hp"> </span></div> <div class="stat svelte-at5lsg"><span class="stat-label svelte-at5lsg">XP</span> <span class="stat-value svelte-at5lsg" data-testid="monster-xp"> </span></div></div> <p class="card-hint svelte-at5lsg">Click anywhere to dismiss</p></div></div>');function Gu(e,t){Te(t,!0);const n=K(()=>Pn.find(l=>l.id===t.monsterId));function r(){t.onDismiss&&t.onDismiss()}function a(l){(l.key==="Escape"||l.key==="Enter"||l.key===" ")&&(l.preventDefault(),r())}var s=Ee(),o=be(s);{var c=l=>{var d=Xu();d.__click=r,d.__keydown=a;var f=u(d);f.__click=A=>A.stopPropagation(),f.__keydown=A=>A.stopPropagation();var g=u(f),p=u(g),_=u(p),b=v(p,2);b.__click=r;var O=v(g,2),k=u(O),M=v(O,2),H=u(M),C=v(u(H),2),I=u(C),z=v(H,2),j=v(u(z),2),U=u(j),F=v(z,2),W=v(u(F),2),$=u(W);X(A=>{w(_,i(n).name),L(k,"src",A),L(k,"alt",i(n).name),w(I,i(n).ac),w(U,i(n).hp),w($,i(n).xp)},[()=>Me(i(n).imagePath)]),S(l,d)};q(o,l=>{i(n)&&l(c)})}S(e,s),Se()}We(["click","keydown"]);var Ku=R('<div class="encounter-card-overlay svelte-1i2wtj7" role="dialog" aria-modal="true" aria-label="Encounter card drawn" tabindex="0" data-testid="encounter-card-overlay"><div class="encounter-card svelte-1i2wtj7" role="article" data-testid="encounter-card"><div class="card-header svelte-1i2wtj7"><span class="type-badge svelte-1i2wtj7" data-testid="encounter-type"> </span> <button class="dismiss-button svelte-1i2wtj7" aria-label="Dismiss encounter card" data-testid="dismiss-encounter-card">â</button></div> <h3 class="encounter-name svelte-1i2wtj7" data-testid="encounter-name"> </h3> <div class="card-image svelte-1i2wtj7"><img class="encounter-image svelte-1i2wtj7"/></div> <div class="card-description svelte-1i2wtj7" data-testid="encounter-description"> </div> <div class="effect-summary svelte-1i2wtj7" data-testid="encounter-effect"><span class="effect-label svelte-1i2wtj7">Effect:</span> <span class="effect-value svelte-1i2wtj7"> </span></div> <div class="button-row svelte-1i2wtj7"><button class="cancel-button svelte-1i2wtj7" data-testid="encounter-cancel">Cancel (5 XP)</button> <button class="accept-button svelte-1i2wtj7" data-testid="encounter-continue">Accept</button></div> <p class="card-hint svelte-1i2wtj7">Press Enter to accept or use buttons above</p></div></div>');function Qu(e,t){Te(t,!0);let n=Fl(t,"partyXp",3,0),r=K(()=>n()>=ea);function a(){t.onDismiss&&t.onDismiss()}function s(){t.onCancel&&i(r)&&t.onCancel()}function o(A){(A.key==="Escape"||A.key==="Enter"||A.key===" ")&&(A.preventDefault(),a())}function c(A){switch(A){case"event":return"â¡";case"trap":return"â ï¸";case"hazard":return"â ï¸";case"curse":return"ð®";case"environment":return"ð«ï¸";default:return"â"}}function l(A){switch(A.type){case"damage":return A.target==="active-hero"?`Active hero takes ${A.amount} damage`:`All heroes take ${A.amount} damage`;case"environment":return"Environment effect (not implemented)";case"curse":return`Curse (${A.duration} turns) (not implemented)`;case"trap":return`Trap - DC ${A.disableDC} to disable (not implemented)`;case"hazard":return`Hazard - AC ${A.ac}, ${A.damage} damage (not implemented)`;default:return"Unknown effect"}}var d=Ku();d.__click=a,d.__keydown=o;var f=u(d);f.__click=A=>A.stopPropagation(),f.__keydown=A=>A.stopPropagation();var g=u(f),p=u(g),_=u(p),b=v(p,2);b.__click=a;var O=v(g,2),k=u(O),M=v(O,2),H=u(M),C=v(M,2),I=u(C),z=v(C,2),j=v(u(z),2),U=u(j),F=v(z,2),W=u(F);W.__click=s;var $=v(W,2);$.__click=a,X((A,te,ue,fe)=>{w(_,`${A??""} ${te??""}`),w(k,t.encounter.name),L(H,"src",ue),L(H,"alt",t.encounter.name),w(I,t.encounter.description),w(U,fe),W.disabled=!i(r),L(W,"title",i(r)?"Spend 5 XP to cancel this encounter":"Not enough XP (need 5)")},[()=>c(t.encounter.type),()=>t.encounter.type.toUpperCase(),()=>Me(t.encounter.imagePath),()=>l(t.encounter.effect)]),Il("error",H,A=>{const te=A.target;te&&t.encounter&&(te.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100"><rect fill="%23333" width="100" height="100"/><text x="50" y="50" fill="%23fff" text-anchor="middle" dominant-baseline="central" font-size="40">'+c(t.encounter.type)+"</text></svg>")}),S(e,d),Se()}We(["click","keydown"]);var Zu=R('<button><div class="card-header svelte-77qxlp"><span class="card-name svelte-77qxlp"> </span> <span class="card-type-badge svelte-77qxlp"> </span></div> <div class="card-stats svelte-77qxlp"><span class="attack-bonus svelte-77qxlp"> </span> <span class="damage svelte-77qxlp"> </span></div></button>'),Ju=R('<button class="attack-button svelte-77qxlp"> </button>'),$u=R('<div class="target-selection svelte-77qxlp" data-testid="target-selection"><div class="target-header svelte-77qxlp"><span> </span></div> <div class="target-list svelte-77qxlp"></div></div>'),ef=R('<div class="select-card-hint svelte-77qxlp" data-testid="select-card-hint">Select a power card above to attack</div>'),tf=R('<div class="power-card-attack-panel svelte-77qxlp" data-testid="power-card-attack-panel"><div class="panel-header svelte-77qxlp"><span class="panel-title svelte-77qxlp">Select Attack Power</span></div> <div class="card-list svelte-77qxlp" data-testid="attack-card-list"></div> <!></div>');function nf(e,t){Te(t,!0);let n=Y(null);const r=K(()=>()=>{const p=[];for(const _ of t.heroPowerCards.cardStates){if(_.isFlipped)continue;const b=Qn(_.cardId);b&&b.attackBonus!==void 0&&p.push({card:b,state:_})}return p});function a(p){return Pn.find(b=>b.id===p)?.name||"Unknown"}function s(p){x(n,i(n)===p?null:p,!0)}function o(p){i(n)!==null&&(t.onAttackWithCard(i(n),p),x(n,null))}function c(p){switch(p){case"at-will":return"At-Will";case"daily":return"Daily";case"utility":return"Utility";default:return p}}function l(p){switch(p){case"at-will":return"card-atwill";case"daily":return"card-daily";case"utility":return"card-utility";default:return""}}var d=Ee(),f=be(d);{var g=p=>{var _=tf(),b=v(u(_),2);Ue(b,21,()=>i(r)(),({card:H,state:C})=>H.id,(H,C)=>{let I=()=>i(C).card;var z=Zu();let j;z.__click=()=>s(I().id);var U=u(z),F=u(U),W=u(F),$=v(F,2),A=u($),te=v(U,2),ue=u(te),fe=u(ue),Ie=v(ue,2),Ae=u(Ie);X((ie,re)=>{j=ze(z,1,`power-card-option ${ie??""}`,"svelte-77qxlp",j,{selected:i(n)===I().id}),L(z,"data-testid",`attack-card-${I().id??""}`),L(z,"data-card-type",I().type),w(W,I().name),w(A,re),w(fe,`+${I().attackBonus??""}`),w(Ae,`${I().damage??""} dmg`)},[()=>l(I().type),()=>c(I().type)]),S(H,z)});var O=v(b,2);{var k=H=>{const C=K(()=>Qn(i(n)));var I=$u(),z=u(I),j=u(z),U=u(j),F=v(z,2);Ue(F,21,()=>t.adjacentMonsters,W=>W.instanceId,(W,$)=>{var A=Ju();A.__click=()=>o(i($).instanceId);var te=u(A);X((ue,fe)=>{L(A,"data-testid",`attack-target-${i($).instanceId??""}`),L(A,"aria-label",`Attack ${ue??""} with ${i(C)?.name??""}`),w(te,`Attack ${fe??""}`)},[()=>a(i($).monsterId),()=>a(i($).monsterId)]),S(W,A)}),X(()=>w(U,`Attack with ${i(C)?.name??""}`)),S(H,I)},M=H=>{var C=ef();S(H,C)};q(O,H=>{i(n)!==null?H(k):H(M,!1)})}S(p,_)};q(f,p=>{t.adjacentMonsters.length>0&&i(r)().length>0&&p(g)})}S(e,d),Se()}We(["click"]);var rf=R('<span class="result-text critical svelte-1jt2qdd" data-testid="result-text">âï¸ CRITICAL HIT!</span>'),af=R('<span class="result-text hit svelte-1jt2qdd" data-testid="result-text">â HIT!</span>'),sf=R('<span class="result-text miss svelte-1jt2qdd" data-testid="result-text">â MISS!</span>'),of=R('<div class="damage-info svelte-1jt2qdd" data-testid="damage-info"><span class="damage-value svelte-1jt2qdd"> </span> <span class="damage-label svelte-1jt2qdd"> </span></div>'),lf=R('<div class="combat-result-overlay svelte-1jt2qdd" role="dialog" aria-modal="true" aria-label="Combat result" tabindex="0" data-testid="combat-result-overlay"><div role="document" data-testid="combat-result"><div class="result-header svelte-1jt2qdd"><h3 class="attacker-info svelte-1jt2qdd" data-testid="attacker-info"> </h3> <button class="dismiss-button svelte-1jt2qdd" aria-label="Dismiss combat result" data-testid="dismiss-combat-result">â</button></div> <div class="dice-roll-section svelte-1jt2qdd"><div class="dice-container svelte-1jt2qdd"><span class="d20-icon svelte-1jt2qdd" aria-label="D20 die">D20</span> <span class="roll-value svelte-1jt2qdd" data-testid="roll-value"> </span></div> <div class="roll-breakdown svelte-1jt2qdd"><div class="breakdown-row svelte-1jt2qdd"><span class="breakdown-label svelte-1jt2qdd">Roll:</span> <span class="breakdown-value svelte-1jt2qdd" data-testid="dice-roll"> </span></div> <div class="breakdown-row svelte-1jt2qdd"><span class="breakdown-label svelte-1jt2qdd">+ Bonus:</span> <span class="breakdown-value svelte-1jt2qdd" data-testid="attack-bonus"> </span></div> <div class="breakdown-divider svelte-1jt2qdd"></div> <div class="breakdown-row total svelte-1jt2qdd"><span class="breakdown-label svelte-1jt2qdd">Total:</span> <span class="breakdown-value svelte-1jt2qdd" data-testid="attack-total"> </span></div> <div class="breakdown-row target svelte-1jt2qdd"><span class="breakdown-label svelte-1jt2qdd">vs AC:</span> <span class="breakdown-value svelte-1jt2qdd" data-testid="target-ac"> </span></div></div></div> <div class="result-section svelte-1jt2qdd"><!> <!></div> <p class="dismiss-hint svelte-1jt2qdd">Click anywhere to dismiss</p></div></div>');function is(e,t){Te(t,!0);function n(){t.onDismiss&&t.onDismiss()}function r(re){(re.key==="Escape"||re.key==="Enter"||re.key===" ")&&(re.preventDefault(),n())}var a=lf();a.__click=n,a.__keydown=r;var s=u(a);let o;s.__click=re=>re.stopPropagation(),s.__keydown=re=>re.stopPropagation();var c=u(s),l=u(c),d=u(l),f=v(l,2);f.__click=n;var g=v(c,2),p=u(g),_=v(u(p),2),b=u(_),O=v(p,2),k=u(O),M=v(u(k),2),H=u(M),C=v(k,2),I=v(u(C),2),z=u(I),j=v(C,4),U=v(u(j),2),F=u(U),W=v(j,2),$=v(u(W),2),A=u($),te=v(g,2),ue=u(te);{var fe=re=>{var me=rf();S(re,me)},Ie=re=>{var me=Ee(),N=be(me);{var P=T=>{var E=af();S(T,E)},B=T=>{var E=sf();S(T,E)};q(N,T=>{t.result.isHit?T(P):T(B,!1)},!0)}S(re,me)};q(ue,re=>{t.result.isCritical?re(fe):re(Ie,!1)})}var Ae=v(ue,2);{var ie=re=>{var me=of(),N=u(me),P=u(N),B=v(N,2),T=u(B);X(()=>{w(P,t.result.damage),w(T,`damage to ${t.targetName??""}`)}),S(re,me)};q(Ae,re=>{t.result.isHit&&re(ie)})}X(()=>{o=ze(s,1,"combat-result svelte-1jt2qdd",null,o,{hit:t.result.isHit,miss:!t.result.isHit,critical:t.result.isCritical}),w(d,`${t.attackerName??""} attacks with ${t.attackName??""}!`),w(b,t.result.roll),w(H,t.result.roll),w(z,t.result.attackBonus),w(F,t.result.total),w(A,t.result.targetAC)}),S(e,a),Se()}We(["click","keydown"]);var cf=R('<div class="monster-move-overlay svelte-18np0et" role="dialog" aria-modal="true" aria-label="Monster move result" tabindex="0" data-testid="monster-move-overlay"><div class="monster-move-card svelte-18np0et" role="document" data-testid="monster-move-card"><div class="move-header svelte-18np0et"><h3 class="monster-name svelte-18np0et" data-testid="monster-name"> </h3> <button class="dismiss-button svelte-18np0et" aria-label="Dismiss monster move result" data-testid="dismiss-monster-move">â</button></div> <div class="move-content svelte-18np0et"><span class="move-icon svelte-18np0et">ð</span> <p class="move-text svelte-18np0et" data-testid="move-text">Moved but could not attack</p></div> <p class="dismiss-hint svelte-18np0et">Click anywhere to continue</p></div></div>');function df(e,t){Te(t,!0);function n(){t.onDismiss&&t.onDismiss()}function r(f){(f.key==="Escape"||f.key==="Enter"||f.key===" ")&&(f.preventDefault(),n())}var a=cf();a.__click=n,a.__keydown=r;var s=u(a);s.__click=f=>f.stopPropagation(),s.__keydown=f=>f.stopPropagation();var o=u(s),c=u(o),l=u(c),d=v(c,2);d.__click=n,X(()=>w(l,t.monsterName)),S(e,a),Se()}We(["click","keydown"]);var uf=R('<div class="xp-counter svelte-1ymh8ps" data-testid="xp-counter"><span class="xp-icon svelte-1ymh8ps" aria-label="Experience Points">â­</span> <span class="xp-label svelte-1ymh8ps">XP:</span> <span class="xp-value svelte-1ymh8ps" data-testid="xp-value"> </span></div>');function ff(e,t){var n=uf(),r=v(u(n),4),a=u(r);X(()=>w(a,t.xp)),S(e,n)}var vf=R('<div class="healing-surge-counter svelte-121e3gw" data-testid="healing-surge-counter"><span class="surge-icon svelte-121e3gw" aria-label="Healing Surges">â¤ï¸</span> <span class="surge-label svelte-121e3gw">Surges:</span> <span class="surge-value svelte-121e3gw" data-testid="surge-value"> </span></div>');function hf(e,t){var n=vf(),r=v(u(n),4),a=u(r);X(()=>w(a,t.surges)),S(e,n)}var pf=R('<div class="defeat-overlay svelte-1h38uhv" role="dialog" aria-modal="true" aria-label="Monster defeated notification" tabindex="0" data-testid="defeat-notification-overlay"><div class="defeat-notification svelte-1h38uhv" role="dialog" aria-labelledby="defeat-title" tabindex="-1" data-testid="defeat-notification"><div class="defeat-header svelte-1h38uhv"><span class="defeat-icon svelte-1h38uhv">ð</span> <h3 class="defeat-title svelte-1h38uhv" id="defeat-title" data-testid="defeat-title"> </h3> <button class="dismiss-button svelte-1h38uhv" aria-label="Dismiss notification" data-testid="dismiss-defeat-notification">â</button></div> <div class="xp-gain-section svelte-1h38uhv" data-testid="xp-gain-section"><span class="xp-icon svelte-1h38uhv">â­</span> <span class="xp-amount svelte-1h38uhv" data-testid="xp-amount"> </span></div> <p class="dismiss-hint svelte-1h38uhv">Click anywhere to dismiss</p></div></div>');function mf(e,t){Te(t,!0);function n(){t.onDismiss&&t.onDismiss()}function r(_){(_.key==="Escape"||_.key==="Enter"||_.key===" ")&&(_.preventDefault(),n())}var a=pf();a.__click=n,a.__keydown=r;var s=u(a);s.__click=_=>_.stopPropagation(),s.__keydown=_=>_.stopPropagation();var o=u(s),c=v(u(o),2),l=u(c),d=v(c,2);d.__click=n;var f=v(o,2),g=v(u(f),2),p=u(g);X(()=>{w(l,`${t.monsterName??""} Defeated!`),w(p,`+${t.xpGained??""} XP`)}),S(e,a),Se()}We(["click","keydown"]);var gf=R('<div class="hero-section svelte-da0ogt"><img class="hero-avatar svelte-da0ogt"/> <div class="hero-level-info svelte-da0ogt"><span class="hero-name svelte-da0ogt" data-testid="level-up-hero-name"> </span> <span class="level-badge svelte-da0ogt" data-testid="level-badge"> </span></div></div>'),_f=R('<div class="level-up-overlay svelte-da0ogt" role="dialog" aria-modal="true" aria-label="Level up notification" tabindex="0" data-testid="level-up-overlay"><div class="level-up-notification svelte-da0ogt" role="dialog" aria-labelledby="level-up-title" tabindex="-1" data-testid="level-up-notification"><div class="level-up-header svelte-da0ogt"><span class="level-up-icon svelte-da0ogt">â¨</span> <h3 class="level-up-title svelte-da0ogt" id="level-up-title" data-testid="level-up-title">LEVEL UP!</h3> <span class="level-up-icon svelte-da0ogt">â¨</span> <button class="dismiss-button svelte-da0ogt" aria-label="Dismiss notification" data-testid="dismiss-level-up">â</button></div> <!> <div class="stats-section svelte-da0ogt" data-testid="stats-section"><div class="stat-change svelte-da0ogt"><span class="stat-label svelte-da0ogt">HP</span> <span class="stat-old svelte-da0ogt" data-testid="old-hp"> </span> <span class="stat-arrow svelte-da0ogt">â</span> <span class="stat-new svelte-da0ogt" data-testid="new-hp"> </span></div> <div class="stat-change svelte-da0ogt"><span class="stat-label svelte-da0ogt">AC</span> <span class="stat-old svelte-da0ogt" data-testid="old-ac"> </span> <span class="stat-arrow svelte-da0ogt">â</span> <span class="stat-new svelte-da0ogt" data-testid="new-ac"> </span></div> <div class="stat-change svelte-da0ogt"><span class="stat-label svelte-da0ogt">Surge</span> <span class="stat-old svelte-da0ogt" data-testid="old-surge"> </span> <span class="stat-arrow svelte-da0ogt">â</span> <span class="stat-new svelte-da0ogt" data-testid="new-surge"> </span></div> <div class="stat-change svelte-da0ogt"><span class="stat-label svelte-da0ogt">Attack</span> <span class="stat-old svelte-da0ogt" data-testid="old-attack"> </span> <span class="stat-arrow svelte-da0ogt">â</span> <span class="stat-new svelte-da0ogt" data-testid="new-attack"> </span></div></div> <div class="xp-spent-section svelte-da0ogt" data-testid="xp-spent-section"><span class="xp-icon svelte-da0ogt">â­</span> <span class="xp-text svelte-da0ogt">5 XP spent</span></div> <div class="critical-bonus-section svelte-da0ogt" data-testid="critical-bonus"><span class="bonus-text svelte-da0ogt">âï¸ Critical attacks now deal +1 damage!</span></div> <button class="continue-button svelte-da0ogt" data-testid="continue-button">Continue</button> <p class="dismiss-hint svelte-da0ogt">Click anywhere to dismiss</p></div></div>');function yf(e,t){Te(t,!0);const n=it.find(ie=>ie.id===t.heroId);function r(){t.onDismiss&&t.onDismiss()}function a(ie){(ie.key==="Escape"||ie.key==="Enter"||ie.key===" ")&&(ie.preventDefault(),r())}var s=_f();s.__click=r,s.__keydown=a;var o=u(s);o.__click=ie=>ie.stopPropagation(),o.__keydown=ie=>{(ie.key==="Escape"||ie.key==="Enter"||ie.key===" ")&&ie.stopPropagation()};var c=u(o),l=v(u(c),6);l.__click=r;var d=v(c,2);{var f=ie=>{var re=gf(),me=u(re),N=v(me,2),P=u(N),B=u(P),T=v(P,2),E=u(T);X(Q=>{L(me,"src",Q),L(me,"alt",n.name),w(B,n.name),w(E,`Level ${t.newStats.level??""}`)},[()=>Me(n.imagePath)]),S(ie,re)};q(d,ie=>{n&&ie(f)})}var g=v(d,2),p=u(g),_=v(u(p),2),b=u(_),O=v(_,4),k=u(O),M=v(p,2),H=v(u(M),2),C=u(H),I=v(H,4),z=u(I),j=v(M,2),U=v(u(j),2),F=u(U),W=v(U,4),$=u(W),A=v(j,2),te=v(u(A),2),ue=u(te),fe=v(te,4),Ie=u(fe),Ae=v(g,6);Ae.__click=r,X(()=>{w(b,t.oldStats.maxHp),w(k,t.newStats.maxHp),w(C,t.oldStats.ac),w(z,t.newStats.ac),w(F,t.oldStats.surgeValue),w($,t.newStats.surgeValue),w(ue,`+${t.oldStats.attackBonus??""}`),w(Ie,`+${t.newStats.attackBonus??""}`)}),S(e,s),Se()}We(["click","keydown"]);var wf=R('<div class="healing-surge-overlay svelte-1ugospu" data-testid="healing-surge-notification"><div class="healing-surge-card svelte-1ugospu"><h2 class="healing-title svelte-1ugospu" data-testid="healing-title">Healing Surge!</h2> <div class="hero-section svelte-1ugospu"><img class="hero-avatar svelte-1ugospu"/> <span class="hero-name svelte-1ugospu" data-testid="healed-hero-name"> </span></div> <div class="healing-message svelte-1ugospu"><span class="was-text svelte-1ugospu">was at 0 HP</span></div> <div class="hp-restored-section svelte-1ugospu" data-testid="hp-restored-section"><span class="hp-icon svelte-1ugospu">â¤ï¸</span> <span class="hp-value svelte-1ugospu"> </span> <span class="hp-text svelte-1ugospu">restored</span></div> <button class="continue-button svelte-1ugospu" data-testid="dismiss-healing-surge">Continue</button></div></div>');function kf(e,t){Te(t,!0);function n(b){return it.find(O=>O.id===b)?.name??"Hero"}function r(b){return it.find(O=>O.id===b)?.imagePath??""}var a=wf(),s=u(a),o=v(u(s),2),c=u(o),l=v(c,2),d=u(l),f=v(o,4),g=v(u(f),2),p=u(g),_=v(f,2);_.__click=function(...b){t.onDismiss?.apply(this,b)},X((b,O,k)=>{L(c,"src",b),L(c,"alt",O),w(d,k),w(p,`+${t.hpRestored??""} HP`)},[()=>Me(r(t.heroId)),()=>n(t.heroId),()=>n(t.heroId)]),S(e,a),Se()}We(["click"]);var xf=R('<div class="action-surge-overlay svelte-y8yjxy" data-testid="action-surge-prompt"><div class="action-surge-card svelte-y8yjxy"><h2 class="action-surge-title svelte-y8yjxy" data-testid="action-surge-title">Use Healing Surge?</h2> <div class="hero-section svelte-y8yjxy"><img class="hero-avatar svelte-y8yjxy"/> <span class="hero-name svelte-y8yjxy" data-testid="action-surge-hero-name"> </span></div> <div class="hp-status hp-status-danger svelte-y8yjxy"><span class="hp-label svelte-y8yjxy">â ï¸ Hero is at 0 HP!</span></div> <div class="surge-info svelte-y8yjxy"><div class="surge-row svelte-y8yjxy"><span class="surge-icon svelte-y8yjxy">â¤ï¸</span> <span class="surge-text svelte-y8yjxy">Heal <strong data-testid="heal-amount" class="svelte-y8yjxy"> </strong></span></div> <div class="surge-row svelte-y8yjxy"><span class="surge-icon svelte-y8yjxy">â¡</span> <span class="surge-text svelte-y8yjxy">Surges remaining: <strong data-testid="surges-remaining" class="svelte-y8yjxy"> </strong></span></div></div> <p class="description warning-text svelte-y8yjxy">Skipping will result in defeat!</p> <div class="button-row svelte-y8yjxy"><button class="use-button svelte-y8yjxy" data-testid="use-action-surge-button">Use Surge</button> <button class="skip-button skip-danger svelte-y8yjxy" data-testid="skip-action-surge-button">Skip (Defeat)</button></div></div></div>');function bf(e,t){Te(t,!0);function n(U){return it.find(F=>F.id===U)?.name??"Hero"}function r(U){return it.find(F=>F.id===U)?.imagePath??""}function a(){return Math.min(t.surgeValue,t.maxHp)}var s=xf(),o=u(s),c=v(u(o),2),l=u(c),d=v(l,2),f=u(d),g=v(c,4),p=u(g),_=v(u(p),2),b=v(u(_)),O=u(b),k=v(p,2),M=v(u(k),2),H=v(u(M)),C=u(H),I=v(g,4),z=u(I);z.__click=function(...U){t.onUse?.apply(this,U)};var j=v(z,2);j.__click=function(...U){t.onSkip?.apply(this,U)},X((U,F,W,$)=>{L(l,"src",U),L(l,"alt",F),w(f,W),w(O,`+${$??""} HP`),w(C,t.surgesToRemaining)},[()=>Me(r(t.heroId)),()=>n(t.heroId),()=>n(t.heroId),a]),S(e,s),Se()}We(["click"]);var Tf=R('<span class="hero-level svelte-8w11tm" data-testid="hero-level">Level 2 â­</span>'),Sf=R('<div class="player-info svelte-8w11tm" data-testid="turn-indicator"><img class="player-avatar svelte-8w11tm"/> <div class="turn-details svelte-8w11tm"><span class="player-name svelte-8w11tm"> </span> <!> <span class="turn-phase svelte-8w11tm" data-testid="turn-phase"> </span> <span class="turn-number svelte-8w11tm"> </span> <span class="hero-hp svelte-8w11tm" data-testid="hero-hp"> </span></div></div>'),If=R('<div class="player-info svelte-8w11tm"><img class="player-avatar svelte-8w11tm"/> <div class="turn-details svelte-8w11tm"><span class="player-name svelte-8w11tm"> </span> <span class="turn-phase svelte-8w11tm"> </span> <span class="turn-number svelte-8w11tm"> </span> <span class="hero-hp svelte-8w11tm"> </span></div></div>'),Cf=R('<div><img class="tile-image svelte-8w11tm"/> <!></div>'),Ef=R('<div class="movement-overlay-container svelte-8w11tm"><!></div>'),Pf=R('<div data-testid="hero-token"><img class="token-image svelte-8w11tm"/> <span class="token-label svelte-8w11tm"> </span></div>'),Mf=R('<div class="player-info svelte-8w11tm"><img class="player-avatar svelte-8w11tm"/> <div class="turn-details svelte-8w11tm"><span class="player-name svelte-8w11tm"> </span> <span class="turn-phase svelte-8w11tm"> </span> <span class="turn-number svelte-8w11tm"> </span> <span class="hero-hp svelte-8w11tm"> </span></div></div>'),Hf=R('<span class="hero-level svelte-8w11tm" data-testid="hero-level">Level 2 â­</span>'),Af=R('<div class="player-info svelte-8w11tm" data-testid="turn-indicator"><img class="player-avatar svelte-8w11tm"/> <div class="turn-details svelte-8w11tm"><span class="player-name svelte-8w11tm"> </span> <!> <span class="turn-phase svelte-8w11tm" data-testid="turn-phase"> </span> <span class="turn-number svelte-8w11tm"> </span> <span class="hero-hp svelte-8w11tm" data-testid="hero-hp"> </span></div></div>'),Df=R('<div class="game-board svelte-8w11tm" data-testid="game-board"><div data-testid="player-zone-top"><!></div> <div class="middle-section svelte-8w11tm"><div data-testid="player-zone-left"><!></div> <div class="board-container svelte-8w11tm"><div class="dungeon-map svelte-8w11tm" data-testid="dungeon-map" role="button" tabindex="0"><!> <!> <!> <!></div> <div class="board-controls svelte-8w11tm"><div class="objective-display svelte-8w11tm" data-testid="objective-display"><span class="objective-label svelte-8w11tm">ð¯ Objective:</span> <span class="objective-text svelte-8w11tm"> </span> <span class="objective-progress svelte-8w11tm" data-testid="objective-progress"> </span></div> <!> <!> <!> <button class="end-phase-button svelte-8w11tm" data-testid="end-phase-button"> </button> <button class="reset-button svelte-8w11tm" data-testid="reset-button">â© Return to Character Select</button> <!></div></div> <div data-testid="player-zone-right"><!></div></div> <div data-testid="player-zone-bottom"><!></div> <!> <!> <!> <!> <!>  <!> <!> <!> <!></div>');function Rf(e,t){Te(t,!0);const n=140,r=4,a=8,s=4,o=n*r,c=n*a,l=n*s,d=140,f=.15,g=1,p=36,_=36,b=632,O=632,k=1195,M=3,H=0;let C=Y(pe([])),I=Y(pe([])),z=Y(pe({})),j=Y(pe({currentHeroIndex:0,currentPhase:"hero-phase",turnNumber:1,exploredThisTurn:!1})),U=Y(pe([])),F=Y(!1),W=Y(pe({tiles:[],unexploredEdges:[],tileDeck:[]})),$=Y(pe([])),A=Y(null),te=Y(null),ue=Y(null),fe=Y(pe([])),Ie=Y(null),Ae=Y(null),ie=Y(null),re=Y(0),me=Y(null),N=Y(pe({actionsTaken:[],canMove:!0,canAttack:!0})),P=Y(pe({monstersDefeated:0,monstersToDefeat:2,objective:"Defeat 2 monsters"})),B=Y(pe({xp:0,healingSurges:2})),T=Y(null),E=Y(null),Q=Y(null),ae=Y(null),de=Y(null),le=Y(null),ve=Y(null),ye=Y(1),we=Y(pe({})),ce=Y(null),ge=Y(null),ke=Y(!1),Ne=K(()=>lt(i(W)));It(()=>{const m=V.subscribe(()=>{const y=V.getState();x(C,y.game.heroTokens,!0),x(I,y.heroes.selectedHeroes,!0),x(z,y.heroes.heroEdgeMap,!0),x(j,y.game.turnState,!0),x(U,y.game.validMoveSquares,!0),x(F,y.game.showingMovement,!0),x(W,y.game.dungeon,!0),x($,y.game.monsters,!0),x(A,y.game.recentlySpawnedMonsterId,!0),x(te,y.game.attackResult,!0),x(ue,y.game.attackTargetId,!0),x(fe,y.game.heroHp,!0),x(Ie,y.game.monsterAttackResult,!0),x(Ae,y.game.monsterAttackTargetId,!0),x(ie,y.game.monsterAttackerId,!0),x(re,y.game.villainPhaseMonsterIndex,!0),x(me,y.game.monsterMoveActionId,!0),x(N,y.game.heroTurnActions,!0),x(P,y.game.scenario,!0),x(B,y.game.partyResources,!0),x(T,y.game.defeatedMonsterXp,!0),x(E,y.game.defeatedMonsterName,!0),x(Q,y.game.leveledUpHeroId,!0),x(ae,y.game.levelUpOldStats,!0),x(de,y.game.healingSurgeUsedHeroId,!0),x(le,y.game.healingSurgeHpRestored,!0),x(we,y.heroes.heroPowerCards,!0),x(ce,y.game.attackName,!0),x(ge,y.game.drawnEncounter,!0),x(ke,y.game.showActionSurgePrompt,!0)}),h=V.getState();return x(C,h.game.heroTokens,!0),x(I,h.heroes.selectedHeroes,!0),x(z,h.heroes.heroEdgeMap,!0),x(j,h.game.turnState,!0),x(U,h.game.validMoveSquares,!0),x(F,h.game.showingMovement,!0),x(W,h.game.dungeon,!0),x($,h.game.monsters,!0),x(A,h.game.recentlySpawnedMonsterId,!0),x(te,h.game.attackResult,!0),x(ue,h.game.attackTargetId,!0),x(fe,h.game.heroHp,!0),x(Ie,h.game.monsterAttackResult,!0),x(Ae,h.game.monsterAttackTargetId,!0),x(ie,h.game.monsterAttackerId,!0),x(re,h.game.villainPhaseMonsterIndex,!0),x(me,h.game.monsterMoveActionId,!0),x(N,h.game.heroTurnActions,!0),x(P,h.game.scenario,!0),x(B,h.game.partyResources,!0),x(T,h.game.defeatedMonsterXp,!0),x(E,h.game.defeatedMonsterName,!0),x(Q,h.game.leveledUpHeroId,!0),x(ae,h.game.levelUpOldStats,!0),x(de,h.game.healingSurgeUsedHeroId,!0),x(le,h.game.healingSurgeHpRestored,!0),x(we,h.heroes.heroPowerCards,!0),x(ce,h.game.attackName,!0),x(ge,h.game.drawnEncounter,!0),x(ke,h.game.showActionSurgePrompt,!0),m}),It(()=>{i(j).currentPhase==="hero-phase"&&Xd(i(N))&&V.dispatch(as())}),It(()=>{if(i(j).currentPhase!=="hero-phase"||!i(N).canMove||i(F))return;const m=_e();if(!m)return;const h=Be(m);h&&V.dispatch(rs({heroId:m,speed:h.speed}))}),It(()=>{if(i(j).currentPhase!=="villain-phase"||i(Ie)!==null||i(me)!==null||i(ge)!==null)return;const m=fn();if(i(re)>=m.length){V.dispatch(ss());return}V.dispatch(iu({}))});function lt(m){if(m.tiles.length===0)return{minCol:0,maxCol:0,minRow:0,maxRow:0,width:b,height:k};let h=1/0,y=-1/0,D=1/0,G=-1/0;for(const Ce of m.tiles)h=Math.min(h,Ce.position.col),y=Math.max(y,Ce.position.col),D=Math.min(D,Ce.position.row),G=Math.max(G,Ce.position.row);const Z=y-h+1,J=b+(Z-1)*o,se=Math.max(0,-D),ee=Math.max(0,G),xe=k+se*l+ee*l;return{minCol:h,maxCol:y,minRow:D,maxRow:G,width:Math.max(J,b),height:Math.max(xe,k)}}function ct(m,h){const y=(m.position.col-h.minCol)*o;let D=0;return m.position.row<0?D=(m.position.row-h.minRow)*l:m.position.row===0?D=Math.max(0,-h.minRow)*l-M:D=Math.max(0,-h.minRow)*l+c+(m.position.row-1)*l-M-H,{x:y,y:D}}function De(m){return m.tileType==="start"?"assets/StartTile.png":ci.find(y=>y.tileType===m.tileType)?.imagePath||"assets/Tile_Black_x2_01.png"}function tt(m){return m.tileType==="start"?{width:b,height:k}:{width:b,height:O}}It(()=>{if(i(ve)){const m=()=>{const y=i(ve);if(!y)return;const D=y.clientWidth-d,G=y.clientHeight-d,Z=i(Ne),J=D/Z.width,se=G/Z.height,ee=Math.min(J,se,g);x(ye,Math.max(ee,f),!0)};m();const h=new ResizeObserver(m);return h.observe(i(ve)),()=>h.disconnect()}});function Be(m){return i(I).find(h=>h.id===m)}function _e(){return i(C)[i(j).currentHeroIndex]?.heroId}function nt(m){switch(m){case"hero-phase":return"Hero Phase";case"exploration-phase":return"Exploration Phase";case"villain-phase":return"Villain Phase"}}function dt(m){return i(fe).find(y=>y.heroId===m)?.currentHp??0}function Ye(m){return i(fe).find(y=>y.heroId===m)?.maxHp??0}function zt(m){return i(fe).find(y=>y.heroId===m)?.level??1}function fn(){const m=_e();return m?i($).filter(h=>h.controllerId===m):[]}function wi(){V.dispatch(sa())}function ki(m,h){const y=n/2,D=h.x+p+m.x*n+y,G=h.y+_+m.y*n+y;return`left: ${D}px; top: ${G}px;`}function jt(){const m=_e();if(m&&i(z)[m])return i(z)[m];const h=i(j).currentHeroIndex%4;return["bottom","right","top","left"][h]}function xi(m){const h=i(z)[m];if(!h)return 0;switch(h){case"bottom":return 0;case"top":return 180;case"left":return 90;case"right":return-90;default:return 0}}function ia(m){if(i(j).currentPhase!=="hero-phase")return;const h=_e();if(!h)return;const y=Be(h);y&&(i(F)?V.dispatch(Zd()):V.dispatch(rs({heroId:h,speed:y.speed})))}function bi(m){const h=_e();h&&V.dispatch(Jd({heroId:h,position:m}))}function Ti(m){(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),ia())}function Si(){switch(i(j).currentPhase){case"hero-phase":V.dispatch(as());break;case"exploration-phase":V.dispatch($d());break;case"villain-phase":V.dispatch(ss());break}}function Ii(){switch(i(j).currentPhase){case"hero-phase":return"End Hero Phase";case"exploration-phase":return"End Exploration";case"villain-phase":return"End Villain Phase"}}function Ci(){V.dispatch(eu())}function Ei(m){const h=i(W).tiles.find(y=>y.id===m);return h?ct(h,i(Ne)):{x:0,y:0}}const sr="start-tile";function Pi(){const m=_e();if(!m)return sr;const h=i(C).find(D=>D.heroId===m);return h?Tn(h.position,i(W))?.id??sr:sr}function Mi(){const m=_e();if(!m)return[];const h=i(C).find(D=>D.heroId===m);if(!h)return[];const y=Pi();return Pd(h.position,i($),y,i(W))}function Hi(m){return it.find(h=>h.id===m)}const Ai=1;function Di(m,h){const y=_e();if(!y)return;const D=Qn(m);if(!D||D.attackBonus===void 0)return;const G=i($).find(ee=>ee.instanceId===h);if(!G)return;const Z=Cd(G.monsterId);if(Z===void 0)return;const J={name:D.name,attackBonus:D.attackBonus,damage:D.damage??Ai},se=bd(J,Z);V.dispatch(ru({result:se,targetInstanceId:h,attackName:D.name})),D.type==="daily"&&V.dispatch(Gc({heroId:y,cardId:m}))}function Ri(){V.dispatch(au())}function ir(m){return Pn.find(y=>y.id===m)?.name||"Monster"}function zi(){if(i(ue))return i($).find(m=>m.instanceId===i(ue))}function ji(){V.dispatch(ou())}function Oi(){V.dispatch(lu())}function Ni(){return i(Ae)&&it.find(h=>h.id===i(Ae))?.name||"Hero"}function Bi(){if(!i(ie))return"Monster";const m=i($).find(h=>h.instanceId===i(ie));return m?ir(m.monsterId):"Monster"}function Li(){if(!i(me))return"Monster";const m=i($).find(h=>h.instanceId===i(me));return m?ir(m.monsterId):"Monster"}function Fi(){V.dispatch(su())}function Ui(){V.dispatch(du())}function qi(){V.dispatch(cu())}function Wi(){V.dispatch(tu())}function Yi(){V.dispatch(nu())}function Vi(){V.dispatch(uu())}function Xi(){V.dispatch(fu())}function Gi(){if(i(Q))return i(fe).find(m=>m.heroId===i(Q))}var oa=Df(),or=u(oa);let la;var Ki=u(or);{var Qi=m=>{const h=K(_e),y=K(()=>i(h)?Be(i(h)):void 0);var D=Ee(),G=be(D);{var Z=J=>{var se=Sf(),ee=u(se),xe=v(ee,2),Ce=u(xe),Qe=u(Ce),Ve=v(Ce,2);{var ut=Le=>{var vt=Tf();S(Le,vt)};q(Ve,Le=>{zt(i(h))===2&&Le(ut)})}var Ze=v(Ve,2),xt=u(Ze),ft=v(Ze,2),bt=u(ft),Ut=v(ft,2),qt=u(Ut);X((Le,vt,fr,vr)=>{L(ee,"src",Le),L(ee,"alt",i(y).name),w(Qe,`${i(y).name??""}'s Turn`),w(xt,vt),w(bt,`Turn ${i(j).turnNumber??""}`),w(qt,`HP: ${fr??""}/${vr??""}`)},[()=>Me(i(y).imagePath),()=>nt(i(j).currentPhase),()=>dt(i(h)),()=>Ye(i(h))]),S(J,se)};q(G,J=>{i(y)&&i(h)&&J(Z)})}S(m,D)};q(Ki,m=>{jt()==="top"&&m(Qi)})}var ca=v(or,2),lr=u(ca);let da;var Zi=u(lr);{var Ji=m=>{const h=K(_e),y=K(()=>i(h)?Be(i(h)):void 0);var D=Ee(),G=be(D);{var Z=J=>{var se=If(),ee=u(se),xe=v(ee,2),Ce=u(xe),Qe=u(Ce),Ve=v(Ce,2),ut=u(Ve),Ze=v(Ve,2),xt=u(Ze),ft=v(Ze,2),bt=u(ft);X((Ut,qt,Le,vt)=>{L(ee,"src",Ut),L(ee,"alt",i(y).name),w(Qe,`${i(y).name??""}'s Turn`),w(ut,qt),w(xt,`Turn ${i(j).turnNumber??""}`),w(bt,`HP: ${Le??""}/${vt??""}`)},[()=>Me(i(y).imagePath),()=>nt(i(j).currentPhase),()=>dt(i(h)),()=>Ye(i(h))]),S(J,se)};q(G,J=>{i(y)&&i(h)&&J(Z)})}S(m,D)};q(Zi,m=>{jt()==="left"&&m(Ji)})}var cr=v(lr,2),Kt=u(cr);Kt.__click=ia,Kt.__keydown=Ti;var ua=u(Kt);Ue(ua,17,()=>i(W).tiles,m=>m.id,(m,h)=>{const y=K(()=>ct(i(h),i(Ne))),D=K(()=>tt(i(h)));var G=Cf();let Z;var J=u(G),se=v(J,2);Ue(se,17,()=>i(W).unexploredEdges.filter(ee=>ee.tileId===i(h).id),ee=>ee.direction,(ee,xe)=>{Wu(ee,{get direction(){return i(xe).direction},cellSize:n,get tileWidth(){return i(D).width},get tileHeight(){return i(D).height}})}),X(ee=>{Z=ze(G,1,"placed-tile svelte-8w11tm",null,Z,{"start-tile":i(h).tileType==="start"}),L(G,"data-testid",i(h).tileType==="start"?"start-tile":"dungeon-tile"),L(G,"data-tile-id",i(h).id),Ot(G,`left: ${i(y).x??""}px; top: ${i(y).y??""}px; width: ${i(D).width??""}px; height: ${i(D).height??""}px;`),L(J,"src",ee),L(J,"alt",i(h).tileType),Ot(J,i(h).rotation!==0?`transform: rotate(${i(h).rotation}deg);`:"")},[()=>Me(De(i(h)))]),S(m,G)});var fa=v(ua,2);{var $i=m=>{const h=K(()=>i(W).tiles.find(Z=>Z.tileType==="start"));var y=Ee(),D=be(y);{var G=Z=>{const J=K(()=>ct(i(h),i(Ne))),se=K(()=>tt(i(h)));var ee=Ef(),xe=u(ee);Lu(xe,{get validMoveSquares(){return i(U)},tileOffsetX:p,tileOffsetY:_,cellSize:n,onSquareClick:bi}),X(()=>Ot(ee,`left: ${i(J).x??""}px; top: ${i(J).y??""}px; width: ${i(se).width??""}px; height: ${i(se).height??""}px;`)),S(Z,ee)};q(D,Z=>{i(h)&&Z(G)})}S(m,y)};q(fa,m=>{i(F)&&i(U).length>0&&m($i)})}var va=v(fa,2);Ue(va,17,()=>i(C),m=>m.heroId,(m,h)=>{const y=K(()=>Be(i(h).heroId)),D=K(()=>i(h).heroId===_e()),G=K(()=>i(W).tiles.find(xe=>xe.tileType==="start")),Z=K(()=>xi(i(h).heroId));var J=Ee(),se=be(J);{var ee=xe=>{const Ce=K(()=>ct(i(G),i(Ne)));var Qe=Pf();let Ve;var ut=u(Qe),Ze=v(ut,2),xt=u(Ze);X((ft,bt)=>{Ve=ze(Qe,1,"hero-token svelte-8w11tm",null,Ve,{active:i(D)}),L(Qe,"data-hero-id",i(h).heroId),Ot(Qe,`${ft??""} --token-rotation: ${i(Z)??""}deg;`),L(ut,"src",bt),L(ut,"alt",i(y).name),w(xt,i(y).name)},[()=>ki(i(h).position,i(Ce)),()=>Me(i(y).imagePath)]),S(xe,Qe)};q(se,xe=>{i(y)&&i(G)&&xe(ee)})}S(m,J)});var eo=v(va,2);Ue(eo,17,()=>i($),m=>m.instanceId,(m,h)=>{{let y=K(()=>Ei(i(h).tileId));Vu(m,{get monster(){return i(h)},cellSize:n,tileOffsetX:p,tileOffsetY:_,get tilePixelOffset(){return i(y)}})}});var to=v(Kt,2),ha=u(to),pa=v(u(ha),2),no=u(pa),ro=v(pa,2),ao=u(ro),ma=v(ha,2);ff(ma,{get xp(){return i(B).xp}});var ga=v(ma,2);hf(ga,{get surges(){return i(B).healingSurges}});var _a=v(ga,2);Uu(_a,{get tileCount(){return i(W).tileDeck.length}});var dr=v(_a,2);dr.__click=Si;var so=u(dr),ya=v(dr,2);ya.__click=wi;var io=v(ya,2);{var oo=m=>{const h=K(_e),y=K(()=>i(h)?i(we)[i(h)]:void 0),D=K(Mi);var G=Ee(),Z=be(G);{var J=se=>{nf(se,{get heroPowerCards(){return i(y)},get adjacentMonsters(){return i(D)},onAttackWithCard:Di})};q(Z,se=>{i(y)&&i(D).length>0&&se(J)})}S(m,G)};q(io,m=>{i(j).currentPhase==="hero-phase"&&i(N).canAttack&&m(oo)})}Ll(cr,m=>x(ve,m),()=>i(ve));var wa=v(cr,2);let ka;var lo=u(wa);{var co=m=>{const h=K(_e),y=K(()=>i(h)?Be(i(h)):void 0);var D=Ee(),G=be(D);{var Z=J=>{var se=Mf(),ee=u(se),xe=v(ee,2),Ce=u(xe),Qe=u(Ce),Ve=v(Ce,2),ut=u(Ve),Ze=v(Ve,2),xt=u(Ze),ft=v(Ze,2),bt=u(ft);X((Ut,qt,Le,vt)=>{L(ee,"src",Ut),L(ee,"alt",i(y).name),w(Qe,`${i(y).name??""}'s Turn`),w(ut,qt),w(xt,`Turn ${i(j).turnNumber??""}`),w(bt,`HP: ${Le??""}/${vt??""}`)},[()=>Me(i(y).imagePath),()=>nt(i(j).currentPhase),()=>dt(i(h)),()=>Ye(i(h))]),S(J,se)};q(G,J=>{i(y)&&i(h)&&J(Z)})}S(m,D)};q(lo,m=>{jt()==="right"&&m(co)})}var ur=v(ca,2);let xa;var uo=u(ur);{var fo=m=>{const h=K(_e),y=K(()=>i(h)?Be(i(h)):void 0);var D=Ee(),G=be(D);{var Z=J=>{var se=Af(),ee=u(se),xe=v(ee,2),Ce=u(xe),Qe=u(Ce),Ve=v(Ce,2);{var ut=Le=>{var vt=Hf();S(Le,vt)};q(Ve,Le=>{zt(i(h))===2&&Le(ut)})}var Ze=v(Ve,2),xt=u(Ze),ft=v(Ze,2),bt=u(ft),Ut=v(ft,2),qt=u(Ut);X((Le,vt,fr,vr)=>{L(ee,"src",Le),L(ee,"alt",i(y).name),w(Qe,`${i(y).name??""}'s Turn`),w(xt,vt),w(bt,`Turn ${i(j).turnNumber??""}`),w(qt,`HP: ${fr??""}/${vr??""}`)},[()=>Me(i(y).imagePath),()=>nt(i(j).currentPhase),()=>dt(i(h)),()=>Ye(i(h))]),S(J,se)};q(G,J=>{i(y)&&i(h)&&J(Z)})}S(m,D)};q(uo,m=>{jt()==="bottom"&&m(fo)})}var ba=v(ur,2);{var vo=m=>{const h=K(()=>i($).find(Z=>Z.instanceId===i(A)));var y=Ee(),D=be(y);{var G=Z=>{Gu(Z,{get monsterId(){return i(h).monsterId},onDismiss:Ci})};q(D,Z=>{i(h)&&Z(G)})}S(m,y)};q(ba,m=>{i(A)&&m(vo)})}var Ta=v(ba,2);{var ho=m=>{const h=K(_e),y=K(()=>i(h)?Hi(i(h)):void 0),D=K(zi);var G=Ee(),Z=be(G);{var J=se=>{{let ee=K(()=>i(D)?ir(i(D).monsterId):"Monster");is(se,{get result(){return i(te)},get attackerName(){return i(y).name},get attackName(){return i(ce)},get targetName(){return i(ee)},onDismiss:Ri})}};q(Z,se=>{i(y)&&i(ce)&&se(J)})}S(m,G)};q(Ta,m=>{i(te)&&m(ho)})}var Sa=v(Ta,2);{var po=m=>{{let h=K(Bi),y=K(Ni);is(m,{get result(){return i(Ie)},get attackerName(){return i(h)},attackName:"Attack",get targetName(){return i(y)},onDismiss:ji})}};q(Sa,m=>{i(Ie)&&m(po)})}var Ia=v(Sa,2);{var mo=m=>{{let h=K(Li);df(m,{get monsterName(){return i(h)},onDismiss:Oi})}};q(Ia,m=>{i(me)&&m(mo)})}var Ca=v(Ia,2);{var go=m=>{mf(m,{get monsterName(){return i(E)},get xpGained(){return i(T)},onDismiss:Fi})};q(Ca,m=>{i(T)!==null&&i(E)!==null&&m(go)})}var Ea=v(Ca,2);{var _o=m=>{const h=K(Gi);var y=Ee(),D=be(y);{var G=Z=>{yf(Z,{get heroId(){return i(Q)},get oldStats(){return i(ae)},get newStats(){return i(h)},onDismiss:Ui})};q(D,Z=>{i(h)&&Z(G)})}S(m,y)};q(Ea,m=>{i(Q)&&i(ae)&&!i(te)&&!i(T)&&m(_o)})}var Pa=v(Ea,2);{var yo=m=>{kf(m,{get heroId(){return i(de)},get hpRestored(){return i(le)},onDismiss:qi})};q(Pa,m=>{i(de)&&i(le)!==null&&m(yo)})}var Ma=v(Pa,2);{var wo=m=>{Qu(m,{get encounter(){return i(ge)},get partyXp(){return i(B).xp},onDismiss:Wi,onCancel:Yi})};q(Ma,m=>{i(ge)&&m(wo)})}var ko=v(Ma,2);{var xo=m=>{const h=K(_e),y=K(()=>i(h)?i(fe).find(J=>J.heroId===i(h)):void 0);var D=Ee(),G=be(D);{var Z=J=>{bf(J,{get heroId(){return i(h)},get maxHp(){return i(y).maxHp},get surgeValue(){return i(y).surgeValue},get surgesToRemaining(){return i(B).healingSurges},onUse:Vi,onSkip:Xi})};q(G,J=>{i(h)&&i(y)&&J(Z)})}S(m,D)};q(ko,m=>{i(ke)&&m(xo)})}X((m,h,y,D,G)=>{la=ze(or,1,"edge-zone edge-top svelte-8w11tm",null,la,m),da=ze(lr,1,"edge-zone edge-left svelte-8w11tm",null,da,h),Ot(Kt,`transform: scale(${i(ye)??""}); width: ${i(Ne).width??""}px; height: ${i(Ne).height??""}px;`),L(Kt,"aria-label",i(F)?"Click to hide movement options":"Click to show movement options for current hero"),w(no,i(P).objective),w(ao,`${i(P).monstersDefeated??""} / ${i(P).monstersToDefeat??""} defeated`),w(so,y),ka=ze(wa,1,"edge-zone edge-right svelte-8w11tm",null,ka,D),xa=ze(ur,1,"edge-zone edge-bottom svelte-8w11tm",null,xa,G)},[()=>({"active-edge":jt()==="top"}),()=>({"active-edge":jt()==="left"}),Ii,()=>({"active-edge":jt()==="right"}),()=>({"active-edge":jt()==="bottom"})]),S(e,oa),Se()}We(["click","keydown"]);var zf=R('<div class="victory-screen svelte-12ok9q2" data-testid="victory-screen"><div class="victory-content svelte-12ok9q2"><div class="victory-icon svelte-12ok9q2">ð</div> <h1 class="victory-title svelte-12ok9q2">Victory!</h1> <p class="victory-message svelte-12ok9q2"> </p> <div class="victory-objective svelte-12ok9q2"><span class="objective-label svelte-12ok9q2">Objective Complete:</span> <span class="objective-text svelte-12ok9q2"> </span></div> <button class="return-button svelte-12ok9q2" data-testid="return-to-menu-button">Return to Character Select</button></div></div>');function jf(e,t){Te(t,!0);let n=Y(pe({monstersDefeated:0,monstersToDefeat:2,objective:"Defeat 2 monsters"}));It(()=>{const p=V.subscribe(()=>{const b=V.getState();x(n,b.game.scenario,!0)}),_=V.getState();return x(n,_.game.scenario,!0),p});function r(){V.dispatch(sa())}var a=zf(),s=u(a),o=v(u(s),4),c=u(o),l=v(o,2),d=v(u(l),2),f=u(d),g=v(l,2);g.__click=r,X(()=>{w(c,`You have defeated ${i(n).monstersDefeated??""} monsters and completed the objective!`),w(f,i(n).objective)}),S(e,a),Se()}We(["click"]);var Of=R('<div class="defeat-screen svelte-1jz2vy1" data-testid="defeat-screen"><div class="defeat-content svelte-1jz2vy1"><div class="defeat-icon svelte-1jz2vy1">ð</div> <h1 class="defeat-title svelte-1jz2vy1">Defeat</h1> <p class="defeat-message svelte-1jz2vy1" data-testid="defeat-message"><!></p> <div class="defeat-progress svelte-1jz2vy1"><span class="progress-label svelte-1jz2vy1">Progress:</span> <span class="progress-text svelte-1jz2vy1" data-testid="defeat-progress"> </span></div> <div class="defeat-objective svelte-1jz2vy1"><span class="objective-label svelte-1jz2vy1">Objective:</span> <span class="objective-text svelte-1jz2vy1"> </span></div> <button class="new-game-button svelte-1jz2vy1" data-testid="new-game-button">New Game</button></div></div>');function Nf(e,t){Te(t,!0);let n=Y(pe({monstersDefeated:0,monstersToDefeat:2,objective:"Defeat 2 monsters"})),r=Y(null);It(()=>{const H=V.subscribe(()=>{const I=V.getState();x(n,I.game.scenario,!0),x(r,I.game.defeatReason,!0)}),C=V.getState();return x(n,C.game.scenario,!0),x(r,C.game.defeatReason,!0),H});function a(){V.dispatch(sa())}var s=Of(),o=u(s),c=v(u(o),4),l=u(c);{var d=H=>{var C=Na();X(()=>w(C,i(r))),S(H,C)},f=H=>{var C=Na("Your party has been eliminated before completing the objective.");S(H,C)};q(l,H=>{i(r)?H(d):H(f,!1)})}var g=v(c,2),p=v(u(g),2),_=u(p),b=v(g,2),O=v(u(b),2),k=u(O),M=v(b,2);M.__click=a,X(()=>{w(_,`${i(n).monstersDefeated??""} / ${i(n).monstersToDefeat??""} monsters defeated`),w(k,i(n).objective)}),S(e,s),Se()}We(["click"]);var Bf=R('<main class="svelte-1n46o8q"><!></main>');function Lf(e,t){Te(t,!0);let n=Y("character-select");It(()=>{const c=V.subscribe(()=>{const d=V.getState();x(n,d.game.currentScreen,!0)}),l=V.getState();return x(n,l.game.currentScreen,!0),c});var r=Bf(),a=u(r);{var s=c=>{Ou(c,{})},o=c=>{var l=Ee(),d=be(l);{var f=p=>{Rf(p,{})},g=p=>{var _=Ee(),b=be(_);{var O=M=>{jf(M,{})},k=M=>{var H=Ee(),C=be(H);{var I=z=>{Nf(z,{})};q(C,z=>{i(n)==="defeat"&&z(I)},!0)}S(M,H)};q(b,M=>{i(n)==="victory"?M(O):M(k,!1)},!0)}S(p,_)};q(d,p=>{i(n)==="game-board"?p(f):p(g,!1)},!0)}S(c,l)};q(a,c=>{i(n)==="character-select"?c(s):c(o,!1)})}S(e,r),Se()}Ml(Lf,{target:document.getElementById("app")});
