(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}})();const go="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(go);const ss=1,is=2,os=4,_o=8,yo=16,wo=1,ko=2,Re=Symbol(),bo="http://www.w3.org/1999/xhtml",_r=!1;var ls=Array.isArray,xo=Array.prototype.indexOf,Or=Array.from,To=Object.defineProperty,mn=Object.getOwnPropertyDescriptor,So=Object.getOwnPropertyDescriptors,Io=Object.prototype,Co=Array.prototype,cs=Object.getPrototypeOf,Ma=Object.isExtensible;function Eo(e){for(var t=0;t<e.length;t++)e[t]()}function ds(){var e,t,n=new Promise((r,a)=>{e=r,t=a});return{promise:n,resolve:e,reject:t}}const Ae=2,Nr=4,jr=8,Po=1<<24,Mt=16,Ht=32,Gt=64,Jn=128,ft=512,Ne=1024,Xe=2048,At=4096,$e=8192,Nt=16384,Br=32768,nn=65536,Ha=1<<17,us=1<<18,cn=1<<19,Mo=1<<20,Yt=32768,yr=1<<21,Lr=1<<22,jt=1<<23,zn=Symbol("$state"),Ho=Symbol(""),$t=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Ao(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Do(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Ro(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function zo(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Oo(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function No(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function jo(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Bo(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Lo(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}function Fo(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function fs(e){return e===this.v}function qo(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function vs(e){return!qo(e,this.v)}let Uo=!1,st=null;function rn(e){st=e}function Ie(e,t=!1,n){st={p:st,i:!1,c:null,e:null,s:e,x:null,l:null}}function Ce(e){var t=st,n=t.e;if(n!==null){t.e=null;for(var r of n)Cs(r)}return t.i=!0,st=t.p,{}}function hs(){return!0}let en=[];function Wo(){var e=en;en=[],Eo(e)}function dn(e){if(en.length===0){var t=en;queueMicrotask(()=>{t===en&&Wo()})}en.push(e)}function ps(e){var t=oe;if(t===null)return ne.f|=jt,e;if((t.f&Br)===0){if((t.f&Jn)===0)throw e;t.b.error(e)}else an(e,t)}function an(e,t){for(;t!==null;){if((t.f&Jn)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e}const Hn=new Set;let me=null,at=null,ht=[],Fr=null,wr=!1;class pt{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#r=0;#n=0;#l=null;#s=[];#a=[];skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(t){ht=[],this.apply();var n={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const r of t)this.#i(r,n);this.is_fork||this.#d(),this.is_deferred()?(this.#o(n.effects),this.#o(n.render_effects),this.#o(n.block_effects)):(me=null,Aa(n.render_effects),Aa(n.effects),this.#l?.resolve()),at=null}#i(t,n){t.f^=Ne;for(var r=t.first;r!==null;){var a=r.f,s=(a&(Ht|Gt))!==0,o=s&&(a&Ne)!==0,c=o||(a&$e)!==0||this.skipped_effects.has(r);if((r.f&Jn)!==0&&r.b?.is_pending()&&(n={parent:n,effect:r,effects:[],render_effects:[],block_effects:[]}),!c&&r.fn!==null){s?r.f^=Ne:(a&Nr)!==0?n.effects.push(r):In(r)&&((r.f&Mt)!==0&&n.block_effects.push(r),wn(r));var l=r.first;if(l!==null){r=l;continue}}var d=r.parent;for(r=r.next;r===null&&d!==null;)d===n.effect&&(this.#o(n.effects),this.#o(n.render_effects),this.#o(n.block_effects),n=n.parent),r=d.next,d=d.parent}}#o(t){for(const n of t)((n.f&Xe)!==0?this.#s:this.#a).push(n),this.#c(n.deps),je(n,Ne)}#c(t){if(t!==null)for(const n of t)(n.f&Ae)===0||(n.f&Yt)===0||(n.f^=Yt,this.#c(n.deps))}capture(t,n){this.previous.has(t)||this.previous.set(t,n),(t.f&jt)===0&&(this.current.set(t,t.v),at?.set(t,t.v))}activate(){me=this,this.apply()}deactivate(){me===this&&(me=null,at=null)}flush(){if(this.activate(),ht.length>0){if(Yo(),me!==null&&me!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#t)t(this);this.#t.clear()}#d(){if(this.#n===0){for(const t of this.#e)t();this.#e.clear()}this.#r===0&&this.#u()}#u(){if(Hn.size>1){this.previous.clear();var t=at,n=!0,r={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const s of Hn){if(s===this){n=!1;continue}const o=[];for(const[l,d]of this.current){if(s.current.has(l))if(n&&d!==s.current.get(l))s.current.set(l,d);else continue;o.push(l)}if(o.length===0)continue;const c=[...s.current.keys()].filter(l=>!this.current.has(l));if(c.length>0){var a=ht;ht=[];const l=new Set,d=new Map;for(const f of o)ms(f,c,l,d);if(ht.length>0){me=s,s.apply();for(const f of ht)s.#i(f,r);s.deactivate()}ht=a}}me=null,at=t}this.committed=!0,Hn.delete(this)}increment(t){this.#r+=1,t&&(this.#n+=1)}decrement(t){this.#r-=1,t&&(this.#n-=1),this.revive()}revive(){for(const t of this.#s)je(t,Xe),Vt(t);for(const t of this.#a)je(t,At),Vt(t);this.#s=[],this.#a=[],this.flush()}oncommit(t){this.#e.add(t)}ondiscard(t){this.#t.add(t)}settled(){return(this.#l??=ds()).promise}static ensure(){if(me===null){const t=me=new pt;Hn.add(me),pt.enqueue(()=>{me===t&&t.flush()})}return me}static enqueue(t){dn(t)}apply(){}}function Yo(){var e=Lt;wr=!0;var t=null;try{var n=0;for(Fn(!0);ht.length>0;){var r=pt.ensure();if(n++>1e3){var a,s;Vo()}r.process(ht),Bt.clear()}}finally{wr=!1,Fn(e),Fr=null}}function Vo(){try{Oo()}catch(e){an(e,Fr)}}let bt=null;function Aa(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if((r.f&(Nt|$e))===0&&In(r)&&(bt=new Set,wn(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?Hs(r):r.fn=null),bt?.size>0)){Bt.clear();for(const a of bt){if((a.f&(Nt|$e))!==0)continue;const s=[a];let o=a.parent;for(;o!==null;)bt.has(o)&&(bt.delete(o),s.push(o)),o=o.parent;for(let c=s.length-1;c>=0;c--){const l=s[c];(l.f&(Nt|$e))===0&&wn(l)}}bt.clear()}}bt=null}}function ms(e,t,n,r){if(!n.has(e)&&(n.add(e),e.reactions!==null))for(const a of e.reactions){const s=a.f;(s&Ae)!==0?ms(a,t,n,r):(s&(Lr|Mt))!==0&&(s&Xe)===0&&gs(a,t,r)&&(je(a,Xe),Vt(a))}}function gs(e,t,n){const r=n.get(e);if(r!==void 0)return r;if(e.deps!==null)for(const a of e.deps){if(t.includes(a))return!0;if((a.f&Ae)!==0&&gs(a,t,n))return n.set(a,!0),!0}return n.set(e,!1),!1}function Vt(e){for(var t=Fr=e;t.parent!==null;){t=t.parent;var n=t.f;if(wr&&t===oe&&(n&Mt)!==0&&(n&us)===0)return;if((n&(Gt|Ht))!==0){if((n&Ne)===0)return;t.f^=Ne}}ht.push(t)}function Xo(e){let t=0,n=Xt(0),r;return()=>{_n()&&(i(n),Es(()=>(t===0&&(r=qs(()=>e(()=>gn(n)))),t+=1,()=>{dn(()=>{t-=1,t===0&&(r?.(),r=void 0,gn(n))})})))}}var Go=nn|cn|Jn;function Ko(e,t,n){new Qo(e,t,n)}class Qo{parent;#e=!1;#t;#r=null;#n;#l;#s;#a=null;#i=null;#o=null;#c=null;#d=null;#u=0;#f=0;#h=!1;#v=null;#y=Xo(()=>(this.#v=Xt(this.#u),()=>{this.#v=null}));constructor(t,n,r){this.#t=t,this.#n=n,this.#l=r,this.parent=oe.b,this.#e=!!this.#n.pending,this.#s=Yr(()=>{oe.b=this;{var a=this.#g();try{this.#a=rt(()=>r(a))}catch(s){this.error(s)}this.#f>0?this.#m():this.#e=!1}return()=>{this.#d?.remove()}},Go)}#w(){try{this.#a=rt(()=>this.#l(this.#t))}catch(t){this.error(t)}this.#e=!1}#k(){const t=this.#n.pending;t&&(this.#i=rt(()=>t(this.#t)),pt.enqueue(()=>{var n=this.#g();this.#a=this.#p(()=>(pt.ensure(),rt(()=>this.#l(n)))),this.#f>0?this.#m():(tn(this.#i,()=>{this.#i=null}),this.#e=!1)}))}#g(){var t=this.#t;return this.#e&&(this.#d=Et(),this.#t.before(this.#d),t=this.#d),t}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#p(t){var n=oe,r=ne,a=st;gt(this.#s),Ye(this.#s),rn(this.#s.ctx);try{return t()}catch(s){return ps(s),null}finally{gt(n),Ye(r),rn(a)}}#m(){const t=this.#n.pending;this.#a!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#d),Rs(this.#a,this.#c)),this.#i===null&&(this.#i=rt(()=>t(this.#t)))}#_(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#_(t);return}this.#f+=t,this.#f===0&&(this.#e=!1,this.#i&&tn(this.#i,()=>{this.#i=null}),this.#c&&(this.#t.before(this.#c),this.#c=null))}update_pending_count(t){this.#_(t),this.#u+=t,this.#v&&sn(this.#v,this.#u)}get_effect_pending(){return this.#y(),i(this.#v)}error(t){var n=this.#n.onerror;let r=this.#n.failed;if(this.#h||!n&&!r)throw t;this.#a&&(Ve(this.#a),this.#a=null),this.#i&&(Ve(this.#i),this.#i=null),this.#o&&(Ve(this.#o),this.#o=null);var a=!1,s=!1;const o=()=>{if(a){Fo();return}a=!0,s&&Lo(),pt.ensure(),this.#u=0,this.#o!==null&&tn(this.#o,()=>{this.#o=null}),this.#e=this.has_pending_snippet(),this.#a=this.#p(()=>(this.#h=!1,rt(()=>this.#l(this.#t)))),this.#f>0?this.#m():this.#e=!1};var c=ne;try{Ye(null),s=!0,n?.(t,o),s=!1}catch(l){an(l,this.#s&&this.#s.parent)}finally{Ye(c)}r&&dn(()=>{this.#o=this.#p(()=>{pt.ensure(),this.#h=!0;try{return rt(()=>{r(this.#t,()=>t,()=>o)})}catch(l){return an(l,this.#s.parent),null}finally{this.#h=!1}})})}}function Zo(e,t,n){for(var r=[],a=t.length,s=0;s<a;s++)Vr(t[s].e,r,!0);As(r,()=>{var o=r.length===0&&n!==null;if(o){var c=n,l=c.parentNode;ll(l),l.append(c),e.items.clear(),dt(e,t[0].prev,t[a-1].next)}for(var d=0;d<a;d++){var f=t[d];o||(e.items.delete(f.k),dt(e,f.prev,f.next)),Ve(f.e,!o)}e.first===t[0]&&(e.first=t[0].prev)})}function Fe(e,t,n,r,a,s=null){var o=e,c=new Map,l=null,d=(t&os)!==0,f=(t&ss)!==0,g=(t&is)!==0;if(d){var h=e;o=h.appendChild(Et())}var _=null,x=rl(()=>{var I=n();return ls(I)?I:I==null?[]:Or(I)}),O,k=!0;function M(){Jo(E,O,o,t,r),_!==null&&(O.length===0?(_.fragment?(o.before(_.fragment),_.fragment=null):Xr(_.effect),H.first=_.effect):tn(_.effect,()=>{_=null}))}var H=Yr(()=>{O=i(x);for(var I=O.length,N=new Set,z=me,Q=null,U=Ss(),W=0;W<I;W+=1){var J=O[W],A=r(J,W),te=k?null:c.get(A);te?(f&&sn(te.v,J),g?sn(te.i,W):te.i=W,U&&z.skipped_effects.delete(te.e)):(te=$o(k?o:null,Q,J,A,W,a,t,n),k&&(te.o=!0,Q===null?l=te:Q.next=te,Q=te),c.set(A,te)),N.add(A)}if(I===0&&s&&!_)if(k)_={fragment:null,effect:rt(()=>s(o))};else{var ue=document.createDocumentFragment(),fe=Et();ue.append(fe),_={fragment:ue,effect:rt(()=>s(fe))}}if(!k)if(U){for(const[xe,De]of c)N.has(xe)||z.skipped_effects.add(De.e);z.oncommit(M),z.ondiscard(()=>{})}else M();i(x)}),E={effect:H,items:c,first:l};k=!1}function Jo(e,t,n,r,a){var s=(r&_o)!==0,o=t.length,c=e.items,l=e.first,d,f=null,g,h=[],_=[],x,O,k,M;if(s)for(M=0;M<o;M+=1)x=t[M],O=a(x,M),k=c.get(O),k.o&&(k.a?.measure(),(g??=new Set).add(k));for(M=0;M<o;M+=1){if(x=t[M],O=a(x,M),k=c.get(O),e.first??=k,!k.o){k.o=!0;var H=f?f.next:l;dt(e,f,k),dt(e,k,H),hr(k,H,n),f=k,h=[],_=[],l=f.next;continue}if((k.e.f&$e)!==0&&(Xr(k.e),s&&(k.a?.unfix(),(g??=new Set).delete(k))),k!==l){if(d!==void 0&&d.has(k)){if(h.length<_.length){var E=_[0],I;f=E.prev;var N=h[0],z=h[h.length-1];for(I=0;I<h.length;I+=1)hr(h[I],E,n);for(I=0;I<_.length;I+=1)d.delete(_[I]);dt(e,N.prev,z.next),dt(e,f,N),dt(e,z,E),l=E,f=z,M-=1,h=[],_=[]}else d.delete(k),hr(k,l,n),dt(e,k.prev,k.next),dt(e,k,f===null?e.first:f.next),dt(e,f,k),f=k;continue}for(h=[],_=[];l!==null&&l.k!==O;)(l.e.f&$e)===0&&(d??=new Set).add(l),_.push(l),l=l.next;if(l===null)continue;k=l}h.push(k),f=k,l=k.next}let Q=c.size>o;if(l!==null||d!==void 0){for(var U=d===void 0?[]:Or(d);l!==null;)(l.e.f&$e)===0&&U.push(l),l=l.next;var W=U.length;if(Q=c.size-W>o,W>0){var J=(r&os)!==0&&o===0?n:null;if(s){for(M=0;M<W;M+=1)U[M].a?.measure();for(M=0;M<W;M+=1)U[M].a?.fix()}Zo(e,U,J)}}if(Q)for(const A of c.values())A.o||(dt(e,f,A),f=A);e.effect.last=f&&f.e,s&&dn(()=>{if(g!==void 0)for(k of g)k.a?.apply()})}function $o(e,t,n,r,a,s,o,c){var l=(o&ss)!==0,d=(o&yo)===0,f=l?d?sl(n,!1,!1):Xt(n):n,g=(o&is)===0?a:Xt(a),h={i:g,v:f,k:r,a:null,e:null,o:!1,prev:t,next:null};try{if(e===null){var _=document.createDocumentFragment();_.append(e=Et())}return h.e=rt(()=>s(e,f,g,c)),t!==null&&(t.next=h),h}finally{}}function hr(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,a=t?t.e.nodes_start:n,s=e.e.nodes_start;s!==null&&s!==r;){var o=Sn(s);a.before(s),s=o}}function dt(e,t,n){t===null?(e.first=n,e.effect.first=n&&n.e):(t.e.next&&(t.e.next.prev=null),t.next=n,t.e.next=n&&n.e),n!==null&&(n.e.prev&&(n.e.prev.next=null),n.prev=t,n.e.prev=t&&t.e)}function el(e,t,n,r){const a=qr;if(n.length===0&&e.length===0){r(t.map(a));return}var s=me,o=oe,c=tl();function l(){Promise.all(n.map(d=>nl(d))).then(d=>{c();try{r([...t.map(a),...d])}catch(f){(o.f&Nt)===0&&an(f,o)}s?.deactivate(),Bn()}).catch(d=>{an(d,o)})}e.length>0?Promise.all(e).then(()=>{c();try{return l()}finally{s?.deactivate(),Bn()}}):l()}function tl(){var e=oe,t=ne,n=st,r=me;return function(s=!0){gt(e),Ye(t),rn(n),s&&r?.activate()}}function Bn(){gt(null),Ye(null),rn(null)}function qr(e){var t=Ae|Xe,n=ne!==null&&(ne.f&Ae)!==0?ne:null;return oe!==null&&(oe.f|=cn),{ctx:st,deps:null,effects:null,equals:fs,f:t,fn:e,reactions:null,rv:0,v:Re,wv:0,parent:n??oe,ac:null}}function nl(e,t){let n=oe;n===null&&Ao();var r=n.b,a=void 0,s=Xt(Re),o=!ne,c=new Map;return vl(()=>{var l=ds();a=l.promise;try{Promise.resolve(e()).then(l.resolve,l.reject).then(()=>{d===me&&d.committed&&d.deactivate(),Bn()})}catch(h){l.reject(h),Bn()}var d=me;if(o){var f=!r.is_pending();r.update_pending_count(1),d.increment(f),c.get(d)?.reject($t),c.delete(d),c.set(d,l)}const g=(h,_=void 0)=>{if(d.activate(),_)_!==$t&&(s.f|=jt,sn(s,_));else{(s.f&jt)!==0&&(s.f^=jt),sn(s,h);for(const[x,O]of c){if(c.delete(x),x===d)break;O.reject($t)}}o&&(r.update_pending_count(-1),d.decrement(f))};l.promise.then(g,h=>g(null,h||"unknown"))}),Is(()=>{for(const l of c.values())l.reject($t)}),new Promise(l=>{function d(f){function g(){f===a?l(s):d(a)}f.then(g,g)}d(a)})}function G(e){const t=qr(e);return zs(t),t}function rl(e){const t=qr(e);return t.equals=vs,t}function _s(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)Ve(t[n])}}function al(e){for(var t=e.parent;t!==null;){if((t.f&Ae)===0)return(t.f&Nt)===0?t:null;t=t.parent}return null}function Ur(e){var t,n=oe;gt(al(e));try{e.f&=~Yt,_s(e),t=Bs(e)}finally{gt(n)}return t}function ys(e){var t=Ur(e);if(e.equals(t)||(me?.is_fork||(e.v=t),e.wv=Ns()),!un)if(at!==null)(_n()||me?.is_fork)&&at.set(e,t);else{var n=(e.f&ft)===0?At:Ne;je(e,n)}}let kr=new Set;const Bt=new Map;let ws=!1;function Xt(e,t){var n={f:0,v:e,reactions:null,equals:fs,rv:0,wv:0};return n}function q(e,t){const n=Xt(e);return zs(n),n}function sl(e,t=!1,n=!0){const r=Xt(e);return t||(r.equals=vs),r}function b(e,t,n=!1){ne!==null&&(!mt||(ne.f&Ha)!==0)&&hs()&&(ne.f&(Ae|Mt|Lr|Ha))!==0&&!St?.includes(e)&&Bo();let r=n?ge(t):t;return sn(e,r)}function sn(e,t){if(!e.equals(t)){var n=e.v;un?Bt.set(e,t):Bt.set(e,n),e.v=t;var r=pt.ensure();r.capture(e,n),(e.f&Ae)!==0&&((e.f&Xe)!==0&&Ur(e),je(e,(e.f&ft)!==0?Ne:At)),e.wv=Ns(),ks(e,Xe),oe!==null&&(oe.f&Ne)!==0&&(oe.f&(Ht|Gt))===0&&(nt===null?ml([e]):nt.push(e)),!r.is_fork&&kr.size>0&&!ws&&il()}return t}function il(){ws=!1;var e=Lt;Fn(!0);const t=Array.from(kr);try{for(const n of t)(n.f&Ne)!==0&&je(n,At),In(n)&&wn(n)}finally{Fn(e)}kr.clear()}function gn(e){b(e,e.v+1)}function ks(e,t){var n=e.reactions;if(n!==null)for(var r=n.length,a=0;a<r;a++){var s=n[a],o=s.f,c=(o&Xe)===0;if(c&&je(s,t),(o&Ae)!==0){var l=s;at?.delete(l),(o&Yt)===0&&(o&ft&&(s.f|=Yt),ks(l,At))}else c&&((o&Mt)!==0&&bt!==null&&bt.add(s),Vt(s))}}function ge(e){if(typeof e!="object"||e===null||zn in e)return e;const t=cs(e);if(t!==Io&&t!==Co)return e;var n=new Map,r=ls(e),a=q(0),s=Wt,o=c=>{if(Wt===s)return c();var l=ne,d=Wt;Ye(null),za(s);var f=c();return Ye(l),za(d),f};return r&&n.set("length",q(e.length)),new Proxy(e,{defineProperty(c,l,d){(!("value"in d)||d.configurable===!1||d.enumerable===!1||d.writable===!1)&&No();var f=n.get(l);return f===void 0?f=o(()=>{var g=q(d.value);return n.set(l,g),g}):b(f,d.value,!0),!0},deleteProperty(c,l){var d=n.get(l);if(d===void 0){if(l in c){const f=o(()=>q(Re));n.set(l,f),gn(a)}}else b(d,Re),gn(a);return!0},get(c,l,d){if(l===zn)return e;var f=n.get(l),g=l in c;if(f===void 0&&(!g||mn(c,l)?.writable)&&(f=o(()=>{var _=ge(g?c[l]:Re),x=q(_);return x}),n.set(l,f)),f!==void 0){var h=i(f);return h===Re?void 0:h}return Reflect.get(c,l,d)},getOwnPropertyDescriptor(c,l){var d=Reflect.getOwnPropertyDescriptor(c,l);if(d&&"value"in d){var f=n.get(l);f&&(d.value=i(f))}else if(d===void 0){var g=n.get(l),h=g?.v;if(g!==void 0&&h!==Re)return{enumerable:!0,configurable:!0,value:h,writable:!0}}return d},has(c,l){if(l===zn)return!0;var d=n.get(l),f=d!==void 0&&d.v!==Re||Reflect.has(c,l);if(d!==void 0||oe!==null&&(!f||mn(c,l)?.writable)){d===void 0&&(d=o(()=>{var h=f?ge(c[l]):Re,_=q(h);return _}),n.set(l,d));var g=i(d);if(g===Re)return!1}return f},set(c,l,d,f){var g=n.get(l),h=l in c;if(r&&l==="length")for(var _=d;_<g.v;_+=1){var x=n.get(_+"");x!==void 0?b(x,Re):_ in c&&(x=o(()=>q(Re)),n.set(_+"",x))}if(g===void 0)(!h||mn(c,l)?.writable)&&(g=o(()=>q(void 0)),b(g,ge(d)),n.set(l,g));else{h=g.v!==Re;var O=o(()=>ge(d));b(g,O)}var k=Reflect.getOwnPropertyDescriptor(c,l);if(k?.set&&k.set.call(f,d),!h){if(r&&typeof l=="string"){var M=n.get("length"),H=Number(l);Number.isInteger(H)&&H>=M.v&&b(M,H+1)}gn(a)}return!0},ownKeys(c){i(a);var l=Reflect.ownKeys(c).filter(g=>{var h=n.get(g);return h===void 0||h.v!==Re});for(var[d,f]of n)f.v!==Re&&!(d in c)&&l.push(d);return l},setPrototypeOf(){jo()}})}var Da,bs,xs,Ts;function ol(){if(Da===void 0){Da=window,bs=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;xs=mn(t,"firstChild").get,Ts=mn(t,"nextSibling").get,Ma(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Ma(n)&&(n.__t=void 0)}}function Et(e=""){return document.createTextNode(e)}function Ln(e){return xs.call(e)}function Sn(e){return Ts.call(e)}function u(e,t){return Ln(e)}function Se(e,t=!1){{var n=Ln(e);return n instanceof Comment&&n.data===""?Sn(n):n}}function v(e,t=1,n=!1){let r=e;for(;t--;)r=Sn(r);return r}function ll(e){e.textContent=""}function Ss(){return!1}function Wr(e){var t=ne,n=oe;Ye(null),gt(null);try{return e()}finally{Ye(t),gt(n)}}function cl(e){oe===null&&(ne===null&&zo(),Ro()),un&&Do()}function dl(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function Dt(e,t,n){var r=oe;r!==null&&(r.f&$e)!==0&&(e|=$e);var a={ctx:st,deps:null,nodes_start:null,nodes_end:null,f:e|Xe|ft,first:null,fn:t,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{wn(a),a.f|=Br}catch(c){throw Ve(a),c}else t!==null&&Vt(a);var s=a;if(n&&s.deps===null&&s.teardown===null&&s.nodes_start===null&&s.first===s.last&&(s.f&cn)===0&&(s=s.first,(e&Mt)!==0&&(e&nn)!==0&&s!==null&&(s.f|=nn)),s!==null&&(s.parent=r,r!==null&&dl(s,r),ne!==null&&(ne.f&Ae)!==0&&(e&Gt)===0)){var o=ne;(o.effects??=[]).push(s)}return a}function _n(){return ne!==null&&!mt}function Is(e){const t=Dt(jr,null,!1);return je(t,Ne),t.teardown=e,t}function Tt(e){cl();var t=oe.f,n=!ne&&(t&Ht)!==0&&(t&Br)===0;if(n){var r=st;(r.e??=[]).push(e)}else return Cs(e)}function Cs(e){return Dt(Nr|Mo,e,!1)}function ul(e){pt.ensure();const t=Dt(Gt|cn,e,!0);return(n={})=>new Promise(r=>{n.outro?tn(t,()=>{Ve(t),r(void 0)}):(Ve(t),r(void 0))})}function fl(e){return Dt(Nr,e,!1)}function vl(e){return Dt(Lr|cn,e,!0)}function Es(e,t=0){return Dt(jr|t,e,!0)}function Y(e,t=[],n=[],r=[]){el(r,t,n,a=>{Dt(jr,()=>e(...a.map(i)),!0)})}function Yr(e,t=0){var n=Dt(Mt|t,e,!0);return n}function rt(e){return Dt(Ht|cn,e,!0)}function Ps(e){var t=e.teardown;if(t!==null){const n=un,r=ne;Ra(!0),Ye(null);try{t.call(null)}finally{Ra(n),Ye(r)}}}function Ms(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const a=n.ac;a!==null&&Wr(()=>{a.abort($t)});var r=n.next;(n.f&Gt)!==0?n.parent=null:Ve(n,t),n=r}}function hl(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&Ht)===0&&Ve(t),t=n}}function Ve(e,t=!0){var n=!1;(t||(e.f&us)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(pl(e.nodes_start,e.nodes_end),n=!0),Ms(e,t&&!n),qn(e,0),je(e,Nt);var r=e.transitions;if(r!==null)for(const s of r)s.stop();Ps(e);var a=e.parent;a!==null&&a.first!==null&&Hs(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function pl(e,t){for(;e!==null;){var n=e===t?null:Sn(e);e.remove(),e=n}}function Hs(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function tn(e,t,n=!0){var r=[];Vr(e,r,!0),As(r,()=>{n&&Ve(e),t&&t()})}function As(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var a of e)a.out(r)}else t()}function Vr(e,t,n){if((e.f&$e)===0){if(e.f^=$e,e.transitions!==null)for(const o of e.transitions)(o.is_global||n)&&t.push(o);for(var r=e.first;r!==null;){var a=r.next,s=(r.f&nn)!==0||(r.f&Ht)!==0&&(e.f&Mt)!==0;Vr(r,t,s?n:!1),r=a}}}function Xr(e){Ds(e,!0)}function Ds(e,t){if((e.f&$e)!==0){e.f^=$e,(e.f&Ne)===0&&(je(e,Xe),Vt(e));for(var n=e.first;n!==null;){var r=n.next,a=(n.f&nn)!==0||(n.f&Ht)!==0;Ds(n,a?t:!1),n=r}if(e.transitions!==null)for(const s of e.transitions)(s.is_global||t)&&s.in()}}function Rs(e,t){for(var n=e.nodes_start,r=e.nodes_end;n!==null;){var a=n===r?null:Sn(n);t.append(n),n=a}}let Lt=!1;function Fn(e){Lt=e}let un=!1;function Ra(e){un=e}let ne=null,mt=!1;function Ye(e){ne=e}let oe=null;function gt(e){oe=e}let St=null;function zs(e){ne!==null&&(St===null?St=[e]:St.push(e))}let Le=null,Ze=0,nt=null;function ml(e){nt=e}let Os=1,yn=0,Wt=yn;function za(e){Wt=e}function Ns(){return++Os}function In(e){var t=e.f;if((t&Xe)!==0)return!0;if(t&Ae&&(e.f&=~Yt),(t&At)!==0){var n=e.deps;if(n!==null)for(var r=n.length,a=0;a<r;a++){var s=n[a];if(In(s)&&ys(s),s.wv>e.wv)return!0}(t&ft)!==0&&at===null&&je(e,Ne)}return!1}function js(e,t,n=!0){var r=e.reactions;if(r!==null&&!St?.includes(e))for(var a=0;a<r.length;a++){var s=r[a];(s.f&Ae)!==0?js(s,t,!1):t===s&&(n?je(s,Xe):(s.f&Ne)!==0&&je(s,At),Vt(s))}}function Bs(e){var t=Le,n=Ze,r=nt,a=ne,s=St,o=st,c=mt,l=Wt,d=e.f;Le=null,Ze=0,nt=null,ne=(d&(Ht|Gt))===0?e:null,St=null,rn(e.ctx),mt=!1,Wt=++yn,e.ac!==null&&(Wr(()=>{e.ac.abort($t)}),e.ac=null);try{e.f|=yr;var f=e.fn,g=f(),h=e.deps;if(Le!==null){var _;if(qn(e,Ze),h!==null&&Ze>0)for(h.length=Ze+Le.length,_=0;_<Le.length;_++)h[Ze+_]=Le[_];else e.deps=h=Le;if(Lt&&_n()&&(e.f&ft)!==0)for(_=Ze;_<h.length;_++)(h[_].reactions??=[]).push(e)}else h!==null&&Ze<h.length&&(qn(e,Ze),h.length=Ze);if(hs()&&nt!==null&&!mt&&h!==null&&(e.f&(Ae|At|Xe))===0)for(_=0;_<nt.length;_++)js(nt[_],e);return a!==null&&a!==e&&(yn++,nt!==null&&(r===null?r=nt:r.push(...nt))),(e.f&jt)!==0&&(e.f^=jt),g}catch(x){return ps(x)}finally{e.f^=yr,Le=t,Ze=n,nt=r,ne=a,St=s,rn(o),mt=c,Wt=l}}function gl(e,t){let n=t.reactions;if(n!==null){var r=xo.call(n,e);if(r!==-1){var a=n.length-1;a===0?n=t.reactions=null:(n[r]=n[a],n.pop())}}n===null&&(t.f&Ae)!==0&&(Le===null||!Le.includes(t))&&(je(t,At),(t.f&ft)!==0&&(t.f^=ft,t.f&=~Yt),_s(t),qn(t,0))}function qn(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)gl(e,n[r])}function wn(e){var t=e.f;if((t&Nt)===0){je(e,Ne);var n=oe,r=Lt;oe=e,Lt=!0;try{(t&(Mt|Po))!==0?hl(e):Ms(e),Ps(e);var a=Bs(e);e.teardown=typeof a=="function"?a:null,e.wv=Os;var s;_r&&Uo&&(e.f&Xe)!==0&&e.deps}finally{Lt=r,oe=n}}}function i(e){var t=e.f,n=(t&Ae)!==0;if(ne!==null&&!mt){var r=oe!==null&&(oe.f&Nt)!==0;if(!r&&!St?.includes(e)){var a=ne.deps;if((ne.f&yr)!==0)e.rv<yn&&(e.rv=yn,Le===null&&a!==null&&a[Ze]===e?Ze++:Le===null?Le=[e]:Le.includes(e)||Le.push(e));else{(ne.deps??=[]).push(e);var s=e.reactions;s===null?e.reactions=[ne]:s.includes(ne)||s.push(ne)}}}if(un){if(Bt.has(e))return Bt.get(e);if(n){var o=e,c=o.v;return((o.f&Ne)===0&&o.reactions!==null||Fs(o))&&(c=Ur(o)),Bt.set(o,c),c}}else n&&(!at?.has(e)||me?.is_fork&&!_n())&&(o=e,In(o)&&ys(o),Lt&&_n()&&(o.f&ft)===0&&Ls(o));if(at?.has(e))return at.get(e);if((e.f&jt)!==0)throw e.v;return e.v}function Ls(e){if(e.deps!==null){e.f^=ft;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&Ae)!==0&&(t.f&ft)===0&&Ls(t)}}function Fs(e){if(e.v===Re)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(Bt.has(t)||(t.f&Ae)!==0&&Fs(t))return!0;return!1}function qs(e){var t=mt;try{return mt=!0,e()}finally{mt=t}}const _l=-7169;function je(e,t){e.f=e.f&_l|t}const Us=new Set,br=new Set;function yl(e,t,n,r={}){function a(s){if(r.capture||vn.call(t,s),!s.cancelBubble)return Wr(()=>n?.call(this,s))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?dn(()=>{t.addEventListener(e,a,r)}):t.addEventListener(e,a,r),a}function wl(e,t,n,r,a){var s={capture:r,passive:a},o=yl(e,t,n,s);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&Is(()=>{t.removeEventListener(e,o,s)})}function Ge(e){for(var t=0;t<e.length;t++)Us.add(e[t]);for(var n of br)n(e)}let Oa=null;function vn(e){var t=this,n=t.ownerDocument,r=e.type,a=e.composedPath?.()||[],s=a[0]||e.target;Oa=e;var o=0,c=Oa===e&&e.__root;if(c){var l=a.indexOf(c);if(l!==-1&&(t===document||t===window)){e.__root=t;return}var d=a.indexOf(t);if(d===-1)return;l<=d&&(o=l)}if(s=a[o]||e.target,s!==t){To(e,"currentTarget",{configurable:!0,get(){return s||n}});var f=ne,g=oe;Ye(null),gt(null);try{for(var h,_=[];s!==null;){var x=s.assignedSlot||s.parentNode||s.host||null;try{var O=s["__"+r];O!=null&&(!s.disabled||e.target===s)&&O.call(s,e)}catch(k){h?_.push(k):h=k}if(e.cancelBubble||x===t||x===null)break;s=x}if(h){for(let k of _)queueMicrotask(()=>{throw k});throw h}}finally{e.__root=t,delete e.currentTarget,Ye(f),gt(g)}}}function kl(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Un(e,t){var n=oe;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function D(e,t){var n=(t&wo)!==0,r=(t&ko)!==0,a,s=!e.startsWith("<!>");return()=>{a===void 0&&(a=kl(s?e:"<!>"+e),n||(a=Ln(a)));var o=r||bs?document.importNode(a,!0):a.cloneNode(!0);if(n){var c=Ln(o),l=o.lastChild;Un(c,l)}else Un(o,o);return o}}function Na(e=""){{var t=Et(e+"");return Un(t,t),t}}function He(){var e=document.createDocumentFragment(),t=document.createComment(""),n=Et();return e.append(t,n),Un(t,n),e}function S(e,t){e!==null&&e.before(t)}const bl=["touchstart","touchmove"];function xl(e){return bl.includes(e)}function w(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function Tl(e,t){return Sl(e,t)}const Qt=new Map;function Sl(e,{target:t,anchor:n,props:r={},events:a,context:s,intro:o=!0}){ol();var c=new Set,l=g=>{for(var h=0;h<g.length;h++){var _=g[h];if(!c.has(_)){c.add(_);var x=xl(_);t.addEventListener(_,vn,{passive:x});var O=Qt.get(_);O===void 0?(document.addEventListener(_,vn,{passive:x}),Qt.set(_,1)):Qt.set(_,O+1)}}};l(Or(Us)),br.add(l);var d=void 0,f=ul(()=>{var g=n??t.appendChild(Et());return Ko(g,{pending:()=>{}},h=>{if(s){Ie({});var _=st;_.c=s}a&&(r.$$events=a),d=e(h,r)||{},s&&Ce()}),()=>{for(var h of c){t.removeEventListener(h,vn);var _=Qt.get(h);--_===0?(document.removeEventListener(h,vn),Qt.delete(h)):Qt.set(h,_)}br.delete(l),g!==n&&g.parentNode?.removeChild(g)}});return Il.set(d,f),d}let Il=new WeakMap;class Cl{anchor;#e=new Map;#t=new Map;#r=new Map;#n=new Set;#l=!0;constructor(t,n=!0){this.anchor=t,this.#l=n}#s=()=>{var t=me;if(this.#e.has(t)){var n=this.#e.get(t),r=this.#t.get(n);if(r)Xr(r),this.#n.delete(n);else{var a=this.#r.get(n);a&&(this.#t.set(n,a.effect),this.#r.delete(n),a.fragment.lastChild.remove(),this.anchor.before(a.fragment),r=a.effect)}for(const[s,o]of this.#e){if(this.#e.delete(s),s===t)break;const c=this.#r.get(o);c&&(Ve(c.effect),this.#r.delete(o))}for(const[s,o]of this.#t){if(s===n||this.#n.has(s))continue;const c=()=>{if(Array.from(this.#e.values()).includes(s)){var d=document.createDocumentFragment();Rs(o,d),d.append(Et()),this.#r.set(s,{effect:o,fragment:d})}else Ve(o);this.#n.delete(s),this.#t.delete(s)};this.#l||!r?(this.#n.add(s),tn(o,c,!1)):c()}}};#a=t=>{this.#e.delete(t);const n=Array.from(this.#e.values());for(const[r,a]of this.#r)n.includes(r)||(Ve(a.effect),this.#r.delete(r))};ensure(t,n){var r=me,a=Ss();if(n&&!this.#t.has(t)&&!this.#r.has(t))if(a){var s=document.createDocumentFragment(),o=Et();s.append(o),this.#r.set(t,{effect:rt(()=>n(o)),fragment:s})}else this.#t.set(t,rt(()=>n(this.anchor)));if(this.#e.set(r,t),a){for(const[c,l]of this.#t)c===t?r.skipped_effects.delete(l):r.skipped_effects.add(l);for(const[c,l]of this.#r)c===t?r.skipped_effects.delete(l.effect):r.skipped_effects.add(l.effect);r.oncommit(this.#s),r.ondiscard(this.#a)}else this.#s()}}function F(e,t,n=!1){var r=new Cl(e),a=n?nn:0;function s(o,c){r.ensure(o,c)}Yr(()=>{var o=!1;t((c,l=!0)=>{o=!0,s(l,c)}),o||s(!1,null)},a)}const ja=[...` 	
\r\fÂ \v\uFEFF`];function El(e,t,n){var r=e==null?"":""+e;if(t&&(r=r?r+" "+t:t),n){for(var a in n)if(n[a])r=r?r+" "+a:a;else if(r.length)for(var s=a.length,o=0;(o=r.indexOf(a,o))>=0;){var c=o+s;(o===0||ja.includes(r[o-1]))&&(c===r.length||ja.includes(r[c]))?r=(o===0?"":r.substring(0,o))+r.substring(c+1):o=c}}return r===""?null:r}function Pl(e,t){return e==null?null:String(e)}function ze(e,t,n,r,a,s){var o=e.__className;if(o!==n||o===void 0){var c=El(n,r,s);c==null?e.removeAttribute("class"):e.className=c,e.__className=n}else if(s&&a!==s)for(var l in s){var d=!!s[l];(a==null||d!==!!a[l])&&e.classList.toggle(l,d)}return s}function Ot(e,t,n,r){var a=e.__style;if(a!==t){var s=Pl(t);s==null?e.removeAttribute("style"):e.style.cssText=s,e.__style=t}return r}const Ml=Symbol("is custom element"),Hl=Symbol("is html");function L(e,t,n,r){var a=Al(e);a[t]!==(a[t]=n)&&(t==="loading"&&(e[Ho]=n),n==null?e.removeAttribute(t):typeof n!="string"&&Dl(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function Al(e){return e.__attributes??={[Ml]:e.nodeName.includes("-"),[Hl]:e.namespaceURI===bo}}var Ba=new Map;function Dl(e){var t=e.getAttribute("is")||e.nodeName,n=Ba.get(t);if(n)return n;Ba.set(t,n=[]);for(var r,a=e,s=Element.prototype;s!==a;){r=So(a);for(var o in r)r[o].set&&n.push(o);a=cs(a)}return n}function La(e,t){return e===t||e?.[zn]===t}function Rl(e={},t,n,r){return fl(()=>{var a,s;return Es(()=>{a=s,s=[],qs(()=>{e!==n(...s)&&(t(e,...s),a&&La(n(...a),e)&&t(null,...a))})}),()=>{dn(()=>{s&&La(n(...s),e)&&t(null,...s)})}}),e}function zl(e,t,n,r){var a=r,s=!0,o=()=>(s&&(s=!1,a=r),a),c;c=e[t],c===void 0&&r!==void 0&&(c=o());var l;return l=()=>{var d=e[t];return d===void 0?o():(s=!0,d)},l}function Me(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Ol=typeof Symbol=="function"&&Symbol.observable||"@@observable",Fa=Ol,pr=()=>Math.random().toString(36).substring(7).split("").join("."),Nl={INIT:`@@redux/INIT${pr()}`,REPLACE:`@@redux/REPLACE${pr()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${pr()}`},Wn=Nl;function Gr(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Ws(e,t,n){if(typeof e!="function")throw new Error(Me(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Me(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Me(1));return n(Ws)(e,t)}let r=e,a=t,s=new Map,o=s,c=0,l=!1;function d(){o===s&&(o=new Map,s.forEach((k,M)=>{o.set(M,k)}))}function f(){if(l)throw new Error(Me(3));return a}function g(k){if(typeof k!="function")throw new Error(Me(4));if(l)throw new Error(Me(5));let M=!0;d();const H=c++;return o.set(H,k),function(){if(M){if(l)throw new Error(Me(6));M=!1,d(),o.delete(H),s=null}}}function h(k){if(!Gr(k))throw new Error(Me(7));if(typeof k.type>"u")throw new Error(Me(8));if(typeof k.type!="string")throw new Error(Me(17));if(l)throw new Error(Me(9));try{l=!0,a=r(a,k)}finally{l=!1}return(s=o).forEach(H=>{H()}),k}function _(k){if(typeof k!="function")throw new Error(Me(10));r=k,h({type:Wn.REPLACE})}function x(){const k=g;return{subscribe(M){if(typeof M!="object"||M===null)throw new Error(Me(11));function H(){const I=M;I.next&&I.next(f())}return H(),{unsubscribe:k(H)}},[Fa](){return this}}}return h({type:Wn.INIT}),{dispatch:h,subscribe:g,getState:f,replaceReducer:_,[Fa]:x}}function jl(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:Wn.INIT})>"u")throw new Error(Me(12));if(typeof n(void 0,{type:Wn.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Me(13))})}function Bl(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let a;try{jl(n)}catch(s){a=s}return function(o={},c){if(a)throw a;let l=!1;const d={};for(let f=0;f<r.length;f++){const g=r[f],h=n[g],_=o[g],x=h(_,c);if(typeof x>"u")throw c&&c.type,new Error(Me(14));d[g]=x,l=l||x!==_}return l=l||r.length!==Object.keys(o).length,l?d:o}}function Yn(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function Ll(...e){return t=>(n,r)=>{const a=t(n,r);let s=()=>{throw new Error(Me(15))};const o={getState:a.getState,dispatch:(l,...d)=>s(l,...d)},c=e.map(l=>l(o));return s=Yn(...c)(a.dispatch),{...a,dispatch:s}}}function Fl(e){return Gr(e)&&"type"in e&&typeof e.type=="string"}var Ys=Symbol.for("immer-nothing"),qa=Symbol.for("immer-draftable"),qe=Symbol.for("immer-state");function ut(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Je=Object,on=Je.getPrototypeOf,Vn="constructor",$n="prototype",xr="configurable",Xn="enumerable",On="writable",kn="value",Pt=e=>!!e&&!!e[qe];function _t(e){return e?Vs(e)||er(e)||!!e[qa]||!!e[Vn]?.[qa]||tr(e)||nr(e):!1}var ql=Je[$n][Vn].toString(),Ua=new WeakMap;function Vs(e){if(!e||!Kr(e))return!1;const t=on(e);if(t===null||t===Je[$n])return!0;const n=Je.hasOwnProperty.call(t,Vn)&&t[Vn];if(n===Object)return!0;if(!Jt(n))return!1;let r=Ua.get(n);return r===void 0&&(r=Function.toString.call(n),Ua.set(n,r)),r===ql}function Cn(e,t,n=!0){En(e)===0?(n?Reflect.ownKeys(e):Je.keys(e)).forEach(a=>{t(a,e[a],e)}):e.forEach((r,a)=>t(a,r,e))}function En(e){const t=e[qe];return t?t.type_:er(e)?1:tr(e)?2:nr(e)?3:0}var Wa=(e,t,n=En(e))=>n===2?e.has(t):Je[$n].hasOwnProperty.call(e,t),Tr=(e,t,n=En(e))=>n===2?e.get(t):e[t],Gn=(e,t,n,r=En(e))=>{r===2?e.set(t,n):r===3?e.add(n):e[t]=n};function Ul(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var er=Array.isArray,tr=e=>e instanceof Map,nr=e=>e instanceof Set,Kr=e=>typeof e=="object",Jt=e=>typeof e=="function",mr=e=>typeof e=="boolean",xt=e=>e.copy_||e.base_,Qr=e=>e.modified_?e.copy_:e.base_;function Sr(e,t){if(tr(e))return new Map(e);if(nr(e))return new Set(e);if(er(e))return Array[$n].slice.call(e);const n=Vs(e);if(t===!0||t==="class_only"&&!n){const r=Je.getOwnPropertyDescriptors(e);delete r[qe];let a=Reflect.ownKeys(r);for(let s=0;s<a.length;s++){const o=a[s],c=r[o];c[On]===!1&&(c[On]=!0,c[xr]=!0),(c.get||c.set)&&(r[o]={[xr]:!0,[On]:!0,[Xn]:c[Xn],[kn]:e[o]})}return Je.create(on(e),r)}else{const r=on(e);if(r!==null&&n)return{...e};const a=Je.create(r);return Je.assign(a,e)}}function Zr(e,t=!1){return rr(e)||Pt(e)||(En(e)>1&&Je.defineProperties(e,{set:An,add:An,clear:An,delete:An}),Je.freeze(e),t&&Cn(e,(n,r)=>{Zr(r,!0)},!1)),e}function Wl(){ut(2)}var An={[kn]:Wl};function rr(e){return e===null||!Kr(e)?!0:Je.isFrozen(e)}var Kn="MapSet",Ir="Patches",Xs={};function ln(e){const t=Xs[e];return t||ut(0,e),t}var Yl=e=>!!Xs[e],bn,Gs=()=>bn,Vl=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:Yl(Kn)?ln(Kn):void 0});function Ya(e,t){t&&(e.patchPlugin_=ln(Ir),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Cr(e){Er(e),e.drafts_.forEach(Xl),e.drafts_=null}function Er(e){e===bn&&(bn=e.parent_)}var Va=e=>bn=Vl(bn,e);function Xl(e){const t=e[qe];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Xa(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];if(e!==void 0&&e!==n){n[qe].modified_&&(Cr(t),ut(4)),_t(e)&&(e=Ga(t,e));const{patchPlugin_:a}=t;a&&a.generateReplacementPatches_(n[qe].base_,e,t)}else e=Ga(t,n);return Gl(t,e,!0),Cr(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Ys?e:void 0}function Ga(e,t){if(rr(t))return t;const n=t[qe];if(!n)return Jr(t,e.handledSet_,e);if(!ar(n,e))return t;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(e);Zs(n,e)}return n.copy_}function Gl(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Zr(t,n)}function Ks(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var ar=(e,t)=>e.scope_===t,Kl=[];function Qs(e,t,n,r){const a=xt(e),s=e.type_;if(r!==void 0&&Tr(a,r,s)===t){Gn(a,r,n,s);return}if(!e.draftLocations_){const c=e.draftLocations_=new Map;Cn(a,(l,d)=>{if(Pt(d)){const f=c.get(d)||[];f.push(l),c.set(d,f)}})}const o=e.draftLocations_.get(t)??Kl;for(const c of o)Gn(a,c,n,s)}function Ql(e,t,n){e.callbacks_.push(function(a){const s=t;if(!s||!ar(s,a))return;a.mapSetPlugin_?.fixSetContents(s);const o=Qr(s);Qs(e,s.draft_??s,o,n),Zs(s,a)})}function Zs(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||(e.assigned_?.size??0)>0)){const{patchPlugin_:r}=t;if(r){const a=r.getPath(e);a&&r.generatePatches_(e,a,t)}Ks(e)}}function Zl(e,t,n){const{scope_:r}=e;if(Pt(n)){const a=n[qe];ar(a,r)&&a.callbacks_.push(function(){Nn(e);const o=Qr(a);Qs(e,n,o,t)})}else _t(n)&&e.callbacks_.push(function(){const s=xt(e);Tr(s,t,e.type_)===n&&r.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&Jr(Tr(e.copy_,t,e.type_),r.handledSet_,r)})}function Jr(e,t,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||Pt(e)||t.has(e)||!_t(e)||rr(e)||(t.add(e),Cn(e,(r,a)=>{if(Pt(a)){const s=a[qe];if(ar(s,n)){const o=Qr(s);Gn(e,r,o,e.type_),Ks(s)}}else _t(a)&&Jr(a,t,n)})),e}function Jl(e,t){const n=er(e),r={type_:n?1:0,scope_:t?t.scope_:Gs(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let a=r,s=$r;n&&(a=[r],s=xn);const{revoke:o,proxy:c}=Proxy.revocable(a,s);return r.draft_=c,r.revoke_=o,[c,r]}var $r={get(e,t){if(t===qe)return e;const n=xt(e);if(!Wa(n,t,e.type_))return $l(e,n,t);const r=n[t];if(e.finalized_||!_t(r))return r;if(r===gr(e.base_,t)){Nn(e);const a=e.type_===1?+t:t,s=Mr(e.scope_,r,e,a);return e.copy_[a]=s}return r},has(e,t){return t in xt(e)},ownKeys(e){return Reflect.ownKeys(xt(e))},set(e,t,n){const r=Js(xt(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const a=gr(xt(e),t),s=a?.[qe];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_.set(t,!1),!0;if(Ul(n,a)&&(n!==void 0||Wa(e.base_,t,e.type_)))return!0;Nn(e),Pr(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_.set(t,!0),Zl(e,t,n)),!0},deleteProperty(e,t){return Nn(e),gr(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),Pr(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=xt(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{[On]:!0,[xr]:e.type_!==1||t!=="length",[Xn]:r[Xn],[kn]:n[t]}},defineProperty(){ut(11)},getPrototypeOf(e){return on(e.base_)},setPrototypeOf(){ut(12)}},xn={};Cn($r,(e,t)=>{xn[e]=function(){const n=arguments;return n[0]=n[0][0],t.apply(this,n)}});xn.deleteProperty=function(e,t){return xn.set.call(this,e,t,void 0)};xn.set=function(e,t,n){return $r.set.call(this,e[0],t,n,e[0])};function gr(e,t){const n=e[qe];return(n?xt(n):e)[t]}function $l(e,t,n){const r=Js(t,n);return r?kn in r?r[kn]:r.get?.call(e.draft_):void 0}function Js(e,t){if(!(t in e))return;let n=on(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=on(n)}}function Pr(e){e.modified_||(e.modified_=!0,e.parent_&&Pr(e.parent_))}function Nn(e){e.copy_||(e.assigned_=new Map,e.copy_=Sr(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var ec=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(t,n,r)=>{if(Jt(t)&&!Jt(n)){const s=n;n=t;const o=this;return function(l=s,...d){return o.produce(l,f=>n.call(this,f,...d))}}Jt(n)||ut(6),r!==void 0&&!Jt(r)&&ut(7);let a;if(_t(t)){const s=Va(this),o=Mr(s,t,void 0);let c=!0;try{a=n(o),c=!1}finally{c?Cr(s):Er(s)}return Ya(s,r),Xa(a,s)}else if(!t||!Kr(t)){if(a=n(t),a===void 0&&(a=t),a===Ys&&(a=void 0),this.autoFreeze_&&Zr(a,!0),r){const s=[],o=[];ln(Ir).generateReplacementPatches_(t,a,{patches_:s,inversePatches_:o}),r(s,o)}return a}else ut(1,t)},this.produceWithPatches=(t,n)=>{if(Jt(t))return(o,...c)=>this.produceWithPatches(o,l=>t(l,...c));let r,a;return[this.produce(t,n,(o,c)=>{r=o,a=c}),r,a]},mr(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),mr(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),mr(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){_t(e)||ut(8),Pt(e)&&(e=tc(e));const t=Va(this),n=Mr(t,e,void 0);return n[qe].isManual_=!0,Er(t),n}finishDraft(e,t){const n=e&&e[qe];(!n||!n.isManual_)&&ut(9);const{scope_:r}=n;return Ya(r,t),Xa(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const a=t[n];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}n>-1&&(t=t.slice(n+1));const r=ln(Ir).applyPatches_;return Pt(e)?r(e,t):this.produce(e,a=>r(a,t))}};function Mr(e,t,n,r){const[a,s]=tr(t)?ln(Kn).proxyMap_(t,n):nr(t)?ln(Kn).proxySet_(t,n):Jl(t,n);return(n?.scope_??Gs()).drafts_.push(a),s.callbacks_=n?.callbacks_??[],s.key_=r,n&&r!==void 0?Ql(n,s,r):s.callbacks_.push(function(l){l.mapSetPlugin_?.fixSetContents(s);const{patchPlugin_:d}=l;s.modified_&&d&&d.generatePatches_(s,[],l)}),a}function tc(e){return Pt(e)||ut(10,e),$s(e)}function $s(e){if(!_t(e)||rr(e))return e;const t=e[qe];let n,r=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Sr(e,t.scope_.immer_.useStrictShallowCopy_),r=t.scope_.immer_.shouldUseStrictIteration()}else n=Sr(e,!0);return Cn(n,(a,s)=>{Gn(n,a,$s(s))},r),t&&(t.finalized_=!1),n}var nc=new ec,ei=nc.produce;function ti(e){return({dispatch:n,getState:r})=>a=>s=>typeof s=="function"?s(n,r,e):a(s)}var rc=ti(),ac=ti,sc=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Yn:Yn.apply(null,arguments)};function Ka(e,t){function n(...r){if(t){let a=t(...r);if(!a)throw new Error(It(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>Fl(r)&&r.type===e,n}var ni=class hn extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,hn.prototype)}static get[Symbol.species](){return hn}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new hn(...t[0].concat(this)):new hn(...t.concat(this))}};function Qa(e){return _t(e)?ei(e,()=>{}):e}function Dn(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function ic(e){return typeof e=="boolean"}var oc=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:a=!0,actionCreatorCheck:s=!0}=t??{};let o=new ni;return n&&(ic(n)?o.push(rc):o.push(ac(n.extraArgument))),o},lc="RTK_autoBatch",Za=e=>t=>{setTimeout(t,e)},cc=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let a=!0,s=!1,o=!1;const c=new Set,l=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Za(10):e.type==="callback"?e.queueNotification:Za(e.timeout),d=()=>{o=!1,s&&(s=!1,c.forEach(f=>f()))};return Object.assign({},r,{subscribe(f){const g=()=>a&&f(),h=r.subscribe(g);return c.add(f),()=>{h(),c.delete(f)}},dispatch(f){try{return a=!f?.meta?.[lc],s=!a,s&&(o||(o=!0,l(d))),r.dispatch(f)}finally{a=!0}}})},dc=e=>function(n){const{autoBatch:r=!0}=n??{};let a=new ni(e);return r&&a.push(cc(typeof r=="object"?r:void 0)),a};function uc(e){const t=oc(),{reducer:n=void 0,middleware:r,devTools:a=!0,preloadedState:s=void 0,enhancers:o=void 0}=e||{};let c;if(typeof n=="function")c=n;else if(Gr(n))c=Bl(n);else throw new Error(It(1));let l;typeof r=="function"?l=r(t):l=t();let d=Yn;a&&(d=sc({trace:!1,...typeof a=="object"&&a}));const f=Ll(...l),g=dc(f);let h=typeof o=="function"?o(g):g();const _=d(...h);return Ws(c,s,_)}function ri(e){const t={},n=[];let r;const a={addCase(s,o){const c=typeof s=="string"?s:s.type;if(!c)throw new Error(It(28));if(c in t)throw new Error(It(29));return t[c]=o,a},addAsyncThunk(s,o){return o.pending&&(t[s.pending.type]=o.pending),o.rejected&&(t[s.rejected.type]=o.rejected),o.fulfilled&&(t[s.fulfilled.type]=o.fulfilled),o.settled&&n.push({matcher:s.settled,reducer:o.settled}),a},addMatcher(s,o){return n.push({matcher:s,reducer:o}),a},addDefaultCase(s){return r=s,a}};return e(a),[t,n,r]}function fc(e){return typeof e=="function"}function vc(e,t){let[n,r,a]=ri(t),s;if(fc(e))s=()=>Qa(e());else{const c=Qa(e);s=()=>c}function o(c=s(),l){let d=[n[l.type],...r.filter(({matcher:f})=>f(l)).map(({reducer:f})=>f)];return d.filter(f=>!!f).length===0&&(d=[a]),d.reduce((f,g)=>{if(g)if(Pt(f)){const _=g(f,l);return _===void 0?f:_}else{if(_t(f))return ei(f,h=>g(h,l));{const h=g(f,l);if(h===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return f},c)}return o.getInitialState=s,o}var hc=Symbol.for("rtk-slice-createasyncthunk");function pc(e,t){return`${e}/${t}`}function mc({creators:e}={}){const t=e?.asyncThunk?.[hc];return function(r){const{name:a,reducerPath:s=a}=r;if(!a)throw new Error(It(11));const o=(typeof r.reducers=="function"?r.reducers(_c()):r.reducers)||{},c=Object.keys(o),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(E,I){const N=typeof E=="string"?E:E.type;if(!N)throw new Error(It(12));if(N in l.sliceCaseReducersByType)throw new Error(It(13));return l.sliceCaseReducersByType[N]=I,d},addMatcher(E,I){return l.sliceMatchers.push({matcher:E,reducer:I}),d},exposeAction(E,I){return l.actionCreators[E]=I,d},exposeCaseReducer(E,I){return l.sliceCaseReducersByName[E]=I,d}};c.forEach(E=>{const I=o[E],N={reducerName:E,type:pc(a,E),createNotation:typeof r.reducers=="function"};wc(I)?bc(N,I,d,t):yc(N,I,d)});function f(){const[E={},I=[],N=void 0]=typeof r.extraReducers=="function"?ri(r.extraReducers):[r.extraReducers],z={...E,...l.sliceCaseReducersByType};return vc(r.initialState,Q=>{for(let U in z)Q.addCase(U,z[U]);for(let U of l.sliceMatchers)Q.addMatcher(U.matcher,U.reducer);for(let U of I)Q.addMatcher(U.matcher,U.reducer);N&&Q.addDefaultCase(N)})}const g=E=>E,h=new Map,_=new WeakMap;let x;function O(E,I){return x||(x=f()),x(E,I)}function k(){return x||(x=f()),x.getInitialState()}function M(E,I=!1){function N(Q){let U=Q[E];return typeof U>"u"&&I&&(U=Dn(_,N,k)),U}function z(Q=g){const U=Dn(h,I,()=>new WeakMap);return Dn(U,Q,()=>{const W={};for(const[J,A]of Object.entries(r.selectors??{}))W[J]=gc(A,Q,()=>Dn(_,Q,k),I);return W})}return{reducerPath:E,getSelectors:z,get selectors(){return z(N)},selectSlice:N}}const H={name:a,reducer:O,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:k,...M(s),injectInto(E,{reducerPath:I,...N}={}){const z=I??s;return E.inject({reducerPath:z,reducer:O},N),{...H,...M(z,!0)}}};return H}}function gc(e,t,n,r){function a(s,...o){let c=t(s);return typeof c>"u"&&r&&(c=n()),e(c,...o)}return a.unwrapped=e,a}var ai=mc();function _c(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function yc({type:e,reducerName:t,createNotation:n},r,a){let s,o;if("reducer"in r){if(n&&!kc(r))throw new Error(It(17));s=r.reducer,o=r.prepare}else s=r;a.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?Ka(e,o):Ka(e))}function wc(e){return e._reducerDefinitionType==="asyncThunk"}function kc(e){return e._reducerDefinitionType==="reducerWithPrepare"}function bc({type:e,reducerName:t},n,r,a){if(!a)throw new Error(It(18));const{payloadCreator:s,fulfilled:o,pending:c,rejected:l,settled:d,options:f}=n,g=a(e,s,f);r.exposeAction(t,g),o&&r.addCase(g.fulfilled,o),c&&r.addCase(g.pending,c),l&&r.addCase(g.rejected,l),d&&r.addMatcher(g.settled,d),r.exposeCaseReducer(t,{fulfilled:o||Rn,pending:c||Rn,rejected:l||Rn,settled:d||Rn})}function Rn(){}function It(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}const si={quinn:{level1:{level:1,hp:8,maxHp:8,ac:17,surgeValue:4,attackBonus:6,damage:2},level2:{level:2,hp:10,maxHp:10,ac:18,surgeValue:5,attackBonus:7,damage:2}},vistra:{level1:{level:1,hp:10,maxHp:10,ac:18,surgeValue:5,attackBonus:8,damage:2},level2:{level:2,hp:12,maxHp:12,ac:19,surgeValue:6,attackBonus:9,damage:2}},keyleth:{level1:{level:1,hp:10,maxHp:10,ac:18,surgeValue:5,attackBonus:7,damage:2},level2:{level:2,hp:12,maxHp:12,ac:19,surgeValue:6,attackBonus:8,damage:2}},tarak:{level1:{level:1,hp:8,maxHp:8,ac:17,surgeValue:4,attackBonus:7,damage:2},level2:{level:2,hp:10,maxHp:10,ac:18,surgeValue:5,attackBonus:8,damage:2}},haskan:{level1:{level:1,hp:6,maxHp:6,ac:14,surgeValue:3,attackBonus:4,damage:1},level2:{level:2,hp:8,maxHp:8,ac:15,surgeValue:4,attackBonus:5,damage:1}}},ii=5,ea=5,xc={kobold:{attackBonus:5,damage:1},snake:{attackBonus:4,damage:1},cultist:{attackBonus:5,damage:1}},Pn=[{id:"kobold",name:"Kobold Dragonshield",ac:14,hp:1,maxHp:1,xp:1,imagePath:"assets/Monster_KoboldDragonshield.png"},{id:"snake",name:"Snake",ac:12,hp:1,maxHp:1,xp:1,imagePath:"assets/Monster_Snake.png"},{id:"cultist",name:"Cultist",ac:13,hp:2,maxHp:2,xp:1,imagePath:"assets/Monster_Cultist.png"}],Tc=["kobold","kobold","kobold","snake","snake","snake","cultist","cultist","cultist"],Ct=[{id:"quinn",name:"Quinn",heroClass:"Cleric",imagePath:"assets/Hero_Cleric_Quinn.png",speed:5,attack:{name:"Mace",attackBonus:6,damage:2,range:1},hp:8,maxHp:8,ac:17},{id:"vistra",name:"Vistra",heroClass:"Fighter",imagePath:"assets/Hero_Fighter_Vistra.png",speed:5,attack:{name:"Warhammer",attackBonus:8,damage:2,range:1},hp:10,maxHp:10,ac:18},{id:"keyleth",name:"Keyleth",heroClass:"Paladin",imagePath:"assets/Hero_Paladin_Keyleth.png",speed:6,attack:{name:"Longsword",attackBonus:7,damage:2,range:1},hp:10,maxHp:10,ac:18},{id:"tarak",name:"Tarak",heroClass:"Rogue",imagePath:"assets/Hero_Rogue_Tarak.png",speed:6,attack:{name:"Short Sword",attackBonus:7,damage:2,range:1},hp:8,maxHp:8,ac:17},{id:"haskan",name:"Haskan",heroClass:"Wizard",imagePath:"assets/Hero_Wizard_Haskan.png",speed:6,attack:{name:"Quarterstaff",attackBonus:4,damage:1,range:1},hp:6,maxHp:6,ac:14}],Sc=[{x:1,y:2},{x:2,y:2},{x:3,y:2},{x:3,y:3},{x:3,y:4},{x:1,y:5},{x:2,y:5},{x:3,y:5}],oi=[{tileType:"tile-black-2exit-a",imagePath:"assets/Tile_Black_x2_01.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!0},{tileType:"tile-black-2exit-b",imagePath:"assets/Tile_Black_x2_02.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!0},{tileType:"tile-black-2exit-c",imagePath:"assets/Tile_Black_x2_03.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!0},{tileType:"tile-black-3exit-a",imagePath:"assets/Tile_Black_x3_01.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!0},{tileType:"tile-black-3exit-b",imagePath:"assets/Tile_Black_x3_02.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!0},{tileType:"tile-black-3exit-c",imagePath:"assets/Tile_Black_x3_03.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!0},{tileType:"tile-black-4exit-a",imagePath:"assets/Tile_Black_x4_01.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!0},{tileType:"tile-black-4exit-b",imagePath:"assets/Tile_Black_x4_02.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!0},{tileType:"tile-white-2exit-a",imagePath:"assets/Tile_White_x2_01.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!1},{tileType:"tile-white-2exit-b",imagePath:"assets/Tile_White_x2_02.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!1},{tileType:"tile-white-2exit-c",imagePath:"assets/Tile_White_x2_03.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!1},{tileType:"tile-white-2exit-d",imagePath:"assets/Tile_White_x2_04.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!1},{tileType:"tile-white-2exit-e",imagePath:"assets/Tile_White_x2_05.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!1},{tileType:"tile-white-3exit-a",imagePath:"assets/Tile_White_x3_01.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!1},{tileType:"tile-white-3exit-b",imagePath:"assets/Tile_White_x3_02.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!1},{tileType:"tile-white-3exit-c",imagePath:"assets/Tile_White_x3_03.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"},isBlackTile:!1}],Ic=["tile-black-2exit-a","tile-black-2exit-b","tile-black-2exit-c","tile-black-3exit-a","tile-black-3exit-b","tile-black-3exit-c","tile-black-4exit-a","tile-black-4exit-b","tile-white-2exit-a","tile-white-2exit-b","tile-white-2exit-c","tile-white-2exit-d","tile-white-2exit-e","tile-white-3exit-a","tile-white-3exit-b","tile-white-3exit-c"],Cc={id:"start-tile",tileType:"start",position:{col:0,row:0},rotation:0,edges:{north:"unexplored",south:"unexplored",east:"unexplored",west:"unexplored"}},Ec=[{id:"volcanic-spray",name:"Volcanic Spray",type:"event",description:"Hot volcanic spray erupts from a crack in the ground. The active hero takes 1 damage.",effect:{type:"damage",amount:1,target:"active-hero"},imagePath:"assets/Encounter_VolcanicSpray.png"},{id:"goblin-ambush",name:"Goblin Ambush",type:"event",description:"The active hero takes 1 damage.",effect:{type:"damage",amount:1,target:"active-hero"},imagePath:"assets/Encounter_GoblinAmbush.png"},{id:"dark-fog",name:"Dark Fog",type:"environment",description:"All heroes have -2 to attack rolls until the end of the next Hero Phase.",effect:{type:"environment"},imagePath:"assets/Encounter_DarkFog.png"},{id:"cave-in",name:"Cave-In",type:"event",description:"All heroes take 1 damage.",effect:{type:"damage",amount:1,target:"all-heroes"},imagePath:"assets/Encounter_CaveIn.png"},{id:"poisoned-dart-trap",name:"Poisoned Dart Trap",type:"trap",description:"The active hero takes 2 damage unless they succeed on a DC 12 Dexterity check.",effect:{type:"trap",disableDC:12},imagePath:"assets/Encounter_PoisonedDartTrap.png"}],Pc=["volcanic-spray","goblin-ambush","dark-fog","cave-in","poisoned-dart-trap"],li=[{id:1,name:"Healing Hymn",type:"utility",heroClass:"Cleric",description:"You sing a soothing song that seals the wounds of you and your allies.",rule:`Use this power during your Hero Phase.
You and one other Hero on your tile regain 2 Hit Points.`,isCustomAbility:!0},{id:2,name:"Cleric's Shield",type:"at-will",heroClass:"Cleric",description:"You utter a minor defensive prayer as you strike your foe.",rule:`Attack one adjacent Monster.
Hit or Miss: Choose 1 Hero on your tile. That Hero gains a +2 bonus to AC until you use this power again.`,attackBonus:6,damage:1},{id:3,name:"Righteous Advance",type:"at-will",heroClass:"Cleric",description:"Your attack grants your ally time to advance.",rule:`Attack one adjacent Monster.
Hit or Miss: One Hero on your tile moves 2 squares.`,attackBonus:6,damage:1},{id:4,name:"Sacred Flame",type:"at-will",heroClass:"Cleric",description:"Sacred light shines from above, searing a single enemy with holy radiance.",rule:`Attack one Monster within 1 tile of you.
If you hit, choose yourself or one Hero on your tile. That Hero gains 1 Hit Point.`,attackBonus:6,damage:1},{id:5,name:"Blade Barrier",type:"daily",heroClass:"Cleric",description:"You conjure a wall of whirling blades to cut apart advancing foes.",rule:`Choose a tile within 2 tiles of you. Place five Blade Barrier tokens on five different squares on that tile.
When a Monster is placed on a square with a Blade Barrier token, remove that token and deal 1 damage to the Monster.`},{id:6,name:"Cause Fear",type:"daily",heroClass:"Cleric",description:"Your holy symbol ignites with divine light, slamming your foes with uncontrollable terror.",rule:`Choose a tile within 1 tile of you. Each ally on that tile adjacent to a Monster can make an At-Will attack with a +2 bonus to the Attack roll.
After the attacks, place each Monster remaining on a tile within 2 tiles of you.`},{id:7,name:"Wrathful Thunder",type:"daily",heroClass:"Cleric",description:"When you strike, a shattering thunderclap fills the room.",rule:`Attack one adjacent Monster.
After the attack, choose one Monster on your tile. Pass that Monster's card to the player on your right. That player now controls the Monster.`,attackBonus:6,damage:3},{id:8,name:"Astral Refuge",type:"utility",heroClass:"Cleric",description:"You send an ally to a safe refuge in the Astral Sea for a short time.",rule:`Use this power at the start of any Villain Phase.
Choose one Hero within 2 tiles of you. Remove that Hero from the tile. At the start of that player's next Hero Phase, that player places the Hero on any tile.`},{id:9,name:"Command",type:"utility",heroClass:"Cleric",description:"You utter a single word that your foe must obey.",rule:`Use this power during your Hero Phase.
Choose one Monster on your tile. Place that Monster on a tile within 2 tiles of you.`},{id:10,name:"Perseverance",type:"utility",heroClass:"Cleric",description:"A house does not stand with just a single wall.",rule:`Use this power when any player draws an Encounter Card.
The cost to cancel the Encounter Card is reduced by the number of Heroes on your tile, including your own Hero.`},{id:11,name:"Dwarven Resilience",type:"utility",heroClass:"Dwarf",description:"Your dwarven heritage grants you uncommonly strong health.",rule:`Use this power during your Hero Phase instead of moving.
You regain 4 Hit Points.`,isCustomAbility:!0},{id:12,name:"Charge",type:"at-will",heroClass:"Fighter",description:"You rush into combat.",rule:"Move up to your speed, then attack one adjacent Monster.",attackBonus:8,damage:1},{id:13,name:"Reaping Strike",type:"at-will",heroClass:"Fighter",description:"You punctuate your scything attacks with wicked jabs and small cutting blows that slip through your enemy's defenses.",rule:"Attack one adjacent Monster twice.",attackBonus:4,damage:1},{id:14,name:"Sure Strike",type:"at-will",heroClass:"Fighter",description:"You trade power for precision.",rule:"Attack one adjacent Monster.",attackBonus:11,damage:1},{id:15,name:"Comeback Strike",type:"daily",heroClass:"Fighter",description:"A timely strike gives you the strength to fight on.",rule:`Attack one adjacent Monster.
If you hit, you regain 2 hit points.
If you miss, do not flip this card over.`,attackBonus:7,damage:2},{id:16,name:"Into the Fray",type:"daily",heroClass:"Fighter",description:"You unleash a fierce battle cry as you leap boldly into battle.",rule:"Place your Hero adjacent to any Hero within 2 tiles of you. Attack one adjacent Monster.",attackBonus:7,damage:3},{id:17,name:"Taunting Advance",type:"daily",heroClass:"Fighter",description:"You rush forward and call forth your enemy.",rule:"Move your speed. Then choose a Monster within 2 tiles of you. Place that Monster adjacent to your Hero and attack it.",attackBonus:8,damage:3},{id:18,name:"Inspiring Advice",type:"utility",heroClass:"Fighter",description:"You encourage your teammate to fight on.",rule:`Use when a Hero misses a Monster with an attack.
The Hero rerolls the attack.
If the attack misses, do not flip this card over.`},{id:19,name:"One for the Team",type:"utility",heroClass:"Fighter",description:"You protect your ally from the hazards of the dungeon.",rule:`Use when any player draws an Encounter Card.
Resolve the Encounter Card as if you drew it.`},{id:20,name:"To Arms!",type:"utility",heroClass:"Fighter",description:"You rally your companions to meet your foe head on.",rule:`Use when a new Monster is placed on a tile.
You and one Hero on your tile can move your speed.`},{id:21,name:"Lay On Hands",type:"utility",heroClass:"Paladin",description:"Your divine touch instantly heals wounds.",rule:"One adjacent Hero regains 2 hit points.",isCustomAbility:!0},{id:22,name:"Divine Challenge",type:"at-will",heroClass:"Paladin",description:"You boldly confront a nearby enemy.",rule:`Choose one Monster within 1 tile of you. Place that Monster adjacent to your Hero.
Attack one adjacent Monster.`,attackBonus:8,damage:1},{id:23,name:"Holy Strike",type:"at-will",heroClass:"Paladin",description:"You strike an enemy, igniting it with holy light.",rule:`Attack one adjacent Monster.
If you started your Hero Phase adjacent to the Monster, deal +1 damage if you hit.`,attackBonus:8,damage:1},{id:24,name:"Valiant Strike",type:"at-will",heroClass:"Paladin",description:"The odds against you add strength to your attack.",rule:`Attack one adjacent Monster.
When making this attack, you get a +1 bonus to attack for each Monster adjacent to your Hero.`,attackBonus:8,damage:1},{id:25,name:"Arcing Strike",type:"daily",heroClass:"Paladin",description:"You swing your weapon in a wide arc.",rule:"Attack one or two adjacent Monsters.",attackBonus:9,damage:3},{id:26,name:"Benign Transposition",type:"daily",heroClass:"Paladin",description:"You call upon divine power to switch places with an ally to strike a foe.",rule:`Choose 1 Hero within 2 tiles of you. You swap positions with that Hero.
After swapping positions, attack one adjacent Monster.`,attackBonus:8,damage:3},{id:27,name:"Righteous Smite",type:"daily",heroClass:"Paladin",description:"Your righteous attack fills your party with preternatural resolve.",rule:`Attack one adjacent Monster.
Hit or Miss: All Heroes on your tile regain 1 Hit Point.`,attackBonus:9,damage:3},{id:28,name:"Bravery",type:"utility",heroClass:"Paladin",description:"Your bravery gives you the power to fight on.",rule:`Use when a Monster within 1 tile of you activates during any player's Villain Phase.
Place your Hero adjacent to that Monster. You regain 1 hit point.`},{id:29,name:"Noble Shield",type:"utility",heroClass:"Paladin",description:"You quickly throw up your shield, protecting your friends from harm at your expense.",rule:`Use when a Monster targets you and at least one additional Hero with the same attack.
You are the only target of the attack, but the attack roll against you is automatically a 20 and cannot be rerolled.`},{id:30,name:"Virtue's Touch",type:"utility",heroClass:"Paladin",description:"Your gentle touch removes affliction.",rule:"Choose one adjacent Hero. End one condition on that Hero."},{id:31,name:"Furious Assault",type:"utility",heroClass:"Half-Orc",description:"Your wrath burns inside you, giving strength to your next attack.",rule:`Use this power when you hit a Monster with an attack.
The Monster takes +1 damage.`,isCustomAbility:!0},{id:32,name:"Distracting Jab",type:"at-will",heroClass:"Rogue",description:"You escape the clutches of your foe as it reacts to your attack.",rule:`Attack one adjacent Monster.
If you hit, move the Monster 1 square.
After the attack, move your speed.`,attackBonus:7,damage:1},{id:33,name:"Lucky Strike",type:"at-will",heroClass:"Rogue",description:"They fall for it if you're lucky, and then they fall.",rule:`Attack one Monster within 1 tile of you.
If you hit and your attack roll is an even number, deal +1 damage.`,attackBonus:7,damage:1},{id:34,name:"Positioning Shot",type:"at-will",heroClass:"Rogue",description:"To avoid your vicious attack, your enemy leaps exactly where you want it to be.",rule:`Attack one Monster within 2 tiles of you.
Hit or Miss: Place that Monster on any square on your tile or on an adjacent tile.`,attackBonus:7,damage:1},{id:35,name:"Acrobatic Onslaught",type:"daily",heroClass:"Rogue",description:"After a quick strike, you leap through the air, lining up your next target.",rule:`Attack one adjacent Monster.
Hit or Miss: Place your Hero on any tile within 2 tiles of where you started, and then use an At-Will power immediately.`,attackBonus:7,damage:2},{id:36,name:"King's Castle",type:"daily",heroClass:"Rogue",description:"It's hard to get the little guy when he's behind an ally who can crush plate armor in his teeth.",rule:`Swap positions with one Hero within 1 tile of you.
Attack 1 Monster within 2 tiles of you.`,attackBonus:7,damage:3},{id:37,name:"Tornado Strike",type:"daily",heroClass:"Rogue",description:"Your weapon becomes a blur as you make swift, sweeping attacks.",rule:`Attack four times. Each attack can be against any Monster on your tile.
After the attacks, place your Hero on any square on your tile.`,attackBonus:7,damage:1},{id:38,name:"Distant Diversion",type:"utility",heroClass:"Rogue",description:"The monster turns to investigate the sound of a thrown pebble.",rule:`Choose one Monster within 3 tiles of you.
Place that Monster onto an adjacent tile.`},{id:39,name:"Practiced Evasion",type:"utility",heroClass:"Rogue",description:"A quick flip and quicker fingers disables the trap.",rule:`Use this power when you are hit by an attack from a Trap or Event Attack Encounter Card.
The attack misses. If the attack was from a Trap Encounter Card, you get a free Disable check against that Trap.`},{id:40,name:"Tumbling Escape",type:"utility",heroClass:"Rogue",description:"You nimbly roll out of harm's way.",rule:`Use this power when a Monster hits you with an attack.
The attack misses. Place your Hero on any tile within 1 tile of where you started.`},{id:41,name:"Hurled Breath",type:"daily",heroClass:"Dragonborn",description:"You hurl your draconic breath, engulfing your foes a short distance away.",rule:`Choose a tile within 2 tiles of you. Attack each Monster on that tile.
This attack does not count as an attack action.`,attackBonus:5,damage:1,isCustomAbility:!0},{id:42,name:"Arc Lightning",type:"at-will",heroClass:"Wizard",description:"Lightning leaps from your outstretched hands, blasting your foes.",rule:"Attack up to two Monsters. Each monster can be on your tile or any tile within 1 tile of you.",attackBonus:7,damage:1},{id:43,name:"Hypnotism",type:"at-will",heroClass:"Wizard",description:"Your enemy's mouth goes slack as your magic takes control.",rule:"Choose a Monster within 1 tile of you. Move that Monster 1 tile. If it ends adjacent to another Monster, make an attack against the second Monster.",attackBonus:9,damage:1},{id:44,name:"Ray of Frost",type:"at-will",heroClass:"Wizard",description:"A blistering ray of white frost streaks to your target, slowing its reactions.",rule:"Attack one Monster on your tile or on any tile within 2 tiles of you.",attackBonus:7,damage:1},{id:45,name:"Flaming Sphere",type:"daily",heroClass:"Wizard",description:"You conjure a rolling ball of fire and control where it goes.",rule:`Place 3 Flaming Sphere tokens in a stack on any square within 1 tile of you.
Instead of moving during your Hero phase, you can move the Flaming Sphere stack 1 tile.
At the end of your Hero Phase, you can remove 1 Flaming Sphere token and deal 1 damage to each Monster on that tile.`},{id:46,name:"Shock Sphere",type:"daily",heroClass:"Wizard",description:"You hurl a crackling orb of lightning, engulfing your foes in its electric embrace.",rule:"Choose a tile within 2 tiles of you. Attack each Monster on that tile.",attackBonus:9,damage:2},{id:47,name:"Spectral Ram",type:"daily",heroClass:"Wizard",description:"You bash your foe with arcane force that sends it reeling.",rule:`Attack one Monster within 2 tiles of you.
Hit or Miss: Place the Monster onto any tile within 2 tiles of where it started.`,attackBonus:9,damage:3},{id:48,name:"Invisibility",type:"utility",heroClass:"Wizard",description:"You vanish from sight.",rule:`Use this power during your Hero Phase.
Until the start of your next Hero Phase, you do not count as the closest Hero for any Monster's tactics.
Monster attacks that attack every Hero on a tile still attack you.`},{id:49,name:"Mirror Image",type:"utility",heroClass:"Wizard",description:"You create three duplicate images of yourself.",rule:`Use this power during your Hero Phase.
Place 3 Mirror Image tokens on your Hero Card.
For each Mirror Image token on your Hero Card, you gain +2 AC. Whenever a Monster misses you with an attack, remove 1 Mirror Image token.`},{id:50,name:"Wizard Eye",type:"utility",heroClass:"Wizard",description:"You see through a magical hovering eye, allowing you to explore from a distance.",rule:`Use this power during your Hero Phase.
Place the Wizard Eye token on a tile within 1 tile of you.
Instead of moving during your Hero Phase, you can move the Wizard Eye marker 1 tile.
During your Exploration Phase, you can explore as if your Hero was on any unexplored edge on the Wizard Eye's tile.`}],ci={quinn:1,vistra:11,tarak:31,keyleth:21,haskan:41};function ta(e){const n={Cleric:["Cleric"],Fighter:["Fighter","Dwarf"],Paladin:["Paladin"],Rogue:["Rogue","Half-Orc"],Wizard:["Wizard","Dragonborn"]}[e]||[];return li.filter(r=>n.includes(r.heroClass))}function Mc(e){return ta(e).filter(t=>t.type==="at-will")}function Hc(e){return ta(e).filter(t=>t.type==="daily")}function Ac(e){return ta(e).filter(t=>t.type==="utility"&&!t.isCustomAbility)}function Qn(e){return li.find(t=>t.id===e)}function Dc(e,t,n,r,a){const s=[t,n,...r,a];return{heroId:e,customAbility:t,utility:n,atWills:r,daily:a,cardStates:s.map(o=>({cardId:o,isFlipped:!1}))}}function Rc(e,t){return{...e,cardStates:e.cardStates.map(n=>n.cardId===t?{...n,isFlipped:!0}:n)}}function zc(e,t){return{...e,dailyLevel2:t,cardStates:[...e.cardStates,{cardId:t,isFlipped:!1}]}}const Oc={availableHeroes:Ct,selectedHeroes:[],heroEdgeMap:{},powerCardSelections:{},heroPowerCards:{}},di=ai({name:"heroes",initialState:Oc,reducers:{toggleHeroSelection:(e,t)=>{const n=t.payload,r=e.selectedHeroes.findIndex(a=>a.id===n);if(r>=0)e.selectedHeroes.splice(r,1),delete e.heroEdgeMap[n],delete e.powerCardSelections[n];else if(e.selectedHeroes.length<5){const a=e.availableHeroes.find(s=>s.id===n);a&&(e.selectedHeroes.push(a),e.powerCardSelections[n]={heroId:n,utility:null,atWills:[],daily:null})}},selectHeroFromEdge:(e,t)=>{const{heroId:n,edge:r}=t.payload,a=e.selectedHeroes.findIndex(s=>s.id===n);if(a>=0)e.heroEdgeMap[n]===r&&(e.selectedHeroes.splice(a,1),delete e.heroEdgeMap[n],delete e.powerCardSelections[n]);else if(e.selectedHeroes.length<5){const s=e.availableHeroes.find(o=>o.id===n);s&&(e.selectedHeroes.push(s),e.heroEdgeMap[n]=r,e.powerCardSelections[n]={heroId:n,utility:null,atWills:[],daily:null})}},clearSelection:e=>{e.selectedHeroes=[],e.heroEdgeMap={},e.powerCardSelections={},e.heroPowerCards={}},selectUtilityCard:(e,t)=>{const{heroId:n,cardId:r}=t.payload,a=e.powerCardSelections[n];a&&(a.utility=a.utility===r?null:r)},toggleAtWillCard:(e,t)=>{const{heroId:n,cardId:r}=t.payload,a=e.powerCardSelections[n];if(a){const s=a.atWills.indexOf(r);s>=0?a.atWills.splice(s,1):a.atWills.length<2&&a.atWills.push(r)}},selectDailyCard:(e,t)=>{const{heroId:n,cardId:r}=t.payload,a=e.powerCardSelections[n];a&&(a.daily=a.daily===r?null:r)},finalizePowerCardSelections:e=>{e.heroPowerCards={};for(const t of e.selectedHeroes){const n=e.powerCardSelections[t.id],r=ci[t.id];n&&r&&n.utility&&n.daily&&n.atWills.length===2?e.heroPowerCards[t.id]=Dc(t.id,r,n.utility,n.atWills,n.daily):console.warn(`Hero ${t.id} has incomplete power card selection, skipping`)}},usePowerCard:(e,t)=>{const{heroId:n,cardId:r}=t.payload,a=e.heroPowerCards[n];a&&(e.heroPowerCards[n]=Rc(a,r))},addLevel2Daily:(e,t)=>{const{heroId:n,cardId:r}=t.payload,a=e.heroPowerCards[n];a&&(e.heroPowerCards[n]=zc(a,r))}}}),{toggleHeroSelection:Df,selectHeroFromEdge:Nc,clearSelection:Rf,selectUtilityCard:jc,toggleAtWillCard:Bc,selectDailyCard:Lc,finalizePowerCardSelections:Fc,usePowerCard:qc,addLevel2Daily:zf}=di.actions,Uc=di.reducer,pn={minX:1,maxX:3,minY:0,maxY:7,staircase:[{x:1,y:3},{x:2,y:3},{x:1,y:4},{x:2,y:4}]},Zt=4,Wc=4,Yc=8;function Mn(e){const{col:t,row:n}=e.position;if(e.tileType==="start")return{minX:0,maxX:3,minY:0,maxY:7};let r,a;return t>0?r=Wc+(t-1)*Zt:t<0?r=t*Zt:r=0,n>0?a=Yc+(n-1)*Zt:n<0?a=n*Zt:a=0,{minX:r,maxX:r+Zt-1,minY:a,maxY:a+Zt-1}}function Tn(e,t){for(const n of t.tiles){const r=Mn(n);if(e.x>=r.minX&&e.x<=r.maxX&&e.y>=r.minY&&e.y<=r.maxY)return n}return null}function Vc(e){return e.x>=pn.minX&&e.x<=pn.maxX&&e.y>=pn.minY&&e.y<=pn.maxY}function ui(e){return pn.staircase.some(t=>t.x===e.x&&t.y===e.y)}function Xc(e,t){return Vc(e)&&!ui(e)}function Gc(e,t,n){return t.some(r=>r.position.x===e.x&&r.position.y===e.y&&r.heroId!==n)}function Kc(e,t,n,r){const a=Mn(r),s=r.tileType==="start"?1:a.minX,o=e.y===a.minY,c=e.y===a.maxY,l=e.x===a.maxX,d=e.x===s,f=n<0?"north":n>0?"south":null,g=t<0?"west":t>0?"east":null;if(!f||!g)return!1;let h=!1,_=!1;return f==="north"&&o&&r.edges.north==="wall"&&(h=!0),f==="south"&&c&&r.edges.south==="wall"&&(h=!0),g==="east"&&l&&r.edges.east==="wall"&&(_=!0),g==="west"&&d&&r.edges.west==="wall"&&(_=!0),h&&_}function Qc(e,t,n,r){const a=r.x-n.x,s=r.y-n.y;if(a!==0&&s!==0)return!1;let o,c;return s<0?(o="north",c="south"):s>0?(o="south",c="north"):a>0?(o="east",c="west"):(o="west",c="east"),!(e.edges[o]!=="open"||t.edges[c]!=="open")}function na(e,t){const n=[],r=[{dx:0,dy:-1,cardinal:!0},{dx:0,dy:1,cardinal:!0},{dx:-1,dy:0,cardinal:!0},{dx:1,dy:0,cardinal:!0},{dx:-1,dy:-1,cardinal:!1},{dx:1,dy:-1,cardinal:!1},{dx:-1,dy:1,cardinal:!1},{dx:1,dy:1,cardinal:!1}];if(!t){for(const s of r){const o={x:e.x+s.dx,y:e.y+s.dy};Xc(o)&&n.push(o)}return n}const a=Tn(e,t);if(!a)return n;for(const s of r){const o={x:e.x+s.dx,y:e.y+s.dy},c=Tn(o,t);if(c&&!(c.tileType==="start"&&(ui(o)||o.x<1))){if(a.id===c.id){if(!s.cardinal&&Kc(e,s.dx,s.dy,a))continue;n.push(o);continue}s.cardinal&&Qc(a,c,e,o)&&n.push(o)}}return n}function Zc(e,t,n,r,a){const s=[],o=new Set,c=[{pos:e,distance:0}];for(o.add(`${e.x},${e.y}`);c.length>0;){const l=c.shift();if(!l)break;if(l.distance>0&&!Gc(l.pos,n,r)&&s.push(l.pos),l.distance<t){const d=na(l.pos,a);for(const f of d){const g=`${f.x},${f.y}`;o.has(g)||(o.add(g),c.push({pos:f,distance:l.distance+1}))}}}return s}function Jc(e,t){return t.some(n=>n.x===e.x&&n.y===e.y)}const $c={north:[{x:1,y:0},{x:2,y:0},{x:3,y:0}],south:[{x:1,y:7},{x:2,y:7},{x:3,y:7}],east:[{x:3,y:0},{x:3,y:1},{x:3,y:2},{x:3,y:5},{x:3,y:6},{x:3,y:7}],west:[{x:1,y:0},{x:1,y:1},{x:1,y:2},{x:1,y:5},{x:1,y:6},{x:1,y:7}]};function ed(e,t){return $c[t].some(r=>r.x===e.x&&r.y===e.y)}function ra(e){return{north:"south",south:"north",east:"west",west:"east"}[e]}function td(e,t){const n=t.tiles.find(r=>r.id==="start-tile");if(!n)return null;for(const r of t.unexploredEdges)if(r.tileId===n.id&&ed(e.position,r.direction))return r;return null}function nd(e,t){const{col:n,row:r}=e.position;switch(t){case"north":return{col:n,row:r-1};case"south":return{col:n,row:r+1};case"east":return{col:n+1,row:r};case"west":return{col:n-1,row:r}}}function rd(e){const t=ra(e);return{south:0,west:90,north:180,east:270}[t]}function fi(e){return oi.find(t=>t.tileType===e)}function ad(e,t,n){const r=n.tiles.find(f=>f.id===e.tileId);if(!r)return null;const a=nd(r,e.direction),s=rd(e.direction);if(!fi(t))return null;const c=`tile-${n.tiles.length}`,d={north:"unexplored",south:"unexplored",east:"unexplored",west:"unexplored",[ra(e.direction)]:"open"};return{id:c,tileType:t,position:a,rotation:s,edges:d}}function Hr(){return{tiles:[{...Cc}],unexploredEdges:[{tileId:"start-tile",direction:"north"},{tileId:"start-tile",direction:"south"},{tileId:"start-tile",direction:"east"},{tileId:"start-tile",direction:"west"}],tileDeck:[]}}function sd(e,t=Math.random){const n=[...e];for(let r=n.length-1;r>0;r--){const a=Math.floor(t()*(r+1));[n[r],n[a]]=[n[a],n[r]]}return n}function id(e,t=Math.random){return sd(e,t)}function od(e){if(e.length===0)return{drawnTile:null,remainingDeck:[]};const[t,...n]=e;return{drawnTile:t,remainingDeck:n}}function ld(e,t,n){const r=e.unexploredEdges.filter(l=>!(l.tileId===t.tileId&&l.direction===t.direction)),a=ra(t.direction),o=["north","south","east","west"].filter(l=>l!==a&&n.edges[l]==="unexplored").map(l=>({tileId:n.id,direction:l}));return{tiles:[...e.tiles.map(l=>l.id===t.tileId?{...l,edges:{...l.edges,[t.direction]:"open"}}:l),n],unexploredEdges:[...r,...o],tileDeck:e.tileDeck}}function vi(e,t=Math.random){const n=[...e];for(let r=n.length-1;r>0;r--){const a=Math.floor(t()*(r+1));[n[r],n[a]]=[n[a],n[r]]}return n}function cd(e=Math.random){return{drawPile:vi([...Tc],e),discardPile:[]}}function dd(e,t=Math.random){if(e.drawPile.length===0){if(e.discardPile.length===0)return{monster:null,deck:e};const a=vi(e.discardPile,t);return{monster:a[0],deck:{drawPile:a.slice(1),discardPile:[]}}}const[n,...r]=e.drawPile;return{monster:n,deck:{drawPile:r,discardPile:e.discardPile}}}function ud(e,t){return{drawPile:e.drawPile,discardPile:[...e.discardPile,t]}}function aa(e){return Pn.find(t=>t.id===e)}function fd(e,t,n,r,a){const s=aa(e);return s?{monsterId:e,instanceId:`${e}-${a}`,position:t,currentHp:s.hp,controllerId:n,tileId:r}:null}const vd=4,Ja=Math.floor(vd/2);function hd(){return{x:Ja,y:Ja}}function pd(e,t){return e.currentHp===0&&t.healingSurges>0}function md(e,t){return e.currentHp===0&&t.healingSurges===0}function gd(e,t){const n=e.surgeValue;return{heroState:{...e,currentHp:Math.min(n,e.maxHp)},resources:{...t,healingSurges:t.healingSurges-1}}}function hi(e=Math.random){return Math.floor(e()*20)+1}function _d(e,t,n=Math.random){const r=hi(n),a=r+e.attackBonus,s=r===20||a>=t,o=r===20;return{roll:r,attackBonus:e.attackBonus,total:a,targetAC:t,isHit:s,damage:s?e.damage:0,isCritical:o}}function yd(e,t,n){return e.level===1&&t===20&&n.xp>=ii}function wd(e,t){const n=si[e.heroId];if(!n)return console.warn(`Hero levels not found for heroId: ${e.heroId}. Level up skipped.`),{heroState:e,resources:t};const r=n.level2,a=e.maxHp-e.currentHp;return{heroState:{...e,level:2,maxHp:r.maxHp,currentHp:Math.max(1,r.maxHp-a),ac:r.ac,surgeValue:r.surgeValue,attackBonus:r.attackBonus},resources:{...t,xp:t.xp-ii}}}function kd(e,t,n){return t===20&&e===2?n+1:n}function Ar(e,t){const n=Math.abs(e.x-t.x),r=Math.abs(e.y-t.y);return n<=1&&r<=1&&(n>0||r>0)}function bd(e){return aa(e)?.ac}function xd(e,t){const n=t.tiles.find(a=>a.id===e.tileId);if(!n)return null;const r=Mn(n);return{x:r.minX+e.position.x,y:r.minY+e.position.y}}function Td(e,t,n,r){return r?Tn(e,r)?t.filter(s=>{const o=xd(s,r);return o?Ar(e,o):!1}):[]:t.filter(s=>s.tileId===n&&Ar(e,s.position))}function Zn(e,t){const n=t.tiles.find(a=>a.id===e.tileId);if(!n)return null;const r=Mn(n);return{x:r.minX+e.position.x,y:r.minY+e.position.y}}function $a(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function Sd(e,t,n,r){const a=Zn(e,r);if(!a)return null;const s=t.filter(d=>{const f=n[d.heroId];return f!==void 0&&f>0});if(s.length===0)return null;const o=new Set,c=[{pos:a,distance:0}];o.add(`${a.x},${a.y}`);let l=null;for(;c.length>0;){const d=c.shift();for(const g of s)g.position.x===d.pos.x&&g.position.y===d.pos.y&&(!l||d.distance<l.distance)&&(l={hero:g,distance:d.distance});if(l&&l.distance<d.distance)break;const f=na(d.pos,r);for(const g of f){const h=`${g.x},${g.y}`;o.has(h)||(o.add(h),c.push({pos:g,distance:d.distance+1}))}}return l}function Id(e,t,n,r){const a=Zn(e,r);if(!a)return null;const s=t.filter(o=>{const c=n[o.heroId];return c!==void 0&&c>0});for(const o of s)if(Ar(a,o.position))return o;return null}function Cd(e,t,n,r,a){const s=Zn(e,a);if(!s)return null;const c=na(s,a).filter(f=>{if(n.some(h=>h.position.x===f.x&&h.position.y===f.y))return!1;for(const h of r){if(h.instanceId===e.instanceId)continue;const _=Zn(h,a);if(_&&_.x===f.x&&_.y===f.y)return!1}return!0});if(c.length===0)return null;let l=c[0],d=$a(l,t);for(const f of c){const g=$a(f,t);g<d&&(d=g,l=f)}return l}function Ed(e,t,n=Math.random){const r=xc[e];if(!r)return{roll:1,attackBonus:0,total:1,targetAC:t,isHit:!1,damage:0,isCritical:!1};const a=hi(n),s=a+r.attackBonus,o=a===20||s>=t,c=a===20;return{roll:a,attackBonus:r.attackBonus,total:s,targetAC:t,isHit:o,damage:o?r.damage:0,isCritical:c}}function Pd(e,t,n,r,a,s,o=Math.random){const c=Id(e,t,n,s);if(c){const f=r[c.heroId]??10,g=Ed(e.monsterId,f,o);return{type:"attack",targetId:c.heroId,result:g}}const l=Sd(e,t,n,s);if(!l)return{type:"none"};const d=Cd(e,l.hero.position,t,a,s);return d?{type:"move",destination:d}:{type:"none"}}function Md(e,t,n){const r=n.tiles.find(s=>s.id===t);if(!r)return null;const a=Mn(r);return{x:e.x-a.minX,y:e.y-a.minY}}function Hd(e,t){return Tn(e,t)?.id??null}function pi(e,t=Math.random){const n=[...e];for(let r=n.length-1;r>0;r--){const a=Math.floor(t()*(r+1));[n[r],n[a]]=[n[a],n[r]]}return n}function Ad(e=Math.random){return{drawPile:pi([...Pc],e),discardPile:[]}}function Dd(e,t=Math.random){if(e.drawPile.length===0){if(e.discardPile.length===0)return{encounterId:null,deck:e};const a=pi(e.discardPile,t);return{encounterId:a[0],deck:{drawPile:a.slice(1),discardPile:[]}}}const[n,...r]=e.drawPile;return{encounterId:n,deck:{drawPile:r,discardPile:e.discardPile}}}function Rd(e,t){return{drawPile:e.drawPile,discardPile:[...e.discardPile,t]}}function zd(e){return Ec.find(t=>t.id===e)}function Od(e){return!e.drewOnlyWhiteTilesThisTurn}function Nd(e){return e.xp>=ea}function jd(e,t,n){return{resources:{...t,xp:t.xp-ea},encounterDeck:{...n,discardPile:[...n.discardPile,e.id]}}}function mi(e,t){return{...e,currentHp:Math.max(0,e.currentHp-t)}}function Bd(e,t){return e.map(n=>mi(n,t))}function Ld(e,t,n){const r=e.effect;switch(r.type){case"damage":return r.target==="active-hero"?t.map(a=>a.heroId===n?mi(a,r.amount):a):Bd(t,r.amount);case"environment":return console.warn(`Environment effect '${e.name}' is not yet implemented`),t;case"curse":return console.warn(`Curse effect '${e.name}' is not yet implemented`),t;case"trap":return console.warn(`Trap effect '${e.name}' is not yet implemented`),t;case"hazard":return console.warn(`Hazard effect '${e.name}' is not yet implemented`),t;default:return t}}const Dr={currentHeroIndex:0,currentPhase:"hero-phase",turnNumber:1,exploredThisTurn:!1,drewOnlyWhiteTilesThisTurn:!1},jn={actionsTaken:[],canMove:!0,canAttack:!0},Rr={monstersDefeated:0,monstersToDefeat:2,objective:"Defeat 2 monsters"},zr={xp:0,healingSurges:2},Fd={currentScreen:"character-select",heroTokens:[],turnState:{...Dr},validMoveSquares:[],showingMovement:!1,dungeon:Hr(),monsterDeck:{drawPile:[],discardPile:[]},monsters:[],monsterInstanceCounter:0,recentlySpawnedMonsterId:null,attackResult:null,attackTargetId:null,attackName:null,heroHp:[],monsterAttackResult:null,monsterAttackTargetId:null,monsterAttackerId:null,villainPhaseMonsterIndex:0,monsterMoveActionId:null,heroTurnActions:{...jn},scenario:{...Rr},partyResources:{...zr},defeatedMonsterXp:null,defeatedMonsterName:null,leveledUpHeroId:null,levelUpOldStats:null,healingSurgeUsedHeroId:null,healingSurgeHpRestored:null,defeatReason:null,encounterDeck:{drawPile:[],discardPile:[]},drawnEncounter:null};function es(e,t){const n=[...e.actionsTaken,t],r=n.filter(c=>c==="move").length,a=n.filter(c=>c==="attack").length,s=a===0,o=r<2&&!(r===1&&a===1);return{actionsTaken:n,canMove:o,canAttack:s}}function qd(e){const{actionsTaken:t}=e,n=t.filter(a=>a==="move").length,r=t.filter(a=>a==="attack").length;return n>=1&&r>=1||n>=2}function Ud(e){let t=e;return()=>(t=t*1103515245+12345&2147483647,t/2147483647)}function Wd(e,t=Math.random){const n=[...e];for(let r=n.length-1;r>0;r--){const a=Math.floor(t()*(r+1));[n[r],n[a]]=[n[a],n[r]]}return n}const gi=ai({name:"game",initialState:Fd,reducers:{startGame:(e,t)=>{const{heroIds:n,positions:r,seed:a}=t.payload;if(n.length===0||n.length>5)return;const s=a??Date.now();e.randomSeed=s;let o;const c=Ud(s);r?o=r:o=Wd(Sc,c).slice(0,5),e.heroTokens=n.map((d,f)=>({heroId:d,position:o[f]})),e.turnState={...Dr},e.validMoveSquares=[],e.showingMovement=!1;const l=Hr();l.tileDeck=id([...Ic],c),e.dungeon=l,e.monsterDeck=cd(c),e.monsters=[],e.monsterInstanceCounter=0,e.recentlySpawnedMonsterId=null,e.attackResult=null,e.attackTargetId=null,e.attackName=null,e.heroHp=n.map(d=>{const f=si[d];f||console.warn(`Hero levels not found for ${d}, using defaults`);const g=f?.level1,h=Ct.find(M=>M.id===d),_=g?.hp??h?.hp??8,x=g?.ac??h?.ac??17,O=g?.surgeValue??4,k=g?.attackBonus??h?.attack?.attackBonus??6;return{heroId:d,currentHp:_,maxHp:_,level:1,ac:x,surgeValue:O,attackBonus:k}}),e.monsterAttackResult=null,e.monsterAttackTargetId=null,e.monsterAttackerId=null,e.villainPhaseMonsterIndex=0,e.heroTurnActions={...jn},e.scenario={...Rr},e.partyResources={...zr},e.defeatedMonsterXp=null,e.defeatedMonsterName=null,e.leveledUpHeroId=null,e.levelUpOldStats=null,e.encounterDeck=Ad(c),e.drawnEncounter=null,e.currentScreen="game-board"},setHeroPosition:(e,t)=>{const n=e.heroTokens.find(r=>r.heroId===t.payload.heroId);n&&(n.position=t.payload.position)},showMovement:(e,t)=>{if(e.turnState.currentPhase!=="hero-phase"||!e.heroTurnActions.canMove)return;const{heroId:n,speed:r}=t.payload,a=e.heroTokens.find(s=>s.heroId===n);a&&(e.validMoveSquares=Zc(a.position,r,e.heroTokens,n,e.dungeon),e.showingMovement=!0)},hideMovement:e=>{e.validMoveSquares=[],e.showingMovement=!1},moveHero:(e,t)=>{const{heroId:n,position:r}=t.payload;if(e.turnState.currentPhase!=="hero-phase"||!e.heroTurnActions.canMove||!Jc(r,e.validMoveSquares))return;const a=e.heroTokens.find(s=>s.heroId===n);a&&(a.position=r,e.validMoveSquares=[],e.showingMovement=!1,e.heroTurnActions=es(e.heroTurnActions,"move"))},resetGame:e=>{e.currentScreen="character-select",e.heroTokens=[],e.turnState={...Dr},e.randomSeed=void 0,e.validMoveSquares=[],e.showingMovement=!1,e.dungeon=Hr(),e.monsterDeck={drawPile:[],discardPile:[]},e.monsters=[],e.monsterInstanceCounter=0,e.recentlySpawnedMonsterId=null,e.attackResult=null,e.attackTargetId=null,e.attackName=null,e.heroHp=[],e.monsterAttackResult=null,e.monsterAttackTargetId=null,e.monsterAttackerId=null,e.villainPhaseMonsterIndex=0,e.monsterMoveActionId=null,e.heroTurnActions={...jn},e.scenario={...Rr},e.partyResources={...zr},e.defeatedMonsterXp=null,e.defeatedMonsterName=null,e.leveledUpHeroId=null,e.levelUpOldStats=null,e.healingSurgeUsedHeroId=null,e.healingSurgeHpRestored=null,e.defeatReason=null,e.encounterDeck={drawPile:[],discardPile:[]},e.drawnEncounter=null},endHeroPhase:e=>{if(e.turnState.currentPhase!=="hero-phase")return;e.recentlySpawnedMonsterId=null,e.turnState.exploredThisTurn=!1,e.turnState.drewOnlyWhiteTilesThisTurn=!1;const t=e.heroTokens[e.turnState.currentHeroIndex];if(!t)return;const n=td(t,e.dungeon);if(n&&e.dungeon.tileDeck.length>0){const{drawnTile:r,remainingDeck:a}=od(e.dungeon.tileDeck);if(r){const s=ad(n,r,e.dungeon);if(s){fi(r)?.isBlackTile??!0?e.turnState.drewOnlyWhiteTilesThisTurn=!1:e.turnState.exploredThisTurn||(e.turnState.drewOnlyWhiteTilesThisTurn=!0),e.turnState.exploredThisTurn=!0,e.dungeon=ld(e.dungeon,n,s),e.dungeon.tileDeck=a;const{monster:l,deck:d}=dd(e.monsterDeck);if(l){const f=hd(),g=fd(l,f,t.heroId,s.id,e.monsterInstanceCounter);g&&(e.monsters.push(g),e.monsterInstanceCounter+=1,e.recentlySpawnedMonsterId=g.instanceId),e.monsterDeck=d}}}}e.turnState.currentPhase="exploration-phase"},endExplorationPhase:e=>{if(e.turnState.currentPhase==="exploration-phase"&&(e.turnState.currentPhase="villain-phase",e.villainPhaseMonsterIndex=0,e.monsterAttackResult=null,e.monsterAttackTargetId=null,e.monsterAttackerId=null,e.monsterMoveActionId=null,Od(e.turnState))){const{encounterId:t,deck:n}=Dd(e.encounterDeck);if(e.encounterDeck=n,t){const r=zd(t);r&&(e.drawnEncounter=r)}}},endVillainPhase:e=>{if(e.turnState.currentPhase!=="villain-phase")return;e.villainPhaseMonsterIndex=0,e.monsterAttackResult=null,e.monsterAttackTargetId=null,e.monsterAttackerId=null,e.monsterMoveActionId=null,e.drawnEncounter=null,e.healingSurgeUsedHeroId=null,e.healingSurgeHpRestored=null,e.turnState.currentHeroIndex=(e.turnState.currentHeroIndex+1)%e.heroTokens.length,e.turnState.currentHeroIndex===0&&(e.turnState.turnNumber+=1),e.turnState.currentPhase="hero-phase",e.heroTurnActions={...jn};const t=e.heroTokens[e.turnState.currentHeroIndex]?.heroId;if(t){const n=e.heroHp.findIndex(r=>r.heroId===t);if(n!==-1){const r=e.heroHp[n];if(md(r,e.partyResources)){const a=Ct.find(o=>o.id===t);a||console.warn(`Hero not found in AVAILABLE_HEROES for ID: ${t}`);const s=a?.name??"A hero";e.defeatReason=`${s} fell with no healing surges remaining.`,e.currentScreen="defeat";return}if(pd(r,e.partyResources)){const a=gd(r,e.partyResources);e.heroHp[n]=a.heroState,e.partyResources=a.resources,e.healingSurgeUsedHeroId=t,e.healingSurgeHpRestored=r.surgeValue}}}},dismissMonsterCard:e=>{e.recentlySpawnedMonsterId=null},dismissEncounterCard:e=>{if(e.drawnEncounter){const t=e.heroTokens[e.turnState.currentHeroIndex]?.heroId;t&&(e.heroHp=Ld(e.drawnEncounter,e.heroHp,t),e.heroHp.every(r=>r.currentHp<=0)&&(e.defeatReason=`The party was overwhelmed by ${e.drawnEncounter.name}.`,e.currentScreen="defeat")),e.encounterDeck=Rd(e.encounterDeck,e.drawnEncounter.id),e.drawnEncounter=null}},cancelEncounterCard:e=>{if(e.drawnEncounter&&Nd(e.partyResources)){const t=jd(e.drawnEncounter,e.partyResources,e.encounterDeck);e.partyResources=t.resources,e.encounterDeck=t.encounterDeck,e.drawnEncounter=null}},setAttackResult:(e,t)=>{if(e.turnState.currentPhase!=="hero-phase"||!e.heroTurnActions.canAttack)return;const{result:n,targetInstanceId:r,attackName:a}=t.payload;e.attackTargetId=r,e.attackName=a,e.defeatedMonsterXp=null,e.defeatedMonsterName=null,e.leveledUpHeroId=null,e.levelUpOldStats=null;const s=e.heroTokens[e.turnState.currentHeroIndex]?.heroId,o=e.heroHp.find(l=>l.heroId===s),c=n.isHit&&o?kd(o.level,n.roll,n.damage):n.damage;if(e.attackResult={...n,damage:c},n.isHit&&c>0){const l=e.monsters.find(d=>d.instanceId===r);if(l&&(l.currentHp-=c,l.currentHp<=0)){const d=aa(l.monsterId);d||console.warn(`Monster definition not found for ID: ${l.monsterId}`);const f=d?.xp??0;e.partyResources.xp+=f,e.defeatedMonsterXp=f,e.defeatedMonsterName=d?.name??l.monsterId,e.monsters=e.monsters.filter(g=>g.instanceId!==r),e.monsterDeck=ud(e.monsterDeck,l.monsterId),e.scenario.monstersDefeated+=1,e.scenario.monstersDefeated>=e.scenario.monstersToDefeat&&(e.currentScreen="victory")}}if(o&&s&&yd(o,n.roll,e.partyResources)){e.levelUpOldStats={...o};const l=wd(o,e.partyResources),d=e.heroHp.findIndex(f=>f.heroId===s);d!==-1&&(e.heroHp[d]=l.heroState),e.partyResources=l.resources,e.leveledUpHeroId=s}e.heroTurnActions=es(e.heroTurnActions,"attack")},dismissAttackResult:e=>{e.attackResult=null,e.attackTargetId=null,e.attackName=null},dismissDefeatNotification:e=>{e.defeatedMonsterXp=null,e.defeatedMonsterName=null},dismissLevelUpNotification:e=>{e.leveledUpHeroId=null,e.levelUpOldStats=null},setMonsters:(e,t)=>{e.monsters=t.payload},activateNextMonster:(e,t)=>{if(e.turnState.currentPhase!=="villain-phase")return;const n=e.heroTokens[e.turnState.currentHeroIndex]?.heroId;if(!n)return;const r=e.monsters.filter(d=>d.controllerId===n);if(e.villainPhaseMonsterIndex>=r.length)return;const a=r[e.villainPhaseMonsterIndex];if(!a)return;const s={},o={};for(const d of e.heroHp)s[d.heroId]=d.currentHp;for(const d of e.heroTokens){const f=Ct.find(g=>g.id===d.heroId);f&&(o[d.heroId]=f.ac)}const c=t.payload?.randomFn??Math.random,l=Pd(a,e.heroTokens,s,o,e.monsters,e.dungeon,c);if(l.type==="move"){const d=e.monsters.find(f=>f.instanceId===a.instanceId);if(d){const f=Hd(l.destination,e.dungeon);if(f){const g=Md(l.destination,f,e.dungeon);g&&(d.position=g,d.tileId=f)}}e.monsterMoveActionId=a.instanceId}else if(l.type==="attack"&&(e.monsterAttackResult=l.result,e.monsterAttackTargetId=l.targetId,e.monsterAttackerId=a.instanceId,l.result.isHit&&l.result.damage>0)){const d=e.heroHp.find(f=>f.heroId===l.targetId);d&&(d.currentHp=Math.max(0,d.currentHp-l.result.damage),e.heroHp.every(g=>g.currentHp<=0)&&(e.currentScreen="defeat"))}e.villainPhaseMonsterIndex+=1},dismissMonsterAttackResult:e=>{e.monsterAttackResult=null,e.monsterAttackTargetId=null,e.monsterAttackerId=null},dismissMonsterMoveAction:e=>{e.monsterMoveActionId=null},dismissHealingSurgeNotification:e=>{e.healingSurgeUsedHeroId=null,e.healingSurgeHpRestored=null},setHeroHp:(e,t)=>{const{heroId:n,hp:r}=t.payload,a=e.heroHp.find(s=>s.heroId===n);a&&(a.currentHp=Math.max(0,r))},setPartyResources:(e,t)=>{const{xp:n,healingSurges:r}=t.payload;n!==void 0&&(e.partyResources.xp=n),r!==void 0&&(e.partyResources.healingSurges=r)}}}),{startGame:Yd,setHeroPosition:Of,showMovement:ts,hideMovement:Vd,moveHero:Xd,resetGame:sa,endHeroPhase:ns,endExplorationPhase:Gd,endVillainPhase:rs,dismissMonsterCard:Kd,dismissEncounterCard:Qd,cancelEncounterCard:Zd,setAttackResult:Jd,dismissAttackResult:$d,dismissDefeatNotification:eu,setMonsters:Nf,activateNextMonster:tu,dismissMonsterAttackResult:nu,dismissMonsterMoveAction:ru,dismissHealingSurgeNotification:au,setHeroHp:jf,dismissLevelUpNotification:su,setPartyResources:Bf}=gi.actions,iu=gi.reducer,V=uc({reducer:{heroes:Uc,game:iu}});typeof window<"u"&&(window.__REDUX_STORE__=V);function Oe(e){const t="/Ashardalon/",n=e.startsWith("/")?e.slice(1):e;return(t.endsWith("/")?t:t+"/")+n}var ou=D('<span class="status-complete svelte-4rkta9">â Selection Complete</span>'),lu=D('<span class="status-incomplete svelte-4rkta9"> </span>'),cu=D("<span> </span>"),du=D('<div class="card-stats svelte-4rkta9"><span> </span> <!></div>'),uu=D('<div class="power-card custom-ability svelte-4rkta9" data-testid="custom-ability-card"><div class="card-header svelte-4rkta9"><span class="card-name svelte-4rkta9"> </span> <span class="card-type svelte-4rkta9"> </span></div> <p class="card-description svelte-4rkta9"> </p> <p class="card-rule svelte-4rkta9"> </p> <!></div>'),fu=D('<button><div class="card-header svelte-4rkta9"><span class="card-name svelte-4rkta9"> </span> <span class="card-type svelte-4rkta9"> </span></div> <p class="card-description svelte-4rkta9"> </p> <p class="card-rule svelte-4rkta9"> </p></button>'),vu=D("<span> </span>"),hu=D('<div class="card-stats svelte-4rkta9"><span> </span> <!></div>'),pu=D('<button><div class="card-header svelte-4rkta9"><span class="card-name svelte-4rkta9"> </span> <span class="card-type svelte-4rkta9"> </span></div> <p class="card-description svelte-4rkta9"> </p> <p class="card-rule svelte-4rkta9"> </p> <!></button>'),mu=D("<span> </span>"),gu=D('<div class="card-stats svelte-4rkta9"><span> </span> <!></div>'),_u=D('<button><div class="card-header svelte-4rkta9"><span class="card-name svelte-4rkta9"> </span> <span class="card-type svelte-4rkta9"> </span></div> <p class="card-description svelte-4rkta9"> </p> <p class="card-rule svelte-4rkta9"> </p> <!></button>'),yu=D('<div class="power-card-selection svelte-4rkta9" data-testid="power-card-selection"><div class="modal-overlay svelte-4rkta9" role="button" tabindex="-1" aria-label="Close modal"></div> <div class="modal-content svelte-4rkta9"><div class="modal-header svelte-4rkta9"><h2 class="svelte-4rkta9"> </h2> <button class="close-button svelte-4rkta9" data-testid="close-power-selection">Ã</button></div> <div class="selection-status svelte-4rkta9" data-testid="selection-status"><!></div> <div class="card-sections svelte-4rkta9"><div class="card-section svelte-4rkta9"><h3 class="svelte-4rkta9">Custom Ability (Automatic)</h3> <div class="card-grid svelte-4rkta9"><!></div></div> <div class="card-section svelte-4rkta9"><h3 class="svelte-4rkta9">Utility Power (Select 1)</h3> <div class="card-grid svelte-4rkta9" data-testid="utility-cards"></div></div> <div class="card-section svelte-4rkta9"><h3 class="svelte-4rkta9">At-Will Powers (Select 2)</h3> <div class="card-grid svelte-4rkta9" data-testid="atwill-cards"></div></div> <div class="card-section svelte-4rkta9"><h3 class="svelte-4rkta9">Daily Power (Select 1)</h3> <div class="card-grid svelte-4rkta9" data-testid="daily-cards"></div></div></div> <div class="modal-footer svelte-4rkta9"><button class="done-button svelte-4rkta9" data-testid="done-power-selection">Done</button></div></div></div>');function wu(e,t){Ie(t,!0);const n=G(()=>Mc(t.hero.heroClass)),r=G(()=>Hc(t.hero.heroClass)),a=G(()=>Ac(t.hero.heroClass)),s=G(()=>ci[t.hero.id]),o=G(()=>i(s)?Qn(i(s)):null),c=G(()=>t.selection.utility!==null&&t.selection.atWills.length===2&&t.selection.daily!==null);function l(T){V.dispatch(jc({heroId:t.hero.id,cardId:T}))}function d(T){V.dispatch(Bc({heroId:t.hero.id,cardId:T}))}function f(T){V.dispatch(Lc({heroId:t.hero.id,cardId:T}))}function g(T){return t.selection.utility===T}function h(T){return t.selection.atWills.includes(T)}function _(T){return t.selection.daily===T}function x(T){return t.selection.atWills.includes(T)||t.selection.atWills.length<2}var O=yu(),k=u(O);k.__click=function(...T){t.onClose?.apply(this,T)},k.__keydown=T=>T.key==="Escape"&&t.onClose();var M=v(k,2),H=u(M),E=u(H),I=u(E),N=v(E,2);N.__click=function(...T){t.onClose?.apply(this,T)};var z=v(H,2),Q=u(z);{var U=T=>{var C=ou();S(T,C)},W=T=>{var C=lu(),K=u(C);Y(()=>w(K,`Select: 1 Utility (${t.selection.utility?"â":"â"}), 
          2 At-Wills (${t.selection.atWills.length??""}/2), 
          1 Daily (${t.selection.daily?"â":"â"})`)),S(T,C)};F(Q,T=>{i(c)?T(U):T(W,!1)})}var J=v(z,2),A=u(J),te=v(u(A),2),ue=u(te);{var fe=T=>{var C=uu(),K=u(C),ae=u(K),de=u(ae),le=v(ae,2),ve=u(le),we=v(K,2),ke=u(we),ce=v(we,2),ye=u(ce),he=v(ce,2);{var yt=Ue=>{var Rt=du(),Ee=u(Rt),Pe=u(Ee),pe=v(Ee,2);{var vt=et=>{var it=cu(),tt=u(it);Y(()=>w(tt,`Damage: ${i(o).damage??""}`)),S(et,it)};F(pe,et=>{i(o).damage!==void 0&&et(vt)})}Y(()=>w(Pe,`Attack: +${i(o).attackBonus??""}`)),S(Ue,Rt)};F(he,Ue=>{i(o).attackBonus!==void 0&&Ue(yt)})}Y(()=>{w(de,i(o).name),w(ve,i(o).type),w(ke,i(o).description),w(ye,i(o).rule)}),S(T,C)};F(ue,T=>{i(o)&&T(fe)})}var xe=v(A,2),De=v(u(xe),2);Fe(De,21,()=>i(a),T=>T.id,(T,C)=>{var K=fu();let ae;K.__click=()=>l(i(C).id);var de=u(K),le=u(de),ve=u(le),we=v(le,2),ke=u(we),ce=v(de,2),ye=u(ce),he=v(ce,2),yt=u(he);Y(Ue=>{ae=ze(K,1,"power-card svelte-4rkta9",null,ae,Ue),L(K,"data-testid",`utility-card-${i(C).id??""}`),w(ve,i(C).name),w(ke,i(C).type),w(ye,i(C).description),w(yt,i(C).rule)},[()=>({selected:g(i(C).id)})]),S(T,K)});var ie=v(xe,2),re=v(u(ie),2);Fe(re,21,()=>i(n),T=>T.id,(T,C)=>{var K=pu();let ae;K.__click=()=>d(i(C).id);var de=u(K),le=u(de),ve=u(le),we=v(le,2),ke=u(we),ce=v(de,2),ye=u(ce),he=v(ce,2),yt=u(he),Ue=v(he,2);{var Rt=Ee=>{var Pe=hu(),pe=u(Pe),vt=u(pe),et=v(pe,2);{var it=tt=>{var Ft=vu(),fn=u(Ft);Y(()=>w(fn,`Damage: ${i(C).damage??""}`)),S(tt,Ft)};F(et,tt=>{i(C).damage!==void 0&&tt(it)})}Y(()=>w(vt,`Attack: +${i(C).attackBonus??""}`)),S(Ee,Pe)};F(Ue,Ee=>{i(C).attackBonus!==void 0&&Ee(Rt)})}Y((Ee,Pe)=>{ae=ze(K,1,"power-card svelte-4rkta9",null,ae,Ee),K.disabled=Pe,L(K,"data-testid",`atwill-card-${i(C).id??""}`),w(ve,i(C).name),w(ke,i(C).type),w(ye,i(C).description),w(yt,i(C).rule)},[()=>({selected:h(i(C).id),disabled:!x(i(C).id)}),()=>!x(i(C).id)]),S(T,K)});var _e=v(ie,2),j=v(u(_e),2);Fe(j,21,()=>i(r),T=>T.id,(T,C)=>{var K=_u();let ae;K.__click=()=>f(i(C).id);var de=u(K),le=u(de),ve=u(le),we=v(le,2),ke=u(we),ce=v(de,2),ye=u(ce),he=v(ce,2),yt=u(he),Ue=v(he,2);{var Rt=Ee=>{var Pe=gu(),pe=u(Pe),vt=u(pe),et=v(pe,2);{var it=tt=>{var Ft=mu(),fn=u(Ft);Y(()=>w(fn,`Damage: ${i(C).damage??""}`)),S(tt,Ft)};F(et,tt=>{i(C).damage!==void 0&&tt(it)})}Y(()=>w(vt,`Attack: +${i(C).attackBonus??""}`)),S(Ee,Pe)};F(Ue,Ee=>{i(C).attackBonus!==void 0&&Ee(Rt)})}Y(Ee=>{ae=ze(K,1,"power-card svelte-4rkta9",null,ae,Ee),L(K,"data-testid",`daily-card-${i(C).id??""}`),w(ve,i(C).name),w(ke,i(C).type),w(ye,i(C).description),w(yt,i(C).rule)},[()=>({selected:_(i(C).id)})]),S(T,K)});var P=v(J,2),B=u(P);B.__click=function(...T){t.onClose?.apply(this,T)},Y(()=>{w(I,`Select Power Cards for ${t.hero.name??""}`),B.disabled=!i(c)}),S(e,O),Ce()}Ge(["click","keydown"]);var ku=D('<button><img class="hero-image svelte-1rwnzlz"/> <div class="hero-info svelte-1rwnzlz"><span class="hero-name svelte-1rwnzlz" data-testid="hero-name"> </span> <span class="hero-class svelte-1rwnzlz"> </span></div></button>'),bu=D('<button><img class="hero-image svelte-1rwnzlz"/> <div class="hero-info svelte-1rwnzlz"><span class="hero-name svelte-1rwnzlz" data-testid="hero-name"> </span> <span class="hero-class svelte-1rwnzlz"> </span></div></button>'),xu=D('<span class="power-status complete svelte-1rwnzlz">â Powers Selected</span>'),Tu=D('<span class="power-status incomplete svelte-1rwnzlz">Select Powers</span>'),Su=D('<button><img class="selected-hero-image svelte-1rwnzlz"/> <div class="selected-hero-info svelte-1rwnzlz"><span class="selected-hero-name svelte-1rwnzlz"> </span> <!></div></button>'),Iu=D('<div class="selected-heroes svelte-1rwnzlz" data-testid="selected-heroes-list"></div>'),Cu=D('<button><img class="hero-image svelte-1rwnzlz"/> <div class="hero-info svelte-1rwnzlz"><span class="hero-name svelte-1rwnzlz" data-testid="hero-name"> </span> <span class="hero-class svelte-1rwnzlz"> </span></div></button>'),Eu=D('<button><img class="hero-image svelte-1rwnzlz"/> <div class="hero-info svelte-1rwnzlz"><span class="hero-name svelte-1rwnzlz" data-testid="hero-name"> </span> <span class="hero-class svelte-1rwnzlz"> </span></div></button>'),Pu=D('<div class="character-select svelte-1rwnzlz" data-testid="character-select"><div class="edge-zone edge-top svelte-1rwnzlz" data-testid="edge-top"><div class="hero-row svelte-1rwnzlz" data-testid="hero-grid"></div></div> <div class="middle-section svelte-1rwnzlz"><div class="edge-zone edge-left svelte-1rwnzlz" data-testid="edge-left"><div class="hero-column svelte-1rwnzlz"></div></div> <div class="center-zone svelte-1rwnzlz" data-testid="center-zone"><h1 class="svelte-1rwnzlz">Select Your Heroes</h1> <p class="instructions svelte-1rwnzlz">Choose 1-5 heroes for your adventure</p> <p class="instructions svelte-1rwnzlz">Tap a hero from your edge of the table</p> <div class="selection-info svelte-1rwnzlz"><span data-testid="selected-count"> </span></div> <!> <button class="start-button svelte-1rwnzlz" data-testid="start-game-button">Start Adventure</button></div> <div class="edge-zone edge-right svelte-1rwnzlz" data-testid="edge-right"><div class="hero-column svelte-1rwnzlz"></div></div></div> <div class="edge-zone edge-bottom svelte-1rwnzlz" data-testid="edge-bottom"><div class="hero-row svelte-1rwnzlz"></div></div></div> <!>',1);function Mu(e,t){Ie(t,!0);let n=q(ge([])),r=q(ge([])),a=q(ge({})),s=q(ge({})),o=q(null);Tt(()=>{const j=V.subscribe(()=>{const B=V.getState();b(n,B.heroes.selectedHeroes,!0),b(r,B.heroes.availableHeroes,!0),b(a,B.heroes.heroEdgeMap,!0),b(s,B.heroes.powerCardSelections,!0)}),P=V.getState();return b(n,P.heroes.selectedHeroes,!0),b(r,P.heroes.availableHeroes,!0),b(a,P.heroes.heroEdgeMap,!0),b(s,P.heroes.powerCardSelections,!0),j});function c(j,P){return i(a)[j]===P}function l(j,P){const B=i(a)[j];return B!==void 0&&B!==P}function d(j,P){V.dispatch(Nc({heroId:j,edge:P}))}function f(){i(n).length>0&&h()&&(V.dispatch(Fc()),V.dispatch(Yd({heroIds:i(n).map(j=>j.id)})))}function g(j){const P=i(s)[j];return P?P.utility!==null&&P.atWills.length===2&&P.daily!==null:!1}function h(){return i(n).every(j=>g(j.id))}function _(){return i(n).length>=1&&i(n).length<=5&&h()}function x(j){b(o,j,!0)}function O(){b(o,null)}var k=Pu(),M=Se(k),H=u(M),E=u(H);Fe(E,21,()=>i(r),j=>j.id,(j,P)=>{var B=ku();let T;B.__click=()=>d(i(P).id,"top");var C=u(B),K=v(C,2),ae=u(K),de=u(ae),le=v(ae,2),ve=u(le);Y((we,ke,ce)=>{T=ze(B,1,"hero-card svelte-1rwnzlz",null,T,we),L(B,"data-testid",`hero-${i(P).id??""}-top`),B.disabled=ke,L(C,"src",ce),L(C,"alt",i(P).name),w(de,i(P).name),w(ve,i(P).heroClass)},[()=>({selected:c(i(P).id,"top"),unavailable:l(i(P).id,"top")}),()=>l(i(P).id,"top"),()=>Oe(i(P).imagePath)]),S(j,B)});var I=v(H,2),N=u(I),z=u(N);Fe(z,21,()=>i(r),j=>j.id,(j,P)=>{var B=bu();let T;B.__click=()=>d(i(P).id,"left");var C=u(B),K=v(C,2),ae=u(K),de=u(ae),le=v(ae,2),ve=u(le);Y((we,ke,ce)=>{T=ze(B,1,"hero-card svelte-1rwnzlz",null,T,we),L(B,"data-testid",`hero-${i(P).id??""}-left`),B.disabled=ke,L(C,"src",ce),L(C,"alt",i(P).name),w(de,i(P).name),w(ve,i(P).heroClass)},[()=>({selected:c(i(P).id,"left"),unavailable:l(i(P).id,"left")}),()=>l(i(P).id,"left"),()=>Oe(i(P).imagePath)]),S(j,B)});var Q=v(N,2),U=v(u(Q),6),W=u(U),J=u(W),A=v(U,2);{var te=j=>{var P=Iu();Fe(P,21,()=>i(n),B=>B.id,(B,T)=>{var C=Su();let K;C.__click=()=>x(i(T));var ae=u(C),de=v(ae,2),le=u(de),ve=u(le),we=v(le,2);{var ke=ye=>{var he=xu();S(ye,he)},ce=ye=>{var he=Tu();S(ye,he)};F(we,ye=>{g(i(T).id)?ye(ke):ye(ce,!1)})}Y((ye,he)=>{K=ze(C,1,"selected-hero-item svelte-1rwnzlz",null,K,ye),L(C,"data-testid",`select-powers-${i(T).id??""}`),L(ae,"src",he),L(ae,"alt",i(T).name),w(ve,i(T).name)},[()=>({complete:g(i(T).id)}),()=>Oe(i(T).imagePath)]),S(B,C)}),S(j,P)};F(A,j=>{i(n).length>0&&j(te)})}var ue=v(A,2);ue.__click=f;var fe=v(Q,2),xe=u(fe);Fe(xe,21,()=>i(r),j=>j.id,(j,P)=>{var B=Cu();let T;B.__click=()=>d(i(P).id,"right");var C=u(B),K=v(C,2),ae=u(K),de=u(ae),le=v(ae,2),ve=u(le);Y((we,ke,ce)=>{T=ze(B,1,"hero-card svelte-1rwnzlz",null,T,we),L(B,"data-testid",`hero-${i(P).id??""}-right`),B.disabled=ke,L(C,"src",ce),L(C,"alt",i(P).name),w(de,i(P).name),w(ve,i(P).heroClass)},[()=>({selected:c(i(P).id,"right"),unavailable:l(i(P).id,"right")}),()=>l(i(P).id,"right"),()=>Oe(i(P).imagePath)]),S(j,B)});var De=v(I,2),ie=u(De);Fe(ie,21,()=>i(r),j=>j.id,(j,P)=>{var B=Eu();let T;B.__click=()=>d(i(P).id,"bottom");var C=u(B),K=v(C,2),ae=u(K),de=u(ae),le=v(ae,2),ve=u(le);Y((we,ke,ce)=>{T=ze(B,1,"hero-card svelte-1rwnzlz",null,T,we),L(B,"data-testid",`hero-${i(P).id??""}`),B.disabled=ke,L(C,"src",ce),L(C,"alt",i(P).name),w(de,i(P).name),w(ve,i(P).heroClass)},[()=>({selected:c(i(P).id,"bottom"),unavailable:l(i(P).id,"bottom")}),()=>l(i(P).id,"bottom"),()=>Oe(i(P).imagePath)]),S(j,B)});var re=v(M,2);{var _e=j=>{wu(j,{get hero(){return i(o)},get selection(){return i(s)[i(o).id]},onClose:O})};F(re,j=>{i(o)&&j(_e)})}Y(j=>{w(J,`${i(n).length??""} heroes selected`),ue.disabled=j},[()=>!_()]),S(e,k),Ce()}Ge(["click"]);var Hu=D('<button class="move-square svelte-ehd1hj" data-testid="move-square"><span class="sr-only svelte-ehd1hj"> </span></button>'),Au=D('<div class="movement-overlay svelte-ehd1hj" data-testid="movement-overlay"></div>');function Du(e,t){Ie(t,!0);function n(s){const o=t.tileOffsetX+s.x*t.cellSize,c=t.tileOffsetY+s.y*t.cellSize;return`left: ${o}px; top: ${c}px; width: ${t.cellSize}px; height: ${t.cellSize}px;`}function r(s,o){s.stopPropagation(),t.onSquareClick(o)}var a=Au();Fe(a,21,()=>t.validMoveSquares,s=>`${s.x},${s.y}`,(s,o)=>{var c=Hu();c.__click=f=>r(f,i(o));var l=u(c),d=u(l);Y(f=>{L(c,"data-position-x",i(o).x),L(c,"data-position-y",i(o).y),Ot(c,f),w(d,`Move to (${i(o).x??""}, ${i(o).y??""})`)},[()=>n(i(o))]),S(s,c)}),S(e,a),Ce()}Ge(["click"]);var Ru=D('<div class="tile-deck-counter svelte-9649r" data-testid="tile-deck-counter"><span class="deck-icon svelte-9649r">ð¦</span> <span class="deck-count svelte-9649r" data-testid="tile-deck-count"> </span> <span class="deck-label svelte-9649r">tiles</span></div>');function zu(e,t){var n=Ru(),r=v(u(n),2),a=u(r);Y(()=>w(a,t.tileCount)),S(e,n)}var Ou=D('<div class="unexplored-edge svelte-12eown4" data-testid="unexplored-edge"><span class="question-mark svelte-12eown4">?</span></div>');function Nu(e,t){Ie(t,!0);const r=(()=>{const c=t.cellSize*1.5,l=36;switch(t.direction){case"north":return{left:`${t.tileWidth/2-c/2}px`,top:`${l-8/2}px`,width:`${c}px`,height:"8px"};case"south":return{left:`${t.tileWidth/2-c/2}px`,bottom:`${l-8/2}px`,width:`${c}px`,height:"8px"};case"east":return{right:`${l-8/2}px`,top:`${t.tileHeight/2-c/2}px`,width:"8px",height:`${c}px`};case"west":return{left:`${l-8/2}px`,top:`${t.tileHeight/2-c/2}px`,width:"8px",height:`${c}px`}}})(),a=Object.entries(r).map(([o,c])=>`${o}: ${c}`).join("; ");var s=Ou();Y(()=>{L(s,"data-direction",t.direction),Ot(s,a)}),S(e,s),Ce()}var ju=D('<div class="monster-token svelte-1g5ysl" data-testid="monster-token"><img class="token-image svelte-1g5ysl"/> <span class="token-label svelte-1g5ysl"> </span></div>');function Bu(e,t){Ie(t,!0);const n=G(()=>Pn.find(c=>c.id===t.monster.monsterId)),r=G(()=>()=>{const c=t.cellSize/2,l=t.tilePixelOffset.x+t.tileOffsetX+t.monster.position.x*t.cellSize+c,d=t.tilePixelOffset.y+t.tileOffsetY+t.monster.position.y*t.cellSize+c;return`left: ${l}px; top: ${d}px;`});var a=He(),s=Se(a);{var o=c=>{var l=ju(),d=u(l),f=v(d,2),g=u(f);Y((h,_)=>{L(l,"data-monster-id",t.monster.instanceId),Ot(l,h),L(d,"src",_),L(d,"alt",i(n).name),w(g,i(n).name)},[()=>i(r)(),()=>Oe(i(n).imagePath)]),S(c,l)};F(s,c=>{i(n)&&c(o)})}S(e,a),Ce()}var Lu=D('<div class="monster-card-overlay svelte-at5lsg" role="dialog" aria-modal="true" aria-label="Monster spawned" tabindex="0" data-testid="monster-card-overlay"><div class="monster-card svelte-at5lsg" role="article" data-testid="monster-card"><div class="card-header svelte-at5lsg"><h3 class="monster-name svelte-at5lsg" data-testid="monster-name"> </h3> <button class="dismiss-button svelte-at5lsg" aria-label="Dismiss monster card" data-testid="dismiss-monster-card">â</button></div> <div class="card-image svelte-at5lsg"><img class="monster-image svelte-at5lsg"/></div> <div class="card-stats svelte-at5lsg"><div class="stat svelte-at5lsg"><span class="stat-label svelte-at5lsg">AC</span> <span class="stat-value svelte-at5lsg" data-testid="monster-ac"> </span></div> <div class="stat svelte-at5lsg"><span class="stat-label svelte-at5lsg">HP</span> <span class="stat-value svelte-at5lsg" data-testid="monster-hp"> </span></div> <div class="stat svelte-at5lsg"><span class="stat-label svelte-at5lsg">XP</span> <span class="stat-value svelte-at5lsg" data-testid="monster-xp"> </span></div></div> <p class="card-hint svelte-at5lsg">Click anywhere to dismiss</p></div></div>');function Fu(e,t){Ie(t,!0);const n=G(()=>Pn.find(l=>l.id===t.monsterId));function r(){t.onDismiss&&t.onDismiss()}function a(l){(l.key==="Escape"||l.key==="Enter"||l.key===" ")&&(l.preventDefault(),r())}var s=He(),o=Se(s);{var c=l=>{var d=Lu();d.__click=r,d.__keydown=a;var f=u(d);f.__click=A=>A.stopPropagation(),f.__keydown=A=>A.stopPropagation();var g=u(f),h=u(g),_=u(h),x=v(h,2);x.__click=r;var O=v(g,2),k=u(O),M=v(O,2),H=u(M),E=v(u(H),2),I=u(E),N=v(H,2),z=v(u(N),2),Q=u(z),U=v(N,2),W=v(u(U),2),J=u(W);Y(A=>{w(_,i(n).name),L(k,"src",A),L(k,"alt",i(n).name),w(I,i(n).ac),w(Q,i(n).hp),w(J,i(n).xp)},[()=>Oe(i(n).imagePath)]),S(l,d)};F(o,l=>{i(n)&&l(c)})}S(e,s),Ce()}Ge(["click","keydown"]);var qu=D('<div class="encounter-card-overlay svelte-1i2wtj7" role="dialog" aria-modal="true" aria-label="Encounter card drawn" tabindex="0" data-testid="encounter-card-overlay"><div class="encounter-card svelte-1i2wtj7" role="article" data-testid="encounter-card"><div class="card-header svelte-1i2wtj7"><span class="type-badge svelte-1i2wtj7" data-testid="encounter-type"> </span> <button class="dismiss-button svelte-1i2wtj7" aria-label="Dismiss encounter card" data-testid="dismiss-encounter-card">â</button></div> <h3 class="encounter-name svelte-1i2wtj7" data-testid="encounter-name"> </h3> <div class="card-image svelte-1i2wtj7"><img class="encounter-image svelte-1i2wtj7"/></div> <div class="card-description svelte-1i2wtj7" data-testid="encounter-description"> </div> <div class="effect-summary svelte-1i2wtj7" data-testid="encounter-effect"><span class="effect-label svelte-1i2wtj7">Effect:</span> <span class="effect-value svelte-1i2wtj7"> </span></div> <div class="button-row svelte-1i2wtj7"><button class="cancel-button svelte-1i2wtj7" data-testid="encounter-cancel">Cancel (5 XP)</button> <button class="accept-button svelte-1i2wtj7" data-testid="encounter-continue">Accept</button></div> <p class="card-hint svelte-1i2wtj7">Press Enter to accept or use buttons above</p></div></div>');function Uu(e,t){Ie(t,!0);let n=zl(t,"partyXp",3,0),r=G(()=>n()>=ea);function a(){t.onDismiss&&t.onDismiss()}function s(){t.onCancel&&i(r)&&t.onCancel()}function o(A){(A.key==="Escape"||A.key==="Enter"||A.key===" ")&&(A.preventDefault(),a())}function c(A){switch(A){case"event":return"â¡";case"trap":return"â ï¸";case"hazard":return"â ï¸";case"curse":return"ð®";case"environment":return"ð«ï¸";default:return"â"}}function l(A){switch(A.type){case"damage":return A.target==="active-hero"?`Active hero takes ${A.amount} damage`:`All heroes take ${A.amount} damage`;case"environment":return"Environment effect (not implemented)";case"curse":return`Curse (${A.duration} turns) (not implemented)`;case"trap":return`Trap - DC ${A.disableDC} to disable (not implemented)`;case"hazard":return`Hazard - AC ${A.ac}, ${A.damage} damage (not implemented)`;default:return"Unknown effect"}}var d=qu();d.__click=a,d.__keydown=o;var f=u(d);f.__click=A=>A.stopPropagation(),f.__keydown=A=>A.stopPropagation();var g=u(f),h=u(g),_=u(h),x=v(h,2);x.__click=a;var O=v(g,2),k=u(O),M=v(O,2),H=u(M),E=v(M,2),I=u(E),N=v(E,2),z=v(u(N),2),Q=u(z),U=v(N,2),W=u(U);W.__click=s;var J=v(W,2);J.__click=a,Y((A,te,ue,fe)=>{w(_,`${A??""} ${te??""}`),w(k,t.encounter.name),L(H,"src",ue),L(H,"alt",t.encounter.name),w(I,t.encounter.description),w(Q,fe),W.disabled=!i(r),L(W,"title",i(r)?"Spend 5 XP to cancel this encounter":"Not enough XP (need 5)")},[()=>c(t.encounter.type),()=>t.encounter.type.toUpperCase(),()=>Oe(t.encounter.imagePath),()=>l(t.encounter.effect)]),wl("error",H,A=>{const te=A.target;te&&t.encounter&&(te.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100"><rect fill="%23333" width="100" height="100"/><text x="50" y="50" fill="%23fff" text-anchor="middle" dominant-baseline="central" font-size="40">'+c(t.encounter.type)+"</text></svg>")}),S(e,d),Ce()}Ge(["click","keydown"]);var Wu=D('<button><div class="card-header svelte-77qxlp"><span class="card-name svelte-77qxlp"> </span> <span class="card-type-badge svelte-77qxlp"> </span></div> <div class="card-stats svelte-77qxlp"><span class="attack-bonus svelte-77qxlp"> </span> <span class="damage svelte-77qxlp"> </span></div></button>'),Yu=D('<button class="attack-button svelte-77qxlp"> </button>'),Vu=D('<div class="target-selection svelte-77qxlp" data-testid="target-selection"><div class="target-header svelte-77qxlp"><span> </span></div> <div class="target-list svelte-77qxlp"></div></div>'),Xu=D('<div class="select-card-hint svelte-77qxlp" data-testid="select-card-hint">Select a power card above to attack</div>'),Gu=D('<div class="power-card-attack-panel svelte-77qxlp" data-testid="power-card-attack-panel"><div class="panel-header svelte-77qxlp"><span class="panel-title svelte-77qxlp">Select Attack Power</span></div> <div class="card-list svelte-77qxlp" data-testid="attack-card-list"></div> <!></div>');function Ku(e,t){Ie(t,!0);let n=q(null);const r=G(()=>()=>{const h=[];for(const _ of t.heroPowerCards.cardStates){if(_.isFlipped)continue;const x=Qn(_.cardId);x&&x.attackBonus!==void 0&&h.push({card:x,state:_})}return h});function a(h){return Pn.find(x=>x.id===h)?.name||"Unknown"}function s(h){b(n,i(n)===h?null:h,!0)}function o(h){i(n)!==null&&(t.onAttackWithCard(i(n),h),b(n,null))}function c(h){switch(h){case"at-will":return"At-Will";case"daily":return"Daily";case"utility":return"Utility";default:return h}}function l(h){switch(h){case"at-will":return"card-atwill";case"daily":return"card-daily";case"utility":return"card-utility";default:return""}}var d=He(),f=Se(d);{var g=h=>{var _=Gu(),x=v(u(_),2);Fe(x,21,()=>i(r)(),({card:H,state:E})=>H.id,(H,E)=>{let I=()=>i(E).card;var N=Wu();let z;N.__click=()=>s(I().id);var Q=u(N),U=u(Q),W=u(U),J=v(U,2),A=u(J),te=v(Q,2),ue=u(te),fe=u(ue),xe=v(ue,2),De=u(xe);Y((ie,re)=>{z=ze(N,1,`power-card-option ${ie??""}`,"svelte-77qxlp",z,{selected:i(n)===I().id}),L(N,"data-testid",`attack-card-${I().id??""}`),L(N,"data-card-type",I().type),w(W,I().name),w(A,re),w(fe,`+${I().attackBonus??""}`),w(De,`${I().damage??""} dmg`)},[()=>l(I().type),()=>c(I().type)]),S(H,N)});var O=v(x,2);{var k=H=>{const E=G(()=>Qn(i(n)));var I=Vu(),N=u(I),z=u(N),Q=u(z),U=v(N,2);Fe(U,21,()=>t.adjacentMonsters,W=>W.instanceId,(W,J)=>{var A=Yu();A.__click=()=>o(i(J).instanceId);var te=u(A);Y((ue,fe)=>{L(A,"data-testid",`attack-target-${i(J).instanceId??""}`),L(A,"aria-label",`Attack ${ue??""} with ${i(E)?.name??""}`),w(te,`Attack ${fe??""}`)},[()=>a(i(J).monsterId),()=>a(i(J).monsterId)]),S(W,A)}),Y(()=>w(Q,`Attack with ${i(E)?.name??""}`)),S(H,I)},M=H=>{var E=Xu();S(H,E)};F(O,H=>{i(n)!==null?H(k):H(M,!1)})}S(h,_)};F(f,h=>{t.adjacentMonsters.length>0&&i(r)().length>0&&h(g)})}S(e,d),Ce()}Ge(["click"]);var Qu=D('<span class="result-text critical svelte-1jt2qdd" data-testid="result-text">âï¸ CRITICAL HIT!</span>'),Zu=D('<span class="result-text hit svelte-1jt2qdd" data-testid="result-text">â HIT!</span>'),Ju=D('<span class="result-text miss svelte-1jt2qdd" data-testid="result-text">â MISS!</span>'),$u=D('<div class="damage-info svelte-1jt2qdd" data-testid="damage-info"><span class="damage-value svelte-1jt2qdd"> </span> <span class="damage-label svelte-1jt2qdd"> </span></div>'),ef=D('<div class="combat-result-overlay svelte-1jt2qdd" role="dialog" aria-modal="true" aria-label="Combat result" tabindex="0" data-testid="combat-result-overlay"><div role="document" data-testid="combat-result"><div class="result-header svelte-1jt2qdd"><h3 class="attacker-info svelte-1jt2qdd" data-testid="attacker-info"> </h3> <button class="dismiss-button svelte-1jt2qdd" aria-label="Dismiss combat result" data-testid="dismiss-combat-result">â</button></div> <div class="dice-roll-section svelte-1jt2qdd"><div class="dice-container svelte-1jt2qdd"><span class="d20-icon svelte-1jt2qdd" aria-label="D20 die">D20</span> <span class="roll-value svelte-1jt2qdd" data-testid="roll-value"> </span></div> <div class="roll-breakdown svelte-1jt2qdd"><div class="breakdown-row svelte-1jt2qdd"><span class="breakdown-label svelte-1jt2qdd">Roll:</span> <span class="breakdown-value svelte-1jt2qdd" data-testid="dice-roll"> </span></div> <div class="breakdown-row svelte-1jt2qdd"><span class="breakdown-label svelte-1jt2qdd">+ Bonus:</span> <span class="breakdown-value svelte-1jt2qdd" data-testid="attack-bonus"> </span></div> <div class="breakdown-divider svelte-1jt2qdd"></div> <div class="breakdown-row total svelte-1jt2qdd"><span class="breakdown-label svelte-1jt2qdd">Total:</span> <span class="breakdown-value svelte-1jt2qdd" data-testid="attack-total"> </span></div> <div class="breakdown-row target svelte-1jt2qdd"><span class="breakdown-label svelte-1jt2qdd">vs AC:</span> <span class="breakdown-value svelte-1jt2qdd" data-testid="target-ac"> </span></div></div></div> <div class="result-section svelte-1jt2qdd"><!> <!></div> <p class="dismiss-hint svelte-1jt2qdd">Click anywhere to dismiss</p></div></div>');function as(e,t){Ie(t,!0);function n(){t.onDismiss&&t.onDismiss()}function r(re){(re.key==="Escape"||re.key==="Enter"||re.key===" ")&&(re.preventDefault(),n())}var a=ef();a.__click=n,a.__keydown=r;var s=u(a);let o;s.__click=re=>re.stopPropagation(),s.__keydown=re=>re.stopPropagation();var c=u(s),l=u(c),d=u(l),f=v(l,2);f.__click=n;var g=v(c,2),h=u(g),_=v(u(h),2),x=u(_),O=v(h,2),k=u(O),M=v(u(k),2),H=u(M),E=v(k,2),I=v(u(E),2),N=u(I),z=v(E,4),Q=v(u(z),2),U=u(Q),W=v(z,2),J=v(u(W),2),A=u(J),te=v(g,2),ue=u(te);{var fe=re=>{var _e=Qu();S(re,_e)},xe=re=>{var _e=He(),j=Se(_e);{var P=T=>{var C=Zu();S(T,C)},B=T=>{var C=Ju();S(T,C)};F(j,T=>{t.result.isHit?T(P):T(B,!1)},!0)}S(re,_e)};F(ue,re=>{t.result.isCritical?re(fe):re(xe,!1)})}var De=v(ue,2);{var ie=re=>{var _e=$u(),j=u(_e),P=u(j),B=v(j,2),T=u(B);Y(()=>{w(P,t.result.damage),w(T,`damage to ${t.targetName??""}`)}),S(re,_e)};F(De,re=>{t.result.isHit&&re(ie)})}Y(()=>{o=ze(s,1,"combat-result svelte-1jt2qdd",null,o,{hit:t.result.isHit,miss:!t.result.isHit,critical:t.result.isCritical}),w(d,`${t.attackerName??""} attacks with ${t.attackName??""}!`),w(x,t.result.roll),w(H,t.result.roll),w(N,t.result.attackBonus),w(U,t.result.total),w(A,t.result.targetAC)}),S(e,a),Ce()}Ge(["click","keydown"]);var tf=D('<div class="monster-move-overlay svelte-18np0et" role="dialog" aria-modal="true" aria-label="Monster move result" tabindex="0" data-testid="monster-move-overlay"><div class="monster-move-card svelte-18np0et" role="document" data-testid="monster-move-card"><div class="move-header svelte-18np0et"><h3 class="monster-name svelte-18np0et" data-testid="monster-name"> </h3> <button class="dismiss-button svelte-18np0et" aria-label="Dismiss monster move result" data-testid="dismiss-monster-move">â</button></div> <div class="move-content svelte-18np0et"><span class="move-icon svelte-18np0et">ð</span> <p class="move-text svelte-18np0et" data-testid="move-text">Moved but could not attack</p></div> <p class="dismiss-hint svelte-18np0et">Click anywhere to continue</p></div></div>');function nf(e,t){Ie(t,!0);function n(){t.onDismiss&&t.onDismiss()}function r(f){(f.key==="Escape"||f.key==="Enter"||f.key===" ")&&(f.preventDefault(),n())}var a=tf();a.__click=n,a.__keydown=r;var s=u(a);s.__click=f=>f.stopPropagation(),s.__keydown=f=>f.stopPropagation();var o=u(s),c=u(o),l=u(c),d=v(c,2);d.__click=n,Y(()=>w(l,t.monsterName)),S(e,a),Ce()}Ge(["click","keydown"]);var rf=D('<div class="xp-counter svelte-1ymh8ps" data-testid="xp-counter"><span class="xp-icon svelte-1ymh8ps" aria-label="Experience Points">â­</span> <span class="xp-label svelte-1ymh8ps">XP:</span> <span class="xp-value svelte-1ymh8ps" data-testid="xp-value"> </span></div>');function af(e,t){var n=rf(),r=v(u(n),4),a=u(r);Y(()=>w(a,t.xp)),S(e,n)}var sf=D('<div class="healing-surge-counter svelte-121e3gw" data-testid="healing-surge-counter"><span class="surge-icon svelte-121e3gw" aria-label="Healing Surges">â¤ï¸</span> <span class="surge-label svelte-121e3gw">Surges:</span> <span class="surge-value svelte-121e3gw" data-testid="surge-value"> </span></div>');function of(e,t){var n=sf(),r=v(u(n),4),a=u(r);Y(()=>w(a,t.surges)),S(e,n)}var lf=D('<div class="defeat-overlay svelte-1h38uhv" role="dialog" aria-modal="true" aria-label="Monster defeated notification" tabindex="0" data-testid="defeat-notification-overlay"><div class="defeat-notification svelte-1h38uhv" role="dialog" aria-labelledby="defeat-title" tabindex="-1" data-testid="defeat-notification"><div class="defeat-header svelte-1h38uhv"><span class="defeat-icon svelte-1h38uhv">ð</span> <h3 class="defeat-title svelte-1h38uhv" id="defeat-title" data-testid="defeat-title"> </h3> <button class="dismiss-button svelte-1h38uhv" aria-label="Dismiss notification" data-testid="dismiss-defeat-notification">â</button></div> <div class="xp-gain-section svelte-1h38uhv" data-testid="xp-gain-section"><span class="xp-icon svelte-1h38uhv">â­</span> <span class="xp-amount svelte-1h38uhv" data-testid="xp-amount"> </span></div> <p class="dismiss-hint svelte-1h38uhv">Click anywhere to dismiss</p></div></div>');function cf(e,t){Ie(t,!0);function n(){t.onDismiss&&t.onDismiss()}function r(_){(_.key==="Escape"||_.key==="Enter"||_.key===" ")&&(_.preventDefault(),n())}var a=lf();a.__click=n,a.__keydown=r;var s=u(a);s.__click=_=>_.stopPropagation(),s.__keydown=_=>_.stopPropagation();var o=u(s),c=v(u(o),2),l=u(c),d=v(c,2);d.__click=n;var f=v(o,2),g=v(u(f),2),h=u(g);Y(()=>{w(l,`${t.monsterName??""} Defeated!`),w(h,`+${t.xpGained??""} XP`)}),S(e,a),Ce()}Ge(["click","keydown"]);var df=D('<div class="hero-section svelte-da0ogt"><img class="hero-avatar svelte-da0ogt"/> <div class="hero-level-info svelte-da0ogt"><span class="hero-name svelte-da0ogt" data-testid="level-up-hero-name"> </span> <span class="level-badge svelte-da0ogt" data-testid="level-badge"> </span></div></div>'),uf=D('<div class="level-up-overlay svelte-da0ogt" role="dialog" aria-modal="true" aria-label="Level up notification" tabindex="0" data-testid="level-up-overlay"><div class="level-up-notification svelte-da0ogt" role="dialog" aria-labelledby="level-up-title" tabindex="-1" data-testid="level-up-notification"><div class="level-up-header svelte-da0ogt"><span class="level-up-icon svelte-da0ogt">â¨</span> <h3 class="level-up-title svelte-da0ogt" id="level-up-title" data-testid="level-up-title">LEVEL UP!</h3> <span class="level-up-icon svelte-da0ogt">â¨</span> <button class="dismiss-button svelte-da0ogt" aria-label="Dismiss notification" data-testid="dismiss-level-up">â</button></div> <!> <div class="stats-section svelte-da0ogt" data-testid="stats-section"><div class="stat-change svelte-da0ogt"><span class="stat-label svelte-da0ogt">HP</span> <span class="stat-old svelte-da0ogt" data-testid="old-hp"> </span> <span class="stat-arrow svelte-da0ogt">â</span> <span class="stat-new svelte-da0ogt" data-testid="new-hp"> </span></div> <div class="stat-change svelte-da0ogt"><span class="stat-label svelte-da0ogt">AC</span> <span class="stat-old svelte-da0ogt" data-testid="old-ac"> </span> <span class="stat-arrow svelte-da0ogt">â</span> <span class="stat-new svelte-da0ogt" data-testid="new-ac"> </span></div> <div class="stat-change svelte-da0ogt"><span class="stat-label svelte-da0ogt">Surge</span> <span class="stat-old svelte-da0ogt" data-testid="old-surge"> </span> <span class="stat-arrow svelte-da0ogt">â</span> <span class="stat-new svelte-da0ogt" data-testid="new-surge"> </span></div> <div class="stat-change svelte-da0ogt"><span class="stat-label svelte-da0ogt">Attack</span> <span class="stat-old svelte-da0ogt" data-testid="old-attack"> </span> <span class="stat-arrow svelte-da0ogt">â</span> <span class="stat-new svelte-da0ogt" data-testid="new-attack"> </span></div></div> <div class="xp-spent-section svelte-da0ogt" data-testid="xp-spent-section"><span class="xp-icon svelte-da0ogt">â­</span> <span class="xp-text svelte-da0ogt">5 XP spent</span></div> <div class="critical-bonus-section svelte-da0ogt" data-testid="critical-bonus"><span class="bonus-text svelte-da0ogt">âï¸ Critical attacks now deal +1 damage!</span></div> <button class="continue-button svelte-da0ogt" data-testid="continue-button">Continue</button> <p class="dismiss-hint svelte-da0ogt">Click anywhere to dismiss</p></div></div>');function ff(e,t){Ie(t,!0);const n=Ct.find(ie=>ie.id===t.heroId);function r(){t.onDismiss&&t.onDismiss()}function a(ie){(ie.key==="Escape"||ie.key==="Enter"||ie.key===" ")&&(ie.preventDefault(),r())}var s=uf();s.__click=r,s.__keydown=a;var o=u(s);o.__click=ie=>ie.stopPropagation(),o.__keydown=ie=>{(ie.key==="Escape"||ie.key==="Enter"||ie.key===" ")&&ie.stopPropagation()};var c=u(o),l=v(u(c),6);l.__click=r;var d=v(c,2);{var f=ie=>{var re=df(),_e=u(re),j=v(_e,2),P=u(j),B=u(P),T=v(P,2),C=u(T);Y(K=>{L(_e,"src",K),L(_e,"alt",n.name),w(B,n.name),w(C,`Level ${t.newStats.level??""}`)},[()=>Oe(n.imagePath)]),S(ie,re)};F(d,ie=>{n&&ie(f)})}var g=v(d,2),h=u(g),_=v(u(h),2),x=u(_),O=v(_,4),k=u(O),M=v(h,2),H=v(u(M),2),E=u(H),I=v(H,4),N=u(I),z=v(M,2),Q=v(u(z),2),U=u(Q),W=v(Q,4),J=u(W),A=v(z,2),te=v(u(A),2),ue=u(te),fe=v(te,4),xe=u(fe),De=v(g,6);De.__click=r,Y(()=>{w(x,t.oldStats.maxHp),w(k,t.newStats.maxHp),w(E,t.oldStats.ac),w(N,t.newStats.ac),w(U,t.oldStats.surgeValue),w(J,t.newStats.surgeValue),w(ue,`+${t.oldStats.attackBonus??""}`),w(xe,`+${t.newStats.attackBonus??""}`)}),S(e,s),Ce()}Ge(["click","keydown"]);var vf=D('<div class="healing-surge-overlay svelte-1ugospu" data-testid="healing-surge-notification"><div class="healing-surge-card svelte-1ugospu"><h2 class="healing-title svelte-1ugospu" data-testid="healing-title">Healing Surge!</h2> <div class="hero-section svelte-1ugospu"><img class="hero-avatar svelte-1ugospu"/> <span class="hero-name svelte-1ugospu" data-testid="healed-hero-name"> </span></div> <div class="healing-message svelte-1ugospu"><span class="was-text svelte-1ugospu">was at 0 HP</span></div> <div class="hp-restored-section svelte-1ugospu" data-testid="hp-restored-section"><span class="hp-icon svelte-1ugospu">â¤ï¸</span> <span class="hp-value svelte-1ugospu"> </span> <span class="hp-text svelte-1ugospu">restored</span></div> <button class="continue-button svelte-1ugospu" data-testid="dismiss-healing-surge">Continue</button></div></div>');function hf(e,t){Ie(t,!0);function n(x){return Ct.find(O=>O.id===x)?.name??"Hero"}function r(x){return Ct.find(O=>O.id===x)?.imagePath??""}var a=vf(),s=u(a),o=v(u(s),2),c=u(o),l=v(c,2),d=u(l),f=v(o,4),g=v(u(f),2),h=u(g),_=v(f,2);_.__click=function(...x){t.onDismiss?.apply(this,x)},Y((x,O,k)=>{L(c,"src",x),L(c,"alt",O),w(d,k),w(h,`+${t.hpRestored??""} HP`)},[()=>Oe(r(t.heroId)),()=>n(t.heroId),()=>n(t.heroId)]),S(e,a),Ce()}Ge(["click"]);var pf=D('<span class="hero-level svelte-8w11tm" data-testid="hero-level">Level 2 â­</span>'),mf=D('<div class="player-info svelte-8w11tm" data-testid="turn-indicator"><img class="player-avatar svelte-8w11tm"/> <div class="turn-details svelte-8w11tm"><span class="player-name svelte-8w11tm"> </span> <!> <span class="turn-phase svelte-8w11tm" data-testid="turn-phase"> </span> <span class="turn-number svelte-8w11tm"> </span> <span class="hero-hp svelte-8w11tm" data-testid="hero-hp"> </span></div></div>'),gf=D('<div class="player-info svelte-8w11tm"><img class="player-avatar svelte-8w11tm"/> <div class="turn-details svelte-8w11tm"><span class="player-name svelte-8w11tm"> </span> <span class="turn-phase svelte-8w11tm"> </span> <span class="turn-number svelte-8w11tm"> </span> <span class="hero-hp svelte-8w11tm"> </span></div></div>'),_f=D('<div><img class="tile-image svelte-8w11tm"/> <!></div>'),yf=D('<div class="movement-overlay-container svelte-8w11tm"><!></div>'),wf=D('<div data-testid="hero-token"><img class="token-image svelte-8w11tm"/> <span class="token-label svelte-8w11tm"> </span></div>'),kf=D('<div class="player-info svelte-8w11tm"><img class="player-avatar svelte-8w11tm"/> <div class="turn-details svelte-8w11tm"><span class="player-name svelte-8w11tm"> </span> <span class="turn-phase svelte-8w11tm"> </span> <span class="turn-number svelte-8w11tm"> </span> <span class="hero-hp svelte-8w11tm"> </span></div></div>'),bf=D('<span class="hero-level svelte-8w11tm" data-testid="hero-level">Level 2 â­</span>'),xf=D('<div class="player-info svelte-8w11tm" data-testid="turn-indicator"><img class="player-avatar svelte-8w11tm"/> <div class="turn-details svelte-8w11tm"><span class="player-name svelte-8w11tm"> </span> <!> <span class="turn-phase svelte-8w11tm" data-testid="turn-phase"> </span> <span class="turn-number svelte-8w11tm"> </span> <span class="hero-hp svelte-8w11tm" data-testid="hero-hp"> </span></div></div>'),Tf=D('<div class="game-board svelte-8w11tm" data-testid="game-board"><div data-testid="player-zone-top"><!></div> <div class="middle-section svelte-8w11tm"><div data-testid="player-zone-left"><!></div> <div class="board-container svelte-8w11tm"><div class="dungeon-map svelte-8w11tm" data-testid="dungeon-map" role="button" tabindex="0"><!> <!> <!> <!></div> <div class="board-controls svelte-8w11tm"><div class="objective-display svelte-8w11tm" data-testid="objective-display"><span class="objective-label svelte-8w11tm">ð¯ Objective:</span> <span class="objective-text svelte-8w11tm"> </span> <span class="objective-progress svelte-8w11tm" data-testid="objective-progress"> </span></div> <!> <!> <!> <button class="end-phase-button svelte-8w11tm" data-testid="end-phase-button"> </button> <button class="reset-button svelte-8w11tm" data-testid="reset-button">â© Return to Character Select</button> <!></div></div> <div data-testid="player-zone-right"><!></div></div> <div data-testid="player-zone-bottom"><!></div> <!> <!> <!> <!> <!>  <!> <!> <!></div>');function Sf(e,t){Ie(t,!0);const n=140,r=4,a=8,s=4,o=n*r,c=n*a,l=n*s,d=140,f=.15,g=1,h=36,_=36,x=632,O=632,k=1195,M=3,H=0;let E=q(ge([])),I=q(ge([])),N=q(ge({})),z=q(ge({currentHeroIndex:0,currentPhase:"hero-phase",turnNumber:1,exploredThisTurn:!1})),Q=q(ge([])),U=q(!1),W=q(ge({tiles:[],unexploredEdges:[],tileDeck:[]})),J=q(ge([])),A=q(null),te=q(null),ue=q(null),fe=q(ge([])),xe=q(null),De=q(null),ie=q(null),re=q(0),_e=q(null),j=q(ge({actionsTaken:[],canMove:!0,canAttack:!0})),P=q(ge({monstersDefeated:0,monstersToDefeat:2,objective:"Defeat 2 monsters"})),B=q(ge({xp:0,healingSurges:2})),T=q(null),C=q(null),K=q(null),ae=q(null),de=q(null),le=q(null),ve=q(null),we=q(1),ke=q(ge({})),ce=q(null),ye=q(null),he=G(()=>yt(i(W)));Tt(()=>{const m=V.subscribe(()=>{const y=V.getState();b(E,y.game.heroTokens,!0),b(I,y.heroes.selectedHeroes,!0),b(N,y.heroes.heroEdgeMap,!0),b(z,y.game.turnState,!0),b(Q,y.game.validMoveSquares,!0),b(U,y.game.showingMovement,!0),b(W,y.game.dungeon,!0),b(J,y.game.monsters,!0),b(A,y.game.recentlySpawnedMonsterId,!0),b(te,y.game.attackResult,!0),b(ue,y.game.attackTargetId,!0),b(fe,y.game.heroHp,!0),b(xe,y.game.monsterAttackResult,!0),b(De,y.game.monsterAttackTargetId,!0),b(ie,y.game.monsterAttackerId,!0),b(re,y.game.villainPhaseMonsterIndex,!0),b(_e,y.game.monsterMoveActionId,!0),b(j,y.game.heroTurnActions,!0),b(P,y.game.scenario,!0),b(B,y.game.partyResources,!0),b(T,y.game.defeatedMonsterXp,!0),b(C,y.game.defeatedMonsterName,!0),b(K,y.game.leveledUpHeroId,!0),b(ae,y.game.levelUpOldStats,!0),b(de,y.game.healingSurgeUsedHeroId,!0),b(le,y.game.healingSurgeHpRestored,!0),b(ke,y.heroes.heroPowerCards,!0),b(ce,y.game.attackName,!0),b(ye,y.game.drawnEncounter,!0)}),p=V.getState();return b(E,p.game.heroTokens,!0),b(I,p.heroes.selectedHeroes,!0),b(N,p.heroes.heroEdgeMap,!0),b(z,p.game.turnState,!0),b(Q,p.game.validMoveSquares,!0),b(U,p.game.showingMovement,!0),b(W,p.game.dungeon,!0),b(J,p.game.monsters,!0),b(A,p.game.recentlySpawnedMonsterId,!0),b(te,p.game.attackResult,!0),b(ue,p.game.attackTargetId,!0),b(fe,p.game.heroHp,!0),b(xe,p.game.monsterAttackResult,!0),b(De,p.game.monsterAttackTargetId,!0),b(ie,p.game.monsterAttackerId,!0),b(re,p.game.villainPhaseMonsterIndex,!0),b(_e,p.game.monsterMoveActionId,!0),b(j,p.game.heroTurnActions,!0),b(P,p.game.scenario,!0),b(B,p.game.partyResources,!0),b(T,p.game.defeatedMonsterXp,!0),b(C,p.game.defeatedMonsterName,!0),b(K,p.game.leveledUpHeroId,!0),b(ae,p.game.levelUpOldStats,!0),b(de,p.game.healingSurgeUsedHeroId,!0),b(le,p.game.healingSurgeHpRestored,!0),b(ke,p.heroes.heroPowerCards,!0),b(ce,p.game.attackName,!0),b(ye,p.game.drawnEncounter,!0),m}),Tt(()=>{i(z).currentPhase==="hero-phase"&&qd(i(j))&&V.dispatch(ns())}),Tt(()=>{if(i(z).currentPhase!=="hero-phase"||!i(j).canMove||i(U))return;const m=pe();if(!m)return;const p=Pe(m);p&&V.dispatch(ts({heroId:m,speed:p.speed}))}),Tt(()=>{if(i(z).currentPhase!=="villain-phase"||i(xe)!==null||i(_e)!==null||i(ye)!==null)return;const m=Ft();if(i(re)>=m.length){V.dispatch(rs());return}V.dispatch(tu({}))});function yt(m){if(m.tiles.length===0)return{minCol:0,maxCol:0,minRow:0,maxRow:0,width:x,height:k};let p=1/0,y=-1/0,R=1/0,X=-1/0;for(const Te of m.tiles)p=Math.min(p,Te.position.col),y=Math.max(y,Te.position.col),R=Math.min(R,Te.position.row),X=Math.max(X,Te.position.row);const Z=y-p+1,ee=x+(Z-1)*o,se=Math.max(0,-R),$=Math.max(0,X),be=k+se*l+$*l;return{minCol:p,maxCol:y,minRow:R,maxRow:X,width:Math.max(ee,x),height:Math.max(be,k)}}function Ue(m,p){const y=(m.position.col-p.minCol)*o;let R=0;return m.position.row<0?R=(m.position.row-p.minRow)*l:m.position.row===0?R=Math.max(0,-p.minRow)*l-M:R=Math.max(0,-p.minRow)*l+c+(m.position.row-1)*l-M-H,{x:y,y:R}}function Rt(m){return m.tileType==="start"?"assets/StartTile.png":oi.find(y=>y.tileType===m.tileType)?.imagePath||"assets/Tile_Black_x2_01.png"}function Ee(m){return m.tileType==="start"?{width:x,height:k}:{width:x,height:O}}Tt(()=>{if(i(ve)){const m=()=>{const y=i(ve);if(!y)return;const R=y.clientWidth-d,X=y.clientHeight-d,Z=i(he),ee=R/Z.width,se=X/Z.height,$=Math.min(ee,se,g);b(we,Math.max($,f),!0)};m();const p=new ResizeObserver(m);return p.observe(i(ve)),()=>p.disconnect()}});function Pe(m){return i(I).find(p=>p.id===m)}function pe(){return i(E)[i(z).currentHeroIndex]?.heroId}function vt(m){switch(m){case"hero-phase":return"Hero Phase";case"exploration-phase":return"Exploration Phase";case"villain-phase":return"Villain Phase"}}function et(m){return i(fe).find(y=>y.heroId===m)?.currentHp??0}function it(m){return i(fe).find(y=>y.heroId===m)?.maxHp??0}function tt(m){return i(fe).find(y=>y.heroId===m)?.level??1}function Ft(){const m=pe();return m?i(J).filter(p=>p.controllerId===m):[]}function fn(){V.dispatch(sa())}function _i(m,p){const y=n/2,R=p.x+h+m.x*n+y,X=p.y+_+m.y*n+y;return`left: ${R}px; top: ${X}px;`}function zt(){const m=pe();if(m&&i(N)[m])return i(N)[m];const p=i(z).currentHeroIndex%4;return["bottom","right","top","left"][p]}function yi(m){const p=i(N)[m];if(!p)return 0;switch(p){case"bottom":return 0;case"top":return 180;case"left":return 90;case"right":return-90;default:return 0}}function ia(m){if(i(z).currentPhase!=="hero-phase")return;const p=pe();if(!p)return;const y=Pe(p);y&&(i(U)?V.dispatch(Vd()):V.dispatch(ts({heroId:p,speed:y.speed})))}function wi(m){const p=pe();p&&V.dispatch(Xd({heroId:p,position:m}))}function ki(m){(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),ia())}function bi(){switch(i(z).currentPhase){case"hero-phase":V.dispatch(ns());break;case"exploration-phase":V.dispatch(Gd());break;case"villain-phase":V.dispatch(rs());break}}function xi(){switch(i(z).currentPhase){case"hero-phase":return"End Hero Phase";case"exploration-phase":return"End Exploration";case"villain-phase":return"End Villain Phase"}}function Ti(){V.dispatch(Kd())}function Si(m){const p=i(W).tiles.find(y=>y.id===m);return p?Ue(p,i(he)):{x:0,y:0}}const sr="start-tile";function Ii(){const m=pe();if(!m)return sr;const p=i(E).find(R=>R.heroId===m);return p?Tn(p.position,i(W))?.id??sr:sr}function Ci(){const m=pe();if(!m)return[];const p=i(E).find(R=>R.heroId===m);if(!p)return[];const y=Ii();return Td(p.position,i(J),y,i(W))}function Ei(m){return Ct.find(p=>p.id===m)}const Pi=1;function Mi(m,p){const y=pe();if(!y)return;const R=Qn(m);if(!R||R.attackBonus===void 0)return;const X=i(J).find($=>$.instanceId===p);if(!X)return;const Z=bd(X.monsterId);if(Z===void 0)return;const ee={name:R.name,attackBonus:R.attackBonus,damage:R.damage??Pi},se=_d(ee,Z);V.dispatch(Jd({result:se,targetInstanceId:p,attackName:R.name})),R.type==="daily"&&V.dispatch(qc({heroId:y,cardId:m}))}function Hi(){V.dispatch($d())}function ir(m){return Pn.find(y=>y.id===m)?.name||"Monster"}function Ai(){if(i(ue))return i(J).find(m=>m.instanceId===i(ue))}function Di(){V.dispatch(nu())}function Ri(){V.dispatch(ru())}function zi(){return i(De)&&Ct.find(p=>p.id===i(De))?.name||"Hero"}function Oi(){if(!i(ie))return"Monster";const m=i(J).find(p=>p.instanceId===i(ie));return m?ir(m.monsterId):"Monster"}function Ni(){if(!i(_e))return"Monster";const m=i(J).find(p=>p.instanceId===i(_e));return m?ir(m.monsterId):"Monster"}function ji(){V.dispatch(eu())}function Bi(){V.dispatch(su())}function Li(){V.dispatch(au())}function Fi(){V.dispatch(Qd())}function qi(){V.dispatch(Zd())}function Ui(){if(i(K))return i(fe).find(m=>m.heroId===i(K))}var oa=Tf(),or=u(oa);let la;var Wi=u(or);{var Yi=m=>{const p=G(pe),y=G(()=>i(p)?Pe(i(p)):void 0);var R=He(),X=Se(R);{var Z=ee=>{var se=mf(),$=u(se),be=v($,2),Te=u(be),Ke=u(Te),We=v(Te,2);{var ot=Be=>{var ct=pf();S(Be,ct)};F(We,Be=>{tt(i(p))===2&&Be(ot)})}var Qe=v(We,2),wt=u(Qe),lt=v(Qe,2),kt=u(lt),qt=v(lt,2),Ut=u(qt);Y((Be,ct,fr,vr)=>{L($,"src",Be),L($,"alt",i(y).name),w(Ke,`${i(y).name??""}'s Turn`),w(wt,ct),w(kt,`Turn ${i(z).turnNumber??""}`),w(Ut,`HP: ${fr??""}/${vr??""}`)},[()=>Oe(i(y).imagePath),()=>vt(i(z).currentPhase),()=>et(i(p)),()=>it(i(p))]),S(ee,se)};F(X,ee=>{i(y)&&i(p)&&ee(Z)})}S(m,R)};F(Wi,m=>{zt()==="top"&&m(Yi)})}var ca=v(or,2),lr=u(ca);let da;var Vi=u(lr);{var Xi=m=>{const p=G(pe),y=G(()=>i(p)?Pe(i(p)):void 0);var R=He(),X=Se(R);{var Z=ee=>{var se=gf(),$=u(se),be=v($,2),Te=u(be),Ke=u(Te),We=v(Te,2),ot=u(We),Qe=v(We,2),wt=u(Qe),lt=v(Qe,2),kt=u(lt);Y((qt,Ut,Be,ct)=>{L($,"src",qt),L($,"alt",i(y).name),w(Ke,`${i(y).name??""}'s Turn`),w(ot,Ut),w(wt,`Turn ${i(z).turnNumber??""}`),w(kt,`HP: ${Be??""}/${ct??""}`)},[()=>Oe(i(y).imagePath),()=>vt(i(z).currentPhase),()=>et(i(p)),()=>it(i(p))]),S(ee,se)};F(X,ee=>{i(y)&&i(p)&&ee(Z)})}S(m,R)};F(Vi,m=>{zt()==="left"&&m(Xi)})}var cr=v(lr,2),Kt=u(cr);Kt.__click=ia,Kt.__keydown=ki;var ua=u(Kt);Fe(ua,17,()=>i(W).tiles,m=>m.id,(m,p)=>{const y=G(()=>Ue(i(p),i(he))),R=G(()=>Ee(i(p)));var X=_f();let Z;var ee=u(X),se=v(ee,2);Fe(se,17,()=>i(W).unexploredEdges.filter($=>$.tileId===i(p).id),$=>$.direction,($,be)=>{Nu($,{get direction(){return i(be).direction},cellSize:n,get tileWidth(){return i(R).width},get tileHeight(){return i(R).height}})}),Y($=>{Z=ze(X,1,"placed-tile svelte-8w11tm",null,Z,{"start-tile":i(p).tileType==="start"}),L(X,"data-testid",i(p).tileType==="start"?"start-tile":"dungeon-tile"),L(X,"data-tile-id",i(p).id),Ot(X,`left: ${i(y).x??""}px; top: ${i(y).y??""}px; width: ${i(R).width??""}px; height: ${i(R).height??""}px;`),L(ee,"src",$),L(ee,"alt",i(p).tileType),Ot(ee,i(p).rotation!==0?`transform: rotate(${i(p).rotation}deg);`:"")},[()=>Oe(Rt(i(p)))]),S(m,X)});var fa=v(ua,2);{var Gi=m=>{const p=G(()=>i(W).tiles.find(Z=>Z.tileType==="start"));var y=He(),R=Se(y);{var X=Z=>{const ee=G(()=>Ue(i(p),i(he))),se=G(()=>Ee(i(p)));var $=yf(),be=u($);Du(be,{get validMoveSquares(){return i(Q)},tileOffsetX:h,tileOffsetY:_,cellSize:n,onSquareClick:wi}),Y(()=>Ot($,`left: ${i(ee).x??""}px; top: ${i(ee).y??""}px; width: ${i(se).width??""}px; height: ${i(se).height??""}px;`)),S(Z,$)};F(R,Z=>{i(p)&&Z(X)})}S(m,y)};F(fa,m=>{i(U)&&i(Q).length>0&&m(Gi)})}var va=v(fa,2);Fe(va,17,()=>i(E),m=>m.heroId,(m,p)=>{const y=G(()=>Pe(i(p).heroId)),R=G(()=>i(p).heroId===pe()),X=G(()=>i(W).tiles.find(be=>be.tileType==="start")),Z=G(()=>yi(i(p).heroId));var ee=He(),se=Se(ee);{var $=be=>{const Te=G(()=>Ue(i(X),i(he)));var Ke=wf();let We;var ot=u(Ke),Qe=v(ot,2),wt=u(Qe);Y((lt,kt)=>{We=ze(Ke,1,"hero-token svelte-8w11tm",null,We,{active:i(R)}),L(Ke,"data-hero-id",i(p).heroId),Ot(Ke,`${lt??""} --token-rotation: ${i(Z)??""}deg;`),L(ot,"src",kt),L(ot,"alt",i(y).name),w(wt,i(y).name)},[()=>_i(i(p).position,i(Te)),()=>Oe(i(y).imagePath)]),S(be,Ke)};F(se,be=>{i(y)&&i(X)&&be($)})}S(m,ee)});var Ki=v(va,2);Fe(Ki,17,()=>i(J),m=>m.instanceId,(m,p)=>{{let y=G(()=>Si(i(p).tileId));Bu(m,{get monster(){return i(p)},cellSize:n,tileOffsetX:h,tileOffsetY:_,get tilePixelOffset(){return i(y)}})}});var Qi=v(Kt,2),ha=u(Qi),pa=v(u(ha),2),Zi=u(pa),Ji=v(pa,2),$i=u(Ji),ma=v(ha,2);af(ma,{get xp(){return i(B).xp}});var ga=v(ma,2);of(ga,{get surges(){return i(B).healingSurges}});var _a=v(ga,2);zu(_a,{get tileCount(){return i(W).tileDeck.length}});var dr=v(_a,2);dr.__click=bi;var eo=u(dr),ya=v(dr,2);ya.__click=fn;var to=v(ya,2);{var no=m=>{const p=G(pe),y=G(()=>i(p)?i(ke)[i(p)]:void 0),R=G(Ci);var X=He(),Z=Se(X);{var ee=se=>{Ku(se,{get heroPowerCards(){return i(y)},get adjacentMonsters(){return i(R)},onAttackWithCard:Mi})};F(Z,se=>{i(y)&&i(R).length>0&&se(ee)})}S(m,X)};F(to,m=>{i(z).currentPhase==="hero-phase"&&i(j).canAttack&&m(no)})}Rl(cr,m=>b(ve,m),()=>i(ve));var wa=v(cr,2);let ka;var ro=u(wa);{var ao=m=>{const p=G(pe),y=G(()=>i(p)?Pe(i(p)):void 0);var R=He(),X=Se(R);{var Z=ee=>{var se=kf(),$=u(se),be=v($,2),Te=u(be),Ke=u(Te),We=v(Te,2),ot=u(We),Qe=v(We,2),wt=u(Qe),lt=v(Qe,2),kt=u(lt);Y((qt,Ut,Be,ct)=>{L($,"src",qt),L($,"alt",i(y).name),w(Ke,`${i(y).name??""}'s Turn`),w(ot,Ut),w(wt,`Turn ${i(z).turnNumber??""}`),w(kt,`HP: ${Be??""}/${ct??""}`)},[()=>Oe(i(y).imagePath),()=>vt(i(z).currentPhase),()=>et(i(p)),()=>it(i(p))]),S(ee,se)};F(X,ee=>{i(y)&&i(p)&&ee(Z)})}S(m,R)};F(ro,m=>{zt()==="right"&&m(ao)})}var ur=v(ca,2);let ba;var so=u(ur);{var io=m=>{const p=G(pe),y=G(()=>i(p)?Pe(i(p)):void 0);var R=He(),X=Se(R);{var Z=ee=>{var se=xf(),$=u(se),be=v($,2),Te=u(be),Ke=u(Te),We=v(Te,2);{var ot=Be=>{var ct=bf();S(Be,ct)};F(We,Be=>{tt(i(p))===2&&Be(ot)})}var Qe=v(We,2),wt=u(Qe),lt=v(Qe,2),kt=u(lt),qt=v(lt,2),Ut=u(qt);Y((Be,ct,fr,vr)=>{L($,"src",Be),L($,"alt",i(y).name),w(Ke,`${i(y).name??""}'s Turn`),w(wt,ct),w(kt,`Turn ${i(z).turnNumber??""}`),w(Ut,`HP: ${fr??""}/${vr??""}`)},[()=>Oe(i(y).imagePath),()=>vt(i(z).currentPhase),()=>et(i(p)),()=>it(i(p))]),S(ee,se)};F(X,ee=>{i(y)&&i(p)&&ee(Z)})}S(m,R)};F(so,m=>{zt()==="bottom"&&m(io)})}var xa=v(ur,2);{var oo=m=>{const p=G(()=>i(J).find(Z=>Z.instanceId===i(A)));var y=He(),R=Se(y);{var X=Z=>{Fu(Z,{get monsterId(){return i(p).monsterId},onDismiss:Ti})};F(R,Z=>{i(p)&&Z(X)})}S(m,y)};F(xa,m=>{i(A)&&m(oo)})}var Ta=v(xa,2);{var lo=m=>{const p=G(pe),y=G(()=>i(p)?Ei(i(p)):void 0),R=G(Ai);var X=He(),Z=Se(X);{var ee=se=>{{let $=G(()=>i(R)?ir(i(R).monsterId):"Monster");as(se,{get result(){return i(te)},get attackerName(){return i(y).name},get attackName(){return i(ce)},get targetName(){return i($)},onDismiss:Hi})}};F(Z,se=>{i(y)&&i(ce)&&se(ee)})}S(m,X)};F(Ta,m=>{i(te)&&m(lo)})}var Sa=v(Ta,2);{var co=m=>{{let p=G(Oi),y=G(zi);as(m,{get result(){return i(xe)},get attackerName(){return i(p)},attackName:"Attack",get targetName(){return i(y)},onDismiss:Di})}};F(Sa,m=>{i(xe)&&m(co)})}var Ia=v(Sa,2);{var uo=m=>{{let p=G(Ni);nf(m,{get monsterName(){return i(p)},onDismiss:Ri})}};F(Ia,m=>{i(_e)&&m(uo)})}var Ca=v(Ia,2);{var fo=m=>{cf(m,{get monsterName(){return i(C)},get xpGained(){return i(T)},onDismiss:ji})};F(Ca,m=>{i(T)!==null&&i(C)!==null&&m(fo)})}var Ea=v(Ca,2);{var vo=m=>{const p=G(Ui);var y=He(),R=Se(y);{var X=Z=>{ff(Z,{get heroId(){return i(K)},get oldStats(){return i(ae)},get newStats(){return i(p)},onDismiss:Bi})};F(R,Z=>{i(p)&&Z(X)})}S(m,y)};F(Ea,m=>{i(K)&&i(ae)&&!i(te)&&!i(T)&&m(vo)})}var Pa=v(Ea,2);{var ho=m=>{hf(m,{get heroId(){return i(de)},get hpRestored(){return i(le)},onDismiss:Li})};F(Pa,m=>{i(de)&&i(le)!==null&&m(ho)})}var po=v(Pa,2);{var mo=m=>{Uu(m,{get encounter(){return i(ye)},get partyXp(){return i(B).xp},onDismiss:Fi,onCancel:qi})};F(po,m=>{i(ye)&&m(mo)})}Y((m,p,y,R,X)=>{la=ze(or,1,"edge-zone edge-top svelte-8w11tm",null,la,m),da=ze(lr,1,"edge-zone edge-left svelte-8w11tm",null,da,p),Ot(Kt,`transform: scale(${i(we)??""}); width: ${i(he).width??""}px; height: ${i(he).height??""}px;`),L(Kt,"aria-label",i(U)?"Click to hide movement options":"Click to show movement options for current hero"),w(Zi,i(P).objective),w($i,`${i(P).monstersDefeated??""} / ${i(P).monstersToDefeat??""} defeated`),w(eo,y),ka=ze(wa,1,"edge-zone edge-right svelte-8w11tm",null,ka,R),ba=ze(ur,1,"edge-zone edge-bottom svelte-8w11tm",null,ba,X)},[()=>({"active-edge":zt()==="top"}),()=>({"active-edge":zt()==="left"}),xi,()=>({"active-edge":zt()==="right"}),()=>({"active-edge":zt()==="bottom"})]),S(e,oa),Ce()}Ge(["click","keydown"]);var If=D('<div class="victory-screen svelte-12ok9q2" data-testid="victory-screen"><div class="victory-content svelte-12ok9q2"><div class="victory-icon svelte-12ok9q2">ð</div> <h1 class="victory-title svelte-12ok9q2">Victory!</h1> <p class="victory-message svelte-12ok9q2"> </p> <div class="victory-objective svelte-12ok9q2"><span class="objective-label svelte-12ok9q2">Objective Complete:</span> <span class="objective-text svelte-12ok9q2"> </span></div> <button class="return-button svelte-12ok9q2" data-testid="return-to-menu-button">Return to Character Select</button></div></div>');function Cf(e,t){Ie(t,!0);let n=q(ge({monstersDefeated:0,monstersToDefeat:2,objective:"Defeat 2 monsters"}));Tt(()=>{const h=V.subscribe(()=>{const x=V.getState();b(n,x.game.scenario,!0)}),_=V.getState();return b(n,_.game.scenario,!0),h});function r(){V.dispatch(sa())}var a=If(),s=u(a),o=v(u(s),4),c=u(o),l=v(o,2),d=v(u(l),2),f=u(d),g=v(l,2);g.__click=r,Y(()=>{w(c,`You have defeated ${i(n).monstersDefeated??""} monsters and completed the objective!`),w(f,i(n).objective)}),S(e,a),Ce()}Ge(["click"]);var Ef=D('<div class="defeat-screen svelte-1jz2vy1" data-testid="defeat-screen"><div class="defeat-content svelte-1jz2vy1"><div class="defeat-icon svelte-1jz2vy1">ð</div> <h1 class="defeat-title svelte-1jz2vy1">Defeat</h1> <p class="defeat-message svelte-1jz2vy1" data-testid="defeat-message"><!></p> <div class="defeat-progress svelte-1jz2vy1"><span class="progress-label svelte-1jz2vy1">Progress:</span> <span class="progress-text svelte-1jz2vy1" data-testid="defeat-progress"> </span></div> <div class="defeat-objective svelte-1jz2vy1"><span class="objective-label svelte-1jz2vy1">Objective:</span> <span class="objective-text svelte-1jz2vy1"> </span></div> <button class="new-game-button svelte-1jz2vy1" data-testid="new-game-button">New Game</button></div></div>');function Pf(e,t){Ie(t,!0);let n=q(ge({monstersDefeated:0,monstersToDefeat:2,objective:"Defeat 2 monsters"})),r=q(null);Tt(()=>{const H=V.subscribe(()=>{const I=V.getState();b(n,I.game.scenario,!0),b(r,I.game.defeatReason,!0)}),E=V.getState();return b(n,E.game.scenario,!0),b(r,E.game.defeatReason,!0),H});function a(){V.dispatch(sa())}var s=Ef(),o=u(s),c=v(u(o),4),l=u(c);{var d=H=>{var E=Na();Y(()=>w(E,i(r))),S(H,E)},f=H=>{var E=Na("Your party has been eliminated before completing the objective.");S(H,E)};F(l,H=>{i(r)?H(d):H(f,!1)})}var g=v(c,2),h=v(u(g),2),_=u(h),x=v(g,2),O=v(u(x),2),k=u(O),M=v(x,2);M.__click=a,Y(()=>{w(_,`${i(n).monstersDefeated??""} / ${i(n).monstersToDefeat??""} monsters defeated`),w(k,i(n).objective)}),S(e,s),Ce()}Ge(["click"]);var Mf=D('<main class="svelte-1n46o8q"><!></main>');function Hf(e,t){Ie(t,!0);let n=q("character-select");Tt(()=>{const c=V.subscribe(()=>{const d=V.getState();b(n,d.game.currentScreen,!0)}),l=V.getState();return b(n,l.game.currentScreen,!0),c});var r=Mf(),a=u(r);{var s=c=>{Mu(c,{})},o=c=>{var l=He(),d=Se(l);{var f=h=>{Sf(h,{})},g=h=>{var _=He(),x=Se(_);{var O=M=>{Cf(M,{})},k=M=>{var H=He(),E=Se(H);{var I=N=>{Pf(N,{})};F(E,N=>{i(n)==="defeat"&&N(I)},!0)}S(M,H)};F(x,M=>{i(n)==="victory"?M(O):M(k,!1)},!0)}S(h,_)};F(d,h=>{i(n)==="game-board"?h(f):h(g,!1)},!0)}S(c,l)};F(a,c=>{i(n)==="character-select"?c(s):c(o,!1)})}S(e,r),Ce()}Tl(Hf,{target:document.getElementById("app")});
