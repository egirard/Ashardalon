(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const ma="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(ma);const Ts=1,Is=2,Es=4,ga=8,wa=16,ya=2,de=Symbol(),xa="http://www.w3.org/1999/xhtml",$n=!1;var Ss=Array.isArray,ka=Array.prototype.indexOf,dr=Array.from,ba=Object.defineProperty,Yt=Object.getOwnPropertyDescriptor,Ta=Object.getOwnPropertyDescriptors,Ia=Object.prototype,Ea=Array.prototype,Ms=Object.getPrototypeOf,Qr=Object.isExtensible;function Sa(e){for(var t=0;t<e.length;t++)e[t]()}function Ps(){var e,t,n=new Promise((r,s)=>{e=r,t=s});return{promise:n,resolve:e,reject:t}}const ue=2,hr=4,vr=8,Ma=1<<24,it=16,at=32,Et=64,Cn=128,qe=512,he=1024,Ie=2048,ot=4096,Ae=8192,dt=16384,_r=32768,Ot=65536,Zr=1<<17,As=1<<18,qt=1<<19,Pa=1<<20,bt=32768,Qn=1<<21,pr=1<<22,ht=1<<23,mn=Symbol("$state"),Aa=Symbol(""),Ct=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Ca(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Ha(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Ra(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Da(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Oa(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function za(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Na(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Fa(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function La(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}function ja(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Cs(e){return e===this.v}function qa(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Hs(e){return!qa(e,this.v)}let Ba=!1,Oe=null;function zt(e){Oe=e}function Xe(e,t=!1,n){Oe={p:Oe,i:!1,c:null,e:null,s:e,x:null,l:null}}function $e(e){var t=Oe,n=t.e;if(n!==null){t.e=null;for(var r of n)Ys(r)}return t.i=!0,Oe=t.p,{}}function Rs(){return!0}let Ht=[];function Ua(){var e=Ht;Ht=[],Sa(e)}function nn(e){if(Ht.length===0){var t=Ht;queueMicrotask(()=>{t===Ht&&Ua()})}Ht.push(e)}function Ds(e){var t=X;if(t===null)return B.f|=ht,e;if((t.f&_r)===0){if((t.f&Cn)===0)throw e;t.b.error(e)}else Nt(e,t)}function Nt(e,t){for(;t!==null;){if((t.f&Cn)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e}const dn=new Set;let ee=null,De=null,Ue=[],mr=null,Zn=!1;class Ge{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#r=0;#n=0;#l=null;#i=[];#s=[];skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(t){Ue=[],this.apply();var n={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const r of t)this.#a(r,n);this.is_fork||this.#u(),this.is_deferred()?(this.#o(n.effects),this.#o(n.render_effects),this.#o(n.block_effects)):(ee=null,Jr(n.render_effects),Jr(n.effects),this.#l?.resolve()),De=null}#a(t,n){t.f^=he;for(var r=t.first;r!==null;){var s=r.f,i=(s&(at|Et))!==0,a=i&&(s&he)!==0,l=a||(s&Ae)!==0||this.skipped_effects.has(r);if((r.f&Cn)!==0&&r.b?.is_pending()&&(n={parent:n,effect:r,effects:[],render_effects:[],block_effects:[]}),!l&&r.fn!==null){i?r.f^=he:(s&hr)!==0?n.effects.push(r):sn(r)&&((r.f&it)!==0&&n.block_effects.push(r),$t(r));var o=r.first;if(o!==null){r=o;continue}}var u=r.parent;for(r=r.next;r===null&&u!==null;)u===n.effect&&(this.#o(n.effects),this.#o(n.render_effects),this.#o(n.block_effects),n=n.parent),r=u.next,u=u.parent}}#o(t){for(const n of t)((n.f&Ie)!==0?this.#i:this.#s).push(n),this.#c(n.deps),ve(n,he)}#c(t){if(t!==null)for(const n of t)(n.f&ue)===0||(n.f&bt)===0||(n.f^=bt,this.#c(n.deps))}capture(t,n){this.previous.has(t)||this.previous.set(t,n),(t.f&ht)===0&&(this.current.set(t,t.v),De?.set(t,t.v))}activate(){ee=this,this.apply()}deactivate(){ee===this&&(ee=null,De=null)}flush(){if(this.activate(),Ue.length>0){if(Ga(),ee!==null&&ee!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#t)t(this);this.#t.clear()}#u(){if(this.#n===0){for(const t of this.#e)t();this.#e.clear()}this.#r===0&&this.#f()}#f(){if(dn.size>1){this.previous.clear();var t=De,n=!0,r={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const i of dn){if(i===this){n=!1;continue}const a=[];for(const[o,u]of this.current){if(i.current.has(o))if(n&&u!==i.current.get(o))i.current.set(o,u);else continue;a.push(o)}if(a.length===0)continue;const l=[...i.current.keys()].filter(o=>!this.current.has(o));if(l.length>0){var s=Ue;Ue=[];const o=new Set,u=new Map;for(const f of a)Os(f,l,o,u);if(Ue.length>0){ee=i,i.apply();for(const f of Ue)i.#a(f,r);i.deactivate()}Ue=s}}ee=null,De=t}this.committed=!0,dn.delete(this)}increment(t){this.#r+=1,t&&(this.#n+=1)}decrement(t){this.#r-=1,t&&(this.#n-=1),this.revive()}revive(){for(const t of this.#i)ve(t,Ie),Tt(t);for(const t of this.#s)ve(t,ot),Tt(t);this.#i=[],this.#s=[],this.flush()}oncommit(t){this.#e.add(t)}ondiscard(t){this.#t.add(t)}settled(){return(this.#l??=Ps()).promise}static ensure(){if(ee===null){const t=ee=new Ge;dn.add(ee),Ge.enqueue(()=>{ee===t&&t.flush()})}return ee}static enqueue(t){nn(t)}apply(){}}function Ga(){var e=_t;Zn=!0;var t=null;try{var n=0;for(kn(!0);Ue.length>0;){var r=Ge.ensure();if(n++>1e3){var s,i;Va()}r.process(Ue),vt.clear()}}finally{Zn=!1,kn(e),mr=null}}function Va(){try{Oa()}catch(e){Nt(e,mr)}}let et=null;function Jr(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if((r.f&(dt|Ae))===0&&sn(r)&&(et=new Set,$t(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?$s(r):r.fn=null),et?.size>0)){vt.clear();for(const s of et){if((s.f&(dt|Ae))!==0)continue;const i=[s];let a=s.parent;for(;a!==null;)et.has(a)&&(et.delete(a),i.push(a)),a=a.parent;for(let l=i.length-1;l>=0;l--){const o=i[l];(o.f&(dt|Ae))===0&&$t(o)}}et.clear()}}et=null}}function Os(e,t,n,r){if(!n.has(e)&&(n.add(e),e.reactions!==null))for(const s of e.reactions){const i=s.f;(i&ue)!==0?Os(s,t,n,r):(i&(pr|it))!==0&&(i&Ie)===0&&zs(s,t,r)&&(ve(s,Ie),Tt(s))}}function zs(e,t,n){const r=n.get(e);if(r!==void 0)return r;if(e.deps!==null)for(const s of e.deps){if(t.includes(s))return!0;if((s.f&ue)!==0&&zs(s,t,n))return n.set(s,!0),!0}return n.set(e,!1),!1}function Tt(e){for(var t=mr=e;t.parent!==null;){t=t.parent;var n=t.f;if(Zn&&t===X&&(n&it)!==0&&(n&As)===0)return;if((n&(Et|at))!==0){if((n&he)===0)return;t.f^=he}}Ue.push(t)}function Ya(e){let t=0,n=It(0),r;return()=>{Wt()&&(c(n),Ks(()=>(t===0&&(r=oi(()=>e(()=>Kt(n)))),t+=1,()=>{nn(()=>{t-=1,t===0&&(r?.(),r=void 0,Kt(n))})})))}}var Ka=Ot|qt|Cn;function Wa(e,t,n){new Xa(e,t,n)}class Xa{parent;#e=!1;#t;#r=null;#n;#l;#i;#s=null;#a=null;#o=null;#c=null;#u=null;#f=0;#d=0;#v=!1;#h=null;#w=Ya(()=>(this.#h=It(this.#f),()=>{this.#h=null}));constructor(t,n,r){this.#t=t,this.#n=n,this.#l=r,this.parent=X.b,this.#e=!!this.#n.pending,this.#i=xr(()=>{X.b=this;{var s=this.#m();try{this.#s=He(()=>r(s))}catch(i){this.error(i)}this.#d>0?this.#p():this.#e=!1}return()=>{this.#u?.remove()}},Ka)}#y(){try{this.#s=He(()=>this.#l(this.#t))}catch(t){this.error(t)}this.#e=!1}#x(){const t=this.#n.pending;t&&(this.#a=He(()=>t(this.#t)),Ge.enqueue(()=>{var n=this.#m();this.#s=this.#_(()=>(Ge.ensure(),He(()=>this.#l(n)))),this.#d>0?this.#p():(Dt(this.#a,()=>{this.#a=null}),this.#e=!1)}))}#m(){var t=this.#t;return this.#e&&(this.#u=pt(),this.#t.before(this.#u),t=this.#u),t}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#_(t){var n=X,r=B,s=Oe;Ke(this.#i),be(this.#i),zt(this.#i.ctx);try{return t()}catch(i){return Ds(i),null}finally{Ke(n),be(r),zt(s)}}#p(){const t=this.#n.pending;this.#s!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#u),Js(this.#s,this.#c)),this.#a===null&&(this.#a=He(()=>t(this.#t)))}#g(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#g(t);return}this.#d+=t,this.#d===0&&(this.#e=!1,this.#a&&Dt(this.#a,()=>{this.#a=null}),this.#c&&(this.#t.before(this.#c),this.#c=null))}update_pending_count(t){this.#g(t),this.#f+=t,this.#h&&Ft(this.#h,this.#f)}get_effect_pending(){return this.#w(),c(this.#h)}error(t){var n=this.#n.onerror;let r=this.#n.failed;if(this.#v||!n&&!r)throw t;this.#s&&(Te(this.#s),this.#s=null),this.#a&&(Te(this.#a),this.#a=null),this.#o&&(Te(this.#o),this.#o=null);var s=!1,i=!1;const a=()=>{if(s){ja();return}s=!0,i&&La(),Ge.ensure(),this.#f=0,this.#o!==null&&Dt(this.#o,()=>{this.#o=null}),this.#e=this.has_pending_snippet(),this.#s=this.#_(()=>(this.#v=!1,He(()=>this.#l(this.#t)))),this.#d>0?this.#p():this.#e=!1};var l=B;try{be(null),i=!0,n?.(t,a),i=!1}catch(o){Nt(o,this.#i&&this.#i.parent)}finally{be(l)}r&&nn(()=>{this.#o=this.#_(()=>{Ge.ensure(),this.#v=!0;try{return He(()=>{r(this.#t,()=>t,()=>a)})}catch(o){return Nt(o,this.#i.parent),null}finally{this.#v=!1}})})}}function $a(e,t,n){for(var r=[],s=t.length,i=0;i<s;i++)kr(t[i].e,r,!0);Qs(r,()=>{var a=r.length===0&&n!==null;if(a){var l=n,o=l.parentNode;oo(o),o.append(l),e.items.clear(),Fe(e,t[0].prev,t[s-1].next)}for(var u=0;u<s;u++){var f=t[u];a||(e.items.delete(f.k),Fe(e,f.prev,f.next)),Te(f.e,!a)}e.first===t[0]&&(e.first=t[0].prev)})}function Ve(e,t,n,r,s,i=null){var a=e,l=new Map,o=null,u=(t&Es)!==0,f=(t&Ts)!==0,v=(t&Is)!==0;if(u){var _=e;a=_.appendChild(pt())}var g=null,T=no(()=>{var E=n();return Ss(E)?E:E==null?[]:dr(E)}),D,w=!0;function I(){Qa(P,D,a,t,r),g!==null&&(D.length===0?(g.fragment?(a.before(g.fragment),g.fragment=null):br(g.effect),G.first=g.effect):Dt(g.effect,()=>{g=null}))}var G=xr(()=>{D=c(T);for(var E=D.length,j=new Set,C=ee,W=null,z=Gs(),k=0;k<E;k+=1){var x=D[k],b=r(x,k),Y=w?null:l.get(b);Y?(f&&Ft(Y.v,x),v?Ft(Y.i,k):Y.i=k,z&&C.skipped_effects.delete(Y.e)):(Y=Za(w?a:null,W,x,b,k,s,t,n),w&&(Y.o=!0,W===null?o=Y:W.next=Y,W=Y),l.set(b,Y)),j.add(b)}if(E===0&&i&&!g)if(w)g={fragment:null,effect:He(()=>i(a))};else{var Z=document.createDocumentFragment(),oe=pt();Z.append(oe),g={fragment:Z,effect:He(()=>i(oe))}}if(!w)if(z){for(const[ne,fe]of l)j.has(ne)||C.skipped_effects.add(fe.e);C.oncommit(I),C.ondiscard(()=>{})}else I();c(T)}),P={effect:G,items:l,first:o};w=!1}function Qa(e,t,n,r,s){var i=(r&ga)!==0,a=t.length,l=e.items,o=e.first,u,f=null,v,_=[],g=[],T,D,w,I;if(i)for(I=0;I<a;I+=1)T=t[I],D=s(T,I),w=l.get(D),w.o&&(w.a?.measure(),(v??=new Set).add(w));for(I=0;I<a;I+=1){if(T=t[I],D=s(T,I),w=l.get(D),e.first??=w,!w.o){w.o=!0;var G=f?f.next:o;Fe(e,f,w),Fe(e,w,G),Yn(w,G,n),f=w,_=[],g=[],o=f.next;continue}if((w.e.f&Ae)!==0&&(br(w.e),i&&(w.a?.unfix(),(v??=new Set).delete(w))),w!==o){if(u!==void 0&&u.has(w)){if(_.length<g.length){var P=g[0],E;f=P.prev;var j=_[0],C=_[_.length-1];for(E=0;E<_.length;E+=1)Yn(_[E],P,n);for(E=0;E<g.length;E+=1)u.delete(g[E]);Fe(e,j.prev,C.next),Fe(e,f,j),Fe(e,C,P),o=P,f=C,I-=1,_=[],g=[]}else u.delete(w),Yn(w,o,n),Fe(e,w.prev,w.next),Fe(e,w,f===null?e.first:f.next),Fe(e,f,w),f=w;continue}for(_=[],g=[];o!==null&&o.k!==D;)(o.e.f&Ae)===0&&(u??=new Set).add(o),g.push(o),o=o.next;if(o===null)continue;w=o}_.push(w),f=w,o=w.next}let W=l.size>a;if(o!==null||u!==void 0){for(var z=u===void 0?[]:dr(u);o!==null;)(o.e.f&Ae)===0&&z.push(o),o=o.next;var k=z.length;if(W=l.size-k>a,k>0){var x=(r&Es)!==0&&a===0?n:null;if(i){for(I=0;I<k;I+=1)z[I].a?.measure();for(I=0;I<k;I+=1)z[I].a?.fix()}$a(e,z,x)}}if(W)for(const b of l.values())b.o||(Fe(e,f,b),f=b);e.effect.last=f&&f.e,i&&nn(()=>{if(v!==void 0)for(w of v)w.a?.apply()})}function Za(e,t,n,r,s,i,a,l){var o=(a&Ts)!==0,u=(a&wa)===0,f=o?u?so(n,!1,!1):It(n):n,v=(a&Is)===0?s:It(s),_={i:v,v:f,k:r,a:null,e:null,o:!1,prev:t,next:null};try{if(e===null){var g=document.createDocumentFragment();g.append(e=pt())}return _.e=He(()=>i(e,f,v,l)),t!==null&&(t.next=_),_}finally{}}function Yn(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,s=t?t.e.nodes_start:n,i=e.e.nodes_start;i!==null&&i!==r;){var a=rn(i);s.before(i),i=a}}function Fe(e,t,n){t===null?(e.first=n,e.effect.first=n&&n.e):(t.e.next&&(t.e.next.prev=null),t.next=n,t.e.next=n&&n.e),n!==null&&(n.e.prev&&(n.e.prev.next=null),n.prev=t,n.e.prev=t&&t.e)}function Ja(e,t,n,r){const s=gr;if(n.length===0&&e.length===0){r(t.map(s));return}var i=ee,a=X,l=eo();function o(){Promise.all(n.map(u=>to(u))).then(u=>{l();try{r([...t.map(s),...u])}catch(f){(a.f&dt)===0&&Nt(f,a)}i?.deactivate(),xn()}).catch(u=>{Nt(u,a)})}e.length>0?Promise.all(e).then(()=>{l();try{return o()}finally{i?.deactivate(),xn()}}):o()}function eo(){var e=X,t=B,n=Oe,r=ee;return function(i=!0){Ke(e),be(t),zt(n),i&&r?.activate()}}function xn(){Ke(null),be(null),zt(null)}function gr(e){var t=ue|Ie,n=B!==null&&(B.f&ue)!==0?B:null;return X!==null&&(X.f|=qt),{ctx:Oe,deps:null,effects:null,equals:Cs,f:t,fn:e,reactions:null,rv:0,v:de,wv:0,parent:n??X,ac:null}}function to(e,t){let n=X;n===null&&Ca();var r=n.b,s=void 0,i=It(de),a=!B,l=new Map;return vo(()=>{var o=Ps();s=o.promise;try{Promise.resolve(e()).then(o.resolve,o.reject).then(()=>{u===ee&&u.committed&&u.deactivate(),xn()})}catch(_){o.reject(_),xn()}var u=ee;if(a){var f=!r.is_pending();r.update_pending_count(1),u.increment(f),l.get(u)?.reject(Ct),l.delete(u),l.set(u,o)}const v=(_,g=void 0)=>{if(u.activate(),g)g!==Ct&&(i.f|=ht,Ft(i,g));else{(i.f&ht)!==0&&(i.f^=ht),Ft(i,_);for(const[T,D]of l){if(l.delete(T),T===u)break;D.reject(Ct)}}a&&(r.update_pending_count(-1),u.decrement(f))};o.promise.then(v,_=>v(null,_||"unknown"))}),uo(()=>{for(const o of l.values())o.reject(Ct)}),new Promise(o=>{function u(f){function v(){f===s?o(i):u(s)}f.then(v,v)}u(s)})}function q(e){const t=gr(e);return ei(t),t}function no(e){const t=gr(e);return t.equals=Hs,t}function Ns(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)Te(t[n])}}function ro(e){for(var t=e.parent;t!==null;){if((t.f&ue)===0)return(t.f&dt)===0?t:null;t=t.parent}return null}function wr(e){var t,n=X;Ke(ro(e));try{e.f&=~bt,Ns(e),t=si(e)}finally{Ke(n)}return t}function Fs(e){var t=wr(e);if(e.equals(t)||(ee?.is_fork||(e.v=t),e.wv=ni()),!Bt)if(De!==null)(Wt()||ee?.is_fork)&&De.set(e,t);else{var n=(e.f&qe)===0?ot:he;ve(e,n)}}let Jn=new Set;const vt=new Map;let Ls=!1;function It(e,t){var n={f:0,v:e,reactions:null,equals:Cs,rv:0,wv:0};return n}function V(e,t){const n=It(e);return ei(n),n}function so(e,t=!1,n=!0){const r=It(e);return t||(r.equals=Hs),r}function M(e,t,n=!1){B!==null&&(!Ye||(B.f&Zr)!==0)&&Rs()&&(B.f&(ue|it|pr|Zr))!==0&&!nt?.includes(e)&&Fa();let r=n?ce(t):t;return Ft(e,r)}function Ft(e,t){if(!e.equals(t)){var n=e.v;Bt?vt.set(e,t):vt.set(e,n),e.v=t;var r=Ge.ensure();r.capture(e,n),(e.f&ue)!==0&&((e.f&Ie)!==0&&wr(e),ve(e,(e.f&qe)!==0?he:ot)),e.wv=ni(),js(e,Ie),X!==null&&(X.f&he)!==0&&(X.f&(at|Et))===0&&(Ce===null?mo([e]):Ce.push(e)),!r.is_fork&&Jn.size>0&&!Ls&&io()}return t}function io(){Ls=!1;var e=_t;kn(!0);const t=Array.from(Jn);try{for(const n of t)(n.f&he)!==0&&ve(n,ot),sn(n)&&$t(n)}finally{kn(e)}Jn.clear()}function Kt(e){M(e,e.v+1)}function js(e,t){var n=e.reactions;if(n!==null)for(var r=n.length,s=0;s<r;s++){var i=n[s],a=i.f,l=(a&Ie)===0;if(l&&ve(i,t),(a&ue)!==0){var o=i;De?.delete(o),(a&bt)===0&&(a&qe&&(i.f|=bt),js(o,ot))}else l&&((a&it)!==0&&et!==null&&et.add(i),Tt(i))}}function ce(e){if(typeof e!="object"||e===null||mn in e)return e;const t=Ms(e);if(t!==Ia&&t!==Ea)return e;var n=new Map,r=Ss(e),s=V(0),i=kt,a=l=>{if(kt===i)return l();var o=B,u=kt;be(null),ns(i);var f=l();return be(o),ns(u),f};return r&&n.set("length",V(e.length)),new Proxy(e,{defineProperty(l,o,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&za();var f=n.get(o);return f===void 0?f=a(()=>{var v=V(u.value);return n.set(o,v),v}):M(f,u.value,!0),!0},deleteProperty(l,o){var u=n.get(o);if(u===void 0){if(o in l){const f=a(()=>V(de));n.set(o,f),Kt(s)}}else M(u,de),Kt(s);return!0},get(l,o,u){if(o===mn)return e;var f=n.get(o),v=o in l;if(f===void 0&&(!v||Yt(l,o)?.writable)&&(f=a(()=>{var g=ce(v?l[o]:de),T=V(g);return T}),n.set(o,f)),f!==void 0){var _=c(f);return _===de?void 0:_}return Reflect.get(l,o,u)},getOwnPropertyDescriptor(l,o){var u=Reflect.getOwnPropertyDescriptor(l,o);if(u&&"value"in u){var f=n.get(o);f&&(u.value=c(f))}else if(u===void 0){var v=n.get(o),_=v?.v;if(v!==void 0&&_!==de)return{enumerable:!0,configurable:!0,value:_,writable:!0}}return u},has(l,o){if(o===mn)return!0;var u=n.get(o),f=u!==void 0&&u.v!==de||Reflect.has(l,o);if(u!==void 0||X!==null&&(!f||Yt(l,o)?.writable)){u===void 0&&(u=a(()=>{var _=f?ce(l[o]):de,g=V(_);return g}),n.set(o,u));var v=c(u);if(v===de)return!1}return f},set(l,o,u,f){var v=n.get(o),_=o in l;if(r&&o==="length")for(var g=u;g<v.v;g+=1){var T=n.get(g+"");T!==void 0?M(T,de):g in l&&(T=a(()=>V(de)),n.set(g+"",T))}if(v===void 0)(!_||Yt(l,o)?.writable)&&(v=a(()=>V(void 0)),M(v,ce(u)),n.set(o,v));else{_=v.v!==de;var D=a(()=>ce(u));M(v,D)}var w=Reflect.getOwnPropertyDescriptor(l,o);if(w?.set&&w.set.call(f,u),!_){if(r&&typeof o=="string"){var I=n.get("length"),G=Number(o);Number.isInteger(G)&&G>=I.v&&M(I,G+1)}Kt(s)}return!0},ownKeys(l){c(s);var o=Reflect.ownKeys(l).filter(v=>{var _=n.get(v);return _===void 0||_.v!==de});for(var[u,f]of n)f.v!==de&&!(u in l)&&o.push(u);return o},setPrototypeOf(){Na()}})}var es,qs,Bs,Us;function ao(){if(es===void 0){es=window,qs=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;Bs=Yt(t,"firstChild").get,Us=Yt(t,"nextSibling").get,Qr(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Qr(n)&&(n.__t=void 0)}}function pt(e=""){return document.createTextNode(e)}function yr(e){return Bs.call(e)}function rn(e){return Us.call(e)}function p(e,t){return yr(e)}function xe(e,t=!1){{var n=yr(e);return n instanceof Comment&&n.data===""?rn(n):n}}function y(e,t=1,n=!1){let r=e;for(;t--;)r=rn(r);return r}function oo(e){e.textContent=""}function Gs(){return!1}function Vs(e){var t=B,n=X;be(null),Ke(null);try{return e()}finally{be(t),Ke(n)}}function lo(e){X===null&&(B===null&&Da(),Ra()),Bt&&Ha()}function co(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function lt(e,t,n){var r=X;r!==null&&(r.f&Ae)!==0&&(e|=Ae);var s={ctx:Oe,deps:null,nodes_start:null,nodes_end:null,f:e|Ie|qe,first:null,fn:t,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{$t(s),s.f|=_r}catch(l){throw Te(s),l}else t!==null&&Tt(s);var i=s;if(n&&i.deps===null&&i.teardown===null&&i.nodes_start===null&&i.first===i.last&&(i.f&qt)===0&&(i=i.first,(e&it)!==0&&(e&Ot)!==0&&i!==null&&(i.f|=Ot)),i!==null&&(i.parent=r,r!==null&&co(i,r),B!==null&&(B.f&ue)!==0&&(e&Et)===0)){var a=B;(a.effects??=[]).push(i)}return s}function Wt(){return B!==null&&!Ye}function uo(e){const t=lt(vr,null,!1);return ve(t,he),t.teardown=e,t}function Rt(e){lo();var t=X.f,n=!B&&(t&at)!==0&&(t&_r)===0;if(n){var r=Oe;(r.e??=[]).push(e)}else return Ys(e)}function Ys(e){return lt(hr|Pa,e,!1)}function fo(e){Ge.ensure();const t=lt(Et|qt,e,!0);return(n={})=>new Promise(r=>{n.outro?Dt(t,()=>{Te(t),r(void 0)}):(Te(t),r(void 0))})}function ho(e){return lt(hr,e,!1)}function vo(e){return lt(pr|qt,e,!0)}function Ks(e,t=0){return lt(vr|t,e,!0)}function te(e,t=[],n=[],r=[]){Ja(r,t,n,s=>{lt(vr,()=>e(...s.map(c)),!0)})}function xr(e,t=0){var n=lt(it|t,e,!0);return n}function He(e){return lt(at|qt,e,!0)}function Ws(e){var t=e.teardown;if(t!==null){const n=Bt,r=B;ts(!0),be(null);try{t.call(null)}finally{ts(n),be(r)}}}function Xs(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const s=n.ac;s!==null&&Vs(()=>{s.abort(Ct)});var r=n.next;(n.f&Et)!==0?n.parent=null:Te(n,t),n=r}}function _o(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&at)===0&&Te(t),t=n}}function Te(e,t=!0){var n=!1;(t||(e.f&As)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(po(e.nodes_start,e.nodes_end),n=!0),Xs(e,t&&!n),bn(e,0),ve(e,dt);var r=e.transitions;if(r!==null)for(const i of r)i.stop();Ws(e);var s=e.parent;s!==null&&s.first!==null&&$s(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function po(e,t){for(;e!==null;){var n=e===t?null:rn(e);e.remove(),e=n}}function $s(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function Dt(e,t,n=!0){var r=[];kr(e,r,!0),Qs(r,()=>{n&&Te(e),t&&t()})}function Qs(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var s of e)s.out(r)}else t()}function kr(e,t,n){if((e.f&Ae)===0){if(e.f^=Ae,e.transitions!==null)for(const a of e.transitions)(a.is_global||n)&&t.push(a);for(var r=e.first;r!==null;){var s=r.next,i=(r.f&Ot)!==0||(r.f&at)!==0&&(e.f&it)!==0;kr(r,t,i?n:!1),r=s}}}function br(e){Zs(e,!0)}function Zs(e,t){if((e.f&Ae)!==0){e.f^=Ae,(e.f&he)===0&&(ve(e,Ie),Tt(e));for(var n=e.first;n!==null;){var r=n.next,s=(n.f&Ot)!==0||(n.f&at)!==0;Zs(n,s?t:!1),n=r}if(e.transitions!==null)for(const i of e.transitions)(i.is_global||t)&&i.in()}}function Js(e,t){for(var n=e.nodes_start,r=e.nodes_end;n!==null;){var s=n===r?null:rn(n);t.append(n),n=s}}let _t=!1;function kn(e){_t=e}let Bt=!1;function ts(e){Bt=e}let B=null,Ye=!1;function be(e){B=e}let X=null;function Ke(e){X=e}let nt=null;function ei(e){B!==null&&(nt===null?nt=[e]:nt.push(e))}let pe=null,Me=0,Ce=null;function mo(e){Ce=e}let ti=1,Xt=0,kt=Xt;function ns(e){kt=e}function ni(){return++ti}function sn(e){var t=e.f;if((t&Ie)!==0)return!0;if(t&ue&&(e.f&=~bt),(t&ot)!==0){var n=e.deps;if(n!==null)for(var r=n.length,s=0;s<r;s++){var i=n[s];if(sn(i)&&Fs(i),i.wv>e.wv)return!0}(t&qe)!==0&&De===null&&ve(e,he)}return!1}function ri(e,t,n=!0){var r=e.reactions;if(r!==null&&!nt?.includes(e))for(var s=0;s<r.length;s++){var i=r[s];(i.f&ue)!==0?ri(i,t,!1):t===i&&(n?ve(i,Ie):(i.f&he)!==0&&ve(i,ot),Tt(i))}}function si(e){var t=pe,n=Me,r=Ce,s=B,i=nt,a=Oe,l=Ye,o=kt,u=e.f;pe=null,Me=0,Ce=null,B=(u&(at|Et))===0?e:null,nt=null,zt(e.ctx),Ye=!1,kt=++Xt,e.ac!==null&&(Vs(()=>{e.ac.abort(Ct)}),e.ac=null);try{e.f|=Qn;var f=e.fn,v=f(),_=e.deps;if(pe!==null){var g;if(bn(e,Me),_!==null&&Me>0)for(_.length=Me+pe.length,g=0;g<pe.length;g++)_[Me+g]=pe[g];else e.deps=_=pe;if(_t&&Wt()&&(e.f&qe)!==0)for(g=Me;g<_.length;g++)(_[g].reactions??=[]).push(e)}else _!==null&&Me<_.length&&(bn(e,Me),_.length=Me);if(Rs()&&Ce!==null&&!Ye&&_!==null&&(e.f&(ue|ot|Ie))===0)for(g=0;g<Ce.length;g++)ri(Ce[g],e);return s!==null&&s!==e&&(Xt++,Ce!==null&&(r===null?r=Ce:r.push(...Ce))),(e.f&ht)!==0&&(e.f^=ht),v}catch(T){return Ds(T)}finally{e.f^=Qn,pe=t,Me=n,Ce=r,B=s,nt=i,zt(a),Ye=l,kt=o}}function go(e,t){let n=t.reactions;if(n!==null){var r=ka.call(n,e);if(r!==-1){var s=n.length-1;s===0?n=t.reactions=null:(n[r]=n[s],n.pop())}}n===null&&(t.f&ue)!==0&&(pe===null||!pe.includes(t))&&(ve(t,ot),(t.f&qe)!==0&&(t.f^=qe,t.f&=~bt),Ns(t),bn(t,0))}function bn(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)go(e,n[r])}function $t(e){var t=e.f;if((t&dt)===0){ve(e,he);var n=X,r=_t;X=e,_t=!0;try{(t&(it|Ma))!==0?_o(e):Xs(e),Ws(e);var s=si(e);e.teardown=typeof s=="function"?s:null,e.wv=ti;var i;$n&&Ba&&(e.f&Ie)!==0&&e.deps}finally{_t=r,X=n}}}function c(e){var t=e.f,n=(t&ue)!==0;if(B!==null&&!Ye){var r=X!==null&&(X.f&dt)!==0;if(!r&&!nt?.includes(e)){var s=B.deps;if((B.f&Qn)!==0)e.rv<Xt&&(e.rv=Xt,pe===null&&s!==null&&s[Me]===e?Me++:pe===null?pe=[e]:pe.includes(e)||pe.push(e));else{(B.deps??=[]).push(e);var i=e.reactions;i===null?e.reactions=[B]:i.includes(B)||i.push(B)}}}if(Bt){if(vt.has(e))return vt.get(e);if(n){var a=e,l=a.v;return((a.f&he)===0&&a.reactions!==null||ai(a))&&(l=wr(a)),vt.set(a,l),l}}else n&&(!De?.has(e)||ee?.is_fork&&!Wt())&&(a=e,sn(a)&&Fs(a),_t&&Wt()&&(a.f&qe)===0&&ii(a));if(De?.has(e))return De.get(e);if((e.f&ht)!==0)throw e.v;return e.v}function ii(e){if(e.deps!==null){e.f^=qe;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&ue)!==0&&(t.f&qe)===0&&ii(t)}}function ai(e){if(e.v===de)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(vt.has(t)||(t.f&ue)!==0&&ai(t))return!0;return!1}function oi(e){var t=Ye;try{return Ye=!0,e()}finally{Ye=t}}const wo=-7169;function ve(e,t){e.f=e.f&wo|t}const li=new Set,er=new Set;function Ut(e){for(var t=0;t<e.length;t++)li.add(e[t]);for(var n of er)n(e)}let rs=null;function hn(e){var t=this,n=t.ownerDocument,r=e.type,s=e.composedPath?.()||[],i=s[0]||e.target;rs=e;var a=0,l=rs===e&&e.__root;if(l){var o=s.indexOf(l);if(o!==-1&&(t===document||t===window)){e.__root=t;return}var u=s.indexOf(t);if(u===-1)return;o<=u&&(a=o)}if(i=s[a]||e.target,i!==t){ba(e,"currentTarget",{configurable:!0,get(){return i||n}});var f=B,v=X;be(null),Ke(null);try{for(var _,g=[];i!==null;){var T=i.assignedSlot||i.parentNode||i.host||null;try{var D=i["__"+r];D!=null&&(!i.disabled||e.target===i)&&D.call(i,e)}catch(w){_?g.push(w):_=w}if(e.cancelBubble||T===t||T===null)break;i=T}if(_){for(let w of g)queueMicrotask(()=>{throw w});throw _}}finally{e.__root=t,delete e.currentTarget,be(f),Ke(v)}}}function yo(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function ci(e,t){var n=X;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function $(e,t){var n=(t&ya)!==0,r,s=!e.startsWith("<!>");return()=>{r===void 0&&(r=yo(s?e:"<!>"+e),r=yr(r));var i=n||qs?document.importNode(r,!0):r.cloneNode(!0);return ci(i,i),i}}function ke(){var e=document.createDocumentFragment(),t=document.createComment(""),n=pt();return e.append(t,n),ci(t,n),e}function R(e,t){e!==null&&e.before(t)}const xo=["touchstart","touchmove"];function ko(e){return xo.includes(e)}function A(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function bo(e,t){return To(e,t)}const Mt=new Map;function To(e,{target:t,anchor:n,props:r={},events:s,context:i,intro:a=!0}){ao();var l=new Set,o=v=>{for(var _=0;_<v.length;_++){var g=v[_];if(!l.has(g)){l.add(g);var T=ko(g);t.addEventListener(g,hn,{passive:T});var D=Mt.get(g);D===void 0?(document.addEventListener(g,hn,{passive:T}),Mt.set(g,1)):Mt.set(g,D+1)}}};o(dr(li)),er.add(o);var u=void 0,f=fo(()=>{var v=n??t.appendChild(pt());return Wa(v,{pending:()=>{}},_=>{if(i){Xe({});var g=Oe;g.c=i}s&&(r.$$events=s),u=e(_,r)||{},i&&$e()}),()=>{for(var _ of l){t.removeEventListener(_,hn);var g=Mt.get(_);--g===0?(document.removeEventListener(_,hn),Mt.delete(_)):Mt.set(_,g)}er.delete(o),v!==n&&v.parentNode?.removeChild(v)}});return Io.set(u,f),u}let Io=new WeakMap;class Eo{anchor;#e=new Map;#t=new Map;#r=new Map;#n=new Set;#l=!0;constructor(t,n=!0){this.anchor=t,this.#l=n}#i=()=>{var t=ee;if(this.#e.has(t)){var n=this.#e.get(t),r=this.#t.get(n);if(r)br(r),this.#n.delete(n);else{var s=this.#r.get(n);s&&(this.#t.set(n,s.effect),this.#r.delete(n),s.fragment.lastChild.remove(),this.anchor.before(s.fragment),r=s.effect)}for(const[i,a]of this.#e){if(this.#e.delete(i),i===t)break;const l=this.#r.get(a);l&&(Te(l.effect),this.#r.delete(a))}for(const[i,a]of this.#t){if(i===n||this.#n.has(i))continue;const l=()=>{if(Array.from(this.#e.values()).includes(i)){var u=document.createDocumentFragment();Js(a,u),u.append(pt()),this.#r.set(i,{effect:a,fragment:u})}else Te(a);this.#n.delete(i),this.#t.delete(i)};this.#l||!r?(this.#n.add(i),Dt(a,l,!1)):l()}}};#s=t=>{this.#e.delete(t);const n=Array.from(this.#e.values());for(const[r,s]of this.#r)n.includes(r)||(Te(s.effect),this.#r.delete(r))};ensure(t,n){var r=ee,s=Gs();if(n&&!this.#t.has(t)&&!this.#r.has(t))if(s){var i=document.createDocumentFragment(),a=pt();i.append(a),this.#r.set(t,{effect:He(()=>n(a)),fragment:i})}else this.#t.set(t,He(()=>n(this.anchor)));if(this.#e.set(r,t),s){for(const[l,o]of this.#t)l===t?r.skipped_effects.delete(o):r.skipped_effects.add(o);for(const[l,o]of this.#r)l===t?r.skipped_effects.delete(o.effect):r.skipped_effects.add(o.effect);r.oncommit(this.#i),r.ondiscard(this.#s)}else this.#i()}}function Q(e,t,n=!1){var r=new Eo(e),s=n?Ot:0;function i(a,l){r.ensure(a,l)}xr(()=>{var a=!1;t((l,o=!0)=>{a=!0,i(o,l)}),a||i(!1,null)},s)}const ss=[...` 	
\r\fÂ \v\uFEFF`];function So(e,t,n){var r=e==null?"":""+e;if(n){for(var s in n)if(n[s])r=r?r+" "+s:s;else if(r.length)for(var i=s.length,a=0;(a=r.indexOf(s,a))>=0;){var l=a+i;(a===0||ss.includes(r[a-1]))&&(l===r.length||ss.includes(r[l]))?r=(a===0?"":r.substring(0,a))+r.substring(l+1):a=l}}return r===""?null:r}function Mo(e,t){return e==null?null:String(e)}function Le(e,t,n,r,s,i){var a=e.__className;if(a!==n||a===void 0){var l=So(n,r,i);l==null?e.removeAttribute("class"):e.className=l,e.__className=n}else if(i&&s!==i)for(var o in i){var u=!!i[o];(s==null||u!==!!s[o])&&e.classList.toggle(o,u)}return i}function ft(e,t,n,r){var s=e.__style;if(s!==t){var i=Mo(t);i==null?e.removeAttribute("style"):e.style.cssText=i,e.__style=t}return r}const Po=Symbol("is custom element"),Ao=Symbol("is html");function O(e,t,n,r){var s=Co(e);s[t]!==(s[t]=n)&&(t==="loading"&&(e[Aa]=n),n==null?e.removeAttribute(t):typeof n!="string"&&Ho(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function Co(e){return e.__attributes??={[Po]:e.nodeName.includes("-"),[Ao]:e.namespaceURI===xa}}var is=new Map;function Ho(e){var t=e.getAttribute("is")||e.nodeName,n=is.get(t);if(n)return n;is.set(t,n=[]);for(var r,s=e,i=Element.prototype;i!==s;){r=Ta(s);for(var a in r)r[a].set&&n.push(a);s=Ms(s)}return n}function as(e,t){return e===t||e?.[mn]===t}function Ro(e={},t,n,r){return ho(()=>{var s,i;return Ks(()=>{s=i,i=[],oi(()=>{e!==n(...i)&&(t(e,...i),s&&as(n(...s),e)&&t(null,...s))})}),()=>{nn(()=>{i&&as(n(...i),e)&&t(null,...i)})}}),e}function le(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Do=typeof Symbol=="function"&&Symbol.observable||"@@observable",os=Do,Kn=()=>Math.random().toString(36).substring(7).split("").join("."),Oo={INIT:`@@redux/INIT${Kn()}`,REPLACE:`@@redux/REPLACE${Kn()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Kn()}`},Tn=Oo;function Tr(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function ui(e,t,n){if(typeof e!="function")throw new Error(le(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(le(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(le(1));return n(ui)(e,t)}let r=e,s=t,i=new Map,a=i,l=0,o=!1;function u(){a===i&&(a=new Map,i.forEach((w,I)=>{a.set(I,w)}))}function f(){if(o)throw new Error(le(3));return s}function v(w){if(typeof w!="function")throw new Error(le(4));if(o)throw new Error(le(5));let I=!0;u();const G=l++;return a.set(G,w),function(){if(I){if(o)throw new Error(le(6));I=!1,u(),a.delete(G),i=null}}}function _(w){if(!Tr(w))throw new Error(le(7));if(typeof w.type>"u")throw new Error(le(8));if(typeof w.type!="string")throw new Error(le(17));if(o)throw new Error(le(9));try{o=!0,s=r(s,w)}finally{o=!1}return(i=a).forEach(G=>{G()}),w}function g(w){if(typeof w!="function")throw new Error(le(10));r=w,_({type:Tn.REPLACE})}function T(){const w=v;return{subscribe(I){if(typeof I!="object"||I===null)throw new Error(le(11));function G(){const E=I;E.next&&E.next(f())}return G(),{unsubscribe:w(G)}},[os](){return this}}}return _({type:Tn.INIT}),{dispatch:_,subscribe:v,getState:f,replaceReducer:g,[os]:T}}function zo(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:Tn.INIT})>"u")throw new Error(le(12));if(typeof n(void 0,{type:Tn.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(le(13))})}function No(e){const t=Object.keys(e),n={};for(let i=0;i<t.length;i++){const a=t[i];typeof e[a]=="function"&&(n[a]=e[a])}const r=Object.keys(n);let s;try{zo(n)}catch(i){s=i}return function(a={},l){if(s)throw s;let o=!1;const u={};for(let f=0;f<r.length;f++){const v=r[f],_=n[v],g=a[v],T=_(g,l);if(typeof T>"u")throw l&&l.type,new Error(le(14));u[v]=T,o=o||T!==g}return o=o||r.length!==Object.keys(a).length,o?u:a}}function In(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function Fo(...e){return t=>(n,r)=>{const s=t(n,r);let i=()=>{throw new Error(le(15))};const a={getState:s.getState,dispatch:(o,...u)=>i(o,...u)},l=e.map(o=>o(a));return i=In(...l)(s.dispatch),{...s,dispatch:i}}}function Lo(e){return Tr(e)&&"type"in e&&typeof e.type=="string"}var fi=Symbol.for("immer-nothing"),ls=Symbol.for("immer-draftable"),me=Symbol.for("immer-state");function je(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Pe=Object,Lt=Pe.getPrototypeOf,En="constructor",Hn="prototype",tr="configurable",Sn="enumerable",gn="writable",Qt="value",st=e=>!!e&&!!e[me];function We(e){return e?di(e)||Rn(e)||!!e[ls]||!!e[En]?.[ls]||Dn(e)||On(e):!1}var jo=Pe[Hn][En].toString(),cs=new WeakMap;function di(e){if(!e||!Ir(e))return!1;const t=Lt(e);if(t===null||t===Pe[Hn])return!0;const n=Pe.hasOwnProperty.call(t,En)&&t[En];if(n===Object)return!0;if(!At(n))return!1;let r=cs.get(n);return r===void 0&&(r=Function.toString.call(n),cs.set(n,r)),r===jo}function an(e,t,n=!0){on(e)===0?(n?Reflect.ownKeys(e):Pe.keys(e)).forEach(s=>{t(s,e[s],e)}):e.forEach((r,s)=>t(s,r,e))}function on(e){const t=e[me];return t?t.type_:Rn(e)?1:Dn(e)?2:On(e)?3:0}var us=(e,t,n=on(e))=>n===2?e.has(t):Pe[Hn].hasOwnProperty.call(e,t),nr=(e,t,n=on(e))=>n===2?e.get(t):e[t],Mn=(e,t,n,r=on(e))=>{r===2?e.set(t,n):r===3?e.add(n):e[t]=n};function qo(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var Rn=Array.isArray,Dn=e=>e instanceof Map,On=e=>e instanceof Set,Ir=e=>typeof e=="object",At=e=>typeof e=="function",Wn=e=>typeof e=="boolean",tt=e=>e.copy_||e.base_,Er=e=>e.modified_?e.copy_:e.base_;function rr(e,t){if(Dn(e))return new Map(e);if(On(e))return new Set(e);if(Rn(e))return Array[Hn].slice.call(e);const n=di(e);if(t===!0||t==="class_only"&&!n){const r=Pe.getOwnPropertyDescriptors(e);delete r[me];let s=Reflect.ownKeys(r);for(let i=0;i<s.length;i++){const a=s[i],l=r[a];l[gn]===!1&&(l[gn]=!0,l[tr]=!0),(l.get||l.set)&&(r[a]={[tr]:!0,[gn]:!0,[Sn]:l[Sn],[Qt]:e[a]})}return Pe.create(Lt(e),r)}else{const r=Lt(e);if(r!==null&&n)return{...e};const s=Pe.create(r);return Pe.assign(s,e)}}function Sr(e,t=!1){return zn(e)||st(e)||(on(e)>1&&Pe.defineProperties(e,{set:vn,add:vn,clear:vn,delete:vn}),Pe.freeze(e),t&&an(e,(n,r)=>{Sr(r,!0)},!1)),e}function Bo(){je(2)}var vn={[Qt]:Bo};function zn(e){return e===null||!Ir(e)?!0:Pe.isFrozen(e)}var Pn="MapSet",sr="Patches",hi={};function jt(e){const t=hi[e];return t||je(0,e),t}var Uo=e=>!!hi[e],Zt,vi=()=>Zt,Go=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:Uo(Pn)?jt(Pn):void 0});function fs(e,t){t&&(e.patchPlugin_=jt(sr),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function ir(e){ar(e),e.drafts_.forEach(Vo),e.drafts_=null}function ar(e){e===Zt&&(Zt=e.parent_)}var ds=e=>Zt=Go(Zt,e);function Vo(e){const t=e[me];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function hs(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];if(e!==void 0&&e!==n){n[me].modified_&&(ir(t),je(4)),We(e)&&(e=vs(t,e));const{patchPlugin_:s}=t;s&&s.generateReplacementPatches_(n[me].base_,e,t)}else e=vs(t,n);return Yo(t,e,!0),ir(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==fi?e:void 0}function vs(e,t){if(zn(t))return t;const n=t[me];if(!n)return Mr(t,e.handledSet_,e);if(!Nn(n,e))return t;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(e);mi(n,e)}return n.copy_}function Yo(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Sr(t,n)}function _i(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var Nn=(e,t)=>e.scope_===t,Ko=[];function pi(e,t,n,r){const s=tt(e),i=e.type_;if(r!==void 0&&nr(s,r,i)===t){Mn(s,r,n,i);return}if(!e.draftLocations_){const l=e.draftLocations_=new Map;an(s,(o,u)=>{if(st(u)){const f=l.get(u)||[];f.push(o),l.set(u,f)}})}const a=e.draftLocations_.get(t)??Ko;for(const l of a)Mn(s,l,n,i)}function Wo(e,t,n){e.callbacks_.push(function(s){const i=t;if(!i||!Nn(i,s))return;s.mapSetPlugin_?.fixSetContents(i);const a=Er(i);pi(e,i.draft_??i,a,n),mi(i,s)})}function mi(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||(e.assigned_?.size??0)>0)){const{patchPlugin_:r}=t;if(r){const s=r.getPath(e);s&&r.generatePatches_(e,s,t)}_i(e)}}function Xo(e,t,n){const{scope_:r}=e;if(st(n)){const s=n[me];Nn(s,r)&&s.callbacks_.push(function(){wn(e);const a=Er(s);pi(e,n,a,t)})}else We(n)&&e.callbacks_.push(function(){const i=tt(e);nr(i,t,e.type_)===n&&r.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&Mr(nr(e.copy_,t,e.type_),r.handledSet_,r)})}function Mr(e,t,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||st(e)||t.has(e)||!We(e)||zn(e)||(t.add(e),an(e,(r,s)=>{if(st(s)){const i=s[me];if(Nn(i,n)){const a=Er(i);Mn(e,r,a,e.type_),_i(i)}}else We(s)&&Mr(s,t,n)})),e}function $o(e,t){const n=Rn(e),r={type_:n?1:0,scope_:t?t.scope_:vi(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let s=r,i=Pr;n&&(s=[r],i=Jt);const{revoke:a,proxy:l}=Proxy.revocable(s,i);return r.draft_=l,r.revoke_=a,[l,r]}var Pr={get(e,t){if(t===me)return e;const n=tt(e);if(!us(n,t,e.type_))return Qo(e,n,t);const r=n[t];if(e.finalized_||!We(r))return r;if(r===Xn(e.base_,t)){wn(e);const s=e.type_===1?+t:t,i=lr(e.scope_,r,e,s);return e.copy_[s]=i}return r},has(e,t){return t in tt(e)},ownKeys(e){return Reflect.ownKeys(tt(e))},set(e,t,n){const r=gi(tt(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const s=Xn(tt(e),t),i=s?.[me];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_.set(t,!1),!0;if(qo(n,s)&&(n!==void 0||us(e.base_,t,e.type_)))return!0;wn(e),or(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_.set(t,!0),Xo(e,t,n)),!0},deleteProperty(e,t){return wn(e),Xn(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),or(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=tt(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{[gn]:!0,[tr]:e.type_!==1||t!=="length",[Sn]:r[Sn],[Qt]:n[t]}},defineProperty(){je(11)},getPrototypeOf(e){return Lt(e.base_)},setPrototypeOf(){je(12)}},Jt={};an(Pr,(e,t)=>{Jt[e]=function(){const n=arguments;return n[0]=n[0][0],t.apply(this,n)}});Jt.deleteProperty=function(e,t){return Jt.set.call(this,e,t,void 0)};Jt.set=function(e,t,n){return Pr.set.call(this,e[0],t,n,e[0])};function Xn(e,t){const n=e[me];return(n?tt(n):e)[t]}function Qo(e,t,n){const r=gi(t,n);return r?Qt in r?r[Qt]:r.get?.call(e.draft_):void 0}function gi(e,t){if(!(t in e))return;let n=Lt(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Lt(n)}}function or(e){e.modified_||(e.modified_=!0,e.parent_&&or(e.parent_))}function wn(e){e.copy_||(e.assigned_=new Map,e.copy_=rr(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Zo=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(t,n,r)=>{if(At(t)&&!At(n)){const i=n;n=t;const a=this;return function(o=i,...u){return a.produce(o,f=>n.call(this,f,...u))}}At(n)||je(6),r!==void 0&&!At(r)&&je(7);let s;if(We(t)){const i=ds(this),a=lr(i,t,void 0);let l=!0;try{s=n(a),l=!1}finally{l?ir(i):ar(i)}return fs(i,r),hs(s,i)}else if(!t||!Ir(t)){if(s=n(t),s===void 0&&(s=t),s===fi&&(s=void 0),this.autoFreeze_&&Sr(s,!0),r){const i=[],a=[];jt(sr).generateReplacementPatches_(t,s,{patches_:i,inversePatches_:a}),r(i,a)}return s}else je(1,t)},this.produceWithPatches=(t,n)=>{if(At(t))return(a,...l)=>this.produceWithPatches(a,o=>t(o,...l));let r,s;return[this.produce(t,n,(a,l)=>{r=a,s=l}),r,s]},Wn(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),Wn(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),Wn(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){We(e)||je(8),st(e)&&(e=Jo(e));const t=ds(this),n=lr(t,e,void 0);return n[me].isManual_=!0,ar(t),n}finishDraft(e,t){const n=e&&e[me];(!n||!n.isManual_)&&je(9);const{scope_:r}=n;return fs(r,t),hs(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const s=t[n];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}n>-1&&(t=t.slice(n+1));const r=jt(sr).applyPatches_;return st(e)?r(e,t):this.produce(e,s=>r(s,t))}};function lr(e,t,n,r){const[s,i]=Dn(t)?jt(Pn).proxyMap_(t,n):On(t)?jt(Pn).proxySet_(t,n):$o(t,n);return(n?.scope_??vi()).drafts_.push(s),i.callbacks_=n?.callbacks_??[],i.key_=r,n&&r!==void 0?Wo(n,i,r):i.callbacks_.push(function(o){o.mapSetPlugin_?.fixSetContents(i);const{patchPlugin_:u}=o;i.modified_&&u&&u.generatePatches_(i,[],o)}),s}function Jo(e){return st(e)||je(10,e),wi(e)}function wi(e){if(!We(e)||zn(e))return e;const t=e[me];let n,r=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=rr(e,t.scope_.immer_.useStrictShallowCopy_),r=t.scope_.immer_.shouldUseStrictIteration()}else n=rr(e,!0);return an(n,(s,i)=>{Mn(n,s,wi(i))},r),t&&(t.finalized_=!1),n}var el=new Zo,yi=el.produce;function xi(e){return({dispatch:n,getState:r})=>s=>i=>typeof i=="function"?i(n,r,e):s(i)}var tl=xi(),nl=xi,rl=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?In:In.apply(null,arguments)};function _s(e,t){function n(...r){if(t){let s=t(...r);if(!s)throw new Error(rt(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>Lo(r)&&r.type===e,n}var ki=class Gt extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Gt.prototype)}static get[Symbol.species](){return Gt}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Gt(...t[0].concat(this)):new Gt(...t.concat(this))}};function ps(e){return We(e)?yi(e,()=>{}):e}function _n(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function sl(e){return typeof e=="boolean"}var il=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:s=!0,actionCreatorCheck:i=!0}=t??{};let a=new ki;return n&&(sl(n)?a.push(tl):a.push(nl(n.extraArgument))),a},al="RTK_autoBatch",ms=e=>t=>{setTimeout(t,e)},ol=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let s=!0,i=!1,a=!1;const l=new Set,o=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:ms(10):e.type==="callback"?e.queueNotification:ms(e.timeout),u=()=>{a=!1,i&&(i=!1,l.forEach(f=>f()))};return Object.assign({},r,{subscribe(f){const v=()=>s&&f(),_=r.subscribe(v);return l.add(f),()=>{_(),l.delete(f)}},dispatch(f){try{return s=!f?.meta?.[al],i=!s,i&&(a||(a=!0,o(u))),r.dispatch(f)}finally{s=!0}}})},ll=e=>function(n){const{autoBatch:r=!0}=n??{};let s=new ki(e);return r&&s.push(ol(typeof r=="object"?r:void 0)),s};function cl(e){const t=il(),{reducer:n=void 0,middleware:r,devTools:s=!0,preloadedState:i=void 0,enhancers:a=void 0}=e||{};let l;if(typeof n=="function")l=n;else if(Tr(n))l=No(n);else throw new Error(rt(1));let o;typeof r=="function"?o=r(t):o=t();let u=In;s&&(u=rl({trace:!1,...typeof s=="object"&&s}));const f=Fo(...o),v=ll(f);let _=typeof a=="function"?a(v):v();const g=u(..._);return ui(l,i,g)}function bi(e){const t={},n=[];let r;const s={addCase(i,a){const l=typeof i=="string"?i:i.type;if(!l)throw new Error(rt(28));if(l in t)throw new Error(rt(29));return t[l]=a,s},addAsyncThunk(i,a){return a.pending&&(t[i.pending.type]=a.pending),a.rejected&&(t[i.rejected.type]=a.rejected),a.fulfilled&&(t[i.fulfilled.type]=a.fulfilled),a.settled&&n.push({matcher:i.settled,reducer:a.settled}),s},addMatcher(i,a){return n.push({matcher:i,reducer:a}),s},addDefaultCase(i){return r=i,s}};return e(s),[t,n,r]}function ul(e){return typeof e=="function"}function fl(e,t){let[n,r,s]=bi(t),i;if(ul(e))i=()=>ps(e());else{const l=ps(e);i=()=>l}function a(l=i(),o){let u=[n[o.type],...r.filter(({matcher:f})=>f(o)).map(({reducer:f})=>f)];return u.filter(f=>!!f).length===0&&(u=[s]),u.reduce((f,v)=>{if(v)if(st(f)){const g=v(f,o);return g===void 0?f:g}else{if(We(f))return yi(f,_=>v(_,o));{const _=v(f,o);if(_===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return _}}return f},l)}return a.getInitialState=i,a}var dl=Symbol.for("rtk-slice-createasyncthunk");function hl(e,t){return`${e}/${t}`}function vl({creators:e}={}){const t=e?.asyncThunk?.[dl];return function(r){const{name:s,reducerPath:i=s}=r;if(!s)throw new Error(rt(11));const a=(typeof r.reducers=="function"?r.reducers(pl()):r.reducers)||{},l=Object.keys(a),o={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(P,E){const j=typeof P=="string"?P:P.type;if(!j)throw new Error(rt(12));if(j in o.sliceCaseReducersByType)throw new Error(rt(13));return o.sliceCaseReducersByType[j]=E,u},addMatcher(P,E){return o.sliceMatchers.push({matcher:P,reducer:E}),u},exposeAction(P,E){return o.actionCreators[P]=E,u},exposeCaseReducer(P,E){return o.sliceCaseReducersByName[P]=E,u}};l.forEach(P=>{const E=a[P],j={reducerName:P,type:hl(s,P),createNotation:typeof r.reducers=="function"};gl(E)?yl(j,E,u,t):ml(j,E,u)});function f(){const[P={},E=[],j=void 0]=typeof r.extraReducers=="function"?bi(r.extraReducers):[r.extraReducers],C={...P,...o.sliceCaseReducersByType};return fl(r.initialState,W=>{for(let z in C)W.addCase(z,C[z]);for(let z of o.sliceMatchers)W.addMatcher(z.matcher,z.reducer);for(let z of E)W.addMatcher(z.matcher,z.reducer);j&&W.addDefaultCase(j)})}const v=P=>P,_=new Map,g=new WeakMap;let T;function D(P,E){return T||(T=f()),T(P,E)}function w(){return T||(T=f()),T.getInitialState()}function I(P,E=!1){function j(W){let z=W[P];return typeof z>"u"&&E&&(z=_n(g,j,w)),z}function C(W=v){const z=_n(_,E,()=>new WeakMap);return _n(z,W,()=>{const k={};for(const[x,b]of Object.entries(r.selectors??{}))k[x]=_l(b,W,()=>_n(g,W,w),E);return k})}return{reducerPath:P,getSelectors:C,get selectors(){return C(j)},selectSlice:j}}const G={name:s,reducer:D,actions:o.actionCreators,caseReducers:o.sliceCaseReducersByName,getInitialState:w,...I(i),injectInto(P,{reducerPath:E,...j}={}){const C=E??i;return P.inject({reducerPath:C,reducer:D},j),{...G,...I(C,!0)}}};return G}}function _l(e,t,n,r){function s(i,...a){let l=t(i);return typeof l>"u"&&r&&(l=n()),e(l,...a)}return s.unwrapped=e,s}var Ti=vl();function pl(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function ml({type:e,reducerName:t,createNotation:n},r,s){let i,a;if("reducer"in r){if(n&&!wl(r))throw new Error(rt(17));i=r.reducer,a=r.prepare}else i=r;s.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,a?_s(e,a):_s(e))}function gl(e){return e._reducerDefinitionType==="asyncThunk"}function wl(e){return e._reducerDefinitionType==="reducerWithPrepare"}function yl({type:e,reducerName:t},n,r,s){if(!s)throw new Error(rt(18));const{payloadCreator:i,fulfilled:a,pending:l,rejected:o,settled:u,options:f}=n,v=s(e,i,f);r.exposeAction(t,v),a&&r.addCase(v.fulfilled,a),l&&r.addCase(v.pending,l),o&&r.addCase(v.rejected,o),u&&r.addMatcher(v.settled,u),r.exposeCaseReducer(t,{fulfilled:a||pn,pending:l||pn,rejected:o||pn,settled:u||pn})}function pn(){}function rt(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}const xl={kobold:{attackBonus:5,damage:1},snake:{attackBonus:4,damage:1},cultist:{attackBonus:5,damage:1}},ln=[{id:"kobold",name:"Kobold Dragonshield",ac:14,hp:1,maxHp:1,xp:1,imagePath:"assets/Monster_KoboldDragonshield.png"},{id:"snake",name:"Snake",ac:12,hp:1,maxHp:1,xp:1,imagePath:"assets/Monster_Snake.png"},{id:"cultist",name:"Cultist",ac:13,hp:2,maxHp:2,xp:1,imagePath:"assets/Monster_Cultist.png"}],kl=["kobold","kobold","kobold","snake","snake","snake","cultist","cultist","cultist"],en=[{id:"quinn",name:"Quinn",heroClass:"Cleric",imagePath:"assets/Hero_Cleric_Quinn.png",speed:5,attack:{name:"Mace",attackBonus:6,damage:2,range:1},hp:8,maxHp:8,ac:17},{id:"vistra",name:"Vistra",heroClass:"Fighter",imagePath:"assets/Hero_Fighter_Vistra.png",speed:5,attack:{name:"Warhammer",attackBonus:8,damage:2,range:1},hp:10,maxHp:10,ac:18},{id:"keyleth",name:"Keyleth",heroClass:"Paladin",imagePath:"assets/Hero_Paladin_Keyleth.png",speed:6,attack:{name:"Longsword",attackBonus:7,damage:2,range:1},hp:10,maxHp:10,ac:18},{id:"tarak",name:"Tarak",heroClass:"Rogue",imagePath:"assets/Hero_Rogue_Tarak.png",speed:6,attack:{name:"Short Sword",attackBonus:7,damage:2,range:1},hp:8,maxHp:8,ac:17},{id:"haskan",name:"Haskan",heroClass:"Wizard",imagePath:"assets/Hero_Wizard_Haskan.png",speed:6,attack:{name:"Quarterstaff",attackBonus:4,damage:1,range:1},hp:6,maxHp:6,ac:14}],bl=[{x:1,y:2},{x:2,y:2},{x:3,y:2},{x:3,y:3},{x:3,y:4},{x:1,y:5},{x:2,y:5},{x:3,y:5}],Ii=[{tileType:"tile-2exit-a",imagePath:"assets/Tile_Black_x2_01.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-2exit-b",imagePath:"assets/Tile_Black_x2_02.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-2exit-c",imagePath:"assets/Tile_Black_x2_03.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-3exit-a",imagePath:"assets/Tile_Black_x3_01.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-3exit-b",imagePath:"assets/Tile_Black_x3_02.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-3exit-c",imagePath:"assets/Tile_Black_x3_03.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-4exit-a",imagePath:"assets/Tile_Black_x4_01.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-4exit-b",imagePath:"assets/Tile_Black_x4_02.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}}],Tl=["tile-2exit-a","tile-2exit-b","tile-2exit-c","tile-3exit-a","tile-3exit-b","tile-3exit-c","tile-4exit-a","tile-4exit-b"],Il={id:"start-tile",tileType:"start",position:{col:0,row:0},rotation:0,edges:{north:"unexplored",south:"unexplored",east:"unexplored",west:"unexplored"}},El={availableHeroes:en,selectedHeroes:[],heroEdgeMap:{}},Ei=Ti({name:"heroes",initialState:El,reducers:{toggleHeroSelection:(e,t)=>{const n=t.payload,r=e.selectedHeroes.findIndex(s=>s.id===n);if(r>=0)e.selectedHeroes.splice(r,1),delete e.heroEdgeMap[n];else if(e.selectedHeroes.length<5){const s=e.availableHeroes.find(i=>i.id===n);s&&e.selectedHeroes.push(s)}},selectHeroFromEdge:(e,t)=>{const{heroId:n,edge:r}=t.payload,s=e.selectedHeroes.findIndex(i=>i.id===n);if(s>=0)e.heroEdgeMap[n]===r&&(e.selectedHeroes.splice(s,1),delete e.heroEdgeMap[n]);else if(e.selectedHeroes.length<5){const i=e.availableHeroes.find(a=>a.id===n);i&&(e.selectedHeroes.push(i),e.heroEdgeMap[n]=r)}},clearSelection:e=>{e.selectedHeroes=[],e.heroEdgeMap={}}}}),{toggleHeroSelection:fu,selectHeroFromEdge:Sl,clearSelection:du}=Ei.actions,Ml=Ei.reducer,Vt={minX:1,maxX:3,minY:0,maxY:7,staircase:[{x:1,y:3},{x:2,y:3},{x:1,y:4},{x:2,y:4}]},Pt=4,Pl=4,Al=8;function Fn(e){const{col:t,row:n}=e.position;if(e.tileType==="start")return{minX:0,maxX:3,minY:0,maxY:7};let r,s;return t>0?r=Pl+(t-1)*Pt:t<0?r=t*Pt:r=0,n>0?s=Al+(n-1)*Pt:n<0?s=n*Pt:s=0,{minX:r,maxX:r+Pt-1,minY:s,maxY:s+Pt-1}}function tn(e,t){for(const n of t.tiles){const r=Fn(n);if(e.x>=r.minX&&e.x<=r.maxX&&e.y>=r.minY&&e.y<=r.maxY)return n}return null}function Cl(e){return e.x>=Vt.minX&&e.x<=Vt.maxX&&e.y>=Vt.minY&&e.y<=Vt.maxY}function Si(e){return Vt.staircase.some(t=>t.x===e.x&&t.y===e.y)}function Hl(e,t){return Cl(e)&&!Si(e)}function Rl(e,t,n){return t.some(r=>r.position.x===e.x&&r.position.y===e.y&&r.heroId!==n)}function Dl(e,t,n,r){const s=r.x-n.x,i=r.y-n.y;if(s!==0&&i!==0)return!1;let a,l;return i<0?(a="north",l="south"):i>0?(a="south",l="north"):s>0?(a="east",l="west"):(a="west",l="east"),!(e.edges[a]!=="open"||t.edges[l]!=="open")}function Ar(e,t){const n=[],r=[{dx:0,dy:-1,cardinal:!0},{dx:0,dy:1,cardinal:!0},{dx:-1,dy:0,cardinal:!0},{dx:1,dy:0,cardinal:!0},{dx:-1,dy:-1,cardinal:!1},{dx:1,dy:-1,cardinal:!1},{dx:-1,dy:1,cardinal:!1},{dx:1,dy:1,cardinal:!1}];if(!t){for(const i of r){const a={x:e.x+i.dx,y:e.y+i.dy};Hl(a)&&n.push(a)}return n}const s=tn(e,t);if(!s)return n;for(const i of r){const a={x:e.x+i.dx,y:e.y+i.dy},l=tn(a,t);if(l&&!(l.tileType==="start"&&(Si(a)||a.x<1))){if(s.id===l.id){n.push(a);continue}i.cardinal&&Dl(s,l,e,a)&&n.push(a)}}return n}function Ol(e,t,n,r,s){const i=[],a=new Set,l=[{pos:e,distance:0}];for(a.add(`${e.x},${e.y}`);l.length>0;){const o=l.shift();if(!o)break;if(o.distance>0&&!Rl(o.pos,n,r)&&i.push(o.pos),o.distance<t){const u=Ar(o.pos,s);for(const f of u){const v=`${f.x},${f.y}`;a.has(v)||(a.add(v),l.push({pos:f,distance:o.distance+1}))}}}return i}function zl(e,t){return t.some(n=>n.x===e.x&&n.y===e.y)}const Nl={north:[{x:1,y:0},{x:2,y:0},{x:3,y:0}],south:[{x:1,y:7},{x:2,y:7},{x:3,y:7}],east:[{x:3,y:0},{x:3,y:1},{x:3,y:2},{x:3,y:5},{x:3,y:6},{x:3,y:7}],west:[{x:1,y:0},{x:1,y:1},{x:1,y:2},{x:1,y:5},{x:1,y:6},{x:1,y:7}]};function Fl(e,t){return Nl[t].some(r=>r.x===e.x&&r.y===e.y)}function Cr(e){return{north:"south",south:"north",east:"west",west:"east"}[e]}function Ll(e,t){const n=t.tiles.find(r=>r.id==="start-tile");if(!n)return null;for(const r of t.unexploredEdges)if(r.tileId===n.id&&Fl(e.position,r.direction))return r;return null}function jl(e,t){const{col:n,row:r}=e.position;switch(t){case"north":return{col:n,row:r-1};case"south":return{col:n,row:r+1};case"east":return{col:n+1,row:r};case"west":return{col:n-1,row:r}}}function ql(e){const t=Cr(e);return{south:0,west:90,north:180,east:270}[t]}function Bl(e){return Ii.find(t=>t.tileType===e)}function Ul(e,t,n){const r=n.tiles.find(f=>f.id===e.tileId);if(!r)return null;const s=jl(r,e.direction),i=ql(e.direction);if(!Bl(t))return null;const l=`tile-${n.tiles.length}`,u={north:"unexplored",south:"unexplored",east:"unexplored",west:"unexplored",[Cr(e.direction)]:"open"};return{id:l,tileType:t,position:s,rotation:i,edges:u}}function cr(){return{tiles:[{...Il}],unexploredEdges:[{tileId:"start-tile",direction:"north"},{tileId:"start-tile",direction:"south"},{tileId:"start-tile",direction:"east"},{tileId:"start-tile",direction:"west"}],tileDeck:[]}}function Gl(e,t=Math.random){const n=[...e];for(let r=n.length-1;r>0;r--){const s=Math.floor(t()*(r+1));[n[r],n[s]]=[n[s],n[r]]}return n}function Vl(e,t=Math.random){return Gl(e,t)}function Yl(e){if(e.length===0)return{drawnTile:null,remainingDeck:[]};const[t,...n]=e;return{drawnTile:t,remainingDeck:n}}function Kl(e,t,n){const r=e.unexploredEdges.filter(o=>!(o.tileId===t.tileId&&o.direction===t.direction)),s=Cr(t.direction),a=["north","south","east","west"].filter(o=>o!==s&&n.edges[o]==="unexplored").map(o=>({tileId:n.id,direction:o}));return{tiles:[...e.tiles.map(o=>o.id===t.tileId?{...o,edges:{...o.edges,[t.direction]:"open"}}:o),n],unexploredEdges:[...r,...a],tileDeck:e.tileDeck}}function Mi(e,t=Math.random){const n=[...e];for(let r=n.length-1;r>0;r--){const s=Math.floor(t()*(r+1));[n[r],n[s]]=[n[s],n[r]]}return n}function Wl(e=Math.random){return{drawPile:Mi([...kl],e),discardPile:[]}}function Xl(e,t=Math.random){if(e.drawPile.length===0){if(e.discardPile.length===0)return{monster:null,deck:e};const s=Mi(e.discardPile,t);return{monster:s[0],deck:{drawPile:s.slice(1),discardPile:[]}}}const[n,...r]=e.drawPile;return{monster:n,deck:{drawPile:r,discardPile:e.discardPile}}}function $l(e,t){return{drawPile:e.drawPile,discardPile:[...e.discardPile,t]}}function Pi(e){return ln.find(t=>t.id===e)}function Ql(e,t,n,r,s){const i=Pi(e);return i?{monsterId:e,instanceId:`${e}-${s}`,position:t,currentHp:i.hp,controllerId:n,tileId:r}:null}const Zl=4,gs=Math.floor(Zl/2);function Jl(){return{x:gs,y:gs}}function Ai(e=Math.random){return Math.floor(e()*20)+1}function ec(e,t,n=Math.random){const r=Ai(n),s=r+e.attackBonus,i=r===20||s>=t,a=r===20;return{roll:r,attackBonus:e.attackBonus,total:s,targetAC:t,isHit:i,damage:i?e.damage:0,isCritical:a}}function ur(e,t){const n=Math.abs(e.x-t.x),r=Math.abs(e.y-t.y);return n<=1&&r<=1&&(n>0||r>0)}function tc(e){return Pi(e)?.ac}function nc(e,t){const n=t.tiles.find(s=>s.id===e.tileId);if(!n)return null;const r=Fn(n);return{x:r.minX+e.position.x,y:r.minY+e.position.y}}function rc(e,t,n,r){return r?tn(e,r)?t.filter(i=>{const a=nc(i,r);return a?ur(e,a):!1}):[]:t.filter(i=>i.tileId===n&&ur(e,i.position))}function An(e,t){const n=t.tiles.find(s=>s.id===e.tileId);if(!n)return null;const r=Fn(n);return{x:r.minX+e.position.x,y:r.minY+e.position.y}}function ws(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function sc(e,t,n,r){const s=An(e,r);if(!s)return null;const i=t.filter(u=>{const f=n[u.heroId];return f!==void 0&&f>0});if(i.length===0)return null;const a=new Set,l=[{pos:s,distance:0}];a.add(`${s.x},${s.y}`);let o=null;for(;l.length>0;){const u=l.shift();for(const v of i)v.position.x===u.pos.x&&v.position.y===u.pos.y&&(!o||u.distance<o.distance)&&(o={hero:v,distance:u.distance});if(o&&o.distance<u.distance)break;const f=Ar(u.pos,r);for(const v of f){const _=`${v.x},${v.y}`;a.has(_)||(a.add(_),l.push({pos:v,distance:u.distance+1}))}}return o}function ic(e,t,n,r){const s=An(e,r);if(!s)return null;const i=t.filter(a=>{const l=n[a.heroId];return l!==void 0&&l>0});for(const a of i)if(ur(s,a.position))return a;return null}function ac(e,t,n,r,s){const i=An(e,s);if(!i)return null;const l=Ar(i,s).filter(f=>{if(n.some(_=>_.position.x===f.x&&_.position.y===f.y))return!1;for(const _ of r){if(_.instanceId===e.instanceId)continue;const g=An(_,s);if(g&&g.x===f.x&&g.y===f.y)return!1}return!0});if(l.length===0)return null;let o=l[0],u=ws(o,t);for(const f of l){const v=ws(f,t);v<u&&(u=v,o=f)}return o}function oc(e,t,n=Math.random){const r=xl[e];if(!r)return{roll:1,attackBonus:0,total:1,targetAC:t,isHit:!1,damage:0,isCritical:!1};const s=Ai(n),i=s+r.attackBonus,a=s===20||i>=t,l=s===20;return{roll:s,attackBonus:r.attackBonus,total:i,targetAC:t,isHit:a,damage:a?r.damage:0,isCritical:l}}function lc(e,t,n,r,s,i,a=Math.random){const l=ic(e,t,n,i);if(l){const f=r[l.heroId]??10,v=oc(e.monsterId,f,a);return{type:"attack",targetId:l.heroId,result:v}}const o=sc(e,t,n,i);if(!o)return{type:"none"};const u=ac(e,o.hero.position,t,s,i);return u?{type:"move",destination:u}:{type:"none"}}function cc(e,t,n){const r=n.tiles.find(i=>i.id===t);if(!r)return null;const s=Fn(r);return{x:e.x-s.minX,y:e.y-s.minY}}function uc(e,t){return tn(e,t)?.id??null}const fr={currentHeroIndex:0,currentPhase:"hero-phase",turnNumber:1},yn={actionsTaken:[],canMove:!0,canAttack:!0},fc={currentScreen:"character-select",heroTokens:[],turnState:{...fr},validMoveSquares:[],showingMovement:!1,dungeon:cr(),monsterDeck:{drawPile:[],discardPile:[]},monsters:[],monsterInstanceCounter:0,recentlySpawnedMonsterId:null,attackResult:null,attackTargetId:null,heroHp:[],monsterAttackResult:null,monsterAttackTargetId:null,monsterAttackerId:null,villainPhaseMonsterIndex:0,heroTurnActions:{...yn}};function ys(e,t){const n=[...e.actionsTaken,t],r=n.filter(l=>l==="move").length,s=n.filter(l=>l==="attack").length,i=s===0,a=r<2&&!(r===1&&s===1);return{actionsTaken:n,canMove:a,canAttack:i}}function dc(e){const{actionsTaken:t}=e,n=t.filter(s=>s==="move").length,r=t.filter(s=>s==="attack").length;return n>=1&&r>=1||n>=2}function hc(e){let t=e;return()=>(t=t*1103515245+12345&2147483647,t/2147483647)}function vc(e,t=Math.random){const n=[...e];for(let r=n.length-1;r>0;r--){const s=Math.floor(t()*(r+1));[n[r],n[s]]=[n[s],n[r]]}return n}const Ci=Ti({name:"game",initialState:fc,reducers:{startGame:(e,t)=>{const{heroIds:n,positions:r,seed:s}=t.payload;if(n.length===0||n.length>5)return;const i=s??Date.now();e.randomSeed=i;let a;const l=hc(i);r?a=r:a=vc(bl,l).slice(0,5),e.heroTokens=n.map((u,f)=>({heroId:u,position:a[f]})),e.turnState={...fr},e.validMoveSquares=[],e.showingMovement=!1;const o=cr();o.tileDeck=Vl([...Tl],l),e.dungeon=o,e.monsterDeck=Wl(l),e.monsters=[],e.monsterInstanceCounter=0,e.recentlySpawnedMonsterId=null,e.attackResult=null,e.attackTargetId=null,e.heroHp=n.map(u=>{const f=en.find(v=>v.id===u);return{heroId:u,currentHp:f?.hp??8,maxHp:f?.maxHp??8}}),e.monsterAttackResult=null,e.monsterAttackTargetId=null,e.monsterAttackerId=null,e.villainPhaseMonsterIndex=0,e.heroTurnActions={...yn},e.currentScreen="game-board"},setHeroPosition:(e,t)=>{const n=e.heroTokens.find(r=>r.heroId===t.payload.heroId);n&&(n.position=t.payload.position)},showMovement:(e,t)=>{if(e.turnState.currentPhase!=="hero-phase"||!e.heroTurnActions.canMove)return;const{heroId:n,speed:r}=t.payload,s=e.heroTokens.find(i=>i.heroId===n);s&&(e.validMoveSquares=Ol(s.position,r,e.heroTokens,n,e.dungeon),e.showingMovement=!0)},hideMovement:e=>{e.validMoveSquares=[],e.showingMovement=!1},moveHero:(e,t)=>{const{heroId:n,position:r}=t.payload;if(e.turnState.currentPhase!=="hero-phase"||!e.heroTurnActions.canMove||!zl(r,e.validMoveSquares))return;const s=e.heroTokens.find(i=>i.heroId===n);s&&(s.position=r,e.validMoveSquares=[],e.showingMovement=!1,e.heroTurnActions=ys(e.heroTurnActions,"move"))},resetGame:e=>{e.currentScreen="character-select",e.heroTokens=[],e.turnState={...fr},e.randomSeed=void 0,e.validMoveSquares=[],e.showingMovement=!1,e.dungeon=cr(),e.monsterDeck={drawPile:[],discardPile:[]},e.monsters=[],e.monsterInstanceCounter=0,e.recentlySpawnedMonsterId=null,e.attackResult=null,e.attackTargetId=null,e.heroHp=[],e.monsterAttackResult=null,e.monsterAttackTargetId=null,e.monsterAttackerId=null,e.villainPhaseMonsterIndex=0,e.heroTurnActions={...yn}},endHeroPhase:e=>{if(e.turnState.currentPhase!=="hero-phase")return;e.recentlySpawnedMonsterId=null;const t=e.heroTokens[e.turnState.currentHeroIndex];if(!t)return;const n=Ll(t,e.dungeon);if(n&&e.dungeon.tileDeck.length>0){const{drawnTile:r,remainingDeck:s}=Yl(e.dungeon.tileDeck);if(r){const i=Ul(n,r,e.dungeon);if(i){e.dungeon=Kl(e.dungeon,n,i),e.dungeon.tileDeck=s;const{monster:a,deck:l}=Xl(e.monsterDeck);if(a){const o=Jl(),u=Ql(a,o,t.heroId,i.id,e.monsterInstanceCounter);u&&(e.monsters.push(u),e.monsterInstanceCounter+=1,e.recentlySpawnedMonsterId=u.instanceId),e.monsterDeck=l}}}}e.turnState.currentPhase="exploration-phase"},endExplorationPhase:e=>{e.turnState.currentPhase==="exploration-phase"&&(e.turnState.currentPhase="villain-phase",e.villainPhaseMonsterIndex=0,e.monsterAttackResult=null,e.monsterAttackTargetId=null,e.monsterAttackerId=null)},endVillainPhase:e=>{e.turnState.currentPhase==="villain-phase"&&(e.villainPhaseMonsterIndex=0,e.monsterAttackResult=null,e.monsterAttackTargetId=null,e.monsterAttackerId=null,e.turnState.currentHeroIndex=(e.turnState.currentHeroIndex+1)%e.heroTokens.length,e.turnState.currentHeroIndex===0&&(e.turnState.turnNumber+=1),e.turnState.currentPhase="hero-phase",e.heroTurnActions={...yn})},dismissMonsterCard:e=>{e.recentlySpawnedMonsterId=null},setAttackResult:(e,t)=>{if(e.turnState.currentPhase!=="hero-phase"||!e.heroTurnActions.canAttack)return;const{result:n,targetInstanceId:r}=t.payload;if(e.attackResult=n,e.attackTargetId=r,n.isHit&&n.damage>0){const s=e.monsters.find(i=>i.instanceId===r);s&&(s.currentHp-=n.damage,s.currentHp<=0&&(e.monsters=e.monsters.filter(i=>i.instanceId!==r),e.monsterDeck=$l(e.monsterDeck,s.monsterId)))}e.heroTurnActions=ys(e.heroTurnActions,"attack")},dismissAttackResult:e=>{e.attackResult=null,e.attackTargetId=null},setMonsters:(e,t)=>{e.monsters=t.payload},activateNextMonster:(e,t)=>{if(e.turnState.currentPhase!=="villain-phase")return;const n=e.heroTokens[e.turnState.currentHeroIndex]?.heroId;if(!n)return;const r=e.monsters.filter(u=>u.controllerId===n);if(e.villainPhaseMonsterIndex>=r.length)return;const s=r[e.villainPhaseMonsterIndex];if(!s)return;const i={},a={};for(const u of e.heroHp)i[u.heroId]=u.currentHp;for(const u of e.heroTokens){const f=en.find(v=>v.id===u.heroId);f&&(a[u.heroId]=f.ac)}const l=t.payload?.randomFn??Math.random,o=lc(s,e.heroTokens,i,a,e.monsters,e.dungeon,l);if(o.type==="move"){const u=e.monsters.find(f=>f.instanceId===s.instanceId);if(u){const f=uc(o.destination,e.dungeon);if(f){const v=cc(o.destination,f,e.dungeon);v&&(u.position=v,u.tileId=f)}}}else if(o.type==="attack"&&(e.monsterAttackResult=o.result,e.monsterAttackTargetId=o.targetId,e.monsterAttackerId=s.instanceId,o.result.isHit&&o.result.damage>0)){const u=e.heroHp.find(f=>f.heroId===o.targetId);u&&(u.currentHp=Math.max(0,u.currentHp-o.result.damage))}e.villainPhaseMonsterIndex+=1},dismissMonsterAttackResult:e=>{e.monsterAttackResult=null,e.monsterAttackTargetId=null,e.monsterAttackerId=null},setHeroHp:(e,t)=>{const{heroId:n,hp:r}=t.payload,s=e.heroHp.find(i=>i.heroId===n);s&&(s.currentHp=Math.max(0,r))}}}),{startGame:_c,setHeroPosition:hu,showMovement:xs,hideMovement:pc,moveHero:mc,resetGame:gc,endHeroPhase:ks,endExplorationPhase:wc,endVillainPhase:yc,dismissMonsterCard:xc,setAttackResult:kc,dismissAttackResult:bc,setMonsters:vu,activateNextMonster:Tc,dismissMonsterAttackResult:Ic,setHeroHp:_u}=Ci.actions,Ec=Ci.reducer,J=cl({reducer:{heroes:Ml,game:Ec}});typeof window<"u"&&(window.__REDUX_STORE__=J);function Re(e){const t="/Ashardalon/pr-69/",n=e.startsWith("/")?e.slice(1):e;return(t.endsWith("/")?t:t+"/")+n}var Sc=$('<button><img class="hero-image svelte-1rwnzlz"/> <div class="hero-info svelte-1rwnzlz"><span class="hero-name svelte-1rwnzlz" data-testid="hero-name"> </span> <span class="hero-class svelte-1rwnzlz"> </span></div></button>'),Mc=$('<button><img class="hero-image svelte-1rwnzlz"/> <div class="hero-info svelte-1rwnzlz"><span class="hero-name svelte-1rwnzlz" data-testid="hero-name"> </span> <span class="hero-class svelte-1rwnzlz"> </span></div></button>'),Pc=$('<button><img class="hero-image svelte-1rwnzlz"/> <div class="hero-info svelte-1rwnzlz"><span class="hero-name svelte-1rwnzlz" data-testid="hero-name"> </span> <span class="hero-class svelte-1rwnzlz"> </span></div></button>'),Ac=$('<button><img class="hero-image svelte-1rwnzlz"/> <div class="hero-info svelte-1rwnzlz"><span class="hero-name svelte-1rwnzlz" data-testid="hero-name"> </span> <span class="hero-class svelte-1rwnzlz"> </span></div></button>'),Cc=$('<div class="character-select svelte-1rwnzlz" data-testid="character-select"><div class="edge-zone edge-top svelte-1rwnzlz" data-testid="edge-top"><div class="hero-row svelte-1rwnzlz" data-testid="hero-grid"></div></div> <div class="middle-section svelte-1rwnzlz"><div class="edge-zone edge-left svelte-1rwnzlz" data-testid="edge-left"><div class="hero-column svelte-1rwnzlz"></div></div> <div class="center-zone svelte-1rwnzlz" data-testid="center-zone"><h1 class="svelte-1rwnzlz">Select Your Heroes</h1> <p class="instructions svelte-1rwnzlz">Choose 1-5 heroes for your adventure</p> <p class="instructions svelte-1rwnzlz">Tap a hero from your edge of the table</p> <div class="selection-info svelte-1rwnzlz"><span data-testid="selected-count"> </span></div> <button class="start-button svelte-1rwnzlz" data-testid="start-game-button">Start Adventure</button></div> <div class="edge-zone edge-right svelte-1rwnzlz" data-testid="edge-right"><div class="hero-column svelte-1rwnzlz"></div></div></div> <div class="edge-zone edge-bottom svelte-1rwnzlz" data-testid="edge-bottom"><div class="hero-row svelte-1rwnzlz"></div></div></div>');function Hc(e,t){Xe(t,!0);let n=V(ce([])),r=V(ce([])),s=V(ce({}));Rt(()=>{const k=J.subscribe(()=>{const b=J.getState();M(n,b.heroes.selectedHeroes,!0),M(r,b.heroes.availableHeroes,!0),M(s,b.heroes.heroEdgeMap,!0)}),x=J.getState();return M(n,x.heroes.selectedHeroes,!0),M(r,x.heroes.availableHeroes,!0),M(s,x.heroes.heroEdgeMap,!0),k});function i(k,x){return c(s)[k]===x}function a(k,x){const b=c(s)[k];return b!==void 0&&b!==x}function l(k,x){J.dispatch(Sl({heroId:k,edge:x}))}function o(){c(n).length>0&&J.dispatch(_c({heroIds:c(n).map(k=>k.id)}))}function u(){return c(n).length>=1&&c(n).length<=5}var f=Cc(),v=p(f),_=p(v);Ve(_,21,()=>c(r),k=>k.id,(k,x)=>{var b=Sc();let Y;b.__click=()=>l(c(x).id,"top");var Z=p(b),oe=y(Z,2),ne=p(oe),fe=p(ne),ge=y(ne,2),U=p(ge);te((re,ie,we)=>{Y=Le(b,1,"hero-card svelte-1rwnzlz",null,Y,re),O(b,"data-testid",`hero-${c(x).id??""}-top`),b.disabled=ie,O(Z,"src",we),O(Z,"alt",c(x).name),A(fe,c(x).name),A(U,c(x).heroClass)},[()=>({selected:i(c(x).id,"top"),unavailable:a(c(x).id,"top")}),()=>a(c(x).id,"top"),()=>Re(c(x).imagePath)]),R(k,b)});var g=y(v,2),T=p(g),D=p(T);Ve(D,21,()=>c(r),k=>k.id,(k,x)=>{var b=Mc();let Y;b.__click=()=>l(c(x).id,"left");var Z=p(b),oe=y(Z,2),ne=p(oe),fe=p(ne),ge=y(ne,2),U=p(ge);te((re,ie,we)=>{Y=Le(b,1,"hero-card svelte-1rwnzlz",null,Y,re),O(b,"data-testid",`hero-${c(x).id??""}-left`),b.disabled=ie,O(Z,"src",we),O(Z,"alt",c(x).name),A(fe,c(x).name),A(U,c(x).heroClass)},[()=>({selected:i(c(x).id,"left"),unavailable:a(c(x).id,"left")}),()=>a(c(x).id,"left"),()=>Re(c(x).imagePath)]),R(k,b)});var w=y(T,2),I=y(p(w),6),G=p(I),P=p(G),E=y(I,2);E.__click=o;var j=y(w,2),C=p(j);Ve(C,21,()=>c(r),k=>k.id,(k,x)=>{var b=Pc();let Y;b.__click=()=>l(c(x).id,"right");var Z=p(b),oe=y(Z,2),ne=p(oe),fe=p(ne),ge=y(ne,2),U=p(ge);te((re,ie,we)=>{Y=Le(b,1,"hero-card svelte-1rwnzlz",null,Y,re),O(b,"data-testid",`hero-${c(x).id??""}-right`),b.disabled=ie,O(Z,"src",we),O(Z,"alt",c(x).name),A(fe,c(x).name),A(U,c(x).heroClass)},[()=>({selected:i(c(x).id,"right"),unavailable:a(c(x).id,"right")}),()=>a(c(x).id,"right"),()=>Re(c(x).imagePath)]),R(k,b)});var W=y(g,2),z=p(W);Ve(z,21,()=>c(r),k=>k.id,(k,x)=>{var b=Ac();let Y;b.__click=()=>l(c(x).id,"bottom");var Z=p(b),oe=y(Z,2),ne=p(oe),fe=p(ne),ge=y(ne,2),U=p(ge);te((re,ie,we)=>{Y=Le(b,1,"hero-card svelte-1rwnzlz",null,Y,re),O(b,"data-testid",`hero-${c(x).id??""}`),b.disabled=ie,O(Z,"src",we),O(Z,"alt",c(x).name),A(fe,c(x).name),A(U,c(x).heroClass)},[()=>({selected:i(c(x).id,"bottom"),unavailable:a(c(x).id,"bottom")}),()=>a(c(x).id,"bottom"),()=>Re(c(x).imagePath)]),R(k,b)}),te(k=>{A(P,`${c(n).length??""} heroes selected`),E.disabled=k},[()=>!u()]),R(e,f),$e()}Ut(["click"]);var Rc=$('<button class="move-square svelte-ehd1hj" data-testid="move-square"><span class="sr-only svelte-ehd1hj"> </span></button>'),Dc=$('<div class="movement-overlay svelte-ehd1hj" data-testid="movement-overlay"></div>');function Oc(e,t){Xe(t,!0);function n(i){const a=t.tileOffsetX+i.x*t.cellSize,l=t.tileOffsetY+i.y*t.cellSize;return`left: ${a}px; top: ${l}px; width: ${t.cellSize}px; height: ${t.cellSize}px;`}function r(i,a){i.stopPropagation(),t.onSquareClick(a)}var s=Dc();Ve(s,21,()=>t.validMoveSquares,i=>`${i.x},${i.y}`,(i,a)=>{var l=Rc();l.__click=f=>r(f,c(a));var o=p(l),u=p(o);te(f=>{O(l,"data-position-x",c(a).x),O(l,"data-position-y",c(a).y),ft(l,f),A(u,`Move to (${c(a).x??""}, ${c(a).y??""})`)},[()=>n(c(a))]),R(i,l)}),R(e,s),$e()}Ut(["click"]);var zc=$('<div class="tile-deck-counter svelte-9649r" data-testid="tile-deck-counter"><span class="deck-icon svelte-9649r">ð¦</span> <span class="deck-count svelte-9649r" data-testid="tile-deck-count"> </span> <span class="deck-label svelte-9649r">tiles</span></div>');function Nc(e,t){var n=zc(),r=y(p(n),2),s=p(r);te(()=>A(s,t.tileCount)),R(e,n)}var Fc=$('<div class="unexplored-edge svelte-12eown4" data-testid="unexplored-edge"><span class="question-mark svelte-12eown4">?</span></div>');function Lc(e,t){Xe(t,!0);const r=(()=>{const l=t.cellSize*1.5,o=36;switch(t.direction){case"north":return{left:`${t.tileWidth/2-l/2}px`,top:`${o-8/2}px`,width:`${l}px`,height:"8px"};case"south":return{left:`${t.tileWidth/2-l/2}px`,bottom:`${o-8/2}px`,width:`${l}px`,height:"8px"};case"east":return{right:`${o-8/2}px`,top:`${t.tileHeight/2-l/2}px`,width:"8px",height:`${l}px`};case"west":return{left:`${o-8/2}px`,top:`${t.tileHeight/2-l/2}px`,width:"8px",height:`${l}px`}}})(),s=Object.entries(r).map(([a,l])=>`${a}: ${l}`).join("; ");var i=Fc();te(()=>{O(i,"data-direction",t.direction),ft(i,s)}),R(e,i),$e()}var jc=$('<div class="monster-token svelte-1g5ysl" data-testid="monster-token"><img class="token-image svelte-1g5ysl"/> <span class="token-label svelte-1g5ysl"> </span></div>');function qc(e,t){Xe(t,!0);const n=q(()=>ln.find(l=>l.id===t.monster.monsterId)),r=q(()=>()=>{const l=t.cellSize/2,o=t.tilePixelOffset.x+t.tileOffsetX+t.monster.position.x*t.cellSize+l,u=t.tilePixelOffset.y+t.tileOffsetY+t.monster.position.y*t.cellSize+l;return`left: ${o}px; top: ${u}px;`});var s=ke(),i=xe(s);{var a=l=>{var o=jc(),u=p(o),f=y(u,2),v=p(f);te((_,g)=>{O(o,"data-monster-id",t.monster.instanceId),ft(o,_),O(u,"src",g),O(u,"alt",c(n).name),A(v,c(n).name)},[()=>c(r)(),()=>Re(c(n).imagePath)]),R(l,o)};Q(i,l=>{c(n)&&l(a)})}R(e,s),$e()}var Bc=$('<div class="monster-card-overlay svelte-at5lsg" role="dialog" aria-modal="true" aria-label="Monster spawned" tabindex="0" data-testid="monster-card-overlay"><div class="monster-card svelte-at5lsg" role="article" data-testid="monster-card"><div class="card-header svelte-at5lsg"><h3 class="monster-name svelte-at5lsg" data-testid="monster-name"> </h3> <button class="dismiss-button svelte-at5lsg" aria-label="Dismiss monster card" data-testid="dismiss-monster-card">â</button></div> <div class="card-image svelte-at5lsg"><img class="monster-image svelte-at5lsg"/></div> <div class="card-stats svelte-at5lsg"><div class="stat svelte-at5lsg"><span class="stat-label svelte-at5lsg">AC</span> <span class="stat-value svelte-at5lsg" data-testid="monster-ac"> </span></div> <div class="stat svelte-at5lsg"><span class="stat-label svelte-at5lsg">HP</span> <span class="stat-value svelte-at5lsg" data-testid="monster-hp"> </span></div> <div class="stat svelte-at5lsg"><span class="stat-label svelte-at5lsg">XP</span> <span class="stat-value svelte-at5lsg" data-testid="monster-xp"> </span></div></div> <p class="card-hint svelte-at5lsg">Click anywhere to dismiss</p></div></div>');function Uc(e,t){Xe(t,!0);const n=q(()=>ln.find(o=>o.id===t.monsterId));function r(){t.onDismiss&&t.onDismiss()}function s(o){(o.key==="Escape"||o.key==="Enter"||o.key===" ")&&(o.preventDefault(),r())}var i=ke(),a=xe(i);{var l=o=>{var u=Bc();u.__click=r,u.__keydown=s;var f=p(u);f.__click=b=>b.stopPropagation(),f.__keydown=b=>b.stopPropagation();var v=p(f),_=p(v),g=p(_),T=y(_,2);T.__click=r;var D=y(v,2),w=p(D),I=y(D,2),G=p(I),P=y(p(G),2),E=p(P),j=y(G,2),C=y(p(j),2),W=p(C),z=y(j,2),k=y(p(z),2),x=p(k);te(b=>{A(g,c(n).name),O(w,"src",b),O(w,"alt",c(n).name),A(E,c(n).ac),A(W,c(n).hp),A(x,c(n).xp)},[()=>Re(c(n).imagePath)]),R(o,u)};Q(a,o=>{c(n)&&o(l)})}R(e,i),$e()}Ut(["click","keydown"]);var Gc=$('<button class="attack-button svelte-1ea4ae8" data-testid="attack-button"> </button>'),Vc=$('<div class="attack-panel svelte-1ea4ae8" data-testid="attack-panel"><div class="attack-header svelte-1ea4ae8"><span class="attack-label svelte-1ea4ae8"> </span> <span class="attack-stats svelte-1ea4ae8"> </span></div> <div class="attack-targets svelte-1ea4ae8"></div></div>');function Yc(e,t){Xe(t,!0);function n(l){return ln.find(u=>u.id===l)?.name||"Unknown"}function r(l){t.onAttack(l)}var s=ke(),i=xe(s);{var a=l=>{var o=Vc(),u=p(o),f=p(u),v=p(f),_=y(f,2),g=p(_),T=y(u,2);Ve(T,21,()=>t.adjacentMonsters,D=>D.instanceId,(D,w)=>{var I=Gc();I.__click=()=>r(c(w).instanceId);var G=p(I);te((P,E)=>{O(I,"data-target-id",c(w).instanceId),O(I,"aria-label",`Attack ${P??""}`),A(G,`Attack ${E??""}`)},[()=>n(c(w).monsterId),()=>n(c(w).monsterId)]),R(D,I)}),te(()=>{A(v,`Attack with ${t.heroAttack.name??""}`),A(g,`+${t.heroAttack.attackBonus??""} / ${t.heroAttack.damage??""} dmg`)}),R(l,o)};Q(i,l=>{t.adjacentMonsters.length>0&&l(a)})}R(e,s),$e()}Ut(["click"]);var Kc=$('<span class="result-text critical svelte-1jt2qdd" data-testid="result-text">âï¸ CRITICAL HIT!</span>'),Wc=$('<span class="result-text hit svelte-1jt2qdd" data-testid="result-text">â HIT!</span>'),Xc=$('<span class="result-text miss svelte-1jt2qdd" data-testid="result-text">â MISS!</span>'),$c=$('<div class="damage-info svelte-1jt2qdd" data-testid="damage-info"><span class="damage-value svelte-1jt2qdd"> </span> <span class="damage-label svelte-1jt2qdd"> </span></div>'),Qc=$('<div class="combat-result-overlay svelte-1jt2qdd" role="dialog" aria-modal="true" aria-label="Combat result" tabindex="0" data-testid="combat-result-overlay"><div role="document" data-testid="combat-result"><div class="result-header svelte-1jt2qdd"><h3 class="attacker-info svelte-1jt2qdd" data-testid="attacker-info"> </h3> <button class="dismiss-button svelte-1jt2qdd" aria-label="Dismiss combat result" data-testid="dismiss-combat-result">â</button></div> <div class="dice-roll-section svelte-1jt2qdd"><div class="dice-container svelte-1jt2qdd"><span class="d20-icon svelte-1jt2qdd" aria-label="D20 die">D20</span> <span class="roll-value svelte-1jt2qdd" data-testid="roll-value"> </span></div> <div class="roll-breakdown svelte-1jt2qdd"><div class="breakdown-row svelte-1jt2qdd"><span class="breakdown-label svelte-1jt2qdd">Roll:</span> <span class="breakdown-value svelte-1jt2qdd" data-testid="dice-roll"> </span></div> <div class="breakdown-row svelte-1jt2qdd"><span class="breakdown-label svelte-1jt2qdd">+ Bonus:</span> <span class="breakdown-value svelte-1jt2qdd" data-testid="attack-bonus"> </span></div> <div class="breakdown-divider svelte-1jt2qdd"></div> <div class="breakdown-row total svelte-1jt2qdd"><span class="breakdown-label svelte-1jt2qdd">Total:</span> <span class="breakdown-value svelte-1jt2qdd" data-testid="attack-total"> </span></div> <div class="breakdown-row target svelte-1jt2qdd"><span class="breakdown-label svelte-1jt2qdd">vs AC:</span> <span class="breakdown-value svelte-1jt2qdd" data-testid="target-ac"> </span></div></div></div> <div class="result-section svelte-1jt2qdd"><!> <!></div> <p class="dismiss-hint svelte-1jt2qdd">Click anywhere to dismiss</p></div></div>');function bs(e,t){Xe(t,!0);function n(){t.onDismiss&&t.onDismiss()}function r(U){(U.key==="Escape"||U.key==="Enter"||U.key===" ")&&(U.preventDefault(),n())}var s=Qc();s.__click=n,s.__keydown=r;var i=p(s);let a;i.__click=U=>U.stopPropagation(),i.__keydown=U=>U.stopPropagation();var l=p(i),o=p(l),u=p(o),f=y(o,2);f.__click=n;var v=y(l,2),_=p(v),g=y(p(_),2),T=p(g),D=y(_,2),w=p(D),I=y(p(w),2),G=p(I),P=y(w,2),E=y(p(P),2),j=p(E),C=y(P,4),W=y(p(C),2),z=p(W),k=y(C,2),x=y(p(k),2),b=p(x),Y=y(v,2),Z=p(Y);{var oe=U=>{var re=Kc();R(U,re)},ne=U=>{var re=ke(),ie=xe(re);{var we=Be=>{var ct=Wc();R(Be,ct)},ze=Be=>{var ct=Xc();R(Be,ct)};Q(ie,Be=>{t.result.isHit?Be(we):Be(ze,!1)},!0)}R(U,re)};Q(Z,U=>{t.result.isCritical?U(oe):U(ne,!1)})}var fe=y(Z,2);{var ge=U=>{var re=$c(),ie=p(re),we=p(ie),ze=y(ie,2),Be=p(ze);te(()=>{A(we,t.result.damage),A(Be,`damage to ${t.targetName??""}`)}),R(U,re)};Q(fe,U=>{t.result.isHit&&U(ge)})}te(()=>{a=Le(i,1,"combat-result svelte-1jt2qdd",null,a,{hit:t.result.isHit,miss:!t.result.isHit,critical:t.result.isCritical}),A(u,`${t.attackerName??""} attacks with ${t.attackName??""}!`),A(T,t.result.roll),A(G,t.result.roll),A(j,t.result.attackBonus),A(z,t.result.total),A(b,t.result.targetAC)}),R(e,s),$e()}Ut(["click","keydown"]);var Zc=$('<div class="player-info svelte-8w11tm" data-testid="turn-indicator"><img class="player-avatar svelte-8w11tm"/> <div class="turn-details svelte-8w11tm"><span class="player-name svelte-8w11tm"> </span> <span class="turn-phase svelte-8w11tm" data-testid="turn-phase"> </span> <span class="turn-number svelte-8w11tm"> </span> <span class="hero-hp svelte-8w11tm" data-testid="hero-hp"> </span></div></div>'),Jc=$('<div class="player-info svelte-8w11tm"><img class="player-avatar svelte-8w11tm"/> <div class="turn-details svelte-8w11tm"><span class="player-name svelte-8w11tm"> </span> <span class="turn-phase svelte-8w11tm"> </span> <span class="turn-number svelte-8w11tm"> </span> <span class="hero-hp svelte-8w11tm"> </span></div></div>'),eu=$('<div><img class="tile-image svelte-8w11tm"/> <!></div>'),tu=$('<div class="movement-overlay-container svelte-8w11tm"><!></div>'),nu=$('<div data-testid="hero-token"><img class="token-image svelte-8w11tm"/> <span class="token-label svelte-8w11tm"> </span></div>'),ru=$('<button class="activate-monster-button svelte-8w11tm" data-testid="activate-monster-button"> </button>'),su=$('<div class="player-info svelte-8w11tm"><img class="player-avatar svelte-8w11tm"/> <div class="turn-details svelte-8w11tm"><span class="player-name svelte-8w11tm"> </span> <span class="turn-phase svelte-8w11tm"> </span> <span class="turn-number svelte-8w11tm"> </span> <span class="hero-hp svelte-8w11tm"> </span></div></div>'),iu=$('<div class="player-info svelte-8w11tm" data-testid="turn-indicator"><img class="player-avatar svelte-8w11tm"/> <div class="turn-details svelte-8w11tm"><span class="player-name svelte-8w11tm"> </span> <span class="turn-phase svelte-8w11tm" data-testid="turn-phase"> </span> <span class="turn-number svelte-8w11tm"> </span> <span class="hero-hp svelte-8w11tm" data-testid="hero-hp"> </span></div></div>'),au=$('<div class="game-board svelte-8w11tm" data-testid="game-board"><div data-testid="player-zone-top"><!></div> <div class="middle-section svelte-8w11tm"><div data-testid="player-zone-left"><!></div> <div class="board-container svelte-8w11tm"><div class="dungeon-map svelte-8w11tm" data-testid="dungeon-map" role="button" tabindex="0"><!> <!> <!> <!></div> <div class="board-controls svelte-8w11tm"><!> <!> <button class="end-phase-button svelte-8w11tm" data-testid="end-phase-button"> </button> <button class="reset-button svelte-8w11tm" data-testid="reset-button">â© Return to Character Select</button> <!></div></div> <div data-testid="player-zone-right"><!></div></div> <div data-testid="player-zone-bottom"><!></div> <!> <!> <!></div>');function ou(e,t){Xe(t,!0);const n=140,r=4,s=8,i=4,a=n*r,l=n*s,o=n*i,u=32,f=.15,v=1,_=36,g=36,T=632,D=632,w=1195,I=3,G=0;let P=V(ce([])),E=V(ce([])),j=V(ce({})),C=V(ce({currentHeroIndex:0,currentPhase:"hero-phase",turnNumber:1})),W=V(ce([])),z=V(!1),k=V(ce({tiles:[],unexploredEdges:[],tileDeck:[]})),x=V(ce([])),b=V(null),Y=V(null),Z=V(null),oe=V(ce([])),ne=V(null),fe=V(null),ge=V(null),U=V(0),re=V(ce({actionsTaken:[],canMove:!0,canAttack:!0})),ie=V(null),we=V(1),ze=q(()=>Be(c(k)));Rt(()=>{const h=J.subscribe(()=>{const m=J.getState();M(P,m.game.heroTokens,!0),M(E,m.heroes.selectedHeroes,!0),M(j,m.heroes.heroEdgeMap,!0),M(C,m.game.turnState,!0),M(W,m.game.validMoveSquares,!0),M(z,m.game.showingMovement,!0),M(k,m.game.dungeon,!0),M(x,m.game.monsters,!0),M(b,m.game.recentlySpawnedMonsterId,!0),M(Y,m.game.attackResult,!0),M(Z,m.game.attackTargetId,!0),M(oe,m.game.heroHp,!0),M(ne,m.game.monsterAttackResult,!0),M(fe,m.game.monsterAttackTargetId,!0),M(ge,m.game.monsterAttackerId,!0),M(U,m.game.villainPhaseMonsterIndex,!0),M(re,m.game.heroTurnActions,!0)}),d=J.getState();return M(P,d.game.heroTokens,!0),M(E,d.heroes.selectedHeroes,!0),M(j,d.heroes.heroEdgeMap,!0),M(C,d.game.turnState,!0),M(W,d.game.validMoveSquares,!0),M(z,d.game.showingMovement,!0),M(k,d.game.dungeon,!0),M(x,d.game.monsters,!0),M(b,d.game.recentlySpawnedMonsterId,!0),M(Y,d.game.attackResult,!0),M(Z,d.game.attackTargetId,!0),M(oe,d.game.heroHp,!0),M(ne,d.game.monsterAttackResult,!0),M(fe,d.game.monsterAttackTargetId,!0),M(ge,d.game.monsterAttackerId,!0),M(U,d.game.villainPhaseMonsterIndex,!0),M(re,d.game.heroTurnActions,!0),h}),Rt(()=>{c(C).currentPhase==="hero-phase"&&dc(c(re))&&J.dispatch(ks())}),Rt(()=>{if(c(C).currentPhase!=="hero-phase"||!c(re).canMove||c(z))return;const h=_e();if(!h)return;const d=mt(h);d&&J.dispatch(xs({heroId:h,speed:d.speed}))});function Be(h){if(h.tiles.length===0)return{minCol:0,maxCol:0,minRow:0,maxRow:0,width:T,height:w};let d=1/0,m=-1/0,S=1/0,H=-1/0;for(const ae of h.tiles)d=Math.min(d,ae.position.col),m=Math.max(m,ae.position.col),S=Math.min(S,ae.position.row),H=Math.max(H,ae.position.row);const F=m-d+1,N=T+(F-1)*a,K=Math.max(0,-S),L=Math.max(0,H),se=w+K*o+L*o;return{minCol:d,maxCol:m,minRow:S,maxRow:H,width:Math.max(N,T),height:Math.max(se,w)}}function ct(h,d){const m=(h.position.col-d.minCol)*a;let S=0;return h.position.row<0?S=(h.position.row-d.minRow)*o:h.position.row===0?S=Math.max(0,-d.minRow)*o-I:S=Math.max(0,-d.minRow)*o+l+(h.position.row-1)*o-I-G,{x:m,y:S}}function Hi(h){return h.tileType==="start"?"assets/StartTile.png":Ii.find(m=>m.tileType===h.tileType)?.imagePath||"assets/Tile_Black_x2_01.png"}function Hr(h){return h.tileType==="start"?{width:T,height:w}:{width:T,height:D}}Rt(()=>{if(c(ie)){const h=()=>{const m=c(ie);if(!m)return;const S=m.clientWidth-u,H=m.clientHeight-u,F=c(ze),N=S/F.width,K=H/F.height,L=Math.min(N,K,v);M(we,Math.max(L,f),!0)};h();const d=new ResizeObserver(h);return d.observe(c(ie)),()=>d.disconnect()}});function mt(h){return c(E).find(d=>d.id===h)}function _e(){return c(P)[c(C).currentHeroIndex]?.heroId}function cn(h){switch(h){case"hero-phase":return"Hero Phase";case"exploration-phase":return"Exploration Phase";case"villain-phase":return"Villain Phase"}}function un(h){return c(oe).find(m=>m.heroId===h)?.currentHp??0}function fn(h){return c(oe).find(m=>m.heroId===h)?.maxHp??0}function Rr(){const h=_e();return h?c(x).filter(d=>d.controllerId===h):[]}function Ri(){const h=Rr();return c(U)>=h.length}function Di(){J.dispatch(gc())}function Oi(h,d){const m=n/2,S=d.x+_+h.x*n+m,H=d.y+g+h.y*n+m;return`left: ${S}px; top: ${H}px;`}function ut(){const h=_e();if(h&&c(j)[h])return c(j)[h];const d=c(C).currentHeroIndex%4;return["bottom","right","top","left"][d]}function zi(h){const d=c(j)[h];if(!d)return 0;switch(d){case"bottom":return 0;case"top":return 180;case"left":return 90;case"right":return-90;default:return 0}}function Dr(h){if(c(C).currentPhase!=="hero-phase")return;const d=_e();if(!d)return;const m=mt(d);m&&(c(z)?J.dispatch(pc()):J.dispatch(xs({heroId:d,speed:m.speed})))}function Ni(h){const d=_e();d&&J.dispatch(mc({heroId:d,position:h}))}function Fi(h){(h.key==="Enter"||h.key===" ")&&(h.preventDefault(),Dr())}function Li(){switch(c(C).currentPhase){case"hero-phase":J.dispatch(ks());break;case"exploration-phase":J.dispatch(wc());break;case"villain-phase":J.dispatch(yc());break}}function ji(){switch(c(C).currentPhase){case"hero-phase":return"End Hero Phase";case"exploration-phase":return"End Exploration";case"villain-phase":return"End Villain Phase"}}function qi(){J.dispatch(xc())}function Bi(h){const d=c(k).tiles.find(m=>m.id===h);return d?ct(d,c(ze)):{x:0,y:0}}const Ln="start-tile";function Ui(){const h=_e();if(!h)return Ln;const d=c(P).find(S=>S.heroId===h);return d?tn(d.position,c(k))?.id??Ln:Ln}function Gi(){const h=_e();if(!h)return[];const d=c(P).find(S=>S.heroId===h);if(!d)return[];const m=Ui();return rc(d.position,c(x),m,c(k))}function jn(h){return en.find(d=>d.id===h)}function Vi(h){const d=_e();if(!d)return;const m=jn(d);if(!m)return;const S=c(x).find(N=>N.instanceId===h);if(!S)return;const H=tc(S.monsterId);if(H===void 0)return;const F=ec(m.attack,H);J.dispatch(kc({result:F,targetInstanceId:h}))}function Yi(){J.dispatch(bc())}function Or(h){return ln.find(m=>m.id===h)?.name||"Monster"}function Ki(){if(c(Z))return c(x).find(h=>h.instanceId===c(Z))}function Wi(){J.dispatch(Tc({}))}function Xi(){J.dispatch(Ic())}function $i(){return c(fe)&&en.find(d=>d.id===c(fe))?.name||"Hero"}function Qi(){if(!c(ge))return"Monster";const h=c(x).find(d=>d.instanceId===c(ge));return h?Or(h.monsterId):"Monster"}var zr=au(),qn=p(zr);let Nr;var Zi=p(qn);{var Ji=h=>{const d=q(_e),m=q(()=>c(d)?mt(c(d)):void 0);var S=ke(),H=xe(S);{var F=N=>{var K=Zc(),L=p(K),se=y(L,2),ae=p(se),Ee=p(ae),ye=y(ae,2),Ne=p(ye),Se=y(ye,2),Qe=p(Se),Ze=y(Se,2),Je=p(Ze);te((gt,wt,yt,xt)=>{O(L,"src",gt),O(L,"alt",c(m).name),A(Ee,`${c(m).name??""}'s Turn`),A(Ne,wt),A(Qe,`Turn ${c(C).turnNumber??""}`),A(Je,`HP: ${yt??""}/${xt??""}`)},[()=>Re(c(m).imagePath),()=>cn(c(C).currentPhase),()=>un(c(d)),()=>fn(c(d))]),R(N,K)};Q(H,N=>{c(m)&&c(d)&&N(F)})}R(h,S)};Q(Zi,h=>{ut()==="top"&&h(Ji)})}var Fr=y(qn,2),Bn=p(Fr);let Lr;var ea=p(Bn);{var ta=h=>{const d=q(_e),m=q(()=>c(d)?mt(c(d)):void 0);var S=ke(),H=xe(S);{var F=N=>{var K=Jc(),L=p(K),se=y(L,2),ae=p(se),Ee=p(ae),ye=y(ae,2),Ne=p(ye),Se=y(ye,2),Qe=p(Se),Ze=y(Se,2),Je=p(Ze);te((gt,wt,yt,xt)=>{O(L,"src",gt),O(L,"alt",c(m).name),A(Ee,`${c(m).name??""}'s Turn`),A(Ne,wt),A(Qe,`Turn ${c(C).turnNumber??""}`),A(Je,`HP: ${yt??""}/${xt??""}`)},[()=>Re(c(m).imagePath),()=>cn(c(C).currentPhase),()=>un(c(d)),()=>fn(c(d))]),R(N,K)};Q(H,N=>{c(m)&&c(d)&&N(F)})}R(h,S)};Q(ea,h=>{ut()==="left"&&h(ta)})}var Un=y(Bn,2),St=p(Un);St.__click=Dr,St.__keydown=Fi;var jr=p(St);Ve(jr,17,()=>c(k).tiles,h=>h.id,(h,d)=>{const m=q(()=>ct(c(d),c(ze))),S=q(()=>Hr(c(d)));var H=eu();let F;var N=p(H),K=y(N,2);Ve(K,17,()=>c(k).unexploredEdges.filter(L=>L.tileId===c(d).id),L=>L.direction,(L,se)=>{Lc(L,{get direction(){return c(se).direction},cellSize:n,get tileWidth(){return c(S).width},get tileHeight(){return c(S).height}})}),te(L=>{F=Le(H,1,"placed-tile svelte-8w11tm",null,F,{"start-tile":c(d).tileType==="start"}),O(H,"data-testid",c(d).tileType==="start"?"start-tile":"dungeon-tile"),O(H,"data-tile-id",c(d).id),ft(H,`left: ${c(m).x??""}px; top: ${c(m).y??""}px; width: ${c(S).width??""}px; height: ${c(S).height??""}px;`),O(N,"src",L),O(N,"alt",c(d).tileType),ft(N,c(d).rotation!==0?`transform: rotate(${c(d).rotation}deg);`:"")},[()=>Re(Hi(c(d)))]),R(h,H)});var qr=y(jr,2);{var na=h=>{const d=q(()=>c(k).tiles.find(F=>F.tileType==="start"));var m=ke(),S=xe(m);{var H=F=>{const N=q(()=>ct(c(d),c(ze))),K=q(()=>Hr(c(d)));var L=tu(),se=p(L);Oc(se,{get validMoveSquares(){return c(W)},tileOffsetX:_,tileOffsetY:g,cellSize:n,onSquareClick:Ni}),te(()=>ft(L,`left: ${c(N).x??""}px; top: ${c(N).y??""}px; width: ${c(K).width??""}px; height: ${c(K).height??""}px;`)),R(F,L)};Q(S,F=>{c(d)&&F(H)})}R(h,m)};Q(qr,h=>{c(z)&&c(W).length>0&&h(na)})}var Br=y(qr,2);Ve(Br,17,()=>c(P),h=>h.heroId,(h,d)=>{const m=q(()=>mt(c(d).heroId)),S=q(()=>c(d).heroId===_e()),H=q(()=>c(k).tiles.find(se=>se.tileType==="start")),F=q(()=>zi(c(d).heroId));var N=ke(),K=xe(N);{var L=se=>{const ae=q(()=>ct(c(H),c(ze)));var Ee=nu();let ye;var Ne=p(Ee),Se=y(Ne,2),Qe=p(Se);te((Ze,Je)=>{ye=Le(Ee,1,"hero-token svelte-8w11tm",null,ye,{active:c(S)}),O(Ee,"data-hero-id",c(d).heroId),ft(Ee,`${Ze??""} --token-rotation: ${c(F)??""}deg;`),O(Ne,"src",Je),O(Ne,"alt",c(m).name),A(Qe,c(m).name)},[()=>Oi(c(d).position,c(ae)),()=>Re(c(m).imagePath)]),R(se,Ee)};Q(K,se=>{c(m)&&c(H)&&se(L)})}R(h,N)});var ra=y(Br,2);Ve(ra,17,()=>c(x),h=>h.instanceId,(h,d)=>{{let m=q(()=>Bi(c(d).tileId));qc(h,{get monster(){return c(d)},cellSize:n,tileOffsetX:_,tileOffsetY:g,get tilePixelOffset(){return c(m)}})}});var sa=y(St,2),Ur=p(sa);Nc(Ur,{get tileCount(){return c(k).tileDeck.length}});var Gr=y(Ur,2);{var ia=h=>{var d=ru();d.__click=Wi;var m=p(d);te(S=>A(m,`ð¹ Activate Monster (${c(U)+1}/${S??""})`),[()=>Rr().length]),R(h,d)};Q(Gr,h=>{c(C).currentPhase==="villain-phase"&&!Ri()&&!c(ne)&&h(ia)})}var Gn=y(Gr,2);Gn.__click=Li;var aa=p(Gn),Vr=y(Gn,2);Vr.__click=Di;var oa=y(Vr,2);{var la=h=>{const d=q(_e),m=q(()=>c(d)?jn(c(d)):void 0),S=q(Gi);var H=ke(),F=xe(H);{var N=K=>{Yc(K,{get adjacentMonsters(){return c(S)},get heroAttack(){return c(m).attack},onAttack:Vi})};Q(F,K=>{c(m)&&c(S).length>0&&K(N)})}R(h,H)};Q(oa,h=>{c(C).currentPhase==="hero-phase"&&c(re).canAttack&&h(la)})}Ro(Un,h=>M(ie,h),()=>c(ie));var Yr=y(Un,2);let Kr;var ca=p(Yr);{var ua=h=>{const d=q(_e),m=q(()=>c(d)?mt(c(d)):void 0);var S=ke(),H=xe(S);{var F=N=>{var K=su(),L=p(K),se=y(L,2),ae=p(se),Ee=p(ae),ye=y(ae,2),Ne=p(ye),Se=y(ye,2),Qe=p(Se),Ze=y(Se,2),Je=p(Ze);te((gt,wt,yt,xt)=>{O(L,"src",gt),O(L,"alt",c(m).name),A(Ee,`${c(m).name??""}'s Turn`),A(Ne,wt),A(Qe,`Turn ${c(C).turnNumber??""}`),A(Je,`HP: ${yt??""}/${xt??""}`)},[()=>Re(c(m).imagePath),()=>cn(c(C).currentPhase),()=>un(c(d)),()=>fn(c(d))]),R(N,K)};Q(H,N=>{c(m)&&c(d)&&N(F)})}R(h,S)};Q(ca,h=>{ut()==="right"&&h(ua)})}var Vn=y(Fr,2);let Wr;var fa=p(Vn);{var da=h=>{const d=q(_e),m=q(()=>c(d)?mt(c(d)):void 0);var S=ke(),H=xe(S);{var F=N=>{var K=iu(),L=p(K),se=y(L,2),ae=p(se),Ee=p(ae),ye=y(ae,2),Ne=p(ye),Se=y(ye,2),Qe=p(Se),Ze=y(Se,2),Je=p(Ze);te((gt,wt,yt,xt)=>{O(L,"src",gt),O(L,"alt",c(m).name),A(Ee,`${c(m).name??""}'s Turn`),A(Ne,wt),A(Qe,`Turn ${c(C).turnNumber??""}`),A(Je,`HP: ${yt??""}/${xt??""}`)},[()=>Re(c(m).imagePath),()=>cn(c(C).currentPhase),()=>un(c(d)),()=>fn(c(d))]),R(N,K)};Q(H,N=>{c(m)&&c(d)&&N(F)})}R(h,S)};Q(fa,h=>{ut()==="bottom"&&h(da)})}var Xr=y(Vn,2);{var ha=h=>{const d=q(()=>c(x).find(F=>F.instanceId===c(b)));var m=ke(),S=xe(m);{var H=F=>{Uc(F,{get monsterId(){return c(d).monsterId},onDismiss:qi})};Q(S,F=>{c(d)&&F(H)})}R(h,m)};Q(Xr,h=>{c(b)&&h(ha)})}var $r=y(Xr,2);{var va=h=>{const d=q(_e),m=q(()=>c(d)?jn(c(d)):void 0),S=q(Ki);var H=ke(),F=xe(H);{var N=K=>{{let L=q(()=>c(S)?Or(c(S).monsterId):"Monster");bs(K,{get result(){return c(Y)},get attackerName(){return c(m).name},get attackName(){return c(m).attack.name},get targetName(){return c(L)},onDismiss:Yi})}};Q(F,K=>{c(m)&&K(N)})}R(h,H)};Q($r,h=>{c(Y)&&h(va)})}var _a=y($r,2);{var pa=h=>{{let d=q(Qi),m=q($i);bs(h,{get result(){return c(ne)},get attackerName(){return c(d)},attackName:"Attack",get targetName(){return c(m)},onDismiss:Xi})}};Q(_a,h=>{c(ne)&&h(pa)})}te((h,d,m,S,H)=>{Nr=Le(qn,1,"edge-zone edge-top svelte-8w11tm",null,Nr,h),Lr=Le(Bn,1,"edge-zone edge-left svelte-8w11tm",null,Lr,d),ft(St,`transform: scale(${c(we)??""}); width: ${c(ze).width??""}px; height: ${c(ze).height??""}px;`),O(St,"aria-label",c(z)?"Click to hide movement options":"Click to show movement options for current hero"),A(aa,m),Kr=Le(Yr,1,"edge-zone edge-right svelte-8w11tm",null,Kr,S),Wr=Le(Vn,1,"edge-zone edge-bottom svelte-8w11tm",null,Wr,H)},[()=>({"active-edge":ut()==="top"}),()=>({"active-edge":ut()==="left"}),ji,()=>({"active-edge":ut()==="right"}),()=>({"active-edge":ut()==="bottom"})]),R(e,zr),$e()}Ut(["click","keydown"]);var lu=$('<main class="svelte-1n46o8q"><!></main>');function cu(e,t){Xe(t,!0);let n=V("character-select");Rt(()=>{const l=J.subscribe(()=>{const u=J.getState();M(n,u.game.currentScreen,!0)}),o=J.getState();return M(n,o.game.currentScreen,!0),l});var r=lu(),s=p(r);{var i=l=>{Hc(l,{})},a=l=>{var o=ke(),u=xe(o);{var f=v=>{ou(v,{})};Q(u,v=>{c(n)==="game-board"&&v(f)},!0)}R(l,o)};Q(s,l=>{c(n)==="character-select"?l(i):l(a,!1)})}R(e,r),$e()}bo(cu,{target:document.getElementById("app")});
