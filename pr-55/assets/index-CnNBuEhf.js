(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();const ys="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(ys);const Gr=1,Vr=2,Wr=4,xs=8,bs=16,Ts=2,se=Symbol(),Es="http://www.w3.org/1999/xhtml",Cn=!1;var Kr=Array.isArray,Ss=Array.prototype.indexOf,Gn=Array.from,ks=Object.defineProperty,Rt=Object.getOwnPropertyDescriptor,Is=Object.getOwnPropertyDescriptors,Ps=Object.prototype,Ms=Array.prototype,Yr=Object.getPrototypeOf,br=Object.isExtensible;function Cs(e){for(var t=0;t<e.length;t++)e[t]()}function Xr(){var e,t,n=new Promise((r,i)=>{e=r,t=i});return{promise:n,resolve:e,reject:t}}const ie=2,Vn=4,Wn=8,Ds=1<<24,Je=16,et=32,mt=64,hn=128,De=512,ae=1024,me=2048,tt=4096,ye=8192,it=16384,Kn=32768,St=65536,Tr=1<<17,Qr=1<<18,Dt=1<<19,Os=1<<20,vt=32768,Dn=1<<21,Yn=1<<22,st=1<<23,Jt=Symbol("$state"),zs=Symbol(""),bt=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function As(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Rs(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Ns(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Hs(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Fs(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Ls(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Bs(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function js(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function qs(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}function $s(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Zr(e){return e===this.v}function Us(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Jr(e){return!Us(e,this.v)}let Gs=!1,Ie=null;function kt(e){Ie=e}function ct(e,t=!1,n){Ie={p:Ie,i:!1,c:null,e:null,s:e,x:null,l:null}}function ut(e){var t=Ie,n=t.e;if(n!==null){t.e=null;for(var r of n)hi(r)}return t.i=!0,Ie=t.p,{}}function ei(){return!0}let Tt=[];function Vs(){var e=Tt;Tt=[],Cs(e)}function $t(e){if(Tt.length===0){var t=Tt;queueMicrotask(()=>{t===Tt&&Vs()})}Tt.push(e)}function ti(e){var t=q;if(t===null)return R.f|=st,e;if((t.f&Kn)===0){if((t.f&hn)===0)throw e;t.b.error(e)}else It(e,t)}function It(e,t){for(;t!==null;){if((t.f&hn)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e}const Kt=new Set;let K=null,ke=null,Ae=[],Xn=null,On=!1;class Fe{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#r=0;#n=0;#l=null;#s=[];#i=[];skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(t){Ae=[],this.apply();var n={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const r of t)this.#a(r,n);this.is_fork||this.#u(),this.is_deferred()?(this.#o(n.effects),this.#o(n.render_effects),this.#o(n.block_effects)):(K=null,Er(n.render_effects),Er(n.effects),this.#l?.resolve()),ke=null}#a(t,n){t.f^=ae;for(var r=t.first;r!==null;){var i=r.f,s=(i&(et|mt))!==0,a=s&&(i&ae)!==0,l=a||(i&ye)!==0||this.skipped_effects.has(r);if((r.f&hn)!==0&&r.b?.is_pending()&&(n={parent:n,effect:r,effects:[],render_effects:[],block_effects:[]}),!l&&r.fn!==null){s?r.f^=ae:(i&Vn)!==0?n.effects.push(r):Gt(r)&&((r.f&Je)!==0&&n.block_effects.push(r),Lt(r));var o=r.first;if(o!==null){r=o;continue}}var u=r.parent;for(r=r.next;r===null&&u!==null;)u===n.effect&&(this.#o(n.effects),this.#o(n.render_effects),this.#o(n.block_effects),n=n.parent),r=u.next,u=u.parent}}#o(t){for(const n of t)((n.f&me)!==0?this.#s:this.#i).push(n),this.#c(n.deps),oe(n,ae)}#c(t){if(t!==null)for(const n of t)(n.f&ie)===0||(n.f&vt)===0||(n.f^=vt,this.#c(n.deps))}capture(t,n){this.previous.has(t)||this.previous.set(t,n),(t.f&st)===0&&(this.current.set(t,t.v),ke?.set(t,t.v))}activate(){K=this,this.apply()}deactivate(){K===this&&(K=null,ke=null)}flush(){if(this.activate(),Ae.length>0){if(Ws(),K!==null&&K!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#t)t(this);this.#t.clear()}#u(){if(this.#n===0){for(const t of this.#e)t();this.#e.clear()}this.#r===0&&this.#f()}#f(){if(Kt.size>1){this.previous.clear();var t=ke,n=!0,r={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const s of Kt){if(s===this){n=!1;continue}const a=[];for(const[o,u]of this.current){if(s.current.has(o))if(n&&u!==s.current.get(o))s.current.set(o,u);else continue;a.push(o)}if(a.length===0)continue;const l=[...s.current.keys()].filter(o=>!this.current.has(o));if(l.length>0){var i=Ae;Ae=[];const o=new Set,u=new Map;for(const f of a)ni(f,l,o,u);if(Ae.length>0){K=s,s.apply();for(const f of Ae)s.#a(f,r);s.deactivate()}Ae=i}}K=null,ke=t}this.committed=!0,Kt.delete(this)}increment(t){this.#r+=1,t&&(this.#n+=1)}decrement(t){this.#r-=1,t&&(this.#n-=1),this.revive()}revive(){for(const t of this.#s)oe(t,me),_t(t);for(const t of this.#i)oe(t,tt),_t(t);this.#s=[],this.#i=[],this.flush()}oncommit(t){this.#e.add(t)}ondiscard(t){this.#t.add(t)}settled(){return(this.#l??=Xr()).promise}static ensure(){if(K===null){const t=K=new Fe;Kt.add(K),Fe.enqueue(()=>{K===t&&t.flush()})}return K}static enqueue(t){$t(t)}apply(){}}function Ws(){var e=ot;On=!0;var t=null;try{var n=0;for(sn(!0);Ae.length>0;){var r=Fe.ensure();if(n++>1e3){var i,s;Ks()}r.process(Ae),at.clear()}}finally{On=!1,sn(e),Xn=null}}function Ks(){try{Fs()}catch(e){It(e,Xn)}}let We=null;function Er(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if((r.f&(it|ye))===0&&Gt(r)&&(We=new Set,Lt(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?mi(r):r.fn=null),We?.size>0)){at.clear();for(const i of We){if((i.f&(it|ye))!==0)continue;const s=[i];let a=i.parent;for(;a!==null;)We.has(a)&&(We.delete(a),s.push(a)),a=a.parent;for(let l=s.length-1;l>=0;l--){const o=s[l];(o.f&(it|ye))===0&&Lt(o)}}We.clear()}}We=null}}function ni(e,t,n,r){if(!n.has(e)&&(n.add(e),e.reactions!==null))for(const i of e.reactions){const s=i.f;(s&ie)!==0?ni(i,t,n,r):(s&(Yn|Je))!==0&&(s&me)===0&&ri(i,t,r)&&(oe(i,me),_t(i))}}function ri(e,t,n){const r=n.get(e);if(r!==void 0)return r;if(e.deps!==null)for(const i of e.deps){if(t.includes(i))return!0;if((i.f&ie)!==0&&ri(i,t,n))return n.set(i,!0),!0}return n.set(e,!1),!1}function _t(e){for(var t=Xn=e;t.parent!==null;){t=t.parent;var n=t.f;if(On&&t===q&&(n&Je)!==0&&(n&Qr)===0)return;if((n&(mt|et))!==0){if((n&ae)===0)return;t.f^=ae}}Ae.push(t)}function Ys(e){let t=0,n=pt(0),r;return()=>{Ht()&&(c(n),vi(()=>(t===0&&(r=Pi(()=>e(()=>Nt(n)))),t+=1,()=>{$t(()=>{t-=1,t===0&&(r?.(),r=void 0,Nt(n))})})))}}var Xs=St|Dt|hn;function Qs(e,t,n){new Zs(e,t,n)}class Zs{parent;#e=!1;#t;#r=null;#n;#l;#s;#i=null;#a=null;#o=null;#c=null;#u=null;#f=0;#d=0;#v=!1;#h=null;#w=Ys(()=>(this.#h=pt(this.#f),()=>{this.#h=null}));constructor(t,n,r){this.#t=t,this.#n=n,this.#l=r,this.parent=q.b,this.#e=!!this.#n.pending,this.#s=er(()=>{q.b=this;{var i=this.#m();try{this.#i=Ee(()=>r(i))}catch(s){this.error(s)}this.#d>0?this.#p():this.#e=!1}return()=>{this.#u?.remove()}},Xs)}#y(){try{this.#i=Ee(()=>this.#l(this.#t))}catch(t){this.error(t)}this.#e=!1}#x(){const t=this.#n.pending;t&&(this.#a=Ee(()=>t(this.#t)),Fe.enqueue(()=>{var n=this.#m();this.#i=this.#_(()=>(Fe.ensure(),Ee(()=>this.#l(n)))),this.#d>0?this.#p():(Et(this.#a,()=>{this.#a=null}),this.#e=!1)}))}#m(){var t=this.#t;return this.#e&&(this.#u=lt(),this.#t.before(this.#u),t=this.#u),t}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#_(t){var n=q,r=R,i=Ie;Be(this.#s),_e(this.#s),kt(this.#s.ctx);try{return t()}catch(s){return ti(s),null}finally{Be(n),_e(r),kt(i)}}#p(){const t=this.#n.pending;this.#i!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#u),yi(this.#i,this.#c)),this.#a===null&&(this.#a=Ee(()=>t(this.#t)))}#g(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#g(t);return}this.#d+=t,this.#d===0&&(this.#e=!1,this.#a&&Et(this.#a,()=>{this.#a=null}),this.#c&&(this.#t.before(this.#c),this.#c=null))}update_pending_count(t){this.#g(t),this.#f+=t,this.#h&&Pt(this.#h,this.#f)}get_effect_pending(){return this.#w(),c(this.#h)}error(t){var n=this.#n.onerror;let r=this.#n.failed;if(this.#v||!n&&!r)throw t;this.#i&&(pe(this.#i),this.#i=null),this.#a&&(pe(this.#a),this.#a=null),this.#o&&(pe(this.#o),this.#o=null);var i=!1,s=!1;const a=()=>{if(i){$s();return}i=!0,s&&qs(),Fe.ensure(),this.#f=0,this.#o!==null&&Et(this.#o,()=>{this.#o=null}),this.#e=this.has_pending_snippet(),this.#i=this.#_(()=>(this.#v=!1,Ee(()=>this.#l(this.#t)))),this.#d>0?this.#p():this.#e=!1};var l=R;try{_e(null),s=!0,n?.(t,a),s=!1}catch(o){It(o,this.#s&&this.#s.parent)}finally{_e(l)}r&&$t(()=>{this.#o=this.#_(()=>{Fe.ensure(),this.#v=!0;try{return Ee(()=>{r(this.#t,()=>t,()=>a)})}catch(o){return It(o,this.#s.parent),null}finally{this.#v=!1}})})}}function Js(e,t,n){for(var r=[],i=t.length,s=0;s<i;s++)tr(t[s].e,r,!0);gi(r,()=>{var a=r.length===0&&n!==null;if(a){var l=n,o=l.parentNode;ua(o),o.append(l),e.items.clear(),Me(e,t[0].prev,t[i-1].next)}for(var u=0;u<i;u++){var f=t[u];a||(e.items.delete(f.k),Me(e,f.prev,f.next)),pe(f.e,!a)}e.first===t[0]&&(e.first=t[0].prev)})}function Ye(e,t,n,r,i,s=null){var a=e,l=new Map,o=null,u=(t&Wr)!==0,f=(t&Gr)!==0,v=(t&Vr)!==0;if(u){var d=e;a=d.appendChild(lt())}var h=null,b=sa(()=>{var T=n();return Kr(T)?T:T==null?[]:Gn(T)}),N,p=!0;function k(){ea(I,N,a,t,r),h!==null&&(N.length===0?(h.fragment?(a.before(h.fragment),h.fragment=null):nr(h.effect),$.first=h.effect):Et(h.effect,()=>{h=null}))}var $=er(()=>{N=c(b);for(var T=N.length,P=new Set,U=K,B=null,C=fi(),E=0;E<T;E+=1){var y=N[E],x=r(y,E),G=p?null:l.get(x);G?(f&&Pt(G.v,y),v?Pt(G.i,E):G.i=E,C&&U.skipped_effects.delete(G.e)):(G=ta(p?a:null,B,y,x,E,i,t,n),p&&(G.o=!0,B===null?o=G:B.next=G,B=G),l.set(x,G)),P.add(x)}if(T===0&&s&&!h)if(p)h={fragment:null,effect:Ee(()=>s(a))};else{var V=document.createDocumentFragment(),xe=lt();V.append(xe),h={fragment:V,effect:Ee(()=>s(xe))}}if(!p)if(C){for(const[ee,Pe]of l)P.has(ee)||U.skipped_effects.add(Pe.e);U.oncommit(k),U.ondiscard(()=>{})}else k();c(b)}),I={effect:$,items:l,first:o};p=!1}function ea(e,t,n,r,i){var s=(r&xs)!==0,a=t.length,l=e.items,o=e.first,u,f=null,v,d=[],h=[],b,N,p,k;if(s)for(k=0;k<a;k+=1)b=t[k],N=i(b,k),p=l.get(N),p.o&&(p.a?.measure(),(v??=new Set).add(p));for(k=0;k<a;k+=1){if(b=t[k],N=i(b,k),p=l.get(N),e.first??=p,!p.o){p.o=!0;var $=f?f.next:o;Me(e,f,p),Me(e,p,$),kn(p,$,n),f=p,d=[],h=[],o=f.next;continue}if((p.e.f&ye)!==0&&(nr(p.e),s&&(p.a?.unfix(),(v??=new Set).delete(p))),p!==o){if(u!==void 0&&u.has(p)){if(d.length<h.length){var I=h[0],T;f=I.prev;var P=d[0],U=d[d.length-1];for(T=0;T<d.length;T+=1)kn(d[T],I,n);for(T=0;T<h.length;T+=1)u.delete(h[T]);Me(e,P.prev,U.next),Me(e,f,P),Me(e,U,I),o=I,f=U,k-=1,d=[],h=[]}else u.delete(p),kn(p,o,n),Me(e,p.prev,p.next),Me(e,p,f===null?e.first:f.next),Me(e,f,p),f=p;continue}for(d=[],h=[];o!==null&&o.k!==N;)(o.e.f&ye)===0&&(u??=new Set).add(o),h.push(o),o=o.next;if(o===null)continue;p=o}d.push(p),f=p,o=p.next}let B=l.size>a;if(o!==null||u!==void 0){for(var C=u===void 0?[]:Gn(u);o!==null;)(o.e.f&ye)===0&&C.push(o),o=o.next;var E=C.length;if(B=l.size-E>a,E>0){var y=(r&Wr)!==0&&a===0?n:null;if(s){for(k=0;k<E;k+=1)C[k].a?.measure();for(k=0;k<E;k+=1)C[k].a?.fix()}Js(e,C,y)}}if(B)for(const x of l.values())x.o||(Me(e,f,x),f=x);e.effect.last=f&&f.e,s&&$t(()=>{if(v!==void 0)for(p of v)p.a?.apply()})}function ta(e,t,n,r,i,s,a,l){var o=(a&Gr)!==0,u=(a&bs)===0,f=o?u?oa(n,!1,!1):pt(n):n,v=(a&Vr)===0?i:pt(i),d={i:v,v:f,k:r,a:null,e:null,o:!1,prev:t,next:null};try{if(e===null){var h=document.createDocumentFragment();h.append(e=lt())}return d.e=Ee(()=>s(e,f,v,l)),t!==null&&(t.next=d),d}finally{}}function kn(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,i=t?t.e.nodes_start:n,s=e.e.nodes_start;s!==null&&s!==r;){var a=Ut(s);i.before(s),s=a}}function Me(e,t,n){t===null?(e.first=n,e.effect.first=n&&n.e):(t.e.next&&(t.e.next.prev=null),t.next=n,t.e.next=n&&n.e),n!==null&&(n.e.prev&&(n.e.prev.next=null),n.prev=t,n.e.prev=t&&t.e)}function na(e,t,n,r){const i=Qn;if(n.length===0&&e.length===0){r(t.map(i));return}var s=K,a=q,l=ra();function o(){Promise.all(n.map(u=>ia(u))).then(u=>{l();try{r([...t.map(i),...u])}catch(f){(a.f&it)===0&&It(f,a)}s?.deactivate(),nn()}).catch(u=>{It(u,a)})}e.length>0?Promise.all(e).then(()=>{l();try{return o()}finally{s?.deactivate(),nn()}}):o()}function ra(){var e=q,t=R,n=Ie,r=K;return function(s=!0){Be(e),_e(t),kt(n),s&&r?.activate()}}function nn(){Be(null),_e(null),kt(null)}function Qn(e){var t=ie|me,n=R!==null&&(R.f&ie)!==0?R:null;return q!==null&&(q.f|=Dt),{ctx:Ie,deps:null,effects:null,equals:Zr,f:t,fn:e,reactions:null,rv:0,v:se,wv:0,parent:n??q,ac:null}}function ia(e,t){let n=q;n===null&&As();var r=n.b,i=void 0,s=pt(se),a=!R,l=new Map;return pa(()=>{var o=Xr();i=o.promise;try{Promise.resolve(e()).then(o.resolve,o.reject).then(()=>{u===K&&u.committed&&u.deactivate(),nn()})}catch(d){o.reject(d),nn()}var u=K;if(a){var f=!r.is_pending();r.update_pending_count(1),u.increment(f),l.get(u)?.reject(bt),l.delete(u),l.set(u,o)}const v=(d,h=void 0)=>{if(u.activate(),h)h!==bt&&(s.f|=st,Pt(s,h));else{(s.f&st)!==0&&(s.f^=st),Pt(s,d);for(const[b,N]of l){if(l.delete(b),b===u)break;N.reject(bt)}}a&&(r.update_pending_count(-1),u.decrement(f))};o.promise.then(v,d=>v(null,d||"unknown"))}),ha(()=>{for(const o of l.values())o.reject(bt)}),new Promise(o=>{function u(f){function v(){f===i?o(s):u(i)}f.then(v,v)}u(i)})}function W(e){const t=Qn(e);return xi(t),t}function sa(e){const t=Qn(e);return t.equals=Jr,t}function ii(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)pe(t[n])}}function aa(e){for(var t=e.parent;t!==null;){if((t.f&ie)===0)return(t.f&it)===0?t:null;t=t.parent}return null}function Zn(e){var t,n=q;Be(aa(e));try{e.f&=~vt,ii(e),t=Si(e)}finally{Be(n)}return t}function si(e){var t=Zn(e);if(e.equals(t)||(K?.is_fork||(e.v=t),e.wv=Ti()),!Ot)if(ke!==null)(Ht()||K?.is_fork)&&ke.set(e,t);else{var n=(e.f&De)===0?tt:ae;oe(e,n)}}let zn=new Set;const at=new Map;let ai=!1;function pt(e,t){var n={f:0,v:e,reactions:null,equals:Zr,rv:0,wv:0};return n}function Q(e,t){const n=pt(e);return xi(n),n}function oa(e,t=!1,n=!0){const r=pt(e);return t||(r.equals=Jr),r}function A(e,t,n=!1){R!==null&&(!Le||(R.f&Tr)!==0)&&ei()&&(R.f&(ie|Je|Yn|Tr))!==0&&!Xe?.includes(e)&&js();let r=n?ve(t):t;return Pt(e,r)}function Pt(e,t){if(!e.equals(t)){var n=e.v;Ot?at.set(e,t):at.set(e,n),e.v=t;var r=Fe.ensure();r.capture(e,n),(e.f&ie)!==0&&((e.f&me)!==0&&Zn(e),oe(e,(e.f&De)!==0?ae:tt)),e.wv=Ti(),oi(e,me),q!==null&&(q.f&ae)!==0&&(q.f&(et|mt))===0&&(Te===null?wa([e]):Te.push(e)),!r.is_fork&&zn.size>0&&!ai&&la()}return t}function la(){ai=!1;var e=ot;sn(!0);const t=Array.from(zn);try{for(const n of t)(n.f&ae)!==0&&oe(n,tt),Gt(n)&&Lt(n)}finally{sn(e)}zn.clear()}function Nt(e){A(e,e.v+1)}function oi(e,t){var n=e.reactions;if(n!==null)for(var r=n.length,i=0;i<r;i++){var s=n[i],a=s.f,l=(a&me)===0;if(l&&oe(s,t),(a&ie)!==0){var o=s;ke?.delete(o),(a&vt)===0&&(a&De&&(s.f|=vt),oi(o,tt))}else l&&((a&Je)!==0&&We!==null&&We.add(s),_t(s))}}function ve(e){if(typeof e!="object"||e===null||Jt in e)return e;const t=Yr(e);if(t!==Ps&&t!==Ms)return e;var n=new Map,r=Kr(e),i=Q(0),s=ht,a=l=>{if(ht===s)return l();var o=R,u=ht;_e(null),Ir(s);var f=l();return _e(o),Ir(u),f};return r&&n.set("length",Q(e.length)),new Proxy(e,{defineProperty(l,o,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&Ls();var f=n.get(o);return f===void 0?f=a(()=>{var v=Q(u.value);return n.set(o,v),v}):A(f,u.value,!0),!0},deleteProperty(l,o){var u=n.get(o);if(u===void 0){if(o in l){const f=a(()=>Q(se));n.set(o,f),Nt(i)}}else A(u,se),Nt(i);return!0},get(l,o,u){if(o===Jt)return e;var f=n.get(o),v=o in l;if(f===void 0&&(!v||Rt(l,o)?.writable)&&(f=a(()=>{var h=ve(v?l[o]:se),b=Q(h);return b}),n.set(o,f)),f!==void 0){var d=c(f);return d===se?void 0:d}return Reflect.get(l,o,u)},getOwnPropertyDescriptor(l,o){var u=Reflect.getOwnPropertyDescriptor(l,o);if(u&&"value"in u){var f=n.get(o);f&&(u.value=c(f))}else if(u===void 0){var v=n.get(o),d=v?.v;if(v!==void 0&&d!==se)return{enumerable:!0,configurable:!0,value:d,writable:!0}}return u},has(l,o){if(o===Jt)return!0;var u=n.get(o),f=u!==void 0&&u.v!==se||Reflect.has(l,o);if(u!==void 0||q!==null&&(!f||Rt(l,o)?.writable)){u===void 0&&(u=a(()=>{var d=f?ve(l[o]):se,h=Q(d);return h}),n.set(o,u));var v=c(u);if(v===se)return!1}return f},set(l,o,u,f){var v=n.get(o),d=o in l;if(r&&o==="length")for(var h=u;h<v.v;h+=1){var b=n.get(h+"");b!==void 0?A(b,se):h in l&&(b=a(()=>Q(se)),n.set(h+"",b))}if(v===void 0)(!d||Rt(l,o)?.writable)&&(v=a(()=>Q(void 0)),A(v,ve(u)),n.set(o,v));else{d=v.v!==se;var N=a(()=>ve(u));A(v,N)}var p=Reflect.getOwnPropertyDescriptor(l,o);if(p?.set&&p.set.call(f,u),!d){if(r&&typeof o=="string"){var k=n.get("length"),$=Number(o);Number.isInteger($)&&$>=k.v&&A(k,$+1)}Nt(i)}return!0},ownKeys(l){c(i);var o=Reflect.ownKeys(l).filter(v=>{var d=n.get(v);return d===void 0||d.v!==se});for(var[u,f]of n)f.v!==se&&!(u in l)&&o.push(u);return o},setPrototypeOf(){Bs()}})}var Sr,li,ci,ui;function ca(){if(Sr===void 0){Sr=window,li=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;ci=Rt(t,"firstChild").get,ui=Rt(t,"nextSibling").get,br(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),br(n)&&(n.__t=void 0)}}function lt(e=""){return document.createTextNode(e)}function Jn(e){return ci.call(e)}function Ut(e){return ui.call(e)}function _(e,t){return Jn(e)}function Re(e,t=!1){{var n=Jn(e);return n instanceof Comment&&n.data===""?Ut(n):n}}function S(e,t=1,n=!1){let r=e;for(;t--;)r=Ut(r);return r}function ua(e){e.textContent=""}function fi(){return!1}function di(e){var t=R,n=q;_e(null),Be(null);try{return e()}finally{_e(t),Be(n)}}function fa(e){q===null&&(R===null&&Hs(),Ns()),Ot&&Rs()}function da(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function nt(e,t,n){var r=q;r!==null&&(r.f&ye)!==0&&(e|=ye);var i={ctx:Ie,deps:null,nodes_start:null,nodes_end:null,f:e|me|De,first:null,fn:t,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{Lt(i),i.f|=Kn}catch(l){throw pe(i),l}else t!==null&&_t(i);var s=i;if(n&&s.deps===null&&s.teardown===null&&s.nodes_start===null&&s.first===s.last&&(s.f&Dt)===0&&(s=s.first,(e&Je)!==0&&(e&St)!==0&&s!==null&&(s.f|=St)),s!==null&&(s.parent=r,r!==null&&da(s,r),R!==null&&(R.f&ie)!==0&&(e&mt)===0)){var a=R;(a.effects??=[]).push(s)}return i}function Ht(){return R!==null&&!Le}function ha(e){const t=nt(Wn,null,!1);return oe(t,ae),t.teardown=e,t}function rn(e){fa();var t=q.f,n=!R&&(t&et)!==0&&(t&Kn)===0;if(n){var r=Ie;(r.e??=[]).push(e)}else return hi(e)}function hi(e){return nt(Vn|Os,e,!1)}function va(e){Fe.ensure();const t=nt(mt|Dt,e,!0);return(n={})=>new Promise(r=>{n.outro?Et(t,()=>{pe(t),r(void 0)}):(pe(t),r(void 0))})}function _a(e){return nt(Vn,e,!1)}function pa(e){return nt(Yn|Dt,e,!0)}function vi(e,t=0){return nt(Wn|t,e,!0)}function te(e,t=[],n=[],r=[]){na(r,t,n,i=>{nt(Wn,()=>e(...i.map(c)),!0)})}function er(e,t=0){var n=nt(Je|t,e,!0);return n}function Ee(e){return nt(et|Dt,e,!0)}function _i(e){var t=e.teardown;if(t!==null){const n=Ot,r=R;kr(!0),_e(null);try{t.call(null)}finally{kr(n),_e(r)}}}function pi(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const i=n.ac;i!==null&&di(()=>{i.abort(bt)});var r=n.next;(n.f&mt)!==0?n.parent=null:pe(n,t),n=r}}function ma(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&et)===0&&pe(t),t=n}}function pe(e,t=!0){var n=!1;(t||(e.f&Qr)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(ga(e.nodes_start,e.nodes_end),n=!0),pi(e,t&&!n),an(e,0),oe(e,it);var r=e.transitions;if(r!==null)for(const s of r)s.stop();_i(e);var i=e.parent;i!==null&&i.first!==null&&mi(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function ga(e,t){for(;e!==null;){var n=e===t?null:Ut(e);e.remove(),e=n}}function mi(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function Et(e,t,n=!0){var r=[];tr(e,r,!0),gi(r,()=>{n&&pe(e),t&&t()})}function gi(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var i of e)i.out(r)}else t()}function tr(e,t,n){if((e.f&ye)===0){if(e.f^=ye,e.transitions!==null)for(const a of e.transitions)(a.is_global||n)&&t.push(a);for(var r=e.first;r!==null;){var i=r.next,s=(r.f&St)!==0||(r.f&et)!==0&&(e.f&Je)!==0;tr(r,t,s?n:!1),r=i}}}function nr(e){wi(e,!0)}function wi(e,t){if((e.f&ye)!==0){e.f^=ye,(e.f&ae)===0&&(oe(e,me),_t(e));for(var n=e.first;n!==null;){var r=n.next,i=(n.f&St)!==0||(n.f&et)!==0;wi(n,i?t:!1),n=r}if(e.transitions!==null)for(const s of e.transitions)(s.is_global||t)&&s.in()}}function yi(e,t){for(var n=e.nodes_start,r=e.nodes_end;n!==null;){var i=n===r?null:Ut(n);t.append(n),n=i}}let ot=!1;function sn(e){ot=e}let Ot=!1;function kr(e){Ot=e}let R=null,Le=!1;function _e(e){R=e}let q=null;function Be(e){q=e}let Xe=null;function xi(e){R!==null&&(Xe===null?Xe=[e]:Xe.push(e))}let fe=null,ge=0,Te=null;function wa(e){Te=e}let bi=1,Ft=0,ht=Ft;function Ir(e){ht=e}function Ti(){return++bi}function Gt(e){var t=e.f;if((t&me)!==0)return!0;if(t&ie&&(e.f&=~vt),(t&tt)!==0){var n=e.deps;if(n!==null)for(var r=n.length,i=0;i<r;i++){var s=n[i];if(Gt(s)&&si(s),s.wv>e.wv)return!0}(t&De)!==0&&ke===null&&oe(e,ae)}return!1}function Ei(e,t,n=!0){var r=e.reactions;if(r!==null&&!Xe?.includes(e))for(var i=0;i<r.length;i++){var s=r[i];(s.f&ie)!==0?Ei(s,t,!1):t===s&&(n?oe(s,me):(s.f&ae)!==0&&oe(s,tt),_t(s))}}function Si(e){var t=fe,n=ge,r=Te,i=R,s=Xe,a=Ie,l=Le,o=ht,u=e.f;fe=null,ge=0,Te=null,R=(u&(et|mt))===0?e:null,Xe=null,kt(e.ctx),Le=!1,ht=++Ft,e.ac!==null&&(di(()=>{e.ac.abort(bt)}),e.ac=null);try{e.f|=Dn;var f=e.fn,v=f(),d=e.deps;if(fe!==null){var h;if(an(e,ge),d!==null&&ge>0)for(d.length=ge+fe.length,h=0;h<fe.length;h++)d[ge+h]=fe[h];else e.deps=d=fe;if(ot&&Ht()&&(e.f&De)!==0)for(h=ge;h<d.length;h++)(d[h].reactions??=[]).push(e)}else d!==null&&ge<d.length&&(an(e,ge),d.length=ge);if(ei()&&Te!==null&&!Le&&d!==null&&(e.f&(ie|tt|me))===0)for(h=0;h<Te.length;h++)Ei(Te[h],e);return i!==null&&i!==e&&(Ft++,Te!==null&&(r===null?r=Te:r.push(...Te))),(e.f&st)!==0&&(e.f^=st),v}catch(b){return ti(b)}finally{e.f^=Dn,fe=t,ge=n,Te=r,R=i,Xe=s,kt(a),Le=l,ht=o}}function ya(e,t){let n=t.reactions;if(n!==null){var r=Ss.call(n,e);if(r!==-1){var i=n.length-1;i===0?n=t.reactions=null:(n[r]=n[i],n.pop())}}n===null&&(t.f&ie)!==0&&(fe===null||!fe.includes(t))&&(oe(t,tt),(t.f&De)!==0&&(t.f^=De,t.f&=~vt),ii(t),an(t,0))}function an(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)ya(e,n[r])}function Lt(e){var t=e.f;if((t&it)===0){oe(e,ae);var n=q,r=ot;q=e,ot=!0;try{(t&(Je|Ds))!==0?ma(e):pi(e),_i(e);var i=Si(e);e.teardown=typeof i=="function"?i:null,e.wv=bi;var s;Cn&&Gs&&(e.f&me)!==0&&e.deps}finally{ot=r,q=n}}}function c(e){var t=e.f,n=(t&ie)!==0;if(R!==null&&!Le){var r=q!==null&&(q.f&it)!==0;if(!r&&!Xe?.includes(e)){var i=R.deps;if((R.f&Dn)!==0)e.rv<Ft&&(e.rv=Ft,fe===null&&i!==null&&i[ge]===e?ge++:fe===null?fe=[e]:fe.includes(e)||fe.push(e));else{(R.deps??=[]).push(e);var s=e.reactions;s===null?e.reactions=[R]:s.includes(R)||s.push(R)}}}if(Ot){if(at.has(e))return at.get(e);if(n){var a=e,l=a.v;return((a.f&ae)===0&&a.reactions!==null||Ii(a))&&(l=Zn(a)),at.set(a,l),l}}else n&&(!ke?.has(e)||K?.is_fork&&!Ht())&&(a=e,Gt(a)&&si(a),ot&&Ht()&&(a.f&De)===0&&ki(a));if(ke?.has(e))return ke.get(e);if((e.f&st)!==0)throw e.v;return e.v}function ki(e){if(e.deps!==null){e.f^=De;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&ie)!==0&&(t.f&De)===0&&ki(t)}}function Ii(e){if(e.v===se)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(at.has(t)||(t.f&ie)!==0&&Ii(t))return!0;return!1}function Pi(e){var t=Le;try{return Le=!0,e()}finally{Le=t}}const xa=-7169;function oe(e,t){e.f=e.f&xa|t}const Mi=new Set,An=new Set;function vn(e){for(var t=0;t<e.length;t++)Mi.add(e[t]);for(var n of An)n(e)}let Pr=null;function Yt(e){var t=this,n=t.ownerDocument,r=e.type,i=e.composedPath?.()||[],s=i[0]||e.target;Pr=e;var a=0,l=Pr===e&&e.__root;if(l){var o=i.indexOf(l);if(o!==-1&&(t===document||t===window)){e.__root=t;return}var u=i.indexOf(t);if(u===-1)return;o<=u&&(a=o)}if(s=i[a]||e.target,s!==t){ks(e,"currentTarget",{configurable:!0,get(){return s||n}});var f=R,v=q;_e(null),Be(null);try{for(var d,h=[];s!==null;){var b=s.assignedSlot||s.parentNode||s.host||null;try{var N=s["__"+r];N!=null&&(!s.disabled||e.target===s)&&N.call(s,e)}catch(p){d?h.push(p):d=p}if(e.cancelBubble||b===t||b===null)break;s=b}if(d){for(let p of h)queueMicrotask(()=>{throw p});throw d}}finally{e.__root=t,delete e.currentTarget,_e(f),Be(v)}}}function ba(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Ci(e,t){var n=q;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function J(e,t){var n=(t&Ts)!==0,r,i=!e.startsWith("<!>");return()=>{r===void 0&&(r=ba(i?e:"<!>"+e),r=Jn(r));var s=n||li?document.importNode(r,!0):r.cloneNode(!0);return Ci(s,s),s}}function Ne(){var e=document.createDocumentFragment(),t=document.createComment(""),n=lt();return e.append(t,n),Ci(t,n),e}function F(e,t){e!==null&&e.before(t)}const Ta=["touchstart","touchmove"];function Ea(e){return Ta.includes(e)}function L(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function Sa(e,t){return ka(e,t)}const wt=new Map;function ka(e,{target:t,anchor:n,props:r={},events:i,context:s,intro:a=!0}){ca();var l=new Set,o=v=>{for(var d=0;d<v.length;d++){var h=v[d];if(!l.has(h)){l.add(h);var b=Ea(h);t.addEventListener(h,Yt,{passive:b});var N=wt.get(h);N===void 0?(document.addEventListener(h,Yt,{passive:b}),wt.set(h,1)):wt.set(h,N+1)}}};o(Gn(Mi)),An.add(o);var u=void 0,f=va(()=>{var v=n??t.appendChild(lt());return Qs(v,{pending:()=>{}},d=>{if(s){ct({});var h=Ie;h.c=s}i&&(r.$$events=i),u=e(d,r)||{},s&&ut()}),()=>{for(var d of l){t.removeEventListener(d,Yt);var h=wt.get(d);--h===0?(document.removeEventListener(d,Yt),wt.delete(d)):wt.set(d,h)}An.delete(o),v!==n&&v.parentNode?.removeChild(v)}});return Ia.set(u,f),u}let Ia=new WeakMap;class Pa{anchor;#e=new Map;#t=new Map;#r=new Map;#n=new Set;#l=!0;constructor(t,n=!0){this.anchor=t,this.#l=n}#s=()=>{var t=K;if(this.#e.has(t)){var n=this.#e.get(t),r=this.#t.get(n);if(r)nr(r),this.#n.delete(n);else{var i=this.#r.get(n);i&&(this.#t.set(n,i.effect),this.#r.delete(n),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),r=i.effect)}for(const[s,a]of this.#e){if(this.#e.delete(s),s===t)break;const l=this.#r.get(a);l&&(pe(l.effect),this.#r.delete(a))}for(const[s,a]of this.#t){if(s===n||this.#n.has(s))continue;const l=()=>{if(Array.from(this.#e.values()).includes(s)){var u=document.createDocumentFragment();yi(a,u),u.append(lt()),this.#r.set(s,{effect:a,fragment:u})}else pe(a);this.#n.delete(s),this.#t.delete(s)};this.#l||!r?(this.#n.add(s),Et(a,l,!1)):l()}}};#i=t=>{this.#e.delete(t);const n=Array.from(this.#e.values());for(const[r,i]of this.#r)n.includes(r)||(pe(i.effect),this.#r.delete(r))};ensure(t,n){var r=K,i=fi();if(n&&!this.#t.has(t)&&!this.#r.has(t))if(i){var s=document.createDocumentFragment(),a=lt();s.append(a),this.#r.set(t,{effect:Ee(()=>n(a)),fragment:s})}else this.#t.set(t,Ee(()=>n(this.anchor)));if(this.#e.set(r,t),i){for(const[l,o]of this.#t)l===t?r.skipped_effects.delete(o):r.skipped_effects.add(o);for(const[l,o]of this.#r)l===t?r.skipped_effects.delete(o.effect):r.skipped_effects.add(o.effect);r.oncommit(this.#s),r.ondiscard(this.#i)}else this.#s()}}function ne(e,t,n=!1){var r=new Pa(e),i=n?St:0;function s(a,l){r.ensure(a,l)}er(()=>{var a=!1;t((l,o=!0)=>{a=!0,s(o,l)}),a||s(!1,null)},i)}const Mr=[...` 	
\r\fÂ \v\uFEFF`];function Ma(e,t,n){var r=e==null?"":""+e;if(n){for(var i in n)if(n[i])r=r?r+" "+i:i;else if(r.length)for(var s=i.length,a=0;(a=r.indexOf(i,a))>=0;){var l=a+s;(a===0||Mr.includes(r[a-1]))&&(l===r.length||Mr.includes(r[l]))?r=(a===0?"":r.substring(0,a))+r.substring(l+1):a=l}}return r===""?null:r}function Ca(e,t){return e==null?null:String(e)}function He(e,t,n,r,i,s){var a=e.__className;if(a!==n||a===void 0){var l=Ma(n,r,s);l==null?e.removeAttribute("class"):e.className=l,e.__className=n}else if(s&&i!==s)for(var o in s){var u=!!s[o];(i==null||u!==!!i[o])&&e.classList.toggle(o,u)}return s}function dt(e,t,n,r){var i=e.__style;if(i!==t){var s=Ca(t);s==null?e.removeAttribute("style"):e.style.cssText=s,e.__style=t}return r}const Da=Symbol("is custom element"),Oa=Symbol("is html");function O(e,t,n,r){var i=za(e);i[t]!==(i[t]=n)&&(t==="loading"&&(e[zs]=n),n==null?e.removeAttribute(t):typeof n!="string"&&Aa(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function za(e){return e.__attributes??={[Da]:e.nodeName.includes("-"),[Oa]:e.namespaceURI===Es}}var Cr=new Map;function Aa(e){var t=e.getAttribute("is")||e.nodeName,n=Cr.get(t);if(n)return n;Cr.set(t,n=[]);for(var r,i=e,s=Element.prototype;s!==i;){r=Is(i);for(var a in r)r[a].set&&n.push(a);i=Yr(i)}return n}function Dr(e,t){return e===t||e?.[Jt]===t}function Ra(e={},t,n,r){return _a(()=>{var i,s;return vi(()=>{i=s,s=[],Pi(()=>{e!==n(...s)&&(t(e,...s),i&&Dr(n(...i),e)&&t(null,...i))})}),()=>{$t(()=>{s&&Dr(n(...s),e)&&t(null,...s)})}}),e}function re(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Na=typeof Symbol=="function"&&Symbol.observable||"@@observable",Or=Na,In=()=>Math.random().toString(36).substring(7).split("").join("."),Ha={INIT:`@@redux/INIT${In()}`,REPLACE:`@@redux/REPLACE${In()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${In()}`},on=Ha;function rr(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Di(e,t,n){if(typeof e!="function")throw new Error(re(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(re(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(re(1));return n(Di)(e,t)}let r=e,i=t,s=new Map,a=s,l=0,o=!1;function u(){a===s&&(a=new Map,s.forEach((p,k)=>{a.set(k,p)}))}function f(){if(o)throw new Error(re(3));return i}function v(p){if(typeof p!="function")throw new Error(re(4));if(o)throw new Error(re(5));let k=!0;u();const $=l++;return a.set($,p),function(){if(k){if(o)throw new Error(re(6));k=!1,u(),a.delete($),s=null}}}function d(p){if(!rr(p))throw new Error(re(7));if(typeof p.type>"u")throw new Error(re(8));if(typeof p.type!="string")throw new Error(re(17));if(o)throw new Error(re(9));try{o=!0,i=r(i,p)}finally{o=!1}return(s=a).forEach($=>{$()}),p}function h(p){if(typeof p!="function")throw new Error(re(10));r=p,d({type:on.REPLACE})}function b(){const p=v;return{subscribe(k){if(typeof k!="object"||k===null)throw new Error(re(11));function $(){const T=k;T.next&&T.next(f())}return $(),{unsubscribe:p($)}},[Or](){return this}}}return d({type:on.INIT}),{dispatch:d,subscribe:v,getState:f,replaceReducer:h,[Or]:b}}function Fa(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:on.INIT})>"u")throw new Error(re(12));if(typeof n(void 0,{type:on.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(re(13))})}function La(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const a=t[s];typeof e[a]=="function"&&(n[a]=e[a])}const r=Object.keys(n);let i;try{Fa(n)}catch(s){i=s}return function(a={},l){if(i)throw i;let o=!1;const u={};for(let f=0;f<r.length;f++){const v=r[f],d=n[v],h=a[v],b=d(h,l);if(typeof b>"u")throw l&&l.type,new Error(re(14));u[v]=b,o=o||b!==h}return o=o||r.length!==Object.keys(a).length,o?u:a}}function ln(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function Ba(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(re(15))};const a={getState:i.getState,dispatch:(o,...u)=>s(o,...u)},l=e.map(o=>o(a));return s=ln(...l)(i.dispatch),{...i,dispatch:s}}}function ja(e){return rr(e)&&"type"in e&&typeof e.type=="string"}var Oi=Symbol.for("immer-nothing"),zr=Symbol.for("immer-draftable"),de=Symbol.for("immer-state");function Ce(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var we=Object,Mt=we.getPrototypeOf,cn="constructor",_n="prototype",Rn="configurable",un="enumerable",en="writable",Bt="value",Ze=e=>!!e&&!!e[de];function je(e){return e?zi(e)||pn(e)||!!e[zr]||!!e[cn]?.[zr]||mn(e)||gn(e):!1}var qa=we[_n][cn].toString(),Ar=new WeakMap;function zi(e){if(!e||!ir(e))return!1;const t=Mt(e);if(t===null||t===we[_n])return!0;const n=we.hasOwnProperty.call(t,cn)&&t[cn];if(n===Object)return!0;if(!xt(n))return!1;let r=Ar.get(n);return r===void 0&&(r=Function.toString.call(n),Ar.set(n,r)),r===qa}function Vt(e,t,n=!0){Wt(e)===0?(n?Reflect.ownKeys(e):we.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((r,i)=>t(i,r,e))}function Wt(e){const t=e[de];return t?t.type_:pn(e)?1:mn(e)?2:gn(e)?3:0}var Rr=(e,t,n=Wt(e))=>n===2?e.has(t):we[_n].hasOwnProperty.call(e,t),Nn=(e,t,n=Wt(e))=>n===2?e.get(t):e[t],fn=(e,t,n,r=Wt(e))=>{r===2?e.set(t,n):r===3?e.add(n):e[t]=n};function $a(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var pn=Array.isArray,mn=e=>e instanceof Map,gn=e=>e instanceof Set,ir=e=>typeof e=="object",xt=e=>typeof e=="function",Pn=e=>typeof e=="boolean",Ke=e=>e.copy_||e.base_,sr=e=>e.modified_?e.copy_:e.base_;function Hn(e,t){if(mn(e))return new Map(e);if(gn(e))return new Set(e);if(pn(e))return Array[_n].slice.call(e);const n=zi(e);if(t===!0||t==="class_only"&&!n){const r=we.getOwnPropertyDescriptors(e);delete r[de];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const a=i[s],l=r[a];l[en]===!1&&(l[en]=!0,l[Rn]=!0),(l.get||l.set)&&(r[a]={[Rn]:!0,[en]:!0,[un]:l[un],[Bt]:e[a]})}return we.create(Mt(e),r)}else{const r=Mt(e);if(r!==null&&n)return{...e};const i=we.create(r);return we.assign(i,e)}}function ar(e,t=!1){return wn(e)||Ze(e)||(Wt(e)>1&&we.defineProperties(e,{set:Xt,add:Xt,clear:Xt,delete:Xt}),we.freeze(e),t&&Vt(e,(n,r)=>{ar(r,!0)},!1)),e}function Ua(){Ce(2)}var Xt={[Bt]:Ua};function wn(e){return e===null||!ir(e)?!0:we.isFrozen(e)}var dn="MapSet",Fn="Patches",Ai={};function Ct(e){const t=Ai[e];return t||Ce(0,e),t}var Ga=e=>!!Ai[e],jt,Ri=()=>jt,Va=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:Ga(dn)?Ct(dn):void 0});function Nr(e,t){t&&(e.patchPlugin_=Ct(Fn),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Ln(e){Bn(e),e.drafts_.forEach(Wa),e.drafts_=null}function Bn(e){e===jt&&(jt=e.parent_)}var Hr=e=>jt=Va(jt,e);function Wa(e){const t=e[de];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Fr(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];if(e!==void 0&&e!==n){n[de].modified_&&(Ln(t),Ce(4)),je(e)&&(e=Lr(t,e));const{patchPlugin_:i}=t;i&&i.generateReplacementPatches_(n[de].base_,e,t)}else e=Lr(t,n);return Ka(t,e,!0),Ln(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Oi?e:void 0}function Lr(e,t){if(wn(t))return t;const n=t[de];if(!n)return or(t,e.handledSet_,e);if(!yn(n,e))return t;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(e);Fi(n,e)}return n.copy_}function Ka(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&ar(t,n)}function Ni(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var yn=(e,t)=>e.scope_===t,Ya=[];function Hi(e,t,n,r){const i=Ke(e),s=e.type_;if(r!==void 0&&Nn(i,r,s)===t){fn(i,r,n,s);return}if(!e.draftLocations_){const l=e.draftLocations_=new Map;Vt(i,(o,u)=>{if(Ze(u)){const f=l.get(u)||[];f.push(o),l.set(u,f)}})}const a=e.draftLocations_.get(t)??Ya;for(const l of a)fn(i,l,n,s)}function Xa(e,t,n){e.callbacks_.push(function(i){const s=t;if(!s||!yn(s,i))return;i.mapSetPlugin_?.fixSetContents(s);const a=sr(s);Hi(e,s.draft_??s,a,n),Fi(s,i)})}function Fi(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||(e.assigned_?.size??0)>0)){const{patchPlugin_:r}=t;if(r){const i=r.getPath(e);i&&r.generatePatches_(e,i,t)}Ni(e)}}function Qa(e,t,n){const{scope_:r}=e;if(Ze(n)){const i=n[de];yn(i,r)&&i.callbacks_.push(function(){tn(e);const a=sr(i);Hi(e,n,a,t)})}else je(n)&&e.callbacks_.push(function(){const s=Ke(e);Nn(s,t,e.type_)===n&&r.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&or(Nn(e.copy_,t,e.type_),r.handledSet_,r)})}function or(e,t,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||Ze(e)||t.has(e)||!je(e)||wn(e)||(t.add(e),Vt(e,(r,i)=>{if(Ze(i)){const s=i[de];if(yn(s,n)){const a=sr(s);fn(e,r,a,e.type_),Ni(s)}}else je(i)&&or(i,t,n)})),e}function Za(e,t){const n=pn(e),r={type_:n?1:0,scope_:t?t.scope_:Ri(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=r,s=lr;n&&(i=[r],s=qt);const{revoke:a,proxy:l}=Proxy.revocable(i,s);return r.draft_=l,r.revoke_=a,[l,r]}var lr={get(e,t){if(t===de)return e;const n=Ke(e);if(!Rr(n,t,e.type_))return Ja(e,n,t);const r=n[t];if(e.finalized_||!je(r))return r;if(r===Mn(e.base_,t)){tn(e);const i=e.type_===1?+t:t,s=qn(e.scope_,r,e,i);return e.copy_[i]=s}return r},has(e,t){return t in Ke(e)},ownKeys(e){return Reflect.ownKeys(Ke(e))},set(e,t,n){const r=Li(Ke(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=Mn(Ke(e),t),s=i?.[de];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_.set(t,!1),!0;if($a(n,i)&&(n!==void 0||Rr(e.base_,t,e.type_)))return!0;tn(e),jn(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_.set(t,!0),Qa(e,t,n)),!0},deleteProperty(e,t){return tn(e),Mn(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),jn(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Ke(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{[en]:!0,[Rn]:e.type_!==1||t!=="length",[un]:r[un],[Bt]:n[t]}},defineProperty(){Ce(11)},getPrototypeOf(e){return Mt(e.base_)},setPrototypeOf(){Ce(12)}},qt={};Vt(lr,(e,t)=>{qt[e]=function(){const n=arguments;return n[0]=n[0][0],t.apply(this,n)}});qt.deleteProperty=function(e,t){return qt.set.call(this,e,t,void 0)};qt.set=function(e,t,n){return lr.set.call(this,e[0],t,n,e[0])};function Mn(e,t){const n=e[de];return(n?Ke(n):e)[t]}function Ja(e,t,n){const r=Li(t,n);return r?Bt in r?r[Bt]:r.get?.call(e.draft_):void 0}function Li(e,t){if(!(t in e))return;let n=Mt(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Mt(n)}}function jn(e){e.modified_||(e.modified_=!0,e.parent_&&jn(e.parent_))}function tn(e){e.copy_||(e.assigned_=new Map,e.copy_=Hn(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var eo=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(t,n,r)=>{if(xt(t)&&!xt(n)){const s=n;n=t;const a=this;return function(o=s,...u){return a.produce(o,f=>n.call(this,f,...u))}}xt(n)||Ce(6),r!==void 0&&!xt(r)&&Ce(7);let i;if(je(t)){const s=Hr(this),a=qn(s,t,void 0);let l=!0;try{i=n(a),l=!1}finally{l?Ln(s):Bn(s)}return Nr(s,r),Fr(i,s)}else if(!t||!ir(t)){if(i=n(t),i===void 0&&(i=t),i===Oi&&(i=void 0),this.autoFreeze_&&ar(i,!0),r){const s=[],a=[];Ct(Fn).generateReplacementPatches_(t,i,{patches_:s,inversePatches_:a}),r(s,a)}return i}else Ce(1,t)},this.produceWithPatches=(t,n)=>{if(xt(t))return(a,...l)=>this.produceWithPatches(a,o=>t(o,...l));let r,i;return[this.produce(t,n,(a,l)=>{r=a,i=l}),r,i]},Pn(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),Pn(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),Pn(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){je(e)||Ce(8),Ze(e)&&(e=to(e));const t=Hr(this),n=qn(t,e,void 0);return n[de].isManual_=!0,Bn(t),n}finishDraft(e,t){const n=e&&e[de];(!n||!n.isManual_)&&Ce(9);const{scope_:r}=n;return Nr(r,t),Fr(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=Ct(Fn).applyPatches_;return Ze(e)?r(e,t):this.produce(e,i=>r(i,t))}};function qn(e,t,n,r){const[i,s]=mn(t)?Ct(dn).proxyMap_(t,n):gn(t)?Ct(dn).proxySet_(t,n):Za(t,n);return(n?.scope_??Ri()).drafts_.push(i),s.callbacks_=n?.callbacks_??[],s.key_=r,n&&r!==void 0?Xa(n,s,r):s.callbacks_.push(function(o){o.mapSetPlugin_?.fixSetContents(s);const{patchPlugin_:u}=o;s.modified_&&u&&u.generatePatches_(s,[],o)}),i}function to(e){return Ze(e)||Ce(10,e),Bi(e)}function Bi(e){if(!je(e)||wn(e))return e;const t=e[de];let n,r=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Hn(e,t.scope_.immer_.useStrictShallowCopy_),r=t.scope_.immer_.shouldUseStrictIteration()}else n=Hn(e,!0);return Vt(n,(i,s)=>{fn(n,i,Bi(s))},r),t&&(t.finalized_=!1),n}var no=new eo,ji=no.produce;function qi(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var ro=qi(),io=qi,so=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?ln:ln.apply(null,arguments)};function Br(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(Qe(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>ja(r)&&r.type===e,n}var $i=class zt extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,zt.prototype)}static get[Symbol.species](){return zt}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new zt(...t[0].concat(this)):new zt(...t.concat(this))}};function jr(e){return je(e)?ji(e,()=>{}):e}function Qt(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function ao(e){return typeof e=="boolean"}var oo=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let a=new $i;return n&&(ao(n)?a.push(ro):a.push(io(n.extraArgument))),a},lo="RTK_autoBatch",qr=e=>t=>{setTimeout(t,e)},co=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,a=!1;const l=new Set,o=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:qr(10):e.type==="callback"?e.queueNotification:qr(e.timeout),u=()=>{a=!1,s&&(s=!1,l.forEach(f=>f()))};return Object.assign({},r,{subscribe(f){const v=()=>i&&f(),d=r.subscribe(v);return l.add(f),()=>{d(),l.delete(f)}},dispatch(f){try{return i=!f?.meta?.[lo],s=!i,s&&(a||(a=!0,o(u))),r.dispatch(f)}finally{i=!0}}})},uo=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new $i(e);return r&&i.push(co(typeof r=="object"?r:void 0)),i};function fo(e){const t=oo(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:a=void 0}=e||{};let l;if(typeof n=="function")l=n;else if(rr(n))l=La(n);else throw new Error(Qe(1));let o;typeof r=="function"?o=r(t):o=t();let u=ln;i&&(u=so({trace:!1,...typeof i=="object"&&i}));const f=Ba(...o),v=uo(f);let d=typeof a=="function"?a(v):v();const h=u(...d);return Di(l,s,h)}function Ui(e){const t={},n=[];let r;const i={addCase(s,a){const l=typeof s=="string"?s:s.type;if(!l)throw new Error(Qe(28));if(l in t)throw new Error(Qe(29));return t[l]=a,i},addAsyncThunk(s,a){return a.pending&&(t[s.pending.type]=a.pending),a.rejected&&(t[s.rejected.type]=a.rejected),a.fulfilled&&(t[s.fulfilled.type]=a.fulfilled),a.settled&&n.push({matcher:s.settled,reducer:a.settled}),i},addMatcher(s,a){return n.push({matcher:s,reducer:a}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function ho(e){return typeof e=="function"}function vo(e,t){let[n,r,i]=Ui(t),s;if(ho(e))s=()=>jr(e());else{const l=jr(e);s=()=>l}function a(l=s(),o){let u=[n[o.type],...r.filter(({matcher:f})=>f(o)).map(({reducer:f})=>f)];return u.filter(f=>!!f).length===0&&(u=[i]),u.reduce((f,v)=>{if(v)if(Ze(f)){const h=v(f,o);return h===void 0?f:h}else{if(je(f))return ji(f,d=>v(d,o));{const d=v(f,o);if(d===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return d}}return f},l)}return a.getInitialState=s,a}var _o=Symbol.for("rtk-slice-createasyncthunk");function po(e,t){return`${e}/${t}`}function mo({creators:e}={}){const t=e?.asyncThunk?.[_o];return function(r){const{name:i,reducerPath:s=i}=r;if(!i)throw new Error(Qe(11));const a=(typeof r.reducers=="function"?r.reducers(wo()):r.reducers)||{},l=Object.keys(a),o={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(I,T){const P=typeof I=="string"?I:I.type;if(!P)throw new Error(Qe(12));if(P in o.sliceCaseReducersByType)throw new Error(Qe(13));return o.sliceCaseReducersByType[P]=T,u},addMatcher(I,T){return o.sliceMatchers.push({matcher:I,reducer:T}),u},exposeAction(I,T){return o.actionCreators[I]=T,u},exposeCaseReducer(I,T){return o.sliceCaseReducersByName[I]=T,u}};l.forEach(I=>{const T=a[I],P={reducerName:I,type:po(i,I),createNotation:typeof r.reducers=="function"};xo(T)?To(P,T,u,t):yo(P,T,u)});function f(){const[I={},T=[],P=void 0]=typeof r.extraReducers=="function"?Ui(r.extraReducers):[r.extraReducers],U={...I,...o.sliceCaseReducersByType};return vo(r.initialState,B=>{for(let C in U)B.addCase(C,U[C]);for(let C of o.sliceMatchers)B.addMatcher(C.matcher,C.reducer);for(let C of T)B.addMatcher(C.matcher,C.reducer);P&&B.addDefaultCase(P)})}const v=I=>I,d=new Map,h=new WeakMap;let b;function N(I,T){return b||(b=f()),b(I,T)}function p(){return b||(b=f()),b.getInitialState()}function k(I,T=!1){function P(B){let C=B[I];return typeof C>"u"&&T&&(C=Qt(h,P,p)),C}function U(B=v){const C=Qt(d,T,()=>new WeakMap);return Qt(C,B,()=>{const E={};for(const[y,x]of Object.entries(r.selectors??{}))E[y]=go(x,B,()=>Qt(h,B,p),T);return E})}return{reducerPath:I,getSelectors:U,get selectors(){return U(P)},selectSlice:P}}const $={name:i,reducer:N,actions:o.actionCreators,caseReducers:o.sliceCaseReducersByName,getInitialState:p,...k(s),injectInto(I,{reducerPath:T,...P}={}){const U=T??s;return I.inject({reducerPath:U,reducer:N},P),{...$,...k(U,!0)}}};return $}}function go(e,t,n,r){function i(s,...a){let l=t(s);return typeof l>"u"&&r&&(l=n()),e(l,...a)}return i.unwrapped=e,i}var Gi=mo();function wo(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function yo({type:e,reducerName:t,createNotation:n},r,i){let s,a;if("reducer"in r){if(n&&!bo(r))throw new Error(Qe(17));s=r.reducer,a=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,a?Br(e,a):Br(e))}function xo(e){return e._reducerDefinitionType==="asyncThunk"}function bo(e){return e._reducerDefinitionType==="reducerWithPrepare"}function To({type:e,reducerName:t},n,r,i){if(!i)throw new Error(Qe(18));const{payloadCreator:s,fulfilled:a,pending:l,rejected:o,settled:u,options:f}=n,v=i(e,s,f);r.exposeAction(t,v),a&&r.addCase(v.fulfilled,a),l&&r.addCase(v.pending,l),o&&r.addCase(v.rejected,o),u&&r.addMatcher(v.settled,u),r.exposeCaseReducer(t,{fulfilled:a||Zt,pending:l||Zt,rejected:o||Zt,settled:u||Zt})}function Zt(){}function Qe(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}const cr=[{id:"kobold",name:"Kobold Dragonshield",ac:14,hp:1,maxHp:1,xp:1,imagePath:"assets/Monster_KoboldDragonshield.png"},{id:"snake",name:"Snake",ac:12,hp:1,maxHp:1,xp:1,imagePath:"assets/Monster_Snake.png"},{id:"cultist",name:"Cultist",ac:13,hp:2,maxHp:2,xp:1,imagePath:"assets/Monster_Cultist.png"}],Eo=["kobold","kobold","kobold","snake","snake","snake","cultist","cultist","cultist"],So=[{id:"quinn",name:"Quinn",heroClass:"Cleric",imagePath:"assets/Hero_Cleric_Quinn.png",speed:5},{id:"vistra",name:"Vistra",heroClass:"Fighter",imagePath:"assets/Hero_Fighter_Vistra.png",speed:5},{id:"keyleth",name:"Keyleth",heroClass:"Paladin",imagePath:"assets/Hero_Paladin_Keyleth.png",speed:6},{id:"tarak",name:"Tarak",heroClass:"Rogue",imagePath:"assets/Hero_Rogue_Tarak.png",speed:6},{id:"haskan",name:"Haskan",heroClass:"Wizard",imagePath:"assets/Hero_Wizard_Haskan.png",speed:6}],ko=[{x:1,y:2},{x:2,y:2},{x:3,y:2},{x:3,y:3},{x:3,y:4},{x:1,y:5},{x:2,y:5},{x:3,y:5}],Vi=[{tileType:"tile-2exit-a",imagePath:"assets/Tile_Black_x2_01.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-2exit-b",imagePath:"assets/Tile_Black_x2_02.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-2exit-c",imagePath:"assets/Tile_Black_x2_03.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-3exit-a",imagePath:"assets/Tile_Black_x3_01.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-3exit-b",imagePath:"assets/Tile_Black_x3_02.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-3exit-c",imagePath:"assets/Tile_Black_x3_03.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-4exit-a",imagePath:"assets/Tile_Black_x4_01.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}},{tileType:"tile-4exit-b",imagePath:"assets/Tile_Black_x4_02.png",defaultEdges:{north:"wall",south:"wall",east:"wall",west:"wall"}}],Io=["tile-2exit-a","tile-2exit-b","tile-2exit-c","tile-3exit-a","tile-3exit-b","tile-3exit-c","tile-4exit-a","tile-4exit-b"],Po={id:"start-tile",tileType:"start",position:{col:0,row:0},rotation:0,edges:{north:"unexplored",south:"unexplored",east:"unexplored",west:"unexplored"}},Mo={availableHeroes:So,selectedHeroes:[],heroEdgeMap:{}},Wi=Gi({name:"heroes",initialState:Mo,reducers:{toggleHeroSelection:(e,t)=>{const n=t.payload,r=e.selectedHeroes.findIndex(i=>i.id===n);if(r>=0)e.selectedHeroes.splice(r,1),delete e.heroEdgeMap[n];else if(e.selectedHeroes.length<5){const i=e.availableHeroes.find(s=>s.id===n);i&&e.selectedHeroes.push(i)}},selectHeroFromEdge:(e,t)=>{const{heroId:n,edge:r}=t.payload,i=e.selectedHeroes.findIndex(s=>s.id===n);if(i>=0)e.heroEdgeMap[n]===r&&(e.selectedHeroes.splice(i,1),delete e.heroEdgeMap[n]);else if(e.selectedHeroes.length<5){const s=e.availableHeroes.find(a=>a.id===n);s&&(e.selectedHeroes.push(s),e.heroEdgeMap[n]=r)}},clearSelection:e=>{e.selectedHeroes=[],e.heroEdgeMap={}}}}),{toggleHeroSelection:Wl,selectHeroFromEdge:Co,clearSelection:Kl}=Wi.actions,Do=Wi.reducer,At={minX:1,maxX:3,minY:0,maxY:7,staircase:[{x:1,y:3},{x:2,y:3},{x:1,y:4},{x:2,y:4}]},yt=4,Oo=4,zo=8;function Ao(e){const{col:t,row:n}=e.position;if(e.tileType==="start")return{minX:0,maxX:3,minY:0,maxY:7};let r,i;return t>0?r=Oo+(t-1)*yt:t<0?r=t*yt:r=0,n>0?i=zo+(n-1)*yt:n<0?i=n*yt:i=0,{minX:r,maxX:r+yt-1,minY:i,maxY:i+yt-1}}function $r(e,t){for(const n of t.tiles){const r=Ao(n);if(e.x>=r.minX&&e.x<=r.maxX&&e.y>=r.minY&&e.y<=r.maxY)return n}return null}function Ro(e){return e.x>=At.minX&&e.x<=At.maxX&&e.y>=At.minY&&e.y<=At.maxY}function Ki(e){return At.staircase.some(t=>t.x===e.x&&t.y===e.y)}function No(e,t){return Ro(e)&&!Ki(e)}function Ho(e,t,n){return t.some(r=>r.position.x===e.x&&r.position.y===e.y&&r.heroId!==n)}function Fo(e,t,n,r){const i=r.x-n.x,s=r.y-n.y;if(i!==0&&s!==0)return!1;let a,l;return s<0?(a="north",l="south"):s>0?(a="south",l="north"):i>0?(a="east",l="west"):(a="west",l="east"),!(e.edges[a]!=="open"||t.edges[l]!=="open")}function Lo(e,t){const n=[],r=[{dx:0,dy:-1,cardinal:!0},{dx:0,dy:1,cardinal:!0},{dx:-1,dy:0,cardinal:!0},{dx:1,dy:0,cardinal:!0},{dx:-1,dy:-1,cardinal:!1},{dx:1,dy:-1,cardinal:!1},{dx:-1,dy:1,cardinal:!1},{dx:1,dy:1,cardinal:!1}];if(!t){for(const s of r){const a={x:e.x+s.dx,y:e.y+s.dy};No(a)&&n.push(a)}return n}const i=$r(e,t);if(!i)return n;for(const s of r){const a={x:e.x+s.dx,y:e.y+s.dy},l=$r(a,t);if(l&&!(l.tileType==="start"&&(Ki(a)||a.x<1))){if(i.id===l.id){n.push(a);continue}s.cardinal&&Fo(i,l,e,a)&&n.push(a)}}return n}function Bo(e,t,n,r,i){const s=[],a=new Set,l=[{pos:e,distance:0}];for(a.add(`${e.x},${e.y}`);l.length>0;){const o=l.shift();if(!o)break;if(o.distance>0&&!Ho(o.pos,n,r)&&s.push(o.pos),o.distance<t){const u=Lo(o.pos,i);for(const f of u){const v=`${f.x},${f.y}`;a.has(v)||(a.add(v),l.push({pos:f,distance:o.distance+1}))}}}return s}function jo(e,t){return t.some(n=>n.x===e.x&&n.y===e.y)}const qo={north:[{x:1,y:0},{x:2,y:0},{x:3,y:0}],south:[{x:1,y:7},{x:2,y:7},{x:3,y:7}],east:[{x:3,y:0},{x:3,y:1},{x:3,y:2},{x:3,y:5},{x:3,y:6},{x:3,y:7}],west:[{x:1,y:0},{x:1,y:1},{x:1,y:2},{x:1,y:5},{x:1,y:6},{x:1,y:7}]};function $o(e,t){return qo[t].some(r=>r.x===e.x&&r.y===e.y)}function Yi(e){return{north:"south",south:"north",east:"west",west:"east"}[e]}function Uo(e,t){const n=t.tiles.find(r=>r.id==="start-tile");if(!n)return null;for(const r of t.unexploredEdges)if(r.tileId===n.id&&$o(e.position,r.direction))return r;return null}function Go(e,t){const{col:n,row:r}=e.position;switch(t){case"north":return{col:n,row:r-1};case"south":return{col:n,row:r+1};case"east":return{col:n+1,row:r};case"west":return{col:n-1,row:r}}}function Vo(e){return 0}function Wo(e){return Vi.find(t=>t.tileType===e)}function Ko(e,t,n){const r=n.tiles.find(f=>f.id===e.tileId);if(!r)return null;const i=Go(r,e.direction),s=Vo(e.direction);if(!Wo(t))return null;const l=`tile-${n.tiles.length}`,u={north:"unexplored",south:"unexplored",east:"unexplored",west:"unexplored",[Yi(e.direction)]:"open"};return{id:l,tileType:t,position:i,rotation:s,edges:u}}function $n(){return{tiles:[{...Po}],unexploredEdges:[{tileId:"start-tile",direction:"north"},{tileId:"start-tile",direction:"south"},{tileId:"start-tile",direction:"east"},{tileId:"start-tile",direction:"west"}],tileDeck:[]}}function Yo(e,t=Math.random){const n=[...e];for(let r=n.length-1;r>0;r--){const i=Math.floor(t()*(r+1));[n[r],n[i]]=[n[i],n[r]]}return n}function Xo(e,t=Math.random){return Yo(e,t)}function Qo(e){if(e.length===0)return{drawnTile:null,remainingDeck:[]};const[t,...n]=e;return{drawnTile:t,remainingDeck:n}}function Zo(e,t,n){const r=e.unexploredEdges.filter(o=>!(o.tileId===t.tileId&&o.direction===t.direction)),i=Yi(t.direction),a=["north","south","east","west"].filter(o=>o!==i&&n.edges[o]==="unexplored").map(o=>({tileId:n.id,direction:o}));return{tiles:[...e.tiles.map(o=>o.id===t.tileId?{...o,edges:{...o.edges,[t.direction]:"open"}}:o),n],unexploredEdges:[...r,...a],tileDeck:e.tileDeck}}function Xi(e,t=Math.random){const n=[...e];for(let r=n.length-1;r>0;r--){const i=Math.floor(t()*(r+1));[n[r],n[i]]=[n[i],n[r]]}return n}function Jo(e=Math.random){return{drawPile:Xi([...Eo],e),discardPile:[]}}function el(e,t=Math.random){if(e.drawPile.length===0){if(e.discardPile.length===0)return{monster:null,deck:e};const i=Xi(e.discardPile,t);return{monster:i[0],deck:{drawPile:i.slice(1),discardPile:[]}}}const[n,...r]=e.drawPile;return{monster:n,deck:{drawPile:r,discardPile:e.discardPile}}}function tl(e){return cr.find(t=>t.id===e)}function nl(e,t,n,r,i){const s=tl(e);return s?{monsterId:e,instanceId:`${e}-${i}`,position:t,currentHp:s.hp,controllerId:n,tileId:r}:null}const rl=4,Ur=Math.floor(rl/2);function il(){return{x:Ur,y:Ur}}const Un={currentHeroIndex:0,currentPhase:"hero-phase",turnNumber:1},sl={currentScreen:"character-select",heroTokens:[],turnState:{...Un},validMoveSquares:[],showingMovement:!1,dungeon:$n(),monsterDeck:{drawPile:[],discardPile:[]},monsters:[],monsterInstanceCounter:0,recentlySpawnedMonsterId:null};function al(e){let t=e;return()=>(t=t*1103515245+12345&2147483647,t/2147483647)}function ol(e,t=Math.random){const n=[...e];for(let r=n.length-1;r>0;r--){const i=Math.floor(t()*(r+1));[n[r],n[i]]=[n[i],n[r]]}return n}const Qi=Gi({name:"game",initialState:sl,reducers:{startGame:(e,t)=>{const{heroIds:n,positions:r,seed:i}=t.payload;if(n.length===0||n.length>5)return;const s=i??Date.now();e.randomSeed=s;let a;const l=al(s);r?a=r:a=ol(ko,l).slice(0,5),e.heroTokens=n.map((u,f)=>({heroId:u,position:a[f]})),e.turnState={...Un},e.validMoveSquares=[],e.showingMovement=!1;const o=$n();o.tileDeck=Xo([...Io],l),e.dungeon=o,e.monsterDeck=Jo(l),e.monsters=[],e.monsterInstanceCounter=0,e.recentlySpawnedMonsterId=null,e.currentScreen="game-board"},setHeroPosition:(e,t)=>{const n=e.heroTokens.find(r=>r.heroId===t.payload.heroId);n&&(n.position=t.payload.position)},showMovement:(e,t)=>{const{heroId:n,speed:r}=t.payload,i=e.heroTokens.find(s=>s.heroId===n);i&&(e.validMoveSquares=Bo(i.position,r,e.heroTokens,n,e.dungeon),e.showingMovement=!0)},hideMovement:e=>{e.validMoveSquares=[],e.showingMovement=!1},moveHero:(e,t)=>{const{heroId:n,position:r}=t.payload;if(!jo(r,e.validMoveSquares))return;const i=e.heroTokens.find(s=>s.heroId===n);i&&(i.position=r,e.validMoveSquares=[],e.showingMovement=!1)},resetGame:e=>{e.currentScreen="character-select",e.heroTokens=[],e.turnState={...Un},e.randomSeed=void 0,e.validMoveSquares=[],e.showingMovement=!1,e.dungeon=$n(),e.monsterDeck={drawPile:[],discardPile:[]},e.monsters=[],e.monsterInstanceCounter=0,e.recentlySpawnedMonsterId=null},endHeroPhase:e=>{if(e.turnState.currentPhase!=="hero-phase")return;e.recentlySpawnedMonsterId=null;const t=e.heroTokens[e.turnState.currentHeroIndex];if(!t)return;const n=Uo(t,e.dungeon);if(n&&e.dungeon.tileDeck.length>0){const{drawnTile:r,remainingDeck:i}=Qo(e.dungeon.tileDeck);if(r){const s=Ko(n,r,e.dungeon);if(s){e.dungeon=Zo(e.dungeon,n,s),e.dungeon.tileDeck=i;const{monster:a,deck:l}=el(e.monsterDeck);if(a){const o=il(),u=nl(a,o,t.heroId,s.id,e.monsterInstanceCounter);u&&(e.monsters.push(u),e.monsterInstanceCounter+=1,e.recentlySpawnedMonsterId=u.instanceId),e.monsterDeck=l}}}}e.turnState.currentPhase="exploration-phase"},endExplorationPhase:e=>{e.turnState.currentPhase==="exploration-phase"&&(e.turnState.currentPhase="villain-phase")},endVillainPhase:e=>{e.turnState.currentPhase==="villain-phase"&&(e.turnState.currentHeroIndex=(e.turnState.currentHeroIndex+1)%e.heroTokens.length,e.turnState.currentHeroIndex===0&&(e.turnState.turnNumber+=1),e.turnState.currentPhase="hero-phase")},dismissMonsterCard:e=>{e.recentlySpawnedMonsterId=null}}}),{startGame:ll,setHeroPosition:Yl,showMovement:cl,hideMovement:ul,moveHero:fl,resetGame:dl,endHeroPhase:hl,endExplorationPhase:vl,endVillainPhase:_l,dismissMonsterCard:pl}=Qi.actions,ml=Qi.reducer,Z=fo({reducer:{heroes:Do,game:ml}});typeof window<"u"&&(window.__REDUX_STORE__=Z);function Se(e){const t="/Ashardalon/pr-55/",n=e.startsWith("/")?e.slice(1):e;return(t.endsWith("/")?t:t+"/")+n}var gl=J('<button><img class="hero-image svelte-1rwnzlz"/> <div class="hero-info svelte-1rwnzlz"><span class="hero-name svelte-1rwnzlz" data-testid="hero-name"> </span> <span class="hero-class svelte-1rwnzlz"> </span></div></button>'),wl=J('<button><img class="hero-image svelte-1rwnzlz"/> <div class="hero-info svelte-1rwnzlz"><span class="hero-name svelte-1rwnzlz" data-testid="hero-name"> </span> <span class="hero-class svelte-1rwnzlz"> </span></div></button>'),yl=J('<button><img class="hero-image svelte-1rwnzlz"/> <div class="hero-info svelte-1rwnzlz"><span class="hero-name svelte-1rwnzlz" data-testid="hero-name"> </span> <span class="hero-class svelte-1rwnzlz"> </span></div></button>'),xl=J('<button><img class="hero-image svelte-1rwnzlz"/> <div class="hero-info svelte-1rwnzlz"><span class="hero-name svelte-1rwnzlz" data-testid="hero-name"> </span> <span class="hero-class svelte-1rwnzlz"> </span></div></button>'),bl=J('<div class="character-select svelte-1rwnzlz" data-testid="character-select"><div class="edge-zone edge-top svelte-1rwnzlz" data-testid="edge-top"><div class="hero-row svelte-1rwnzlz" data-testid="hero-grid"></div></div> <div class="middle-section svelte-1rwnzlz"><div class="edge-zone edge-left svelte-1rwnzlz" data-testid="edge-left"><div class="hero-column svelte-1rwnzlz"></div></div> <div class="center-zone svelte-1rwnzlz" data-testid="center-zone"><h1 class="svelte-1rwnzlz">Select Your Heroes</h1> <p class="instructions svelte-1rwnzlz">Choose 1-5 heroes for your adventure</p> <p class="instructions svelte-1rwnzlz">Tap a hero from your edge of the table</p> <div class="selection-info svelte-1rwnzlz"><span data-testid="selected-count"> </span></div> <button class="start-button svelte-1rwnzlz" data-testid="start-game-button">Start Adventure</button></div> <div class="edge-zone edge-right svelte-1rwnzlz" data-testid="edge-right"><div class="hero-column svelte-1rwnzlz"></div></div></div> <div class="edge-zone edge-bottom svelte-1rwnzlz" data-testid="edge-bottom"><div class="hero-row svelte-1rwnzlz"></div></div></div>');function Tl(e,t){ct(t,!0);let n=Q(ve([])),r=Q(ve([])),i=Q(ve({}));rn(()=>{const E=Z.subscribe(()=>{const x=Z.getState();A(n,x.heroes.selectedHeroes,!0),A(r,x.heroes.availableHeroes,!0),A(i,x.heroes.heroEdgeMap,!0)}),y=Z.getState();return A(n,y.heroes.selectedHeroes,!0),A(r,y.heroes.availableHeroes,!0),A(i,y.heroes.heroEdgeMap,!0),E});function s(E,y){return c(i)[E]===y}function a(E,y){const x=c(i)[E];return x!==void 0&&x!==y}function l(E,y){Z.dispatch(Co({heroId:E,edge:y}))}function o(){c(n).length>0&&Z.dispatch(ll({heroIds:c(n).map(E=>E.id)}))}function u(){return c(n).length>=1&&c(n).length<=5}var f=bl(),v=_(f),d=_(v);Ye(d,21,()=>c(r),E=>E.id,(E,y)=>{var x=gl();let G;x.__click=()=>l(c(y).id,"top");var V=_(x),xe=S(V,2),ee=_(xe),Pe=_(ee),Oe=S(ee,2),he=_(Oe);te((le,be,qe)=>{G=He(x,1,"hero-card svelte-1rwnzlz",null,G,le),O(x,"data-testid",`hero-${c(y).id??""}-top`),x.disabled=be,O(V,"src",qe),O(V,"alt",c(y).name),L(Pe,c(y).name),L(he,c(y).heroClass)},[()=>({selected:s(c(y).id,"top"),unavailable:a(c(y).id,"top")}),()=>a(c(y).id,"top"),()=>Se(c(y).imagePath)]),F(E,x)});var h=S(v,2),b=_(h),N=_(b);Ye(N,21,()=>c(r),E=>E.id,(E,y)=>{var x=wl();let G;x.__click=()=>l(c(y).id,"left");var V=_(x),xe=S(V,2),ee=_(xe),Pe=_(ee),Oe=S(ee,2),he=_(Oe);te((le,be,qe)=>{G=He(x,1,"hero-card svelte-1rwnzlz",null,G,le),O(x,"data-testid",`hero-${c(y).id??""}-left`),x.disabled=be,O(V,"src",qe),O(V,"alt",c(y).name),L(Pe,c(y).name),L(he,c(y).heroClass)},[()=>({selected:s(c(y).id,"left"),unavailable:a(c(y).id,"left")}),()=>a(c(y).id,"left"),()=>Se(c(y).imagePath)]),F(E,x)});var p=S(b,2),k=S(_(p),6),$=_(k),I=_($),T=S(k,2);T.__click=o;var P=S(p,2),U=_(P);Ye(U,21,()=>c(r),E=>E.id,(E,y)=>{var x=yl();let G;x.__click=()=>l(c(y).id,"right");var V=_(x),xe=S(V,2),ee=_(xe),Pe=_(ee),Oe=S(ee,2),he=_(Oe);te((le,be,qe)=>{G=He(x,1,"hero-card svelte-1rwnzlz",null,G,le),O(x,"data-testid",`hero-${c(y).id??""}-right`),x.disabled=be,O(V,"src",qe),O(V,"alt",c(y).name),L(Pe,c(y).name),L(he,c(y).heroClass)},[()=>({selected:s(c(y).id,"right"),unavailable:a(c(y).id,"right")}),()=>a(c(y).id,"right"),()=>Se(c(y).imagePath)]),F(E,x)});var B=S(h,2),C=_(B);Ye(C,21,()=>c(r),E=>E.id,(E,y)=>{var x=xl();let G;x.__click=()=>l(c(y).id,"bottom");var V=_(x),xe=S(V,2),ee=_(xe),Pe=_(ee),Oe=S(ee,2),he=_(Oe);te((le,be,qe)=>{G=He(x,1,"hero-card svelte-1rwnzlz",null,G,le),O(x,"data-testid",`hero-${c(y).id??""}`),x.disabled=be,O(V,"src",qe),O(V,"alt",c(y).name),L(Pe,c(y).name),L(he,c(y).heroClass)},[()=>({selected:s(c(y).id,"bottom"),unavailable:a(c(y).id,"bottom")}),()=>a(c(y).id,"bottom"),()=>Se(c(y).imagePath)]),F(E,x)}),te(E=>{L(I,`${c(n).length??""} heroes selected`),T.disabled=E},[()=>!u()]),F(e,f),ut()}vn(["click"]);var El=J('<button class="move-square svelte-ehd1hj" data-testid="move-square"><span class="sr-only svelte-ehd1hj"> </span></button>'),Sl=J('<div class="movement-overlay svelte-ehd1hj" data-testid="movement-overlay"></div>');function kl(e,t){ct(t,!0);function n(s){const a=t.tileOffsetX+s.x*t.cellSize,l=t.tileOffsetY+s.y*t.cellSize;return`left: ${a}px; top: ${l}px; width: ${t.cellSize}px; height: ${t.cellSize}px;`}function r(s,a){s.stopPropagation(),t.onSquareClick(a)}var i=Sl();Ye(i,21,()=>t.validMoveSquares,s=>`${s.x},${s.y}`,(s,a)=>{var l=El();l.__click=f=>r(f,c(a));var o=_(l),u=_(o);te(f=>{O(l,"data-position-x",c(a).x),O(l,"data-position-y",c(a).y),dt(l,f),L(u,`Move to (${c(a).x??""}, ${c(a).y??""})`)},[()=>n(c(a))]),F(s,l)}),F(e,i),ut()}vn(["click"]);var Il=J('<div class="tile-deck-counter svelte-9649r" data-testid="tile-deck-counter"><span class="deck-icon svelte-9649r">ð¦</span> <span class="deck-count svelte-9649r" data-testid="tile-deck-count"> </span> <span class="deck-label svelte-9649r">tiles</span></div>');function Pl(e,t){var n=Il(),r=S(_(n),2),i=_(r);te(()=>L(i,t.tileCount)),F(e,n)}var Ml=J('<div class="unexplored-edge svelte-12eown4" data-testid="unexplored-edge"><span class="question-mark svelte-12eown4">?</span></div>');function Cl(e,t){ct(t,!0);const r=(()=>{const l=t.cellSize*1.5,o=36;switch(t.direction){case"north":return{left:`${t.tileWidth/2-l/2}px`,top:`${o-8/2}px`,width:`${l}px`,height:"8px"};case"south":return{left:`${t.tileWidth/2-l/2}px`,bottom:`${o-8/2}px`,width:`${l}px`,height:"8px"};case"east":return{right:`${o-8/2}px`,top:`${t.tileHeight/2-l/2}px`,width:"8px",height:`${l}px`};case"west":return{left:`${o-8/2}px`,top:`${t.tileHeight/2-l/2}px`,width:"8px",height:`${l}px`}}})(),i=Object.entries(r).map(([a,l])=>`${a}: ${l}`).join("; ");var s=Ml();te(()=>{O(s,"data-direction",t.direction),dt(s,i)}),F(e,s),ut()}var Dl=J('<div class="monster-token svelte-1g5ysl" data-testid="monster-token"><img class="token-image svelte-1g5ysl"/> <span class="token-label svelte-1g5ysl"> </span></div>');function Ol(e,t){ct(t,!0);const n=W(()=>cr.find(l=>l.id===t.monster.monsterId)),r=W(()=>()=>{const l=t.cellSize/2,o=t.tilePixelOffset.x+t.tileOffsetX+t.monster.position.x*t.cellSize+l,u=t.tilePixelOffset.y+t.tileOffsetY+t.monster.position.y*t.cellSize+l;return`left: ${o}px; top: ${u}px;`});var i=Ne(),s=Re(i);{var a=l=>{var o=Dl(),u=_(o),f=S(u,2),v=_(f);te((d,h)=>{O(o,"data-monster-id",t.monster.instanceId),dt(o,d),O(u,"src",h),O(u,"alt",c(n).name),L(v,c(n).name)},[()=>c(r)(),()=>Se(c(n).imagePath)]),F(l,o)};ne(s,l=>{c(n)&&l(a)})}F(e,i),ut()}var zl=J('<div class="monster-card-overlay svelte-at5lsg" role="dialog" aria-modal="true" aria-label="Monster spawned" tabindex="0" data-testid="monster-card-overlay"><div class="monster-card svelte-at5lsg" role="article" data-testid="monster-card"><div class="card-header svelte-at5lsg"><h3 class="monster-name svelte-at5lsg" data-testid="monster-name"> </h3> <button class="dismiss-button svelte-at5lsg" aria-label="Dismiss monster card" data-testid="dismiss-monster-card">â</button></div> <div class="card-image svelte-at5lsg"><img class="monster-image svelte-at5lsg"/></div> <div class="card-stats svelte-at5lsg"><div class="stat svelte-at5lsg"><span class="stat-label svelte-at5lsg">AC</span> <span class="stat-value svelte-at5lsg" data-testid="monster-ac"> </span></div> <div class="stat svelte-at5lsg"><span class="stat-label svelte-at5lsg">HP</span> <span class="stat-value svelte-at5lsg" data-testid="monster-hp"> </span></div> <div class="stat svelte-at5lsg"><span class="stat-label svelte-at5lsg">XP</span> <span class="stat-value svelte-at5lsg" data-testid="monster-xp"> </span></div></div> <p class="card-hint svelte-at5lsg">Click anywhere to dismiss</p></div></div>');function Al(e,t){ct(t,!0);const n=W(()=>cr.find(o=>o.id===t.monsterId));function r(){t.onDismiss&&t.onDismiss()}function i(o){(o.key==="Escape"||o.key==="Enter"||o.key===" ")&&(o.preventDefault(),r())}var s=Ne(),a=Re(s);{var l=o=>{var u=zl();u.__click=r,u.__keydown=i;var f=_(u);f.__click=x=>x.stopPropagation(),f.__keydown=x=>x.stopPropagation();var v=_(f),d=_(v),h=_(d),b=S(d,2);b.__click=r;var N=S(v,2),p=_(N),k=S(N,2),$=_(k),I=S(_($),2),T=_(I),P=S($,2),U=S(_(P),2),B=_(U),C=S(P,2),E=S(_(C),2),y=_(E);te(x=>{L(h,c(n).name),O(p,"src",x),O(p,"alt",c(n).name),L(T,c(n).ac),L(B,c(n).hp),L(y,c(n).xp)},[()=>Se(c(n).imagePath)]),F(o,u)};ne(a,o=>{c(n)&&o(l)})}F(e,s),ut()}vn(["click","keydown"]);var Rl=J('<div class="player-info svelte-8w11tm" data-testid="turn-indicator"><img class="player-avatar svelte-8w11tm"/> <div class="turn-details svelte-8w11tm"><span class="player-name svelte-8w11tm"> </span> <span class="turn-phase svelte-8w11tm" data-testid="turn-phase"> </span> <span class="turn-number svelte-8w11tm"> </span></div></div>'),Nl=J('<div class="player-info svelte-8w11tm"><img class="player-avatar svelte-8w11tm"/> <div class="turn-details svelte-8w11tm"><span class="player-name svelte-8w11tm"> </span> <span class="turn-phase svelte-8w11tm"> </span> <span class="turn-number svelte-8w11tm"> </span></div></div>'),Hl=J('<div><img class="tile-image svelte-8w11tm"/> <!></div>'),Fl=J('<div class="movement-overlay-container svelte-8w11tm"><!></div>'),Ll=J('<div data-testid="hero-token"><img class="token-image svelte-8w11tm"/> <span class="token-label svelte-8w11tm"> </span></div>'),Bl=J('<div class="player-info svelte-8w11tm"><img class="player-avatar svelte-8w11tm"/> <div class="turn-details svelte-8w11tm"><span class="player-name svelte-8w11tm"> </span> <span class="turn-phase svelte-8w11tm"> </span> <span class="turn-number svelte-8w11tm"> </span></div></div>'),jl=J('<div class="player-info svelte-8w11tm" data-testid="turn-indicator"><img class="player-avatar svelte-8w11tm"/> <div class="turn-details svelte-8w11tm"><span class="player-name svelte-8w11tm"> </span> <span class="turn-phase svelte-8w11tm" data-testid="turn-phase"> </span> <span class="turn-number svelte-8w11tm"> </span></div></div>'),ql=J('<div class="game-board svelte-8w11tm" data-testid="game-board"><div data-testid="player-zone-top"><!></div> <div class="middle-section svelte-8w11tm"><div data-testid="player-zone-left"><!></div> <div class="board-container svelte-8w11tm"><div class="dungeon-map svelte-8w11tm" data-testid="dungeon-map" role="button" tabindex="0"><!> <!> <!> <!></div> <div class="board-controls svelte-8w11tm"><!> <button class="end-phase-button svelte-8w11tm" data-testid="end-phase-button"> </button> <button class="reset-button svelte-8w11tm" data-testid="reset-button">â© Return to Character Select</button></div></div> <div data-testid="player-zone-right"><!></div></div> <div data-testid="player-zone-bottom"><!></div> <!></div>');function $l(e,t){ct(t,!0);const n=140,r=4,i=8,s=4,a=n*r,l=n*i,o=n*s,u=32,f=.15,v=1,d=36,h=36,b=632,N=632,p=1195,k=3,$=0;let I=Q(ve([])),T=Q(ve([])),P=Q(ve({currentHeroIndex:0,currentPhase:"hero-phase",turnNumber:1})),U=Q(ve([])),B=Q(!1),C=Q(ve({tiles:[],unexploredEdges:[],tileDeck:[]})),E=Q(ve([])),y=Q(null),x=Q(null),G=Q(1),V=W(()=>xe(c(C)));rn(()=>{const m=Z.subscribe(()=>{const w=Z.getState();A(I,w.game.heroTokens,!0),A(T,w.heroes.selectedHeroes,!0),A(P,w.game.turnState,!0),A(U,w.game.validMoveSquares,!0),A(B,w.game.showingMovement,!0),A(C,w.game.dungeon,!0),A(E,w.game.monsters,!0),A(y,w.game.recentlySpawnedMonsterId,!0)}),g=Z.getState();return A(I,g.game.heroTokens,!0),A(T,g.heroes.selectedHeroes,!0),A(P,g.game.turnState,!0),A(U,g.game.validMoveSquares,!0),A(B,g.game.showingMovement,!0),A(C,g.game.dungeon,!0),A(E,g.game.monsters,!0),A(y,g.game.recentlySpawnedMonsterId,!0),m});function xe(m){if(m.tiles.length===0)return{minCol:0,maxCol:0,minRow:0,maxRow:0,width:b,height:p};let g=1/0,w=-1/0,M=1/0,z=-1/0;for(const X of m.tiles)g=Math.min(g,X.position.col),w=Math.max(w,X.position.col),M=Math.min(M,X.position.row),z=Math.max(z,X.position.row);const H=w-g+1,j=b+(H-1)*a,Y=Math.max(0,-M),D=Math.max(0,z),ce=p+Y*o+D*o;return{minCol:g,maxCol:w,minRow:M,maxRow:z,width:Math.max(j,b),height:Math.max(ce,p)}}function ee(m,g){const w=(m.position.col-g.minCol)*a;let M=0;return m.position.row<0?M=(m.position.row-g.minRow)*o:m.position.row===0?M=Math.max(0,-g.minRow)*o-k:M=Math.max(0,-g.minRow)*o+l+(m.position.row-1)*o-k-$,{x:w,y:M}}function Pe(m){return m.tileType==="start"?"assets/StartTile.png":Vi.find(w=>w.tileType===m.tileType)?.imagePath||"assets/Tile_Black_x2_01.png"}function Oe(m){return m.tileType==="start"?{width:b,height:p}:{width:b,height:N}}rn(()=>{if(c(x)){const m=()=>{const w=c(x);if(!w)return;const M=w.clientWidth-u,z=w.clientHeight-u,H=c(V),j=M/H.width,Y=z/H.height,D=Math.min(j,Y,v);A(G,Math.max(D,f),!0)};m();const g=new ResizeObserver(m);return g.observe(c(x)),()=>g.disconnect()}});function he(m){return c(T).find(g=>g.id===m)}function le(){return c(I)[c(P).currentHeroIndex]?.heroId}function be(m){switch(m){case"hero-phase":return"Hero Phase";case"exploration-phase":return"Exploration Phase";case"villain-phase":return"Villain Phase"}}function qe(){Z.dispatch(dl())}function Zi(m,g){const w=n/2,M=g.x+d+m.x*n+w,z=g.y+h+m.y*n+w;return`left: ${M}px; top: ${z}px;`}function rt(){const m=c(P).currentHeroIndex%4;return["bottom","right","top","left"][m]}function ur(m){if(c(P).currentPhase!=="hero-phase")return;const g=le();if(!g)return;const w=he(g);w&&(c(B)?Z.dispatch(ul()):Z.dispatch(cl({heroId:g,speed:w.speed})))}function Ji(m){const g=le();g&&Z.dispatch(fl({heroId:g,position:m}))}function es(m){(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),ur())}function ts(){switch(c(P).currentPhase){case"hero-phase":Z.dispatch(hl());break;case"exploration-phase":Z.dispatch(vl());break;case"villain-phase":Z.dispatch(_l());break}}function ns(){switch(c(P).currentPhase){case"hero-phase":return"End Hero Phase";case"exploration-phase":return"End Exploration";case"villain-phase":return"End Villain Phase"}}function rs(){Z.dispatch(pl())}function is(m){const g=c(C).tiles.find(w=>w.id===m);return g?ee(g,c(V)):{x:0,y:0}}var fr=ql(),xn=_(fr);let dr;var ss=_(xn);{var as=m=>{const g=W(le),w=W(()=>c(g)?he(c(g)):void 0);var M=Ne(),z=Re(M);{var H=j=>{var Y=Rl(),D=_(Y),ce=S(D,2),X=_(ce),ze=_(X),ue=S(X,2),$e=_(ue),Ue=S(ue,2),Ge=_(Ue);te((Ve,ft)=>{O(D,"src",Ve),O(D,"alt",c(w).name),L(ze,`${c(w).name??""}'s Turn`),L($e,ft),L(Ge,`Turn ${c(P).turnNumber??""}`)},[()=>Se(c(w).imagePath),()=>be(c(P).currentPhase)]),F(j,Y)};ne(z,j=>{c(w)&&j(H)})}F(m,M)};ne(ss,m=>{rt()==="top"&&m(as)})}var hr=S(xn,2),bn=_(hr);let vr;var os=_(bn);{var ls=m=>{const g=W(le),w=W(()=>c(g)?he(c(g)):void 0);var M=Ne(),z=Re(M);{var H=j=>{var Y=Nl(),D=_(Y),ce=S(D,2),X=_(ce),ze=_(X),ue=S(X,2),$e=_(ue),Ue=S(ue,2),Ge=_(Ue);te((Ve,ft)=>{O(D,"src",Ve),O(D,"alt",c(w).name),L(ze,`${c(w).name??""}'s Turn`),L($e,ft),L(Ge,`Turn ${c(P).turnNumber??""}`)},[()=>Se(c(w).imagePath),()=>be(c(P).currentPhase)]),F(j,Y)};ne(z,j=>{c(w)&&j(H)})}F(m,M)};ne(os,m=>{rt()==="left"&&m(ls)})}var Tn=S(bn,2),gt=_(Tn);gt.__click=ur,gt.__keydown=es;var _r=_(gt);Ye(_r,17,()=>c(C).tiles,m=>m.id,(m,g)=>{const w=W(()=>ee(c(g),c(V))),M=W(()=>Oe(c(g)));var z=Hl();let H;var j=_(z),Y=S(j,2);Ye(Y,17,()=>c(C).unexploredEdges.filter(D=>D.tileId===c(g).id),D=>D.direction,(D,ce)=>{Cl(D,{get direction(){return c(ce).direction},cellSize:n,get tileWidth(){return c(M).width},get tileHeight(){return c(M).height}})}),te(D=>{H=He(z,1,"placed-tile svelte-8w11tm",null,H,{"start-tile":c(g).tileType==="start"}),O(z,"data-testid",c(g).tileType==="start"?"start-tile":"dungeon-tile"),O(z,"data-tile-id",c(g).id),dt(z,`left: ${c(w).x??""}px; top: ${c(w).y??""}px; width: ${c(M).width??""}px; height: ${c(M).height??""}px;`),O(j,"src",D),O(j,"alt",c(g).tileType)},[()=>Se(Pe(c(g)))]),F(m,z)});var pr=S(_r,2);{var cs=m=>{const g=W(()=>c(C).tiles.find(H=>H.tileType==="start"));var w=Ne(),M=Re(w);{var z=H=>{const j=W(()=>ee(c(g),c(V))),Y=W(()=>Oe(c(g)));var D=Fl(),ce=_(D);kl(ce,{get validMoveSquares(){return c(U)},tileOffsetX:d,tileOffsetY:h,cellSize:n,onSquareClick:Ji}),te(()=>dt(D,`left: ${c(j).x??""}px; top: ${c(j).y??""}px; width: ${c(Y).width??""}px; height: ${c(Y).height??""}px;`)),F(H,D)};ne(M,H=>{c(g)&&H(z)})}F(m,w)};ne(pr,m=>{c(B)&&c(U).length>0&&m(cs)})}var mr=S(pr,2);Ye(mr,17,()=>c(I),m=>m.heroId,(m,g)=>{const w=W(()=>he(c(g).heroId)),M=W(()=>c(g).heroId===le()),z=W(()=>c(C).tiles.find(D=>D.tileType==="start"));var H=Ne(),j=Re(H);{var Y=D=>{const ce=W(()=>ee(c(z),c(V)));var X=Ll();let ze;var ue=_(X),$e=S(ue,2),Ue=_($e);te((Ge,Ve)=>{ze=He(X,1,"hero-token svelte-8w11tm",null,ze,{active:c(M)}),O(X,"data-hero-id",c(g).heroId),dt(X,Ge),O(ue,"src",Ve),O(ue,"alt",c(w).name),L(Ue,c(w).name)},[()=>Zi(c(g).position,c(ce)),()=>Se(c(w).imagePath)]),F(D,X)};ne(j,D=>{c(w)&&c(z)&&D(Y)})}F(m,H)});var us=S(mr,2);Ye(us,17,()=>c(E),m=>m.instanceId,(m,g)=>{{let w=W(()=>is(c(g).tileId));Ol(m,{get monster(){return c(g)},cellSize:n,tileOffsetX:d,tileOffsetY:h,get tilePixelOffset(){return c(w)}})}});var fs=S(gt,2),gr=_(fs);Pl(gr,{get tileCount(){return c(C).tileDeck.length}});var En=S(gr,2);En.__click=ts;var ds=_(En),hs=S(En,2);hs.__click=qe,Ra(Tn,m=>A(x,m),()=>c(x));var wr=S(Tn,2);let yr;var vs=_(wr);{var _s=m=>{const g=W(le),w=W(()=>c(g)?he(c(g)):void 0);var M=Ne(),z=Re(M);{var H=j=>{var Y=Bl(),D=_(Y),ce=S(D,2),X=_(ce),ze=_(X),ue=S(X,2),$e=_(ue),Ue=S(ue,2),Ge=_(Ue);te((Ve,ft)=>{O(D,"src",Ve),O(D,"alt",c(w).name),L(ze,`${c(w).name??""}'s Turn`),L($e,ft),L(Ge,`Turn ${c(P).turnNumber??""}`)},[()=>Se(c(w).imagePath),()=>be(c(P).currentPhase)]),F(j,Y)};ne(z,j=>{c(w)&&j(H)})}F(m,M)};ne(vs,m=>{rt()==="right"&&m(_s)})}var Sn=S(hr,2);let xr;var ps=_(Sn);{var ms=m=>{const g=W(le),w=W(()=>c(g)?he(c(g)):void 0);var M=Ne(),z=Re(M);{var H=j=>{var Y=jl(),D=_(Y),ce=S(D,2),X=_(ce),ze=_(X),ue=S(X,2),$e=_(ue),Ue=S(ue,2),Ge=_(Ue);te((Ve,ft)=>{O(D,"src",Ve),O(D,"alt",c(w).name),L(ze,`${c(w).name??""}'s Turn`),L($e,ft),L(Ge,`Turn ${c(P).turnNumber??""}`)},[()=>Se(c(w).imagePath),()=>be(c(P).currentPhase)]),F(j,Y)};ne(z,j=>{c(w)&&j(H)})}F(m,M)};ne(ps,m=>{rt()==="bottom"&&m(ms)})}var gs=S(Sn,2);{var ws=m=>{const g=W(()=>c(E).find(H=>H.instanceId===c(y)));var w=Ne(),M=Re(w);{var z=H=>{Al(H,{get monsterId(){return c(g).monsterId},onDismiss:rs})};ne(M,H=>{c(g)&&H(z)})}F(m,w)};ne(gs,m=>{c(y)&&m(ws)})}te((m,g,w,M,z)=>{dr=He(xn,1,"edge-zone edge-top svelte-8w11tm",null,dr,m),vr=He(bn,1,"edge-zone edge-left svelte-8w11tm",null,vr,g),dt(gt,`transform: scale(${c(G)??""}); width: ${c(V).width??""}px; height: ${c(V).height??""}px;`),O(gt,"aria-label",c(B)?"Click to hide movement options":"Click to show movement options for current hero"),L(ds,w),yr=He(wr,1,"edge-zone edge-right svelte-8w11tm",null,yr,M),xr=He(Sn,1,"edge-zone edge-bottom svelte-8w11tm",null,xr,z)},[()=>({"active-edge":rt()==="top"}),()=>({"active-edge":rt()==="left"}),ns,()=>({"active-edge":rt()==="right"}),()=>({"active-edge":rt()==="bottom"})]),F(e,fr),ut()}vn(["click","keydown"]);var Ul=J('<main class="svelte-1n46o8q"><!></main>');function Gl(e,t){ct(t,!0);let n=Q("character-select");rn(()=>{const l=Z.subscribe(()=>{const u=Z.getState();A(n,u.game.currentScreen,!0)}),o=Z.getState();return A(n,o.game.currentScreen,!0),l});var r=Ul(),i=_(r);{var s=l=>{Tl(l,{})},a=l=>{var o=Ne(),u=Re(o);{var f=v=>{$l(v,{})};ne(u,v=>{c(n)==="game-board"&&v(f)},!0)}F(l,o)};ne(i,l=>{c(n)==="character-select"?l(s):l(a,!1)})}F(e,r),ut()}Sa(Gl,{target:document.getElementById("app")});
